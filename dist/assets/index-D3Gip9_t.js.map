{"version":3,"file":"index-D3Gip9_t.js","sources":["../../src/components/ScrollToTop.jsx","../../src/components/AppIcon.jsx","../../src/components/ErrorBoundary.jsx","../../src/context/NotificationContext.jsx","../../src/ui/ConfirmDialog.jsx","../../src/ui/ConfirmDialogContext.jsx","../../src/utils/auth.js","../../src/hooks/useTokenExpiration.js","../../src/utils/config.js","../../src/services/httpService.js","../../src/services/authService.js","../../src/hooks/useAuth.jsx","../../src/components/ProtectedRoute.jsx","../../src/components/GlobalButtonHandlers.jsx","../../src/utils/cn.js","../../src/components/ui/Button.jsx","../../src/pages/NotFound.jsx","../../src/components/ui/Input.jsx","../../src/components/AppImage.jsx","../../src/components/ui/Sidebar.jsx","../../src/components/ui/Header.jsx","../../src/components/ui/Breadcrumb.jsx","../../src/pages/project-management/components/ProjectFilters.jsx","../../src/services/proyectoService.js","../../src/services/clientService.js","../../src/pages/project-management/components/ProjectTable.jsx","../../src/components/ui/Select.jsx","../../src/services/personService.js","../../src/hooks/usePerson.js","../../src/services/estadoService.js","../../src/hooks/useEstado.js","../../src/pages/project-management/components/CreateProjectModal.jsx","../../src/pages/project-management/components/ProjectTimeline.jsx","../../src/pages/project-management/components/ProjectQuotations.jsx","../../src/pages/project-management/components/ProjectStats.jsx","../../src/pages/project-management/components/EditProjectModal.jsx","../../src/hooks/useProyect.js","../../src/pages/project-management/index.jsx","../../src/pages/project-detail-gallery/components/ImageUploadPanel.jsx","../../src/pages/project-detail-gallery/components/ImageLightbox.jsx","../../src/pages/project-detail-gallery/components/ImageGallery.jsx","../../src/pages/project-detail-gallery/components/ProjectInfoPanel.jsx","../../src/pages/project-detail-gallery/index.jsx","../../src/pages/project-gallery-viewer/components/ImageGallery.jsx","../../src/pages/project-gallery-viewer/components/FilterToolbar.jsx","../../src/pages/project-gallery-viewer/components/ImageLightbox.jsx","../../src/pages/project-gallery-viewer/components/BulkActions.jsx","../../src/pages/project-gallery-viewer/components/ProjectInfo.jsx","../../src/pages/project-gallery-viewer/index.jsx","../../src/pages/project-documentation-center/components/DocumentTree.jsx","../../src/pages/project-documentation-center/components/WorkflowStatus.jsx","../../src/pages/project-documentation-center/components/QuotationWorkflow.jsx","../../src/pages/project-documentation-center/components/ProgressTracking.jsx","../../src/pages/project-documentation-center/components/DocumentValidation.jsx","../../src/pages/project-documentation-center/index.jsx","../../src/pages/project-workflow-management/components/ProjectCard.jsx","../../src/pages/project-workflow-management/components/DocumentUploadPanel.jsx","../../src/pages/project-workflow-management/components/QuotationPanel.jsx","../../src/pages/project-workflow-management/components/ValidationPanel.jsx","../../src/pages/project-workflow-management/index.jsx","../../src/pages/quotation-builder/components/QuotationForm.jsx","../../src/pages/quotation-builder/components/QuotationPreview.jsx","../../src/pages/quotation-builder/components/MaterialIdentification.jsx","../../src/pages/quotation-builder/components/CommunicationPanel.jsx","../../src/pages/quotation-builder/components/VersionControl.jsx","../../src/pages/quotation-builder/index.jsx","../../src/pages/inventory-management/components/OrderDetailsModal.jsx","../../src/services/ordenCompraService.js","../../src/pages/inventory-management/components/InventoryTable.jsx","../../src/pages/inventory-management/components/InventoryFilters.jsx","../../src/pages/inventory-management/components/StockAlerts.jsx","../../src/pages/inventory-management/components/PurchaseOrderPanel.jsx","../../src/pages/inventory-management/components/InventoryStats.jsx","../../src/services/articuloService.js","../../src/hooks/useInventory.js","../../src/pages/inventory-management/components/NewItemModal.jsx","../../src/pages/inventory-management/components/ItemDetailsModal.jsx","../../src/pages/inventory-management/components/EditItemModal.jsx","../../src/pages/inventory-management/components/CreatePOModal.jsx","../../src/services/requisiService.js","../../src/hooks/useRequisi.js","../../src/services/operacService.js","../../src/hooks/useOperac.js","../../src/pages/work-order-processing/components/RequisitionModal.jsx","../../src/hooks/useOrder.js","../../src/pages/inventory-management/index.jsx","../../src/pages/login/components/CompanyBranding.jsx","../../src/components/ui/Checkbox.jsx","../../src/pages/login/components/LoginForm.jsx","../../src/pages/login/components/CredentialsHelper.jsx","../../src/pages/login/components/SecurityFeatures.jsx","../../src/pages/login/index.jsx","../../src/pages/financial-management/components/FilterGastos.jsx","../../src/pages/financial-management/components/FilterControls.jsx","../../src/services/finanzasService.js","../../src/pages/financial-management/components/PaymentAuthorizationModal.jsx","../../src/hooks/useFinanzas.js","../../src/pages/financial-management/components/ExpenseTrackingTable.jsx","../../src/pages/financial-management/components/FinancialSummaryWidget.jsx","../../src/pages/financial-management/components/ReceiptManagementPanel.jsx","../../src/pages/financial-management/components/NewExpenseModal.jsx","../../src/pages/financial-management/components/ModalGestionCompra.jsx","../../src/services/gastosService.js","../../src/hooks/useGastos.js","../../src/pages/financial-management/components/GastosTable.jsx","../../src/pages/financial-management/index.jsx","../../src/pages/personnel-management/components/PersonnelTable.jsx","../../src/pages/personnel-management/components/FilterToolbar.jsx","../../src/pages/personnel-management/components/ComplianceDashboard.jsx","../../src/pages/personnel-management/components/PersonnelModal.jsx","../../src/pages/personnel-management/index.jsx","../../src/hooks/useClient.js","../../src/services/communicationService.js","../../src/hooks/useCommunication.js","../../src/pages/client-management/components/ClientCard.jsx","../../src/pages/client-management/components/ClientTable.jsx","../../src/pages/client-management/components/ClientFilters.jsx","../../src/pages/client-management/components/ClientCommunicationPanel.jsx","../../src/pages/client-management/components/DocumentStatus.jsx","../../src/pages/client-management/components/ContractAlerts.jsx","../../src/pages/client-management/components/NewClientModal.jsx","../../src/pages/client-management/index.jsx","../../src/pages/work-order-processing/components/WorkOrderModal.jsx","../../src/pages/work-order-processing/components/WorkOrderTable.jsx","../../src/pages/work-order-processing/components/FilterToolbar.jsx","../../src/pages/work-order-processing/components/InventoryPanel.jsx","../../src/pages/work-order-processing/components/StatsCards.jsx","../../src/pages/work-order-processing/index.jsx","../../src/services/tallerService.js","../../src/hooks/useOperacAlt.js","../../src/pages/workshop-operations-management/components/WorkflowBoard.jsx","../../src/pages/workshop-operations-management/components/WorkflowControls.jsx","../../src/pages/workshop-operations-management/components/MaterialReceptionPanel.jsx","../../src/pages/workshop-operations-management/components/SafetyChecklistPanel.jsx","../../src/pages/workshop-operations-management/components/AttendancePanel.jsx","../../src/pages/workshop-operations-management/components/QualityControlPanel.jsx","../../src/pages/workshop-operations-management/components/ChangeOrderPanel.jsx","../../src/pages/workshop-operations-management/index.jsx","../../src/pages/workshop-operations-center/components/WorkflowBoard.jsx","../../src/pages/workshop-operations-center/components/MaterialReceptionPanel.jsx","../../src/pages/workshop-operations-center/components/SafetyChecklistPanel.jsx","../../src/pages/workshop-operations-center/components/AttendancePanel.jsx","../../src/pages/workshop-operations-center/components/QualityControlPanel.jsx","../../src/pages/workshop-operations-center/components/EvidenceSubmissionPanel.jsx","../../src/pages/workshop-operations-center/components/ChangeOrderPanel.jsx","../../src/pages/workshop-operations-center/components/WorkshopStats.jsx","../../src/pages/workshop-operations-center/components/ShiftManagementPanel.jsx","../../src/pages/workshop-operations-center/index.jsx","../../src/pages/sales-opportunity-management/components/CommunicationPanel.jsx","../../src/pages/sales-opportunity-management/components/NewOpportunityModal.jsx","../../src/services/opportunityService.js","../../src/hooks/useOpportunity.js","../../src/pages/sales-opportunity-management/index.jsx","../../src/services/quotationService.js","../../src/hooks/useQuotation.js","../../src/pages/quotation-development-center/components/QuotationBuilder.jsx","../../src/pages/quotation-development-center/components/MaterialRiskChecklist.jsx","../../src/pages/quotation-development-center/components/QuotationPreview.jsx","../../src/pages/quotation-development-center/components/ClientCommunication.jsx","../../src/pages/quotation-development-center/components/RevisionHistory.jsx","../../src/pages/quotation-development-center/components/InternalReview.jsx","../../src/pages/quotation-development-center/components/NewQuotationModal.jsx","../../src/pages/quotation-development-center/index.jsx","../../src/pages/sales-execution-monitoring/components/StartupTrackingPanel.jsx","../../src/pages/sales-execution-monitoring/components/ExecutionProgressPanel.jsx","../../src/pages/sales-execution-monitoring/components/ClientCommunicationPanel.jsx","../../src/pages/sales-execution-monitoring/components/ChangeRequestPanel.jsx","../../src/pages/sales-execution-monitoring/components/DeliveryManagementPanel.jsx","../../src/pages/sales-execution-monitoring/components/TraceabilityPanel.jsx","../../src/pages/sales-execution-monitoring/index.jsx","../../src/pages/project-abonos-management/components/ProjectFilters.jsx","../../src/pages/project-abonos-management/components/ProjectTable.jsx","../../src/services/abonoService.js","../../src/pages/project-abonos-management/components/AbonosStats.jsx","../../src/pages/project-abonos-management/components/CreateProjectModal.jsx","../../src/pages/project-abonos-management/components/EditProjectModal.jsx","../../src/hooks/useAbono.js","../../src/pages/project-abonos-management/components/RegisterAbonoModal.jsx","../../src/pages/project-abonos-management/components/EditAbonoModal.jsx","../../src/pages/project-abonos-management/components/ViewAbonosModal.jsx","../../src/pages/project-abonos-management/index.jsx","../../src/services/userService.js","../../src/hooks/useUsers.js","../../src/pages/user-management/components/UserFormModal.jsx","../../src/pages/user-management/components/UserTable.jsx","../../src/pages/user-management/index.jsx","../../src/Routes.jsx","../../src/ui/NotificationContainer.jsx","../../src/App.jsx","../../src/index.jsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst ScrollToTop = () => {\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default ScrollToTop;","import React from 'react';\r\nimport * as LucideIcons from 'lucide-react';\r\nimport { HelpCircle } from 'lucide-react';\r\n\r\nfunction Icon({\r\n    name,\r\n    size = 24,\r\n    color = \"currentColor\",\r\n    className = \"\",\r\n    strokeWidth = 2,\r\n    ...props\r\n}) {\r\n    const IconComponent = LucideIcons?.[name];\r\n\r\n    if (!IconComponent) {\r\n        return <HelpCircle size={size} color=\"gray\" strokeWidth={strokeWidth} className={className} {...props} />;\r\n    }\r\n\r\n    return <IconComponent\r\n        size={size}\r\n        color={color}\r\n        strokeWidth={strokeWidth}\r\n        className={className}\r\n        {...props}\r\n    />;\r\n}\r\nexport default Icon;","import React from \"react\";\r\nimport Icon from \"./AppIcon\";\r\n\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    error.__ErrorBoundary = true;\r\n    window.__COMPONENT_ERROR__?.(error, errorInfo);\r\n    // console.log(\"Error caught by ErrorBoundary:\", error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state?.hasError) {\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-neutral-50\">\r\n          <div className=\"text-center p-8 max-w-md\">\r\n            <div className=\"flex justify-center items-center mb-2\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"42px\" height=\"42px\" viewBox=\"0 0 32 33\" fill=\"none\">\r\n                <path d=\"M16 28.5C22.6274 28.5 28 23.1274 28 16.5C28 9.87258 22.6274 4.5 16 4.5C9.37258 4.5 4 9.87258 4 16.5C4 23.1274 9.37258 28.5 16 28.5Z\" stroke=\"#343330\" strokeWidth=\"2\" strokeMiterlimit=\"10\" />\r\n                <path d=\"M11.5 15.5C12.3284 15.5 13 14.8284 13 14C13 13.1716 12.3284 12.5 11.5 12.5C10.6716 12.5 10 13.1716 10 14C10 14.8284 10.6716 15.5 11.5 15.5Z\" fill=\"#343330\" />\r\n                <path d=\"M20.5 15.5C21.3284 15.5 22 14.8284 22 14C22 13.1716 21.3284 12.5 20.5 12.5C19.6716 12.5 19 13.1716 19 14C19 14.8284 19.6716 15.5 20.5 15.5Z\" fill=\"#343330\" />\r\n                <path d=\"M21 22.5C19.9625 20.7062 18.2213 19.5 16 19.5C13.7787 19.5 12.0375 20.7062 11 22.5\" stroke=\"#343330\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n              </svg>\r\n            </div>\r\n            <div className=\"flex flex-col gap-1 text-center\">\r\n              <h1 className=\"text-2xl font-medium text-neutral-800\">Something went wrong</h1>\r\n              <p className=\"text-neutral-600 text-base w w-8/12 mx-auto\">We encountered an unexpected error while processing your request.</p>\r\n            </div>\r\n            <div className=\"flex justify-center items-center mt-6\">\r\n              <button\r\n                onClick={() => {\r\n                  window.location.href = \"/\";\r\n                }}\r\n                className=\"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded flex items-center gap-2 transition-colors duration-200 shadow-sm\"\r\n              >\r\n                <Icon name=\"ArrowLeft\" size={18} color=\"#fff\" />\r\n                Back\r\n              </button>\r\n            </div>\r\n          </div >\r\n        </div >\r\n      );\r\n    }\r\n\r\n    return this.props?.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;","import { createContext, useContext, useState, useCallback } from 'react';\r\n\r\n/**\r\n * Contexto para el manejo de notificaciones\r\n */\r\nexport const NotificationContext = createContext();\r\n\r\n/**\r\n * Hook personalizado para usar el contexto de notificaciones\r\n */\r\n\r\n\r\n/**\r\n * Tipos de notificaci贸n\r\n */\r\nexport const NotificationTypes = {\r\n  SUCCESS: 'success',\r\n  ERROR: 'error',\r\n  WARNING: 'warning',\r\n  INFO: 'info'\r\n};\r\n\r\n/**\r\n * Provider del contexto de notificaciones\r\n */\r\nexport const NotificationProvider = ({ children }) => {\r\n  const [notifications, setNotifications] = useState([]);\r\n\r\n  // Agregar una nueva notificaci贸n\r\n  const addNotification = useCallback((message, type = NotificationTypes.INFO, options = {}) => {\r\n    const notification = {\r\n      id: Date.now() + Math.random(),\r\n      message,\r\n      type,\r\n      duration: options.duration || 5000,\r\n      persistent: options.persistent || false,\r\n      action: options.action || null,\r\n      createdAt: new Date().toISOString()\r\n    };\r\n\r\n    setNotifications(prev => [...prev, notification]);\r\n\r\n    // Auto-remover notificaci贸n si no es persistente\r\n    if (!notification.persistent && notification.duration > 0) {\r\n      setTimeout(() => {\r\n        setNotifications(prev => prev.filter(n => n.id !== notification.id));\r\n      }, notification.duration);\r\n    }\r\n\r\n    return notification.id;\r\n  }, []);\r\n\r\n  // Remover notificaci贸n espec铆fica\r\n  const removeNotification = useCallback((id) => {\r\n    setNotifications(prev => prev.filter(notification => notification.id !== id));\r\n  }, []);\r\n\r\n  // Limpiar todas las notificaciones\r\n  const clearNotifications = useCallback(() => {\r\n    setNotifications([]);\r\n  }, []);\r\n\r\n  // Limpiar notificaciones por tipo\r\n  const clearNotificationsByType = useCallback((type) => {\r\n    setNotifications(prev => prev.filter(notification => notification.type !== type));\r\n  }, []);\r\n\r\n  // Helpers para diferentes tipos de notificaciones\r\n  const showSuccess = useCallback((message, options = {}) => {\r\n    return addNotification(message, NotificationTypes.SUCCESS, options);\r\n  }, [addNotification]);\r\n\r\n  const showError = useCallback((message, options = {}) => {\r\n    return addNotification(message, NotificationTypes.ERROR, { \r\n      duration: 7000, \r\n      ...options \r\n    });\r\n  }, [addNotification]);\r\n\r\n  const showWarning = useCallback((message, options = {}) => {\r\n    return addNotification(message, NotificationTypes.WARNING, options);\r\n  }, [addNotification]);\r\n\r\n  const showInfo = useCallback((message, options = {}) => {\r\n    return addNotification(message, NotificationTypes.INFO, options);\r\n  }, [addNotification]);\r\n\r\n  // Mostrar error HTTP con formato espec铆fico\r\n  const showHttpError = useCallback((error, context = '') => {\r\n    let message = 'Ha ocurrido un error inesperado';\r\n\r\n    if (typeof error === 'string') {\r\n      message = error;\r\n    } else if (error?.userMessage) {\r\n      message = error.userMessage;\r\n    } else if (error?.message) {\r\n      message = error.message;\r\n    } else if (error?.response?.data?.message) {\r\n      message = error.response.data.message;\r\n    }\r\n\r\n    if (context) {\r\n      message = `${context}: ${message}`;\r\n    }\r\n\r\n    return showError(message, { duration: 8000 });\r\n  }, [showError]);\r\n\r\n  // Mostrar 茅xito de operaci贸n\r\n  const showOperationSuccess = useCallback((operation, resource = '') => {\r\n    const messages = {\r\n      create: `${resource} creado exitosamente`,\r\n      update: `${resource} actualizado exitosamente`,\r\n      delete: `${resource} Eliminada exitosamente`,\r\n      save: `${resource} guardado exitosamente`,\r\n      send: `${resource} enviado exitosamente`,\r\n      default: 'Operaci贸n completada exitosamente'\r\n    };\r\n\r\n    const message = messages[operation] || messages.default;\r\n    return showSuccess(message);\r\n  }, [showSuccess]);\r\n    //  Mostrar notificaci贸n tipo confirmaci贸n con botones\r\n\r\nconst showConfirm = useCallback((message, { onConfirm, onCancel } = {}) => {\r\n  const id = Date.now() + Math.random();\r\n\r\n  const action = (\r\n    <div className=\"flex justify-end gap-3 mt-3\">\r\n      <button\r\n        onClick={() => {\r\n          if (onCancel) onCancel();\r\n          removeNotification(id);\r\n        }}\r\n        className=\"px-4 py-1.5 text-sm font-medium border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition\"\r\n      >\r\n        Cancelar\r\n      </button>\r\n\r\n      <button\r\n        onClick={() => {\r\n          if (onConfirm) onConfirm();\r\n          removeNotification(id);\r\n        }}\r\n        className=\"px-4 py-1.5 text-sm font-medium rounded-lg bg-red-600 text-white hover:bg-red-700 transition\"\r\n      >\r\n        Eliminar\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  setNotifications(prev => [\r\n    ...prev,\r\n    {\r\n      id,\r\n      message: (\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"text-sm text-gray-800\">{message}</span>\r\n          {action}\r\n        </div>\r\n      ),\r\n      type: NotificationTypes.WARNING,\r\n      duration: 0, // No se cierra autom谩ticamente\r\n      persistent: true,\r\n    }\r\n  ]);\r\n}, [removeNotification]);\r\n\r\n \r\n\r\n\r\n  const value = {\r\n    notifications,\r\n    addNotification,\r\n    removeNotification,\r\n    clearNotifications,\r\n    clearNotificationsByType,\r\n    showSuccess,\r\n    showError,\r\n    showWarning,\r\n    showInfo,\r\n    showHttpError,\r\n    showOperationSuccess,\r\n    showConfirm,\r\n  };\r\n\r\n  return (\r\n    <NotificationContext.Provider value={value}>\r\n      {children}\r\n    </NotificationContext.Provider>\r\n  );\r\n};\r\n\r\n/**\r\n * Hook para usar el contexto de notificaciones\r\n */\r\nexport const useNotifications = () => {\r\n  const context = useContext(NotificationContext);\r\n\r\n  if (!context) {\r\n    throw new Error('useNotifications debe ser usado dentro de un NotificationProvider');\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\n/**\r\n * Hook para manejo de errores HTTP\r\n */\r\nexport const useErrorHandler = () => {\r\n  const { showHttpError, showOperationSuccess } = useNotifications();\r\n\r\n  const handleError = useCallback((error, context = '') => {\r\n    console.error('HTTP Error:', error);\r\n    showHttpError(error, context);\r\n  }, [showHttpError]);\r\n\r\n  const handleSuccess = useCallback((operation, resource = '') => {\r\n    showOperationSuccess(operation, resource);\r\n  }, [showOperationSuccess]);\r\n\r\n  return {\r\n    handleError,\r\n    handleSuccess\r\n  };\r\n};\r\n\r\n// Alias para usar el contexto de notificaciones como useNotification\r\nexport const useNotification = useNotifications;\r\n\r\nexport default NotificationContext;\r\n","import React from 'react';\r\n\r\nconst ConfirmDialog = ({ open, title, message, confirmText = 'S铆', cancelText = 'No', onConfirm, onCancel }) => {\r\n  if (!open) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"fixed inset-0 bg-black/50 transition-opacity\" onClick={onCancel} />\r\n      <div className=\"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm p-6\">\r\n        <h3 className=\"text-lg font-semibold text-foreground mb-2\">{title}</h3>\r\n        <p className=\"text-sm text-muted-foreground mb-6\">{message}</p>\r\n        <div className=\"flex justify-end space-x-2\">\r\n          <button\r\n            className=\"px-4 py-2 rounded bg-muted text-foreground hover:bg-gray-200 transition\"\r\n            onClick={onCancel}\r\n          >\r\n            {cancelText}\r\n          </button>\r\n          <button\r\n            className=\"px-4 py-2 rounded bg-primary text-white hover:bg-primary/80 transition\"\r\n            onClick={onConfirm}\r\n          >\r\n            {confirmText}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmDialog;\r\n","import React, { createContext, useContext, useState, useCallback } from 'react';\r\nimport ConfirmDialog from './ConfirmDialog';\r\n\r\nconst ConfirmDialogContext = createContext();\r\n\r\nexport const useConfirmDialog = () => useContext(ConfirmDialogContext);\r\n\r\nexport const ConfirmDialogProvider = ({ children }) => {\r\n  const [dialog, setDialog] = useState({ open: false });\r\n\r\n  const showConfirm = useCallback(({ title, message, confirmText, cancelText }) => {\r\n    return new Promise((resolve) => {\r\n      setDialog({\r\n        open: true,\r\n        title,\r\n        message,\r\n        confirmText,\r\n        cancelText,\r\n        onConfirm: () => {\r\n          setDialog({ open: false });\r\n          resolve(true);\r\n        },\r\n        onCancel: () => {\r\n          setDialog({ open: false });\r\n          resolve(false);\r\n        },\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <ConfirmDialogContext.Provider value={{ showConfirm }}>\r\n      {children}\r\n      <ConfirmDialog {...dialog} />\r\n    </ConfirmDialogContext.Provider>\r\n  );\r\n};\r\n","// Authentication and Authorization utilities\r\nexport const AUTH_ROLES = {\r\n  ADMIN: 'admin',\r\n  ADMINISTRACION: 'administracion',\r\n  PROYECTOS: 'proyectos',\r\n  VENTAS: 'ventas',\r\n  TALLER: 'taller'\r\n};\r\n\r\nexport const ROLE_PERMISSIONS = {\r\n  // Admin - Acceso total al sistema\r\n  [AUTH_ROLES?.ADMIN]: {\r\n    allowedPaths: [\r\n      // '/dashboard', // TODO: Habilitar cuando se implemente\r\n      '/oportunidades',\r\n      '/cotizaciones',\r\n      '/proyectos',\r\n      '/abonos',\r\n      '/operaciones',\r\n      '/personal',\r\n      '/inventario',\r\n      '/clientes',\r\n      '/finanzas',\r\n      '/usuarios',\r\n      '/visor-galeria',\r\n      '/galeria-proyecto',\r\n      '/documentacion-proyectos',\r\n      '/flujo-proyecto',\r\n      '/constructor-cotizaciones',\r\n      '/operaciones-taller',\r\n      '/centro-operaciones-taller',\r\n      '/monitoreo-ventas'\r\n    ],\r\n    defaultPath: '/oportunidades'\r\n  },\r\n  // Administraci贸n - Negocio, Personal y Abonos\r\n  [AUTH_ROLES?.ADMINISTRACION]: {\r\n    allowedPaths: [\r\n      '/clientes',\r\n      '/finanzas',\r\n      '/personal',\r\n      '/abonos'\r\n    ],\r\n    defaultPath: '/clientes'\r\n  },\r\n  // Proyectos - Cotizaciones y Proyectos\r\n  [AUTH_ROLES?.PROYECTOS]: {\r\n    allowedPaths: [\r\n      '/cotizaciones',\r\n      '/proyectos',\r\n      '/visor-galeria',\r\n      '/galeria-proyecto',\r\n      '/documentacion-proyectos',\r\n      '/flujo-proyecto',\r\n      '/constructor-cotizaciones'\r\n    ],\r\n    defaultPath: '/cotizaciones'\r\n  },\r\n  // Ventas - Oportunidades, Cotizaciones, Clientes y Proyectos\r\n  [AUTH_ROLES?.VENTAS]: {\r\n    allowedPaths: [\r\n      '/oportunidades',\r\n      '/cotizaciones',\r\n      '/constructor-cotizaciones',\r\n      '/monitoreo-ventas',\r\n      '/clientes',\r\n      '/proyectos',\r\n      '/visor-galeria',\r\n      '/galeria-proyecto',\r\n      '/documentacion-proyectos',\r\n      '/flujo-proyecto'\r\n    ],\r\n    defaultPath: '/oportunidades'\r\n  },\r\n  // Taller - Operaciones, Operaciones de Taller e Inventario\r\n  [AUTH_ROLES?.TALLER]: {\r\n    allowedPaths: [\r\n      '/operaciones',\r\n      '/operaciones-taller',\r\n      '/centro-operaciones-taller',\r\n      '/inventario'\r\n    ],\r\n    defaultPath: '/operaciones'\r\n  }\r\n};\r\n\r\n// Get current user from localStorage\r\nexport const getCurrentUser = () => {\r\n  const authToken = localStorage.getItem('authToken');\r\n  const userRole = localStorage.getItem('userRole');\r\n  const userEmail = localStorage.getItem('userEmail');\r\n\r\n  if (!authToken || !userRole) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    token: authToken,\r\n    role: userRole,\r\n    email: userEmail\r\n  };\r\n};\r\n\r\n// Check if user is authenticated\r\nexport const isAuthenticated = () => {\r\n  const user = getCurrentUser();\r\n  const expiresAt = localStorage.getItem('tokenExpiresAt');\r\n  if (!user || !user.token || !expiresAt) return false;\r\n  // Verifica expiraci贸n del token (24h)\r\n  if (Date.now() > Number(expiresAt)) {\r\n    logout();\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n// Check if user has permission to access a specific path\r\nexport const hasPermission = (path, userRole = null) => {\r\n  const currentUser = getCurrentUser();\r\n  // Normaliza el rol a min煤sculas y sin espacios extra\r\n  const normalizeRole = r => r?.toLowerCase().trim();\r\n  const role = normalizeRole(userRole || currentUser?.role);\r\n\r\n  // Normaliza el path, quitando par谩metros (ejemplo: /project-detail-gallery/123 -> /project-detail-gallery)\r\n  const normalizePath = p => {\r\n    if (!p) return '';\r\n    // Solo toma la primera parte despu茅s de la barra inicial y antes de cualquier par谩metro\r\n    const parts = p.split('/').filter(Boolean);\r\n    return parts.length > 1 ? `/${parts[0]}-${parts[1]}` : `/${parts[0]}`;\r\n  };\r\n  // Si el path tiene formato /algo/algo, lo dejamos como /algo-algo para coincidir con allowedPaths\r\n  const basePath = normalizePath(path);\r\n\r\n  // Busca el rol en el objeto de permisos\r\n  const permissions = ROLE_PERMISSIONS?.[role] || ROLE_PERMISSIONS?.[userRole] || ROLE_PERMISSIONS?.[normalizeRole(userRole)];\r\n  if (!permissions) {\r\n    return false;\r\n  }\r\n\r\n  // Verifica si el path base est谩 permitido\r\n  return permissions.allowedPaths?.includes(basePath);\r\n};\r\n\r\n// Get allowed navigation items for user role\r\nexport const getAllowedNavigationItems = (userRole) => {\r\n  if (!userRole || !ROLE_PERMISSIONS?.[userRole]) {\r\n    return [];\r\n  }\r\n\r\n  const allowedPaths = ROLE_PERMISSIONS?.[userRole]?.allowedPaths;\r\n\r\n  const allNavigationItems = [\r\n    // TODO: Habilitar cuando se implemente el dashboard\r\n    // {\r\n    //   label: 'Dashboard',\r\n    //   path: '/dashboard',\r\n    //   icon: 'LayoutDashboard',\r\n    //   tooltip: 'Resumen operacional y KPIs',\r\n    //   badge: null,\r\n    //   roles: [AUTH_ROLES?.ADMIN]\r\n    // },\r\n    {\r\n      label: 'Oportunidades',\r\n      path: '/oportunidades',\r\n      icon: 'Target',\r\n      tooltip: 'Gesti贸n de oportunidades de venta',\r\n      // badge: 8,\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.VENTAS]\r\n    },\r\n    {\r\n      label: 'Cotizaciones',\r\n      path: '/cotizaciones',\r\n      icon: 'FileText',\r\n      tooltip: 'Desarrollo y gesti贸n de cotizaciones',\r\n      badge: null,\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.VENTAS, AUTH_ROLES?.PROYECTOS]\r\n    },\r\n    {\r\n      label: 'Proyectos',\r\n      path: '/proyectos',\r\n      icon: 'FolderOpen',\r\n      tooltip: 'Gesti贸n del ciclo de vida de proyectos',\r\n      // badge: 5,\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.PROYECTOS, AUTH_ROLES?.VENTAS]\r\n    },\r\n    {\r\n      label: 'Abonos',\r\n      path: '/abonos',\r\n      icon: 'CreditCard',\r\n      tooltip: 'Gesti贸n de abonos de proyectos',\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.ADMINISTRACION]\r\n    },\r\n    {\r\n      label: 'Operaciones',\r\n      path: '/operaciones',\r\n      icon: 'ClipboardList',\r\n      tooltip: 'Procesamiento y seguimiento de 贸rdenes de trabajo',\r\n      // badge: 12,\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.TALLER]\r\n    },\r\n    {\r\n      label: 'Operaciones de Taller',\r\n      path: '/operaciones-taller',\r\n      icon: 'Tool',\r\n      tooltip: 'Gesti贸n de operaciones de taller',\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.TALLER]\r\n    },\r\n    // {\r\n    //   label: 'Centro de Operaciones de Taller',\r\n    //   path: '/workshop-operations-center',\r\n    //   icon: 'Home',\r\n    //   tooltip: 'Centro de operaciones de taller',\r\n    //   roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.WORKSHOP_SUPERVISOR]\r\n    // },\r\n    {\r\n      label: 'Recursos',\r\n      icon: 'Users',\r\n      tooltip: 'Gesti贸n de personal e inventario',\r\n      children: [\r\n        {\r\n          label: 'Personal',\r\n          path: '/personal',\r\n          icon: 'UserCheck',\r\n          tooltip: 'Gesti贸n de personal y horarios',\r\n          roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.ADMINISTRACION]\r\n        },\r\n        {\r\n          label: 'Inventario',\r\n          path: '/inventario',\r\n          icon: 'Package',\r\n          tooltip: 'Seguimiento de equipos y repuestos',\r\n          roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.TALLER]\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: 'Negocio',\r\n      icon: 'Building2',\r\n      tooltip: 'Gesti贸n de clientes y finanzas',\r\n      // badge: 3,\r\n      children: [\r\n        {\r\n          label: 'Clientes',\r\n          path: '/clientes',\r\n          icon: 'Users',\r\n          tooltip: 'Gesti贸n de relaciones con clientes',\r\n          roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.ADMINISTRACION, AUTH_ROLES?.VENTAS]\r\n        },\r\n        {\r\n          label: 'Finanzas',\r\n          path: '/finanzas',\r\n          icon: 'DollarSign',\r\n          tooltip: 'Supervisi贸n y reportes financieros',\r\n          // badge: 3,\r\n          roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.ADMINISTRACION]\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: 'Usuarios',\r\n      path: '/usuarios',\r\n      icon: 'UserCog',\r\n      tooltip: 'Gesti贸n de usuarios del sistema',\r\n      badge: null,\r\n      roles: [AUTH_ROLES?.ADMIN]\r\n    }\r\n  ];\r\n\r\n  // Filter navigation items based on user role and allowed paths\r\n  const filterItems = (items) => {\r\n    return items?.filter(item => {\r\n      if (item?.children) {\r\n        const allowedChildren = item?.children?.filter(child =>\r\n          child?.roles?.includes(userRole) && allowedPaths?.includes(child?.path)\r\n        );\r\n        if (allowedChildren?.length > 0) {\r\n          item.children = allowedChildren;\r\n          return true;\r\n        }\r\n        return false;\r\n      } else {\r\n        return item?.roles?.includes(userRole) && allowedPaths?.includes(item?.path);\r\n      }\r\n    });\r\n  };\r\n\r\n  return filterItems(allNavigationItems);\r\n};\r\n\r\n// Get default redirect path for user role\r\nexport const getDefaultPath = (userRole) => {\r\n  if (!userRole || !ROLE_PERMISSIONS?.[userRole]) {\r\n    return '/login';\r\n  }\r\n\r\n  return ROLE_PERMISSIONS?.[userRole]?.defaultPath;\r\n};\r\n\r\n// Logout user\r\nexport const logoutUser = () => {\r\n  // Limpiar todos los elementos de autenticaci贸n\r\n  localStorage.removeItem('authToken');\r\n  localStorage.removeItem('token'); \r\n  localStorage.removeItem('tokenExpiresAt');\r\n  localStorage.removeItem('userRole');\r\n  localStorage.removeItem('userEmail');\r\n  localStorage.removeItem('role');\r\n  localStorage.removeItem('rol');\r\n  localStorage.removeItem('rememberMe');\r\n  \r\n  // Forzar recarga completa para limpiar estado\r\n  window.location.replace('/login');\r\n}\r\n\r\nimport axios from \"axios\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nexport function logout() {\r\n  // Limpiar todos los elementos de autenticaci贸n\r\n  localStorage.removeItem(\"authToken\");\r\n  localStorage.removeItem(\"token\");\r\n  localStorage.removeItem(\"tokenExpiresAt\");\r\n  localStorage.removeItem(\"userRole\");\r\n  localStorage.removeItem(\"userEmail\");\r\n  localStorage.removeItem(\"role\");\r\n  localStorage.removeItem(\"rol\");\r\n  localStorage.removeItem(\"rememberMe\");\r\n  \r\n  // Forzar recarga completa para limpiar estado\r\n  window.location.replace(\"/login\");\r\n}\r\n\r\nexport async function checkBackendTokenConfig() {\r\n  try {\r\n    const apiUrl = import.meta.env.VITE_API_URL || \"\";\r\n    \r\n    // Hacer una petici贸n de login de prueba para ver la configuraci贸n del token\r\n    console.log(\"=== VERIFICANDO CONFIGURACIN DEL BACKEND ===\");\r\n    console.log(\"API URL:\", apiUrl);\r\n    console.log(\"============================================\");\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Error verificando configuraci贸n del backend:\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function renewToken(currentToken) {\r\n  try {\r\n    const apiUrl = import.meta.env.VITE_API_URL || \"\";\r\n    const response = await axios.post(\r\n      `${apiUrl}/usuarios/extender-sesion`,\r\n      {}, // POST sin body\r\n      {\r\n        headers: { Authorization: `Bearer ${currentToken}` },\r\n      }\r\n    );\r\n    \r\n    if (response.data && response.data.success && response.data.data && response.data.data.token) {\r\n      const newToken = response.data.data.token;\r\n      localStorage.setItem(\"authToken\", newToken);\r\n      \r\n      // Debug info del token renovado\r\n      try {\r\n        const decoded = jwtDecode(newToken);\r\n        if (decoded) {\r\n          const tokenDurationMs = (decoded.exp - decoded.iat) * 1000;\r\n          const tokenDurationMin = Math.round(tokenDurationMs / 1000 / 60);\r\n          \r\n          console.log(\"=== TOKEN RENOVADO INFO ===\");\r\n          console.log(\"Nuevo token emitido en:\", new Date(decoded.iat * 1000).toLocaleString());\r\n          console.log(\"Nuevo token expira en:\", new Date(decoded.exp * 1000).toLocaleString());\r\n          console.log(\"Duraci贸n configurada:\", tokenDurationMin, \"minutos\");\r\n          console.log(\"驴Fue extendido?\", decoded.extendedAt ? \"S铆\" : \"No\");\r\n          console.log(\"========================\");\r\n        }\r\n      } catch (error) {\r\n        console.warn(\"Error al decodificar token renovado:\", error);\r\n      }\r\n      \r\n      return newToken;\r\n    } else {\r\n      throw new Error(\"No se recibi贸 un token v谩lido del servidor\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error al renovar token:\", error);\r\n    // Si falla la renovaci贸n, hacer logout\r\n    logout();\r\n    throw error;\r\n  }\r\n}\r\n// ...existing code...","import { useEffect, useRef } from \"react\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport { useConfirmDialog } from \"../ui/ConfirmDialogContext\";\r\nimport { renewToken, logout } from \"../utils/auth\";\r\n\r\n/**\r\n * Hook para manejar la expiraci贸n y renovaci贸n del token JWT.\r\n * @param {string} token - El token JWT actual.\r\n * @param {function} onTokenRenewed - Callback para actualizar el token en el estado global.\r\n */\r\n\r\nexport default function useTokenExpiration(token, onTokenRenewed) {\r\n  const { showInfo } = useNotifications();\r\n  const { showConfirm } = useConfirmDialog();\r\n  const timeoutRef = useRef();\r\n  const isRenewingRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    \r\n    let decoded;\r\n    try {\r\n      decoded = jwtDecode(token);\r\n    } catch {\r\n      logout();\r\n      return;\r\n    }\r\n    \r\n    if (!decoded.exp) return;\r\n    \r\n    const expMs = decoded.exp * 1000;\r\n    const now = Date.now();\r\n    const msBeforeExpiry = expMs - now;\r\n    \r\n    console.log(`Token actual expira en: ${Math.round(msBeforeExpiry / 1000)} segundos`);\r\n    \r\n    // Si el token ya expir贸 o expira en menos de 30 segundos, renovar inmediatamente\r\n    if (msBeforeExpiry <= 30000) {\r\n      console.log(\"Token expira muy pronto, renovando inmediatamente\");\r\n      handleSessionExtension();\r\n      return;\r\n    }\r\n    \r\n    // Calcular cu谩ndo notificar:\r\n    // - Si el token dura m谩s de 5 minutos, notificar 2 minutos antes\r\n    // - Si el token dura entre 2-5 minutos, notificar cuando quede 1 minuto\r\n    // - Si el token dura menos de 2 minutos, notificar cuando quede 30 segundos\r\n    let notifyMs;\r\n    const totalDurationMs = msBeforeExpiry;\r\n    \r\n    if (totalDurationMs > 5 * 60 * 1000) { // M谩s de 5 minutos\r\n      notifyMs = msBeforeExpiry - 2 * 60 * 1000; // 2 minutos antes\r\n    } else if (totalDurationMs > 2 * 60 * 1000) { // Entre 2-5 minutos\r\n      notifyMs = msBeforeExpiry - 1 * 60 * 1000; // 1 minuto antes\r\n    } else { // Menos de 2 minutos\r\n      notifyMs = msBeforeExpiry - 30 * 1000; // 30 segundos antes\r\n    }\r\n    \r\n    // Asegurar que notifyMs no sea negativo\r\n    if (notifyMs <= 0) {\r\n      console.log(\"Tiempo de notificaci贸n ya pas贸, renovando inmediatamente\");\r\n      handleSessionExtension();\r\n      return;\r\n    }\r\n    \r\n    console.log(`Programando renovaci贸n en: ${Math.round(notifyMs / 1000)} segundos`);\r\n    timeoutRef.current = setTimeout(handleSessionExtension, notifyMs);\r\n    \r\n    return () => {\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n      // Limpiar el flag de renovaci贸n cuando el token cambie\r\n      isRenewingRef.current = false;\r\n    };\r\n    // eslint-disable-next-line\r\n  }, [token]);\r\n\r\n  async function handleSessionExtension() {\r\n    // Evitar m煤ltiples renovaciones simult谩neas\r\n    if (isRenewingRef.current) {\r\n      console.log(\"Ya hay una renovaci贸n en progreso, ignorando\");\r\n      return;\r\n    }\r\n    \r\n    isRenewingRef.current = true;\r\n    \r\n    try {\r\n      const confirmed = await showConfirm({\r\n        title: \"Extender sesi贸n\",\r\n        message: \"Tu sesi贸n est谩 por expirar. 驴Deseas extenderla?\",\r\n        confirmText: \"Extender sesi贸n\",\r\n        cancelText: \"Cerrar sesi贸n\",\r\n      });\r\n      \r\n      if (confirmed) {\r\n        try {\r\n          console.log(\"Renovando token... token actual:\", token);\r\n          const newToken = await renewToken(token);\r\n          console.log(\"Token renovado exitosamente:\", newToken ? \"\" : \"\");\r\n          \r\n          if (newToken) {\r\n            // Decodifica el nuevo token para mostrar la expiraci贸n\r\n            let decodedNew;\r\n            try {\r\n              decodedNew = jwtDecode(newToken);\r\n            } catch {\r\n              decodedNew = null;\r\n            }\r\n            \r\n            if (decodedNew?.exp) {\r\n              const expDate = new Date(decodedNew.exp * 1000);\r\n              console.log(\"Nuevo token expira en:\", expDate.toLocaleString());\r\n              showInfo(`Sesi贸n extendida hasta: ${expDate.toLocaleString()}`);\r\n            }\r\n            \r\n            if (onTokenRenewed) onTokenRenewed(newToken);\r\n            showInfo(\"Sesi贸n extendida correctamente.\");\r\n          } else {\r\n            throw new Error(\"No se recibi贸 un token v谩lido\");\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error al renovar el token:\", error);\r\n          showInfo(\"No se pudo extender la sesi贸n. Cerrando sesi贸n...\");\r\n          setTimeout(() => {\r\n            console.log(\"Ejecutando logout por error de renovaci贸n\");\r\n            logout();\r\n          }, 2000);\r\n        }\r\n      } else {\r\n        console.log(\"Usuario eligi贸 cerrar sesi贸n\");\r\n        logout();\r\n      }\r\n    } finally {\r\n      isRenewingRef.current = false;\r\n    }\r\n  }\r\n}\r\n","\r\n// Configuraci贸n centralizada de variables de entorno para Vite\r\n// Solo la URL del backend\r\n\r\nclass EnvConfig {\r\n  static get API_URL() {\r\n\r\n    // En producci贸n, usar la variable de entorno o el t煤nel como fallback\r\n    return import.meta.env.VITE_API_URL || \"https://qg8pqmgk-7071.usw3.devtunnels.ms/api\";\r\n  }\r\n\r\n  // Validaci贸n b谩sica\r\n  static validateRequiredEnvVars() {\r\n    const required = [\"VITE_API_URL\"];\r\n    const missing = required.filter((envVar) => !import.meta.env[envVar]);\r\n    if (missing.length > 0) {\r\n      console.warn(\"锔 Falta la variable de entorno requerida:\", missing);\r\n    }\r\n    return missing.length === 0;\r\n  }\r\n\r\n  // Debug helper\r\n  static logConfig() {\r\n    console.group(\" Configuraci贸n de entorno\");\r\n    // console.log eliminado\r\n    console.groupEnd();\r\n  }\r\n}\r\n\r\n// Validar al importar\r\nEnvConfig.validateRequiredEnvVars();\r\n\r\nexport default EnvConfig;\r\n","import axios from \"axios\";\r\n\r\n/**\r\n * Cliente HTTP centralizado con interceptors para manejo autom谩tico de tokens\r\n * Funciona como middleware para todas las peticiones de la aplicaci贸n\r\n */\r\nclass HttpService {\r\n  constructor() {\r\n    // Determinar la URL base seg煤n el entorno\r\n    const getBaseURL = () => {\r\n      // Detectar si estamos en desarrollo (localhost o 127.0.0.1)\r\n      const isDevelopment =\r\n        typeof window !== 'undefined' &&\r\n        (window.location.hostname === 'localhost' ||\r\n          window.location.hostname === '127.0.0.1' ||\r\n          window.location.hostname === '0.0.0.0' ||\r\n          import.meta.env.DEV);\r\n\r\n      // En desarrollo, usar el proxy de Vite\r\n      if (isDevelopment) {\r\n        return \"/api\";\r\n      }\r\n\r\n      // En producci贸n, usar la variable de entorno o el t煤nel como fallback\r\n      const apiUrl = import.meta.env.VITE_API_URL;\r\n      if (apiUrl) {\r\n        // Si la URL ya incluye /api, usarla tal cual, si no, agregarlo\r\n        return apiUrl.endsWith(\"/api\") ? apiUrl : `${apiUrl}/api`;\r\n      }\r\n\r\n      // Fallback: URL del t煤nel de VS Code\r\n      return \"https://qg8pqmgk-7071.usw3.devtunnels.ms/api\";\r\n    };\r\n\r\n    const baseURL = getBaseURL();\r\n\r\n    // Log para debug (solo en producci贸n)\r\n    if (typeof window !== 'undefined' && !window.location.hostname.includes('localhost')) {\r\n      console.log(' API Base URL:', baseURL);\r\n    }\r\n\r\n    this.api = axios.create({\r\n      baseURL: baseURL,\r\n      timeout: 30000,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n      },\r\n    });\r\n\r\n    this.setupInterceptors();\r\n  }\r\n\r\n  setupInterceptors() {\r\n    // REQUEST\r\n    this.api.interceptors.request.use(\r\n      (config) => {\r\n        const token = this.getToken();\r\n        if (token) config.headers.Authorization = `Bearer ${token}`;\r\n        return config;\r\n      },\r\n      (error) => Promise.reject(error)\r\n    );\r\n\r\n    // RESPONSE\r\n    this.api.interceptors.response.use(\r\n      (response) => response,\r\n      (error) => {\r\n        // Suprimir completamente 404 en comunicaciones (no es un error real)\r\n        if (\r\n          error.response?.status === 404 &&\r\n          error.config?.url?.includes(\"/comunicaciones/cliente/\")\r\n        ) {\r\n          // Retornar una respuesta exitosa vac铆a en lugar de error\r\n          return { data: { data: { comunicaciones: [] } } };\r\n        }\r\n\r\n        if (error.response?.status === 401) this.handleUnauthorized();\r\n        return Promise.reject(this.normalizeError(error));\r\n      }\r\n    );\r\n  }\r\n\r\n  getToken() {\r\n    return localStorage.getItem(\"authToken\");\r\n  }\r\n\r\n  setToken(token) {\r\n    if (token) {\r\n      localStorage.setItem(\"authToken\", token);\r\n    } else {\r\n      localStorage.removeItem(\"authToken\");\r\n    }\r\n  }\r\n\r\n  handleUnauthorized() {\r\n    this.setToken(null);\r\n    localStorage.removeItem(\"userRole\");\r\n    localStorage.removeItem(\"userEmail\");\r\n    if (window.location.pathname !== \"/login\") {\r\n      window.location.href = \"/login\";\r\n    }\r\n  }\r\n\r\n  normalizeError(error) {\r\n    return {\r\n      message: error.message || \"Error desconocido\",\r\n      status: error.response?.status,\r\n      data: error.response?.data,\r\n      isNetworkError: !error.response,\r\n      isServerError: error.response?.status >= 500,\r\n      isClientError:\r\n        error.response?.status >= 400 && error.response?.status < 500,\r\n      originalError: error,\r\n      userMessage:\r\n        error.response?.data?.message || error.message || \"Error desconocido\",\r\n    };\r\n  }\r\n\r\n  // M茅todos HTTP\r\n  async get(url, config = {}) {\r\n    const res = await this.api.get(url, config);\r\n    return res.data;\r\n  }\r\n\r\n  async post(url, data = {}, config = {}) {\r\n    const res = await this.api.post(url, data, config);\r\n    return res.data;\r\n  }\r\n\r\n  async put(url, data = {}, config = {}) {\r\n    const res = await this.api.put(url, data, config);\r\n    return res.data;\r\n  }\r\n\r\n  async patch(url, data = {}, config = {}) {\r\n    const res = await this.api.patch(url, data, config);\r\n    return res.data;\r\n  }\r\n\r\n  async delete(url, config = {}) {\r\n    const res = await this.api.delete(url, config);\r\n    return res.data;\r\n  }\r\n\r\n  async healthCheck() {\r\n    try {\r\n      const response = await this.get(\"/health\");\r\n      return { healthy: true, ...response };\r\n    } catch (error) {\r\n      return { healthy: false, error: error.userMessage };\r\n    }\r\n  }\r\n}\r\n\r\nconst httpService = new HttpService();\r\nexport default httpService;\r\n","import httpService from \"./httpService\";\r\n\r\n/**\r\n * Servicio de autenticaci贸n\r\n * Maneja todas las operaciones relacionadas con login, logout, registro, etc.\r\n */\r\nclass AuthService {\r\n  /**\r\n   * Iniciar sesi贸n\r\n   */\r\n  async login(email, password) {\r\n    try {\r\n      console.log(\"=== ENVIANDO LOGIN REQUEST ===\");\r\n      console.log(\"Email:\", email);\r\n      \r\n      const response = await httpService.post(\"/usuarios/login\", {\r\n        email,\r\n        password,\r\n      });\r\n      \r\n      console.log(\"=== RESPUESTA DEL SERVIDOR ===\");\r\n      console.log(\"Respuesta completa:\", response);\r\n      console.log(\"驴Tiene token?\", !!response.token);\r\n      console.log(\"Usuario:\", response.usuario);\r\n      console.log(\"=============================\");\r\n      \r\n      if (response.token) {\r\n        httpService.setToken(response.token);\r\n      }\r\n      return {\r\n        success: true,\r\n        data: response,\r\n        user: response.usuario,\r\n        token: response.token,\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Error en login:\", error);\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n        details: error,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cerrar sesi贸n\r\n   */\r\n  async logout() {\r\n    try {\r\n      await httpService.post(\"/usuarios/logout\");\r\n      httpService.setToken(null);\r\n      return { success: true };\r\n    } catch (error) {\r\n      httpService.setToken(null);\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n        details: error,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Registrar nuevo usuario\r\n   */\r\n  async register(userData) {\r\n    try {\r\n      const response = await httpService.post(\"/auth/register\", userData);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n        message: \"Usuario registrado exitosamente\",\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n        details: error,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Verificar token actual\r\n   */\r\n  async verifyToken() {\r\n    try {\r\n      const response = await httpService.get(\"/usuarios/token-info\");\r\n      return {\r\n        success: true,\r\n        valid: true,\r\n        user: response.tokenInfo?.usuario || response.usuario,\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        valid: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refrescar token\r\n   */\r\n  async refreshToken() {\r\n    try {\r\n      const response = await httpService.post(\"/usuarios/extender-sesion\");\r\n      if (response.token) {\r\n        httpService.setToken(response.token);\r\n      }\r\n      return {\r\n        success: true,\r\n        token: response.token,\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Solicitar recuperaci贸n de contrase帽a\r\n   */\r\n  async requestPasswordReset(email) {\r\n    try {\r\n      const response = await httpService.post(\"/auth/forgot-password\", {\r\n        email,\r\n      });\r\n      return {\r\n        success: true,\r\n        message:\r\n          \"Se ha enviado un email con instrucciones para recuperar tu contrase帽a\",\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Restablecer contrase帽a\r\n   */\r\n  async resetPassword(token, newPassword) {\r\n    try {\r\n      const response = await httpService.post(\"/auth/reset-password\", {\r\n        token,\r\n        password: newPassword,\r\n      });\r\n      return {\r\n        success: true,\r\n        message: \"Contrase帽a restablecida exitosamente\",\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cambiar contrase帽a (usuario autenticado)\r\n   */\r\n  async changePassword(currentPassword, newPassword) {\r\n    try {\r\n      const response = await httpService.put(\"/auth/change-password\", {\r\n        currentPassword,\r\n        newPassword,\r\n      });\r\n      return {\r\n        success: true,\r\n        message: \"Contrase帽a cambiada exitosamente\",\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtener perfil del usuario actual\r\n   */\r\n  async getProfile() {\r\n    try {\r\n      const response = await httpService.get(\"/auth/profile\");\r\n      return {\r\n        success: true,\r\n        user: response,\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Actualizar perfil del usuario\r\n   */\r\n  async updateProfile(profileData) {\r\n    try {\r\n      const response = await httpService.put(\"/auth/profile\", profileData);\r\n      return {\r\n        success: true,\r\n        user: response,\r\n        message: \"Perfil actualizado exitosamente\",\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nconst authService = new AuthService();\r\nexport default authService;\r\n","import { useState, useEffect, createContext, useContext } from \"react\";\r\nimport useTokenExpiration from \"./useTokenExpiration\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport EnvConfig from \"../utils/config\";\r\nimport authService from \"../services/authService\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\n// Contexto de autenticaci贸n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const loadUserFromStorage = async () => {\r\n      const token = localStorage.getItem(\"authToken\") || localStorage.getItem(\"token\");\r\n      const expiresAt = localStorage.getItem(\"tokenExpiresAt\");\r\n      const now = Date.now();\r\n      // Puede venir como 'userRole', 'role' o 'rol'\r\n      const userRole = localStorage.getItem(\"userRole\") || localStorage.getItem(\"role\") || localStorage.getItem(\"rol\");\r\n      const userEmail = localStorage.getItem(\"userEmail\");\r\n      \r\n      if (token) {\r\n        // Verificar si el token ha expirado\r\n        let tokenExpired = false;\r\n        try {\r\n          const decoded = jwtDecode(token);\r\n          const tokenExpTime = decoded.exp * 1000;\r\n          tokenExpired = now >= tokenExpTime;\r\n        } catch (error) {\r\n          console.warn(\"Error decodificando token:\", error);\r\n          tokenExpired = true;\r\n        }\r\n        \r\n        // Si el token no ha expirado o si no tenemos fecha de expiraci贸n v谩lida\r\n        if (!tokenExpired && (!expiresAt || now < Number(expiresAt))) {\r\n          const userData = {\r\n            token,\r\n            rol: userRole,\r\n            email: userEmail || \"usuario@ejemplo.com\",\r\n          };\r\n          setUser(userData);\r\n          setIsAuthenticated(true);\r\n        } else {\r\n          // Token expirado, limpiar todo\r\n          console.log(\"Token expirado, limpiando localStorage\");\r\n          localStorage.removeItem(\"authToken\");\r\n          localStorage.removeItem(\"token\");\r\n          localStorage.removeItem(\"tokenExpiresAt\");\r\n          localStorage.removeItem(\"userRole\");\r\n          localStorage.removeItem(\"role\");\r\n          localStorage.removeItem(\"rol\");\r\n          localStorage.removeItem(\"userEmail\");\r\n          setUser(null);\r\n          setIsAuthenticated(false);\r\n        }\r\n      } else {\r\n        // No hay token\r\n        setUser(null);\r\n        setIsAuthenticated(false);\r\n      }\r\n      setIsLoading(false);\r\n    };\r\n    loadUserFromStorage();\r\n  }, []);\r\n\r\n  // Integrar el hook de expiraci贸n de token\r\n  useTokenExpiration(user?.token, (newToken) => {\r\n    setUser((prev) => ({ ...prev, token: newToken }));\r\n    localStorage.setItem(\"authToken\", newToken);\r\n    try {\r\n      const decoded = jwtDecode(newToken);\r\n      localStorage.setItem(\"tokenExpiresAt\", decoded.exp * 1000);\r\n    } catch (error) {\r\n      console.warn(\"Error al decodificar nuevo token:\", error);\r\n    }\r\n  });\r\n\r\n  const login = async (email, password) => {\r\n    setIsLoading(true);\r\n    try {\r\n      // Verificar configuraci贸n del backend\r\n      console.log(\"Iniciando login para:\", email);\r\n      \r\n      const result = await authService.login(email, password);\r\n      if (result.success) {\r\n        localStorage.setItem(\"authToken\", result.token);\r\n        localStorage.setItem(\"userRole\", result.user.rol);\r\n        localStorage.setItem(\"userEmail\", result.user.email);\r\n        \r\n        // Guardar fecha de expiraci贸n del token y mostrar info de debugging\r\n        try {\r\n          const decoded = jwtDecode(result.token);\r\n          const tokenDurationMs = (decoded.exp - decoded.iat) * 1000;\r\n          const tokenDurationMin = Math.round(tokenDurationMs / 1000 / 60);\r\n          \r\n          console.log(\"=== TOKEN INFO ===\");\r\n          console.log(\"Token emitido en:\", new Date(decoded.iat * 1000).toLocaleString());\r\n          console.log(\"Token expira en:\", new Date(decoded.exp * 1000).toLocaleString());\r\n          console.log(\"Duraci贸n configurada:\", tokenDurationMin, \"minutos\");\r\n          console.log(\"Token completo:\", result.token);\r\n          console.log(\"================\");\r\n          \r\n          localStorage.setItem(\"tokenExpiresAt\", decoded.exp * 1000);\r\n        } catch (error) {\r\n          console.warn(\"Error al decodificar token en login:\", error);\r\n        }\r\n        \r\n        setUser({ ...result.user, token: result.token });\r\n        setIsAuthenticated(true);\r\n        setIsLoading(false);\r\n        return { success: true, user: { ...result.user, token: result.token } };\r\n      } else {\r\n        setIsLoading(false);\r\n        return { success: false, error: result.error };\r\n      }\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      return { success: false, error: \"Error al iniciar sesi贸n\" };\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await authService.logout();\r\n    } catch (error) {\r\n      console.warn(\"Error al llamar logout del backend:\", error);\r\n    }\r\n    finally {\r\n      // Limpiar completamente todo el localStorage de autenticaci贸n\r\n      localStorage.removeItem(\"authToken\");\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"tokenExpiresAt\");\r\n      localStorage.removeItem(\"userRole\");\r\n      localStorage.removeItem(\"role\");\r\n      localStorage.removeItem(\"rol\");\r\n      localStorage.removeItem(\"userEmail\");\r\n      localStorage.removeItem(\"rememberMe\");\r\n      \r\n      setUser(null);\r\n      setIsAuthenticated(false);\r\n      \r\n      // Usar navigate para ir al login y luego forzar recarga\r\n      navigate(\"/login\", { replace: true });\r\n      \r\n      // Forzar recarga despu茅s de un peque帽o delay\r\n      setTimeout(() => {\r\n        window.location.replace(\"/login\");\r\n      }, 100);\r\n    }\r\n  };\r\n\r\n  const hasRole = (role) => user?.rol === role;\r\n  const hasAnyRole = (roles) => isAuthenticated && roles.includes(user?.rol);\r\n\r\n  const register = async (userData) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await authService.register(userData);\r\n      setIsLoading(false);\r\n      return result;\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      return { success: false, error: \"Error al registrar usuario\" };\r\n    }\r\n  };\r\n\r\n  const forgotPassword = async (email) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await authService.requestPasswordReset(email);\r\n      setIsLoading(false);\r\n      return result;\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      return { success: false, error: \"Error al solicitar recuperaci贸n de contrase帽a\" };\r\n    }\r\n  };\r\n\r\n  const resetPassword = async (token, newPassword) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await authService.resetPassword(token, newPassword);\r\n      setIsLoading(false);\r\n      return result;\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      return { success: false, error: \"Error al restablecer contrase帽a\" };\r\n    }\r\n  };\r\n\r\n  const updateProfile = async (profileData) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await authService.updateProfile(profileData);\r\n      if (result.success) {\r\n        setUser((prevUser) => ({ ...prevUser, ...result.user }));\r\n      }\r\n      setIsLoading(false);\r\n      return result;\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      return { success: false, error: \"Error al actualizar perfil\" };\r\n    }\r\n  };\r\n\r\n  const refreshToken = async () => {\r\n    try {\r\n      const result = await authService.refreshToken();\r\n      if (result.success) {\r\n        localStorage.setItem(\"authToken\", result.token);\r\n        \r\n        // Guardar fecha de expiraci贸n del nuevo token\r\n        try {\r\n          const decoded = jwtDecode(result.token);\r\n          localStorage.setItem(\"tokenExpiresAt\", decoded.exp * 1000);\r\n        } catch (error) {\r\n          console.warn(\"Error al decodificar token en refresh:\", error);\r\n        }\r\n        \r\n        setUser((prevUser) => ({ ...prevUser, token: result.token }));\r\n        return { success: true };\r\n      } else {\r\n        logout();\r\n        return { success: false };\r\n      }\r\n    } catch (error) {\r\n      logout();\r\n      return { success: false };\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    isLoading,\r\n    isAuthenticated,\r\n    login,\r\n    logout,\r\n    register,\r\n    forgotPassword,\r\n    resetPassword,\r\n    updateProfile,\r\n    refreshToken,\r\n    hasRole,\r\n    hasAnyRole,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error(\"useAuth debe ser usado dentro de un AuthProvider\");\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const useRequireAuth = (redirectTo = \"/login\") => {\r\n  const { isAuthenticated, isLoading } = useAuth();\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    if (!isLoading && !isAuthenticated) {\r\n      navigate(redirectTo);\r\n    }\r\n  }, [isAuthenticated, isLoading, navigate, redirectTo]);\r\n  return { isAuthenticated, isLoading };\r\n};\r\n\r\nexport const useRequireRole = (requiredRole, redirectTo = \"/\") => {\r\n  const { user, isAuthenticated, isLoading } = useAuth();\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      if (!isAuthenticated) {\r\n        navigate(\"/login\");\r\n      } else if (user?.rol !== requiredRole) {\r\n        navigate(redirectTo);\r\n      }\r\n    }\r\n  }, [user, isAuthenticated, isLoading, navigate, requiredRole, redirectTo]);\r\n  return {\r\n    hasAccess: isAuthenticated && user?.rol === requiredRole,\r\n    isLoading,\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n","import React, { useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport useAuth from '../hooks/useAuth';\r\nimport { hasPermission, getDefaultPath } from '../utils/auth';\r\n\r\nconst ProtectedRoute = ({ children, requiredPath }) => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, isAuthenticated, isLoading } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && !isAuthenticated) {\r\n      navigate('/login', {\r\n        replace: true,\r\n        state: { from: location?.pathname }\r\n      });\r\n      return;\r\n    }\r\n    // Check permission with user role\r\n    if (!isLoading && requiredPath && (!user || !hasPermission(requiredPath, user.rol))) {\r\n      const defaultPath = getDefaultPath(user?.rol);\r\n      navigate(defaultPath, { replace: true });\r\n      return;\r\n    }\r\n  }, [isAuthenticated, isLoading, user, navigate, location?.pathname, requiredPath]);\r\n\r\n  // Show nothing while checking authentication/authorization\r\n  if (isLoading || !isAuthenticated) {\r\n    return null;\r\n  }\r\n  if (requiredPath && (!user || !hasPermission(requiredPath, user.rol))) {\r\n    return null;\r\n  }\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;","import React, { createContext, useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst ButtonHandlersContext = createContext();\r\n\r\nexport const useButtonHandlers = () => {\r\n  const context = useContext(ButtonHandlersContext);\r\n  if (!context) {\r\n    throw new Error('useButtonHandlers must be used within ButtonHandlersProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ButtonHandlersProvider = ({ children }) => {\r\n  const navigate = useNavigate();\r\n\r\n  // Generic handlers for common button actions\r\n  const handleNavigate = (path) => {\r\n    try {\r\n      if (path) {\r\n        navigate(path);\r\n      }\r\n    } catch (error) {\r\n      console.error('Navigation error:', error);\r\n      // Fallback to window.location if navigate fails\r\n      if (path) {\r\n        window.location.href = path;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleExportData = async (data, filename, headers = []) => {\r\n    try {\r\n      let csvContent = '';\r\n      \r\n      if (headers?.length > 0) {\r\n        csvContent = headers?.join(',') + '\\n';\r\n      }\r\n      \r\n      if (data?.length > 0) {\r\n        const rows = data?.map(row => \r\n          Object.values(row)?.map(value => `\"${value || ''}\"`)?.join(',')\r\n        );\r\n        csvContent += rows?.join('\\n');\r\n      }\r\n\r\n      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = filename || `export-${new Date()?.toISOString()?.split('T')?.[0]}.csv`;\r\n      document.body?.appendChild(link);\r\n      link?.click();\r\n      document.body?.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n      \r\n      return { success: true, message: 'Datos exportados exitosamente' };\r\n    } catch (error) {\r\n      console.error('Error exporting data:', error);\r\n      return { success: false, message: 'Error al exportar datos' };\r\n    }\r\n  };\r\n\r\n  const handleRefresh = async (callback) => {\r\n    try {\r\n      if (callback && typeof callback === 'function') {\r\n        await callback();\r\n      }\r\n      return { success: true, message: 'Datos actualizados' };\r\n    } catch (error) {\r\n      console.error('Error refreshing data:', error);\r\n      return { success: false, message: 'Error al actualizar datos' };\r\n    }\r\n  };\r\n\r\n  const handleDelete = (item, onDelete, itemName = 'elemento') => {\r\n    if (window.confirm(`驴Est谩 seguro de que desea eliminar este ${itemName}?\\n\\nEsta acci贸n no se puede deshacer.`)) {\r\n      if (onDelete && typeof onDelete === 'function') {\r\n        onDelete(item);\r\n        return { success: true, message: `${itemName} eliminado exitosamente` };\r\n      }\r\n    }\r\n    return { success: false, message: 'Eliminaci贸n cancelada' };\r\n  };\r\n\r\n  const handleEdit = (item, onEdit, promptText = 'Nuevo valor:') => {\r\n    const newValue = prompt(promptText, item?.name || '');\r\n    if (newValue && newValue?.trim() && newValue !== item?.name) {\r\n      if (onEdit && typeof onEdit === 'function') {\r\n        onEdit({ ...item, name: newValue?.trim() });\r\n        return { success: true, message: 'Elemento actualizado exitosamente' };\r\n      }\r\n    }\r\n    return { success: false, message: 'Edici贸n cancelada o sin cambios' };\r\n  };\r\n\r\n  const handleApprove = (item, onApprove, message = '驴Desea aprobar este elemento?') => {\r\n    if (window.confirm(message)) {\r\n      if (onApprove && typeof onApprove === 'function') {\r\n        onApprove(item);\r\n        return { success: true, message: 'Elemento aprobado exitosamente' };\r\n      }\r\n    }\r\n    return { success: false, message: 'Aprobaci贸n cancelada' };\r\n  };\r\n\r\n  const handleReject = (item, onReject, message = '驴Desea rechazar este elemento?') => {\r\n    if (window.confirm(message)) {\r\n      if (onReject && typeof onReject === 'function') {\r\n        onReject(item);\r\n        return { success: true, message: 'Elemento rechazado' };\r\n      }\r\n    }\r\n    return { success: false, message: 'Rechazo cancelado' };\r\n  };\r\n\r\n  const value = {\r\n    handleNavigate,\r\n    handleExportData,\r\n    handleRefresh,\r\n    handleDelete,\r\n    handleEdit,\r\n    handleApprove,\r\n    handleReject\r\n  };\r\n\r\n  return (\r\n    <ButtonHandlersContext.Provider value={value}>\r\n      {children}\r\n    </ButtonHandlersContext.Provider>\r\n  );\r\n};\r\n\r\n// Create a wrapper component that doesn't use useNavigate at the top level\r\nexport const SafeButtonHandlersProvider = ({ children }) => {\r\n  return (\r\n    <ButtonHandlersContext.Provider value={null}>\r\n      {children}\r\n    </ButtonHandlersContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ButtonHandlersProvider;","import { clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs) {\r\n    return twMerge(clsx(inputs));\r\n}","import React from 'react';\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva } from \"class-variance-authority\";\r\nimport { cn } from \"../../utils/cn\";\r\nimport Icon from '../AppIcon';\r\n\r\nconst buttonVariants = cva(\r\n    \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n    {\r\n        variants: {\r\n            variant: {\r\n                default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n                destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n                outline: \"border border-input hover:bg-accent hover:text-accent-foreground\",\r\n                secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n                ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n                link: \"text-primary underline-offset-4 hover:underline\",\r\n                success: \"bg-success text-success-foreground hover:bg-success/90\",\r\n                warning: \"bg-warning text-warning-foreground hover:bg-warning/90\",\r\n                danger: \"bg-error text-error-foreground hover:bg-error/90\",\r\n            },\r\n            size: {\r\n                default: \"h-10 px-4 py-2\",\r\n                sm: \"h-9 rounded-md px-3\",\r\n                lg: \"h-11 rounded-md px-8\",\r\n                icon: \"h-10 w-10\",\r\n                xs: \"h-8 rounded-md px-2 text-xs\",\r\n                xl: \"h-12 rounded-md px-10 text-base\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            variant: \"default\",\r\n            size: \"default\",\r\n        },\r\n    }\r\n);\r\n\r\nconst Button = React.forwardRef(({\r\n    className,\r\n    variant,\r\n    size,\r\n    asChild = false,\r\n    children,\r\n    loading = false,\r\n    iconName = null,\r\n    iconPosition = 'left',\r\n    iconSize = null,\r\n    fullWidth = false,\r\n    disabled = false,\r\n    ...props\r\n}, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n\r\n    // Icon size mapping based on button size\r\n    const iconSizeMap = {\r\n        xs: 12,\r\n        sm: 14,\r\n        default: 16,\r\n        lg: 18,\r\n        xl: 20,\r\n        icon: 16,\r\n    };\r\n\r\n    const calculatedIconSize = iconSize || iconSizeMap?.[size] || 16;\r\n\r\n    // Loading spinner\r\n    const LoadingSpinner = () => (\r\n        <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M12 2a10 10 0 1 1-10 10\" />\r\n        </svg>\r\n    );\r\n\r\n    const renderIcon = () => {\r\n        if (!iconName) return null;\r\n        try {\r\n            return (\r\n                <Icon\r\n                    name={iconName}\r\n                    size={calculatedIconSize}\r\n                    className={cn(\r\n                        children && iconPosition === 'left' && \"mr-2\",\r\n                        children && iconPosition === 'right' && \"ml-2\"\r\n                    )}\r\n                />\r\n            );\r\n        } catch {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const renderFallbackButton = () => (\r\n        <button\r\n            className={cn(\r\n                buttonVariants({ variant, size, className }),\r\n                fullWidth && \"w-full\"\r\n            )}\r\n            ref={ref}\r\n            disabled={disabled || loading}\r\n            {...props}\r\n        >\r\n            {loading && <LoadingSpinner />}\r\n            {iconName && iconPosition === 'left' && renderIcon()}\r\n            {children}\r\n            {iconName && iconPosition === 'right' && renderIcon()}\r\n        </button>\r\n    );\r\n\r\n    // When asChild is true, merge icons into the child element\r\n    if (asChild) {\r\n        try {\r\n            if (!children || React.Children?.count(children) !== 1) {\r\n                return renderFallbackButton();\r\n            }\r\n\r\n            const child = React.Children?.only(children);\r\n\r\n            if (!React.isValidElement(child)) {\r\n                return renderFallbackButton();\r\n            }\r\n            const content = (\r\n                <>\r\n                    {loading && <LoadingSpinner />}\r\n                    {iconName && iconPosition === 'left' && renderIcon()}\r\n                    {child?.props?.children}\r\n                    {iconName && iconPosition === 'right' && renderIcon()}\r\n                </>\r\n            );\r\n\r\n            const clonedChild = React.cloneElement(child, {\r\n                className: cn(\r\n                    buttonVariants({ variant, size, className }),\r\n                    fullWidth && \"w-full\",\r\n                    child?.props?.className\r\n                ),\r\n                disabled: disabled || loading || child?.props?.disabled,\r\n                children: content,\r\n            });\r\n\r\n            return <Comp ref={ref} {...props}>{clonedChild}</Comp>;\r\n        } catch {\r\n            return renderFallbackButton();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Comp\r\n            className={cn(\r\n                buttonVariants({ variant, size, className }),\r\n                fullWidth && \"w-full\"\r\n            )}\r\n            ref={ref}\r\n            disabled={disabled || loading}\r\n            {...props}\r\n        >\r\n            {loading && <LoadingSpinner />}\r\n            {iconName && iconPosition === 'left' && renderIcon()}\r\n            {children}\r\n            {iconName && iconPosition === 'right' && renderIcon()}\r\n        </Comp>\r\n    );\r\n});\r\n\r\nButton.displayName = \"Button\";\r\nexport default Button;","import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Button from 'components/ui/Button';\r\nimport Icon from 'components/AppIcon';\r\n\r\nconst NotFound = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleGoHome = () => {\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col items-center justify-center bg-background p-4\">\r\n      <div className=\"text-center max-w-md\">\r\n        <div className=\"flex justify-center mb-6\">\r\n          <div className=\"relative\">\r\n            <h1 className=\"text-9xl font-bold text-primary opacity-20\">404</h1>\r\n          </div>\r\n        </div>\r\n\r\n        <h2 className=\"text-2xl font-medium text-onBackground mb-2\">Page Not Found</h2>\r\n        <p className=\"text-onBackground/70 mb-8\">\r\n          The page you're looking for doesn't exist. Let's get you back!\r\n        </p>\r\n\r\n        <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n          <Button\r\n            variant=\"primary\"\r\n            icon={<Icon name=\"ArrowLeft\" />}\r\n            iconPosition=\"left\"\r\n            onClick={() => window.history?.back()}\r\n          >\r\n            Go Back\r\n          </Button>\r\n\r\n          <Button\r\n            variant=\"outline\"\r\n            icon={<Icon name=\"Home\" />}\r\n            iconPosition=\"left\"\r\n            onClick={handleGoHome}\r\n          >\r\n            Back to Home\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\nimport { cn } from \"../../utils/cn\";\r\n\r\nconst Input = React.forwardRef(({\r\n    className,\r\n    type = \"text\",\r\n    label,\r\n    description,\r\n    error,\r\n    required = false,\r\n    id,\r\n    value,\r\n    ...props\r\n}, ref) => {\r\n    // Generate unique ID if not provided\r\n    const inputId = id || `input-${Math.random()?.toString(36)?.substr(2, 9)}`;\r\n    \r\n    // Ensure value is always defined (never undefined)\r\n    const safeValue = value !== undefined ? value : '';\r\n\r\n    // Base input classes\r\n    const baseInputClasses = \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\";\r\n\r\n    // Checkbox-specific styles\r\n    if (type === \"checkbox\") {\r\n        return (\r\n            <input\r\n                type=\"checkbox\"\r\n                className={cn(\r\n                    \"h-4 w-4 rounded border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                id={inputId}\r\n                checked={!!value}\r\n                {...props}\r\n            />\r\n        );\r\n    }\r\n\r\n    // Radio button-specific styles\r\n    if (type === \"radio\") {\r\n        return (\r\n            <input\r\n                type=\"radio\"\r\n                className={cn(\r\n                    \"h-4 w-4 rounded-full border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                id={inputId}\r\n                checked={!!value}\r\n                {...props}\r\n            />\r\n        );\r\n    }\r\n\r\n    // For regular inputs with wrapper structure\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            {label && (\r\n                <label\r\n                    htmlFor={inputId}\r\n                    className={cn(\r\n                        \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\",\r\n                        error ? \"text-destructive\" : \"text-foreground\"\r\n                    )}\r\n                >\r\n                    {label}\r\n                    {required && <span className=\"text-destructive ml-1\">*</span>}\r\n                </label>\r\n            )}\r\n\r\n            <input\r\n                type={type}\r\n                className={cn(\r\n                    baseInputClasses,\r\n                    error && \"border-destructive focus-visible:ring-destructive\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                id={inputId}\r\n                value={safeValue}\r\n                {...props}\r\n            />\r\n\r\n            {description && !error && (\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                    {description}\r\n                </p>\r\n            )}\r\n\r\n            {error && (\r\n                <p className=\"text-sm text-destructive\">\r\n                    {error}\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nInput.displayName = \"Input\";\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nfunction Image({\r\n  src,\r\n  alt = \"Image Name\",\r\n  className = \"\",\r\n  ...props\r\n}) {\r\n\r\n  return (\r\n    <img\r\n      src={src}\r\n      alt={alt}\r\n      className={className}\r\n      onError={(e) => {\r\n        e.target.src = \"/assets/images/no_image.png\"\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Image;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport Icon from '../AppIcon';\r\nimport Button from './Button';\r\nimport Input from './Input';\r\nimport AppImage from '../AppImage';\r\nimport { getAllowedNavigationItems } from '../../utils/auth';\r\nimport useAuth from '../../hooks/useAuth';\r\nimport { useNotifications } from '../../context/NotificationContext';\r\nimport { useConfirmDialog } from '../../ui/ConfirmDialogContext';\r\n\r\nconst Sidebar = ({ isCollapsed = false, onToggle }) => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [showSearchResults, setShowSearchResults] = useState(false);\r\n  const [navigationItems, setNavigationItems] = useState([]);\r\n  const { user, isAuthenticated, logout } = useAuth();\r\n  const { showSuccess } = useNotifications();\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated && user) {\r\n      const allowedItems = getAllowedNavigationItems(user?.rol);\r\n      setNavigationItems(allowedItems);\r\n    } else {\r\n      navigate('/login');\r\n    }\r\n  }, [isAuthenticated, user, navigate]);\r\n\r\n  const [expandedItems, setExpandedItems] = useState(['Recursos', 'Negocio']);\r\n\r\n  const handleSearch = (query) => {\r\n    setSearchQuery(query);\r\n    if (query?.length > 2) {\r\n      // Filter search results based on user's allowed paths\r\n      const allowedPaths = navigationItems?.flatMap(item => \r\n        item?.children ? item?.children?.map(child => child?.path) : [item?.path]\r\n      )?.filter(Boolean);\r\n\r\n      const mockResults = [\r\n        { type: 'project', title: 'Instalaci贸n Aire Acondicionado - Edificio A', path: '/proyectos' },\r\n        { type: 'client', title: 'ABC Corporation', path: '/clientes' },\r\n        { type: 'work-order', title: 'WO-2024-001', path: '/operaciones' }\r\n      ]?.filter(item => \r\n        item?.title?.toLowerCase()?.includes(query?.toLowerCase()) &&\r\n        allowedPaths?.includes(item?.path)\r\n      );\r\n      \r\n      setSearchResults(mockResults);\r\n      setShowSearchResults(true);\r\n    } else {\r\n      setShowSearchResults(false);\r\n    }\r\n  };\r\n\r\n  const toggleExpanded = (label) => {\r\n    setExpandedItems(prev => \r\n      prev?.includes(label) \r\n        ? prev?.filter(item => item !== label)\r\n        : [...prev, label]\r\n    );\r\n  };\r\n\r\n  const handleNavigation = (path) => {\r\n    navigate(path);\r\n  };\r\n\r\n  const { showConfirm } = useConfirmDialog();\r\n  const handleLogout = async () => {\r\n    const confirmed = await showConfirm({\r\n      title: 'Cerrar sesi贸n',\r\n      message: '驴Deseas cerrar sesi贸n?',\r\n      confirmText: 'S铆',\r\n      cancelText: 'No'\r\n    });\r\n    if (confirmed) {\r\n      showSuccess('Sesi贸n cerrada correctamente');\r\n      setTimeout(() => {\r\n        logout();\r\n      }, 1200);\r\n    }\r\n  };\r\n\r\n  const renderNavigationItem = (item, level = 0) => {\r\n    const isActive = location?.pathname === item?.path;\r\n    const hasChildren = item?.children && item?.children?.length > 0;\r\n    const isExpanded = expandedItems?.includes(item?.label);\r\n\r\n    const handleItemClick = (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      \r\n      if (hasChildren) {\r\n        toggleExpanded(item?.label);\r\n      } else if (item?.path) {\r\n        handleNavigation(item?.path);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div key={item?.label} className=\"relative\">\r\n        <div\r\n          className={`flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-smooth group ${\r\n            isActive\r\n              ? 'bg-primary text-primary-foreground'\r\n              : 'text-foreground hover:bg-muted'\r\n          } ${level > 0 ? 'ml-4' : ''}`}\r\n          onClick={handleItemClick}\r\n          title={isCollapsed ? item?.tooltip : ''}\r\n          role=\"button\"\r\n          tabIndex={0}\r\n          onKeyDown={(e) => {\r\n            if (e.key === 'Enter' || e.key === ' ') {\r\n              handleItemClick(e);\r\n            }\r\n          }}\r\n        >\r\n          <div className=\"flex items-center space-x-3 min-w-0 flex-1\">\r\n            <Icon \r\n              name={item?.icon} \r\n              size={20} \r\n              className={`flex-shrink-0 ${isActive ? 'text-primary-foreground' : 'text-muted-foreground group-hover:text-foreground'}`}\r\n            />\r\n            {!isCollapsed && (\r\n              <span className=\"font-medium text-sm truncate\">{item?.label}</span>\r\n            )}\r\n          </div>\r\n\r\n          {!isCollapsed && (\r\n            <div className=\"flex items-center space-x-2\">\r\n              {item?.badge && (\r\n                <span className={`px-2 py-1 text-xs rounded-full ${\r\n                  isActive \r\n                    ? 'bg-primary-foreground text-primary' \r\n                    : 'bg-accent text-accent-foreground'\r\n                }`}>\r\n                  {item?.badge}\r\n                </span>\r\n              )}\r\n              {hasChildren && (\r\n                <Icon \r\n                  name={isExpanded ? 'ChevronDown' : 'ChevronRight'} \r\n                  size={16}\r\n                  className={`transition-transform ${isActive ? 'text-primary-foreground' : 'text-muted-foreground'}`}\r\n                />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        {hasChildren && isExpanded && !isCollapsed && (\r\n          <div className=\"mt-1 space-y-1\">\r\n            {item?.children?.map(child => renderNavigationItem(child, level + 1))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Sidebar */}\r\n      <aside \r\n        className={`fixed left-0 top-0 h-full bg-card border-r border-border sidebar-shadow z-1000 transition-all duration-300 ${\r\n          isCollapsed ? 'w-16' : 'w-60'\r\n        }`}\r\n      >\r\n        <div className=\"flex flex-col h-full\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-4 border-b border-border\">\r\n            {!isCollapsed && (\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-8 h-8 flex items-center justify-center\">\r\n                  <AppImage\r\n                    src=\"assets/images/WhatsApp_Image_2025-09-24_at_8.13.50_PM-1759346787603.jpeg\"\r\n                    alt=\"CLIMAS H.M. Logo\"\r\n                    className=\"w-8 h-8 object-contain\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <h1 className=\"text-lg font-semibold text-foreground\">CLIMAS H.M.</h1>\r\n                  <p className=\"text-xs text-muted-foreground\">Gesti贸n de Aire Acondicionado</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              onClick={onToggle}\r\n              className=\"flex-shrink-0\"\r\n              title={isCollapsed ? 'Expandir barra lateral' : 'Contraer barra lateral'}\r\n            >\r\n              <Icon name={isCollapsed ? 'ChevronRight' : 'ChevronLeft'} size={20} />\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Search - Oculto temporalmente */}\r\n          {false && !isCollapsed && (\r\n            <div className=\"p-4 relative\">\r\n              <div className=\"relative\">\r\n                <Input\r\n                  type=\"search\"\r\n                  placeholder=\"Buscar proyectos, clientes...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => handleSearch(e?.target?.value)}\r\n                  className=\"pl-10\"\r\n                />\r\n                <Icon \r\n                  name=\"Search\" \r\n                  size={16} \r\n                  className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n                />\r\n              </div>\r\n\r\n              {/* Search Results */}\r\n              {showSearchResults && searchResults?.length > 0 && (\r\n                <div className=\"absolute top-full left-4 right-4 mt-1 bg-popover border border-border rounded-md shadow-lg z-1050\">\r\n                  <div className=\"py-2\">\r\n                    {searchResults?.map((result, index) => (\r\n                      <button\r\n                        key={index}\r\n                        onClick={() => {\r\n                          handleNavigation(result?.path);\r\n                          setShowSearchResults(false);\r\n                          setSearchQuery('');\r\n                        }}\r\n                        className=\"flex items-center space-x-3 w-full px-4 py-2 text-sm text-popover-foreground hover:bg-muted transition-smooth\"\r\n                      >\r\n                        <Icon \r\n                          name={result?.type === 'project' ? 'FolderOpen' : result?.type === 'client' ? 'Users' : 'ClipboardList'} \r\n                          size={16} \r\n                        />\r\n                        <div className=\"text-left\">\r\n                          <div className=\"font-medium\">{result?.title}</div>\r\n                          <div className=\"text-xs text-muted-foreground capitalize\">{result?.type}</div>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Navigation */}\r\n          <nav className=\"flex-1 px-4 py-2 space-y-1 overflow-y-auto\">\r\n            {navigationItems?.map(item => renderNavigationItem(item))}\r\n          </nav>\r\n\r\n          {/* User Profile */}\r\n          <div className=\"p-4 border-t border-border\">\r\n            <div className={`flex items-center justify-between p-3 rounded-lg bg-muted ${isCollapsed ? 'justify-center' : ''}`}>\r\n              <div className=\"flex items-center space-x-3 min-w-0 flex-1\">\r\n                <div className=\"w-8 h-8 bg-secondary rounded-full flex items-center justify-center flex-shrink-0\">\r\n                  <Icon name=\"User\" size={16} color=\"white\" />\r\n                </div>\r\n                {!isCollapsed && (\r\n                  <div className=\"min-w-0 flex-1\">\r\n                    <div className=\"text-sm font-medium text-foreground truncate\">\r\n                      {user?.email?.split('@')?.[0] || 'Usuario'}\r\n                    </div>\r\n                    <div className=\"text-xs text-muted-foreground truncate\">\r\n                      {user?.rol || 'Sin rol'}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {!isCollapsed && (\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  onClick={handleLogout}\r\n                  className=\"flex-shrink-0 hover:bg-destructive hover:text-destructive-foreground\"\r\n                  title=\"Cerrar sesi贸n\"\r\n                >\r\n                  <Icon name=\"LogOut\" size={16} />\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </aside>\r\n      {/* Overlay for mobile */}\r\n      {!isCollapsed && (\r\n        <div \r\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-999 lg:hidden\"\r\n          onClick={onToggle}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Sidebar;","import React, { useState } from 'react';\r\nimport { useConfirmDialog } from '../../ui/ConfirmDialogContext';\r\nimport { useNotifications } from '../../context/NotificationContext';\r\nimport { useLocation } from 'react-router-dom';\r\nimport useAuth from '../../hooks/useAuth';\r\nimport Icon from '../AppIcon';\r\nimport Button from './Button';\r\nimport AppImage from '../AppImage';\r\n\r\nconst Header = ({ onMenuToggle, isMenuOpen = false }) => {\r\n  const location = useLocation();\r\n  const [userMenuOpen, setUserMenuOpen] = useState(false);\r\n\r\n  const navigationItems = [\r\n    // TODO: Habilitar cuando se implemente el dashboard\r\n    // { label: 'Dashboard', path: '/dashboard', icon: 'LayoutDashboard' },\r\n    { label: 'Projects', path: '/proyectos', icon: 'FolderOpen' },\r\n    { label: 'Work Orders', path: '/operaciones', icon: 'ClipboardList' },\r\n    { label: 'Clients', path: '/clientes', icon: 'Users' },\r\n    { label: 'Financial', path: '/finanzas', icon: 'DollarSign' }\r\n  ];\r\n\r\n  const secondaryItems = [\r\n    { label: 'Personnel', path: '/personal', icon: 'UserCheck' },\r\n    { label: 'Inventory', path: '/inventario', icon: 'Package' }\r\n  ];\r\n\r\n  const handleNavigation = (path) => {\r\n    window.location.href = path;\r\n  };\r\n\r\n  const handleUserMenuToggle = () => {\r\n    setUserMenuOpen(!userMenuOpen);\r\n  };\r\n\r\n  const { showSuccess } = useNotifications();\r\n  const { showConfirm } = useConfirmDialog();\r\n  const { logout } = useAuth();\r\n  const handleLogout = async () => {\r\n    const confirmed = await showConfirm({\r\n      title: 'Cerrar sesi贸n',\r\n      message: '驴Deseas cerrar sesi贸n?',\r\n      confirmText: 'S铆',\r\n      cancelText: 'No'\r\n    });\r\n    if (confirmed) {\r\n      showSuccess('Sesi贸n cerrada correctamente');\r\n      setTimeout(() => {\r\n        logout();\r\n      }, 1200);\r\n    }\r\n  };\r\n\r\n  // Ocultar Header temporalmente\r\n  return null;\r\n\r\n  return (\r\n    <header className=\"fixed top-0 left-0 right-0 bg-card border-b border-border z-1000\">\r\n      <div className=\"flex items-center justify-between h-16 px-4 lg:px-6\">\r\n        {/* Left Section - Logo and Mobile Menu */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          {/* Mobile Menu Toggle */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onMenuToggle}\r\n            className=\"lg:hidden\"\r\n            aria-label=\"Toggle navigation menu\"\r\n          >\r\n            <Icon name={isMenuOpen ? 'X' : 'Menu'} size={20} />\r\n          </Button>\r\n\r\n          {/* Logo */}\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-8 h-8 flex items-center justify-center\">\r\n              <AppImage\r\n                src=\"assets/images/WhatsApp_Image_2025-09-24_at_8.13.50_PM-1759346787603.jpeg\"\r\n                alt=\"CLIMAS H.M. Logo\"\r\n                className=\"w-8 h-8 object-contain\"\r\n              />\r\n            </div>\r\n            <div className=\"hidden sm:block\">\r\n              <h1 className=\"text-lg font-semibold text-foreground\">CLIMAS H.M.</h1>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Section - User Profile */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          {/* Notifications */}\r\n          <Button variant=\"ghost\" size=\"icon\" className=\"relative\">\r\n            <Icon name=\"Bell\" size={20} />\r\n            <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-accent text-accent-foreground text-xs rounded-full flex items-center justify-center\">\r\n              3\r\n            </span>\r\n          </Button>\r\n\r\n          {/* User Menu */}\r\n          <div className=\"relative\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              onClick={handleUserMenuToggle}\r\n              className=\"flex items-center space-x-2 px-3 py-2\"\r\n            >\r\n              <div className=\"w-8 h-8 bg-secondary rounded-full flex items-center justify-center\">\r\n                <Icon name=\"User\" size={16} color=\"white\" />\r\n              </div>\r\n              <div className=\"hidden md:block text-left\">\r\n                <div className=\"text-sm font-medium text-foreground\">John Smith</div>\r\n                <div className=\"text-xs text-muted-foreground\">Administrator</div>\r\n              </div>\r\n              <Icon name=\"ChevronDown\" size={16} />\r\n            </Button>\r\n\r\n            {userMenuOpen && (\r\n              <div className=\"absolute top-full right-0 mt-1 w-56 bg-popover border border-border rounded-md shadow-lg z-1050\">\r\n                <div className=\"py-1\">\r\n                  <div className=\"px-4 py-2 border-b border-border\">\r\n                    <div className=\"text-sm font-medium text-popover-foreground\">John Smith</div>\r\n                    <div className=\"text-xs text-muted-foreground\">john.smith@aireflowpro.com</div>\r\n                  </div>\r\n                  <button className=\"flex items-center space-x-3 w-full px-4 py-2 text-sm text-popover-foreground hover:bg-muted transition-smooth\">\r\n                    <Icon name=\"User\" size={16} />\r\n                    <span>Profile Settings</span>\r\n                  </button>\r\n                  <button className=\"flex items-center space-x-3 w-full px-4 py-2 text-sm text-popover-foreground hover:bg-muted transition-smooth\">\r\n                    <Icon name=\"Settings\" size={16} />\r\n                    <span>Preferences</span>\r\n                  </button>\r\n                  <button className=\"flex items-center space-x-3 w-full px-4 py-2 text-sm text-popover-foreground hover:bg-muted transition-smooth\">\r\n                    <Icon name=\"HelpCircle\" size={16} />\r\n                    <span>Help & Support</span>\r\n                  </button>\r\n                  <div className=\"border-t border-border mt-1 pt-1\">\r\n                    <button\r\n                      onClick={handleLogout}\r\n                      className=\"flex items-center space-x-3 w-full px-4 py-2 text-sm text-error hover:bg-muted transition-smooth\"\r\n                    >\r\n                      <Icon name=\"LogOut\" size={16} />\r\n                      <span>Sign Out</span>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport Icon from '../AppIcon';\r\nimport Button from './Button';\r\nimport { ROLE_PERMISSIONS } from '../../utils/auth';\r\n\r\nconst Breadcrumb = ({ customItems = null }) => {\r\n  const location = useLocation();\r\n\r\n  // Obtener el rol del usuario desde localStorage\r\n  const userRole = localStorage.getItem('userRole');\r\n  \r\n  // Obtener el defaultPath seg煤n el rol del usuario\r\n  const getDefaultPathForRole = () => {\r\n    if (userRole && ROLE_PERMISSIONS[userRole]) {\r\n      return ROLE_PERMISSIONS[userRole].defaultPath;\r\n    }\r\n    return '/oportunidades'; // Fallback por defecto\r\n  };\r\n\r\n  const pathMapping = {\r\n    '/dashboard': { label: 'Panel', icon: 'LayoutDashboard' },\r\n    '/proyectos': { label: 'Gesti贸n de proyectos', icon: 'FolderOpen' },\r\n    '/operaciones': { label: 'Procesamiento de 贸rdenes de trabajo', icon: 'ClipboardList' },\r\n    '/finanzas': { label: 'Gesti贸n Financiera', icon: 'DollarSign' },\r\n    '/clientes': { label: 'Gesti贸n de Clientes', icon: 'Users' },\r\n    '/personal': { label: 'Gesti贸n de personal', icon: 'UserCheck' },\r\n    '/inventario': { label: 'Gesti贸n de inventario', icon: 'Package' },\r\n    '/usuarios': { label: 'Gesti贸n de Usuarios', icon: 'Users' },\r\n    '/oportunidades': { label: 'Oportunidades de Venta', icon: 'TrendingUp' },\r\n    '/constructor-cotizaciones': { label: 'Creaci贸n de Cotizaciones', icon: 'FileText' },\r\n    '/cotizaciones': { label: 'Centro de Desarrollo de Cotizaciones', icon: 'FileEdit' },\r\n    '/monitoreo-ventas': { label: 'Monitoreo de Ejecuci贸n de Ventas', icon: 'BarChart' },\r\n    '/centro-operaciones-taller': { label: 'Centro de Operaciones de Taller', icon: 'Wrench' },\r\n    '/operaciones-taller': { label: 'Gesti贸n de Operaciones de Taller', icon: 'Settings' },\r\n    '/flujo-proyecto': { label: 'Gesti贸n de Flujo de Trabajo', icon: 'GitBranch' },\r\n    '/documentacion-proyectos': { label: 'Centro de Documentaci贸n', icon: 'FolderOpen' },\r\n    '/visor-galeria': { label: 'Galer铆a de Proyectos', icon: 'Image' },\r\n    '/galeria-proyecto': { label: 'Detalles de Galer铆a', icon: 'Images' },\r\n    '/abonos': { label: 'Gesti贸n de Abonos', icon: 'CreditCard' }\r\n  };\r\n\r\n  const generateBreadcrumbs = () => {\r\n    if (customItems) return customItems;\r\n\r\n    const pathSegments = location?.pathname?.split('/')?.filter(segment => segment);\r\n    const defaultPath = getDefaultPathForRole();\r\n    const isOnDefaultPath = location?.pathname === defaultPath;\r\n    \r\n    // Breadcrumb ra\\u00edz din\\u00e1mico seg\\u00fan el rol\r\n    const breadcrumbs = [{ label: 'Inicio', path: defaultPath, icon: 'Home' }];\r\n\r\n    if (!isOnDefaultPath) {\r\n      const currentPath = location?.pathname;\r\n      const currentPage = pathMapping?.[currentPath];\r\n      \r\n      if (currentPage) {\r\n        breadcrumbs?.push({\r\n          label: currentPage?.label,\r\n          path: currentPath,\r\n          icon: currentPage?.icon,\r\n          current: true\r\n        });\r\n      }\r\n    } else {\r\n      breadcrumbs[0].current = true;\r\n    }\r\n\r\n    return breadcrumbs;\r\n  };\r\n\r\n  const breadcrumbs = generateBreadcrumbs();\r\n\r\n  const handleNavigation = (path) => {\r\n    if (path && !breadcrumbs?.find(b => b?.path === path)?.current) {\r\n      window.location.href = path;\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    window.history?.back();\r\n  };\r\n\r\n  return (\r\n    <nav className=\"flex items-center space-x-2 py-4\" aria-label=\"Breadcrumb\">\r\n      {/* Mobile Back Button */}\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"sm\"\r\n        onClick={handleBack}\r\n        className=\"md:hidden flex items-center space-x-2\"\r\n      >\r\n        <Icon name=\"ArrowLeft\" size={16} />\r\n        <span>Back</span>\r\n      </Button>\r\n      {/* Desktop Breadcrumbs */}\r\n      <ol className=\"hidden md:flex items-center space-x-2\">\r\n        {breadcrumbs?.map((item, index) => (\r\n          <li key={item?.path || index} className=\"flex items-center\">\r\n            {index > 0 && (\r\n              <Icon \r\n                name=\"ChevronRight\" \r\n                size={16} \r\n                className=\"text-muted-foreground mx-2\" \r\n              />\r\n            )}\r\n            \r\n            <div className=\"flex items-center space-x-2\">\r\n              {item?.current ? (\r\n                <div className=\"flex items-center space-x-2 text-foreground\">\r\n                  <Icon name={item?.icon} size={16} />\r\n                  <span className=\"font-medium text-sm\">{item?.label}</span>\r\n                </div>\r\n              ) : (\r\n                <button\r\n                  onClick={() => handleNavigation(item?.path)}\r\n                  className=\"flex items-center space-x-2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n                >\r\n                  <Icon name={item?.icon} size={16} />\r\n                  <span className=\"text-sm\">{item?.label}</span>\r\n                </button>\r\n              )}\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ol>\r\n      {/* Mobile Current Page */}\r\n      <div className=\"md:hidden flex items-center space-x-2 text-foreground\">\r\n        <Icon name={breadcrumbs?.[breadcrumbs?.length - 1]?.icon} size={16} />\r\n        <span className=\"font-medium text-sm\">\r\n          {breadcrumbs?.[breadcrumbs?.length - 1]?.label}\r\n        </span>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Breadcrumb;","import React, { useState } from 'react';\r\nimport { Search, X, ChevronUp, ChevronDown, Download } from 'lucide-react';\r\n\r\n/* =========================\r\n   UI b谩sicos (con mejoras)\r\n========================= */\r\n\r\nconst Button = ({\r\n  children,\r\n  variant = 'default',\r\n  size = 'default',\r\n  onClick,\r\n  iconName,\r\n  iconPosition,\r\n  className = '',\r\n  disabled = false,\r\n  type = 'button',\r\n  title,\r\n}) => {\r\n  const Icon =\r\n    iconName === 'X'\r\n      ? X\r\n      : iconName === 'ChevronUp'\r\n      ? ChevronUp\r\n      : iconName === 'ChevronDown'\r\n      ? ChevronDown\r\n      : iconName === 'Download'\r\n      ? Download\r\n      : null;\r\n\r\n  const baseClasses =\r\n    'inline-flex items-center justify-center font-medium rounded-md transition-colors';\r\n  const variantClasses = {\r\n    default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n    outline:\r\n      'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\r\n    ghost: 'hover:bg-accent hover:text-accent-foreground',\r\n  };\r\n  const sizeClasses = {\r\n    default: 'h-10 px-4 py-2',\r\n    sm: 'h-9 rounded-md px-3 text-sm',\r\n  };\r\n  const disabledClasses = disabled ? 'opacity-60 cursor-not-allowed' : '';\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n      title={title}\r\n      className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${disabledClasses} ${className}`}\r\n    >\r\n      {Icon && iconPosition === 'left' && <Icon size={16} className=\"mr-2\" />}\r\n      {children}\r\n      {Icon && iconPosition === 'right' && <Icon size={16} className=\"ml-2\" />}\r\n    </button>\r\n  );\r\n};\r\n\r\nconst Input = ({\r\n  label,\r\n  type = 'text',\r\n  placeholder,\r\n  value,\r\n  onChange,\r\n  className = '',\r\n}) => {\r\n  return (\r\n    <div className=\"w-full\">\r\n      {label && (\r\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n          {label}\r\n        </label>\r\n      )}\r\n      <input\r\n        type={type}\r\n        placeholder={placeholder}\r\n        value={value}\r\n        onChange={onChange}\r\n        className={`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Select = ({ label, options, value, onChange, className = '' }) => {\r\n  return (\r\n    <div className={className}>\r\n      {label && (\r\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n          {label}\r\n        </label>\r\n      )}\r\n      <select\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n      >\r\n        {options.map((option) => (\r\n          <option key={option.value} value={option.value}>\r\n            {option.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\n/* =========================\r\n   ProjectFilters principal\r\n========================= */\r\n\r\nconst ProjectFilters = ({\r\n  onFiltersChange,\r\n  totalProjects,\r\n  filteredProjects,\r\n  onExport, // callback que viene del padre para exportar\r\n}) => {\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    status: '',\r\n    department: '',\r\n    dateRange: '',\r\n    clientType: '',\r\n    priority: '',\r\n    minBudget: '',\r\n    maxBudget: '',\r\n    startDate: '',\r\n    endDate: '',\r\n  });\r\n\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'planning', label: 'Planificaci贸n' },\r\n    { value: 'in-progress', label: 'En Progreso' },\r\n    { value: 'on-hold', label: 'En Pausa' }, // <- importante\r\n    { value: 'review', label: 'En Revisi贸n' },\r\n    { value: 'completed', label: 'Completado' },\r\n    { value: 'cancelled', label: 'Cancelado' },\r\n  ];\r\n\r\n  const departmentOptions = [\r\n    { value: '', label: 'Todos los Departamentos' },\r\n    { value: 'sales', label: 'Ventas' },\r\n    { value: 'engineering', label: 'Ingenier铆a' },\r\n    { value: 'installation', label: 'Instalaci贸n' },\r\n    { value: 'maintenance', label: 'Mantenimiento' },\r\n    { value: 'administration', label: 'Administraci贸n' },\r\n  ];\r\n\r\n  const dateRangeOptions = [\r\n    { value: '', label: 'Todas las Fechas' },\r\n    { value: 'today', label: 'Hoy' },\r\n    { value: 'week', label: 'Esta Semana' },\r\n    { value: 'month', label: 'Este Mes' },\r\n    { value: 'quarter', label: 'Este Trimestre' },\r\n    { value: 'year', label: 'Este A帽o' },\r\n  ];\r\n\r\n  const clientTypeOptions = [\r\n    { value: '', label: 'Todos los Clientes' },\r\n    { value: 'residential', label: 'Residencial' },\r\n    { value: 'commercial', label: 'Comercial' },\r\n    { value: 'industrial', label: 'Industrial' },\r\n    { value: 'government', label: 'Gubernamental' },\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: '', label: 'Todas las Prioridades' },\r\n    { value: 'low', label: 'Baja' },\r\n    { value: 'medium', label: 'Media' },\r\n    { value: 'high', label: 'Alta' },\r\n    { value: 'urgent', label: 'Urgente' },\r\n  ];\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    const newFilters = { ...filters, [key]: value };\r\n    setFilters(newFilters);\r\n    onFiltersChange?.(newFilters);\r\n  };\r\n\r\n  const clearAllFilters = () => {\r\n    const cleared = {\r\n      search: '',\r\n      status: '',\r\n      department: '',\r\n      dateRange: '',\r\n      clientType: '',\r\n      priority: '',\r\n      minBudget: '',\r\n      maxBudget: '',\r\n      startDate: '',\r\n      endDate: '',\r\n    };\r\n    setFilters(cleared);\r\n    onFiltersChange?.(cleared);\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters).some((v) => v !== '');\r\n\r\n  const handleExportClick = () => {\r\n    if (!onExport) return;\r\n    if (!filteredProjects || filteredProjects <= 0) {\r\n      alert('No hay proyectos para exportar con los filtros actuales.');\r\n      return;\r\n    }\r\n    onExport(); // el padre exporta lo que ya est谩 filtrado/visible\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 mb-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">\r\n            Filtros de Proyectos\r\n          </h3>\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Mostrando {filteredProjects} de {totalProjects} proyectos\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2\">\r\n          {hasActiveFilters && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={clearAllFilters}\r\n              iconName=\"X\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Limpiar Filtros\r\n            </Button>\r\n          )}\r\n\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n            iconName={isExpanded ? 'ChevronUp' : 'ChevronDown'}\r\n            iconPosition=\"right\"\r\n          >\r\n            {isExpanded ? 'Menos Filtros' : 'M谩s Filtros'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search Bar */}\r\n      <div className=\"mb-4\">\r\n        <div className=\"relative\">\r\n          <Input\r\n            type=\"search\"\r\n            placeholder=\"Buscar por nombre de proyecto, cliente, c贸digo...\"\r\n            value={filters.search}\r\n            onChange={(e) => handleFilterChange('search', e.target.value)}\r\n            className=\"pl-10\"\r\n          />\r\n          <Search\r\n            size={16}\r\n            className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Filters */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4\">\r\n        <Select\r\n          label=\"Estado\"\r\n          options={statusOptions}\r\n          value={filters.status}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Departamento\"\r\n          options={departmentOptions}\r\n          value={filters.department}\r\n          onChange={(value) => handleFilterChange('department', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Fecha\"\r\n          options={dateRangeOptions}\r\n          value={filters.dateRange}\r\n          onChange={(value) => handleFilterChange('dateRange', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Tipo de Cliente\"\r\n          options={clientTypeOptions}\r\n          value={filters.clientType}\r\n          onChange={(value) => handleFilterChange('clientType', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Prioridad\"\r\n          options={priorityOptions}\r\n          value={filters.priority}\r\n          onChange={(value) => handleFilterChange('priority', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <div className=\"flex items-end\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"default\"\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n            className=\"w-full\"\r\n            onClick={handleExportClick}\r\n            disabled={!filteredProjects}\r\n            title={\r\n              filteredProjects\r\n                ? 'Exportar proyectos filtrados'\r\n                : 'No hay resultados para exportar'\r\n            }\r\n          >\r\n            Exportar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Advanced Filters */}\r\n      {isExpanded && (\r\n        <div className=\"border-t border-border pt-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            <Input\r\n              label=\"Presupuesto M铆nimo\"\r\n              type=\"number\"\r\n              placeholder=\"$0\"\r\n              value={filters.minBudget}\r\n              onChange={(e) => handleFilterChange('minBudget', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n\r\n            <Input\r\n              label=\"Presupuesto M谩ximo\"\r\n              type=\"number\"\r\n              placeholder=\"$999,999\"\r\n              value={filters.maxBudget}\r\n              onChange={(e) => handleFilterChange('maxBudget', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n\r\n            <Input\r\n              label=\"Fecha de Inicio\"\r\n              type=\"date\"\r\n              value={filters.startDate}\r\n              onChange={(e) => handleFilterChange('startDate', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n\r\n            <Input\r\n              label=\"Fecha de Finalizaci贸n\"\r\n              type=\"date\"\r\n              value={filters.endDate}\r\n              onChange={(e) => handleFilterChange('endDate', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Active Filters pills */}\r\n      {hasActiveFilters && (\r\n        <div className=\"flex flex-wrap gap-2 mt-4 pt-4 border-t border-border\">\r\n          <span className=\"text-sm text-muted-foreground\">Filtros activos:</span>\r\n\r\n          {Object.entries(filters).map(([key, value]) => {\r\n            if (!value) return null;\r\n\r\n            // etiquetas amigables\r\n            let displayValue = value;\r\n            if (key === 'status')\r\n              displayValue =\r\n                statusOptions.find((opt) => opt.value === value)?.label ||\r\n                value;\r\n            if (key === 'department')\r\n              displayValue =\r\n                departmentOptions.find((opt) => opt.value === value)?.label ||\r\n                value;\r\n            if (key === 'dateRange')\r\n              displayValue =\r\n                dateRangeOptions.find((opt) => opt.value === value)?.label ||\r\n                value;\r\n            if (key === 'clientType')\r\n              displayValue =\r\n                clientTypeOptions.find((opt) => opt.value === value)?.label ||\r\n                value;\r\n            if (key === 'priority')\r\n              displayValue =\r\n                priorityOptions.find((opt) => opt.value === value)?.label ||\r\n                value;\r\n            if (key === 'minBudget' || key === 'maxBudget')\r\n              displayValue = `$${value}`;\r\n\r\n            return (\r\n              <div\r\n                key={key}\r\n                className=\"flex items-center space-x-1 bg-primary/10 text-primary px-2 py-1 rounded-md text-sm\"\r\n              >\r\n                <span>{displayValue}</span>\r\n                <button\r\n                  onClick={() => handleFilterChange(key, '')}\r\n                  className=\"hover:bg-primary/20 rounded-full p-0.5\"\r\n                >\r\n                  <X size={12} />\r\n                </button>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectFilters;\r\n\r\n/* ==========================================\r\n   Funci贸n de filtrado para el componente padre\r\n   (YA CON OPCIN A IMPLEMENTADA)\r\n========================================== */\r\n\r\nexport const applyProjectFilters = (projects, filters) => {\r\n  let filtered = [...projects];\r\n\r\n  // Search\r\n  if (filters?.search) {\r\n    const searchTerm = filters.search.toLowerCase();\r\n    filtered = filtered.filter(\r\n      (project) =>\r\n        project?.name?.toLowerCase()?.includes(searchTerm) ||\r\n        project?.code?.toLowerCase()?.includes(searchTerm) ||\r\n        project?.client?.name?.toLowerCase()?.includes(searchTerm)\r\n    );\r\n  }\r\n\r\n  // Status (incluye equivalentes cuando eliges \"En Pausa\")\r\n  if (filters?.status) {\r\n    filtered = filtered.filter((project) => {\r\n      const raw = (project?.status || '').toLowerCase().trim();\r\n      const target = filters.status.toLowerCase().trim();\r\n\r\n      // Coincidencia directa\r\n      if (raw === target) return true;\r\n\r\n      // Caso especial \"En Pausa\"\r\n      // target === 'on-hold'\r\n      // Queremos incluir estados equivalentes que el backend mete en \"pausa\"\r\n      if (target === 'on-hold') {\r\n        if (\r\n          raw.includes('pausa') ||     // \"en pausa\", \"pausado\", \"pausada\"\r\n          raw.includes('paus')  ||\r\n          raw.includes('hold')  ||     // \"on-hold\"\r\n          raw.includes('suspend') ||   // \"suspendido\", \"suspendida\"\r\n          raw.includes('detenid')      // \"detenido\", \"detenida\"\r\n        ) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    });\r\n  }\r\n\r\n  // Department\r\n  if (filters?.department) {\r\n    filtered = filtered.filter(\r\n      (project) =>\r\n        project?.department?.toLowerCase() ===\r\n        filters.department.toLowerCase()\r\n    );\r\n  }\r\n\r\n  // Client type\r\n  if (filters?.clientType) {\r\n    filtered = filtered.filter(\r\n      (project) => project?.client?.type === filters.clientType\r\n    );\r\n  }\r\n\r\n  // Priority\r\n  if (filters?.priority) {\r\n    filtered = filtered.filter(\r\n      (project) => project?.priority === filters.priority\r\n    );\r\n  }\r\n\r\n  // Date range (sobre startDate)\r\n  if (filters?.dateRange) {\r\n    const now = new Date();\r\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n\r\n    filtered = filtered.filter((project) => {\r\n      const startDate = new Date(project?.startDate);\r\n      if (isNaN(startDate)) return false;\r\n\r\n      switch (filters.dateRange) {\r\n        case 'today':\r\n          return startDate.toDateString() === today.toDateString();\r\n\r\n        case 'week': {\r\n          const weekAgo = new Date(today);\r\n          weekAgo.setDate(weekAgo.getDate() - 7);\r\n          return startDate >= weekAgo && startDate <= now;\r\n        }\r\n\r\n        case 'month':\r\n          return (\r\n            startDate.getMonth() === now.getMonth() &&\r\n            startDate.getFullYear() === now.getFullYear()\r\n          );\r\n\r\n        case 'quarter': {\r\n          const quarter = Math.floor(now.getMonth() / 3);\r\n          const projectQuarter = Math.floor(startDate.getMonth() / 3);\r\n          return (\r\n            projectQuarter === quarter &&\r\n            startDate.getFullYear() === now.getFullYear()\r\n          );\r\n        }\r\n\r\n        case 'year':\r\n          return startDate.getFullYear() === now.getFullYear();\r\n\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Budget range\r\n  if (filters?.minBudget) {\r\n    const minBudget = Number(filters.minBudget);\r\n    filtered = filtered.filter(\r\n      (project) => Number(project?.budget) >= minBudget\r\n    );\r\n  }\r\n\r\n  if (filters?.maxBudget) {\r\n    const maxBudget = Number(filters.maxBudget);\r\n    filtered = filtered.filter(\r\n      (project) => Number(project?.budget) <= maxBudget\r\n    );\r\n  }\r\n\r\n  // Exact start date (>=)\r\n  if (filters?.startDate) {\r\n    const filterStartDate = new Date(filters.startDate);\r\n    filtered = filtered.filter((project) => {\r\n      const projectStartDate = new Date(project?.startDate);\r\n      return !isNaN(projectStartDate) && projectStartDate >= filterStartDate;\r\n    });\r\n  }\r\n\r\n  // Exact end date (<=)\r\n  if (filters?.endDate) {\r\n    const filterEndDate = new Date(filters.endDate);\r\n    filtered = filtered.filter((project) => {\r\n      const projectEndDate = new Date(project?.endDate);\r\n      return !isNaN(projectEndDate) && projectEndDate <= filterEndDate;\r\n    });\r\n  }\r\n\r\n  return filtered;\r\n};\r\n","// services/proyectoService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst ROUTES = {\r\n  LIST: \"/proyectos/todos\",\r\n  GET_BY_ID: (id) => `/proyectos/obtener/${id}`,\r\n  CREATE: \"/proyectos/crear\",\r\n  UPDATE: (id) => `/proyectos/actualizar/${id}`,\r\n  DELETE: (id) => `/proyectos/eliminar/${id}`,\r\n\r\n  // ya no usamos GET_STATS viejo que daba 404\r\n  // GET_STATS: \"/proyectos/stats/get\",\r\n};\r\n\r\n// 锔 NUEVO: este endpoint vive en otro host/puerto (7071)\r\nconst EXTERNAL_ROUTES = {\r\n  STATS: \"http://localhost:7071/api/proyectos/estadisticas\",\r\n};\r\n\r\nconst EXTERNALS = {\r\n  CURRENCY_LATEST: \"https://api.currencyapi.com/v3/latest\",\r\n};\r\n\r\nfunction sanitizeCreatePayload(payload = {}) {\r\n  const out = { ...payload };\r\n\r\n  if (out?.presupuesto?._metaEquipos?.capturadoEn) {\r\n    out.presupuesto._metaEquipos.capturadoEn =\r\n      String(out.presupuesto._metaEquipos.capturadoEn)\r\n        .trim()\r\n        .toUpperCase();\r\n  }\r\n\r\n  if (out?.presupuesto && \"total\" in out.presupuesto) {\r\n    const { total, ...rest } = out.presupuesto;\r\n    out.presupuesto = rest;\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\nfunction getCurrencyApiKey() {\r\n  const env =\r\n    (typeof import.meta !== \"undefined\" && import.meta.env) ||\r\n    (typeof process !== \"undefined\" && process.env) ||\r\n    {};\r\n\r\n  return (\r\n    env.VITE_CURRENCY_API_KEY ||\r\n    env.REACT_APP_CURRENCY_API_KEY ||\r\n    \"fca_live_8tZwnMuA2xq5ExRpYPkQeZiVHGS2wXbFWnc1U7y3\"\r\n  );\r\n}\r\n\r\nconst proyectoService = {\r\n  async getProyectos(config = {}) {\r\n    const data = await httpService.get(ROUTES.LIST, config);\r\n    return data;\r\n  },\r\n\r\n  async getProyectoById(id, config = {}) {\r\n    const data = await httpService.get(ROUTES.GET_BY_ID(id), config);\r\n    return data;\r\n  },\r\n\r\n  async createProyecto(payload, config = {}) {\r\n    const body = sanitizeCreatePayload(payload);\r\n    const data = await httpService.post(ROUTES.CREATE, body, config);\r\n    return data;\r\n  },\r\n\r\n  async updateProyecto(id, payload, config = {}) {\r\n    const data = await httpService.put(ROUTES.UPDATE(id), payload, config);\r\n    return data;\r\n  },\r\n\r\n  async deleteProyecto(id, config = {}) {\r\n    const data = await httpService.delete(ROUTES.DELETE(id), config);\r\n    return data;\r\n  },\r\n\r\n  //  NUEVO: pide las estad铆sticas ya calculadas al backend de puerto 7071\r\n  async getEstadisticas(config = {}) {\r\n    try {\r\n      const data = await httpService.get(EXTERNAL_ROUTES.STATS, {\r\n        // como es URL absoluta, httpService debe respetarla sin baseURL\r\n        timeout: 10000,\r\n        ...config,\r\n      });\r\n      return data;\r\n    } catch (err) {\r\n      console.warn(\r\n        \"[proyectoService.getEstadisticas] no pude obtener stats:\",\r\n        {\r\n          status: err?.status,\r\n          data: err?.data,\r\n          message: err?.userMessage || err?.message,\r\n        }\r\n      );\r\n      return null; // fallback\r\n    }\r\n  },\r\n\r\n  async getCurrencyRates({ base = \"USD\", currencies = [] } = {}, config = {}) {\r\n    const params = new URLSearchParams({\r\n      apikey: getCurrencyApiKey(),\r\n      base_currency: base,\r\n    });\r\n    if (Array.isArray(currencies) && currencies.length) {\r\n      params.set(\"currencies\", currencies.join(\",\"));\r\n    }\r\n\r\n    const url = `${EXTERNALS.CURRENCY_LATEST}?${params.toString()}`;\r\n\r\n    const data = await httpService.get(url, {\r\n      timeout: 15000,\r\n      ...config,\r\n    });\r\n\r\n    return data;\r\n  },\r\n};\r\n\r\nexport default proyectoService;\r\n","import httpService from './httpService';\r\n\r\n\r\nconst clientService = {\r\n  async createClient(data) {\r\n    // POST a la ruta relativa para crear cliente\r\n    const response = await httpService.post('/clientes/crear', data);\r\n    return response;\r\n  },\r\n\r\n  async getClients() {\r\n    // GET para obtener la lista de clientes\r\n    const response = await httpService.get('/clientes');\r\n    return response;\r\n  },\r\n\r\n  async updateClient(id, data) {\r\n    // PUT para editar cliente por id\r\n    const response = await httpService.put(`/clientes/${id}`, data);\r\n    return response;\r\n  },\r\n\r\n  async getClientById(id, data) {\r\n    // get para obtener cliente por id\r\n    const response = await httpService.get(`/clientes/${id}`, data);\r\n    return response;\r\n  },\r\n\r\n  async deleteClient(id) {\r\n    // delete para eliminar cliente por id\r\n    const response = await httpService.delete(`/clientes/${id}`);\r\n    return response;\r\n  }\r\n};\r\n\r\nexport default clientService;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\nimport proyectoService from 'services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport { useNotifications } from 'context/NotificationContext';\r\n\r\n/* === Config === */\r\nconst DEFAULT_USD_RATE = 18;\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\n/* === Helpers === */\r\nconst safeUUID = () => {\r\n  if (typeof crypto !== 'undefined' && crypto.randomUUID) return crypto.randomUUID();\r\n  return Math.random().toString(36).slice(2) + Date.now().toString(36);\r\n};\r\nconst parseISODate = (v) => {\r\n  if (!v) return null;\r\n  const d = new Date(v);\r\n  return isNaN(d.getTime()) ? null : d;\r\n};\r\nconst formatCurrency = (n) =>\r\n  n == null || isNaN(n)\r\n    ? ''\r\n    : new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(n);\r\nconst formatUSD = (n) =>\r\n  n == null || isNaN(n)\r\n    ? ''\r\n    : new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'USD' }).format(n);\r\nconst formatDate = (d) => {\r\n  const x = d instanceof Date ? d : parseISODate(d);\r\n  if (!x) return '';\r\n  return x.toLocaleDateString('es-MX', { day: '2-digit', month: '2-digit', year: 'numeric' });\r\n};\r\nconst getPriorityColor = (p) => {\r\n  const v = (p || '').toString().toLowerCase().trim();\r\n  const map = {\r\n    baja: 'text-green-600',\r\n    media: 'text-yellow-600',\r\n    alta: 'text-orange-600',\r\n    urgente: 'text-red-600',\r\n    low: 'text-green-600',\r\n    medium: 'text-yellow-600',\r\n    high: 'text-orange-600',\r\n    urgent: 'text-red-600',\r\n  };\r\n  return map[v] || 'text-gray-600';\r\n};\r\n\r\nconst STATUS_OPTIONS = [\r\n  { key: 'planning', label: 'Planificaci贸n' },\r\n  { key: 'in_progress', label: 'En Progreso' },\r\n  { key: 'on_hold', label: 'En Pausa' },\r\n  { key: 'review', label: 'En Revisi贸n' },\r\n  { key: 'completed', label: 'Completado' },\r\n  { key: 'cancelled', label: 'Cancelado' },\r\n];\r\n\r\nconst statusKeyFromAny = (raw) => {\r\n  if (raw == null) return null;\r\n  const v = String(raw).toLowerCase().trim();\r\n\r\n  if (v === '0') return 'planning';\r\n  if (v === '1') return 'in_progress';\r\n  if (v === '2') return 'on_hold';\r\n  if (v === '3') return 'review';\r\n  if (v === '4') return 'completed';\r\n  if (v === '5') return 'cancelled';\r\n\r\n  const map = {\r\n    planificacion: 'planning',\r\n    planificaci贸n: 'planning',\r\n    planning: 'planning',\r\n    'en progreso': 'in_progress',\r\n    'en-progreso': 'in_progress',\r\n    in_progress: 'in_progress',\r\n    'in-progress': 'in_progress',\r\n    progress: 'in_progress',\r\n    'en pausa': 'on_hold',\r\n    'en-pausa': 'on_hold',\r\n    on_hold: 'on_hold',\r\n    paused: 'on_hold',\r\n    pausa: 'on_hold',\r\n    revision: 'review',\r\n    revisi贸n: 'review',\r\n    review: 'review',\r\n    completado: 'completed',\r\n    complete: 'completed',\r\n    completed: 'completed',\r\n    done: 'completed',\r\n    finalizado: 'completed',\r\n    cancelado: 'cancelled',\r\n    canceled: 'cancelled',\r\n    cancelled: 'cancelled',\r\n    anulado: 'cancelled',\r\n  };\r\n  return map[v] || null;\r\n};\r\n\r\nconst getStatusColorByKey = (key) => {\r\n  const map = {\r\n    planning: 'bg-blue-100 text-blue-800',\r\n    in_progress: 'bg-green-100 text-green-800',\r\n    on_hold: 'bg-yellow-100 text-yellow-800',\r\n    review: 'bg-purple-100 text-purple-800',\r\n    completed: 'bg-emerald-100 text-emerald-800',\r\n    cancelled: 'bg-red-100 text-red-800',\r\n  };\r\n  return map[key] || 'bg-gray-100 text-gray-800';\r\n};\r\n\r\nconst resolveProjectStatus = (project) => {\r\n  const k1 = statusKeyFromAny(project?.status);\r\n  const lbl1 = project?.statusLabel;\r\n\r\n  const r = project?.raw || {};\r\n  const k2 =\r\n    statusKeyFromAny(r.estado) ||\r\n    statusKeyFromAny(r.fase) ||\r\n    statusKeyFromAny(r.stage) ||\r\n    statusKeyFromAny(r.status);\r\n\r\n  const key = k1 || k2 || null;\r\n\r\n  if (lbl1) return { key: key || statusKeyFromAny(lbl1) || 'planning', label: lbl1 };\r\n\r\n  const found = STATUS_OPTIONS.find((o) => o.key === key);\r\n  if (found) return found;\r\n\r\n  const rawTxt = r.estado || r.fase || r.stage || r.status || project?.statusLabel || project?.status;\r\n  if (rawTxt) {\r\n    const txt = String(rawTxt);\r\n    return { key: key || 'planning', label: txt.charAt(0).toUpperCase() + txt.slice(1) };\r\n  }\r\n  return { key: 'planning', label: 'Planificaci贸n' };\r\n};\r\n\r\n/*Convierte objeto ubicaci贸n en string legible */\r\nconst formatLocation = (loc) => {\r\n  if (!loc) return '';\r\n  if (typeof loc === 'string') return loc;\r\n  if (typeof loc === 'object') {\r\n    const { direccion, municipio, estado, address, city, state } = loc || {};\r\n    const parts = [direccion ?? address, municipio ?? city, estado ?? state].filter(Boolean);\r\n    return parts.length ? parts.join(', ') : JSON.stringify(loc);\r\n  }\r\n  return String(loc);\r\n};\r\n\r\n/* Normalizador Proyecto */\r\nconst mapProjectDocStrict = (doc) => {\r\n  const id = doc.id ?? doc._id ?? safeUUID();\r\n  const code = doc.codigo ?? doc.code ?? '';\r\n  const name = doc.nombreProyecto ?? doc.nombre ?? 'Proyecto sin nombre';\r\n  const type = doc.tipoProyecto ?? doc.type ?? '';\r\n\r\n  const clienteNode = doc.cliente ?? doc.client ?? doc.customer ?? doc.account ?? null;\r\n\r\n  const client = {\r\n    id:\r\n      (clienteNode && typeof clienteNode === 'object' && (clienteNode.id || clienteNode._id)) ||\r\n      doc.clienteId ||\r\n      doc.idCliente ||\r\n      doc.clientId ||\r\n      doc.customerId ||\r\n      null,\r\n    name:\r\n      (clienteNode &&\r\n        typeof clienteNode === 'object' &&\r\n        (clienteNode.nombre || clienteNode.name || clienteNode.empresa || clienteNode.razonSocial)) ||\r\n      (typeof clienteNode === 'string' ? clienteNode : null) ||\r\n      doc.clienteNombre ||\r\n      doc.clientName ||\r\n      null,\r\n    email:\r\n      (clienteNode && typeof clienteNode === 'object' && (clienteNode.email || clienteNode.correo)) ||\r\n      doc.clienteEmail ||\r\n      doc.emailCliente ||\r\n      null,\r\n    contact:\r\n      (clienteNode &&\r\n        typeof clienteNode === 'object' &&\r\n        (clienteNode.contacto?.nombre || clienteNode.telefono || clienteNode.phone)) ||\r\n      doc.contacto ||\r\n      doc.telefono ||\r\n      null,\r\n  };\r\n\r\n  const p = doc.presupuesto || {};\r\n  const budget = doc.totalPresupuesto ?? doc.budget ?? p.total ?? null;\r\n\r\n  const equiposUSD = (() => {\r\n    if (p.equipoDolares != null && !isNaN(Number(p.equipoDolares))) return Number(p.equipoDolares) || 0;\r\n    if (p?._metaEquipos?.capturadoEn === 'USD' && p?._metaEquipos?.valorUSD != null) {\r\n      const v = Number(p._metaEquipos.valorUSD);\r\n      if (!isNaN(v)) return v;\r\n    }\r\n    const mxn = Number(p?.equipos || 0);\r\n    if (!(mxn > 0)) return 0;\r\n    const rate = Number(p?._metaEquipos?.tipoCambio);\r\n    const divisor = rate && rate > 0 ? rate : DEFAULT_USD_RATE;\r\n    return mxn / divisor;\r\n  })();\r\n\r\n  const location = formatLocation(doc.ubicacion ?? doc.location ?? null);\r\n\r\n  return {\r\n    id,\r\n    code,\r\n    name,\r\n    type,\r\n    image: doc.image ?? null,\r\n    client,\r\n    status: doc.status ?? null,\r\n    statusLabel: doc.statusLabel ?? null,\r\n    priority: doc.prioridad ?? doc.prioridades ?? doc.priority ?? null,\r\n    priorityLabel: doc.priorityLabel ?? null,\r\n    budget,\r\n    startDate: doc.cronograma?.fechaInicio ?? doc.startDate ?? null,\r\n    endDate: doc.cronograma?.fechaFin ?? doc.endDate ?? null,\r\n    department: doc.departamento ?? doc.department ?? null,\r\n    location,\r\n    description: doc.descripcion ?? doc.description ?? null,\r\n    assignedPersonnel: Array.isArray(doc.assignedPersonnel)\r\n      ? doc.assignedPersonnel\r\n      : Array.isArray(doc.personalAsignado)\r\n        ? doc.personalAsignado.map((s) => {\r\n          if (typeof s !== 'string') return { name: String(s ?? ''), role: '' };\r\n          const [n, r] = s.split(' - ');\r\n          return { name: n || '', role: r || '' };\r\n        })\r\n        : null,\r\n    workOrders: Array.isArray(doc.workOrders) ? doc.workOrders : undefined,\r\n    equiposUSD,\r\n    //  Abonos originales quedan en raw (el c谩lculo se comenta m谩s abajo)\r\n    abonos: Array.isArray(doc.abonos) ? doc.abonos : [],\r\n    createdAt: doc.createdAt ?? null,\r\n    updatedAt: doc.updatedAt ?? null,\r\n    raw: doc,\r\n  };\r\n};\r\n\r\n/*Hydration desde /clientes*/\r\nconst normalizeClientRecord = (c) => {\r\n  const id = c?.id ?? c?._id ?? c?.clienteId ?? c?.idCliente ?? null;\r\n  const name =\r\n    c?.nombre ??\r\n    c?.empresa ??\r\n    c?.razonSocial ??\r\n    c?.razon_social ??\r\n    c?.displayName ??\r\n    c?.name ??\r\n    null;\r\n  const email =\r\n    c?.email ??\r\n    c?.correo ??\r\n    c?.correoElectronico ??\r\n    c?.mail ??\r\n    c?.contacto?.email ??\r\n    c?.contacto?.correo ??\r\n    null;\r\n  const contact =\r\n    c?.contacto?.nombre ??\r\n    c?.contacto?.name ??\r\n    c?.telefono ??\r\n    c?.phone ??\r\n    null;\r\n  return { id, name, email, contact };\r\n};\r\n\r\nconst ProjectTable = ({\r\n  projects,\r\n  onProjectSelect,\r\n  onStatusUpdate,\r\n  onBulkAction,\r\n  onImageUpload,\r\n  isUploadingImage,\r\n}) => {\r\n  const navigate = useNavigate();\r\n\r\n  //Notificaciones\r\n  const { showConfirm, showSuccess, showError } = useNotifications();\r\n\r\n  //Shadow list para props y lista remota para fetch\r\n  const [localDocs, setLocalDocs] = useState(null);\r\n  const [remoteDocs, setRemoteDocs] = useState([]);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n  const [sortConfig, setSortConfig] = useState({ key: 'startDate', direction: 'desc' });\r\n  const [selectedProjects, setSelectedProjects] = useState([]);\r\n  const [expandedRows, setExpandedRows] = useState([]);\r\n  //  Estado de borrador de abonos (COMENTADO)\r\n  // const [newAbonoDraft, setNewAbonoDraft] = useState({});\r\n  const [clientCache, setClientCache] = useState({});\r\n  const [clientsLoaded, setClientsLoaded] = useState(false);\r\n\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  /* Sincronizar shadow con props */\r\n  useEffect(() => {\r\n    if (Array.isArray(projects) && projects.length >= 0) {\r\n      setLocalDocs(projects);\r\n    } else {\r\n      setLocalDocs(null);\r\n    }\r\n  }, [projects]);\r\n\r\n  /* Cargar proyectos si NO vienen por props */\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        if (Array.isArray(projects)) return;\r\n        setLoading(true);\r\n        setErrorMsg('');\r\n        const res = await proyectoService.getProyectos().catch(() => []);\r\n        if (!mounted) return;\r\n        const data = Array.isArray(res) ? res : Array.isArray(res?.data) ? res.data : [];\r\n        setRemoteDocs(data);\r\n      } catch (e) {\r\n        console.error(e);\r\n        if (mounted) setErrorMsg('No se pudieron cargar los proyectos.');\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [projects]);\r\n\r\n  //Cargar TODOS los clientes\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const res = await clientService.getClients();\r\n        const list = Array.isArray(res) ? res : Array.isArray(res?.data) ? res.data : [];\r\n        const map = {};\r\n        list.forEach((raw) => {\r\n          const c = normalizeClientRecord(raw);\r\n          if (c.id) map[c.id] = { name: c.name || null, email: c.email || null, contact: c.contact || null };\r\n        });\r\n        if (mounted) {\r\n          setClientCache(map);\r\n          setClientsLoaded(true);\r\n        }\r\n      } catch (e) {\r\n        console.warn('No se pudieron cargar clientes, se usar谩 s贸lo lo que traiga el proyecto.');\r\n        if (mounted) setClientsLoaded(true);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  const baseSourceDocs = useMemo(() => {\r\n    return Array.isArray(localDocs) ? localDocs : remoteDocs;\r\n  }, [localDocs, remoteDocs]);\r\n\r\n  const normalizedProjects = useMemo(() => {\r\n    if (!Array.isArray(baseSourceDocs)) return [];\r\n    return baseSourceDocs.map(mapProjectDocStrict);\r\n  }, [baseSourceDocs]);\r\n\r\n  //  Inicializaci贸n de borradores de abono (COMENTADO)\r\n  /*\r\n  useEffect(() => {\r\n    setNewAbonoDraft((prev) => {\r\n      const clone = { ...prev };\r\n      normalizedProjects.forEach((p) => {\r\n        if (!clone[p.id]) clone[p.id] = { fecha: '', monto: '', nota: '' };\r\n      });\r\n      return clone;\r\n    });\r\n  }, [normalizedProjects]);\r\n  */\r\n\r\n  const handleSort = (key) => {\r\n    let direction = 'asc';\r\n    if (sortConfig?.key === key && sortConfig?.direction === 'asc') direction = 'desc';\r\n    setSortConfig({ key, direction });\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const sortedProjects = useMemo(() => {\r\n    const list = [...normalizedProjects];\r\n    const { key, direction } = sortConfig || {};\r\n    if (!key) return list;\r\n\r\n    return list.sort((a, b) => {\r\n      let aValue = a?.[key];\r\n      let bValue = b?.[key];\r\n\r\n      if (aValue instanceof Date || bValue instanceof Date) {\r\n        const at = aValue instanceof Date ? aValue.getTime() : -Infinity;\r\n        const bt = bValue instanceof Date ? bValue.getTime() : -Infinity;\r\n        return direction === 'asc' ? at - bt : bt - at;\r\n      }\r\n\r\n      if (typeof aValue === 'number' || typeof bValue === 'number') {\r\n        aValue = Number(aValue) || 0;\r\n        bValue = Number(bValue) || 0;\r\n        return direction === 'asc' ? aValue - bValue : bValue - aValue;\r\n      }\r\n\r\n      aValue = (aValue ?? '').toString().toLowerCase();\r\n      bValue = (bValue ?? '').toString().toLowerCase();\r\n      if (aValue < bValue) return direction === 'asc' ? -1 : 1;\r\n      if (aValue > bValue) return direction === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n  }, [normalizedProjects, sortConfig]);\r\n\r\n  const totalItems = sortedProjects.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const pageItems = sortedProjects.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  const getPossibleClientId = (p) => {\r\n    const r = p?.raw || {};\r\n    return (\r\n      p?.client?.id ||\r\n      p?.client?._id ||\r\n      r.clienteId ||\r\n      r.idCliente ||\r\n      r.clientId ||\r\n      r.customerId ||\r\n      (r.cliente && (r.cliente.id || r.cliente._id)) ||\r\n      (r.client && (r.client.id || r.client._id)) ||\r\n      null\r\n    );\r\n  };\r\n  const resolveClientName = (p) => {\r\n    if (p?.client?.name) return p.client.name;\r\n    const cid = getPossibleClientId(p);\r\n    if (cid && clientCache[cid]?.name) return clientCache[cid].name;\r\n    const r = p?.raw || {};\r\n    const c = r.cliente || r.client || r.customer || r.account || {};\r\n    return (\r\n      c.nombre ||\r\n      c.name ||\r\n      c.empresa ||\r\n      c.razonSocial ||\r\n      r.clienteNombre ||\r\n      r.clientName ||\r\n      r.empresa ||\r\n      'Sin cliente'\r\n    );\r\n  };\r\n  const resolveClientEmailOrContact = (p) => {\r\n    if (p?.client?.email) return p.client.email;\r\n    if (p?.client?.contact) return p.client.contact;\r\n    const cid = getPossibleClientId(p);\r\n    if (cid) {\r\n      const hit = clientCache[cid];\r\n      if (hit?.email) return hit.email;\r\n      if (hit?.contact) return hit.contact;\r\n    }\r\n    const r = p?.raw || {};\r\n    const c = r.cliente || r.client || r.customer || r.account || {};\r\n    return c.email || c.correo || c.contacto?.email || c.telefono || c.phone || 'Sin contacto';\r\n  };\r\n\r\n  const handleSelectProject = (id) =>\r\n    setSelectedProjects((prev) => (prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]));\r\n\r\n  const handleSelectAll = () => {\r\n    const pageIds = pageItems.map((p) => p?.id);\r\n    const allSelected = pageIds.every((id) => selectedProjects.includes(id));\r\n    if (allSelected) {\r\n      setSelectedProjects((prev) => prev.filter((id) => !pageIds.includes(id)));\r\n    } else {\r\n      setSelectedProjects((prev) => Array.from(new Set([...prev, ...pageIds])));\r\n    }\r\n  };\r\n\r\n  const toggleRowExpansion = (id) =>\r\n    setExpandedRows((prev) => (prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]));\r\n\r\n  const usingLocalShadow = Array.isArray(localDocs);\r\n\r\n  //Eliminar (optimista, sin refresh) >>> MENSAJE EDITADO\r\n  //  Eliminar (optimista, sin refresh)\r\n  const handleDelete = (project) => {\r\n    if (!project?.id) return;\r\n\r\n    const doRemove = (list, id) => list.filter((d) => (d.id || d._id) !== id);\r\n\r\n    const nombre = project?.name || project?.code || 'sin nombre';\r\n\r\n    showConfirm(`驴Deseas eliminar este proyecto \"${nombre}\"?`, {\r\n      onConfirm: async () => {\r\n        const prevLocal = usingLocalShadow ? [...localDocs] : null;\r\n        const prevRemote = !usingLocalShadow ? [...remoteDocs] : null;\r\n\r\n        if (usingLocalShadow) {\r\n          setLocalDocs((prev) => doRemove(prev, project.id));\r\n        } else {\r\n          setRemoteDocs((prev) => doRemove(prev, project.id));\r\n        }\r\n        setSelectedProjects((prev) => prev.filter((x) => x !== project.id));\r\n        setExpandedRows((prev) => prev.filter((x) => x !== project.id));\r\n\r\n        setTimeout(() => {\r\n          const newTotal = (usingLocalShadow ? (prevLocal ? doRemove(prevLocal, project.id) : []) : (prevRemote ? doRemove(prevRemote, project.id) : [])).length;\r\n          const newTotalPages = Math.max(1, Math.ceil(newTotal / pageSize));\r\n          setCurrentPage((cp) => Math.min(cp, newTotalPages));\r\n        }, 0);\r\n\r\n        try {\r\n          await proyectoService.deleteProyecto(project.id);\r\n          showSuccess('Proyecto eliminado exitosamente');\r\n        } catch (e) {\r\n          console.error(e);\r\n          if (usingLocalShadow && prevLocal) setLocalDocs(prevLocal);\r\n          if (!usingLocalShadow && prevRemote) setRemoteDocs(prevRemote);\r\n          showError('No se pudo eliminar el proyecto');\r\n        }\r\n      },\r\n      onCancel: () => { },\r\n    });\r\n  };\r\n\r\n  //Eliminaci贸n masiva (optimista)\r\n  const handleBulkDelete = () => {\r\n    if (!selectedProjects?.length) return;\r\n\r\n    const toDelete = [...selectedProjects];\r\n\r\n    showConfirm(`驴Eliminar ${toDelete.length} proyecto(s)?`, {\r\n      onConfirm: async () => {\r\n        const doRemoveBulk = (list, ids) => list.filter((d) => !ids.includes(d.id || d._id));\r\n\r\n        const prevLocal = usingLocalShadow ? [...localDocs] : null;\r\n        const prevRemote = !usingLocalShadow ? [...remoteDocs] : null;\r\n\r\n        if (usingLocalShadow) {\r\n          setLocalDocs((prev) => doRemoveBulk(prev, toDelete));\r\n        } else {\r\n          setRemoteDocs((prev) => doRemoveBulk(prev, toDelete));\r\n        }\r\n        setSelectedProjects([]);\r\n        setExpandedRows((prev) => prev.filter((x) => !toDelete.includes(x)));\r\n\r\n        setTimeout(() => {\r\n          const newTotal = (usingLocalShadow ? (prevLocal ? doRemoveBulk(prevLocal, toDelete) : []) : (prevRemote ? doRemoveBulk(prevRemote, toDelete) : [])).length;\r\n          const newTotalPages = Math.max(1, Math.ceil(newTotal / pageSize));\r\n          setCurrentPage((cp) => Math.min(cp, newTotalPages));\r\n        }, 0);\r\n\r\n        try {\r\n          await Promise.allSettled(toDelete.map((id) => proyectoService.deleteProyecto(id)));\r\n          showSuccess('Proyectos eliminados exitosamente');\r\n        } catch (e) {\r\n          console.error(e);\r\n          if (usingLocalShadow && prevLocal) setLocalDocs(prevLocal);\r\n          if (!usingLocalShadow && prevRemote) setRemoteDocs(prevRemote);\r\n          showError('Ocurri贸 un error eliminando algunos proyectos');\r\n        }\r\n      },\r\n      onCancel: () => { },\r\n    });\r\n  };\r\n\r\n  /* Imagen demo */\r\n  const handleImageUpload = async (project) => {\r\n    try {\r\n      const input = document.createElement('input');\r\n      input.type = 'file';\r\n      input.accept = 'image/*';\r\n      input.onchange = (e) => {\r\n        const f = e?.target?.files?.[0];\r\n        if (!f) return;\r\n        if (!f.type?.startsWith('image/')) return alert('Archivo de imagen inv谩lido');\r\n        if (f.size > 5 * 1024 * 1024) return alert('M谩ximo 5MB');\r\n        alert(`Imagen \"${f.name}\" cargada para \"${project?.name}\" (demo)`);\r\n      };\r\n      input.click();\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert('Error al seleccionar la imagen.');\r\n    }\r\n  };\r\n\r\n  /* ====== ABONOS: helpers COMENTADOS ====== */\r\n  /*\r\n  const getProjectLiveSnapshot = (projectId) => {\r\n    const source = usingLocalShadow ? localDocs : remoteDocs;\r\n    const inSource = source?.find((d) => (d.id || d._id) === projectId);\r\n    if (inSource) return inSource;\r\n    if (Array.isArray(projects)) {\r\n      const inProps = projects.find((d) => (d.id || d._id) === projectId);\r\n      if (inProps) return inProps;\r\n    }\r\n    return undefined;\r\n  };\r\n  const getAbonosForProject = (id) => {\r\n    const snap = getProjectLiveSnapshot(id);\r\n    return Array.isArray(snap?.abonos) ? snap.abonos : [];\r\n  };\r\n  const getTotalsForProject = (project) => {\r\n    const snap = getProjectLiveSnapshot(project.id) || {};\r\n    const presupuestoTotal = Number(\r\n      snap.totalPresupuesto ?? snap.budget ?? snap.presupuesto?.total ?? project.budget ?? 0\r\n    );\r\n    const abonos = getAbonosForProject(project.id);\r\n    const totalAbonado = abonos.reduce((s, a) => s + (Number(a?.monto) || 0), 0);\r\n    const restante = presupuestoTotal - totalAbonado;\r\n    const percent = Math.min(Math.max(presupuestoTotal > 0 ? (totalAbonado / presupuestoTotal) * 100 : 0, 0), 100);\r\n    return { presupuestoTotal, abonosList: abonos, totalAbonado, restante, percent };\r\n  };\r\n  const handleDraftChange = (pid, f, v) =>\r\n    setNewAbonoDraft((prev) => ({ ...prev, [pid]: { ...(prev[pid] || {}), [f]: v } }));\r\n  const handleAddAbono = (project) => {\r\n    const { restante } = getTotalsForProject(project);\r\n    if (restante <= 0) return alert('Este proyecto ya est谩 pagado en su totalidad.');\r\n    const draft = newAbonoDraft[project.id] || {};\r\n    const monto = Number(draft.monto);\r\n    if (!draft.fecha) return alert('Falta la fecha del abono');\r\n    if (!monto || monto <= 0) return alert('Monto inv谩lido');\r\n    if (monto > restante) return alert('El abono excede el restante pendiente.');\r\n    const nuevo = { fecha: draft.fecha, monto, nota: draft.nota?.trim() || '', _tmpId: safeUUID() };\r\n    const snap = getProjectLiveSnapshot(project.id);\r\n    const updated = { ...(snap || {}), id: snap?.id ?? project.id, abonos: [...(snap?.abonos || []), nuevo] };\r\n\r\n    if (usingLocalShadow) {\r\n      setLocalDocs((prev) => {\r\n        const exists = prev?.some((p) => (p.id || p._id) === project.id);\r\n        return exists ? prev.map((p) => ((p.id || p._id) === project.id ? updated : p)) : [...(prev || []), updated];\r\n      });\r\n    } else {\r\n      setRemoteDocs((prev) => {\r\n        const exists = prev.some((p) => (p.id || p._id) === project.id);\r\n        return exists ? prev.map((p) => ((p.id || p._id) === project.id ? updated : p)) : [...prev, updated];\r\n      });\r\n    }\r\n    setNewAbonoDraft((prev) => ({ ...prev, [project.id]: { fecha: '', monto: '', nota: '' } }));\r\n  };\r\n  */\r\n\r\n  /* ===== Render ===== */\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-visible\">\r\n      {loading && <div className=\"p-4 border-b border-border text-sm text-muted-foreground\">Cargando proyectos</div>}\r\n      {!!errorMsg && <div className=\"p-4 border-b border-border text-sm text-red-600\">{errorMsg}</div>}\r\n\r\n      {selectedProjects?.length > 0 && (\r\n        <div className=\"bg-primary/5 border-b border-border p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-foreground\">{selectedProjects?.length} proyecto(s) seleccionado(s)</span>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Trash2\" iconPosition=\"left\" onClick={handleBulkDelete}>Eliminar</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop */}\r\n      <div className=\"hidden lg:block overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-muted/50\">\r\n            <tr>\r\n              <th className=\"w-12 p-4\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={\r\n                    pageItems.length > 0 &&\r\n                    pageItems.every((p) => selectedProjects.includes(p.id))\r\n                  }\r\n                  onChange={handleSelectAll}\r\n                  className=\"rounded border-border\"\r\n                />\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('code')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>C贸digo</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('name')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Proyecto</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Cliente</th>\r\n\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('status')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Estado</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('priority')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Prioridad</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('budget')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Presupuesto</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('startDate')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Fecha Inicio</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"w-24 p-4 font-medium text-foreground\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {pageItems?.map((project) => {\r\n              //  Totales de abonos por proyecto (COMENTADO)\r\n              // const { presupuestoTotal, abonosList, totalAbonado, restante, percent } = getTotalsForProject(project);\r\n              // const draft = newAbonoDraft[project.id] || { fecha: '', monto: '', nota: '' };\r\n              // const isPagado = restante <= 0;\r\n\r\n              const nameToShow = resolveClientName(project);\r\n              const emailToShow = resolveClientEmailOrContact(project);\r\n              const statusUI = resolveProjectStatus(project);\r\n\r\n              return (\r\n                <React.Fragment key={project?.id}>\r\n                  <tr className=\"border-b border-border hover:bg-muted/30 transition-smooth\">\r\n                    <td className=\"p-4\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedProjects?.includes(project?.id)}\r\n                        onChange={() => handleSelectProject(project?.id)}\r\n                        className=\"rounded border-border\"\r\n                      />\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <span className=\"font-mono text-sm text-primary\">{project?.code}</span>\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <Image src={project?.image} alt={project?.name} className=\"w-10 h-10 rounded-lg object-cover\" />\r\n                        <div>\r\n                          <div className=\"font-medium text-foreground\">{project?.name}</div>\r\n                          <div className=\"text-sm text-muted-foreground\">{project?.type}</div>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n\r\n                    {/* Cliente */}\r\n                    <td className=\"p-4\">\r\n                      <div className=\"min-w-[240px] max-w-[420px]\">\r\n                        <div className=\"font-medium text-foreground truncate\" title={nameToShow}>{nameToShow}</div>\r\n                        <div className=\"text-sm text-muted-foreground truncate\" title={emailToShow}>{emailToShow}</div>\r\n                        {!clientsLoaded && (\r\n                          <div className=\"text-xs text-muted-foreground mt-0.5\">cargando clientes</div>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n\r\n                    {/* Estado: solo pill */}\r\n                    <td className=\"p-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColorByKey(statusUI.key)}`}>\r\n                          {statusUI.label}\r\n                        </span>\r\n                      </div>\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <div className=\"flex items-center space-x-1\">\r\n                        <Icon name=\"AlertCircle\" size={16} className={getPriorityColor(project?.priority)} />\r\n                        <span className=\"text-sm text-foreground\">\r\n                          {project?.priorityLabel || project?.priority || ''}\r\n                        </span>\r\n                      </div>\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <div className=\"text-foreground font-medium\">{formatCurrency(project?.budget)}</div>\r\n                      {Number(project?.equiposUSD) > 0 && (\r\n                        <div className=\"text-xs text-muted-foreground mt-1\">\r\n                          Equipos: <span className=\"font-medium\">{formatUSD(project?.equiposUSD)}</span>\r\n                        </div>\r\n                      )}\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <div className=\"text-sm text-foreground\">{formatDate(project?.startDate)}</div>\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <div className=\"flex items-center space-x-1\">\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => toggleRowExpansion(project?.id)} title=\"Ver detalles\">\r\n                          <Icon name={expandedRows?.includes(project?.id) ? 'ChevronUp' : 'ChevronDown'} size={16} />\r\n                        </Button>\r\n                        {/* <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate(`/project-detail-gallery/${project?.id}`)} title=\"Ver galer铆a de im谩genes\">\r\n                          <Icon name=\"Image\" size={16} />\r\n                        </Button>\r\n\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleImageUpload(project)} title=\"Subir imagen\">\r\n                          <Icon name=\"Upload\" size={16} />\r\n                        </Button>\r\n */}\r\n\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => onProjectSelect?.(project)} title=\"Editar proyecto\">\r\n                          <Icon name=\"Edit\" size={16} />\r\n                        </Button>\r\n\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDelete(project)} title=\"Eliminar proyecto\">\r\n                          <Icon name=\"Trash2\" size={16} />\r\n                        </Button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n\r\n                  {expandedRows?.includes(project?.id) && (\r\n                    <tr className=\"bg-muted/20\">\r\n                      <td colSpan={9} className=\"p-4\">\r\n                        {/* Detalles + (ANTES ABONOS) */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n                          <div>\r\n                            <h4 className=\"font-medium text-foreground mb-2\">Detalles del Proyecto</h4>\r\n                            <div className=\"space-y-2 text-sm\">\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Departamento:</span>\r\n                                <span className=\"text-foreground\">{project?.department || ''}</span>\r\n                              </div>\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Fecha Fin:</span>\r\n                                <span className=\"text-foreground\">{formatDate(project?.endDate)}</span>\r\n                              </div>\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Ubicaci贸n:</span>\r\n                                <span className=\"text-foreground\">{project?.location || ''}</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <h4 className=\"font-medium text-foreground mb-2\">Personal Asignado</h4>\r\n                            <div className=\"space-y-2\">\r\n                              {(project?.assignedPersonnel || [])?.map((person, idx) => (\r\n                                <div key={idx} className=\"flex items-center space-x-2\">\r\n                                  <div className=\"w-6 h-6 bg-secondary rounded-full flex items-center justify-center\">\r\n                                    <Icon name=\"User\" size={12} color=\"white\" />\r\n                                  </div>\r\n                                  <span className=\"text-sm text-foreground\">{person?.name}</span>\r\n                                  {person?.role && <span className=\"text-xs text-muted-foreground\">({person?.role})</span>}\r\n                                </div>\r\n                              ))}\r\n                              {(!project?.assignedPersonnel || project?.assignedPersonnel?.length === 0) && (\r\n                                <div className=\"text-sm text-muted-foreground\">Sin personal asignado</div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <h4 className=\"font-medium text-foreground mb-2\">Descripci贸n</h4>\r\n                            <p className=\"text-sm text-muted-foreground whitespace-pre-line\">\r\n                              {project?.description || ''}\r\n                            </p>\r\n                          </div>\r\n                          {/*\r\n                          <div>\r\n                            <h4 className=\"font-medium text-foreground mb-2\">Acciones R谩pidas</h4>\r\n                            <div className=\"space-y-2\">\r\n                              <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                iconName=\"Image\"\r\n                                iconPosition=\"left\"\r\n                                onClick={() => navigate(`/project-gallery-viewer/${project?.id}`)}\r\n                                className=\"w-full justify-start\"\r\n                              >\r\n                                Ver Galer铆a\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                iconName=\"Calendar\"\r\n                                iconPosition=\"left\"\r\n                                className=\"w-full justify-start\"\r\n                                onClick={() => navigate(`/project-timeline/${project?.id}`)}\r\n                              >\r\n                                Ver Cronograma\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                           */}\r\n                        </div>\r\n\r\n                        {/*\r\n                        <div className=\"mt-6 border-t border-border pt-4\">\r\n                          <div className=\"flex items-start justify-between mb-3\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <Icon name=\"DollarSign\" size={16} className=\"text-green-600\" />\r\n                              <h4 className=\"font-semibold text-foreground text-sm\">Abonos</h4>\r\n                            </div>\r\n                            <span className=\"text-[11px] text-muted-foreground\">Seguimiento de pagos del proyecto</span>\r\n                          </div>\r\n\r\n                          {abonosList.length > 0 ? (\r\n                            <div className=\"mb-3 rounded-md border border-border bg-white/40 dark:bg-muted/20 divide-y divide-border text-[12px]\">\r\n                              {abonosList.map((abono, idx) => (\r\n                                <div key={abono._tmpId || idx} className=\"flex flex-wrap justify-between items-center px-3 py-1.5\">\r\n                                  <div className=\"text-foreground flex items-center gap-1\">\r\n                                    <span className=\"text-muted-foreground\"></span>\r\n                                    <span>{formatDate(abono.fecha)}</span>\r\n                                  </div>\r\n                                  <div className=\"font-medium text-green-700\">{formatCurrency(abono.monto)}</div>\r\n                                  <div className=\"text-muted-foreground italic truncate max-w-[200px]\">\r\n                                    {abono.nota || 'Sin nota'}\r\n                                  </div>\r\n                                </div>\r\n                              ))}\r\n                            </div>\r\n                          ) : (\r\n                            <p className=\"text-[12px] text-muted-foreground mb-3\">No hay abonos registrados</p>\r\n                          )}\r\n\r\n                          <div className=\"border border-border rounded-md bg-background/50 p-3 mb-3\">\r\n                            <div className=\"flex items-start justify-between mb-2\">\r\n                              <span className=\"text-[12px] font-medium text-foreground\">Agregar abono (modo prueba)</span>\r\n                              <button\r\n                                className={`flex items-center gap-1 text-[11px] ${\r\n                                  isPagado ? 'text-muted-foreground cursor-not-allowed' : 'text-primary hover:underline'\r\n                                }`}\r\n                                onClick={() => {\r\n                                  if (!isPagado) handleAddAbono(project);\r\n                                }}\r\n                                disabled={isPagado}\r\n                              >\r\n                                <Icon name=\"Plus\" size={12} />\r\n                                <span>{isPagado ? 'Pagado' : 'Agregar'}</span>\r\n                              </button>\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-wrap gap-2 text:[11px] text-[11px]\">\r\n                              <input\r\n                                type=\"date\"\r\n                                value={draft.fecha || ''}\r\n                                onChange={(e) => handleDraftChange(project.id, 'fecha', e.target.value)}\r\n                                className=\"border border-border rounded px-2 py-1 bg-background text-foreground min-w-[150px]\"\r\n                                disabled={isPagado}\r\n                              />\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"0\"\r\n                                step=\"0.01\"\r\n                                placeholder=\"0.00\"\r\n                                value={draft.monto || ''}\r\n                                onChange={(e) => handleDraftChange(project.id, 'monto', e.target.value)}\r\n                                className=\"border border-border rounded px-2 py-1 bg-background text-foreground w-[120px]\"\r\n                                disabled={isPagado}\r\n                              />\r\n                              <input\r\n                                type=\"text\"\r\n                                placeholder=\"ej. anticipo\"\r\n                                value={draft.nota || ''}\r\n                                onChange={(e) => handleDraftChange(project.id, 'nota', e.target.value)}\r\n                                className=\"border border-border rounded px-2 py-1 bg-background text-foreground flex-1 min-w-[200px]\"\r\n                                disabled={isPagado}\r\n                              />\r\n                            </div>\r\n\r\n                            {isPagado && (\r\n                              <div className=\"text-[11px] text-green-700 font-medium mt-2\">\r\n                                Proyecto pagado en su totalidad \r\n                              </div>\r\n                            )}\r\n                          </div>\r\n\r\n                          <div className=\"space-y-2\">\r\n                            <div className=\"flex flex-wrap gap-x-4 text-[12px] mb-2\">\r\n                              <span>\r\n                                <span className=\"text-muted-foreground\">Presupuesto total: </span>\r\n                                <span className=\"font-semibold\">{formatCurrency(presupuestoTotal)}</span>\r\n                              </span>\r\n                              <span>\r\n                                <span className=\"text-muted-foreground\">Total abonado: </span>\r\n                                <span className=\"font-semibold text-green-700\">{formatCurrency(totalAbonado)}</span>\r\n                              </span>\r\n                              <span>\r\n                                <span className=\"text-muted-foreground\">Restante: </span>\r\n                                <span className={`font-semibold ${restante < 0 ? 'text-red-600' : 'text-foreground'}`}>\r\n                                  {formatCurrency(restante)}\r\n                                </span>\r\n                              </span>\r\n                            </div>\r\n\r\n                            <div className=\"relative w-full h-3 bg-muted rounded overflow-hidden border border-border\">\r\n                              <div\r\n                                className={`h-full transition-all duration-500 ${\r\n                                  percent >= 100 ? 'bg-green-600' : 'bg-green-500'\r\n                                }`}\r\n                                style={{ width: `${percent}%` }}\r\n                              />\r\n                              <span className=\"absolute inset-0 flex items-center justify-center text-[10px] font-medium text-white\">\r\n                                {percent.toFixed(0)}%\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        */}\r\n                      </td>\r\n                    </tr>\r\n                  )}\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n\r\n            {pageItems?.length === 0 && !loading && (\r\n              <tr>\r\n                <td colSpan={9} className=\"p-8 text-center text-muted-foreground\">\r\n                  No hay proyectos para mostrar.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* Paginaci贸n Desktop */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"relative z-20 text-sm px-2 py-1 border border-border rounded bg-background text-foreground min-w-[84px] pr-6 pointer-events-auto\"\r\n              style={{ appearance: 'auto' }}\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n            <span className=\"text-xs text-muted-foreground ml-3\">\r\n              Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span><span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n            <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile (resumen) */}\r\n      <div className=\"lg:hidden\">\r\n        {pageItems?.map((p) => {\r\n          const nameToShow = resolveClientName(p);\r\n          const emailToShow = resolveClientEmailOrContact(p);\r\n          const statusUI = resolveProjectStatus(p);\r\n          return (\r\n            <div key={p?.id} className=\"border-b border-border p-4\">\r\n              <div className=\"flex items-start justify-between mb-3\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedProjects?.includes(p?.id)}\r\n                    onChange={() => handleSelectProject(p?.id)}\r\n                    className=\"rounded border-border\"\r\n                  />\r\n                  <Image src={p?.image} alt={p?.name} className=\"w-12 h-12 rounded-lg object-cover\" />\r\n                  <div>\r\n                    <div className=\"font-medium text-foreground\">{p?.name}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">{p?.code}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4 mb-3\">\r\n                <div>\r\n                  <div className=\"text-xs text-muted-foreground\">Cliente</div>\r\n                  <div className=\"text-sm text-foreground\">{nameToShow}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">{emailToShow}</div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColorByKey(statusUI.key)}`}>\r\n                    {statusUI.label}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {/* Paginaci贸n Mobile */}\r\n        <div className=\"flex flex-col gap-3 px-4 py-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"relative z-20 text-sm px-2 py-1 border border-border rounded bg-background text-foreground min-w-[84px] pr-6 pointer-events-auto\"\r\n              style={{ appearance: 'auto' }}\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {totalItems === 0 ? '0 de 0' : `${startIndex + 1}${endIndex} de ${totalItems}`}\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n              <span className=\"px-2 text-sm text-foreground\">{currentPage}/{totalPages}</span>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectTable;\r\n","// components/ui/Select.jsx - Shadcn style Select\r\nimport React, { useState } from \"react\";\r\nimport { ChevronDown, Check, Search, X } from \"lucide-react\";\r\nimport { cn } from \"../../utils/cn\";\r\nimport Button from \"./Button\";\r\nimport Input from \"./Input\";\r\n\r\nconst Select = React.forwardRef(({\r\n    className,\r\n    options = [],\r\n    value,\r\n    defaultValue,\r\n    placeholder = \"Seleccionar una opci贸n\",\r\n    multiple = false,\r\n    disabled = false,\r\n    required = false,\r\n    label,\r\n    description,\r\n    error,\r\n    searchable = false,\r\n    clearable = false,\r\n    loading = false,\r\n    id,\r\n    name,\r\n    onChange,\r\n    onOpenChange,\r\n    ...props\r\n}, ref) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    // Generate unique ID if not provided\r\n    const selectId = id || `select-${Math.random()?.toString(36)?.substr(2, 9)}`;\r\n\r\n    // Filter options based on search\r\n    const filteredOptions = searchable && searchTerm\r\n        ? options?.filter(option =>\r\n            option?.label?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||\r\n            (option?.value && option?.value?.toString()?.toLowerCase()?.includes(searchTerm?.toLowerCase()))\r\n        )\r\n        : options;\r\n\r\n    // Get selected option(s) for display\r\n    const getSelectedDisplay = () => {\r\n        if (!value) return placeholder;\r\n\r\n        if (multiple) {\r\n            const selectedOptions = options?.filter(opt => value?.includes(opt?.value));\r\n            if (selectedOptions?.length === 0) return placeholder;\r\n            if (selectedOptions?.length === 1) return selectedOptions?.[0]?.label;\r\n            return `${selectedOptions?.length} items selected`;\r\n        }\r\n\r\n        const selectedOption = options?.find(opt => opt?.value === value);\r\n        return selectedOption ? selectedOption?.label : placeholder;\r\n    };\r\n\r\n    const handleToggle = () => {\r\n        if (!disabled) {\r\n            const newIsOpen = !isOpen;\r\n            setIsOpen(newIsOpen);\r\n            onOpenChange?.(newIsOpen);\r\n            if (!newIsOpen) {\r\n                setSearchTerm(\"\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleOptionSelect = (option) => {\r\n        if (multiple) {\r\n            const newValue = value || [];\r\n            const updatedValue = newValue?.includes(option?.value)\r\n                ? newValue?.filter(v => v !== option?.value)\r\n                : [...newValue, option?.value];\r\n            onChange?.(updatedValue);\r\n        } else {\r\n            onChange?.(option?.value);\r\n            setIsOpen(false);\r\n            onOpenChange?.(false);\r\n        }\r\n    };\r\n\r\n    const handleClear = (e) => {\r\n        e?.stopPropagation();\r\n        onChange?.(multiple ? [] : '');\r\n    };\r\n\r\n    const handleSearchChange = (e) => {\r\n        setSearchTerm(e?.target?.value);\r\n    };\r\n\r\n    const isSelected = (optionValue) => {\r\n        if (multiple) {\r\n            return value?.includes(optionValue) || false;\r\n        }\r\n        return value === optionValue;\r\n    };\r\n\r\n    const hasValue = multiple ? value?.length > 0 : value !== undefined && value !== '';\r\n\r\n    return (\r\n        <div className={cn(\"relative\", className)}>\r\n            {label && (\r\n                <label\r\n                    htmlFor={selectId}\r\n                    className={cn(\r\n                        \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2 block\",\r\n                        error ? \"text-destructive\" : \"text-foreground\"\r\n                    )}\r\n                >\r\n                    {label}\r\n                    {required && <span className=\"text-destructive ml-1\">*</span>}\r\n                </label>\r\n            )}\r\n            <div className=\"relative\">\r\n                <button\r\n                    ref={ref}\r\n                    id={selectId}\r\n                    type=\"button\"\r\n                    className={cn(\r\n                        \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-white text-black px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n                        error && \"border-destructive focus:ring-destructive\",\r\n                        !hasValue && \"text-muted-foreground\"\r\n                    )}\r\n                    onClick={handleToggle}\r\n                    disabled={disabled}\r\n                    aria-expanded={isOpen}\r\n                    aria-haspopup=\"listbox\"\r\n                    {...Object.fromEntries(Object.entries(props).filter(([k]) => k !== 'loading' && k !== 'isLoading'))}\r\n                >\r\n                    <span className=\"truncate\">{getSelectedDisplay()}</span>\r\n\r\n                    <div className=\"flex items-center gap-1\">\r\n                        {loading && (\r\n                            <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\">\r\n                                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" />\r\n                                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n                            </svg>\r\n                        )}\r\n\r\n                        {clearable && hasValue && !loading && (\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"icon\"\r\n                                className=\"h-4 w-4\"\r\n                                onClick={handleClear}\r\n                            >\r\n                                <X className=\"h-3 w-3\" />\r\n                            </Button>\r\n                        )}\r\n\r\n                        <ChevronDown className={cn(\"h-4 w-4 transition-transform\", isOpen && \"rotate-180\")} />\r\n                    </div>\r\n                </button>\r\n\r\n                {/* Hidden native select for form submission */}\r\n                <select\r\n                    name={name}\r\n                    value={value || ''}\r\n                    onChange={() => { }} // Controlled by our custom logic\r\n                    className=\"sr-only\"\r\n                    tabIndex={-1}\r\n                    multiple={multiple}\r\n                    required={required}\r\n                >\r\n                    <option value=\"\">Select...</option>\r\n                    {options?.map((option, idx) => (\r\n                        <option key={option?.value ?? idx} value={option?.value}>\r\n                            {option?.label}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                {/* Dropdown */}\r\n                {isOpen && (\r\n                    <div className=\"absolute z-50 w-full mt-1 bg-white text-black border border-border rounded-md shadow-md\">\r\n                        {searchable && (\r\n                            <div className=\"p-2 border-b\">\r\n                                <div className=\"relative\">\r\n                                    <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                                    <Input\r\n                                        placeholder=\"Buscar opciones...\"\r\n                                        value={searchTerm}\r\n                                        onChange={handleSearchChange}\r\n                                        className=\"pl-8\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"py-1 max-h-60 overflow-auto\">\r\n                            {filteredOptions?.length === 0 ? (\r\n                                <div className=\"px-3 py-2 text-sm text-muted-foreground\">\r\n                                    {searchTerm ? 'No se encontraron opciones' : 'No hay opciones disponibles'}\r\n                                </div>\r\n                            ) : (\r\n                                filteredOptions?.map((option, idx) => (\r\n                                    <div\r\n                                        key={option?.value ?? idx}\r\n                                        className={cn(\r\n                                            \"relative flex cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground\",\r\n                                            isSelected(option?.value) && \"bg-primary text-primary-foreground\",\r\n                                            option?.disabled && \"pointer-events-none opacity-50\"\r\n                                        )}\r\n                                        onClick={() => !option?.disabled && handleOptionSelect(option)}\r\n                                    >\r\n                                        <span className=\"flex-1\">{option?.label}</span>\r\n                                        {multiple && isSelected(option?.value) && (\r\n                                            <Check className=\"h-4 w-4\" />\r\n                                        )}\r\n                                        {option?.description && (\r\n                                            <span className=\"text-xs text-muted-foreground ml-2\">\r\n                                                {option?.description}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            {description && !error && (\r\n                <p className=\"text-sm text-muted-foreground mt-1\">\r\n                    {description}\r\n                </p>\r\n            )}\r\n            {error && (\r\n                <p className=\"text-sm text-destructive mt-1\">\r\n                    {error}\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nSelect.displayName = \"Select\";\r\n\r\nexport default Select;","import httpService from \"./httpService\";\r\n\r\nconst personService = {\r\n  async getPersons() {\r\n    try {\r\n      const response = await httpService.get(\"/empleados\");\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener empleados:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createPerson(payload) {\r\n    try {\r\n      const response = await httpService.post(\"/empleados/crear\", payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al crear empleado:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  //  NUEVA FUNCIN PARA ACTUALIZAR EMPLEADO EXISTENTE\r\n  async getPersonsByDepartment(department) {\r\n    try {\r\n      const response = await httpService.get(\r\n        `/obtenerEmpleadosPorDepartamentos?departamentos=${encodeURIComponent(department)}`\r\n      );\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener empleados por departamento:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n  async updatePersonByEmpleadoId(empleadoId, payload) {\r\n    try {\r\n      const response = await httpService.put(\r\n        `/empleados/byEmpleadoId/${empleadoId}`,\r\n        payload\r\n      );\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al actualizar empleado:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default personService;\r\n","import { useState } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport personService from \"../services/personService\";\r\n\r\nconst usePerson = () => {\r\n  const { showOperationSuccess, showHttpError } = useNotifications();\r\n  const [persons, setPersons] = useState([]);\r\n  const [departmentPersons, setDepartmentPersons] = useState([]);\r\n  const getPersonsByDepartment = async (department) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await personService.getPersonsByDepartment(department);\r\n      if (response.success && Array.isArray(response.data)) {\r\n        setDepartmentPersons(response.data);\r\n      } else {\r\n        setDepartmentPersons([]);\r\n      }\r\n    } catch (err) {\r\n      setError(err);\r\n      // No mostrar notificaci贸n, solo actualizar el estado de error\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getPersons = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await personService.getPersons();\r\n      if (response.success && Array.isArray(response.data)) {\r\n        setPersons(response.data);\r\n        console.log('Responsables/personas cargados:', response.data);\r\n      } else {\r\n        setPersons([]);\r\n        console.log('No se encontraron responsables/personas.');\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en usePerson.getPersons:\", err);\r\n      setError(err);\r\n      // No mostrar notificaci贸n, solo actualizar el estado de error\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createPerson = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await personService.createPerson(payload);\r\n      if (response.success) {\r\n        setPersons((prev) => [...prev, response.data]);\r\n        showOperationSuccess(\"Empleado guardado exitosamente\");\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en usePerson.createPerson:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  //  NUEVA FUNCIN PARA ACTUALIZAR EMPLEADO EXISTENTE\r\n  const updatePersonByEmpleadoId = async (empleadoId, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await personService.updatePersonByEmpleadoId(\r\n        empleadoId,\r\n        payload\r\n      );\r\n      if (response.success) {\r\n        setPersons((prev) =>\r\n          prev.map((p) =>\r\n            p.empleadoId === empleadoId ? { ...p, ...response.data } : p\r\n          )\r\n        );\r\n        showOperationSuccess(\"Empleado actualizado exitosamente\");\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en usePerson.updatePersonByEmpleadoId:\", err);\r\n      setError(err);\r\n      showHttpError(\"Error al actualizar empleado\");\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    persons,\r\n    departmentPersons,\r\n    loading,\r\n    error,\r\n    getPersons,\r\n    getPersonsByDepartment,\r\n    createPerson,\r\n    updatePersonByEmpleadoId,\r\n  };\r\n};\r\n\r\nexport default usePerson;\r\n","import httpService from './httpService';\r\n\r\nconst estadoService = {\r\n  getEstados: async () => {\r\n    // GET estadosMexico/codigos\r\n    const response = await httpService.get('/estadosMexico/codigos');\r\n    return response.data;\r\n  },\r\n  getMunicipios: async (estado) => {\r\n    // GET estadosMexico/{estado}\r\n    const response = await httpService.get(`/estadosMexico/${estado}`);\r\n    return response.data;\r\n  },\r\n};\r\n\r\nexport default estadoService;\r\n","import { useState, useEffect } from 'react';\r\nimport estadoService from '../services/estadoService';\r\n\r\nexport function useEstados() {\r\n  const [estados, setEstados] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    estadoService.getEstados()\r\n      .then(setEstados)\r\n      .catch(setError)\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  return { estados, loading, error };\r\n}\r\n\r\nexport function useMunicipios(estado) {\r\n  const [municipios, setMunicipios] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!estado) return;\r\n    setLoading(true);\r\n    estadoService.getMunicipios(estado)\r\n      .then(setMunicipios)\r\n      .catch(setError)\r\n      .finally(() => setLoading(false));\r\n  }, [estado]);\r\n\r\n  return { municipios, loading, error };\r\n}\r\n","import React, { useEffect, useMemo, useRef, useState, useCallback } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport proyectoService from 'services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport usePerson from 'hooks/usePerson';\r\nimport { useErrorHandler, useNotifications } from 'context/NotificationContext';\r\nimport { useEstados, useMunicipios } from '../../../hooks/useEstado';\r\n\r\nconst projectTypes = [\r\n  { value: 'Instalaci贸n', label: 'Instalaci贸n' },\r\n  { value: 'Mantenimiento Preventivo', label: 'Mantenimiento Preventivo' },\r\n  { value: 'Mantenimiento Correctivo', label: 'Mantenimiento Correctivo' },\r\n  { value: 'Inspecci贸n', label: 'Inspecci贸n' },\r\n];\r\n\r\nconst departmentOptions = [\r\n  { value: 'Ingenier铆a', label: 'Ingenier铆a' },\r\n  { value: 'Mantenimiento', label: 'Mantenimiento' },\r\n  { value: 'Operaciones', label: 'Operaciones' },\r\n];\r\n\r\nconst priorityOptions = [\r\n  { value: 'low', label: 'Baja' },\r\n  { value: 'medium', label: 'Media' },\r\n  { value: 'high', label: 'Alta' },\r\n  { value: 'urgent', label: 'Urgente' },\r\n];\r\n\r\nconst projectStatusOptions = [\r\n  { value: 'Planificaci贸n', label: 'Planificaci贸n' },\r\n  { value: 'En Progreso', label: 'En Progreso' },\r\n  { value: 'En Pausa', label: 'En Pausa' },\r\n  { value: 'En Revisi贸n', label: 'En Revisi贸n' },\r\n  { value: 'Completado', label: 'Completado' },\r\n  { value: 'Cancelado', label: 'Cancelado' },\r\n];\r\n\r\nconst personnelOptionsFallback = [\r\n  { value: 'Andr茅s Torres  T茅cnico HVAC', label: 'Andr茅s Torres  T茅cnico HVAC' },\r\n  { value: 'Laura G贸mez  Supervisora de Mantenimiento', label: 'Laura G贸mez  Supervisora de Mantenimiento' },\r\n  { value: 'Pedro Hern谩ndez  Ingeniero de Campo', label: 'Pedro Hern谩ndez  Ingeniero de Campo' },\r\n];\r\n\r\nconst mapPriorityToEs = (v) => {\r\n  const m = { low: 'Baja', medium: 'Media', high: 'Alta', urgent: 'Urgente' };\r\n  return m[(v || '').toString().toLowerCase()] || v || '';\r\n};\r\n\r\nconst formatWithCommas = (v, decimals = 2) => {\r\n  if (v === '' || v == null) return '';\r\n  const num = Number(v);\r\n  if (!Number.isFinite(num)) return '';\r\n  const options = Number.isInteger(num)\r\n    ? { minimumFractionDigits: 0, maximumFractionDigits: 0 }\r\n    : { minimumFractionDigits: decimals, maximumFractionDigits: decimals };\r\n  return num.toLocaleString('es-MX', options);\r\n};\r\n\r\nconst unformatNumber = (raw) => {\r\n  if (raw === '' || raw == null) return 0;\r\n  const clean = String(raw).replace(/[^\\d.-]/g, '');\r\n  const n = parseFloat(clean);\r\n  return Number.isFinite(n) ? n : 0;\r\n};\r\n\r\nconst rateSafe = (rate) => (Number.isFinite(Number(rate)) ? Number(rate) : 0);\r\n\r\nconst CreateProjectModal = ({ isOpen, onClose, onSubmit }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const { persons, getPersons } = usePerson();\r\n  const { handleError, handleSuccess } = useErrorHandler();\r\n  const { showWarning, showError } = useNotifications();\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    code: '',\r\n    type: '',\r\n    client: '',\r\n    department: '',\r\n    priority: '',\r\n    status: '',\r\n    budgetBreakdown: {\r\n      labor: 0,\r\n      parts: 0,\r\n      equipment: 0,\r\n      materials: 0,\r\n      transportation: 0,\r\n      other: 0,\r\n    },\r\n    estado: '',\r\n    municipio: '',\r\n    direccion: '',\r\n    startDate: '',\r\n    endDate: '',\r\n    assignedPersonnel: [],\r\n    description: '',\r\n  });\r\n\r\n  const [isEquipmentInUSD, setIsEquipmentInUSD] = useState(false);\r\n  const [exchangeRate, setExchangeRate] = useState(18);\r\n  const [uiEquipmentUSD, setUiEquipmentUSD] = useState('');\r\n  const [loadingFx, setLoadingFx] = useState(false);\r\n  const [fxError, setFxError] = useState(null);\r\n\r\n  const [clientOptions, setClientOptions] = useState([]);\r\n  const [loadingClients, setLoadingClients] = useState(false);\r\n\r\n  const { estados, loading: loadingEstados, error: errorEstados } = useEstados();\r\n  const { municipios, loading: loadingMunicipios, error: errorMunicipios } = useMunicipios(formData.estado);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        setLoadingClients(true);\r\n        const resp = await clientService.getClients();\r\n        const list = Array.isArray(resp?.data) ? resp.data : (Array.isArray(resp) ? resp : []);\r\n        const opts = list.map((c) => ({ value: c.id, label: c.empresa || c.contacto || '' }));\r\n        if (mounted) setClientOptions(opts);\r\n      } catch (e) {\r\n        handleError(e, 'Error cargando clientes');\r\n      } finally {\r\n        if (mounted) setLoadingClients(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [isOpen, handleError]);\r\n\r\n  const fetchedPersonsRef = useRef(false);\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    if (fetchedPersonsRef.current) return;\r\n    fetchedPersonsRef.current = true;\r\n\r\n    const controller = new AbortController();\r\n    (async () => {\r\n      try {\r\n        await getPersons({ signal: controller.signal });\r\n      } catch (e) {\r\n        if (e?.name !== 'AbortError') handleError(e, 'Error cargando empleados');\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      controller.abort();\r\n    };\r\n  }, [isOpen, handleError, getPersons]);\r\n\r\n  const personnelOptionsFinal = useMemo(() => {\r\n    if (!Array.isArray(persons) || persons.length === 0) return personnelOptionsFallback;\r\n    const built = persons\r\n      .map((p) => {\r\n        const nombre =\r\n          p?.nombreCompleto ||\r\n          [p?.nombre, p?.apellidoPaterno, p?.apellidoMaterno].filter(Boolean).join(' ') ||\r\n          p?.nombre ||\r\n          p?.name ||\r\n          '';\r\n        const puesto = p?.puesto || p?.rol || p?.cargo;\r\n        const etiqueta = puesto ? `${nombre}  ${puesto}` : nombre;\r\n        return etiqueta ? { value: etiqueta, label: etiqueta } : null;\r\n      })\r\n      .filter(Boolean);\r\n\r\n    const seen = new Set();\r\n    const dedup = [];\r\n    for (const opt of built) {\r\n      if (seen.has(opt.value)) continue;\r\n      seen.add(opt.value);\r\n      dedup.push(opt);\r\n    }\r\n    return dedup.length ? dedup : personnelOptionsFallback;\r\n  }, [persons]);\r\n\r\n  const handleInputChange = (key, value) => {\r\n    setFormData((s) => ({ ...s, [key]: value }));\r\n    if (errors[key]) setErrors((e) => ({ ...e, [key]: undefined }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isEquipmentInUSD) return;\r\n    const mxn = Number(formData?.budgetBreakdown?.equipment || 0);\r\n    const rate = rateSafe(exchangeRate);\r\n    const usd = rate ? mxn / rate : 0;\r\n    setUiEquipmentUSD(usd ? formatWithCommas(usd, 2) : '0.00');\r\n  }, [isEquipmentInUSD, exchangeRate, formData?.budgetBreakdown?.equipment]);\r\n\r\n  const handleBudgetChange = (key, rawValue) => {\r\n    const cleanedNumber = unformatNumber(rawValue);\r\n    if (key === 'equipment' && isEquipmentInUSD) return;\r\n    setFormData((s) => ({\r\n      ...s,\r\n      budgetBreakdown: { ...s.budgetBreakdown, [key]: cleanedNumber },\r\n    }));\r\n  };\r\n\r\n  const fetchUsdMxnRate = useCallback(async () => {\r\n    try {\r\n      setFxError(null);\r\n      setLoadingFx(true);\r\n      const resp = await proyectoService.getCurrencyRates({ base: 'USD', currencies: ['MXN'] });\r\n      const mxnInfo = resp?.data?.MXN || resp?.MXN;\r\n      const rate = Number(mxnInfo?.value ?? mxnInfo ?? 0);\r\n      if (rate > 0) {\r\n        setExchangeRate(rate);\r\n        return rate;\r\n      } else {\r\n        const msg = 'No lleg贸 una tasa v谩lida.';\r\n        setFxError(msg);\r\n        showError(msg);\r\n        return null;\r\n      }\r\n    } catch (e) {\r\n      const msg = e?.message || 'Error llamando currencyapi';\r\n      setFxError(msg);\r\n      handleError(e, 'Tipo de cambio');\r\n      return null;\r\n    } finally {\r\n      setLoadingFx(false);\r\n    }\r\n  }, [handleError, showError]);\r\n\r\n  const toggleEquipmentUSD = (checked) => {\r\n    setIsEquipmentInUSD(checked);\r\n    if (!checked) setUiEquipmentUSD('');\r\n  };\r\n\r\n  const validate = () => {\r\n    const e = {};\r\n    if (!formData.name) e.name = 'Requerido';\r\n    if (!formData.type) e.type = 'Requerido';\r\n    if (!formData.client) e.client = 'Seleccione un cliente';\r\n    if (!formData.department) e.department = 'Requerido';\r\n    if (!formData.priority) e.priority = 'Requerido';\r\n    if (!formData.status) e.status = 'Requerido';\r\n\r\n    if (!formData.estado) e.estado = 'Requerido';\r\n    if (!formData.municipio) e.municipio = 'Requerido';\r\n    if (!formData.direccion) e.direccion = 'Requerido';\r\n\r\n    if (!formData.startDate) e.startDate = 'Requerido';\r\n    if (!formData.endDate) e.endDate = 'Requerido';\r\n    if (\r\n      formData.startDate &&\r\n      formData.endDate &&\r\n      new Date(formData.endDate) < new Date(formData.startDate)\r\n    ) {\r\n      e.endDate = 'La fecha de fin no puede ser anterior al inicio';\r\n    }\r\n    if (isEquipmentInUSD && !(exchangeRate > 0)) {\r\n      e.exchangeRate = 'Indique un tipo de cambio v谩lido';\r\n    }\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  };\r\n\r\n  const buildPayloadForBackend = () => {\r\n    const b = formData.budgetBreakdown || {};\r\n    const equipoDolares = isEquipmentInUSD ? unformatNumber(uiEquipmentUSD) : undefined;\r\n\r\n    return {\r\n      codigo: formData.code || '',\r\n      nombre: formData.name || '',\r\n      tipoProyecto: formData.type || '',\r\n      cliente: { id: formData.client || '', nombre: formData.clientName || '' },\r\n      departamento: formData.department || '',\r\n      prioridad: mapPriorityToEs(formData.priority),\r\n      ubicacion: {\r\n        estado: formData.estado || '',\r\n        municipio: formData.municipio || '',\r\n        direccion: formData.direccion || '',\r\n      },\r\n      descripcion: formData.description || '',\r\n      personalAsignado: Array.isArray(formData.assignedPersonnel)\r\n        ? formData.assignedPersonnel\r\n        : [],\r\n      cronograma: {\r\n        fechaInicio: formData.startDate || '',\r\n        fechaFin: formData.endDate || '',\r\n      },\r\n      presupuesto: {\r\n        manoObra: Number(b.labor) || 0,\r\n        piezas: Number(b.parts) || 0,\r\n        equipos: Number(b.equipment) || 0,\r\n        ...(equipoDolares !== undefined ? { equipoDolares } : {}),\r\n        materiales: Number(b.materials) || 0,\r\n        transporte: Number(b.transportation) || 0,\r\n        otros: Number(b.other) || 0,\r\n        _metaEquipos: { capturadoEn: isEquipmentInUSD ? 'USD' : 'MXN' },\r\n      },\r\n      estado: formData.status,\r\n    };\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validate()) {\r\n      showWarning('Revisa los campos requeridos del formulario.');\r\n      return;\r\n    }\r\n    setIsSubmitting(true);\r\n    try {\r\n      const payload = buildPayloadForBackend();\r\n      await proyectoService.createProyecto(payload);\r\n      handleSuccess('create', 'Proyecto');\r\n      onSubmit && onSubmit(payload);\r\n      onClose && onClose();\r\n    } catch (err) {\r\n      console.error('Error creando proyecto:', err);\r\n      handleError(err, 'Error creando proyecto');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const b = formData.budgetBreakdown || {};\r\n  const totalMXN =\r\n    (Number(b?.labor) || 0) +\r\n    (Number(b?.parts) || 0) +\r\n    (Number(b?.equipment) || 0) +\r\n    (Number(b?.materials) || 0) +\r\n    (Number(b?.transportation) || 0) +\r\n    (Number(b?.other) || 0);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card border border-border rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Crear Nuevo Proyecto</h2>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Complete la informaci贸n del proyecto\r\n            </p>\r\n          </div>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci贸n b谩sica */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Informaci贸n B谩sica\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Nombre del Proyecto\"\r\n              type=\"text\"\r\n              placeholder=\"Ej: Instalaci贸n HVAC Edificio Central\"\r\n              value={formData?.name}\r\n              onChange={(e) => handleInputChange('name', e?.target?.value)}\r\n              error={errors?.name}\r\n              required\r\n            />\r\n\r\n            <Input\r\n              label=\"C贸digo del Proyecto\"\r\n              type=\"text\"\r\n              placeholder=\"Ej: PROJ-2025-001\"\r\n              value={formData?.code}\r\n              onChange={(e) => handleInputChange('code', e?.target?.value)}\r\n              error={errors?.code}\r\n              description=\"Se generar谩 autom谩ticamente si se deja vac铆o\"\r\n            />\r\n\r\n            <Select\r\n              label=\"Tipo de Proyecto\"\r\n              options={projectTypes}\r\n              value={formData?.type}\r\n              onChange={(value) => handleInputChange('type', value)}\r\n              error={errors?.type}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Cliente\"\r\n              options={clientOptions}\r\n              value={formData?.client}\r\n              onChange={(value) => handleInputChange('client', value)}\r\n              error={errors?.client}\r\n              searchable\r\n              required\r\n              loading={loadingClients}\r\n            />\r\n\r\n            <Select\r\n              label=\"Departamento Responsable\"\r\n              options={departmentOptions}\r\n              value={formData?.department}\r\n              onChange={(value) => handleInputChange('department', value)}\r\n              error={errors?.department}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={formData?.priority}\r\n              onChange={(value) => handleInputChange('priority', value)}\r\n              error={errors?.priority}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Estado del Proyecto\"\r\n              options={projectStatusOptions}\r\n              value={formData?.status}\r\n              onChange={(value) => handleInputChange('status', value)}\r\n              error={errors?.status}\r\n              required\r\n            />\r\n\r\n            {/* Ubicaci贸n */}\r\n            <div className=\"md:col-span-2 mt-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n                Ubicaci贸n del Proyecto\r\n              </h3>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Seleccione estado y municipio, luego escriba la direcci贸n completa del sitio.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 items-center\">\r\n              <div className=\"flex flex-col justify-end h-full\">\r\n                <Select\r\n                  label={\r\n                    <>\r\n                      Estado <span className=\"text-destructive\">*</span>\r\n                    </>\r\n                  }\r\n                  value={formData.estado}\r\n                  onChange={(value) => {\r\n                    handleInputChange('estado', value);\r\n                    handleInputChange('municipio', '');\r\n                  }}\r\n                  options={\r\n                    estados\r\n                      ? [\r\n                          { value: '', label: 'Selecciona un estado' },\r\n                          ...estados.map((e) => ({\r\n                            value: e.code,\r\n                            label: e.name,\r\n                          })),\r\n                        ]\r\n                      : []\r\n                  }\r\n                  loading={loadingEstados}\r\n                  error={errors?.estado}\r\n                  required\r\n                  disabled={loadingEstados || !!errorEstados}\r\n                  placeholder={\r\n                    loadingEstados ? 'Cargando estados...' : 'Selecciona un estado'\r\n                  }\r\n                  searchable\r\n                  className=\"h-12 md:h-14 w-full text-base\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex flex-col justify-end h-full\">\r\n                <Select\r\n                  label={\r\n                    <>\r\n                      Municipio <span className=\"text-destructive\">*</span>\r\n                    </>\r\n                  }\r\n                  value={formData.municipio}\r\n                  onChange={(value) => handleInputChange('municipio', value)}\r\n                  options={\r\n                    formData.estado === ''\r\n                      ? [{ value: '', label: 'Selecciona un estado primero' }]\r\n                      : loadingMunicipios\r\n                      ? [{ value: '', label: 'Cargando municipios...' }]\r\n                      : errorMunicipios\r\n                      ? [{ value: '', label: 'Error al cargar municipios' }]\r\n                      : [\r\n                          { value: '', label: 'Selecciona un municipio' },\r\n                          ...(municipios\r\n                            ? Object.values(municipios.municipios || {}).map((m) => ({\r\n                                value: m,\r\n                                label: m,\r\n                              }))\r\n                            : []),\r\n                        ]\r\n                  }\r\n                  loading={loadingMunicipios}\r\n                  error={errors?.municipio}\r\n                  required\r\n                  disabled={\r\n                    formData.estado === '' ||\r\n                    loadingMunicipios ||\r\n                    !!errorMunicipios\r\n                  }\r\n                  placeholder={\r\n                    formData.estado === ''\r\n                      ? 'Selecciona un estado primero'\r\n                      : loadingMunicipios\r\n                      ? 'Cargando municipios...'\r\n                      : 'Selecciona un municipio'\r\n                  }\r\n                  searchable\r\n                  className=\"h-12 md:h-14 w-full text-base\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Direcci贸n\"\r\n                required\r\n                value={formData?.direccion}\r\n                onChange={(e) => handleInputChange('direccion', e?.target?.value)}\r\n                error={errors?.direccion}\r\n                placeholder=\"Direcci贸n completa\"\r\n                className=\"h-12 md:h-14 w-full text-base\"\r\n              />\r\n            </div>\r\n\r\n            {/* Presupuesto */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Desglose de Presupuesto\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Mano de Obra (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.labor)}\r\n              onChange={(e) => handleBudgetChange('labor', e?.target?.value)}\r\n            />\r\n\r\n            <Input\r\n              label=\"Piezas (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.parts)}\r\n              onChange={(e) => handleBudgetChange('parts', e?.target?.value)}\r\n            />\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                  {isEquipmentInUSD\r\n                    ? 'Equipos (USD se convierte a MXN)'\r\n                    : 'Equipos (MXN)'}\r\n                </label>\r\n                <label className=\"inline-flex items-center gap-2 text-sm text-foreground cursor-pointer select-none\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={isEquipmentInUSD}\r\n                    onChange={(e) => toggleEquipmentUSD(e.target.checked)}\r\n                    className=\"h-4 w-4 accent-primary cursor-pointer\"\r\n                  />\r\n                  Precio en d贸lares\r\n                </label>\r\n              </div>\r\n\r\n              <input\r\n                type=\"text\"\r\n                inputMode=\"decimal\"\r\n                placeholder={isEquipmentInUSD ? '0.00 USD' : '0.00 MXN'}\r\n                value={\r\n                  isEquipmentInUSD\r\n                    ? uiEquipmentUSD\r\n                    : formatWithCommas(b?.equipment)\r\n                }\r\n                onChange={(e) => handleBudgetChange('equipment', e?.target?.value)}\r\n                readOnly={isEquipmentInUSD}\r\n                className={`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${\r\n                  isEquipmentInUSD ? 'bg-muted cursor-not-allowed' : ''\r\n                }`}\r\n              />\r\n\r\n              {isEquipmentInUSD && (\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <div className=\"flex-1 min-w-[220px]\">\r\n                    <Input\r\n                      label=\"Tipo de cambio (MXN / USD)\"\r\n                      type=\"text\"\r\n                      inputMode=\"decimal\"\r\n                      value={formatWithCommas(exchangeRate, 4)}\r\n                      onChange={() => {}}\r\n                      readOnly\r\n                      disabled\r\n                    />\r\n                  </div>\r\n\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    onClick={fetchUsdMxnRate}\r\n                    loading={loadingFx}\r\n                    iconName=\"RefreshCcw\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    {loadingFx ? 'Actualizando' : 'Actualizar tipo de cambio'}\r\n                  </Button>\r\n\r\n                  <div className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                    Guardado en MXN:{' '}\r\n                    <span className=\"font-semibold\">\r\n                      ${formatWithCommas(b?.equipment, 2)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {fxError && (\r\n                    <div className=\"text-xs text-destructive\">{fxError}</div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Materiales (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.materials)}\r\n              onChange={(e) => handleBudgetChange('materials', e?.target?.value)}\r\n            />\r\n\r\n            <Input\r\n              label=\"Transporte (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.transportation)}\r\n              onChange={(e) =>\r\n                handleBudgetChange('transportation', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Input\r\n              label=\"Otros Gastos (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.other)}\r\n              onChange={(e) => handleBudgetChange('other', e?.target?.value)}\r\n            />\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"bg-muted p-4 rounded-lg\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm font-medium text-foreground\">\r\n                    Total del Presupuesto (MXN):\r\n                  </span>\r\n                  <span className=\"text-lg font-semibold text-primary\">\r\n                    ${formatWithCommas(totalMXN, 2)} MXN\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cronograma */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Cronograma\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Fecha de Inicio\"\r\n              type=\"date\"\r\n              value={formData?.startDate}\r\n              onChange={(e) => handleInputChange('startDate', e?.target?.value)}\r\n              error={errors?.startDate}\r\n              required\r\n            />\r\n\r\n            <Input\r\n              label=\"Fecha de Finalizaci贸n\"\r\n              type=\"date\"\r\n              value={formData?.endDate}\r\n              onChange={(e) => handleInputChange('endDate', e?.target?.value)}\r\n              error={errors?.endDate}\r\n              required\r\n            />\r\n\r\n            {/* Asignaci贸n */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Asignaci贸n de Personal\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Select\r\n                label=\"Personal Asignado\"\r\n                options={personnelOptionsFinal}\r\n                value={formData?.assignedPersonnel}\r\n                onChange={(value) =>\r\n                  handleInputChange('assignedPersonnel', value)\r\n                }\r\n                multiple\r\n                searchable\r\n                description=\"Seleccione el personal que trabajar谩 en este proyecto\"\r\n              />\r\n            </div>\r\n\r\n            {/* Descripci贸n */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                Descripci贸n del Proyecto\r\n              </label>\r\n              <textarea\r\n                rows={4}\r\n                placeholder=\"Describa los objetivos, alcance y detalles importantes del proyecto...\"\r\n                value={formData?.description}\r\n                onChange={(e) =>\r\n                  handleInputChange('description', e?.target?.value)\r\n                }\r\n                className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-border\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              loading={isSubmitting}\r\n              iconName=\"Plus\"\r\n              iconPosition=\"left\"\r\n            >\r\n              {isSubmitting ? 'Creando...' : 'Crear Proyecto'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateProjectModal;\r\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport proyectoService from '../../../services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport CreateProjectModal from './CreateProjectModal';\r\n\r\nconst fold = (v) =>\r\n  String(v ?? '')\r\n    .normalize('NFD')\r\n    .replace(/\\p{Diacritic}/gu, '')\r\n    .trim()\r\n    .toLowerCase();\r\n\r\nconst KW = {\r\n  planning: (s) =>\r\n    s.includes('planific') ||\r\n    s.includes('planeac') ||\r\n    s.includes('planning') ||\r\n    s.includes('backlog') ||\r\n    s.includes('kickoff') ||\r\n    s.includes('inicio') ||\r\n    s.includes('prepar') ||\r\n    s === 'activo' ||\r\n    s.includes('active') ||\r\n    s.includes('pendiente'),\r\n  progress: (s) =>\r\n    s.includes('progreso') ||\r\n    s.includes('proceso') ||\r\n    s.includes('ejec') ||\r\n    s.includes('en curso') ||\r\n    s.includes('trabaj') ||\r\n    s.includes('running') ||\r\n    s.includes('work in progress') ||\r\n    s.includes('in-progress') ||\r\n    s.includes('in progress'),\r\n  review: (s) =>\r\n    s.includes('revi') ||\r\n    s.includes('review') ||\r\n    s.includes('qa') ||\r\n    s.includes('calidad') ||\r\n    s.includes('validac') ||\r\n    s.includes('verific') ||\r\n    s.includes('aprobac') ||\r\n    s.includes('auditor'),\r\n  exclude: (s) =>\r\n    s.includes('pausa') ||\r\n    s.includes('pausado') ||\r\n    s.includes('on-hold') ||\r\n    s.includes('on hold') ||\r\n    s.includes('cancel') ||\r\n    s.includes('complet') ||\r\n    s.includes('terminado') ||\r\n    s.includes('fin'),\r\n};\r\n\r\nconst toCanon = (raw) => {\r\n  const s = fold(raw);\r\n  if (!s || KW.exclude(s)) return null;\r\n  if (KW.review(s)) return 'En Revisi贸n';\r\n  if (KW.progress(s)) return 'En Progreso';\r\n  if (KW.planning(s)) return 'Planificaci贸n';\r\n  return null;\r\n};\r\n\r\nconst getCanonFromObject = (obj) => {\r\n  const candidates = [\r\n    obj?.estado,\r\n    obj?.estatus,\r\n    obj?.status,\r\n    obj?.statusLabel,\r\n    obj?.fase,\r\n    obj?.etapa,\r\n    obj?.stage,\r\n    obj?.state,\r\n  ].filter(Boolean);\r\n  for (const c of candidates) {\r\n    const canon = toCanon(c);\r\n    if (canon) return canon;\r\n  }\r\n  return null;\r\n};\r\n\r\n// ======== fechas ========\r\n// 猬锔 Aqu铆 el fix: null/undefined/'' devuelven null, no 1970 ni hoy\r\nconst safeDate = (v) => {\r\n  if (!v) return null;\r\n  const d = new Date(v);\r\n  return isNaN(d.getTime()) ? null : d;\r\n};\r\n\r\nconst fmtDateHuman = (v) => {\r\n  const d = safeDate(v);\r\n  return d\r\n    ? d.toLocaleDateString('es-MX', {\r\n        day: '2-digit',\r\n        month: 'short',\r\n        year: 'numeric',\r\n      })\r\n    : '';\r\n};\r\n\r\nconst fmtDateIso = (v) => {\r\n  const d = safeDate(v);\r\n  return d ? d.toISOString().slice(0, 10) : '';\r\n};\r\n\r\n// rangos\r\nconst startOfWeekMonday = (d) => {\r\n  const out = new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n  const day = out.getDay();\r\n  const diffToMon = (day + 6) % 7;\r\n  out.setDate(out.getDate() - diffToMon);\r\n  out.setHours(0, 0, 0, 0);\r\n  return out;\r\n};\r\nconst startOfMonth = (d) => {\r\n  const x = new Date(d.getFullYear(), d.getMonth(), 1);\r\n  x.setHours(0, 0, 0, 0);\r\n  return x;\r\n};\r\nconst startOfNextMonth = (d) => new Date(d.getFullYear(), d.getMonth() + 1, 1);\r\nconst startOfYear = (y) => {\r\n  const x = new Date(y, 0, 1);\r\n  x.setHours(0, 0, 0, 0);\r\n  return x;\r\n};\r\nconst startOfNextYear = (y) => new Date(y + 1, 0, 1);\r\nconst startOfQuarter = (d) => {\r\n  const q = Math.floor(d.getMonth() / 3);\r\n  const x = new Date(d.getFullYear(), q * 3, 1);\r\n  x.setHours(0, 0, 0, 0);\r\n  return x;\r\n};\r\nconst startOfNextQuarter = (d) => {\r\n  const q = Math.floor(d.getMonth() / 3);\r\n  return new Date(d.getFullYear(), (q + 1) * 3, 1);\r\n};\r\nconst inRange = (date, ini, fin) =>\r\n  date && date.getTime() >= ini.getTime() && date.getTime() < fin.getTime();\r\n\r\nconst getId = (p) => p?.id ?? p?._id ?? p?.Id ?? p?.ID ?? null;\r\nconst getCode = (p) => {\r\n  const c = p?.codigo ?? p?.code ?? p?.Codigo ?? p?.Code;\r\n  if (typeof c === 'string' || typeof c === 'number') return String(c);\r\n  return String(c?.id ?? c?.value ?? '');\r\n};\r\nconst getName = (p) =>\r\n  p?.nombre ?? p?.name ?? p?.nombreProyecto ?? 'Proyecto sin nombre';\r\n\r\nconst buildClientsMapFromCatalog = (catalog) => {\r\n  const arr = Array.isArray(catalog) ? catalog : [];\r\n  const map = new Map();\r\n  for (const it of arr) {\r\n    const id =\r\n      it?.id ??\r\n      it?.Id ??\r\n      it?._id ??\r\n      it?.codigo ??\r\n      it?.code ??\r\n      it?.clave ??\r\n      it?.slug ??\r\n      it?.uuid;\r\n    const name =\r\n      it?.nombre ??\r\n      it?.name ??\r\n      it?.razonSocial ??\r\n      it?.razon_social ??\r\n      it?.displayName ??\r\n      it?.clientName ??\r\n      it?.empresa ??\r\n      it?.id;\r\n    const email =\r\n      it?.email ??\r\n      it?.correo ??\r\n      it?.correoElectronico ??\r\n      it?.mail ??\r\n      it?.contacto?.email ??\r\n      null;\r\n    const contact =\r\n      it?.contacto?.nombre ??\r\n      it?.contacto?.name ??\r\n      it?.telefono ??\r\n      it?.phone ??\r\n      null;\r\n    if (id)\r\n      map.set(String(id), {\r\n        name: String(name ?? id),\r\n        email: email ? String(email) : null,\r\n        contact: contact ? String(contact) : null,\r\n      });\r\n  }\r\n  return map;\r\n};\r\n\r\n/* Cliente bonito (nombre + contacto/email) */\r\nconst getClientDetails = (p, clientsMap) => {\r\n  const byName =\r\n    p?.clientName ??\r\n    p?.client_name ??\r\n    p?.clienteNombre ??\r\n    p?.cliente_nombre ??\r\n    p?.cliente?.nombre ??\r\n    p?.cliente?.name ??\r\n    p?.cliente?.empresa ??\r\n    p?.cliente?.razonSocial ??\r\n    p?.cliente?.razon_social ??\r\n    p?.client?.nombre ??\r\n    p?.client?.name ??\r\n    p?.client?.empresa ??\r\n    p?.client?.razonSocial ??\r\n    p?.client?.razon_social;\r\n\r\n  const byEmail =\r\n    p?.cliente?.email ??\r\n    p?.cliente?.correo ??\r\n    p?.client?.email ??\r\n    p?.client?.correo ??\r\n    null;\r\n\r\n  const byContact =\r\n    p?.cliente?.contacto?.nombre ??\r\n    p?.client?.contacto?.nombre ??\r\n    p?.cliente?.telefono ??\r\n    p?.client?.telefono ??\r\n    null;\r\n\r\n  if (byName) {\r\n    return { name: String(byName), aux: byEmail || byContact || null };\r\n  }\r\n\r\n  const cli = p?.cliente ?? p?.client;\r\n  let byId =\r\n    typeof cli === 'object'\r\n      ? cli?.id ??\r\n        cli?._id ??\r\n        cli?.codigo ??\r\n        cli?.code ??\r\n        cli?.clave ??\r\n        cli?.slug ??\r\n        cli?.uuid\r\n      : undefined;\r\n\r\n  if (byId == null) {\r\n    if (typeof cli === 'string' || typeof cli === 'number') byId = cli;\r\n  }\r\n\r\n  byId =\r\n    byId ??\r\n    p?.clienteId ??\r\n    p?.idCliente ??\r\n    p?.clientId ??\r\n    p?.customerId ??\r\n    null;\r\n\r\n  if (byId != null && clientsMap?.has?.(String(byId))) {\r\n    const hit = clientsMap.get(String(byId));\r\n    return {\r\n      name: hit?.name || 'Sin cliente',\r\n      aux: hit?.email || hit?.contact || null,\r\n    };\r\n  }\r\n\r\n  return { name: 'Sin cliente', aux: null };\r\n};\r\n\r\nconst getStart = (p) =>\r\n  p?.cronograma?.fechaInicio ?? p?.startDate ?? p?.inicio ?? null;\r\nconst getEnd = (p) =>\r\n  p?.cronograma?.fechaFin ?? p?.endDate ?? p?.fin ?? null;\r\nconst getProg = (p) => Number(p?.progress ?? p?.avance ?? 0);\r\nconst getCanon = (p) => p?.__estadoCanon ?? getCanonFromObject(p);\r\nconst getRoleLabel = (role) => {\r\n  if (!role) return 'Sin rol';\r\n  if (typeof role === 'string') return role;\r\n  return role?.name ?? role?.nombre ?? role?.id ?? 'Sin rol';\r\n};\r\nconst getBudgetTotal = (p) => {\r\n  const b =\r\n    p?.presupuesto?.total ??\r\n    p?.totalPresupuesto ??\r\n    p?.budgetTotal ??\r\n    (Number(p?.presupuesto?.manoObra || 0) +\r\n      Number(p?.presupuesto?.piezas || 0) +\r\n      Number(p?.presupuesto?.equipos || 0) +\r\n      Number(p?.presupuesto?.materiales || 0) +\r\n      Number(p?.presupuesto?.transporte || 0) +\r\n      Number(p?.presupuesto?.otros || 0));\r\n  return Number(b) || 0;\r\n};\r\n\r\nconst statusColor = (canon) => {\r\n  switch (canon) {\r\n    case 'Planificaci贸n':\r\n      return 'bg-blue-500';\r\n    case 'En Progreso':\r\n      return 'bg-green-500';\r\n    case 'En Revisi贸n':\r\n      return 'bg-purple-500';\r\n    default:\r\n      return 'bg-gray-500';\r\n  }\r\n};\r\nconst statusPill = (canon) => {\r\n  switch (canon) {\r\n    case 'Planificaci贸n':\r\n      return 'bg-blue-100 text-blue-800';\r\n    case 'En Progreso':\r\n      return 'bg-green-100 text-green-800';\r\n    case 'En Revisi贸n':\r\n      return 'bg-purple-100 text-purple-800';\r\n    default:\r\n      return 'bg-gray-100 text-gray-800';\r\n  }\r\n};\r\n\r\nfunction ProjectTimeline({ projects, onNewProject, clientsCatalog }) {\r\n  const [rows, setRows] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [err, setErr] = useState(null);\r\n\r\n  const [clientsMap, setClientsMap] = useState(null);\r\n\r\n  const [period, setPeriod] = useState('month');\r\n  const PERIODS = [\r\n    { key: 'week', label: 'Esta Semana' },\r\n    { key: 'month', label: 'Este Mes' },\r\n    { key: 'q', label: 'Trimestre' },\r\n    { key: 'year', label: 'A帽o' },\r\n  ];\r\n\r\n  const ALLOWED = ['Planificaci贸n', 'En Progreso', 'En Revisi贸n'];\r\n\r\n  const [showCreate, setShowCreate] = useState(false);\r\n\r\n  // ====== Cargar clientes ======\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        if (Array.isArray(clientsCatalog) && clientsCatalog.length > 0) {\r\n          if (mounted)\r\n            setClientsMap(buildClientsMapFromCatalog(clientsCatalog));\r\n          return;\r\n        }\r\n        const res = await clientService.getClients();\r\n        const list = Array.isArray(res?.data)\r\n          ? res.data\r\n          : Array.isArray(res)\r\n          ? res\r\n          : [];\r\n        if (mounted)\r\n          setClientsMap(buildClientsMapFromCatalog(list));\r\n      } catch (e) {\r\n        if (mounted) setClientsMap(null);\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [clientsCatalog]);\r\n\r\n  /**\r\n   * fetchRows con \"forceRemote\".\r\n   */\r\n  const fetchRows = useCallback(\r\n    async ({ forceRemote = false } = {}) => {\r\n      if (Array.isArray(projects) && !forceRemote) {\r\n        const withCanon = projects.map((p) => ({\r\n          ...p,\r\n          __estadoCanon: getCanonFromObject(p),\r\n        }));\r\n        // 猬锔 Ajuste: si no hay canon, igual se muestra (no se filtra por completo)\r\n        const filtered = withCanon.filter((p) => {\r\n          const canon = getCanon(p);\r\n          if (!canon) return true;\r\n          return ALLOWED.includes(canon);\r\n        });\r\n        setRows(filtered);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setErr(null);\r\n      try {\r\n        const res = await proyectoService.getProyectos();\r\n        const list = Array.isArray(res?.data)\r\n          ? res.data\r\n          : Array.isArray(res)\r\n          ? res\r\n          : [];\r\n        const withCanon = list.map((p) => ({\r\n          ...p,\r\n          __estadoCanon: getCanonFromObject(p),\r\n        }));\r\n        const filtered = withCanon.filter((p) => {\r\n          const canon = getCanon(p);\r\n          if (!canon) return true;\r\n          return ALLOWED.includes(canon);\r\n        });\r\n        setRows(filtered);\r\n      } catch (e) {\r\n        setErr(\r\n          e?.userMessage ||\r\n            e?.message ||\r\n            'Error al obtener proyectos'\r\n        );\r\n        setRows([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [projects]\r\n  );\r\n\r\n  useEffect(() => {\r\n    fetchRows();\r\n  }, [fetchRows]);\r\n\r\n  const range = useMemo(() => {\r\n    const now = new Date();\r\n    const today = new Date(\r\n      now.getFullYear(),\r\n      now.getMonth(),\r\n      now.getDate()\r\n    );\r\n    if (period === 'week') {\r\n      const ini = startOfWeekMonday(today);\r\n      const fin = new Date(ini);\r\n      fin.setDate(ini.getDate() + 7);\r\n      return { ini, fin };\r\n    }\r\n    if (period === 'month') {\r\n      const ini = startOfMonth(today);\r\n      const fin = startOfNextMonth(today);\r\n      return { ini, fin };\r\n    }\r\n    if (period === 'q') {\r\n      const ini = startOfQuarter(today);\r\n      const fin = startOfNextQuarter(today);\r\n      return { ini, fin };\r\n    }\r\n    if (period === 'year') {\r\n      const ini = startOfYear(today.getFullYear());\r\n      const fin = startOfNextYear(today.getFullYear());\r\n      return { ini, fin };\r\n    }\r\n    return null;\r\n  }, [period]);\r\n\r\n  const filteredRows = useMemo(() => {\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    if (!range) {\r\n      return rows\r\n        .filter((p) => {\r\n          const e = safeDate(getEnd(p));\r\n          if (!e) return true;\r\n          return e.getTime() >= today.getTime();\r\n        })\r\n        .sort((a, b) => {\r\n          const aT = safeDate(getStart(a))?.getTime?.() ?? 0;\r\n          const bT = safeDate(getStart(b))?.getTime?.() ?? 0;\r\n          return aT - bT;\r\n        });\r\n    }\r\n\r\n    const { ini, fin } = range;\r\n    return rows\r\n      .filter((p) => {\r\n        const s = safeDate(getStart(p));\r\n        const e = safeDate(getEnd(p));\r\n\r\n        if (e && e.getTime() < today.getTime()) return false;\r\n\r\n        const startsIn = s && inRange(s, ini, fin);\r\n        const endsIn = e && inRange(e, ini, fin);\r\n        return startsIn || endsIn;\r\n      })\r\n      .sort((a, b) => {\r\n        const aT = safeDate(getStart(a))?.getTime?.() ?? 0;\r\n        const bT = safeDate(getStart(b))?.getTime?.() ?? 0;\r\n        return aT - bT;\r\n      });\r\n  }, [rows, range]);\r\n\r\n  const assignedPeople = useMemo(() => {\r\n    const map = new Map();\r\n    for (const p of rows) {\r\n      const people = Array.isArray(p?.assignedPersonnel)\r\n        ? p.assignedPersonnel\r\n        : Array.isArray(p?.personalAsignado)\r\n        ? p.personalAsignado\r\n        : [];\r\n      const clientDet = getClientDetails(p, clientsMap);\r\n      const proj = {\r\n        code: String(getCode(p) || ''),\r\n        name: String(getName(p) || ''),\r\n        clientName: clientDet.name || 'Sin cliente',\r\n        clientAux: clientDet.aux || null,\r\n      };\r\n      const key = `${proj.code}__${proj.name}__${proj.clientName}`;\r\n\r\n      for (const raw of people) {\r\n        if (!raw) continue;\r\n        const personName =\r\n          typeof raw === 'string'\r\n            ? raw.trim()\r\n            : String(raw?.name ?? '').trim();\r\n        if (!personName) continue;\r\n\r\n        if (!map.has(personName))\r\n          map.set(personName, { projects: new Map() });\r\n        const entry = map.get(personName);\r\n        if (!entry.projects.has(key)) entry.projects.set(key, proj);\r\n      }\r\n    }\r\n\r\n    const arr = Array.from(map.entries()).map(([name, info]) => {\r\n      const projects = Array.from(info.projects.values());\r\n      return {\r\n        name,\r\n        count: projects.length,\r\n        projects,\r\n      };\r\n    });\r\n\r\n    arr.sort((a, b) => {\r\n      if (b.count !== a.count) return b.count - a.count;\r\n      return a.name.localeCompare('es', {\r\n        sensitivity: 'base',\r\n      });\r\n    });\r\n\r\n    return arr;\r\n  }, [rows, clientsMap]);\r\n\r\n  const [peoplePage, setPeoplePage] = useState(1);\r\n  const PEOPLE_PAGE_SIZE = 5;\r\n\r\n  useEffect(() => {\r\n    setPeoplePage(1);\r\n  }, [assignedPeople.length]);\r\n\r\n  const peopleTotalPages = Math.max(\r\n    1,\r\n    Math.ceil(assignedPeople.length / PEOPLE_PAGE_SIZE)\r\n  );\r\n  const peopleSlice = useMemo(() => {\r\n    const start = (peoplePage - 1) * PEOPLE_PAGE_SIZE;\r\n    return assignedPeople.slice(start, start + PEOPLE_PAGE_SIZE);\r\n  }, [assignedPeople, peoplePage]);\r\n\r\n  const canPrevPeople = peoplePage > 1;\r\n  const canNextPeople = peoplePage < peopleTotalPages;\r\n\r\n  const [personModal, setPersonModal] = useState({\r\n    open: false,\r\n    name: '',\r\n    projects: [],\r\n  });\r\n  const openPersonModal = (personName) => {\r\n    const found = assignedPeople.find((p) => p.name === personName);\r\n    setPersonModal({\r\n      open: true,\r\n      name: personName,\r\n      projects: found?.projects || [],\r\n    });\r\n    if (typeof document !== 'undefined') {\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n  };\r\n  const closePersonModal = () => {\r\n    setPersonModal({ open: false, name: '', projects: [] });\r\n    if (typeof document !== 'undefined') {\r\n      document.body.style.overflow = '';\r\n    }\r\n  };\r\n\r\n  const openCreate = () => setShowCreate(true);\r\n  const closeCreate = () => setShowCreate(false);\r\n  useEffect(() => {\r\n    if (typeof document === 'undefined') return;\r\n    if (showCreate) {\r\n      const prev = document.body.style.overflow;\r\n      document.body.style.overflow = 'hidden';\r\n      return () => {\r\n        document.body.style.overflow = prev;\r\n      };\r\n    }\r\n  }, [showCreate]);\r\n\r\n  const handleNewProjectClick = () => {\r\n    if (typeof onNewProject === 'function') onNewProject();\r\n    openCreate();\r\n  };\r\n\r\n  const handleCreated = async (payloadSentOrCreated) => {\r\n    const now = Date.now();\r\n    const created = payloadSentOrCreated || {};\r\n    const optimistic = {\r\n      id: created?.id || created?._id || `tmp_${now}`,\r\n      codigo: created?.codigo || created?.code || '',\r\n      nombre: created?.nombre || created?.name || 'Proyecto sin nombre',\r\n      cliente:\r\n        created?.cliente || {\r\n          id: created?.client || '',\r\n          nombre: created?.clientName || '',\r\n        },\r\n      cronograma: {\r\n        fechaInicio:\r\n          created?.cronograma?.fechaInicio ||\r\n          created?.startDate ||\r\n          '',\r\n        fechaFin:\r\n          created?.cronograma?.fechaFin ||\r\n          created?.endDate ||\r\n          '',\r\n      },\r\n      prioridad: created?.prioridad || created?.priority || '',\r\n      presupuesto:\r\n        created?.presupuesto || {\r\n          manoObra: Number(created?.budgetBreakdown?.labor || 0),\r\n          piezas: Number(created?.budgetBreakdown?.parts || 0),\r\n          equipos: Number(\r\n            created?.budgetBreakdown?.equipment || 0\r\n          ),\r\n          materiales: Number(\r\n            created?.budgetBreakdown?.materials || 0\r\n          ),\r\n          transporte: Number(\r\n            created?.budgetBreakdown?.transportation || 0\r\n          ),\r\n          otros: Number(created?.budgetBreakdown?.other || 0),\r\n        },\r\n      estado: created?.estado || created?.status || 'Planificaci贸n',\r\n      __estadoCanon:\r\n        toCanon(created?.estado || created?.status) ||\r\n        'Planificaci贸n',\r\n      personalAsignado:\r\n        created?.personalAsignado ||\r\n        created?.assignedPersonnel ||\r\n        [],\r\n    };\r\n\r\n    setRows((prev) => [optimistic, ...prev]);\r\n    await fetchRows({ forceRemote: true });\r\n    closeCreate();\r\n  };\r\n\r\n  const SEP = ';';\r\n  const q = (v) =>\r\n    `\"${String(v ?? '').replace(/\"/g, '\"\"')}\"`;\r\n\r\n  const handleExportReport = () => {\r\n    if (!filteredRows || filteredRows.length === 0) {\r\n      alert(\r\n        'No hay proyectos para exportar en el per铆odo seleccionado.'\r\n      );\r\n      return;\r\n    }\r\n\r\n    const headers = [\r\n      'C贸digo',\r\n      'Nombre',\r\n      'Cliente',\r\n      'Estado',\r\n      'Inicio',\r\n      'Fin',\r\n      'Prioridad',\r\n      'Presupuesto Total (MXN)',\r\n      'Progreso (%)',\r\n    ];\r\n\r\n    const rowsCsv = filteredRows.map((p) => {\r\n      const code = getCode(p);\r\n      const name = getName(p);\r\n      const client = getClientDetails(p, clientsMap).name;\r\n      const canon = getCanon(p) || '';\r\n      const inicio = fmtDateIso(getStart(p));\r\n      const fin = fmtDateIso(getEnd(p));\r\n      const prior = p?.prioridad ?? p?.priority ?? '';\r\n      const budget = Number(getBudgetTotal(p));\r\n      const prog = Math.max(\r\n        0,\r\n        Math.min(100, Number(getProg(p)))\r\n      );\r\n\r\n      return [\r\n        q(code),\r\n        q(name),\r\n        q(client),\r\n        q(canon),\r\n        q(inicio),\r\n        q(fin),\r\n        q(prior),\r\n        String(budget),\r\n        String(prog),\r\n      ].join(SEP);\r\n    });\r\n\r\n    const titleMap = {\r\n      week: 'semana',\r\n      month: 'mes',\r\n      q: 'trimestre',\r\n      year: 'anio',\r\n    };\r\n    const fileSuffix = titleMap[period] || 'periodo';\r\n    const fileName = `reporte_proyectos_${fileSuffix}_${new Date()\r\n      .toISOString()\r\n      .slice(0, 10)}.csv`;\r\n\r\n    const csvContent =\r\n      '\\uFEFF' +\r\n      [\r\n        'sep=' + SEP,\r\n        headers.map(q).join(SEP),\r\n        ...rowsCsv,\r\n      ].join('\\n');\r\n\r\n    const blob = new Blob([csvContent], {\r\n      type: 'text/csv;charset=utf-8',\r\n    });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = fileName;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* IZQUIERDA: Timeline */}\r\n        <div className=\"lg:col-span-2\">\r\n          <div className=\"bg-card border border-border rounded-lg p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-foreground\">\r\n                Cronograma de Proyectos\r\n              </h3>\r\n\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"flex bg-muted rounded-lg p-1\">\r\n                  {PERIODS.map((p) => (\r\n                    <button\r\n                      key={p.key}\r\n                      onClick={() => setPeriod(p.key)}\r\n                      className={`px-3 py-1 text-sm rounded-md transition-smooth ${\r\n                        period === p.key\r\n                          ? 'bg-primary text-primary-foreground'\r\n                          : 'text-muted-foreground hover:text-foreground'\r\n                      }`}\r\n                    >\r\n                      {p.label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  iconName=\"RotateCw\"\r\n                  onClick={() => fetchRows({ forceRemote: true })}\r\n                  title=\"Actualizar\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {loading && (\r\n              <div className=\"text-center py-8\">\r\n                <Icon\r\n                  name=\"Loader2\"\r\n                  size={32}\r\n                  className=\"animate-spin text-muted-foreground mx-auto mb-4\"\r\n                />\r\n                <p className=\"text-muted-foreground\">\r\n                  Cargando proyectos...\r\n                </p>\r\n              </div>\r\n            )}\r\n            {!loading && err && (\r\n              <div className=\"text-center py-8 text-destructive\">\r\n                {String(err)}\r\n              </div>\r\n            )}\r\n            {!loading &&\r\n              !err &&\r\n              filteredRows.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <Icon\r\n                    name=\"Calendar\"\r\n                    size={48}\r\n                    className=\"text-muted-foreground mx-auto mb-4\"\r\n                  />\r\n                  <p className=\"text-muted-foreground\">\r\n                    No hay proyectos vigentes para el per铆odo\r\n                    seleccionado.\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">\r\n                    (Los proyectos con fecha de finalizaci贸n pasada\r\n                    no se muestran aqu铆)\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n            {!loading &&\r\n              !err &&\r\n              filteredRows.length > 0 && (\r\n                <div className=\"space-y-4\">\r\n                  {filteredRows.map((p, idx) => {\r\n                    const id = getId(p);\r\n                    const code = String(getCode(p) || '');\r\n                    const name = String(getName(p) || '');\r\n                    const clientDet = getClientDetails(\r\n                      p,\r\n                      clientsMap\r\n                    );\r\n                    const start = getStart(p);\r\n                    const end = getEnd(p);\r\n                    const canon = getCanon(p) || '';\r\n                    const prog = Math.max(\r\n                      0,\r\n                      Math.min(100, getProg(p))\r\n                    );\r\n\r\n                    return (\r\n                      <div\r\n                        key={id ?? code ?? `row_${idx}`}\r\n                        className=\"relative\"\r\n                        data-code={code}\r\n                      >\r\n                        {/* l铆nea vertical */}\r\n                        {idx < filteredRows.length - 1 && (\r\n                          <div className=\"absolute left-6 top-12 w-0.5 h-16 bg-border\" />\r\n                        )}\r\n\r\n                        <div className=\"flex items-start space-x-4\">\r\n                          {/* punto */}\r\n                          <div\r\n                            className={`w-3 h-3 rounded-full ${statusColor(\r\n                              canon\r\n                            )} mt-2 flex-shrink-0`}\r\n                          />\r\n\r\n                          {/* contenido */}\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                              <h4\r\n                                className=\"font-medium text-foreground truncate\"\r\n                                title={name}\r\n                              >\r\n                                {name}\r\n                              </h4>\r\n                              <span\r\n                                className=\"text-sm text-muted-foreground\"\r\n                                title={code}\r\n                              >\r\n                                {code}\r\n                              </span>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm\">\r\n                              <div className=\"break-words\">\r\n                                <span className=\"text-muted-foreground block\">\r\n                                  Cliente\r\n                                </span>\r\n                                <div\r\n                                  className=\"text-foreground font-medium\"\r\n                                  title={clientDet.name}\r\n                                >\r\n                                  {clientDet.name || 'Sin cliente'}\r\n                                </div>\r\n                                {clientDet.aux && (\r\n                                  <div\r\n                                    className=\"text-xs text-muted-foreground truncate\"\r\n                                    title={clientDet.aux}\r\n                                  >\r\n                                    {clientDet.aux}\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                              <div>\r\n                                <span className=\"text-muted-foreground\">\r\n                                  Inicio:{' '}\r\n                                </span>\r\n                                <span className=\"text-foreground\">\r\n                                  {fmtDateHuman(start)}\r\n                                </span>\r\n                              </div>\r\n                              <div>\r\n                                <span className=\"text-muted-foreground\">\r\n                                  Fin:{' '}\r\n                                </span>\r\n                                <span className=\"text-foreground\">\r\n                                  {fmtDateHuman(end)}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center justify-between mt-3\">\r\n                              <div className=\"flex items-center space-x-4\">\r\n                                <span\r\n                                  className={`px-2 py-1 rounded-full text-xs font-medium ${statusPill(\r\n                                    canon\r\n                                  )}`}\r\n                                >\r\n                                  {canon}\r\n                                </span>\r\n                                <div className=\"flex items-center space-x-1\">\r\n                                  <Icon\r\n                                    name=\"Users\"\r\n                                    size={14}\r\n                                    className=\"text-muted-foreground\"\r\n                                  />\r\n                                  <span className=\"text-xs text-muted-foreground\">\r\n                                    {(\r\n                                      p?.assignedPersonnel ||\r\n                                      p?.personalAsignado ||\r\n                                      []\r\n                                    ).length}{' '}\r\n                                    personas\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n\r\n                              <div className=\"flex items-center space-x-2\">\r\n                                <div\r\n                                  className=\"w-24 bg-muted rounded-full h-2\"\r\n                                  title={`${prog}%`}\r\n                                >\r\n                                  <div\r\n                                    className={`h-2 rounded-full ${statusColor(\r\n                                      canon\r\n                                    )}`}\r\n                                    style={{\r\n                                      width: `${prog}%`,\r\n                                    }}\r\n                                  />\r\n                                </div>\r\n                                <span className=\"text-xs text-foreground font-medium\">\r\n                                  {prog}%\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* DERECHA: Paneles */}\r\n        <div className=\"space-y-6\">\r\n          {/* Personal Asignado */}\r\n          <div className=\"bg-card border border-border rounded-lg p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-foreground\">\r\n                Personal Asignado\r\n              </h3>\r\n              <div className=\"text-sm text-muted-foreground\">\r\n                {assignedPeople.length} persona\r\n                {assignedPeople.length === 1 ? '' : 's'}\r\n              </div>\r\n            </div>\r\n\r\n            {assignedPeople.length === 0 && (\r\n              <div className=\"text-sm text-muted-foreground\">\r\n                Sin personal asignado a proyectos vigentes.\r\n              </div>\r\n            )}\r\n\r\n            {assignedPeople.length > 0 && (\r\n              <>\r\n                <div className=\"space-y-3\">\r\n                  {peopleSlice.map((p) => (\r\n                    <div\r\n                      key={p.name}\r\n                      className=\"flex items-center justify-between\"\r\n                    >\r\n                      <div className=\"min-w-0\">\r\n                        <div\r\n                          className=\"font-medium text-foreground truncate\"\r\n                          title={p.name}\r\n                        >\r\n                          {p.name}\r\n                        </div>\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          {p.count} proyecto\r\n                          {p.count > 1 ? 's' : ''}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"w-8 h-8 rounded-full border border-border hover:bg-muted flex items-center justify-center\"\r\n                          title=\"Ver proyectos\"\r\n                          onClick={() => openPersonModal(p.name)}\r\n                        >\r\n                          <Icon name=\"Eye\" size={16} />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between mt-4 pt-4 border-t border-border\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className={`px-3 py-1 rounded-md text-sm border border-border ${\r\n                      canPrevPeople\r\n                        ? 'hover:bg-muted'\r\n                        : 'opacity-50 cursor-not-allowed'\r\n                    }`}\r\n                    onClick={() =>\r\n                      canPrevPeople &&\r\n                      setPeoplePage((n) => Math.max(1, n - 1))\r\n                    }\r\n                    disabled={!canPrevPeople}\r\n                  >\r\n                     Anterior\r\n                  </button>\r\n                  <div className=\"text-sm text-muted-foreground\">\r\n                    P谩gina{' '}\r\n                    <span className=\"font-medium text-foreground\">\r\n                      {peoplePage}\r\n                    </span>{' '}\r\n                    de{' '}\r\n                    <span className=\"font-medium text-foreground\">\r\n                      {peopleTotalPages}\r\n                    </span>\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={`px-3 py-1 rounded-md text-sm border border-border ${\r\n                      canNextPeople\r\n                        ? 'hover:bg-muted'\r\n                        : 'opacity-50 cursor-not-allowed'\r\n                    }`}\r\n                    onClick={() =>\r\n                      canNextPeople &&\r\n                      setPeoplePage((n) =>\r\n                        Math.min(peopleTotalPages, n + 1)\r\n                      )\r\n                    }\r\n                    disabled={!canNextPeople}\r\n                  >\r\n                    Siguiente \r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Acciones R谩pidas */}\r\n          <div className=\"bg-card border border-border rounded-lg p-6\">\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-4\">\r\n              Acciones R谩pidas\r\n            </h3>\r\n            <div className=\"space-y-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"Plus\"\r\n                iconPosition=\"left\"\r\n                className=\"w-full justify-start\"\r\n                onClick={handleNewProjectClick}\r\n              >\r\n                Nuevo Proyecto\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"FileText\"\r\n                iconPosition=\"left\"\r\n                className=\"w-full justify-start\"\r\n                onClick={handleExportReport}\r\n              >\r\n                Generar Reporte\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"Calendar\"\r\n                iconPosition=\"left\"\r\n                className=\"w-full justify-start\"\r\n              >\r\n                Programar Reuni贸n\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <CreateProjectModal\r\n        isOpen={showCreate}\r\n        onClose={closeCreate}\r\n        onSubmit={handleCreated}\r\n      />\r\n\r\n      {personModal.open && (\r\n        <div className=\"fixed inset-0 z-[1050] flex items-center justify-center\">\r\n          <div\r\n            className=\"absolute inset-0 bg-black/50\"\r\n            onClick={closePersonModal}\r\n            aria-hidden=\"true\"\r\n          />\r\n          <div className=\"relative bg-card border border-border rounded-lg w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden shadow-xl\">\r\n            <div className=\"flex items-center justify-between p-5 border-b border-border\">\r\n              <div>\r\n                <h2 className=\"text-lg font-semibold text-foreground\">\r\n                  {personModal.name}\r\n                </h2>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  En {personModal.projects.length} proyecto\r\n                  {personModal.projects.length === 1 ? '' : 's'}\r\n                </p>\r\n              </div>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={closePersonModal}\r\n                title=\"Cerrar\"\r\n              >\r\n                <Icon name=\"X\" size={18} />\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"p-5 overflow-auto\">\r\n              {personModal.projects.length === 0 ? (\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  No hay proyectos para mostrar.\r\n                </div>\r\n              ) : (\r\n                <div className=\"border border-border rounded-lg overflow-hidden\">\r\n                  <table className=\"w-full text-sm\">\r\n                    <thead className=\"bg-muted\">\r\n                      <tr className=\"text-left\">\r\n                        <th className=\"px-4 py-2 text-foreground\">\r\n                          C贸digo\r\n                        </th>\r\n                        <th className=\"px-4 py-2 text-foreground\">\r\n                          Proyecto\r\n                        </th>\r\n                        <th className=\"px-4 py-2 text-foreground\">\r\n                          Cliente\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {personModal.projects.map((pr, i) => (\r\n                        <tr\r\n                          key={`${pr.code}__${pr.name}__${i}`}\r\n                          className=\"border-t border-border align-top\"\r\n                        >\r\n                          <td className=\"px-4 py-2 text-foreground whitespace-nowrap\">\r\n                            {pr.code || ''}\r\n                          </td>\r\n                          <td className=\"px-4 py-2 text-foreground\">\r\n                            {pr.name}\r\n                          </td>\r\n                          <td className=\"px-4 py-2\">\r\n                            <div\r\n                              className=\"text-foreground font-medium truncate\"\r\n                              title={pr.clientName}\r\n                            >\r\n                              {pr.clientName || 'Sin cliente'}\r\n                            </div>\r\n                            {pr.clientAux && (\r\n                              <div\r\n                                className=\"text-xs text-muted-foreground truncate\"\r\n                                title={pr.clientAux}\r\n                              >\r\n                                {pr.clientAux}\r\n                              </div>\r\n                            )}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"p-4 border-t border-border flex justify-end\">\r\n              <Button variant=\"outline\" onClick={closePersonModal}>\r\n                Cerrar\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProjectTimeline;\r\n","// ProjectQuotations.jsx\r\nimport React, { useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport ProjectTable from './ProjectTable';\r\nimport ProjectFilters, { applyProjectFilters } from './ProjectFilters';\r\n\r\nconst ProjectQuotations = ({ projects = [] }) => {\r\n  const navigate = useNavigate();\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n\r\n  //  Estado de filtros\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    status: '',\r\n    department: '',\r\n    dateRange: '',\r\n    clientType: '',\r\n    priority: '',\r\n    minBudget: '',\r\n    maxBudget: '',\r\n    startDate: '',\r\n    endDate: '',\r\n  });\r\n\r\n  // === Utilidades ===\r\n  const formatCurrency = (n) =>\r\n    new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN',\r\n    }).format(n ?? 0);\r\n\r\n  const formatDate = (d) =>\r\n    new Date(d).toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n    });\r\n\r\n  const getStatusColor = (s) =>\r\n    ({\r\n      pending: 'bg-yellow-100 text-yellow-800',\r\n      approved: 'bg-green-100 text-green-800',\r\n      rejected: 'bg-red-100 text-red-800',\r\n      expired: 'bg-gray-100 text-gray-800',\r\n      draft: 'bg-blue-100 text-blue-800',\r\n      planning: 'bg-blue-100 text-blue-800',\r\n      'in-progress': 'bg-emerald-100 text-emerald-800',\r\n      'on-hold': 'bg-yellow-100 text-yellow-800',\r\n      review: 'bg-purple-100 text-purple-800',\r\n      completed: 'bg-green-100 text-green-800',\r\n      cancelled: 'bg-red-100 text-red-800',\r\n    }[s] || 'bg-gray-100 text-gray-800');\r\n\r\n  // === Normalizadores ===\r\n  const norm = (v) =>\r\n    (v == null ? '' : String(v))\r\n      .toLowerCase()\r\n      .normalize('NFD')\r\n      .replace(/[\\u0300-\\u036f]/g, '')\r\n      .trim();\r\n\r\n  const canonicalizeStatus = (raw) => {\r\n    const n = norm(raw);\r\n    if (!n) return '';\r\n    const table = [\r\n      [\r\n        'planning',\r\n        ['planificacion', 'planificaci贸n', 'planning', 'planeacion', 'planeaci贸n'],\r\n      ],\r\n      [\r\n        'in-progress',\r\n        [\r\n          'en progreso',\r\n          'in-progress',\r\n          'progreso',\r\n          'ejecucion',\r\n          'ejecuci贸n',\r\n          'proceso',\r\n        ],\r\n      ],\r\n      ['on-hold', ['en pausa', 'on-hold', 'pausa', 'pausado', 'detenido', 'hold']],\r\n      [\r\n        'review',\r\n        ['revision', 'revisi贸n', 'review', 'en revision', 'por revisar', 'validacion'],\r\n      ],\r\n      ['completed', ['completado', 'finalizado', 'done', 'terminado', 'cerrado']],\r\n      ['cancelled', ['cancelado', 'cancelled', 'anulado']],\r\n    ];\r\n    for (const [canon, synonyms] of table) {\r\n      if (synonyms.some((w) => n === norm(w) || n.includes(norm(w)))) return canon;\r\n    }\r\n    return n;\r\n  };\r\n\r\n  const canonicalizeDepartment = (raw) => {\r\n    const n = norm(raw);\r\n    if (!n) return '';\r\n    const table = [\r\n      ['sales', ['ventas']],\r\n      ['engineering', ['ingenieria', 'ingenier铆a', 'ing']],\r\n      ['installation', ['instalacion', 'instalaci贸n', 'montaje']],\r\n      ['maintenance', ['mantenimiento', 'mtto']],\r\n      ['administration', ['administracion', 'administraci贸n', 'admin']],\r\n    ];\r\n    for (const [canon, synonyms] of table) {\r\n      if (synonyms.some((w) => n === norm(w) || n.includes(norm(w)))) return canon;\r\n    }\r\n    return n;\r\n  };\r\n\r\n  const canonicalizeClientType = (raw) => {\r\n    const n = norm(raw);\r\n    if (!n) return '';\r\n    const table = [\r\n      ['residential', ['residencial', 'hogar']],\r\n      ['commercial', ['comercial', 'negocio']],\r\n      ['industrial', ['industrial', 'industria']],\r\n      ['government', ['gubernamental', 'gobierno', 'publico']],\r\n    ];\r\n    for (const [canon, synonyms] of table) {\r\n      if (synonyms.some((w) => n === norm(w) || n.includes(norm(w)))) return canon;\r\n    }\r\n    return n;\r\n  };\r\n\r\n  const canonicalizePriority = (raw) => {\r\n    const n = norm(raw);\r\n    if (!n) return '';\r\n    const table = [\r\n      ['low', ['baja']],\r\n      ['medium', ['media', 'normal']],\r\n      ['high', ['alta']],\r\n      ['urgent', ['urgente']],\r\n    ];\r\n    for (const [canon, synonyms] of table) {\r\n      if (synonyms.some((w) => n === norm(w) || n.includes(norm(w)))) return canon;\r\n    }\r\n    return n;\r\n  };\r\n\r\n  // === Cotizaciones simuladas (placeholder) ===\r\n  const generateProjectQuotations = (project) => {\r\n    if (!project) return [];\r\n    const b = Number(project?.budget) || 0;\r\n    const mid = (project?.code || '').split('-')?.[2] || '000';\r\n    return [\r\n      {\r\n        id: `${project?.id}-quote-1`,\r\n        code: `COT-${mid}-001`,\r\n        version: '1.0',\r\n        status: 'planning',\r\n        statusLabel: 'Planificaci贸n',\r\n        amount: b * 0.9,\r\n        createdDate: '2024-01-10',\r\n        expiryDate: '2024-02-10',\r\n        description: 'Cotizaci贸n inicial para el proyecto',\r\n      },\r\n      {\r\n        id: `${project?.id}-quote-2`,\r\n        code: `COT-${mid}-002`,\r\n        version: '1.1',\r\n        status: 'in-progress',\r\n        statusLabel: 'En Progreso',\r\n        amount: b,\r\n        createdDate: '2024-01-15',\r\n        expiryDate: '2024-03-15',\r\n        description: 'Cotizaci贸n revisada con especificaciones actualizadas',\r\n      },\r\n    ];\r\n  };\r\n\r\n  // 猬锔 Ahora manda al m贸dulo de /cotizaciones (que s铆 tiene dashboard),\r\n  // pasando el projectId como query param\r\n  const handleCreateQuotation = (project) =>\r\n    navigate(`/cotizaciones?projectId=${project?.id ?? ''}`);\r\n\r\n  const handleViewQuotation = (project, quotation) =>\r\n    navigate(`/cotizaciones?quotationId=${quotation?.id ?? ''}`);\r\n\r\n  // === Normalizar proyectos ===\r\n  const projectsForFilter = useMemo(() => {\r\n    const pick = (...c) => c.find((v) => v !== undefined && v !== null);\r\n    return (Array.isArray(projects) ? projects : []).map((p) => ({\r\n      ...p,\r\n      name: pick(p.name, p.proyecto, p.titulo, p.nombre) ?? '',\r\n      code: pick(p.code, p.codigo, p.clave) ?? '',\r\n      client: {\r\n        ...(p.client || {}),\r\n        name: pick(p?.client?.name, p.cliente, p.clienteNombre) ?? '',\r\n        type: canonicalizeClientType(p.clientType || p.tipoCliente),\r\n        email: pick(p?.client?.email, p.clienteEmail, p.emailCliente) ?? '',\r\n      },\r\n      department: canonicalizeDepartment(p.department || p.depto),\r\n      priority: canonicalizePriority(p.priority || p.prioridad),\r\n      status: canonicalizeStatus(p.status || p.estado),\r\n      budget: Number(p.budget ?? p.presupuesto ?? 0),\r\n      startDate: pick(p.startDate, p.fechaInicio, p.inicio) ?? '',\r\n      endDate: pick(p.endDate, p.fechaFin, p.fin) ?? '',\r\n      __ref: p,\r\n    }));\r\n  }, [projects]);\r\n\r\n  // === Aplicar filtros ===\r\n  const filteredForFilter = useMemo(\r\n    () => applyProjectFilters(projectsForFilter, filters),\r\n    [projectsForFilter, filters]\r\n  );\r\n\r\n  const filteredProjects = useMemo(\r\n    () => filteredForFilter.map((p) => p.__ref || p),\r\n    [filteredForFilter]\r\n  );\r\n\r\n  const tableKey = useMemo(() => 'tbl-' + JSON.stringify(filters), [filters]);\r\n  const quotations = useMemo(\r\n    () => generateProjectQuotations(selectedProject),\r\n    [selectedProject]\r\n  );\r\n  const hasResults = filteredProjects?.length > 0;\r\n\r\n  const handleExportVisible = () => {\r\n    const rows = filteredForFilter || [];\r\n    if (!rows.length) {\r\n      alert('No hay proyectos para exportar con los filtros actuales.');\r\n      return;\r\n    }\r\n    const headers = [\r\n      'name',\r\n      'code',\r\n      'clientName',\r\n      'clientType',\r\n      'department',\r\n      'priority',\r\n      'status',\r\n      'budget',\r\n      'startDate',\r\n      'endDate',\r\n    ];\r\n    const escape = (v) => `\"${(v ?? '').toString().replace(/\"/g, '\"\"')}\"`;\r\n    const csv = [\r\n      headers.join(','),\r\n      ...rows.map((p) =>\r\n        [\r\n          escape(p.name),\r\n          escape(p.code),\r\n          escape(p.client.name),\r\n          escape(p.client.type),\r\n          escape(p.department),\r\n          escape(p.priority),\r\n          escape(p.status),\r\n          escape(p.budget),\r\n          escape(p.startDate),\r\n          escape(p.endDate),\r\n        ].join(',')\r\n      ),\r\n    ].join('\\n');\r\n\r\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'proyectos_filtrados.csv';\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Encabezado */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-foreground mb-1\">\r\n            Cotizaciones de Proyectos\r\n          </h2>\r\n          <p className=\"text-muted-foreground\">\r\n            Gestiona las cotizaciones asociadas a cada proyecto.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtros */}\r\n      <ProjectFilters\r\n        onFiltersChange={setFilters}\r\n        totalProjects={projects.length}\r\n        filteredProjects={filteredProjects.length}\r\n        onExport={handleExportVisible}\r\n      />\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Tabla */}\r\n        <div className=\"lg:col-span-2 pq--only-edit\">\r\n          {hasResults ? (\r\n            <>\r\n              <ProjectTable\r\n                key={tableKey}\r\n                projects={filteredProjects}\r\n                onProjectSelect={(p) => setSelectedProject(p)}\r\n              />\r\n              <style>{`\r\n                .pq--only-edit button[title=\"Ver detalles\"],\r\n                .pq--only-edit button[title=\"Ver galer铆a de im谩genes\"],\r\n                .pq--only-edit button[title=\"Subir imagen\"],\r\n                .pq--only-edit button[title=\"Eliminar proyecto\"] {\r\n                  display: none !important;\r\n                }\r\n              `}</style>\r\n            </>\r\n          ) : (\r\n            <div className=\"flex items-center justify-center h-[320px] border border-dashed border-border rounded-lg bg-muted/20\">\r\n              <div className=\"text-center px-6\">\r\n                <Icon\r\n                  name=\"Filter\"\r\n                  size={48}\r\n                  className=\"text-muted-foreground mx-auto mb-4\"\r\n                />\r\n                <h3 className=\"text-lg font-medium text-foreground mb-1\">\r\n                  No se encontraron proyectos con tus filtros\r\n                </h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Intenta con otros filtros o par谩metros de b煤squeda\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Panel cotizaciones */}\r\n        <div className=\"lg:col-span-1\">\r\n          <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n            <div className=\"bg-muted/30 p-4 border-b border-border flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Icon name=\"FileText\" size={18} className=\"text-primary\" />\r\n                <h3 className=\"text-base font-semibold text-foreground\">\r\n                  Cotizaciones\r\n                </h3>\r\n              </div>\r\n              {selectedProject && (\r\n                <Button\r\n                  size=\"sm\"\r\n                  onClick={() => handleCreateQuotation(selectedProject)}\r\n                >\r\n                  Ir a cotizaciones\r\n                </Button>\r\n              )}\r\n            </div>\r\n\r\n            {!selectedProject ? (\r\n              <div className=\"p-6 text-center\">\r\n                <Icon\r\n                  name=\"Info\"\r\n                  size={40}\r\n                  className=\"text-muted-foreground mx-auto mb-3\"\r\n                />\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Selecciona{' '}\r\n                  <span className=\"font-medium text-foreground\">un proyecto</span>{' '}\r\n                  en la tabla para ver sus cotizaciones aqu铆.\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"p-4 space-y-3\">\r\n                <div className=\"mb-1\">\r\n                  <div className=\"text-sm text-muted-foreground\">Proyecto</div>\r\n                  <div className=\"text-sm font-medium text-foreground\">\r\n                    {selectedProject?.name}{' '}\r\n                    <span className=\"text-muted-foreground\">\r\n                      ({selectedProject?.code || ''})\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {quotations.map((q) => (\r\n                  <div\r\n                    key={q.id}\r\n                    className=\"bg-background rounded-lg border border-border p-3\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between gap-2\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <span className=\"font-mono text-xs font-semibold text-primary\">\r\n                            {q.code}\r\n                          </span>\r\n                          <span className=\"text-[11px] bg-muted px-2 py-0.5 rounded-full text-muted-foreground\">\r\n                            v{q.version}\r\n                          </span>\r\n                          <span\r\n                            className={`px-2 py-0.5 rounded-full text-[11px] font-medium ${getStatusColor(\r\n                              q.status\r\n                            )}`}\r\n                          >\r\n                            {q.statusLabel}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mb-2\">\r\n                          {q.description}\r\n                        </p>\r\n                        <div className=\"grid grid-cols-2 gap-3\">\r\n                          <div>\r\n                            <div className=\"text-[11px] text-muted-foreground\">\r\n                              Monto\r\n                            </div>\r\n                            <div className=\"text-sm font-semibold text-foreground\">\r\n                              {formatCurrency(q.amount)}\r\n                            </div>\r\n                          </div>\r\n                          <div>\r\n                            <div className=\"text-[11px] text-muted-foreground\">\r\n                              Vence\r\n                            </div>\r\n                            <div className=\"text-sm text-foreground\">\r\n                              {formatDate(q.expiryDate)}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1\">\r\n                        {/*\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          title=\"Ver\"\r\n                          onClick={() => handleViewQuotation(selectedProject, q)}\r\n                        >\r\n                          <Icon name=\"Eye\" size={16} />\r\n                        </Button>\r\n\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          title=\"Descargar PDF\"\r\n                          onClick={() => alert(`Descargando PDF de ${q.code}`)}\r\n                        >\r\n                          <Icon name=\"Download\" size={16} />\r\n                        </Button>\r\n                        */}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectQuotations;\r\n","import React, { useEffect, useState, useMemo } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport proyectoService from '../../../services/proyectoService';\r\n\r\n// ---------- Helpers ----------\r\nconst toNumber = (val) => {\r\n  if (val === null || val === undefined) return 0;\r\n  if (typeof val === 'number') return isNaN(val) ? 0 : val;\r\n  if (typeof val === 'string') {\r\n    const cleaned = val.replace(/[^0-9.-]+/g, '');\r\n    const n = parseFloat(cleaned);\r\n    return isNaN(n) ? 0 : n;\r\n  }\r\n  return 0;\r\n};\r\n\r\nconst formatCurrencyMXN = (amount) => {\r\n  return new Intl.NumberFormat('es-MX', {\r\n    style: 'currency',\r\n    currency: 'MXN',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n  }).format(amount || 0);\r\n};\r\n\r\nconst safePercent = (part, total) => {\r\n  const p = toNumber(part);\r\n  const t = toNumber(total);\r\n  if (t <= 0) return 0;\r\n  return Math.round((p / t) * 100);\r\n};\r\n\r\n// normalizar estado local (fallback local)\r\nconst normalizeStatus = (rawStatus) => {\r\n  const s = (rawStatus || '').toString().trim().toLowerCase();\r\n\r\n  if (\r\n    [\r\n      'completed',\r\n      'completado',\r\n      'completada',\r\n      'terminado',\r\n      'terminada',\r\n      'done',\r\n      'cerrado',\r\n      'cerrada',\r\n      'finalizado',\r\n      'finalizada',\r\n    ].includes(s)\r\n  ) {\r\n    return 'completed';\r\n  }\r\n\r\n  if (\r\n    [\r\n      'in-progress',\r\n      'in progress',\r\n      'inprogress',\r\n      'en-progreso',\r\n      'en progreso',\r\n      'en proceso',\r\n      'activo',\r\n      'activa',\r\n      'running',\r\n      'ejecucion',\r\n      'ejecuci贸n',\r\n    ].includes(s)\r\n  ) {\r\n    return 'in-progress';\r\n  }\r\n\r\n  if (\r\n    [\r\n      'on-hold',\r\n      'hold',\r\n      'en pausa',\r\n      'pausa',\r\n      'paused',\r\n      'pausado',\r\n      'pausada',\r\n      'detenido',\r\n      'detenida',\r\n      'suspendido',\r\n      'suspendida',\r\n    ].includes(s)\r\n  ) {\r\n    return 'on-hold';\r\n  }\r\n\r\n  if (\r\n    [\r\n      'planning',\r\n      'plan',\r\n      'planificaci贸n',\r\n      'planificacion',\r\n      'cotizando',\r\n      'cotizacion',\r\n      'cotizaci贸n',\r\n      'borrador',\r\n      'draft',\r\n      'nuevo',\r\n      'nueva',\r\n    ].includes(s)\r\n  ) {\r\n    return 'planning';\r\n  }\r\n\r\n  return 'in-progress';\r\n};\r\n\r\n// normalizar prioridad local para fallback \"Proyectos Urgentes\"\r\nconst normalizePriority = (rawPriority) => {\r\n  const p = (rawPriority || '').toString().trim().toLowerCase();\r\n  if (\r\n    [\r\n      'urgent',\r\n      'urgente',\r\n      'alta',\r\n      'alta prioridad',\r\n      'cr铆tica',\r\n      'critica',\r\n      'cr铆tico',\r\n      'critico',\r\n      'urgency_high',\r\n    ].includes(p)\r\n  ) {\r\n    return 'urgent';\r\n  }\r\n  return 'normal';\r\n};\r\n\r\n// presupuesto local\r\nconst extractBudgetMXN = (rawProject) => {\r\n  const rawAmount =\r\n    rawProject?.budget ??\r\n    rawProject?.presupuestoTotal ??\r\n    rawProject?.presupuesto?.total ??\r\n    rawProject?.costoEstimado ??\r\n    rawProject?.montoEstimado ??\r\n    rawProject?.monto ??\r\n    rawProject?.totalProyecto ??\r\n    0;\r\n\r\n  return toNumber(rawAmount);\r\n};\r\n\r\n// normalizador de cada proyecto para c谩lculos locales\r\nconst normalizeProject = (rawProject) => {\r\n  return {\r\n    id:\r\n      rawProject?.id ||\r\n      rawProject?.idProyecto ||\r\n      rawProject?.uuid ||\r\n      rawProject?.codigo ||\r\n      null,\r\n\r\n    rawEstado:\r\n      rawProject?.estado ||\r\n      rawProject?.estatus ||\r\n      rawProject?.status ||\r\n      rawProject?.projectStatus ||\r\n      '',\r\n\r\n    status: normalizeStatus(\r\n      rawProject?.status ||\r\n        rawProject?.estado ||\r\n        rawProject?.estatus ||\r\n        rawProject?.projectStatus\r\n    ),\r\n\r\n    priority: normalizePriority(\r\n      rawProject?.priority ||\r\n        rawProject?.prioridad ||\r\n        rawProject?.urgencia\r\n    ),\r\n\r\n    budgetMXN: extractBudgetMXN(rawProject),\r\n  };\r\n};\r\n\r\n// ---------- Componente principal ----------\r\nconst ProjectStats = ({ refreshKey }) => {\r\n  const [projectsNorm, setProjectsNorm] = useState([]);\r\n  const [apiStats, setApiStats] = useState(null);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [errMsg, setErrMsg] = useState('');\r\n  const [warnMsg, setWarnMsg] = useState('');\r\n\r\n  // cargar info de backend\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      setLoading(true);\r\n      setErrMsg('');\r\n      setWarnMsg('');\r\n\r\n      try {\r\n        // 1. stats desde /proyectos/estadisticas\r\n        const statsResp = await proyectoService.getEstadisticas();\r\n        let statsPayload = null;\r\n        if (statsResp && typeof statsResp === 'object') {\r\n          if (\r\n            statsResp.data &&\r\n            typeof statsResp.data === 'object' &&\r\n            !Array.isArray(statsResp.data)\r\n          ) {\r\n            statsPayload = statsResp.data;\r\n          } else {\r\n            statsPayload = statsResp;\r\n          }\r\n        }\r\n\r\n        // 2. lista de proyectos completa\r\n        const proyectosResp = await proyectoService.getProyectos();\r\n        let proyectosRaw = [];\r\n        if (Array.isArray(proyectosResp)) {\r\n          proyectosRaw = proyectosResp;\r\n        } else if (Array.isArray(proyectosResp?.data)) {\r\n          proyectosRaw = proyectosResp.data;\r\n        } else if (Array.isArray(proyectosResp?.items)) {\r\n          proyectosRaw = proyectosResp.items;\r\n        } else {\r\n          proyectosRaw = [];\r\n        }\r\n\r\n        const normalized = proyectosRaw.map(normalizeProject);\r\n\r\n        setApiStats(statsPayload || null);\r\n        setProjectsNorm(normalized);\r\n\r\n        if (!proyectosRaw.length) {\r\n          setWarnMsg('No llegaron proyectos o no entend铆 /proyectos/todos.');\r\n        } else if (normalized.some((p) => !p.status)) {\r\n          setWarnMsg('Algunos proyectos no traen estado reconocible.');\r\n        }\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setErrMsg(\r\n          err?.userMessage || err?.message || 'Error al cargar estad铆sticas'\r\n        );\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadData();\r\n  }, [refreshKey]);\r\n\r\n  // fallback local si no hay apiStats o para corregir datos raros del back\r\n  const fallbackLocalStats = useMemo(() => {\r\n    const total = projectsNorm.length;\r\n\r\n    const completedList = projectsNorm.filter(\r\n      (p) => p.status === 'completed'\r\n    );\r\n    const inProgressList = projectsNorm.filter(\r\n      (p) => p.status === 'in-progress'\r\n    );\r\n    const onHoldList = projectsNorm.filter(\r\n      (p) => p.status === 'on-hold'\r\n    );\r\n    const planningList = projectsNorm.filter(\r\n      (p) => p.status === 'planning'\r\n    );\r\n    const urgentList = projectsNorm.filter(\r\n      (p) => p.priority === 'urgent'\r\n    );\r\n\r\n    const totalBudget = projectsNorm.reduce(\r\n      (sum, p) => sum + toNumber(p.budgetMXN),\r\n      0\r\n    );\r\n    const completedBudget = completedList.reduce(\r\n      (sum, p) => sum + toNumber(p.budgetMXN),\r\n      0\r\n    );\r\n\r\n    return {\r\n      total,\r\n      inProgress: inProgressList.length,\r\n      completed: completedList.length,\r\n      onHold: onHoldList.length,\r\n      planning: planningList.length,\r\n      urgentProjects: urgentList.length,\r\n      totalBudget,\r\n      completedBudget,\r\n    };\r\n  }, [projectsNorm]);\r\n\r\n  // merge stats backend + fallback\r\n  const mergedStats = useMemo(() => {\r\n    // si no hay apiStats, usamos todo local\r\n    if (!apiStats) {\r\n      return fallbackLocalStats;\r\n    }\r\n\r\n    const totalProyectos = toNumber(apiStats.totalProyectos);\r\n    const totalPresupuesto = toNumber(apiStats.totalPresupuesto);\r\n\r\n    const byEstado = apiStats.byEstado || {};\r\n    const byPrioridad = apiStats.byPrioridad || {};\r\n\r\n    const safeCount = (obj, key) =>\r\n      toNumber(\r\n        obj?.[key]?.count ?? obj?.[key]?.total ?? 0\r\n      );\r\n\r\n    const safeBudget = (obj, key) =>\r\n      toNumber(\r\n        obj?.[key]?.totalPresupuesto ??\r\n          obj?.[key]?.presupuesto ??\r\n          0\r\n      );\r\n\r\n    // En Progreso\r\n    const inProgressCount =\r\n      safeCount(byEstado, 'en proceso') ||\r\n      safeCount(byEstado, 'en_proceso') ||\r\n      safeCount(byEstado, 'en proceso ') ||\r\n      0;\r\n\r\n    // Completados\r\n    const completedCount =\r\n      safeCount(byEstado, 'completado') ||\r\n      safeCount(byEstado, 'completados') ||\r\n      safeCount(byEstado, 'finalizado') ||\r\n      safeCount(byEstado, 'finalizados') ||\r\n      0;\r\n\r\n    const completedBudget =\r\n      safeBudget(byEstado, 'completado') ||\r\n      safeBudget(byEstado, 'completados') ||\r\n      safeBudget(byEstado, 'finalizado') ||\r\n      safeBudget(byEstado, 'finalizados') ||\r\n      0;\r\n\r\n    // Urgentes (proyectos urgentes)\r\n    let apiUrgentCount =\r\n      safeCount(byPrioridad, 'urgente') ||\r\n      safeCount(byPrioridad, 'urgentes') ||\r\n      0;\r\n\r\n    if (!apiUrgentCount) {\r\n      apiUrgentCount =\r\n        safeCount(byEstado, 'urgente') ||\r\n        safeCount(byEstado, 'urgentes') ||\r\n        0;\r\n    }\r\n\r\n    const finalUrgent =\r\n      apiUrgentCount || fallbackLocalStats.urgentProjects;\r\n\r\n    // 锔 En Pausa  FORZAMOS a usar el conteo local,\r\n    // ignorando el que venga de /estadisticas,\r\n    // porque /estadisticas est谩 inflando (ej. dice 4 pero en realidad tienes 3).\r\n    const finalOnHold = fallbackLocalStats.onHold;\r\n\r\n    return {\r\n      total: totalProyectos || fallbackLocalStats.total,\r\n      inProgress: inProgressCount || fallbackLocalStats.inProgress,\r\n      completed: completedCount || fallbackLocalStats.completed,\r\n      onHold: finalOnHold, // <- importante\r\n      planning: fallbackLocalStats.planning,\r\n      urgentProjects: finalUrgent,\r\n      totalBudget:\r\n        totalPresupuesto || fallbackLocalStats.totalBudget,\r\n      completedBudget:\r\n        completedBudget || fallbackLocalStats.completedBudget,\r\n    };\r\n  }, [apiStats, fallbackLocalStats]);\r\n\r\n  const statCards = useMemo(\r\n    () => [\r\n      {\r\n        title: 'Total de Proyectos',\r\n        value: mergedStats.total,\r\n        icon: 'FolderOpen',\r\n        textColor: 'text-blue-600',\r\n        bgColor: 'bg-blue-50',\r\n        barColor: 'bg-blue-500',\r\n      },\r\n      {\r\n        title: 'En Progreso',\r\n        value: mergedStats.inProgress,\r\n        icon: 'Clock',\r\n        textColor: 'text-green-600',\r\n        bgColor: 'bg-green-50',\r\n        barColor: 'bg-green-500',\r\n      },\r\n      {\r\n        title: 'Completados',\r\n        value: mergedStats.completed,\r\n        icon: 'CheckCircle',\r\n        textColor: 'text-emerald-600',\r\n        bgColor: 'bg-emerald-50',\r\n        barColor: 'bg-emerald-500',\r\n      },\r\n      {\r\n        title: 'En Pausa',\r\n        value: mergedStats.onHold,\r\n        icon: 'Pause',\r\n        textColor: 'text-yellow-600',\r\n        bgColor: 'bg-yellow-50',\r\n        barColor: 'bg-yellow-500',\r\n      },\r\n      {\r\n        title: 'Presupuesto Total',\r\n        value: formatCurrencyMXN(mergedStats.totalBudget),\r\n        icon: 'DollarSign',\r\n        textColor: 'text-purple-600',\r\n        bgColor: 'bg-purple-50',\r\n        barColor: 'bg-purple-500',\r\n      },\r\n      {\r\n        title: 'Proyectos Urgentes',\r\n        value: mergedStats.urgentProjects,\r\n        icon: 'AlertTriangle',\r\n        textColor: 'text-red-600',\r\n        bgColor: 'bg-red-50',\r\n        barColor: 'bg-red-500',\r\n      },\r\n      {\r\n        title: 'Valor Completado',\r\n        value: formatCurrencyMXN(mergedStats.completedBudget),\r\n        icon: 'Target',\r\n        textColor: 'text-teal-600',\r\n        bgColor: 'bg-teal-50',\r\n        barColor: 'bg-teal-500',\r\n      },\r\n    ],\r\n    [mergedStats]\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6 animate-pulse\">\r\n        {[...Array(4)].map((_, i) => (\r\n          <div\r\n            key={i}\r\n            className=\"bg-card border border-border rounded-lg p-6\"\r\n          >\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"space-y-2\">\r\n                <div className=\"h-3 w-24 bg-muted rounded\" />\r\n                <div className=\"h-6 w-16 bg-muted rounded\" />\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-muted rounded-lg\" />\r\n            </div>\r\n            <div className=\"mt-4 h-2 w-full bg-muted rounded-full\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (errMsg) {\r\n    return (\r\n      <div className=\"mb-6 rounded-lg border border-red-300 bg-red-50 p-4 text-red-800 text-sm\">\r\n        <p className=\"font-semibold flex items-center gap-2\">\r\n          <Icon\r\n            name=\"AlertTriangle\"\r\n            className=\"text-red-600\"\r\n            size={18}\r\n          />\r\n          <span>Error cargando estad铆sticas</span>\r\n        </p>\r\n        <p className=\"mt-1 text-red-700\">{errMsg}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {warnMsg && (\r\n        <div className=\"mb-4 rounded-lg border border-yellow-300 bg-yellow-50 p-3 text-yellow-800 text-xs flex items-start gap-2\">\r\n          <Icon\r\n            name=\"AlertTriangle\"\r\n            className=\"text-yellow-600 min-w-[16px]\"\r\n            size={16}\r\n          />\r\n          <div>\r\n            <div className=\"font-semibold\">Aviso</div>\r\n            <div>{warnMsg}</div>\r\n            <div className=\"mt-1 text-[10px] text-yellow-700\">\r\n              Mostrando datos locales para \"En Pausa\" porque la API\r\n              est谩 mandando un conteo distinto.\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6\">\r\n        {statCards.map((stat, index) => (\r\n          <div\r\n            key={index}\r\n            className=\"bg-card border border-border rounded-lg p-6 hover:shadow-md transition-smooth\"\r\n          >\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground mb-1\">\r\n                  {stat.title}\r\n                </p>\r\n                <p className=\"text-2xl font-bold text-foreground\">\r\n                  {stat.value ?? 0}\r\n                </p>\r\n              </div>\r\n              <div\r\n                className={`w-12 h-12 ${stat.bgColor} rounded-lg flex items-center justify-center`}\r\n              >\r\n                <Icon\r\n                  name={stat.icon}\r\n                  size={24}\r\n                  className={stat.textColor}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {stat.title.includes('Completados') && (\r\n              <div className=\"mt-4\">\r\n                <div className=\"flex justify-between text-xs text-muted-foreground mb-1\">\r\n                  <span>Porcentaje</span>\r\n                  <span>\r\n                    {safePercent(\r\n                      statCards.find(\r\n                        (c) => c.title === 'Completados'\r\n                      )?.value,\r\n                      statCards.find(\r\n                        (c) =>\r\n                          c.title === 'Total de Proyectos'\r\n                      )?.value\r\n                    )}\r\n                    %\r\n                  </span>\r\n                </div>\r\n                <div className=\"w-full bg-muted rounded-full h-2\">\r\n                  <div\r\n                    className={`h-2 rounded-full ${stat.barColor}`}\r\n                    style={{\r\n                      width: `${safePercent(\r\n                        statCards.find(\r\n                          (c) => c.title === 'Completados'\r\n                        )?.value,\r\n                        statCards.find(\r\n                          (c) =>\r\n                            c.title ===\r\n                            'Total de Proyectos'\r\n                        )?.value\r\n                      )}%`,\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProjectStats;\r\n","import React, { useEffect, useMemo, useRef, useState, useCallback, } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport proyectoService from 'services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport usePerson from 'hooks/usePerson';\r\nimport { useErrorHandler, useNotifications } from 'context/NotificationContext';\r\nimport { useEstados, useMunicipios } from '../../../hooks/useEstado';\r\n\r\n/* ===================== ESTADOS (STATUS DEL PROYECTO) ===================== */\r\nconst estadoOptionsBackend = [\r\n  { value: 'planificaci贸n', label: 'Planificaci贸n' },\r\n  { value: 'en proceso',    label: 'En Progreso' },\r\n  { value: 'en pausa',      label: 'En Pausa' },\r\n  { value: 'en revisi贸n',   label: 'En Revisi贸n' },\r\n  { value: 'completado',    label: 'Completado' },\r\n  { value: 'cancelado',     label: 'Cancelado' },\r\n];\r\nconst ALLOWED_ESTADOS = estadoOptionsBackend.map((o) => o.value);\r\n\r\nconst UI_ESTADO_KEY = 'proyectos_ui_estado_v1';\r\nconst uiEstadoCache = {\r\n  _read() {\r\n    try {\r\n      return JSON.parse(localStorage.getItem(UI_ESTADO_KEY)) || {};\r\n    } catch {\r\n      return {};\r\n    }\r\n  },\r\n  get(id) {\r\n    if (!id) return null;\r\n    const m = this._read();\r\n    return m[id] || null;\r\n  },\r\n  set(id, estado) {\r\n    if (!id) return;\r\n    const m = this._read();\r\n    if (estado) m[id] = estado;\r\n    else delete m[id];\r\n    localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m));\r\n  },\r\n};\r\n\r\n/* ===================== CATLOGOS ===================== */\r\nconst departmentOptions = [\r\n  { value: 'Ingenier铆a', label: 'Ingenier铆a' },\r\n  { value: 'Mantenimiento', label: 'Mantenimiento' },\r\n  { value: 'Operaciones', label: 'Operaciones' },\r\n];\r\nconst priorityOptions = [\r\n  { value: 'Baja', label: 'Baja' },\r\n  { value: 'Media', label: 'Media' },\r\n  { value: 'Alta', label: 'Alta' },\r\n  { value: 'Urgente', label: 'Urgente' },\r\n];\r\n\r\n/* ===== Helpers num茅ricos / formateo ===== */\r\nconst toNumberOrUndef = (v) => {\r\n  if (v === '' || v == null) return undefined;\r\n  const n =\r\n    typeof v === 'number'\r\n      ? v\r\n      : parseFloat(String(v).replace(/[^\\d.-]/g, ''));\r\n  return Number.isFinite(n) ? n : undefined;\r\n};\r\n\r\nconst formatWithCommas = (v, decimals = 2) => {\r\n  const n = toNumberOrUndef(v);\r\n  if (n == null) return '';\r\n  const opts = Number.isInteger(n)\r\n    ? { minimumFractionDigits: 0, maximumFractionDigits: 0 }\r\n    : { minimumFractionDigits: decimals, maximumFractionDigits: decimals };\r\n  return n.toLocaleString('es-MX', opts);\r\n};\r\n\r\nconst asStr = (v, fallback = '') => (v == null ? fallback : String(v));\r\nconst asArr = (v) =>\r\n  Array.isArray(v) ? v : v == null ? [] : [String(v)];\r\nconst rateSafe = (rate) =>\r\n  Number.isFinite(Number(rate)) ? Number(rate) : 0;\r\n\r\n/* ===================== COMPONENTE ===================== */\r\nconst EditProjectModal = ({ isOpen = false, onClose, onSubmit, project }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [serverProject, setServerProject] = useState(null);\r\n\r\n  const { persons, getPersons } = usePerson();\r\n  const [clientOptions, setClientOptions] = useState([]);\r\n\r\n  const { handleError, handleSuccess } = useErrorHandler();\r\n  const { showError } = useNotifications();\r\n\r\n  const [isEquipmentInUSD, setIsEquipmentInUSD] = useState(false);\r\n  const [exchangeRate, setExchangeRate] = useState(18);\r\n  const [uiEquipmentUSD, setUiEquipmentUSD] = useState('');\r\n  const [loadingFx, setLoadingFx] = useState(false);\r\n  const [fxError, setFxError] = useState(null);\r\n\r\n  /* ============= ESTADOS/MUNICIPIOS (UBICACIN) ============= */\r\n  const { estados, loading: loadingEstados, error: errorEstados } = useEstados();\r\n  const [selectedEstadoCode, setSelectedEstadoCode] = useState('');\r\n  const {\r\n    municipios,\r\n    loading: loadingMunicipios,\r\n    error: errorMunicipios,\r\n  } = useMunicipios(selectedEstadoCode || '');\r\n\r\n  /* ============= CARGA DE CLIENTES ============= */\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const resp = await clientService.getClients();\r\n        const list = Array.isArray(resp?.data)\r\n          ? resp.data\r\n          : Array.isArray(resp)\r\n          ? resp\r\n          : [];\r\n        const opts = list.map((c) => ({\r\n          value: c.id,\r\n          label: c.empresa || c.nombre || c.contacto || '',\r\n        }));\r\n        if (mounted) setClientOptions(opts);\r\n      } catch (e) {\r\n        handleError(e, 'Error cargando clientes');\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [isOpen, handleError]);\r\n\r\n  /* ============= CARGA DE PERSONAL (solo 1 vez) ============= */\r\n  const fetchedPersonsRef = useRef(false);\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    if (fetchedPersonsRef.current) return;\r\n    fetchedPersonsRef.current = true;\r\n    (async () => {\r\n      try {\r\n        await getPersons();\r\n      } catch (e) {\r\n        handleError(e, 'Error cargando empleados');\r\n      }\r\n    })();\r\n    return () => {\r\n      fetchedPersonsRef.current = false;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isOpen]);\r\n\r\n  /* ============= CARGA DEL PROYECTO COMPLETO ============= */\r\n  useEffect(() => {\r\n    if (!isOpen || !project?.id) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const resp = await proyectoService.getProyectoById(project.id);\r\n        const doc = resp?.data ?? resp;\r\n        if (mounted) setServerProject(doc || project);\r\n      } catch (e) {\r\n        handleError(e, 'Error cargando proyecto');\r\n        if (mounted) setServerProject(project || null);\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [isOpen, project?.id, handleError, project]);\r\n\r\n  /* ============= NORMALIZACIN DEL PROYECTO PARA EL FORM ============= */\r\n  const normalized = useMemo(() => {\r\n    const doc = serverProject || project || {};\r\n    const p = doc.presupuesto || {};\r\n    const cron = doc.cronograma || {};\r\n    const id = doc.id || project?.id;\r\n\r\n    // ubicacion puede venir:\r\n    // 1) objeto { estado, municipio, direccion }\r\n    // 2) string simple\r\n    // 3) string JSON\r\n    let rawUbicacion = doc.ubicacion;\r\n    if (typeof rawUbicacion === 'string') {\r\n      const trimmed = rawUbicacion.trim();\r\n      if (trimmed.startsWith('{') && trimmed.endsWith('}')) {\r\n        try {\r\n          const parsed = JSON.parse(trimmed);\r\n          if (parsed && typeof parsed === 'object') {\r\n            rawUbicacion = parsed;\r\n          }\r\n        } catch {\r\n          // ignorar, se usa como string normal abajo\r\n        }\r\n      }\r\n    }\r\n\r\n    let ubicacion = {\r\n      estado: '',\r\n      municipio: '',\r\n      direccion: '',\r\n    };\r\n\r\n    if (rawUbicacion && typeof rawUbicacion === 'object') {\r\n      ubicacion = {\r\n        estado:\r\n          rawUbicacion.estado ||\r\n          rawUbicacion.estadoCode ||\r\n          '',\r\n        municipio:\r\n          rawUbicacion.municipio ||\r\n          rawUbicacion.municipioNombre ||\r\n          '',\r\n        direccion:\r\n          rawUbicacion.direccion ||\r\n          rawUbicacion.direcci贸n ||\r\n          rawUbicacion.direccionCompleta ||\r\n          '',\r\n      };\r\n    } else if (typeof rawUbicacion === 'string') {\r\n      ubicacion = {\r\n        estado: '',\r\n        municipio: '',\r\n        direccion: rawUbicacion || '',\r\n      };\r\n    }\r\n\r\n    const cachedEstado = uiEstadoCache.get(id);\r\n    const estadoUi = cachedEstado || (doc.estado || 'planificaci贸n');\r\n\r\n    return {\r\n      id,\r\n      codigo: doc.codigo || '',\r\n      tipoProyecto: doc.tipoProyecto || '',\r\n      clienteId: doc?.cliente?.id ?? '',\r\n      clienteNombre:\r\n        doc?.cliente?.nombre || doc?.cliente?.empresa || '',\r\n      nombre: doc.nombre || doc.nombreProyecto || '',\r\n      departamento: doc.departamento || '',\r\n      prioridad: doc.prioridad || '',\r\n      estado: estadoUi,\r\n      ubicacion,\r\n      descripcion: doc.descripcion || '',\r\n      cronograma: {\r\n        fechaInicio: cron?.fechaInicio || '',\r\n        fechaFin: cron?.fechaFin || '',\r\n      },\r\n      personalAsignado: Array.isArray(doc?.personalAsignado)\r\n        ? doc.personalAsignado\r\n        : [],\r\n      presupuesto: {\r\n        manoObra: toNumberOrUndef(p.manoObra),\r\n        piezas: toNumberOrUndef(p.piezas),\r\n        equipos: toNumberOrUndef(p.equipos),\r\n        equipoDolares: toNumberOrUndef(p.equipoDolares),\r\n        materiales: toNumberOrUndef(p.materiales),\r\n        transporte: toNumberOrUndef(p.transporte),\r\n        otros: toNumberOrUndef(p.otros),\r\n        _metaEquipos: {\r\n          capturadoEn: p?._metaEquipos?.capturadoEn || 'MXN',\r\n        },\r\n      },\r\n    };\r\n  }, [serverProject, project]);\r\n\r\n  /* ============= STATE DEL FORM (CONTROLADO) ============= */\r\n  const [formData, setFormData] = useState(normalized);\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setFormData(normalized);\r\n      setSelectedEstadoCode(normalized?.ubicacion?.estado || '');\r\n    }\r\n  }, [normalized, isOpen]);\r\n\r\n  /* ============= FX / TIPO DE CAMBIO USDMXN ============= */\r\n  const fetchUsdMxnRate = useCallback(async () => {\r\n    try {\r\n      setFxError(null);\r\n      setLoadingFx(true);\r\n\r\n      const apiResp = await proyectoService.getCurrencyRates({\r\n        base: 'USD',\r\n        currencies: ['MXN'],\r\n      });\r\n\r\n      const mxnInfo = apiResp?.data?.MXN;\r\n      const rate = Number(mxnInfo?.value || 0);\r\n\r\n      if (rate > 0) {\r\n        setExchangeRate(rate);\r\n        return rate;\r\n      } else {\r\n        const msg = 'No lleg贸 una tasa v谩lida.';\r\n        setFxError(msg);\r\n        showError(msg);\r\n        return null;\r\n      }\r\n    } catch (e) {\r\n      const msg = e?.message || 'Error llamando currencyapi';\r\n      setFxError(msg);\r\n      handleError(e, 'Tipo de cambio');\r\n      return null;\r\n    } finally {\r\n      setLoadingFx(false);\r\n    }\r\n  }, [handleError, showError]);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    const cap = formData?.presupuesto?._metaEquipos?.capturadoEn;\r\n    if (cap === 'USD') {\r\n      setIsEquipmentInUSD(true);\r\n    } else {\r\n      setIsEquipmentInUSD(false);\r\n      setUiEquipmentUSD('');\r\n    }\r\n  }, [isOpen, formData?.presupuesto?._metaEquipos?.capturadoEn]);\r\n\r\n  useEffect(() => {\r\n    if (!isEquipmentInUSD) return;\r\n    const mxn = toNumberOrUndef(formData?.presupuesto?.equipos) ?? 0;\r\n    const rate = rateSafe(exchangeRate);\r\n    const usd = rate ? mxn / rate : 0;\r\n    setUiEquipmentUSD(usd ? formatWithCommas(usd, 2) : '0.00');\r\n  }, [isEquipmentInUSD, exchangeRate, formData?.presupuesto?.equipos]);\r\n\r\n  /* ============= OPTIONS DE PERSONAL PARA EL MULTISELECT ============= */\r\n  const personnelOptions = useMemo(() => {\r\n    const fromPersons = Array.isArray(persons)\r\n      ? persons.map((p) => {\r\n          const nombre =\r\n            p?.nombreCompleto ||\r\n            [p?.nombre, p?.apellidoPaterno, p?.apellidoMaterno]\r\n              .filter(Boolean)\r\n              .join(' ') ||\r\n            p?.nombre ||\r\n            p?.name ||\r\n            '';\r\n          const puesto = p?.puesto || p?.rol || p?.cargo;\r\n          const etiqueta = puesto ? `${nombre}  ${puesto}` : nombre;\r\n          return { value: etiqueta, label: etiqueta };\r\n        })\r\n      : [];\r\n\r\n    const existing = Array.isArray(formData?.personalAsignado)\r\n      ? formData.personalAsignado.map((s) => ({\r\n          value: s,\r\n          label: s,\r\n        }))\r\n      : [];\r\n\r\n    const seen = new Set();\r\n    return [...existing, ...fromPersons].filter((o) =>\r\n      seen.has(o.value) ? false : (seen.add(o.value), true)\r\n    );\r\n  }, [persons, formData?.personalAsignado]);\r\n\r\n  /* ============= TOTAL MXN DEL PRESUPUESTO MOSTRADO ============= */\r\n  const totalMXN = useMemo(() => {\r\n    const b = formData?.presupuesto || {};\r\n    const sum = (...vals) =>\r\n      vals.reduce(\r\n        (acc, v) => acc + (toNumberOrUndef(v) ?? 0),\r\n        0\r\n      );\r\n    return sum(\r\n      b.manoObra,\r\n      b.piezas,\r\n      b.equipos,\r\n      b.materiales,\r\n      b.transporte,\r\n      b.otros\r\n    );\r\n  }, [formData]);\r\n\r\n  /* ============= HANDLERS DEL FORM ============= */\r\n  const handle = (k, v) => {\r\n    setFormData((s) => ({ ...s, [k]: v }));\r\n    if (errors[k]) {\r\n      setErrors((e) => ({ ...e, [k]: undefined }));\r\n    }\r\n  };\r\n\r\n  const handleUbicacion = (field, value) => {\r\n    setFormData((s) => ({\r\n      ...s,\r\n      ubicacion: {\r\n        ...(s.ubicacion || { estado: '', municipio: '', direccion: '' }),\r\n        [field]: value,\r\n      },\r\n    }));\r\n    const errorKey =\r\n      field === 'estado'\r\n        ? 'ubicacionEstado'\r\n        : field === 'municipio'\r\n        ? 'ubicacionMunicipio'\r\n        : 'ubicacionDireccion';\r\n    if (errors[errorKey]) {\r\n      setErrors((e) => ({ ...e, [errorKey]: undefined }));\r\n    }\r\n  };\r\n\r\n  const handleP = (k, raw) => {\r\n    const n =\r\n      raw === '' || raw == null ? undefined : toNumberOrUndef(raw);\r\n    setFormData((s) => ({\r\n      ...s,\r\n      presupuesto: { ...s.presupuesto, [k]: n },\r\n    }));\r\n  };\r\n\r\n  const toggleUSD = (checked) => {\r\n    setIsEquipmentInUSD(checked);\r\n    setFormData((s) => ({\r\n      ...s,\r\n      presupuesto: {\r\n        ...s.presupuesto,\r\n        _metaEquipos: {\r\n          capturadoEn: checked ? 'USD' : 'MXN',\r\n        },\r\n      },\r\n    }));\r\n\r\n    if (!checked) {\r\n      setUiEquipmentUSD('');\r\n    }\r\n  };\r\n\r\n  /* ============= VALIDACIN ============= */\r\n  const validate = () => {\r\n    const e = {};\r\n    if (!formData.nombre) e.nombre = 'Requerido';\r\n    if (!formData.departamento)\r\n      e.departamento = 'Requerido';\r\n\r\n    const ub = formData.ubicacion || {};\r\n    if (!ub.estado) e.ubicacionEstado = 'Requerido';\r\n    if (!ub.municipio) e.ubicacionMunicipio = 'Requerido';\r\n    if (!ub.direccion) e.ubicacionDireccion = 'Requerido';\r\n\r\n    if (!ALLOWED_ESTADOS.includes(formData.estado))\r\n      e.estado = 'Estado inv谩lido';\r\n    if (isEquipmentInUSD && !(exchangeRate > 0))\r\n      e.exchangeRate = 'Tipo de cambio inv谩lido';\r\n\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  };\r\n\r\n  /* ============= ARMAR PAYLOAD PARA updateProyecto ============= */\r\n  const buildPayloadForUpdate = () => {\r\n    const p = formData.presupuesto || {};\r\n    const pres = {};\r\n\r\n    [\r\n      'manoObra',\r\n      'piezas',\r\n      'equipos',\r\n      'equipoDolares',\r\n      'materiales',\r\n      'transporte',\r\n      'otros',\r\n    ].forEach((k) => {\r\n      const val = toNumberOrUndef(p[k]);\r\n      if (val != null) pres[k] = val;\r\n    });\r\n\r\n    pres._metaEquipos = {\r\n      capturadoEn: isEquipmentInUSD ? 'USD' : 'MXN',\r\n    };\r\n\r\n    if (isEquipmentInUSD) {\r\n      const mxn = toNumberOrUndef(p.equipos) ?? 0;\r\n      const rate = rateSafe(exchangeRate);\r\n      const usd = rate ? mxn / rate : undefined;\r\n      if (usd != null) pres.equipoDolares = usd;\r\n    }\r\n\r\n    const ub = formData.ubicacion || {};\r\n\r\n    return {\r\n      nombre: formData.nombre,\r\n      departamento: formData.departamento,\r\n      prioridad: formData.prioridad,\r\n      ubicacion: {\r\n        estado: ub.estado || '',\r\n        municipio: ub.municipio || '',\r\n        direccion: ub.direccion || '',\r\n      },\r\n      descripcion: formData.descripcion,\r\n      personalAsignado: Array.isArray(\r\n        formData.personalAsignado\r\n      )\r\n        ? formData.personalAsignado\r\n        : [],\r\n      estado: formData.estado,\r\n      presupuesto: pres,\r\n    };\r\n  };\r\n\r\n  /* ============= SUBMIT ============= */\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validate()) return;\r\n    setIsSubmitting(true);\r\n    try {\r\n      const payload = buildPayloadForUpdate();\r\n      await proyectoService.updateProyecto(\r\n        formData.id,\r\n        payload\r\n      );\r\n\r\n      uiEstadoCache.set(formData.id, formData.estado);\r\n\r\n      if (onSubmit) {\r\n        // Deja que el padre decida si muestra mensaje de 茅xito\r\n        onSubmit({\r\n          id: formData.id,\r\n          ...payload,\r\n          _uiEstado: formData.estado,\r\n        });\r\n      } else {\r\n        // Solo mostramos el mensaje aqu铆 si no hay onSubmit\r\n        handleSuccess('update', 'Proyecto');\r\n      }\r\n\r\n      onClose && onClose();\r\n    } catch (err) {\r\n      console.error('Error actualizando proyecto:', err);\r\n      handleError(err, 'Error actualizando proyecto');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  /* ============= LABEL DEL CLIENTE ============= */\r\n  const b = formData.presupuesto || {};\r\n  const clientLabel = useMemo(() => {\r\n    if (!formData.clienteId) return '';\r\n    const found = clientOptions.find(\r\n      (o) => o.value === formData.clienteId\r\n    );\r\n    return (\r\n      found?.label ||\r\n      formData.clienteNombre ||\r\n      formData.clienteId\r\n    );\r\n  }, [clientOptions, formData.clienteId, formData.clienteNombre]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const ub = formData.ubicacion || {\r\n    estado: '',\r\n    municipio: '',\r\n    direccion: '',\r\n  };\r\n\r\n  /* ===================== RENDER ===================== */\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card border border-border rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">\r\n              Editar Proyecto\r\n            </h2>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Actualice la informaci贸n permitida\r\n            </p>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n            disabled={isSubmitting}\r\n          >\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci贸n B谩sica */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Informaci贸n B谩sica\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"C贸digo (solo lectura)\"\r\n              value={asStr(formData?.codigo, '')}\r\n              onChange={() => {}}\r\n              disabled\r\n            />\r\n\r\n            <Input\r\n              label=\"Tipo de Proyecto (solo lectura)\"\r\n              value={asStr(formData?.tipoProyecto, '')}\r\n              onChange={() => {}}\r\n              disabled\r\n            />\r\n\r\n            <Input\r\n              label=\"Cliente (solo lectura)\"\r\n              value={asStr(clientLabel, '')}\r\n              onChange={() => {}}\r\n              disabled\r\n            />\r\n\r\n            <Input\r\n              label=\"Nombre\"\r\n              type=\"text\"\r\n              placeholder=\"Ej: Instalaci贸n HVAC Edificio Central\"\r\n              value={asStr(formData?.nombre)}\r\n              onChange={(e) =>\r\n                handle('nombre', e.target.value)\r\n              }\r\n              error={errors?.nombre}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Departamento Responsable\"\r\n              options={departmentOptions}\r\n              value={asStr(formData?.departamento)}\r\n              onChange={(value) =>\r\n                handle('departamento', value)\r\n              }\r\n              error={errors?.departamento}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={asStr(formData?.prioridad)}\r\n              onChange={(value) =>\r\n                handle('prioridad', value)\r\n              }\r\n              error={errors?.prioridad}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Estado\"\r\n              options={estadoOptionsBackend}\r\n              value={asStr(formData?.estado)}\r\n              onChange={(value) =>\r\n                handle('estado', value)\r\n              }\r\n              error={errors?.estado}\r\n              required\r\n            />\r\n\r\n            {/* Ubicaci贸n */}\r\n            <div className=\"md:col-span-2 mt-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n                Ubicaci贸n del Proyecto\r\n              </h3>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Seleccione estado y municipio, luego escriba la direcci贸n completa del sitio.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 items-center\">\r\n              <div className=\"flex flex-col justify-end h-full\">\r\n                <Select\r\n                  label={\r\n                    <>\r\n                      Estado <span className=\"text-destructive\">*</span>\r\n                    </>\r\n                  }\r\n                  value={ub.estado}\r\n                  onChange={(value) => {\r\n                    handleUbicacion('estado', value);\r\n                    handleUbicacion('municipio', '');\r\n                    setSelectedEstadoCode(value || '');\r\n                  }}\r\n                  options={\r\n                    estados\r\n                      ? [\r\n                          { value: '', label: 'Selecciona un estado' },\r\n                          ...estados.map((e) => ({\r\n                            value: e.code,\r\n                            label: e.name,\r\n                          })),\r\n                        ]\r\n                      : []\r\n                  }\r\n                  loading={loadingEstados}\r\n                  error={errors?.ubicacionEstado}\r\n                  required\r\n                  disabled={loadingEstados || !!errorEstados}\r\n                  placeholder={\r\n                    loadingEstados ? 'Cargando estados...' : 'Selecciona un estado'\r\n                  }\r\n                  searchable\r\n                  className=\"h-12 md:h-14 w-full text-base\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex flex-col justify-end h-full\">\r\n                <Select\r\n                  label={\r\n                    <>\r\n                      Municipio <span className=\"text-destructive\">*</span>\r\n                    </>\r\n                  }\r\n                  value={ub.municipio}\r\n                  onChange={(value) =>\r\n                    handleUbicacion('municipio', value)\r\n                  }\r\n                  options={\r\n                    ub.estado === ''\r\n                      ? [{ value: '', label: 'Selecciona un estado primero' }]\r\n                      : loadingMunicipios\r\n                      ? [{ value: '', label: 'Cargando municipios...' }]\r\n                      : errorMunicipios\r\n                      ? [{ value: '', label: 'Error al cargar municipios' }]\r\n                      : [\r\n                          { value: '', label: 'Selecciona un municipio' },\r\n                          ...(municipios\r\n                            ? Object.values(municipios.municipios || {}).map(\r\n                                (m) => ({\r\n                                  value: m,\r\n                                  label: m,\r\n                                })\r\n                              )\r\n                            : []),\r\n                        ]\r\n                  }\r\n                  loading={loadingMunicipios}\r\n                  error={errors?.ubicacionMunicipio}\r\n                  required\r\n                  disabled={\r\n                    ub.estado === '' ||\r\n                    loadingMunicipios ||\r\n                    !!errorMunicipios\r\n                  }\r\n                  placeholder={\r\n                    ub.estado === ''\r\n                      ? 'Selecciona un estado primero'\r\n                      : loadingMunicipios\r\n                      ? 'Cargando municipios...'\r\n                      : 'Selecciona un municipio'\r\n                  }\r\n                  searchable\r\n                  className=\"h-12 md:h-14 w-full text-base\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Direcci贸n\"\r\n                required\r\n                value={ub.direccion}\r\n                onChange={(e) =>\r\n                  handleUbicacion('direccion', e?.target?.value)\r\n                }\r\n                error={errors?.ubicacionDireccion}\r\n                placeholder=\"Direcci贸n completa\"\r\n                className=\"h-12 md:h-14 w-full text-base\"\r\n              />\r\n            </div>\r\n\r\n            {/* Descripci贸n */}\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                Descripci贸n del Proyecto\r\n              </label>\r\n              <textarea\r\n                rows={4}\r\n                placeholder=\"Describa los objetivos, alcance y detalles importantes del proyecto...\"\r\n                value={asStr(formData?.descripcion)}\r\n                onChange={(e) =>\r\n                  handle('descripcion', e.target.value)\r\n                }\r\n                className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\r\n              />\r\n            </div>\r\n\r\n            {/* Desglose de Presupuesto */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Desglose de Presupuesto\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Mano de Obra (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.manoObra)}\r\n              onChange={(e) =>\r\n                handleP('manoObra', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Input\r\n              label=\"Piezas (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.piezas)}\r\n              onChange={(e) =>\r\n                handleP('piezas', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            {/* Equipos con toggle USD */}\r\n            <div className=\"flex flex-col gap-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                  {isEquipmentInUSD\r\n                    ? 'Equipos (USD se convierte a MXN)'\r\n                    : 'Equipos (MXN)'}\r\n                </label>\r\n                <label className=\"inline-flex items-center gap-2 text-sm text-foreground cursor-pointer select-none\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={isEquipmentInUSD}\r\n                    onChange={(e) =>\r\n                      toggleUSD(e.target.checked)\r\n                    }\r\n                    className=\"h-4 w-4 accent-primary cursor-pointer\"\r\n                  />\r\n                  Precio en d贸lares\r\n                </label>\r\n              </div>\r\n\r\n              <input\r\n                type=\"text\"\r\n                inputMode=\"decimal\"\r\n                placeholder={\r\n                  isEquipmentInUSD ? '0.00 USD' : '0.00 MXN'\r\n                }\r\n                value={\r\n                  isEquipmentInUSD\r\n                    ? uiEquipmentUSD\r\n                    : formatWithCommas(b?.equipos)\r\n                }\r\n                onChange={(e) =>\r\n                  isEquipmentInUSD\r\n                    ? undefined\r\n                    : handleP('equipos', e?.target?.value)\r\n                }\r\n                readOnly={isEquipmentInUSD}\r\n                className={`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${\r\n                  isEquipmentInUSD\r\n                    ? 'bg-muted cursor-not-allowed'\r\n                    : ''\r\n                }`}\r\n              />\r\n\r\n              {isEquipmentInUSD && (\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <div className=\"flex-1 min-w-[220px]\">\r\n                    <Input\r\n                      label=\"Tipo de cambio (MXN / USD)\"\r\n                      type=\"text\"\r\n                      inputMode=\"decimal\"\r\n                      value={formatWithCommas(exchangeRate, 4)}\r\n                      onChange={() => {}}\r\n                      readOnly\r\n                      disabled\r\n                    />\r\n                  </div>\r\n\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    onClick={fetchUsdMxnRate}\r\n                    loading={loadingFx}\r\n                    iconName=\"RefreshCcw\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    {loadingFx ? 'Actualizando' : 'Actualizar tipo de cambio'}\r\n                  </Button>\r\n\r\n                  <div className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                    Guardado en MXN:{' '}\r\n                    <span className=\"font-semibold\">\r\n                      ${formatWithCommas(b?.equipos, 2)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {fxError && (\r\n                    <div className=\"text-xs text-destructive\">\r\n                      {fxError}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Materiales (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.materiales)}\r\n              onChange={(e) =>\r\n                handleP('materiales', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Input\r\n              label=\"Transporte (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.transporte)}\r\n              onChange={(e) =>\r\n                handleP('transporte', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Input\r\n              label=\"Otros Gastos (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.otros)}\r\n              onChange={(e) =>\r\n                handleP('otros', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            {/* Total */}\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"bg-muted p-4 rounded-lg\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm font-medium text-foreground\">\r\n                    Total del Presupuesto (MXN):\r\n                  </span>\r\n                  <span className=\"text-lg font-semibold text-primary\">\r\n                    ${formatWithCommas(totalMXN, 2)} MXN\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cronograma (solo lectura) */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Cronograma\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Fecha de Inicio (solo lectura)\"\r\n              type=\"date\"\r\n              value={asStr(\r\n                formData?.cronograma?.fechaInicio,\r\n                ''\r\n              )}\r\n              onChange={() => {}}\r\n              disabled\r\n            />\r\n            <Input\r\n              label=\"Fecha de Finalizaci贸n (solo lectura)\"\r\n              type=\"date\"\r\n              value={asStr(\r\n                formData?.cronograma?.fechaFin,\r\n                ''\r\n              )}\r\n              onChange={() => {}}\r\n              disabled\r\n            />\r\n\r\n            {/* Asignaci贸n de Personal */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Asignaci贸n de Personal\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Select\r\n                label=\"Personal Asignado\"\r\n                options={personnelOptions}\r\n                value={asArr(formData?.personalAsignado).map(String)}\r\n                onChange={(value) =>\r\n                  handle(\r\n                    'personalAsignado',\r\n                    asArr(value).map(String)\r\n                  )\r\n                }\r\n                multiple\r\n                searchable\r\n                description=\"Seleccione el personal que trabajar谩 en este proyecto\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Acciones */}\r\n          <div className=\"flex justify-end gap-3 mt-8 pt-6 border-t border-border\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              loading={isSubmitting}\r\n              iconName=\"Save\"\r\n              iconPosition=\"left\"\r\n            >\r\n              {isSubmitting ? 'Guardando...' : 'Guardar Cambios'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProjectModal;\r\n","// hooks/useProyecto.js\r\nimport { useState, useCallback, useRef } from \"react\";\r\nimport proyectoService from \"../services/proyectoService\";\r\n\r\nconst extractList = (resp) => {\r\n  if (Array.isArray(resp)) return resp;\r\n  if (resp?.success && Array.isArray(resp?.data)) return resp.data;\r\n  if (Array.isArray(resp?.data?.items)) return resp.data.items;\r\n  if (Array.isArray(resp?.result)) return resp.result;\r\n  return [];\r\n};\r\n\r\nconst unwrap = (resp) =>\r\n  resp && typeof resp === \"object\" && \"data\" in resp ? resp.data : resp;\r\n\r\nconst useProyecto = () => {\r\n  const [proyectos, setProyectos] = useState([]);\r\n\r\n  // 猬锔 Estados separados\r\n  const [loadingList, setLoadingList] = useState(false);\r\n  const [loadingSave, setLoadingSave] = useState(false);\r\n  const [loadingDelete, setLoadingDelete] = useState(false);\r\n  const [loadingCurrency, setLoadingCurrency] = useState(false);\r\n\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchedOnceRef = useRef(false);\r\n  const proyectosLenRef = useRef(0); // para evitar dependencia del estado en callbacks\r\n\r\n  // Mantener sincronizado el len en un ref\r\n  proyectosLenRef.current = proyectos.length;\r\n\r\n  // ========= PROYECTOS (tu backend) =========\r\n  const getProyectos = useCallback(async ({ force = false, signal } = {}) => {\r\n    if (!force && fetchedOnceRef.current && proyectosLenRef.current > 0) {\r\n      return proyectos;\r\n    }\r\n\r\n    setLoadingList(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await proyectoService.getProyectos({ signal });\r\n      const list = extractList(resp);\r\n      setProyectos(list);\r\n      fetchedOnceRef.current = true;\r\n      return list;\r\n    } catch (err) {\r\n      if (err?.name !== \"AbortError\") {\r\n        console.error(\"Error en useProyecto.getProyectos:\", err);\r\n        setError(err);\r\n      }\r\n      throw err;\r\n    } finally {\r\n      setLoadingList(false);\r\n    }\r\n  }, []); // 猬锔 sin dependencia de `proyectos`\r\n\r\n  const getProyectoById = useCallback(async (id, { signal } = {}) => {\r\n    setError(null);\r\n    try {\r\n      const resp = await proyectoService.getProyectoById(id, { signal });\r\n      return unwrap(resp);\r\n    } catch (err) {\r\n      if (err?.name !== \"AbortError\") {\r\n        console.error(\"Error en useProyecto.getProyectoById:\", err);\r\n        setError(err);\r\n      }\r\n      throw err;\r\n    }\r\n  }, []);\r\n\r\n  const createProyecto = useCallback(\r\n    async (payload, { signal, refresh = false } = {}) => {\r\n      setLoadingSave(true);\r\n      setError(null);\r\n      try {\r\n        const resp = await proyectoService.createProyecto(payload, { signal });\r\n        const created = unwrap(resp);\r\n        if (created) {\r\n          setProyectos((prev) => [...prev, created]);\r\n          proyectosLenRef.current += 1;\r\n        }\r\n        if (refresh) {\r\n          // invalida cache y recarga lista desde backend\r\n          fetchedOnceRef.current = false;\r\n          await getProyectos({ force: true, signal });\r\n        }\r\n        return created;\r\n      } catch (err) {\r\n        if (err?.name !== \"AbortError\") {\r\n          console.error(\"Error en useProyecto.createProyecto:\", err);\r\n          setError(err);\r\n        }\r\n        throw err;\r\n      } finally {\r\n        setLoadingSave(false);\r\n      }\r\n    },\r\n    [getProyectos]\r\n  );\r\n\r\n  const updateProyecto = useCallback(\r\n    async (id, payload, { signal, refresh = false } = {}) => {\r\n      setLoadingSave(true);\r\n      setError(null);\r\n      try {\r\n        const resp = await proyectoService.updateProyecto(id, payload, {\r\n          signal,\r\n        });\r\n        const updated = unwrap(resp);\r\n\r\n        setProyectos((prev) =>\r\n          prev.map((p) =>\r\n            String(p.id ?? p._id) === String(id) ? { ...p, ...updated } : p\r\n          )\r\n        );\r\n\r\n        if (refresh) {\r\n          fetchedOnceRef.current = false;\r\n          await getProyectos({ force: true, signal });\r\n        }\r\n        return updated;\r\n      } catch (err) {\r\n        if (err?.name !== \"AbortError\") {\r\n          console.error(\"Error en useProyecto.updateProyecto:\", err);\r\n          setError(err);\r\n        }\r\n        throw err;\r\n      } finally {\r\n        setLoadingSave(false);\r\n      }\r\n    },\r\n    [getProyectos]\r\n  );\r\n\r\n  const deleteProyecto = useCallback(\r\n    async (id, { signal, refresh = false } = {}) => {\r\n      setLoadingDelete(true);\r\n      setError(null);\r\n      try {\r\n        const resp = await proyectoService.deleteProyecto(id, { signal });\r\n        setProyectos((prev) =>\r\n          prev.filter((p) => String(p.id ?? p._id) !== String(id))\r\n        );\r\n        proyectosLenRef.current = Math.max(0, proyectosLenRef.current - 1);\r\n\r\n        if (refresh) {\r\n          fetchedOnceRef.current = false;\r\n          await getProyectos({ force: true, signal });\r\n        }\r\n\r\n        return unwrap(resp) ?? true;\r\n      } catch (err) {\r\n        if (err?.name !== \"AbortError\") {\r\n          console.error(\"Error en useProyecto.deleteProyecto:\", err);\r\n          setError(err);\r\n        }\r\n        throw err;\r\n      } finally {\r\n        setLoadingDelete(false);\r\n      }\r\n    },\r\n    [getProyectos]\r\n  );\r\n\r\n  // ========= STATS CACHED (dashboard r谩pido) =========\r\n  // GET /proyectos/stats/get\r\n  const getCachedStats = useCallback(async ({ signal } = {}) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await proyectoService.getCachedStats({ signal });\r\n      // aqu铆 NO tocamos proyectos, esto es data de m茅tricas.\r\n      // Puede venir como { data: {...} } o directo {...}\r\n      return unwrap(resp);\r\n    } catch (err) {\r\n      console.error(\"Error en useProyecto.getCachedStats:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // ========= (currencyapi.com) =========\r\n  const getCurrencyRates = useCallback(\r\n    async ({ base = \"USD\", currencies = [] } = {}, { signal } = {}) => {\r\n      setLoadingCurrency(true);\r\n      setError(null);\r\n      try {\r\n        const resp = await proyectoService.getCurrencyRates(\r\n          { base, currencies },\r\n          { signal }\r\n        );\r\n        return resp; // JSON completo\r\n      } catch (err) {\r\n        if (err?.name !== \"AbortError\") {\r\n          console.error(\"Error en useProyecto.getCurrencyRates:\", err);\r\n          setError(err);\r\n        }\r\n        throw err;\r\n      } finally {\r\n        setLoadingCurrency(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  /**\r\n   * Devuelve { MXN: 18.2, EUR: 0.92, ... }\r\n   */\r\n  const getCurrencyRatesMap = useCallback(\r\n    async ({ base = \"USD\", currencies = [] } = {}, { signal } = {}) => {\r\n      setLoadingCurrency(true);\r\n      setError(null);\r\n      try {\r\n        const map = await proyectoService.getCurrencyRatesMap(\r\n          { base, currencies },\r\n          { signal }\r\n        );\r\n        return map;\r\n      } catch (err) {\r\n        if (err?.name !== \"AbortError\") {\r\n          console.error(\"Error en useProyecto.getCurrencyRatesMap:\", err);\r\n          setError(err);\r\n        }\r\n        throw err;\r\n      } finally {\r\n        setLoadingCurrency(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  return {\r\n    proyectos,\r\n    // estados de carga granulares\r\n    loadingList,\r\n    loadingSave,\r\n    loadingDelete,\r\n    loadingCurrency,\r\n    // compat: puedes exponer un `loading` general si quieres\r\n    loading: loadingList || loadingSave || loadingDelete || loadingCurrency,\r\n\r\n    error,\r\n\r\n    // acciones backend propio\r\n    getProyectos,\r\n    getProyectoById,\r\n    createProyecto,\r\n    updateProyecto,\r\n    deleteProyecto,\r\n\r\n    // dashboard / KPIs cacheados\r\n    getCachedStats,\r\n\r\n    // acciones API externa (currencyapi)\r\n    getCurrencyRates,\r\n    getCurrencyRatesMap,\r\n  };\r\n};\r\n\r\nexport default useProyecto;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ProjectFilters from './components/ProjectFilters';\r\nimport ProjectTable from './components/ProjectTable';\r\nimport ProjectTimeline from './components/ProjectTimeline';\r\nimport ProjectQuotations from './components/ProjectQuotations';\r\nimport ProjectStats from './components/ProjectStats';\r\nimport CreateProjectModal from './components/CreateProjectModal';\r\nimport EditProjectModal from './components/EditProjectModal';\r\nimport useProyect from '../../hooks/useProyect';\r\n\r\n// 猬锔 trae tus notificaciones\r\nimport { useErrorHandler, useNotifications } from 'context/NotificationContext';\r\n\r\n/* ====== Cache local para estado UI ====== */\r\nconst UI_ESTADO_KEY = 'proyectos_ui_estado_v1';\r\nconst uiEstadoCache = {\r\n  _read() { try { return JSON.parse(localStorage.getItem(UI_ESTADO_KEY)) || {}; } catch { return {}; } },\r\n  get(id) { if (!id) return null; const m = this._read(); return m[id] || null; },\r\n  set(id, estado) { if (!id) return; const m = this._read(); if (estado) m[id] = estado; else delete m[id]; localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m)); },\r\n  bulkMergeFromApi(list=[]) {\r\n    const m = this._read(); let changed = false;\r\n    list.forEach(p => {\r\n      const id = p?.id ?? p?._id; if (!id) return;\r\n      if (!m[id]) { const def = backendToUiDefault(p?.estado); if (def) { m[id] = def; changed = true; } }\r\n    });\r\n    if (changed) localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m));\r\n  }\r\n};\r\nconst backendToUiDefault = (apiEstado) => {\r\n  const v = String(apiEstado || '').toLowerCase();\r\n  if (v === 'en proceso') return 'en proceso';\r\n  if (v === 'activo') return 'planificaci贸n';\r\n  return 'planificaci贸n';\r\n};\r\nconst mapUiToBackend = (uiEstado) => {\r\n  const v = String(uiEstado || '').toLowerCase();\r\n  return v === 'en proceso' ? 'en proceso' : 'activo';\r\n};\r\n\r\nconst ProjectManagement = () => {\r\n  const {\r\n    proyectos: projects,\r\n    loading: isLoading,\r\n    getProyectos,\r\n    updateProyecto,\r\n  } = useProyect();\r\n\r\n  const { handleError, handleSuccess } = useErrorHandler();\r\n  const { showWarning } = useNotifications();\r\n\r\n  const [filteredProjects, setFilteredProjects] = useState([]);\r\n  const [activeView, setActiveView] = useState('table');\r\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n\r\n  useEffect(() => { getProyectos(); }, []);\r\n  useEffect(() => {\r\n    const arr = Array.isArray(projects) ? projects : [];\r\n    uiEstadoCache.bulkMergeFromApi(arr);\r\n    setFilteredProjects(arr);\r\n  }, [projects]);\r\n\r\n  /* ====== filtros */\r\n  const norm = (s) => (s ?? '').toString().normalize('NFD')\r\n    .replace(/[\\u0300-\\u036f]/g, '')\r\n    .toLowerCase()\r\n    .trim()\r\n    .replace(/\\s+/g, ' ');\r\n\r\n  const canonicalEstado = (raw) => {\r\n    const v = norm(raw);\r\n    if (v.includes('planific')) return 'planificacion';\r\n    if (v.includes('en proceso') || v.includes('progress')) return 'en proceso';\r\n    if (v.includes('pausa') || v.includes('hold')) return 'en pausa';\r\n    if (v.includes('revision') || v.includes('review')) return 'en revision';\r\n    if (v.includes('complet')) return 'completado';\r\n    if (v.includes('cancel')) return 'cancelado';\r\n    return v;\r\n  };\r\n\r\n  const handleFiltersChange = (filters) => {\r\n    let filtered = Array.isArray(projects) ? [...projects] : [];\r\n\r\n    if (filters?.search) {\r\n      const q = norm(filters.search);\r\n      filtered = filtered.filter(p =>\r\n        norm(p?.nombre)?.includes(q) ||\r\n        norm(p?.codigo)?.includes(q) ||\r\n        norm(p?.cliente?.nombre)?.includes(q)\r\n      );\r\n    }\r\n\r\n    if (filters?.status) {\r\n      filtered = filtered.filter(p =>\r\n        canonicalEstado(uiEstadoCache.get(p.id) || p.estado) === canonicalEstado(filters.status)\r\n      );\r\n    }\r\n\r\n    setFilteredProjects(filtered);\r\n  };\r\n\r\n  const handleEditProject = (project) => {\r\n    const id = project?.id ?? project?._id;\r\n    setSelectedProject({ ...project, id });\r\n    setIsEditModalOpen(true);\r\n  };\r\n\r\n  const handleStatusUpdate = async (projectId, newStatusUi) => {\r\n    try {\r\n      const estadoBackend = mapUiToBackend(newStatusUi);\r\n      await updateProyecto(projectId, { estado: estadoBackend });\r\n      uiEstadoCache.set(projectId, newStatusUi);\r\n      await getProyectos({ force: true });\r\n\r\n      handleSuccess('update', 'Proyecto');\r\n    } catch (error) {\r\n      handleError(error, 'Error al actualizar estado');\r\n    }\r\n  };\r\n\r\n  const handleUpdateProject = async () => {\r\n    try {\r\n      await getProyectos({ force: true });\r\n      handleSuccess('update', 'Proyecto');\r\n      setSelectedProject(null);\r\n      setIsEditModalOpen(false);\r\n    } catch (err) {\r\n      handleError(err, 'Error al actualizar');\r\n    }\r\n  };\r\n\r\n  /* ===== Exportar ===== */\r\n  const handleExportFromFilters = () => {\r\n    if (!filteredProjects?.length) {\r\n      showWarning('No hay proyectos para exportar');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const headers = ['C贸digo','Nombre','Cliente','Estado','Prioridad','Presupuesto','Inicio','Fin'];\r\n\r\n      const rows = filteredProjects.map(p =>\r\n        [\r\n          p.codigo,\r\n          p.nombre,\r\n          p?.cliente?.nombre,\r\n          p.estado,\r\n          p.prioridad,\r\n          p.presupuesto?.total,\r\n          new Date(p?.cronograma?.fechaInicio)?.toLocaleDateString('es-MX'),\r\n          new Date(p?.cronograma?.fechaFin)?.toLocaleDateString('es-MX'),\r\n        ]\r\n          .map(v => `\"${String(v ?? '').replace(/\"/g, '\"\"')}\"`)\r\n          .join(',')\r\n      );\r\n\r\n      const csv = [headers.join(','), ...rows].join('\\n');\r\n      const blob = new Blob([csv], { type:'text/csv;charset=utf-8;' });\r\n      const a = document.createElement('a');\r\n      a.href = URL.createObjectURL(blob);\r\n      a.download = `proyectos_${new Date().toISOString().slice(0,10)}.csv`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n\r\n      handleSuccess('export', 'Proyectos');\r\n    } catch (e) {\r\n      handleError(e, 'Error al exportar proyectos');\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando proyectos...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n\r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n\r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Gesti贸n de Proyectos</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                  Administre el ciclo completo de proyectos HVAC desde la planificaci贸n hasta el cierre\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                <div className=\"flex bg-muted rounded-lg p-1\">\r\n                  {[ \r\n                    { value: 'table', label: 'Tabla', icon: 'Table' },\r\n                    { value: 'timeline', label: 'Cronograma', icon: 'Calendar' },\r\n                    { value: 'quotations', label: 'Cotizaciones', icon: 'FileText' },\r\n                  ].map(option => (\r\n                    <button\r\n                      key={option.value}\r\n                      onClick={() => setActiveView(option.value)}\r\n                      className={`flex items-center space-x-2 px-3 py-2 rounded-md transition-smooth\r\n                        ${activeView === option.value\r\n                          ? 'bg-primary text-primary-foreground'\r\n                          : 'text-muted-foreground hover:text-foreground'}`}\r\n                    >\r\n                      <Icon name={option.icon} size={16} />\r\n                      <span className=\"hidden sm:inline text-sm\">{option.label}</span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n\r\n                <Button onClick={() => setIsCreateModalOpen(true)} iconName=\"Plus\" iconPosition=\"left\">\r\n                  Nuevo Proyecto\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/*  ESTADSTICAS SE MANTIENEN */}\r\n            {activeView !== 'stats' && filteredProjects?.length > 0 && (\r\n              <ProjectStats projects={filteredProjects} />\r\n            )}\r\n\r\n            {/* Filtros */}\r\n            {activeView === 'table' && (\r\n              <ProjectFilters\r\n                onFiltersChange={handleFiltersChange}\r\n                totalProjects={projects?.length}\r\n                filteredProjects={filteredProjects?.length}\r\n                onExport={handleExportFromFilters}\r\n              />\r\n            )}\r\n\r\n            <div className=\"space-y-6\">\r\n              {activeView === 'table' && filteredProjects?.length > 0 && (\r\n                <ProjectTable\r\n                  projects={filteredProjects}\r\n                  onProjectSelect={handleEditProject}\r\n                  onStatusUpdate={handleStatusUpdate}\r\n                />\r\n              )}\r\n\r\n              {activeView === 'timeline' && (\r\n                <ProjectTimeline\r\n                  projects={filteredProjects}\r\n                  onGenerateReport={() => {}}\r\n                />\r\n              )}\r\n\r\n              {activeView === 'quotations' && filteredProjects?.length > 0 && (\r\n                <ProjectQuotations projects={filteredProjects} />\r\n              )}\r\n\r\n              {filteredProjects?.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <Icon name=\"Filter\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n                    No se encontraron proyectos con tus filtros\r\n                  </h3>\r\n                  <p className=\"text-muted-foreground mb-6\">\r\n                    Intenta con otros filtros o par谩metros de b煤squeda\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Modales */}\r\n            <CreateProjectModal\r\n              isOpen={isCreateModalOpen}\r\n              onClose={() => setIsCreateModalOpen(false)}\r\n              onSubmit={() => getProyectos({ force: true })}\r\n            />\r\n\r\n            {isEditModalOpen && (\r\n              <EditProjectModal\r\n                isOpen\r\n                onClose={() => { setIsEditModalOpen(false); setSelectedProject(null); }}\r\n                onSubmit={handleUpdateProject}\r\n                project={selectedProject}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectManagement;\r\n ","import React, { useState, useRef } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\n\r\nconst ImageUploadPanel = ({ onImagesUploaded, projectId, isUploading = false }) => {\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [previewImages, setPreviewImages] = useState([]);\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleFileSelect = (files) => {\r\n    const validFiles = Array.from(files)?.filter(file => {\r\n      const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\r\n      const maxSize = 5 * 1024 * 1024; // 5MB\r\n      \r\n      if (!validTypes?.includes(file?.type)) {\r\n        alert(`Archivo ${file?.name} no es un tipo de imagen v谩lido`);\r\n        return false;\r\n      }\r\n      \r\n      if (file?.size > maxSize) {\r\n        alert(`Archivo ${file?.name} es demasiado grande. M谩ximo 5MB`);\r\n        return false;\r\n      }\r\n      \r\n      return true;\r\n    });\r\n\r\n    if (validFiles?.length === 0) return;\r\n\r\n    setSelectedFiles(prev => [...prev, ...validFiles]);\r\n    \r\n    // Generate previews\r\n    validFiles?.forEach(file => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setPreviewImages(prev => [...prev, {\r\n          id: `${file?.name}-${Date.now()}`,\r\n          file,\r\n          src: e?.target?.result,\r\n          name: file?.name,\r\n          category: 'general',\r\n          description: ''\r\n        }]);\r\n      };\r\n      reader?.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  const handleDrag = (e) => {\r\n    e?.preventDefault();\r\n    e?.stopPropagation();\r\n    \r\n    if (e?.type === 'dragenter' || e?.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (e?.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e?.preventDefault();\r\n    e?.stopPropagation();\r\n    setDragActive(false);\r\n    \r\n    if (e?.dataTransfer?.files?.length) {\r\n      handleFileSelect(e?.dataTransfer?.files);\r\n    }\r\n  };\r\n\r\n  const handleFileInput = (e) => {\r\n    if (e?.target?.files?.length) {\r\n      handleFileSelect(e?.target?.files);\r\n    }\r\n  };\r\n\r\n  const updateImageMetadata = (imageId, field, value) => {\r\n    setPreviewImages(prev => prev?.map(img => \r\n      img?.id === imageId ? { ...img, [field]: value } : img\r\n    ));\r\n  };\r\n\r\n  const removeImage = (imageId) => {\r\n    setPreviewImages(prev => prev?.filter(img => img?.id !== imageId));\r\n    setSelectedFiles(prev => prev?.filter(file => \r\n      !previewImages?.some(img => img?.id === imageId && img?.file === file)\r\n    ));\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (previewImages?.length === 0) {\r\n      alert('Seleccione al menos una imagen para subir');\r\n      return;\r\n    }\r\n\r\n    // Prepare images with metadata\r\n    const imagesToUpload = previewImages?.map(img => ({\r\n      file: img?.file,\r\n      name: img?.name,\r\n      category: img?.category,\r\n      description: img?.description,\r\n      projectId,\r\n      timestamp: new Date()?.toISOString()\r\n    }));\r\n\r\n    try {\r\n      await onImagesUploaded(imagesToUpload);\r\n      \r\n      // Clear selections after successful upload\r\n      setSelectedFiles([]);\r\n      setPreviewImages([]);\r\n      \r\n      // Reset file input\r\n      if (fileInputRef?.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading images:', error);\r\n      alert('Error al subir las im谩genes. Por favor intente nuevamente.');\r\n    }\r\n  };\r\n\r\n  const categoryOptions = [\r\n    { value: 'general', label: 'General' },\r\n    { value: 'construction', label: 'Construcci贸n' },\r\n    { value: 'installation', label: 'Instalaci贸n' },\r\n    { value: 'testing', label: 'Pruebas' },\r\n    { value: 'completion', label: 'Finalizaci贸n' },\r\n    { value: 'quality-control', label: 'Control de Calidad' },\r\n    { value: 'safety', label: 'Seguridad' },\r\n    { value: 'documentation', label: 'Documentaci贸n' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Subir Im谩genes</h3>\r\n        <div className=\"text-sm text-muted-foreground\">\r\n          Formatos: JPG, PNG, GIF, WebP  M谩ximo: 5MB\r\n        </div>\r\n      </div>\r\n      {/* Drag & Drop Zone */}\r\n      <div\r\n        className={`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\r\n          dragActive \r\n            ? 'border-primary bg-primary/5' :'border-border hover:border-primary/50'\r\n        }`}\r\n        onDragEnter={handleDrag}\r\n        onDragLeave={handleDrag}\r\n        onDragOver={handleDrag}\r\n        onDrop={handleDrop}\r\n      >\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          multiple\r\n          accept=\"image/*\"\r\n          onChange={handleFileInput}\r\n          className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\r\n          disabled={isUploading}\r\n        />\r\n        \r\n        <div className=\"flex flex-col items-center space-y-4\">\r\n          <div className={`p-4 rounded-full ${dragActive ? 'bg-primary/10' : 'bg-muted'}`}>\r\n            <Icon name=\"Upload\" size={32} className={dragActive ? 'text-primary' : 'text-muted-foreground'} />\r\n          </div>\r\n          \r\n          <div>\r\n            <p className=\"text-lg font-medium text-foreground mb-1\">\r\n              {dragActive ? 'Suelte las im谩genes aqu铆' : 'Arrastra im谩genes aqu铆'}\r\n            </p>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              o haz clic para seleccionar archivos\r\n            </p>\r\n          </div>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            disabled={isUploading}\r\n            onClick={() => fileInputRef?.current?.click()}\r\n          >\r\n            Seleccionar Archivos\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Preview Images */}\r\n      {previewImages?.length > 0 && (\r\n        <div className=\"mt-6\">\r\n          <h4 className=\"text-md font-medium text-foreground mb-4\">\r\n            Im谩genes Seleccionadas ({previewImages?.length})\r\n          </h4>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {previewImages?.map((img) => (\r\n              <div key={img?.id} className=\"border border-border rounded-lg overflow-hidden\">\r\n                {/* Image Preview */}\r\n                <div className=\"relative h-48\">\r\n                  <Image\r\n                    src={img?.src}\r\n                    alt={img?.name}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                  <button\r\n                    onClick={() => removeImage(img?.id)}\r\n                    className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600\"\r\n                  >\r\n                    <Icon name=\"X\" size={16} />\r\n                  </button>\r\n                </div>\r\n                \r\n                {/* Metadata Form */}\r\n                <div className=\"p-4 space-y-3\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-1\">\r\n                      Nombre\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={img?.name}\r\n                      onChange={(e) => updateImageMetadata(img?.id, 'name', e?.target?.value)}\r\n                      className=\"w-full px-3 py-2 border border-border rounded-md text-sm\"\r\n                      placeholder=\"Nombre de la imagen\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-1\">\r\n                      Categor铆a\r\n                    </label>\r\n                    <select\r\n                      value={img?.category}\r\n                      onChange={(e) => updateImageMetadata(img?.id, 'category', e?.target?.value)}\r\n                      className=\"w-full px-3 py-2 border border-border rounded-md text-sm\"\r\n                    >\r\n                      {categoryOptions?.map(option => (\r\n                        <option key={option?.value} value={option?.value}>\r\n                          {option?.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-1\">\r\n                      Descripci贸n\r\n                    </label>\r\n                    <textarea\r\n                      value={img?.description}\r\n                      onChange={(e) => updateImageMetadata(img?.id, 'description', e?.target?.value)}\r\n                      className=\"w-full px-3 py-2 border border-border rounded-md text-sm resize-none\"\r\n                      rows=\"2\"\r\n                      placeholder=\"Descripci贸n opcional...\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          \r\n          {/* Upload Button */}\r\n          <div className=\"flex justify-center mt-6\">\r\n            <Button\r\n              onClick={handleUpload}\r\n              disabled={isUploading || previewImages?.length === 0}\r\n              iconName=\"Upload\"\r\n              iconPosition=\"left\"\r\n              className=\"px-8\"\r\n            >\r\n              {isUploading ? 'Subiendo...' : `Subir ${previewImages?.length} Imagen(es)`}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUploadPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\n\r\nconst ImageLightbox = ({ image, images, onClose, onNavigate, onDelete, onUpdate }) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editForm, setEditForm] = useState({\r\n    name: '',\r\n    category: '',\r\n    description: ''\r\n  });\r\n\r\n  const categoryOptions = [\r\n    { value: 'general', label: 'General' },\r\n    { value: 'construction', label: 'Construcci贸n' },\r\n    { value: 'installation', label: 'Instalaci贸n' },\r\n    { value: 'testing', label: 'Pruebas' },\r\n    { value: 'completion', label: 'Finalizaci贸n' },\r\n    { value: 'quality-control', label: 'Control de Calidad' },\r\n    { value: 'safety', label: 'Seguridad' },\r\n    { value: 'documentation', label: 'Documentaci贸n' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const index = images?.findIndex(img => img?.id === image?.id);\r\n    setCurrentIndex(index >= 0 ? index : 0);\r\n  }, [image, images]);\r\n\r\n  useEffect(() => {\r\n    setEditForm({\r\n      name: image?.name || '',\r\n      category: image?.category || 'general',\r\n      description: image?.description || ''\r\n    });\r\n  }, [image]);\r\n\r\n  // Keyboard navigation\r\n  useEffect(() => {\r\n    const handleKeyPress = (e) => {\r\n      switch (e?.key) {\r\n        case 'Escape':\r\n          onClose();\r\n          break;\r\n        case 'ArrowLeft':\r\n          navigatePrevious();\r\n          break;\r\n        case 'ArrowRight':\r\n          navigateNext();\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyPress);\r\n    return () => window.removeEventListener('keydown', handleKeyPress);\r\n  }, [currentIndex]);\r\n\r\n  const navigateNext = () => {\r\n    if (images?.length && currentIndex < images?.length - 1) {\r\n      const nextIndex = currentIndex + 1;\r\n      setCurrentIndex(nextIndex);\r\n      onNavigate(images?.[nextIndex]);\r\n    }\r\n  };\r\n\r\n  const navigatePrevious = () => {\r\n    if (images?.length && currentIndex > 0) {\r\n      const prevIndex = currentIndex - 1;\r\n      setCurrentIndex(prevIndex);\r\n      onNavigate(images?.[prevIndex]);\r\n    }\r\n  };\r\n\r\n  const handleSaveEdit = async () => {\r\n    try {\r\n      await onUpdate(image?.id, editForm);\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      console.error('Error updating image:', error);\r\n      alert('Error al actualizar la imagen');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (window.confirm(`驴Est谩 seguro de que desea eliminar la imagen \"${image?.name}\"?`)) {\r\n      try {\r\n        await onDelete(image);\r\n        onClose();\r\n      } catch (error) {\r\n        console.error('Error deleting image:', error);\r\n        alert('Error al eliminar la imagen');\r\n      }\r\n    }\r\n  };\r\n\r\n  const formatDate = (timestamp) => {\r\n    return new Date(timestamp)?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getCategoryLabel = (category) => {\r\n    const option = categoryOptions?.find(opt => opt?.value === category);\r\n    return option?.label || category;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/90 z-50 flex items-center justify-center\">\r\n      {/* Overlay */}\r\n      <div \r\n        className=\"absolute inset-0\" \r\n        onClick={onClose}\r\n      />\r\n      {/* Content */}\r\n      <div className=\"relative max-w-7xl max-h-screen w-full h-full flex flex-col lg:flex-row\">\r\n        {/* Image Container */}\r\n        <div className=\"flex-1 flex items-center justify-center p-4 lg:p-8\">\r\n          <div className=\"relative\">\r\n            <Image\r\n              src={image?.src || image?.url}\r\n              alt={image?.name}\r\n              className=\"max-w-full max-h-[70vh] lg:max-h-[80vh] object-contain\"\r\n            />\r\n            \r\n            {/* Navigation Buttons */}\r\n            {images?.length > 1 && (\r\n              <>\r\n                <button\r\n                  onClick={navigatePrevious}\r\n                  disabled={currentIndex === 0}\r\n                  className=\"absolute left-4 top-1/2 transform -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  <Icon name=\"ChevronLeft\" size={24} />\r\n                </button>\r\n                \r\n                <button\r\n                  onClick={navigateNext}\r\n                  disabled={currentIndex === images?.length - 1}\r\n                  className=\"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  <Icon name=\"ChevronRight\" size={24} />\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Info Panel */}\r\n        <div className=\"w-full lg:w-96 bg-card border-l border-border flex flex-col\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-4 border-b border-border\">\r\n            <h3 className=\"text-lg font-semibold text-foreground\">\r\n              {isEditing ? 'Editar Imagen' : 'Detalles'}\r\n            </h3>\r\n            <div className=\"flex items-center space-x-2\">\r\n              {!isEditing && (\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  onClick={() => setIsEditing(true)}\r\n                >\r\n                  <Icon name=\"Edit\" size={18} />\r\n                </Button>\r\n              )}\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={onClose}\r\n              >\r\n                <Icon name=\"X\" size={18} />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Content */}\r\n          <div className=\"flex-1 overflow-y-auto p-4\">\r\n            {isEditing ? (\r\n              /* Edit Form */\r\n              (<div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Nombre\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editForm?.name}\r\n                    onChange={(e) => setEditForm(prev => ({ ...prev, name: e?.target?.value }))}\r\n                    className=\"w-full px-3 py-2 border border-border rounded-md\"\r\n                    placeholder=\"Nombre de la imagen\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Categor铆a\r\n                  </label>\r\n                  <select\r\n                    value={editForm?.category}\r\n                    onChange={(e) => setEditForm(prev => ({ ...prev, category: e?.target?.value }))}\r\n                    className=\"w-full px-3 py-2 border border-border rounded-md\"\r\n                  >\r\n                    {categoryOptions?.map(option => (\r\n                      <option key={option?.value} value={option?.value}>\r\n                        {option?.label}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Descripci贸n\r\n                  </label>\r\n                  <textarea\r\n                    value={editForm?.description}\r\n                    onChange={(e) => setEditForm(prev => ({ ...prev, description: e?.target?.value }))}\r\n                    className=\"w-full px-3 py-2 border border-border rounded-md resize-none\"\r\n                    rows=\"4\"\r\n                    placeholder=\"Descripci贸n de la imagen...\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex space-x-2\">\r\n                  <Button\r\n                    onClick={handleSaveEdit}\r\n                    iconName=\"Save\"\r\n                    iconPosition=\"left\"\r\n                    className=\"flex-1\"\r\n                  >\r\n                    Guardar\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => setIsEditing(false)}\r\n                    className=\"flex-1\"\r\n                  >\r\n                    Cancelar\r\n                  </Button>\r\n                </div>\r\n              </div>)\r\n            ) : (\r\n              /* View Mode */\r\n              (<div className=\"space-y-6\">\r\n                <div>\r\n                  <h4 className=\"font-semibold text-foreground text-lg mb-2\">\r\n                    {image?.name}\r\n                  </h4>\r\n                  \r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"Tag\" size={16} className=\"text-muted-foreground\" />\r\n                      <span className=\"text-sm text-foreground\">\r\n                        {getCategoryLabel(image?.category)}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"Calendar\" size={16} className=\"text-muted-foreground\" />\r\n                      <span className=\"text-sm text-foreground\">\r\n                        {formatDate(image?.timestamp)}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    {images?.length > 1 && (\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon name=\"Image\" size={16} className=\"text-muted-foreground\" />\r\n                        <span className=\"text-sm text-foreground\">\r\n                          {currentIndex + 1} de {images?.length}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                {image?.description && (\r\n                  <div>\r\n                    <h5 className=\"font-medium text-foreground mb-2\">Descripci贸n</h5>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      {image?.description}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n                {/* Actions */}\r\n                <div className=\"space-y-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    className=\"w-full\"\r\n                    iconName=\"Download\"\r\n                    iconPosition=\"left\"\r\n                    onClick={() => {\r\n                      // Create download link\r\n                      const link = document.createElement('a');\r\n                      link.href = image?.src || image?.url;\r\n                      link.download = image?.name || 'imagen';\r\n                      document.body?.appendChild(link);\r\n                      link?.click();\r\n                      document.body?.removeChild(link);\r\n                    }}\r\n                  >\r\n                    Descargar\r\n                  </Button>\r\n                  \r\n                  <Button\r\n                    variant=\"destructive\"\r\n                    className=\"w-full\"\r\n                    iconName=\"Trash2\"\r\n                    iconPosition=\"left\"\r\n                    onClick={handleDelete}\r\n                  >\r\n                    Eliminar\r\n                  </Button>\r\n                </div>\r\n              </div>)\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageLightbox;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\nimport ImageLightbox from './ImageLightbox';\r\n\r\nconst ImageGallery = ({ images = [], onDeleteImage, onUpdateImage, projectInfo }) => {\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n  const [sortBy, setSortBy] = useState('newest');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [lightboxImage, setLightboxImage] = useState(null);\r\n  const [viewMode, setViewMode] = useState('masonry'); // masonry, grid, list\r\n\r\n  const categoryOptions = [\r\n    { value: 'all', label: 'Todas las Categor铆as' },\r\n    { value: 'general', label: 'General' },\r\n    { value: 'construction', label: 'Construcci贸n' },\r\n    { value: 'installation', label: 'Instalaci贸n' },\r\n    { value: 'testing', label: 'Pruebas' },\r\n    { value: 'completion', label: 'Finalizaci贸n' },\r\n    { value: 'quality-control', label: 'Control de Calidad' },\r\n    { value: 'safety', label: 'Seguridad' },\r\n    { value: 'documentation', label: 'Documentaci贸n' }\r\n  ];\r\n\r\n  const sortOptions = [\r\n    { value: 'newest', label: 'M谩s Recientes' },\r\n    { value: 'oldest', label: 'M谩s Antiguos' },\r\n    { value: 'name', label: 'Por Nombre' },\r\n    { value: 'category', label: 'Por Categor铆a' }\r\n  ];\r\n\r\n  const viewModeOptions = [\r\n    { value: 'masonry', label: 'Mosaico', icon: 'Grid' },\r\n    { value: 'grid', label: 'Cuadr铆cula', icon: 'Grid3X3' },\r\n    { value: 'list', label: 'Lista', icon: 'List' }\r\n  ];\r\n\r\n  // Filter and sort images\r\n  const filteredImages = images\r\n    ?.filter(image => {\r\n      const matchesCategory = selectedCategory === 'all' || image?.category === selectedCategory;\r\n      const matchesSearch = !searchTerm || \r\n        image?.name?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||\r\n        image?.description?.toLowerCase()?.includes(searchTerm?.toLowerCase());\r\n      return matchesCategory && matchesSearch;\r\n    })\r\n    ?.sort((a, b) => {\r\n      switch (sortBy) {\r\n        case 'newest':\r\n          return new Date(b?.timestamp || 0) - new Date(a?.timestamp || 0);\r\n        case 'oldest':\r\n          return new Date(a?.timestamp || 0) - new Date(b?.timestamp || 0);\r\n        case 'name':\r\n          return (a?.name || '')?.localeCompare(b?.name || '');\r\n        case 'category':\r\n          return (a?.category || '')?.localeCompare(b?.category || '');\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n\r\n  const getCategoryColor = (category) => {\r\n    const colors = {\r\n      'general': 'bg-gray-100 text-gray-800',\r\n      'construction': 'bg-blue-100 text-blue-800',\r\n      'installation': 'bg-green-100 text-green-800',\r\n      'testing': 'bg-yellow-100 text-yellow-800',\r\n      'completion': 'bg-purple-100 text-purple-800',\r\n      'quality-control': 'bg-red-100 text-red-800',\r\n      'safety': 'bg-orange-100 text-orange-800',\r\n      'documentation': 'bg-indigo-100 text-indigo-800'\r\n    };\r\n    return colors?.[category] || 'bg-gray-100 text-gray-800';\r\n  };\r\n\r\n  const getCategoryLabel = (category) => {\r\n    const option = categoryOptions?.find(opt => opt?.value === category);\r\n    return option?.label || category;\r\n  };\r\n\r\n  const formatDate = (timestamp) => {\r\n    return new Date(timestamp)?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const handleDeleteImage = async (image) => {\r\n    if (window.confirm(`驴Est谩 seguro de que desea eliminar la imagen \"${image?.name}\"?\\n\\nEsta acci贸n no se puede deshacer.`)) {\r\n      try {\r\n        await onDeleteImage(image?.id);\r\n      } catch (error) {\r\n        console.error('Error deleting image:', error);\r\n        alert('Error al eliminar la imagen');\r\n      }\r\n    }\r\n  };\r\n\r\n  const exportGallery = () => {\r\n    const galleryData = {\r\n      project: projectInfo,\r\n      images: filteredImages,\r\n      exportDate: new Date()?.toISOString(),\r\n      totalImages: filteredImages?.length\r\n    };\r\n\r\n    const blob = new Blob([JSON.stringify(galleryData, null, 2)], { \r\n      type: 'application/json' \r\n    });\r\n    \r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `galeria-${projectInfo?.code || 'proyecto'}-${new Date()?.toISOString()?.split('T')?.[0]}.json`;\r\n    document.body?.appendChild(link);\r\n    link?.click();\r\n    document.body?.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  if (!images?.length) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <Icon name=\"Image\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">No hay im谩genes</h3>\r\n        <p className=\"text-muted-foreground\">\r\n          Las im谩genes subidas para este proyecto aparecer谩n aqu铆\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Controls */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n        {/* Search and Filters */}\r\n        <div className=\"flex flex-col sm:flex-row gap-4 flex-1\">\r\n          <div className=\"relative flex-1 max-w-sm\">\r\n            <Icon name=\"Search\" size={20} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" />\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e?.target?.value)}\r\n              placeholder=\"Buscar im谩genes...\"\r\n              className=\"w-full pl-10 pr-4 py-2 border border-border rounded-md text-sm\"\r\n            />\r\n          </div>\r\n          \r\n          <select\r\n            value={selectedCategory}\r\n            onChange={(e) => setSelectedCategory(e?.target?.value)}\r\n            className=\"px-3 py-2 border border-border rounded-md text-sm min-w-48\"\r\n          >\r\n            {categoryOptions?.map(option => (\r\n              <option key={option?.value} value={option?.value}>\r\n                {option?.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          \r\n          <select\r\n            value={sortBy}\r\n            onChange={(e) => setSortBy(e?.target?.value)}\r\n            className=\"px-3 py-2 border border-border rounded-md text-sm min-w-40\"\r\n          >\r\n            {sortOptions?.map(option => (\r\n              <option key={option?.value} value={option?.value}>\r\n                {option?.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* View Mode and Actions */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          <div className=\"flex bg-muted rounded-lg p-1\">\r\n            {viewModeOptions?.map(mode => (\r\n              <button\r\n                key={mode?.value}\r\n                onClick={() => setViewMode(mode?.value)}\r\n                className={`flex items-center space-x-2 px-3 py-2 rounded-md transition-smooth ${\r\n                  viewMode === mode?.value\r\n                    ? 'bg-primary text-primary-foreground'\r\n                    : 'text-muted-foreground hover:text-foreground'\r\n                }`}\r\n                title={mode?.label}\r\n              >\r\n                <Icon name={mode?.icon} size={16} />\r\n                <span className=\"hidden sm:inline text-sm\">{mode?.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n            onClick={exportGallery}\r\n          >\r\n            Exportar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Results Count */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <p className=\"text-sm text-muted-foreground\">\r\n          Mostrando {filteredImages?.length} de {images?.length} im谩genes\r\n        </p>\r\n        {searchTerm && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            iconName=\"X\"\r\n            iconPosition=\"left\"\r\n            onClick={() => setSearchTerm('')}\r\n          >\r\n            Limpiar b煤squeda\r\n          </Button>\r\n        )}\r\n      </div>\r\n      {/* Image Gallery */}\r\n      {filteredImages?.length === 0 ? (\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"Search\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n          <p className=\"text-muted-foreground\">\r\n            No se encontraron im谩genes con los filtros seleccionados\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Masonry View */}\r\n          {viewMode === 'masonry' && (\r\n            <div className=\"columns-1 md:columns-2 lg:columns-3 xl:columns-4 gap-6 space-y-6\">\r\n              {filteredImages?.map((image, index) => (\r\n                <div \r\n                  key={image?.id || index} \r\n                  className=\"break-inside-avoid bg-card border border-border rounded-lg overflow-hidden hover:shadow-md transition-shadow\"\r\n                >\r\n                  <div className=\"relative group\">\r\n                    <Image\r\n                      src={image?.src || image?.url}\r\n                      alt={image?.name}\r\n                      className=\"w-full h-auto cursor-pointer\"\r\n                      onClick={() => setLightboxImage(image)}\r\n                    />\r\n                    <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        iconName=\"Eye\"\r\n                        onClick={() => setLightboxImage(image)}\r\n                      >\r\n                        Ver\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4\">\r\n                    <div className=\"flex items-start justify-between mb-2\">\r\n                      <h4 className=\"font-medium text-foreground text-sm\">{image?.name}</h4>\r\n                      <button\r\n                        onClick={() => handleDeleteImage(image)}\r\n                        className=\"p-1 text-red-500 hover:bg-red-50 rounded\"\r\n                      >\r\n                        <Icon name=\"Trash2\" size={14} />\r\n                      </button>\r\n                    </div>\r\n                    \r\n                    <div className=\"space-y-2\">\r\n                      <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(image?.category)}`}>\r\n                        {getCategoryLabel(image?.category)}\r\n                      </span>\r\n                      \r\n                      {image?.description && (\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {image?.description}\r\n                        </p>\r\n                      )}\r\n                      \r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        {formatDate(image?.timestamp)}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Grid View */}\r\n          {viewMode === 'grid' && (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\">\r\n              {filteredImages?.map((image, index) => (\r\n                <div \r\n                  key={image?.id || index}\r\n                  className=\"bg-card border border-border rounded-lg overflow-hidden hover:shadow-md transition-shadow\"\r\n                >\r\n                  <div className=\"relative aspect-square group\">\r\n                    <Image\r\n                      src={image?.src || image?.url}\r\n                      alt={image?.name}\r\n                      className=\"w-full h-full object-cover cursor-pointer\"\r\n                      onClick={() => setLightboxImage(image)}\r\n                    />\r\n                    <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        iconName=\"Eye\"\r\n                        onClick={() => setLightboxImage(image)}\r\n                      >\r\n                        Ver\r\n                      </Button>\r\n                    </div>\r\n                    <button\r\n                      onClick={() => handleDeleteImage(image)}\r\n                      className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                    >\r\n                      <Icon name=\"Trash2\" size={14} />\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-3\">\r\n                    <h4 className=\"font-medium text-foreground text-sm mb-1 truncate\">\r\n                      {image?.name}\r\n                    </h4>\r\n                    <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(image?.category)}`}>\r\n                      {getCategoryLabel(image?.category)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* List View */}\r\n          {viewMode === 'list' && (\r\n            <div className=\"space-y-4\">\r\n              {filteredImages?.map((image, index) => (\r\n                <div \r\n                  key={image?.id || index}\r\n                  className=\"bg-card border border-border rounded-lg p-4 hover:shadow-sm transition-shadow\"\r\n                >\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <div className=\"relative w-16 h-16 flex-shrink-0\">\r\n                      <Image\r\n                        src={image?.src || image?.url}\r\n                        alt={image?.name}\r\n                        className=\"w-full h-full object-cover rounded cursor-pointer\"\r\n                        onClick={() => setLightboxImage(image)}\r\n                      />\r\n                    </div>\r\n                    \r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-start justify-between\">\r\n                        <div>\r\n                          <h4 className=\"font-medium text-foreground\">{image?.name}</h4>\r\n                          <div className=\"flex items-center space-x-2 mt-1\">\r\n                            <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(image?.category)}`}>\r\n                              {getCategoryLabel(image?.category)}\r\n                            </span>\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {formatDate(image?.timestamp)}\r\n                            </span>\r\n                          </div>\r\n                          {image?.description && (\r\n                            <p className=\"text-sm text-muted-foreground mt-2\">\r\n                              {image?.description}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            iconName=\"Eye\"\r\n                            onClick={() => setLightboxImage(image)}\r\n                          />\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            iconName=\"Trash2\"\r\n                            onClick={() => handleDeleteImage(image)}\r\n                            className=\"text-red-500 hover:text-red-600\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n      {/* Lightbox */}\r\n      {lightboxImage && (\r\n        <ImageLightbox\r\n          image={lightboxImage}\r\n          images={filteredImages}\r\n          onClose={() => setLightboxImage(null)}\r\n          onNavigate={setLightboxImage}\r\n          onDelete={handleDeleteImage}\r\n          onUpdate={onUpdateImage}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Image from '../../../components/AppImage';\r\n\r\nconst ProjectInfoPanel = ({ project }) => {\r\n  if (!project) return null;\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    })?.format(amount);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Date(date)?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    const colors = {\r\n      'planning': 'bg-blue-100 text-blue-800',\r\n      'in-progress': 'bg-green-100 text-green-800',\r\n      'on-hold': 'bg-yellow-100 text-yellow-800',\r\n      'review': 'bg-purple-100 text-purple-800',\r\n      'completed': 'bg-emerald-100 text-emerald-800',\r\n      'cancelled': 'bg-red-100 text-red-800'\r\n    };\r\n    return colors?.[status] || 'bg-gray-100 text-gray-800';\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    const colors = {\r\n      'low': 'text-green-600',\r\n      'medium': 'text-yellow-600',\r\n      'high': 'text-orange-600',\r\n      'urgent': 'text-red-600'\r\n    };\r\n    return colors?.[priority] || 'text-gray-600';\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center space-x-4 mb-6\">\r\n        {project?.image && (\r\n          <Image\r\n            src={project?.image}\r\n            alt={project?.name}\r\n            className=\"w-16 h-16 rounded-lg object-cover\"\r\n          />\r\n        )}\r\n        <div className=\"flex-1\">\r\n          <h2 className=\"text-xl font-semibold text-foreground mb-1\">\r\n            {project?.name}\r\n          </h2>\r\n          <div className=\"flex items-center space-x-3\">\r\n            <span className=\"font-mono text-sm text-primary\">\r\n              {project?.code}\r\n            </span>\r\n            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(project?.status)}`}>\r\n              {project?.statusLabel}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Project Details Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        {/* Basic Info */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"font-medium text-foreground border-b border-border pb-2\">\r\n            Informaci贸n General\r\n          </h3>\r\n          \r\n          <div className=\"space-y-3 text-sm\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Tipo:</span>\r\n              <span className=\"text-foreground font-medium\">{project?.type}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Departamento:</span>\r\n              <span className=\"text-foreground\">{project?.department}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Prioridad:</span>\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Icon \r\n                  name=\"AlertCircle\" \r\n                  size={14} \r\n                  className={getPriorityColor(project?.priority)}\r\n                />\r\n                <span className=\"text-foreground\">{project?.priorityLabel}</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Ubicaci贸n:</span>\r\n              <span className=\"text-foreground\">{project?.location}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timeline & Budget */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"font-medium text-foreground border-b border-border pb-2\">\r\n            Cronograma y Presupuesto\r\n          </h3>\r\n          \r\n          <div className=\"space-y-3 text-sm\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Fecha Inicio:</span>\r\n              <span className=\"text-foreground\">{formatDate(project?.startDate)}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Fecha Fin:</span>\r\n              <span className=\"text-foreground\">{formatDate(project?.endDate)}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Presupuesto:</span>\r\n              <span className=\"text-foreground font-medium\">{formatCurrency(project?.budget)}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Progreso:</span>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-16 bg-muted rounded-full h-2\">\r\n                  <div \r\n                    className=\"bg-primary h-2 rounded-full transition-all duration-300\"\r\n                    style={{ width: `${project?.progress}%` }}\r\n                  />\r\n                </div>\r\n                <span className=\"text-foreground font-medium\">{project?.progress}%</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Client Info */}\r\n      {project?.client && (\r\n        <div className=\"mt-6 pt-6 border-t border-border\">\r\n          <h3 className=\"font-medium text-foreground mb-3\">\r\n            Informaci贸n del Cliente\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Nombre:</span>\r\n              <span className=\"text-foreground font-medium\">{project?.client?.name}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Contacto:</span>\r\n              <span className=\"text-foreground\">{project?.client?.contact}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Assigned Personnel */}\r\n      {project?.assignedPersonnel?.length > 0 && (\r\n        <div className=\"mt-6 pt-6 border-t border-border\">\r\n          <h3 className=\"font-medium text-foreground mb-3\">\r\n            Personal Asignado\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n            {project?.assignedPersonnel?.map((person, index) => (\r\n              <div key={index} className=\"flex items-center space-x-3 p-3 bg-muted/30 rounded-lg\">\r\n                <div className=\"w-8 h-8 bg-primary rounded-full flex items-center justify-center\">\r\n                  <Icon name=\"User\" size={16} className=\"text-primary-foreground\" />\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"text-sm font-medium text-foreground\">{person?.name}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">{person?.role}</div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Work Orders */}\r\n      {project?.workOrders?.length > 0 && (\r\n        <div className=\"mt-6 pt-6 border-t border-border\">\r\n          <h3 className=\"font-medium text-foreground mb-3\">\r\n            rdenes de Trabajo\r\n          </h3>\r\n          \r\n          <div className=\"space-y-2\">\r\n            {project?.workOrders?.map((order, index) => (\r\n              <div key={index} className=\"flex items-center justify-between p-3 bg-muted/30 rounded-lg\">\r\n                <span className=\"text-sm font-medium text-foreground\">{order?.code}</span>\r\n                <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(order?.status)}`}>\r\n                  {order?.statusLabel}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectInfoPanel;","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ImageUploadPanel from './components/ImageUploadPanel';\r\nimport ImageGallery from './components/ImageGallery';\r\nimport ProjectInfoPanel from './components/ProjectInfoPanel';\r\n\r\nconst ProjectDetailGallery = () => {\r\n  const { projectId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [project, setProject] = useState(null);\r\n  const [images, setImages] = useState([]);\r\n  const [activeTab, setActiveTab] = useState('gallery');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n\r\n  // Mock project data - in a real app, this would come from an API\r\n  const mockProjects = [\r\n    {\r\n      id: \"1\",\r\n      code: \"PROJ-2024-001\",\r\n      name: \"Instalaci贸n HVAC Torre Corporativa\",\r\n      type: \"Instalaci贸n HVAC\",\r\n      client: {\r\n        name: \"ABC Corporation\",\r\n        contact: \"contacto@abccorp.com\",\r\n        type: \"commercial\"\r\n      },\r\n      status: \"in-progress\",\r\n      statusLabel: \"En Progreso\",\r\n      priority: \"high\",\r\n      priorityLabel: \"Alta\",\r\n      budget: 850000,\r\n      startDate: \"2024-01-15\",\r\n      endDate: \"2024-04-30\",\r\n      progress: 65,\r\n      department: \"Ingenier铆a\",\r\n      location: \"Ciudad de M茅xico, CDMX\",\r\n      image: \"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=400\",\r\n      assignedPersonnel: [\r\n        { name: \"Carlos Mart铆nez\", role: \"Ingeniero Jefe\" },\r\n        { name: \"Ana Rodr铆guez\", role: \"T茅cnico Especialista\" },\r\n        { name: \"Luis Garc铆a\", role: \"Supervisor de Obra\" }\r\n      ],\r\n      workOrders: [\r\n        { code: \"WO-2024-001\", status: \"completed\", statusLabel: \"Completada\" },\r\n        { code: \"WO-2024-002\", status: \"in-progress\", statusLabel: \"En Progreso\" },\r\n        { code: \"WO-2024-003\", status: \"planning\", statusLabel: \"Planificaci贸n\" }\r\n      ]\r\n    },\r\n    {\r\n      id: \"2\",\r\n      code: \"PROJ-2024-002\",\r\n      name: \"Mantenimiento Sistema Industrial\",\r\n      type: \"Mantenimiento\",\r\n      client: {\r\n        name: \"XYZ Industries\",\r\n        contact: \"servicios@xyzind.com\",\r\n        type: \"industrial\"\r\n      },\r\n      status: \"completed\",\r\n      statusLabel: \"Completado\",\r\n      priority: \"medium\",\r\n      priorityLabel: \"Media\",\r\n      budget: 320000,\r\n      startDate: \"2024-02-01\",\r\n      endDate: \"2024-03-15\",\r\n      progress: 100,\r\n      department: \"Mantenimiento\",\r\n      location: \"Guadalajara, JAL\",\r\n      image: \"https://images.unsplash.com/photo-1581094794329-c8112a89af12?w=400\",\r\n      assignedPersonnel: [\r\n        { name: \"Mar铆a L贸pez\", role: \"Coordinadora\" },\r\n        { name: \"Jos茅 Hern谩ndez\", role: \"T茅cnico\" }\r\n      ],\r\n      workOrders: [\r\n        { code: \"WO-2024-004\", status: \"completed\", statusLabel: \"Completada\" },\r\n        { code: \"WO-2024-005\", status: \"completed\", statusLabel: \"Completada\" }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  // Mock images data - in a real app, this would come from an API\r\n  const mockImages = [\r\n    {\r\n      id: 'img1',\r\n      projectId: '1',\r\n      name: 'Instalaci贸n inicial del sistema',\r\n      src: 'https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800',\r\n      category: 'installation',\r\n      description: 'Vista general de la instalaci贸n del sistema HVAC en la torre corporativa',\r\n      timestamp: '2024-01-20T10:30:00Z'\r\n    },\r\n    {\r\n      id: 'img2',\r\n      projectId: '1',\r\n      name: 'Pruebas de funcionamiento',\r\n      src: 'https://images.unsplash.com/photo-1581094794329-c8112a89af12?w=800',\r\n      category: 'testing',\r\n      description: 'Verificaci贸n de las conexiones y funcionamiento del sistema',\r\n      timestamp: '2024-02-15T14:20:00Z'\r\n    },\r\n    {\r\n      id: 'img3',\r\n      projectId: '1',\r\n      name: 'Control de calidad',\r\n      src: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800',\r\n      category: 'quality-control',\r\n      description: 'Inspecci贸n de calidad de los componentes instalados',\r\n      timestamp: '2024-03-01T09:15:00Z'\r\n    },\r\n    {\r\n      id: 'img4',\r\n      projectId: '2',\r\n      name: 'Mantenimiento preventivo',\r\n      src: 'https://images.unsplash.com/photo-1497366216548-37526070297c?w=800',\r\n      category: 'general',\r\n      description: 'Tareas de mantenimiento preventivo del sistema industrial',\r\n      timestamp: '2024-02-10T11:45:00Z'\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadProjectData = async () => {\r\n      setIsLoading(true);\r\n      \r\n      try {\r\n        // Simulate API call\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        \r\n        const foundProject = mockProjects?.find(p => p?.id === projectId);\r\n        if (!foundProject) {\r\n          navigate('/proyectos');\r\n          return;\r\n        }\r\n        \r\n        setProject(foundProject);\r\n        \r\n        // Load images for this project\r\n        const projectImages = mockImages?.filter(img => img?.projectId === projectId);\r\n        setImages(projectImages);\r\n        \r\n      } catch (error) {\r\n        console.error('Error loading project data:', error);\r\n        navigate('/proyectos');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (projectId) {\r\n      loadProjectData();\r\n    }\r\n  }, [projectId, navigate]);\r\n\r\n  const handleImagesUploaded = async (newImages) => {\r\n    setIsUploading(true);\r\n    \r\n    try {\r\n      // Simulate API upload\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n      \r\n      // Add new images to the gallery\r\n      const uploadedImages = newImages?.map((img, index) => ({\r\n        id: `uploaded-${Date.now()}-${index}`,\r\n        projectId,\r\n        name: img?.name,\r\n        src: img?.file ? URL.createObjectURL(img?.file) : img?.src,\r\n        category: img?.category,\r\n        description: img?.description,\r\n        timestamp: img?.timestamp\r\n      }));\r\n      \r\n      setImages(prev => [...uploadedImages, ...prev]);\r\n      \r\n      // Switch to gallery view after upload\r\n      setActiveTab('gallery');\r\n      \r\n      console.log(`${uploadedImages?.length} im谩genes subidas exitosamente para el proyecto ${project?.code}`);\r\n      \r\n    } catch (error) {\r\n      console.error('Error uploading images:', error);\r\n      throw error;\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteImage = async (imageId) => {\r\n    try {\r\n      // Simulate API delete\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      setImages(prev => prev?.filter(img => img?.id !== imageId));\r\n      console.log('Imagen eliminada exitosamente');\r\n      \r\n    } catch (error) {\r\n      console.error('Error deleting image:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleUpdateImage = async (imageId, updates) => {\r\n    try {\r\n      // Simulate API update\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      setImages(prev => prev?.map(img => \r\n        img?.id === imageId ? { ...img, ...updates } : img\r\n      ));\r\n      \r\n      console.log('Imagen actualizada exitosamente');\r\n      \r\n    } catch (error) {\r\n      console.error('Error updating image:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'gallery', label: 'Galer铆a de Im谩genes', icon: 'Image', count: images?.length },\r\n    { id: 'upload', label: 'Subir Im谩genes', icon: 'Upload' },\r\n    { id: 'project', label: 'Info del Proyecto', icon: 'Info' }\r\n  ];\r\n\r\n  const breadcrumbItems = [\r\n    { label: 'Gesti贸n de Proyectos', href: '/proyectos' },\r\n    { label: project?.name || 'Proyecto', href: '#' },\r\n    { label: 'Galer铆a', href: '#' }\r\n  ];\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando proyecto...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n        \r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <Breadcrumb items={breadcrumbItems} />\r\n            \r\n            {/* Header */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <div className=\"flex items-center space-x-3 mb-2\">\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={() => navigate('/proyectos')}\r\n                  >\r\n                    <Icon name=\"ArrowLeft\" size={20} />\r\n                  </Button>\r\n                  <h1 className=\"text-3xl font-bold text-foreground\">\r\n                    {project?.name}\r\n                  </h1>\r\n                </div>\r\n                <p className=\"text-muted-foreground\">\r\n                  Documentaci贸n visual y gesti贸n de im谩genes del proyecto\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {images?.length} imagen{images?.length !== 1 ? 'es' : ''}\r\n                </div>\r\n                <Button\r\n                  onClick={() => setActiveTab('upload')}\r\n                  iconName=\"Plus\"\r\n                  iconPosition=\"left\"\r\n                  disabled={isUploading}\r\n                >\r\n                  {isUploading ? 'Subiendo...' : 'Agregar Im谩genes'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"border-b border-border mb-8\">\r\n              <div className=\"flex space-x-8\">\r\n                {tabs?.map((tab) => (\r\n                  <button\r\n                    key={tab?.id}\r\n                    onClick={() => setActiveTab(tab?.id)}\r\n                    className={`flex items-center space-x-2 pb-4 border-b-2 transition-colors ${\r\n                      activeTab === tab?.id\r\n                        ? 'border-primary text-primary' :'border-transparent text-muted-foreground hover:text-foreground'\r\n                    }`}\r\n                  >\r\n                    <Icon name={tab?.icon} size={18} />\r\n                    <span className=\"font-medium\">{tab?.label}</span>\r\n                    {tab?.count !== undefined && (\r\n                      <span className=\"bg-muted px-2 py-1 rounded-full text-xs\">\r\n                        {tab?.count}\r\n                      </span>\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Tab Content */}\r\n            <div className=\"space-y-8\">\r\n              {activeTab === 'gallery' && (\r\n                <ImageGallery\r\n                  images={images}\r\n                  projectInfo={project}\r\n                  onDeleteImage={handleDeleteImage}\r\n                  onUpdateImage={handleUpdateImage}\r\n                />\r\n              )}\r\n\r\n              {activeTab === 'upload' && (\r\n                <ImageUploadPanel\r\n                  projectId={projectId}\r\n                  onImagesUploaded={handleImagesUploaded}\r\n                  isUploading={isUploading}\r\n                />\r\n              )}\r\n\r\n              {activeTab === 'project' && (\r\n                <ProjectInfoPanel project={project} />\r\n              )}\r\n            </div>\r\n\r\n            {/* Quick Stats */}\r\n            {activeTab === 'gallery' && images?.length > 0 && (\r\n              <div className=\"mt-12 pt-8 border-t border-border\">\r\n                <h3 className=\"text-lg font-semibold text-foreground mb-4\">Estad铆sticas de la Galer铆a</h3>\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                  <div className=\"bg-card border border-border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"Image\" size={20} className=\"text-blue-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-foreground\">{images?.length}</div>\r\n                        <div className=\"text-sm text-muted-foreground\">Total de Im谩genes</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-card border border-border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"Tag\" size={20} className=\"text-green-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-foreground\">\r\n                          {[...new Set(images?.map(img => img?.category))]?.length}\r\n                        </div>\r\n                        <div className=\"text-sm text-muted-foreground\">Categor铆as</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-card border border-border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"Calendar\" size={20} className=\"text-purple-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-foreground\">\r\n                          {images?.length > 0 \r\n                            ? Math.ceil((new Date() - new Date(Math.min(...images.map(img => new Date(img?.timestamp))))) / (1000 * 60 * 60 * 24))\r\n                            : 0\r\n                          }\r\n                        </div>\r\n                        <div className=\"text-sm text-muted-foreground\">D铆as de Documentaci贸n</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-card border border-border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"TrendingUp\" size={20} className=\"text-orange-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-foreground\">\r\n                          {images?.filter(img => \r\n                            new Date(img?.timestamp) > new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)\r\n                          )?.length}\r\n                        </div>\r\n                        <div className=\"text-sm text-muted-foreground\">Esta Semana</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectDetailGallery;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\n\r\nconst ImageGallery = ({ images, selectedImages, onImageSelect, onImageClick, viewMode }) => {\r\n  const getCategoryColor = (category) => {\r\n    const colors = {\r\n      'material-reception': 'bg-blue-100 text-blue-800',\r\n      'manufacturing': 'bg-orange-100 text-orange-800',\r\n      'quality-control': 'bg-purple-100 text-purple-800',\r\n      'documentation': 'bg-green-100 text-green-800',\r\n      'installation': 'bg-indigo-100 text-indigo-800',\r\n      'testing': 'bg-yellow-100 text-yellow-800',\r\n      'training': 'bg-pink-100 text-pink-800',\r\n      'completion': 'bg-emerald-100 text-emerald-800',\r\n      'new-upload': 'bg-gray-100 text-gray-800'\r\n    };\r\n    return colors?.[category] || 'bg-gray-100 text-gray-800';\r\n  };\r\n\r\n  const getPhaseColor = (phase) => {\r\n    const colors = {\r\n      'planning': 'text-blue-600',\r\n      'in-progress': 'text-orange-600',\r\n      'completed': 'text-green-600',\r\n      'on-hold': 'text-yellow-600',\r\n      'cancelled': 'text-red-600'\r\n    };\r\n    return colors?.[phase] || 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString)?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (viewMode === 'list') {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {images?.map((image) => (\r\n          <div \r\n            key={image?.id} \r\n            className=\"bg-card border border-border rounded-lg p-4 hover:shadow-md transition-smooth\"\r\n          >\r\n            <div className=\"flex items-start space-x-4\">\r\n              {/* Selection Checkbox */}\r\n              <div className=\"flex-shrink-0 pt-1\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedImages?.includes(image?.id)}\r\n                  onChange={() => onImageSelect(image?.id)}\r\n                  className=\"rounded border-border focus:ring-primary\"\r\n                />\r\n              </div>\r\n              \r\n              {/* Thumbnail */}\r\n              <div \r\n                className=\"flex-shrink-0 cursor-pointer\"\r\n                onClick={() => onImageClick(image)}\r\n              >\r\n                <img\r\n                  src={image?.thumbnail}\r\n                  alt={image?.title}\r\n                  className=\"w-24 h-18 object-cover rounded-lg border hover:shadow-lg transition-smooth\"\r\n                />\r\n              </div>\r\n              \r\n              {/* Image Details */}\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <h3 \r\n                      className=\"text-lg font-medium text-foreground cursor-pointer hover:text-primary truncate\"\r\n                      onClick={() => onImageClick(image)}\r\n                    >\r\n                      {image?.title}\r\n                    </h3>\r\n                    <p className=\"text-sm text-muted-foreground mt-1 line-clamp-2\">\r\n                      {image?.description}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-2 ml-4\">\r\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(image?.category)}`}>\r\n                      {image?.categoryLabel}\r\n                    </span>\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <Icon \r\n                        name=\"Circle\" \r\n                        size={12} \r\n                        className={`fill-current ${getPhaseColor(image?.phase)}`}\r\n                      />\r\n                      <span className={`text-xs ${getPhaseColor(image?.phase)}`}>\r\n                        {image?.phaseLabel}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mt-3 text-sm text-muted-foreground\">\r\n                  <div>\r\n                    <span className=\"block text-xs\">Fecha de Subida</span>\r\n                    <span className=\"text-foreground\">{formatDate(image?.uploadDate)}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"block text-xs\">Subido por</span>\r\n                    <span className=\"text-foreground\">{image?.uploader}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"block text-xs\">Tama帽o</span>\r\n                    <span className=\"text-foreground\">{image?.fileSize}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"block text-xs\">Dimensiones</span>\r\n                    <span className=\"text-foreground\">{image?.dimensions}</span>\r\n                  </div>\r\n                </div>\r\n                \r\n                {image?.tags && image?.tags?.length > 0 && (\r\n                  <div className=\"mt-3\">\r\n                    <div className=\"flex flex-wrap gap-1\">\r\n                      {image?.tags?.slice(0, 4)?.map((tag, index) => (\r\n                        <span \r\n                          key={index}\r\n                          className=\"px-2 py-1 bg-muted text-muted-foreground rounded text-xs\"\r\n                        >\r\n                          #{tag}\r\n                        </span>\r\n                      ))}\r\n                      {image?.tags?.length > 4 && (\r\n                        <span className=\"px-2 py-1 bg-muted text-muted-foreground rounded text-xs\">\r\n                          +{image?.tags?.length - 4} m谩s\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Grid/Masonry View\r\n  return (\r\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\r\n      {images?.map((image, index) => (\r\n        <div \r\n          key={image?.id} \r\n          className={`bg-card border border-border rounded-lg overflow-hidden hover:shadow-lg transition-smooth group ${\r\n            index % 7 === 0 ? 'md:col-span-2 md:row-span-2' : \r\n            index % 5 === 0 ? 'lg:col-span-2' : ''\r\n          }`}\r\n        >\r\n          {/* Selection Checkbox */}\r\n          <div className=\"absolute top-2 left-2 z-10\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={selectedImages?.includes(image?.id)}\r\n              onChange={() => onImageSelect(image?.id)}\r\n              className=\"rounded border-border bg-white/90 backdrop-blur-sm focus:ring-primary\"\r\n            />\r\n          </div>\r\n          \r\n          {/* Category Badge */}\r\n          <div className=\"absolute top-2 right-2 z-10\">\r\n            <span className={`px-2 py-1 rounded-full text-xs font-medium backdrop-blur-sm ${getCategoryColor(image?.category)}`}>\r\n              {image?.categoryLabel}\r\n            </span>\r\n          </div>\r\n          \r\n          {/* Image */}\r\n          <div \r\n            className=\"relative cursor-pointer overflow-hidden\"\r\n            onClick={() => onImageClick(image)}\r\n          >\r\n            <img\r\n              src={image?.thumbnail}\r\n              alt={image?.title}\r\n              className={`w-full object-cover transition-smooth group-hover:scale-105 ${\r\n                index % 7 === 0 ? 'h-64 md:h-96' : 'h-48'\r\n              }`}\r\n              loading=\"lazy\"\r\n            />\r\n            \r\n            {/* Hover Overlay */}\r\n            <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-smooth flex items-center justify-center\">\r\n              <div className=\"flex items-center space-x-2 text-white\">\r\n                <Icon name=\"Eye\" size={20} />\r\n                <span className=\"text-sm\">Ver imagen</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Image Info */}\r\n          <div className=\"p-3\">\r\n            <h3 className=\"font-medium text-foreground text-sm line-clamp-2 mb-1\">\r\n              {image?.title}\r\n            </h3>\r\n            \r\n            <div className=\"flex items-center justify-between text-xs text-muted-foreground mb-2\">\r\n              <span>{formatDate(image?.uploadDate)}</span>\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Icon \r\n                  name=\"Circle\" \r\n                  size={8} \r\n                  className={`fill-current ${getPhaseColor(image?.phase)}`}\r\n                />\r\n                <span className={getPhaseColor(image?.phase)}>\r\n                  {image?.phaseLabel}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            \r\n            <p className=\"text-xs text-muted-foreground line-clamp-2\">\r\n              {image?.description}\r\n            </p>\r\n            \r\n            {/* Image Meta */}\r\n            <div className=\"flex items-center justify-between mt-2 text-xs text-muted-foreground\">\r\n              <span>{image?.fileSize}</span>\r\n              <span>por {image?.uploader}</span>\r\n            </div>\r\n            \r\n            {/* Tags Preview */}\r\n            {image?.tags && image?.tags?.length > 0 && (\r\n              <div className=\"mt-2\">\r\n                <div className=\"flex flex-wrap gap-1\">\r\n                  {image?.tags?.slice(0, 2)?.map((tag, tagIndex) => (\r\n                    <span \r\n                      key={tagIndex}\r\n                      className=\"px-1 py-0.5 bg-muted text-muted-foreground rounded text-xs\"\r\n                    >\r\n                      #{tag}\r\n                    </span>\r\n                  ))}\r\n                  {image?.tags?.length > 2 && (\r\n                    <span className=\"px-1 py-0.5 bg-muted text-muted-foreground rounded text-xs\">\r\n                      +{image?.tags?.length - 2}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst FilterToolbar = ({ onFilterChange, totalImages, filteredImages, selectedCount, onSelectAll }) => {\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    category: '',\r\n    phase: '',\r\n    dateFrom: '',\r\n    dateTo: ''\r\n  });\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    const newFilters = { ...filters, [key]: value };\r\n    setFilters(newFilters);\r\n    onFilterChange(newFilters);\r\n  };\r\n\r\n  const clearFilters = () => {\r\n    const emptyFilters = {\r\n      search: '',\r\n      category: '',\r\n      phase: '',\r\n      dateFrom: '',\r\n      dateTo: ''\r\n    };\r\n    setFilters(emptyFilters);\r\n    onFilterChange(emptyFilters);\r\n  };\r\n\r\n  const categoryOptions = [\r\n    { value: '', label: 'Todas las categor铆as' },\r\n    { value: 'material-reception', label: 'Recepci贸n de Material' },\r\n    { value: 'manufacturing', label: 'Fabricaci贸n' },\r\n    { value: 'quality-control', label: 'Control de Calidad' },\r\n    { value: 'documentation', label: 'Documentaci贸n' },\r\n    { value: 'installation', label: 'Instalaci贸n' },\r\n    { value: 'testing', label: 'Pruebas' },\r\n    { value: 'training', label: 'Capacitaci贸n' },\r\n    { value: 'completion', label: 'Finalizaci贸n' },\r\n    { value: 'new-upload', label: 'Nueva Imagen' }\r\n  ];\r\n\r\n  const phaseOptions = [\r\n    { value: '', label: 'Todas las fases' },\r\n    { value: 'planning', label: 'Planificaci贸n' },\r\n    { value: 'in-progress', label: 'En Progreso' },\r\n    { value: 'completed', label: 'Completado' },\r\n    { value: 'on-hold', label: 'En Pausa' },\r\n    { value: 'cancelled', label: 'Cancelado' }\r\n  ];\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some(value => value !== '');\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-4 mb-6\">\r\n      {/* Main Filter Row */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\r\n        <div className=\"flex-1 flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4\">\r\n          {/* Search */}\r\n          <div className=\"flex-1\">\r\n            <div className=\"relative\">\r\n              <Icon name=\"Search\" size={16} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" />\r\n              <Input\r\n                type=\"text\"\r\n                placeholder=\"Buscar por t铆tulo, descripci贸n o etiquetas...\"\r\n                value={filters?.search}\r\n                onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Category Filter */}\r\n          <div className=\"min-w-48\">\r\n            <Select\r\n              value={filters?.category}\r\n              onValueChange={(value) => handleFilterChange('category', value)}\r\n              options={categoryOptions}\r\n            />\r\n          </div>\r\n          \r\n          {/* Phase Filter */}\r\n          <div className=\"min-w-40\">\r\n            <Select\r\n              value={filters?.phase}\r\n              onValueChange={(value) => handleFilterChange('phase', value)}\r\n              options={phaseOptions}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Filter\"\r\n            iconPosition=\"left\"\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n          >\r\n            Filtros {hasActiveFilters && `(${Object.values(filters)?.filter(v => v !== '')?.length})`}\r\n          </Button>\r\n          \r\n          {hasActiveFilters && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"X\"\r\n              iconPosition=\"left\"\r\n              onClick={clearFilters}\r\n            >\r\n              Limpiar\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Expanded Filters */}\r\n      {isExpanded && (\r\n        <div className=\"mt-4 pt-4 border-t border-border\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                Fecha desde\r\n              </label>\r\n              <Input\r\n                type=\"date\"\r\n                value={filters?.dateFrom}\r\n                onChange={(e) => handleFilterChange('dateFrom', e?.target?.value)}\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                Fecha hasta\r\n              </label>\r\n              <Input\r\n                type=\"date\"\r\n                value={filters?.dateTo}\r\n                onChange={(e) => handleFilterChange('dateTo', e?.target?.value)}\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                Filtros r谩pidos\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleFilterChange('dateFrom', new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)?.toISOString()?.split('T')?.[0])}\r\n                >\r\n                  ltima semana\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleFilterChange('category', 'quality-control')}\r\n                >\r\n                  Control de calidad\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleFilterChange('phase', 'completed')}\r\n                >\r\n                  Completados\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Results Summary */}\r\n      <div className=\"mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0 text-sm text-muted-foreground\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <span>\r\n            Mostrando {filteredImages} de {totalImages} im谩genes\r\n          </span>\r\n          {selectedCount > 0 && (\r\n            <>\r\n              <span></span>\r\n              <span className=\"text-primary font-medium\">\r\n                {selectedCount} seleccionada{selectedCount !== 1 ? 's' : ''}\r\n              </span>\r\n            </>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onSelectAll}\r\n            iconName={selectedCount === filteredImages ? \"Square\" : \"CheckSquare\"}\r\n            iconPosition=\"left\"\r\n          >\r\n            {selectedCount === filteredImages ? 'Deseleccionar todo' : 'Seleccionar todo'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterToolbar;","import React, { useState, useEffect, useCallback } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ImageLightbox = ({ \r\n  isOpen, \r\n  onClose, \r\n  currentImage, \r\n  images, \r\n  onNavigate, \r\n  slideshowMode, \r\n  onToggleSlideshow \r\n}) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [zoomLevel, setZoomLevel] = useState(1);\r\n  const [panOffset, setPanOffset] = useState({ x: 0, y: 0 });\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n  const [showMetadata, setShowMetadata] = useState(false);\r\n  const [slideshowInterval, setSlideshowInterval] = useState(null);\r\n\r\n  // Find current image index\r\n  useEffect(() => {\r\n    if (currentImage && images?.length > 0) {\r\n      const index = images?.findIndex(img => img?.id === currentImage?.id);\r\n      if (index !== -1) {\r\n        setCurrentIndex(index);\r\n      }\r\n    }\r\n  }, [currentImage, images]);\r\n\r\n  // Slideshow functionality\r\n  useEffect(() => {\r\n    if (slideshowMode && isOpen) {\r\n      const interval = setInterval(() => {\r\n        handleNext();\r\n      }, 3000); // 3 seconds per image\r\n      setSlideshowInterval(interval);\r\n      \r\n      return () => {\r\n        clearInterval(interval);\r\n        setSlideshowInterval(null);\r\n      };\r\n    } else {\r\n      if (slideshowInterval) {\r\n        clearInterval(slideshowInterval);\r\n        setSlideshowInterval(null);\r\n      }\r\n    }\r\n  }, [slideshowMode, isOpen, currentIndex]);\r\n\r\n  // Keyboard navigation\r\n  const handleKeyDown = useCallback((e) => {\r\n    if (!isOpen) return;\r\n    \r\n    switch (e?.key) {\r\n      case 'Escape':\r\n        onClose();\r\n        break;\r\n      case 'ArrowLeft':\r\n        handlePrevious();\r\n        break;\r\n      case 'ArrowRight':\r\n        handleNext();\r\n        break;\r\n      case ' ':\r\n        e?.preventDefault();\r\n        onToggleSlideshow();\r\n        break;\r\n      case 'i':\r\n        setShowMetadata(!showMetadata);\r\n        break;\r\n      case '=': case'+':\r\n        e?.preventDefault();\r\n        handleZoomIn();\r\n        break;\r\n      case '-':\r\n        e?.preventDefault();\r\n        handleZoomOut();\r\n        break;\r\n      case '0':\r\n        handleZoomReset();\r\n        break;\r\n    }\r\n  }, [isOpen, showMetadata, onToggleSlideshow]);\r\n\r\n  useEffect(() => {\r\n    window?.addEventListener('keydown', handleKeyDown);\r\n    return () => window?.removeEventListener('keydown', handleKeyDown);\r\n  }, [handleKeyDown]);\r\n\r\n  // Navigation functions\r\n  const handleNext = () => {\r\n    if (images?.length === 0) return;\r\n    const nextIndex = (currentIndex + 1) % images?.length;\r\n    const nextImage = images?.[nextIndex];\r\n    setCurrentIndex(nextIndex);\r\n    onNavigate(nextImage);\r\n    resetZoom();\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    if (images?.length === 0) return;\r\n    const prevIndex = currentIndex === 0 ? images?.length - 1 : currentIndex - 1;\r\n    const prevImage = images?.[prevIndex];\r\n    setCurrentIndex(prevIndex);\r\n    onNavigate(prevImage);\r\n    resetZoom();\r\n  };\r\n\r\n  // Zoom functions\r\n  const handleZoomIn = () => {\r\n    setZoomLevel(prev => Math.min(prev * 1.2, 5));\r\n  };\r\n\r\n  const handleZoomOut = () => {\r\n    setZoomLevel(prev => Math.max(prev / 1.2, 0.5));\r\n  };\r\n\r\n  const resetZoom = () => {\r\n    setZoomLevel(1);\r\n    setPanOffset({ x: 0, y: 0 });\r\n  };\r\n\r\n  const handleZoomReset = () => {\r\n    resetZoom();\r\n  };\r\n\r\n  // Pan functions\r\n  const handleMouseDown = (e) => {\r\n    if (zoomLevel > 1) {\r\n      setIsDragging(true);\r\n      setDragStart({ x: e?.clientX - panOffset?.x, y: e?.clientY - panOffset?.y });\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (isDragging && zoomLevel > 1) {\r\n      setPanOffset({\r\n        x: e?.clientX - dragStart?.x,\r\n        y: e?.clientY - dragStart?.y\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setIsDragging(false);\r\n  };\r\n\r\n  // Download function\r\n  const handleDownload = async () => {\r\n    if (!currentImage) return;\r\n    \r\n    try {\r\n      const link = document.createElement('a');\r\n      link.href = currentImage?.url;\r\n      link.download = `${currentImage?.title || 'image'}.jpg`;\r\n      document.body?.appendChild(link);\r\n      link?.click();\r\n      document.body?.removeChild(link);\r\n    } catch (error) {\r\n      console.error('Error downloading image:', error);\r\n    }\r\n  };\r\n\r\n  // Format date function\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString)?.toLocaleDateString('es-MX', {\r\n      weekday: 'long',\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (!isOpen || !currentImage) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 bg-black/95 backdrop-blur-sm\">\r\n      {/* Header Bar */}\r\n      <div className=\"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent\">\r\n        <div className=\"flex items-center justify-between p-4\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"X\"\r\n              onClick={onClose}\r\n              className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n            />\r\n            <div className=\"text-white\">\r\n              <h3 className=\"font-medium\">{currentImage?.title}</h3>\r\n              <p className=\"text-sm text-white/80\">\r\n                {currentIndex + 1} de {images?.length} im谩genes\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Info\"\r\n              onClick={() => setShowMetadata(!showMetadata)}\r\n              className={`bg-white/10 border-white/20 text-white hover:bg-white/20 ${\r\n                showMetadata ? 'bg-white/20' : ''\r\n              }`}\r\n            />\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName={slideshowMode ? \"Pause\" : \"Play\"}\r\n              onClick={onToggleSlideshow}\r\n              className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n            />\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Download\"\r\n              onClick={handleDownload}\r\n              className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Image Area */}\r\n      <div \r\n        className=\"flex items-center justify-center h-full p-20\"\r\n        onMouseDown={handleMouseDown}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        onMouseLeave={handleMouseUp}\r\n      >\r\n        <img\r\n          src={currentImage?.url}\r\n          alt={currentImage?.title}\r\n          className={`max-w-full max-h-full object-contain transition-transform duration-200 ${\r\n            zoomLevel > 1 ? 'cursor-grab' : 'cursor-zoom-in'\r\n          } ${isDragging ? 'cursor-grabbing' : ''}`}\r\n          style={{\r\n            transform: `scale(${zoomLevel}) translate(${panOffset?.x / zoomLevel}px, ${panOffset?.y / zoomLevel}px)`\r\n          }}\r\n          onClick={() => zoomLevel === 1 && setZoomLevel(2)}\r\n          draggable={false}\r\n        />\r\n      </div>\r\n\r\n      {/* Navigation Arrows */}\r\n      <button\r\n        onClick={handlePrevious}\r\n        className=\"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 rounded-full p-3 text-white transition-smooth\"\r\n        disabled={images?.length <= 1}\r\n      >\r\n        <Icon name=\"ChevronLeft\" size={24} />\r\n      </button>\r\n\r\n      <button\r\n        onClick={handleNext}\r\n        className=\"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 rounded-full p-3 text-white transition-smooth\"\r\n        disabled={images?.length <= 1}\r\n      >\r\n        <Icon name=\"ChevronRight\" size={24} />\r\n      </button>\r\n\r\n      {/* Zoom Controls */}\r\n      <div className=\"absolute bottom-4 left-4 flex items-center space-x-2\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          iconName=\"Minus\"\r\n          onClick={handleZoomOut}\r\n          className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n          disabled={zoomLevel <= 0.5}\r\n        />\r\n        <span className=\"text-white text-sm px-3 py-1 bg-white/10 rounded\">\r\n          {Math.round(zoomLevel * 100)}%\r\n        </span>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          iconName=\"Plus\"\r\n          onClick={handleZoomIn}\r\n          className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n          disabled={zoomLevel >= 5}\r\n        />\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          iconName=\"RotateCcw\"\r\n          onClick={handleZoomReset}\r\n          className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n        />\r\n      </div>\r\n\r\n      {/* Image Counter */}\r\n      <div className=\"absolute bottom-4 right-4 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg px-4 py-2\">\r\n        <div className=\"flex items-center space-x-2 text-white text-sm\">\r\n          <Icon name=\"Image\" size={16} />\r\n          <span>{currentIndex + 1} / {images?.length}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Metadata Panel */}\r\n      {showMetadata && (\r\n        <div className=\"absolute top-20 right-4 bottom-4 w-80 bg-white/95 backdrop-blur-sm border border-white/20 rounded-lg p-4 overflow-y-auto\">\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <h4 className=\"font-semibold text-foreground mb-2\">Informaci贸n de la Imagen</h4>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">T铆tulo:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.title}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Categor铆a:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.categoryLabel}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Fase:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.phaseLabel}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Descripci贸n:</span>\r\n                  <p className=\"mt-1 text-foreground\">{currentImage?.description}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-semibold text-foreground mb-2\">Detalles del Archivo</h4>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Tama帽o:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.fileSize}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Tipo:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.fileType}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Dimensiones:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.dimensions}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Subido por:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.uploader}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Fecha:</span>\r\n                  <span className=\"ml-2 text-foreground\">{formatDate(currentImage?.uploadDate)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {currentImage?.tags && currentImage?.tags?.length > 0 && (\r\n              <div>\r\n                <h4 className=\"font-semibold text-foreground mb-2\">Etiquetas</h4>\r\n                <div className=\"flex flex-wrap gap-1\">\r\n                  {currentImage?.tags?.map((tag, index) => (\r\n                    <span \r\n                      key={index}\r\n                      className=\"px-2 py-1 bg-muted text-muted-foreground rounded text-xs\"\r\n                    >\r\n                      #{tag}\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Slideshow Progress */}\r\n      {slideshowMode && (\r\n        <div className=\"absolute bottom-0 left-0 right-0 h-1 bg-white/20\">\r\n          <div \r\n            className=\"h-full bg-primary transition-all duration-3000 ease-linear\"\r\n            style={{ width: `${((currentIndex + 1) / images?.length) * 100}%` }}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Keyboard Shortcuts Help */}\r\n      <div className=\"absolute top-4 left-1/2 transform -translate-x-1/2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg px-3 py-1 text-white text-xs opacity-60\">\r\n        ESC: Cerrar | : Navegar | Espacio: Presentaci贸n | I: Info | +/-: Zoom\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageLightbox;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst BulkActions = ({ selectedCount, onBulkDownload, onBulkDelete, onClearSelection }) => {\r\n  return (\r\n    <div className=\"bg-primary/10 border border-primary/20 rounded-lg p-4 mb-6\">\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center\">\r\n            <Icon name=\"CheckSquare\" size={16} className=\"text-primary\" />\r\n          </div>\r\n          <div>\r\n            <span className=\"text-foreground font-medium\">\r\n              {selectedCount} imagen{selectedCount !== 1 ? 'es' : ''} seleccionada{selectedCount !== 1 ? 's' : ''}\r\n            </span>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Elija una acci贸n para aplicar a las im谩genes seleccionadas\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-3\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n            onClick={onBulkDownload}\r\n          >\r\n            Descargar ({selectedCount})\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Share\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              // Share functionality could be implemented here\r\n              alert('Funci贸n de compartir pr贸ximamente disponible');\r\n            }}\r\n          >\r\n            Compartir\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Archive\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              // Archive functionality could be implemented here\r\n              alert('Funci贸n de archivar pr贸ximamente disponible');\r\n            }}\r\n          >\r\n            Archivar\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Trash2\"\r\n            iconPosition=\"left\"\r\n            onClick={onBulkDelete}\r\n            className=\"text-red-600 border-red-200 hover:bg-red-50 hover:border-red-300\"\r\n          >\r\n            Eliminar\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            iconName=\"X\"\r\n            iconPosition=\"left\"\r\n            onClick={onClearSelection}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Additional Bulk Actions */}\r\n      <div className=\"mt-4 pt-4 border-t border-border\">\r\n        <div className=\"flex flex-wrap gap-2 text-sm\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Tag\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              const newTag = prompt('Ingrese una nueva etiqueta para las im谩genes seleccionadas:');\r\n              if (newTag) {\r\n                console.log(`Agregando etiqueta \"${newTag}\" a ${selectedCount} im谩genes`);\r\n                // Tag functionality could be implemented here\r\n              }\r\n            }}\r\n          >\r\n            Agregar Etiqueta\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"FolderPlus\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              // Move to category functionality could be implemented here\r\n              alert('Funci贸n de mover a categor铆a pr贸ximamente disponible');\r\n            }}\r\n          >\r\n            Mover a Categor铆a\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Edit\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              // Batch edit functionality could be implemented here  \r\n              alert('Funci贸n de edici贸n en lote pr贸ximamente disponible');\r\n            }}\r\n          >\r\n            Editar en Lote\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"FileText\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              // Generate report functionality could be implemented here\r\n              console.log(`Generando reporte para ${selectedCount} im谩genes seleccionadas`);\r\n              alert('Generando reporte de im谩genes seleccionadas...');\r\n            }}\r\n          >\r\n            Generar Reporte\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BulkActions;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst ProjectInfo = ({ project, imageCount }) => {\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 mb-6\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n        {/* Project Details */}\r\n        <div className=\"md:col-span-2\">\r\n          <div className=\"flex items-start space-x-4\">\r\n            <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center\">\r\n              <Icon name=\"Folder\" size={24} className=\"text-primary\" />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <h2 className=\"text-xl font-semibold text-foreground mb-1\">\r\n                {project?.name}\r\n              </h2>\r\n              <div className=\"flex items-center space-x-4 text-sm text-muted-foreground\">\r\n                <span className=\"flex items-center space-x-1\">\r\n                  <Icon name=\"Hash\" size={14} />\r\n                  <span>{project?.code}</span>\r\n                </span>\r\n                <span className=\"flex items-center space-x-1\">\r\n                  <Icon name=\"Building\" size={14} />\r\n                  <span>{project?.client}</span>\r\n                </span>\r\n                <span className=\"flex items-center space-x-1\">\r\n                  <Icon name=\"MapPin\" size={14} />\r\n                  <span>{project?.location}</span>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Image Statistics */}\r\n        <div className=\"flex items-center space-x-6\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-2xl font-bold text-primary mb-1\">\r\n              {imageCount}\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              Im谩genes totales\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"text-center\">\r\n            <div className=\"text-2xl font-bold text-green-600 mb-1\">\r\n              {Math.round(imageCount * 0.65)}\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              Documentadas\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"text-center\">\r\n            <div className=\"text-2xl font-bold text-orange-600 mb-1\">\r\n              {Math.round(imageCount * 0.25)}\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              En revisi贸n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Project Status */}\r\n        <div className=\"flex items-center justify-end space-x-3\">\r\n          <div className=\"text-right\">\r\n            <div className=\"text-sm text-muted-foreground mb-1\">Estado del proyecto</div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"Activity\" size={16} className=\"text-green-600\" />\r\n              <span className=\"text-sm font-medium text-green-600\">\r\n                {project?.status}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"w-2 h-16 bg-green-600/20 rounded-full overflow-hidden\">\r\n            <div \r\n              className=\"w-full bg-green-600 rounded-full transition-all duration-500\"\r\n              style={{ height: '75%' }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Info Cards */}\r\n      <div className=\"mt-6 grid grid-cols-2 lg:grid-cols-6 gap-4\">\r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Package\" size={16} className=\"text-blue-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Materiales</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.15)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Cog\" size={16} className=\"text-orange-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Fabricaci贸n</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.20)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Shield\" size={16} className=\"text-purple-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Calidad</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.18)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Wrench\" size={16} className=\"text-indigo-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Instalaci贸n</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.22)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Pruebas</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.15)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"FileCheck\" size={16} className=\"text-emerald-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Entrega</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.10)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectInfo;","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ImageGallery from './components/ImageGallery';\r\nimport FilterToolbar from './components/FilterToolbar';\r\nimport ImageLightbox from './components/ImageLightbox';\r\nimport BulkActions from './components/BulkActions';\r\nimport ProjectInfo from './components/ProjectInfo';\r\n\r\nconst ProjectGalleryViewer = () => {\r\n  const { projectId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n  const [images, setImages] = useState([]);\r\n  const [filteredImages, setFilteredImages] = useState([]);\r\n  const [selectedImages, setSelectedImages] = useState([]);\r\n  const [currentImage, setCurrentImage] = useState(null);\r\n  const [isLightboxOpen, setIsLightboxOpen] = useState(false);\r\n  const [isUploadingImages, setIsUploadingImages] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState('grid');\r\n  const [slideshowMode, setSlideshowMode] = useState(false);\r\n\r\n  // Sample project data\r\n  const project = {\r\n    id: projectId,\r\n    code: \"PROJ-2024-001\",\r\n    name: \"Instalaci贸n HVAC Torre Corporativa\",\r\n    client: \"ABC Corporation\",\r\n    status: \"En Progreso\",\r\n    location: \"Ciudad de M茅xico, CDMX\"\r\n  };\r\n\r\n  // Sample images with project phases\r\n  const mockImages = [\r\n    {\r\n      id: \"img-1\",\r\n      url: \"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=300&h=200&fit=crop\",\r\n      title: \"Recepci贸n de Materiales - Ductos HVAC\",\r\n      category: \"material-reception\",\r\n      categoryLabel: \"Recepci贸n de Material\",\r\n      phase: \"planning\",\r\n      phaseLabel: \"Planificaci贸n\",\r\n      uploadDate: \"2024-10-01T10:30:00Z\",\r\n      fileSize: \"2.4 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Carlos Mart铆nez\",\r\n      description: \"Llegada de ductos principales para sistema HVAC\",\r\n      tags: [\"hvac\", \"ductos\", \"materiales\", \"recepci贸n\"]\r\n    },\r\n    {\r\n      id: \"img-2\",\r\n      url: \"https://images.unsplash.com/photo-1584464491033-06628f3a6b7b?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1584464491033-06628f3a6b7b?w=300&h=200&fit=crop\",\r\n      title: \"Instalaci贸n de Unidades Enfriadoras\",\r\n      category: \"manufacturing\",\r\n      categoryLabel: \"Fabricaci贸n\",\r\n      phase: \"in-progress\",\r\n      phaseLabel: \"En Progreso\",\r\n      uploadDate: \"2024-10-02T14:20:00Z\",\r\n      fileSize: \"3.1 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Ana Rodr铆guez\",\r\n      description: \"Proceso de instalaci贸n de unidades enfriadoras en azotea\",\r\n      tags: [\"instalaci贸n\", \"enfriadores\", \"azotea\", \"hvac\"]\r\n    },\r\n    {\r\n      id: \"img-3\",\r\n      url: \"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300&h=200&fit=crop\",\r\n      title: \"Control de Calidad - Soldaduras\",\r\n      category: \"quality-control\",\r\n      categoryLabel: \"Control de Calidad\",\r\n      phase: \"in-progress\",\r\n      phaseLabel: \"En Progreso\",\r\n      uploadDate: \"2024-10-02T16:45:00Z\",\r\n      fileSize: \"1.8 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Luis Garc铆a\",\r\n      description: \"Inspecci贸n de soldaduras en conexiones principales\",\r\n      tags: [\"control-calidad\", \"soldaduras\", \"inspecci贸n\", \"conexiones\"]\r\n    },\r\n    {\r\n      id: \"img-4\",\r\n      url: \"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1497366216548-37526070297c?w=300&h=200&fit=crop\",\r\n      title: \"Documentaci贸n T茅cnica\",\r\n      category: \"documentation\",\r\n      categoryLabel: \"Documentaci贸n\",\r\n      phase: \"completed\",\r\n      phaseLabel: \"Completado\",\r\n      uploadDate: \"2024-10-03T09:10:00Z\",\r\n      fileSize: \"0.9 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Carlos Mart铆nez\",\r\n      description: \"Planos y especificaciones t茅cnicas actualizadas\",\r\n      tags: [\"documentaci贸n\", \"planos\", \"especificaciones\", \"t茅cnico\"]\r\n    },\r\n    {\r\n      id: \"img-5\",\r\n      url: \"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=300&h=200&fit=crop\",\r\n      title: \"Instalaci贸n Final - Sala de M谩quinas\",\r\n      category: \"installation\",\r\n      categoryLabel: \"Instalaci贸n\",\r\n      phase: \"completed\",\r\n      phaseLabel: \"Completado\",\r\n      uploadDate: \"2024-10-03T11:30:00Z\",\r\n      fileSize: \"2.7 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Ana Rodr铆guez\",\r\n      description: \"Vista final de la sala de m谩quinas completamente instalada\",\r\n      tags: [\"instalaci贸n\", \"sala-m谩quinas\", \"completado\", \"final\"]\r\n    },\r\n    {\r\n      id: \"img-6\",\r\n      url: \"https://images.unsplash.com/photo-1581094794329-c8112a89af12?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1581094794329-c8112a89af12?w=300&h=200&fit=crop\",\r\n      title: \"Pruebas de Sistema - Operaci贸n\",\r\n      category: \"testing\",\r\n      categoryLabel: \"Pruebas\",\r\n      phase: \"in-progress\",\r\n      phaseLabel: \"En Progreso\",\r\n      uploadDate: \"2024-10-03T13:45:00Z\",\r\n      fileSize: \"2.1 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Luis Garc铆a\",\r\n      description: \"Realizaci贸n de pruebas operativas del sistema HVAC\",\r\n      tags: [\"pruebas\", \"operaci贸n\", \"sistema\", \"funcionamiento\"]\r\n    },\r\n    {\r\n      id: \"img-7\",\r\n      url: \"https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=300&h=200&fit=crop\",\r\n      title: \"Capacitaci贸n del Personal\",\r\n      category: \"training\",\r\n      categoryLabel: \"Capacitaci贸n\",\r\n      phase: \"completed\",\r\n      phaseLabel: \"Completado\",\r\n      uploadDate: \"2024-10-03T15:20:00Z\",\r\n      fileSize: \"1.5 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Carlos Mart铆nez\",\r\n      description: \"Sesi贸n de capacitaci贸n para personal de mantenimiento\",\r\n      tags: [\"capacitaci贸n\", \"personal\", \"mantenimiento\", \"entrenamiento\"]\r\n    },\r\n    {\r\n      id: \"img-8\",\r\n      url: \"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=300&h=200&fit=crop\",\r\n      title: \"Entrega Final del Proyecto\",\r\n      category: \"completion\",\r\n      categoryLabel: \"Finalizaci贸n\",\r\n      phase: \"completed\",\r\n      phaseLabel: \"Completado\",\r\n      uploadDate: \"2024-10-03T17:00:00Z\",\r\n      fileSize: \"3.3 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Ana Rodr铆guez\",\r\n      description: \"Acta de entrega firmada y sistema funcionando\",\r\n      tags: [\"entrega\", \"finalizaci贸n\", \"acta\", \"completado\"]\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadImages = async () => {\r\n      setIsLoading(true);\r\n      await new Promise(resolve => setTimeout(resolve, 800));\r\n      setImages(mockImages);\r\n      setFilteredImages(mockImages);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    loadImages();\r\n  }, [projectId]);\r\n\r\n  const handleFilterChange = (filters) => {\r\n    let filtered = [...images];\r\n\r\n    if (filters?.search) {\r\n      const searchTerm = filters?.search?.toLowerCase();\r\n      filtered = filtered?.filter(img => \r\n        img?.title?.toLowerCase()?.includes(searchTerm) ||\r\n        img?.description?.toLowerCase()?.includes(searchTerm) ||\r\n        img?.tags?.some(tag => tag?.toLowerCase()?.includes(searchTerm))\r\n      );\r\n    }\r\n\r\n    if (filters?.category) {\r\n      filtered = filtered?.filter(img => img?.category === filters?.category);\r\n    }\r\n\r\n    if (filters?.phase) {\r\n      filtered = filtered?.filter(img => img?.phase === filters?.phase);\r\n    }\r\n\r\n    if (filters?.dateFrom) {\r\n      filtered = filtered?.filter(img => \r\n        new Date(img?.uploadDate) >= new Date(filters?.dateFrom)\r\n      );\r\n    }\r\n\r\n    if (filters?.dateTo) {\r\n      filtered = filtered?.filter(img => \r\n        new Date(img?.uploadDate) <= new Date(filters?.dateTo)\r\n      );\r\n    }\r\n\r\n    setFilteredImages(filtered);\r\n  };\r\n\r\n  const handleImageSelect = (imageId) => {\r\n    setSelectedImages(prev => \r\n      prev?.includes(imageId)\r\n        ? prev?.filter(id => id !== imageId)\r\n        : [...prev, imageId]\r\n    );\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedImages?.length === filteredImages?.length) {\r\n      setSelectedImages([]);\r\n    } else {\r\n      setSelectedImages(filteredImages?.map(img => img?.id));\r\n    }\r\n  };\r\n\r\n  const handleImageClick = (image) => {\r\n    setCurrentImage(image);\r\n    setIsLightboxOpen(true);\r\n  };\r\n\r\n  const handleImageUpload = async () => {\r\n    try {\r\n      setIsUploadingImages(true);\r\n      \r\n      const fileInput = document.createElement('input');\r\n      fileInput.type = 'file';\r\n      fileInput.accept = 'image/*';\r\n      fileInput.multiple = true;\r\n      \r\n      fileInput.onchange = async (event) => {\r\n        const files = Array.from(event?.target?.files || []);\r\n        \r\n        if (files?.length > 0) {\r\n          const newImages = [];\r\n          \r\n          for (const file of files) {\r\n            if (!file?.type?.startsWith('image/')) continue;\r\n            if (file?.size > 10 * 1024 * 1024) continue; // 10MB limit\r\n            \r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n              const newImage = {\r\n                id: `img-${Date.now()}-${Math.random()?.toString(36)?.substr(2, 9)}`,\r\n                url: e?.target?.result,\r\n                thumbnail: e?.target?.result,\r\n                title: file?.name?.replace(/\\.[^/.]+$/, \"\"),\r\n                category: \"new-upload\",\r\n                categoryLabel: \"Nueva Imagen\",\r\n                phase: \"in-progress\",\r\n                phaseLabel: \"En Progreso\",\r\n                uploadDate: new Date()?.toISOString(),\r\n                fileSize: `${(file?.size / 1024 / 1024)?.toFixed(1)} MB`,\r\n                fileType: file?.type,\r\n                dimensions: \"Unknown\",\r\n                uploader: \"Usuario Actual\",\r\n                description: `Imagen subida: ${file?.name}`,\r\n                tags: [\"nueva\", \"upload\", \"reciente\"]\r\n              };\r\n              \r\n              newImages?.push(newImage);\r\n              \r\n              if (newImages?.length === files?.length) {\r\n                setImages(prev => [...newImages, ...prev]);\r\n                setFilteredImages(prev => [...newImages, ...prev]);\r\n                console.log(`${files?.length} im谩genes cargadas exitosamente`);\r\n              }\r\n            };\r\n            \r\n            reader?.readAsDataURL(file);\r\n          }\r\n        }\r\n        \r\n        setIsUploadingImages(false);\r\n      };\r\n      \r\n      fileInput?.click();\r\n      \r\n    } catch (error) {\r\n      console.error('Error al subir im谩genes:', error);\r\n      setIsUploadingImages(false);\r\n    }\r\n  };\r\n\r\n  const handleBulkDownload = async () => {\r\n    if (selectedImages?.length === 0) return;\r\n    \r\n    try {\r\n      const selectedImageData = images?.filter(img => selectedImages?.includes(img?.id));\r\n      \r\n      for (const image of selectedImageData) {\r\n        const link = document.createElement('a');\r\n        link.href = image?.url;\r\n        link.download = `${image?.title || 'image'}.jpg`;\r\n        document.body?.appendChild(link);\r\n        link?.click();\r\n        document.body?.removeChild(link);\r\n        \r\n        // Add delay between downloads\r\n        await new Promise(resolve => setTimeout(resolve, 200));\r\n      }\r\n      \r\n      console.log(`${selectedImages?.length} im谩genes descargadas`);\r\n    } catch (error) {\r\n      console.error('Error al descargar im谩genes:', error);\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = () => {\r\n    if (selectedImages?.length === 0) return;\r\n    \r\n    const confirmed = window.confirm(\r\n      `驴Est谩 seguro de que desea eliminar ${selectedImages?.length} imagen(es) seleccionada(s)?\\n\\nEsta acci贸n no se puede deshacer.`\r\n    );\r\n    \r\n    if (confirmed) {\r\n      setImages(prev => prev?.filter(img => !selectedImages?.includes(img?.id)));\r\n      setFilteredImages(prev => prev?.filter(img => !selectedImages?.includes(img?.id)));\r\n      setSelectedImages([]);\r\n      console.log(`${selectedImages?.length} im谩genes eliminadas`);\r\n    }\r\n  };\r\n\r\n  const startSlideshow = () => {\r\n    if (filteredImages?.length > 0) {\r\n      setSlideshowMode(true);\r\n      setCurrentImage(filteredImages?.[0]);\r\n      setIsLightboxOpen(true);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando galer铆a del proyecto...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n      \r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n        \r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Header with Navigation */}\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  iconName=\"ArrowLeft\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => navigate('/proyectos')}\r\n                >\r\n                  Volver a Proyectos\r\n                </Button>\r\n                <div>\r\n                  <h1 className=\"text-2xl font-bold text-foreground\">Galer铆a del Proyecto</h1>\r\n                  <p className=\"text-muted-foreground\">{project?.name} - {project?.code}</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-3\">\r\n                {/* View Mode Toggle */}\r\n                <div className=\"flex bg-muted rounded-lg p-1\">\r\n                  <button\r\n                    onClick={() => setViewMode('grid')}\r\n                    className={`px-3 py-2 rounded-md transition-smooth ${\r\n                      viewMode === 'grid' ?'bg-primary text-primary-foreground' :'text-muted-foreground hover:text-foreground'\r\n                    }`}\r\n                  >\r\n                    <Icon name=\"Grid3X3\" size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setViewMode('list')}\r\n                    className={`px-3 py-2 rounded-md transition-smooth ${\r\n                      viewMode === 'list' ?'bg-primary text-primary-foreground' :'text-muted-foreground hover:text-foreground'\r\n                    }`}\r\n                  >\r\n                    <Icon name=\"List\" size={16} />\r\n                  </button>\r\n                </div>\r\n\r\n                <Button\r\n                  onClick={startSlideshow}\r\n                  variant=\"outline\"\r\n                  iconName=\"Play\"\r\n                  iconPosition=\"left\"\r\n                >\r\n                  Presentaci贸n\r\n                </Button>\r\n\r\n                <Button\r\n                  onClick={handleImageUpload}\r\n                  disabled={isUploadingImages}\r\n                  iconName={isUploadingImages ? \"Loader2\" : \"Upload\"}\r\n                  iconPosition=\"left\"\r\n                  className={isUploadingImages ? \"animate-spin\" : \"\"}\r\n                >\r\n                  {isUploadingImages ? 'Subiendo...' : 'Subir Im谩genes'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Project Info Panel */}\r\n            <ProjectInfo project={project} imageCount={filteredImages?.length} />\r\n\r\n            {/* Filter Toolbar */}\r\n            <FilterToolbar \r\n              onFilterChange={handleFilterChange}\r\n              totalImages={images?.length}\r\n              filteredImages={filteredImages?.length}\r\n              selectedCount={selectedImages?.length}\r\n              onSelectAll={handleSelectAll}\r\n            />\r\n\r\n            {/* Bulk Actions */}\r\n            {selectedImages?.length > 0 && (\r\n              <BulkActions\r\n                selectedCount={selectedImages?.length}\r\n                onBulkDownload={handleBulkDownload}\r\n                onBulkDelete={handleBulkDelete}\r\n                onClearSelection={() => setSelectedImages([])}\r\n              />\r\n            )}\r\n\r\n            {/* Main Gallery */}\r\n            <ImageGallery\r\n              images={filteredImages}\r\n              selectedImages={selectedImages}\r\n              onImageSelect={handleImageSelect}\r\n              onImageClick={handleImageClick}\r\n              viewMode={viewMode}\r\n            />\r\n\r\n            {/* Empty State */}\r\n            {filteredImages?.length === 0 && !isLoading && (\r\n              <div className=\"text-center py-16\">\r\n                <Icon name=\"Image\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n                  {images?.length === 0 ? 'No hay im谩genes en este proyecto' : 'No se encontraron im谩genes'}\r\n                </h3>\r\n                <p className=\"text-muted-foreground mb-6\">\r\n                  {images?.length === 0 \r\n                    ? 'Comience subiendo las primeras im谩genes del proyecto'\r\n                    : 'Intente ajustar los filtros para encontrar las im谩genes deseadas'\r\n                  }\r\n                </p>\r\n                <Button\r\n                  onClick={handleImageUpload}\r\n                  iconName=\"Upload\"\r\n                  iconPosition=\"left\"\r\n                >\r\n                  Subir Primera Imagen\r\n                </Button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Lightbox */}\r\n            <ImageLightbox\r\n              isOpen={isLightboxOpen}\r\n              onClose={() => {\r\n                setIsLightboxOpen(false);\r\n                setSlideshowMode(false);\r\n              }}\r\n              currentImage={currentImage}\r\n              images={filteredImages}\r\n              onNavigate={setCurrentImage}\r\n              slideshowMode={slideshowMode}\r\n              onToggleSlideshow={() => setSlideshowMode(!slideshowMode)}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectGalleryViewer;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst DocumentTree = ({ project, onDocumentUpload }) => {\r\n  const [expandedFolders, setExpandedFolders] = useState(['clientInfo', 'quotations']);\r\n  const [dragOver, setDragOver] = useState(null);\r\n\r\n  const documentFolders = [\r\n    {\r\n      id: 'clientInfo',\r\n      name: 'Informaci贸n del Cliente',\r\n      icon: 'User',\r\n      color: 'blue',\r\n      description: 'Cat谩logos, planos, ubicaci贸n de obra y requerimientos',\r\n      documents: project?.documents?.clientInfo || []\r\n    },\r\n    {\r\n      id: 'quotations',\r\n      name: 'Cotizaciones',\r\n      icon: 'Calculator',\r\n      color: 'green',\r\n      description: 'Cotizaciones iniciales, ajustadas y aprobadas',\r\n      documents: project?.documents?.quotations || []\r\n    },\r\n    {\r\n      id: 'contracts',\r\n      name: 'Contratos',\r\n      icon: 'FileText',\r\n      color: 'purple',\r\n      description: 'Contratos, t茅rminos y condiciones',\r\n      documents: project?.documents?.contracts || []\r\n    },\r\n    {\r\n      id: 'progressPhotos',\r\n      name: 'Fotos de Avance',\r\n      icon: 'Camera',\r\n      color: 'orange',\r\n      description: 'Documentaci贸n fotogr谩fica del progreso',\r\n      documents: project?.documents?.progressPhotos || []\r\n    },\r\n    {\r\n      id: 'certifications',\r\n      name: 'Certificaciones',\r\n      icon: 'Award',\r\n      color: 'yellow',\r\n      description: 'Certificaciones de materiales y conformidad',\r\n      documents: project?.documents?.certifications || []\r\n    },\r\n    {\r\n      id: 'finalDocs',\r\n      name: 'Documentaci贸n Final',\r\n      icon: 'FileCheck',\r\n      color: 'indigo',\r\n      description: 'Facturas, comprobantes y documentos de cierre',\r\n      documents: project?.documents?.finalDocs || []\r\n    }\r\n  ];\r\n\r\n  const toggleFolder = (folderId) => {\r\n    setExpandedFolders(prev =>\r\n      prev?.includes(folderId)\r\n        ? prev?.filter(id => id !== folderId)\r\n        : [...prev, folderId]\r\n    );\r\n  };\r\n\r\n  const handleDragOver = (e, folderId) => {\r\n    e?.preventDefault();\r\n    setDragOver(folderId);\r\n  };\r\n\r\n  const handleDragLeave = () => {\r\n    setDragOver(null);\r\n  };\r\n\r\n  const handleDrop = (e, folderId) => {\r\n    e?.preventDefault();\r\n    setDragOver(null);\r\n    \r\n    const files = Array.from(e?.dataTransfer?.files);\r\n    files?.forEach(file => {\r\n      const document = {\r\n        name: file?.name,\r\n        type: file?.type?.includes('image') ? 'image' : \r\n              file?.type?.includes('pdf') ? 'pdf' : \r\n              file?.type?.includes('excel') || file?.type?.includes('sheet') ? 'excel' : 'file',\r\n        size: `${(file?.size / (1024 * 1024))?.toFixed(1)} MB`,\r\n        uploaded: true,\r\n        uploadDate: new Date()?.toISOString()\r\n      };\r\n      onDocumentUpload(project?.id, folderId, document);\r\n    });\r\n  };\r\n\r\n  const getFileIcon = (type) => {\r\n    switch (type) {\r\n      case 'pdf': return 'FileText';\r\n      case 'excel': return 'Sheet';\r\n      case 'image': return 'Image';\r\n      case 'dwg': return 'PenTool';\r\n      default: return 'File';\r\n    }\r\n  };\r\n\r\n  const getFileTypeColor = (type) => {\r\n    switch (type) {\r\n      case 'pdf': return 'text-red-600';\r\n      case 'excel': return 'text-green-600';\r\n      case 'image': return 'text-blue-600';\r\n      case 'dwg': return 'text-purple-600';\r\n      default: return 'text-gray-600';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-foreground\">rbol de Documentos</h3>\r\n          <p className=\"text-muted-foreground text-sm\">\r\n            Organizaci贸n estructurada con carpetas digitales\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Search\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Buscar\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Filter\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Filtrar\r\n          </Button>\r\n          <Button\r\n            size=\"sm\"\r\n            iconName=\"FolderPlus\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Nueva Carpeta\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div className=\"space-y-4\">\r\n        {documentFolders?.map((folder) => (\r\n          <div key={folder?.id} className=\"border border-border rounded-lg\">\r\n            {/* Folder Header */}\r\n            <div\r\n              className={`flex items-center justify-between p-4 cursor-pointer hover:bg-muted/50 transition-colors ${\r\n                dragOver === folder?.id ? 'bg-primary/10 border-primary' : ''\r\n              }`}\r\n              onClick={() => toggleFolder(folder?.id)}\r\n              onDragOver={(e) => handleDragOver(e, folder?.id)}\r\n              onDragLeave={handleDragLeave}\r\n              onDrop={(e) => handleDrop(e, folder?.id)}\r\n            >\r\n              <div className=\"flex items-center space-x-3\">\r\n                <button className=\"p-1\">\r\n                  <Icon\r\n                    name={expandedFolders?.includes(folder?.id) ? 'ChevronDown' : 'ChevronRight'}\r\n                    size={16}\r\n                    className=\"text-muted-foreground\"\r\n                  />\r\n                </button>\r\n                <div className={`p-2 rounded-lg bg-${folder?.color}-100`}>\r\n                  <Icon\r\n                    name={folder?.icon}\r\n                    size={18}\r\n                    className={`text-${folder?.color}-600`}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div className=\"font-medium text-foreground\">{folder?.name}</div>\r\n                  <div className=\"text-sm text-muted-foreground\">{folder?.description}</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {folder?.documents?.length} {folder?.documents?.length === 1 ? 'archivo' : 'archivos'}\r\n                </div>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  iconName=\"Upload\"\r\n                  iconPosition=\"left\"\r\n                  onClick={(e) => {\r\n                    e?.stopPropagation();\r\n                    // Trigger file upload\r\n                  }}\r\n                >\r\n                  Subir\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Folder Contents */}\r\n            {expandedFolders?.includes(folder?.id) && (\r\n              <div className=\"border-t border-border bg-muted/20\">\r\n                {folder?.documents?.length > 0 ? (\r\n                  <div className=\"p-4 space-y-2\">\r\n                    {folder?.documents?.map((doc, index) => (\r\n                      <div\r\n                        key={index}\r\n                        className=\"flex items-center justify-between p-3 bg-background rounded-lg border border-border hover:shadow-sm transition-shadow\"\r\n                      >\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <Icon\r\n                            name={getFileIcon(doc?.type)}\r\n                            size={16}\r\n                            className={getFileTypeColor(doc?.type)}\r\n                          />\r\n                          <div>\r\n                            <div className=\"font-medium text-sm\">{doc?.name}</div>\r\n                            <div className=\"text-xs text-muted-foreground flex items-center space-x-2\">\r\n                              <span>{doc?.size}</span>\r\n                              {doc?.count && <span> {doc?.count} fotos</span>}\r\n                              {doc?.uploaded && (\r\n                                <span className=\"flex items-center space-x-1 text-green-600\">\r\n                                  <Icon name=\"CheckCircle\" size={12} />\r\n                                  <span>Subido</span>\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            iconName=\"Eye\"\r\n                          />\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            iconName=\"Download\"\r\n                          />\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            iconName=\"MoreVertical\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"p-8 text-center\">\r\n                    <Icon\r\n                      name=\"Upload\"\r\n                      size={32}\r\n                      className=\"text-muted-foreground mx-auto mb-2\"\r\n                    />\r\n                    <p className=\"text-muted-foreground text-sm mb-2\">\r\n                      No hay documentos en esta carpeta\r\n                    </p>\r\n                    <p className=\"text-xs text-muted-foreground mb-4\">\r\n                      Arrastra archivos aqu铆 o haz clic en \"Subir\"\r\n                    </p>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      iconName=\"Upload\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Subir Archivos\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {/* Bulk Actions */}\r\n      <div className=\"flex items-center justify-between mt-6 pt-6 border-t border-border\">\r\n        <div className=\"flex items-center space-x-4 text-sm text-muted-foreground\">\r\n          <span>Acciones en lote:</span>\r\n          <Button variant=\"ghost\" size=\"sm\" iconName=\"Download\">\r\n            Descargar Todo\r\n          </Button>\r\n          <Button variant=\"ghost\" size=\"sm\" iconName=\"Archive\">\r\n            Archivar\r\n          </Button>\r\n          <Button variant=\"ghost\" size=\"sm\" iconName=\"Share\">\r\n            Compartir\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\r\n          <Icon name=\"HardDrive\" size={16} />\r\n          <span>\r\n            {documentFolders?.reduce((total, folder) => total + folder?.documents?.length, 0)} archivos totales\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentTree;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst WorkflowStatus = ({ project, workflowSteps, currentStep, onStepUpdate }) => {\r\n  const [showDecisionModal, setShowDecisionModal] = useState(false);\r\n  const [decisionStep, setDecisionStep] = useState(null);\r\n\r\n  const decisionPoints = [\r\n    'catalog-check',\r\n    'quotation-validation', \r\n    'client-approval',\r\n    'payment-confirmation'\r\n  ];\r\n\r\n  const getStepStatus = (stepId) => {\r\n    const currentIndex = workflowSteps?.findIndex(step => step?.id === currentStep);\r\n    const stepIndex = workflowSteps?.findIndex(step => step?.id === stepId);\r\n    \r\n    if (stepIndex < currentIndex) return 'completed';\r\n    if (stepIndex === currentIndex) return 'current';\r\n    return 'pending';\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'completed': return 'text-green-600 bg-green-100';\r\n      case 'current': return 'text-blue-600 bg-blue-100';\r\n      case 'pending': return 'text-gray-400 bg-gray-100';\r\n      default: return 'text-gray-400 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const handleStepClick = (stepId) => {\r\n    if (decisionPoints?.includes(stepId)) {\r\n      setDecisionStep(stepId);\r\n      setShowDecisionModal(true);\r\n    } else {\r\n      onStepUpdate(project?.id, stepId);\r\n    }\r\n  };\r\n\r\n  const handleDecision = (decision) => {\r\n    if (decisionStep === 'catalog-check') {\r\n      // Si el cliente proporciona cat谩logo, ir a cotizaci贸n desde cat谩logo\r\n      // Si no, ir a identificaci贸n de materiales\r\n      const nextStep = decision ? 'quotation-dev' : 'material-identification';\r\n      onStepUpdate(project?.id, nextStep);\r\n    } else if (decisionStep === 'quotation-validation') {\r\n      // Si es validada, continuar; si no, ajustar\r\n      const nextStep = decision ? 'client-proposal' : 'quotation-dev';\r\n      onStepUpdate(project?.id, nextStep);\r\n    } else if (decisionStep === 'client-approval') {\r\n      // Si aprueba, b煤squeda proveedores; si no, ajustes\r\n      const nextStep = decision ? 'provider-search' : 'quotation-dev';\r\n      onStepUpdate(project?.id, nextStep);\r\n    }\r\n    setShowDecisionModal(false);\r\n    setDecisionStep(null);\r\n  };\r\n\r\n  const getDecisionLabels = (stepId) => {\r\n    switch (stepId) {\r\n      case 'catalog-check':\r\n        return { yes: 'S铆, tiene cat谩logo', no: 'No, usar planos' };\r\n      case 'quotation-validation':\r\n        return { yes: 'Validada', no: 'Requiere ajustes' };\r\n      case 'client-approval':\r\n        return { yes: 'Aprobada', no: 'Requiere cambios' };\r\n      case 'payment-confirmation':\r\n        return { yes: 'Pagos al d铆a', no: 'Pagos pendientes' };\r\n      default:\r\n        return { yes: 'S铆', no: 'No' };\r\n    }\r\n  };\r\n\r\n  const getStepNotes = (stepId) => {\r\n    switch (stepId) {\r\n      case 'client-info':\r\n        return 'Recibir cat谩logos, planos, ubicaci贸n de obra o requerimientos del cliente';\r\n      case 'document-org':\r\n        return 'Crear carpetas digitales y organizar archivos manualmente';\r\n      case 'catalog-check':\r\n        return 'Punto de decisi贸n: 驴El cliente proporciona cat谩logo?';\r\n      case 'quotation-dev':\r\n        return 'Incluir % instalaci贸n, piezas, vi谩ticos, personal. Condiciones: 30% anticipo, 70% avance';\r\n      case 'quotation-validation':\r\n        return 'Validaci贸n por Ventas/Mart铆n antes de env铆o';\r\n      case 'client-proposal':\r\n        return 'Env铆o por correo o WhatsApp al cliente';\r\n      case 'client-approval':\r\n        return 'Esperar aprobaci贸n del cliente o negociar ajustes';\r\n      case 'provider-search':\r\n        return 'Buscar proveedores en zona de obra o contactos conocidos';\r\n      case 'progress-control':\r\n        return 'Control de avances mediante fotograf铆as con metadatos';\r\n      case 'payment-confirmation':\r\n        return 'Confirmar que no existan pagos pendientes';\r\n      case 'final-documentation':\r\n        return 'Para obras peque帽as: contrato, facturas, comprobantes, certificaciones';\r\n      case 'warranty-continuity':\r\n        return 'Gesti贸n de garant铆a seg煤n tipo de proyecto';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Workflow Diagram */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground\">\r\n              Flujo de Actividades - rea de Proyectos\r\n            </h3>\r\n            <p className=\"text-muted-foreground text-sm\">\r\n              Desde Inicio  Desarrollo  Cierre\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"RotateCcw\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Reiniciar\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Download\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Exportar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Workflow Steps Grid */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {workflowSteps?.map((step, index) => {\r\n            const status = getStepStatus(step?.id);\r\n            const isDecisionPoint = decisionPoints?.includes(step?.id);\r\n            \r\n            return (\r\n              <div\r\n                key={step?.id}\r\n                onClick={() => handleStepClick(step?.id)}\r\n                className={`relative p-4 rounded-lg border-2 cursor-pointer transition-all ${\r\n                  status === 'current' ?'border-primary bg-primary/5 shadow-md' \r\n                    : status === 'completed' ?'border-green-300 bg-green-50' :'border-border bg-background hover:border-primary/50'\r\n                } ${isDecisionPoint ? 'border-yellow-300 bg-yellow-50' : ''}`}\r\n              >\r\n                {/* Step Number */}\r\n                <div className=\"absolute -top-2 -left-2 w-6 h-6 rounded-full bg-background border-2 border-current flex items-center justify-center text-xs font-bold\">\r\n                  {index + 1}\r\n                </div>\r\n\r\n                {/* Decision Diamond Indicator */}\r\n                {isDecisionPoint && (\r\n                  <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rotate-45 border border-yellow-500\"></div>\r\n                )}\r\n\r\n                {/* Step Content */}\r\n                <div className=\"flex items-start space-x-3\">\r\n                  <div className={`p-2 rounded-lg ${getStatusColor(status)}`}>\r\n                    <Icon\r\n                      name={step?.icon}\r\n                      size={18}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"font-medium text-sm text-foreground mb-1\">\r\n                      {step?.label}\r\n                    </div>\r\n                    <div className=\"text-xs text-muted-foreground line-clamp-2\">\r\n                      {getStepNotes(step?.id)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Status Indicator */}\r\n                <div className=\"flex items-center justify-between mt-3\">\r\n                  <div className={`text-xs px-2 py-1 rounded-full ${getStatusColor(status)}`}>\r\n                    {status === 'completed' && 'Completado'}\r\n                    {status === 'current' && 'Actual'}\r\n                    {status === 'pending' && 'Pendiente'}\r\n                  </div>\r\n                  \r\n                  {status === 'completed' && (\r\n                    <Icon name=\"CheckCircle\" size={14} className=\"text-green-600\" />\r\n                  )}\r\n                  {status === 'current' && (\r\n                    <Icon name=\"Play\" size={14} className=\"text-blue-600\" />\r\n                  )}\r\n                  {isDecisionPoint && (\r\n                    <Icon name=\"HelpCircle\" size={14} className=\"text-yellow-600\" />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Legend */}\r\n        <div className=\"flex items-center justify-center space-x-6 mt-6 pt-6 border-t border-border\">\r\n          <div className=\"flex items-center space-x-2 text-sm\">\r\n            <div className=\"w-4 h-4 rounded bg-background border-2 border-gray-400\"></div>\r\n            <span className=\"text-muted-foreground\">Inicio/Fin</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2 text-sm\">\r\n            <div className=\"w-4 h-4 rounded bg-blue-100 border-2 border-blue-400\"></div>\r\n            <span className=\"text-muted-foreground\">Actividad/Tarea</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2 text-sm\">\r\n            <div className=\"w-3 h-3 bg-yellow-400 rotate-45 border border-yellow-500\"></div>\r\n            <span className=\"text-muted-foreground\">Decisi贸n clave</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2 text-sm\">\r\n            <Icon name=\"FileText\" size={16} className=\"text-orange-600\" />\r\n            <span className=\"text-muted-foreground\">Aclaraci贸n/Pol铆tica</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Current Step Details */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-4\">\r\n          <div className=\"p-3 rounded-lg bg-primary/10\">\r\n            <Icon\r\n              name={workflowSteps?.find(step => step?.id === currentStep)?.icon || 'Circle'}\r\n              size={24}\r\n              className=\"text-primary\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <h4 className=\"text-lg font-semibold text-foreground\">\r\n              {workflowSteps?.find(step => step?.id === currentStep)?.label}\r\n            </h4>\r\n            <p className=\"text-muted-foreground\">\r\n              {getStepNotes(currentStep)}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Step Actions */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            {decisionPoints?.includes(currentStep) ? (\r\n              <>\r\n                <Button\r\n                  variant=\"success\"\r\n                  size=\"sm\"\r\n                  iconName=\"CheckCircle\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => handleDecision(true)}\r\n                >\r\n                  {getDecisionLabels(currentStep)?.yes}\r\n                </Button>\r\n                <Button\r\n                  variant=\"warning\"\r\n                  size=\"sm\"\r\n                  iconName=\"XCircle\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => handleDecision(false)}\r\n                >\r\n                  {getDecisionLabels(currentStep)?.no}\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <Button\r\n                variant=\"success\"\r\n                size=\"sm\"\r\n                iconName=\"ArrowRight\"\r\n                iconPosition=\"right\"\r\n                onClick={() => {\r\n                  const currentIndex = workflowSteps?.findIndex(step => step?.id === currentStep);\r\n                  const nextStep = workflowSteps?.[currentIndex + 1];\r\n                  if (nextStep) {\r\n                    onStepUpdate(project?.id, nextStep?.id);\r\n                  }\r\n                }}\r\n              >\r\n                Completar Paso\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Paso {workflowSteps?.findIndex(step => step?.id === currentStep) + 1} de {workflowSteps?.length}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Project Timeline */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <h4 className=\"font-semibold text-foreground mb-4\">Cronolog铆a del Proyecto</h4>\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center space-x-3 text-sm\">\r\n            <Icon name=\"Calendar\" size={16} className=\"text-blue-600\" />\r\n            <span className=\"text-muted-foreground\">Creado:</span>\r\n            <span className=\"font-medium\">{project?.createdDate}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-3 text-sm\">\r\n            <Icon name=\"Clock\" size={16} className=\"text-orange-600\" />\r\n            <span className=\"text-muted-foreground\">ltima actualizaci贸n:</span>\r\n            <span className=\"font-medium\">{project?.lastUpdated}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-3 text-sm\">\r\n            <Icon name=\"User\" size={16} className=\"text-green-600\" />\r\n            <span className=\"text-muted-foreground\">Cliente:</span>\r\n            <span className=\"font-medium\">{project?.client?.name}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Decision Modal */}\r\n      {showDecisionModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-card border border-border rounded-lg p-6 max-w-md w-full mx-4\">\r\n            <div className=\"flex items-center space-x-3 mb-4\">\r\n              <div className=\"p-2 rounded-lg bg-yellow-100\">\r\n                <Icon name=\"HelpCircle\" size={20} className=\"text-yellow-600\" />\r\n              </div>\r\n              <div>\r\n                <h4 className=\"font-semibold text-foreground\">Punto de Decisi贸n</h4>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {workflowSteps?.find(step => step?.id === decisionStep)?.label}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <p className=\"text-muted-foreground mb-6\">\r\n              {getStepNotes(decisionStep)}\r\n            </p>\r\n\r\n            <div className=\"flex space-x-3\">\r\n              <Button\r\n                variant=\"success\"\r\n                className=\"flex-1\"\r\n                onClick={() => handleDecision(true)}\r\n              >\r\n                {getDecisionLabels(decisionStep)?.yes}\r\n              </Button>\r\n              <Button\r\n                variant=\"warning\"\r\n                className=\"flex-1\"\r\n                onClick={() => handleDecision(false)}\r\n              >\r\n                {getDecisionLabels(decisionStep)?.no}\r\n              </Button>\r\n            </div>\r\n\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className=\"w-full mt-3\"\r\n              onClick={() => setShowDecisionModal(false)}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkflowStatus;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst QuotationWorkflow = ({ project, onUpdate }) => {\r\n  const [quotationData, setQuotationData] = useState(project?.quotationData || {});\r\n  const [isEditing, setIsEditing] = useState(false);\r\n\r\n  const handleQuotationUpdate = (field, value) => {\r\n    setQuotationData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    const base = parseFloat(quotationData?.baseAmount || 0);\r\n    const installation = (base * (quotationData?.installationPercentage || 0)) / 100;\r\n    const travel = parseFloat(quotationData?.travel || 0);\r\n    const personnel = parseFloat(quotationData?.personnelCost || 0);\r\n    return base + installation + travel + personnel;\r\n  };\r\n\r\n  const saveQuotation = () => {\r\n    setIsEditing(false);\r\n    // Update project with new quotation data\r\n    onUpdate(project?.id, 'quotation-validation');\r\n  };\r\n\r\n  const sendQuotation = () => {\r\n    onUpdate(project?.id, 'client-proposal');\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Quotation Builder */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Constructor de Cotizaci贸n</h3>\r\n            <p className=\"text-muted-foreground text-sm\">\r\n              {quotationData?.hasClientCatalog \r\n                ? 'Cotizaci贸n basada en cat谩logo del cliente' :'Cotizaci贸n basada en planos e identificaci贸n de materiales'\r\n              }\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            {!isEditing ? (\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"Edit\"\r\n                iconPosition=\"left\"\r\n                onClick={() => setIsEditing(true)}\r\n              >\r\n                Editar\r\n              </Button>\r\n            ) : (\r\n              <div className=\"flex space-x-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    setIsEditing(false);\r\n                    setQuotationData(project?.quotationData);\r\n                  }}\r\n                >\r\n                  Cancelar\r\n                </Button>\r\n                <Button\r\n                  size=\"sm\"\r\n                  iconName=\"Save\"\r\n                  iconPosition=\"left\"\r\n                  onClick={saveQuotation}\r\n                >\r\n                  Guardar\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quotation Form */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          {/* Left Column - Main Items */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                Materiales y Equipos\r\n              </label>\r\n              {isEditing ? (\r\n                <textarea\r\n                  className=\"w-full p-3 border border-border rounded-lg resize-none\"\r\n                  rows=\"3\"\r\n                  value={quotationData?.parts || ''}\r\n                  onChange={(e) => handleQuotationUpdate('parts', e?.target?.value)}\r\n                  placeholder=\"Descripci贸n detallada de materiales...\"\r\n                />\r\n              ) : (\r\n                <div className=\"p-3 bg-muted rounded-lg\">\r\n                  {quotationData?.parts || 'Sin especificar'}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                  Monto Base\r\n                </label>\r\n                {isEditing ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={quotationData?.baseAmount || ''}\r\n                    onChange={(e) => handleQuotationUpdate('baseAmount', e?.target?.value)}\r\n                    placeholder=\"$0\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"p-3 bg-muted rounded-lg font-mono\">\r\n                    ${quotationData?.baseAmount?.toLocaleString() || '0'}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                  % Instalaci贸n\r\n                </label>\r\n                {isEditing ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    value={quotationData?.installationPercentage || ''}\r\n                    onChange={(e) => handleQuotationUpdate('installationPercentage', e?.target?.value)}\r\n                    placeholder=\"30\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"p-3 bg-muted rounded-lg\">\r\n                    {quotationData?.installationPercentage || 0}%\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                  Vi谩ticos\r\n                </label>\r\n                {isEditing ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={quotationData?.travel || ''}\r\n                    onChange={(e) => handleQuotationUpdate('travel', e?.target?.value)}\r\n                    placeholder=\"$5000\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"p-3 bg-muted rounded-lg font-mono\">\r\n                    ${quotationData?.travel?.toLocaleString() || '0'}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                  Personal Estimado\r\n                </label>\r\n                {isEditing ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={quotationData?.estimatedPersonnel || ''}\r\n                    onChange={(e) => handleQuotationUpdate('estimatedPersonnel', e?.target?.value)}\r\n                    placeholder=\"8\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"p-3 bg-muted rounded-lg\">\r\n                    {quotationData?.estimatedPersonnel || 0} personas\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Column - Conditions & Total */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <h4 className=\"font-medium text-foreground mb-3\">Condiciones de Pago</h4>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                    Anticipo (%)\r\n                  </label>\r\n                  {isEditing ? (\r\n                    <Input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      value={quotationData?.advancePayment || ''}\r\n                      onChange={(e) => handleQuotationUpdate('advancePayment', e?.target?.value)}\r\n                      placeholder=\"30\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"p-3 bg-green-50 border border-green-200 rounded-lg\">\r\n                      {quotationData?.advancePayment || 30}%\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                    Avance (%)\r\n                  </label>\r\n                  {isEditing ? (\r\n                    <Input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      value={quotationData?.progressPayment || ''}\r\n                      onChange={(e) => handleQuotationUpdate('progressPayment', e?.target?.value)}\r\n                      placeholder=\"70\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                      {quotationData?.progressPayment || 70}%\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                Garant铆a\r\n              </label>\r\n              {isEditing ? (\r\n                <Input\r\n                  type=\"text\"\r\n                  value={quotationData?.warranty || ''}\r\n                  onChange={(e) => handleQuotationUpdate('warranty', e?.target?.value)}\r\n                  placeholder=\"12 meses\"\r\n                />\r\n              ) : (\r\n                <div className=\"p-3 bg-muted rounded-lg\">\r\n                  {quotationData?.warranty || 'Sin especificar'}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Total Calculation */}\r\n            <div className=\"p-4 bg-primary/5 border border-primary/20 rounded-lg\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className=\"font-medium text-foreground\">Total de la Cotizaci贸n</span>\r\n                <Icon name=\"Calculator\" size={16} className=\"text-primary\" />\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-primary font-mono\">\r\n                ${calculateTotal()?.toLocaleString()}\r\n              </div>\r\n              <div className=\"text-xs text-muted-foreground mt-1\">\r\n                Incluye instalaci贸n, vi谩ticos y personal\r\n              </div>\r\n            </div>\r\n\r\n            {/* Validation Status */}\r\n            <div className=\"p-4 border rounded-lg\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className=\"font-medium text-foreground\">Estado de Validaci贸n</span>\r\n                {quotationData?.validatedBy ? (\r\n                  <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                ) : (\r\n                  <Icon name=\"Clock\" size={16} className=\"text-yellow-600\" />\r\n                )}\r\n              </div>\r\n              {quotationData?.validatedBy ? (\r\n                <div className=\"text-sm\">\r\n                  <div className=\"text-green-600\">Validada por {quotationData?.validatedBy}</div>\r\n                  <div className=\"text-muted-foreground\">Lista para env铆o al cliente</div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  Pendiente validaci贸n por Ventas/Mart铆n\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex items-center justify-between mt-6 pt-6 border-t border-border\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"FileText\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Generar PDF\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Download\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Exportar Excel\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-2\">\r\n            {quotationData?.validatedBy ? (\r\n              <>\r\n                <Button\r\n                  variant=\"success\"\r\n                  size=\"sm\"\r\n                  iconName=\"Mail\"\r\n                  iconPosition=\"left\"\r\n                  onClick={sendQuotation}\r\n                >\r\n                  Enviar por Correo\r\n                </Button>\r\n                <Button\r\n                  variant=\"success\"\r\n                  size=\"sm\"\r\n                  iconName=\"MessageCircle\"\r\n                  iconPosition=\"left\"\r\n                  onClick={sendQuotation}\r\n                >\r\n                  Enviar por WhatsApp\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <Button\r\n                variant=\"warning\"\r\n                size=\"sm\"\r\n                iconName=\"AlertTriangle\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Requiere Validaci贸n\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Quotation History */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <h4 className=\"font-semibold text-foreground mb-4\">Historial de Cotizaciones</h4>\r\n        \r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between p-3 bg-muted/50 rounded-lg\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Icon name=\"FileText\" size={16} className=\"text-blue-600\" />\r\n              <div>\r\n                <div className=\"font-medium text-sm\">Cotizaci贸n Inicial v1.0</div>\r\n                <div className=\"text-xs text-muted-foreground\">Creada: 15 Ene 2024</div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-sm font-mono\">$850,000</span>\r\n              <Button variant=\"ghost\" size=\"sm\" iconName=\"Eye\" />\r\n              <Button variant=\"ghost\" size=\"sm\" iconName=\"Download\" />\r\n            </div>\r\n          </div>\r\n\r\n          {quotationData?.clientApproved && (\r\n            <div className=\"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                <div>\r\n                  <div className=\"font-medium text-sm text-green-800\">Cotizaci贸n Aprobada</div>\r\n                  <div className=\"text-xs text-green-600\">Aprobada por el cliente</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <span className=\"text-sm font-mono text-green-800\">${quotationData?.totalAmount?.toLocaleString()}</span>\r\n                <Icon name=\"ThumbsUp\" size={14} className=\"text-green-600\" />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationWorkflow;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\n\r\nconst ProgressTracking = ({ project, onPhotoUpload }) => {\r\n  const [selectedPhoto, setSelectedPhoto] = useState(null);\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n\r\n  const progressPhotos = project?.progressTracking?.photos || [];\r\n  const pendingPayments = project?.progressTracking?.pendingPayments || [];\r\n  const completedMilestones = project?.progressTracking?.completedMilestones || [];\r\n\r\n  const milestones = [\r\n    { id: 'site-preparation', label: 'Preparaci贸n del Sitio', icon: 'MapPin' },\r\n    { id: 'equipment-delivery', label: 'Entrega de Equipos', icon: 'Truck' },\r\n    { id: 'installation-start', label: 'Inicio Instalaci贸n', icon: 'Play' },\r\n    { id: 'system-testing', label: 'Pruebas del Sistema', icon: 'TestTube' },\r\n    { id: 'client-approval', label: 'Aprobaci贸n Cliente', icon: 'ThumbsUp' },\r\n    { id: 'project-completion', label: 'Finalizaci贸n Proyecto', icon: 'CheckCircle' }\r\n  ];\r\n\r\n  const handlePhotoUpload = () => {\r\n    setShowUploadModal(true);\r\n  };\r\n\r\n  const handlePhotoCapture = () => {\r\n    // Simulate photo capture with metadata\r\n    const newPhoto = {\r\n      id: Date.now(),\r\n      url: \"https://images.unsplash.com/photo-1541888946425-d81bb19240f5\",\r\n      timestamp: new Date()?.toLocaleString(),\r\n      location: \"rea de trabajo - Piso 1\",\r\n      description: \"Avance de instalaci贸n\",\r\n      metadata: {\r\n        gps: \"19.4326, -99.1332\",\r\n        temperature: \"23掳C\",\r\n        humidity: \"65%\"\r\n      }\r\n    };\r\n    \r\n    onPhotoUpload(project?.id, 'progressPhotos', newPhoto);\r\n    setShowUploadModal(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Progress Photos Section */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Control de Avances</h3>\r\n            <p className=\"text-muted-foreground text-sm\">\r\n              Documentaci贸n fotogr谩fica con metadatos de ubicaci贸n y tiempo\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Camera\"\r\n              iconPosition=\"left\"\r\n              onClick={handlePhotoUpload}\r\n            >\r\n              Tomar Foto\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Upload\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Subir Fotos\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              iconName=\"Download\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Exportar Reporte\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Photo Grid */}\r\n        {progressPhotos?.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6\">\r\n            {progressPhotos?.map((photo) => (\r\n              <div\r\n                key={photo?.id}\r\n                className=\"relative group cursor-pointer\"\r\n                onClick={() => setSelectedPhoto(photo)}\r\n              >\r\n                <div className=\"aspect-square bg-muted rounded-lg overflow-hidden\">\r\n                  <img\r\n                    src={photo?.url}\r\n                    alt={photo?.description}\r\n                    className=\"w-full h-full object-cover group-hover:scale-105 transition-transform\"\r\n                  />\r\n                </div>\r\n                \r\n                {/* Photo Overlay */}\r\n                <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors rounded-lg flex items-center justify-center\">\r\n                  <Icon\r\n                    name=\"ZoomIn\"\r\n                    size={24}\r\n                    className=\"text-white opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Photo Info */}\r\n                <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3 rounded-b-lg\">\r\n                  <div className=\"text-white text-sm font-medium\">\r\n                    {photo?.description}\r\n                  </div>\r\n                  <div className=\"text-white/80 text-xs flex items-center space-x-2 mt-1\">\r\n                    <Icon name=\"Clock\" size={12} />\r\n                    <span>{photo?.timestamp}</span>\r\n                    <Icon name=\"MapPin\" size={12} />\r\n                    <span>{photo?.location}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-12\">\r\n            <Icon name=\"Camera\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n            <h4 className=\"text-lg font-medium text-foreground mb-2\">No hay fotos de avance</h4>\r\n            <p className=\"text-muted-foreground mb-4\">\r\n              Comience a documentar el progreso del proyecto con fotograf铆as\r\n            </p>\r\n            <Button\r\n              iconName=\"Camera\"\r\n              iconPosition=\"left\"\r\n              onClick={handlePhotoUpload}\r\n            >\r\n              Tomar Primera Foto\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Photo Analytics */}\r\n        {progressPhotos?.length > 0 && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 pt-6 border-t border-border\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-primary\">{progressPhotos?.length}</div>\r\n              <div className=\"text-sm text-muted-foreground\">Fotos Totales</div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-blue-600\">\r\n                {new Set(progressPhotos?.map(p => p?.location))?.size}\r\n              </div>\r\n              <div className=\"text-sm text-muted-foreground\">Ubicaciones</div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-green-600\">\r\n                {Math.floor((Date.now() - new Date(project?.createdDate)) / (1000 * 60 * 60 * 24))}\r\n              </div>\r\n              <div className=\"text-sm text-muted-foreground\">D铆as de Trabajo</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Milestones Progress */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <h4 className=\"font-semibold text-foreground mb-4\">Hitos del Proyecto</h4>\r\n        \r\n        <div className=\"space-y-3\">\r\n          {milestones?.map((milestone) => {\r\n            const isCompleted = completedMilestones?.includes(milestone?.id);\r\n            return (\r\n              <div\r\n                key={milestone?.id}\r\n                className={`flex items-center justify-between p-3 rounded-lg border ${\r\n                  isCompleted \r\n                    ? 'bg-green-50 border-green-200' :'bg-background border-border'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`p-2 rounded-lg ${\r\n                    isCompleted ? 'bg-green-100' : 'bg-muted'\r\n                  }`}>\r\n                    <Icon\r\n                      name={milestone?.icon}\r\n                      size={16}\r\n                      className={isCompleted ? 'text-green-600' : 'text-muted-foreground'}\r\n                    />\r\n                  </div>\r\n                  <span className={`font-medium ${\r\n                    isCompleted ? 'text-green-800' : 'text-foreground'\r\n                  }`}>\r\n                    {milestone?.label}\r\n                  </span>\r\n                </div>\r\n\r\n                {isCompleted ? (\r\n                  <Icon name=\"CheckCircle\" size={20} className=\"text-green-600\" />\r\n                ) : (\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    iconName=\"Check\"\r\n                  >\r\n                    Marcar Completo\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n      {/* Payment Status */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <h4 className=\"font-semibold text-foreground mb-4\">Estado de Pagos</h4>\r\n        \r\n        {pendingPayments?.length > 0 ? (\r\n          <div className=\"space-y-3\">\r\n            {pendingPayments?.map((payment, index) => (\r\n              <div\r\n                key={index}\r\n                className=\"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg\"\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <Icon name=\"AlertTriangle\" size={16} className=\"text-yellow-600\" />\r\n                  <div>\r\n                    <div className=\"font-medium text-yellow-800\">\r\n                      Pago Pendiente: {payment?.description}\r\n                    </div>\r\n                    <div className=\"text-sm text-yellow-600\">\r\n                      Vencimiento: {payment?.dueDate}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className=\"font-mono font-medium text-yellow-800\">\r\n                    ${payment?.amount?.toLocaleString()}\r\n                  </div>\r\n                  <Button\r\n                    variant=\"warning\"\r\n                    size=\"sm\"\r\n                    iconName=\"CreditCard\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Confirmar Pago\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex items-center justify-center py-8\">\r\n            <div className=\"text-center\">\r\n              <Icon name=\"CheckCircle\" size={48} className=\"text-green-600 mx-auto mb-3\" />\r\n              <h4 className=\"font-medium text-green-800 mb-2\">Pagos al D铆a</h4>\r\n              <p className=\"text-green-600 text-sm\">\r\n                No hay pagos pendientes para este proyecto\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Photo Upload Modal */}\r\n      {showUploadModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-card border border-border rounded-lg p-6 max-w-md w-full mx-4\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h4 className=\"font-semibold text-foreground\">Documentar Avance</h4>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                iconName=\"X\"\r\n                onClick={() => setShowUploadModal(false)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div className=\"text-center py-8 border-2 border-dashed border-border rounded-lg\">\r\n                <Icon name=\"Camera\" size={48} className=\"text-muted-foreground mx-auto mb-3\" />\r\n                <p className=\"text-muted-foreground mb-4\">\r\n                  Capture el progreso del trabajo\r\n                </p>\r\n                <Button\r\n                  iconName=\"Camera\"\r\n                  iconPosition=\"left\"\r\n                  onClick={handlePhotoCapture}\r\n                >\r\n                  Tomar Foto\r\n                </Button>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <Input\r\n                  label=\"Descripci贸n\"\r\n                  placeholder=\"Descripci贸n del avance...\"\r\n                />\r\n                <Input\r\n                  label=\"Ubicaci贸n\"\r\n                  placeholder=\"rea espec铆fica del trabajo...\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"text-xs text-muted-foreground\">\r\n                <div className=\"flex items-center space-x-2 mb-1\">\r\n                  <Icon name=\"MapPin\" size={12} />\r\n                  <span>GPS: Se capturar谩 autom谩ticamente</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"Clock\" size={12} />\r\n                  <span>Timestamp: {new Date()?.toLocaleString()}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Photo Detail Modal */}\r\n      {selectedPhoto && (\r\n        <div className=\"fixed inset-0 bg-black/90 flex items-center justify-center z-50\">\r\n          <div className=\"max-w-4xl max-h-full p-4\">\r\n            <div className=\"relative\">\r\n              <img\r\n                src={selectedPhoto?.url}\r\n                alt={selectedPhoto?.description}\r\n                className=\"max-w-full max-h-[80vh] rounded-lg\"\r\n              />\r\n              \r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                iconName=\"X\"\r\n                className=\"absolute top-2 right-2 bg-black/50 text-white hover:bg-black/70\"\r\n                onClick={() => setSelectedPhoto(null)}\r\n              />\r\n\r\n              {/* Photo Info */}\r\n              <div className=\"absolute bottom-0 left-0 right-0 bg-black/70 text-white p-4 rounded-b-lg\">\r\n                <div className=\"font-medium mb-2\">{selectedPhoto?.description}</div>\r\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                  <div>\r\n                    <Icon name=\"Clock\" size={14} className=\"inline mr-1\" />\r\n                    {selectedPhoto?.timestamp}\r\n                  </div>\r\n                  <div>\r\n                    <Icon name=\"MapPin\" size={14} className=\"inline mr-1\" />\r\n                    {selectedPhoto?.location}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressTracking;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst DocumentValidation = ({ project, onValidationComplete }) => {\r\n  const [checklist, setChecklist] = useState({\r\n    clientContract: false,\r\n    invoices: false,\r\n    receipts: false,\r\n    materialCertifications: false,\r\n    workPhotos: false,\r\n    clientApproval: false,\r\n    warrantyDocs: false,\r\n    finalPayment: false\r\n  });\r\n\r\n  const validationItems = [\r\n    {\r\n      id: 'clientContract',\r\n      label: 'Contrato con Cliente',\r\n      description: 'Contrato firmado y t茅rminos acordados',\r\n      category: 'legal',\r\n      required: true,\r\n      icon: 'FileText'\r\n    },\r\n    {\r\n      id: 'invoices',\r\n      label: 'Facturas Completas',\r\n      description: 'Todas las facturas emitidas y validadas',\r\n      category: 'financial',\r\n      required: true,\r\n      icon: 'Receipt'\r\n    },\r\n    {\r\n      id: 'receipts',\r\n      label: 'Comprobantes de Pago',\r\n      description: 'Evidencias de pagos recibidos',\r\n      category: 'financial',\r\n      required: true,\r\n      icon: 'CreditCard'\r\n    },\r\n    {\r\n      id: 'materialCertifications',\r\n      label: 'Certificaciones de Material',\r\n      description: 'Certificados de calidad y conformidad',\r\n      category: 'quality',\r\n      required: true,\r\n      icon: 'Award'\r\n    },\r\n    {\r\n      id: 'workPhotos',\r\n      label: 'Fotograf铆as de Trabajo',\r\n      description: 'Documentaci贸n fotogr谩fica completa',\r\n      category: 'documentation',\r\n      required: true,\r\n      icon: 'Camera'\r\n    },\r\n    {\r\n      id: 'clientApproval',\r\n      label: 'Aprobaci贸n Final del Cliente',\r\n      description: 'Confirmaci贸n escrita de satisfacci贸n',\r\n      category: 'approval',\r\n      required: true,\r\n      icon: 'ThumbsUp'\r\n    },\r\n    {\r\n      id: 'warrantyDocs',\r\n      label: 'Documentos de Garant铆a',\r\n      description: 'T茅rminos y condiciones de garant铆a',\r\n      category: 'warranty',\r\n      required: false,\r\n      icon: 'Shield'\r\n    },\r\n    {\r\n      id: 'finalPayment',\r\n      label: 'Pago Final Confirmado',\r\n      description: 'Liquidaci贸n completa del proyecto',\r\n      category: 'financial',\r\n      required: true,\r\n      icon: 'DollarSign'\r\n    }\r\n  ];\r\n\r\n  const categories = [\r\n    { id: 'legal', label: 'Documentos Legales', color: 'purple', icon: 'Scale' },\r\n    { id: 'financial', label: 'Documentos Financieros', color: 'green', icon: 'DollarSign' },\r\n    { id: 'quality', label: 'Control de Calidad', color: 'blue', icon: 'CheckCircle' },\r\n    { id: 'documentation', label: 'Documentaci贸n', color: 'orange', icon: 'FileImage' },\r\n    { id: 'approval', label: 'Aprobaciones', color: 'yellow', icon: 'UserCheck' },\r\n    { id: 'warranty', label: 'Garant铆as', color: 'indigo', icon: 'Shield' }\r\n  ];\r\n\r\n  const handleChecklistChange = (itemId, checked) => {\r\n    setChecklist(prev => ({ ...prev, [itemId]: checked }));\r\n  };\r\n\r\n  const getCompletionStats = () => {\r\n    const total = validationItems?.length;\r\n    const required = validationItems?.filter(item => item?.required)?.length;\r\n    const completed = Object.values(checklist)?.filter(Boolean)?.length;\r\n    const requiredCompleted = validationItems?.filter(item => \r\n      item?.required && checklist?.[item?.id]\r\n    )?.length;\r\n\r\n    return { total, required, completed, requiredCompleted };\r\n  };\r\n\r\n  const stats = getCompletionStats();\r\n  const isProjectReady = stats?.requiredCompleted === stats?.required;\r\n\r\n  const generateFinalPackage = () => {\r\n    // Simulate final documentation package generation\r\n    onValidationComplete(project?.id, 'warranty-continuity');\r\n  };\r\n\r\n  const getCategoryIcon = (categoryId) => {\r\n    return categories?.find(cat => cat?.id === categoryId)?.icon || 'File';\r\n  };\r\n\r\n  const getCategoryColor = (categoryId) => {\r\n    return categories?.find(cat => cat?.id === categoryId)?.color || 'gray';\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Validation Overview */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground\">\r\n              Validaci贸n de Documentaci贸n Final\r\n            </h3>\r\n            <p className=\"text-muted-foreground text-sm\">\r\n              Checklist para obras peque帽as - Verificaci贸n antes del cierre\r\n            </p>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <div className=\"text-2xl font-bold text-primary\">\r\n              {Math.round((stats?.completed / stats?.total) * 100)}%\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\">Completado</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Progress Bar */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm font-medium\">Progreso de Validaci贸n</span>\r\n            <span className=\"text-sm text-muted-foreground\">\r\n              {stats?.completed}/{stats?.total} elementos\r\n            </span>\r\n          </div>\r\n          <div className=\"w-full bg-muted rounded-full h-3\">\r\n            <div \r\n              className=\"bg-primary h-3 rounded-full transition-all duration-500\"\r\n              style={{ width: `${(stats?.completed / stats?.total) * 100}%` }}\r\n            />\r\n          </div>\r\n          <div className=\"flex items-center justify-between mt-2 text-xs text-muted-foreground\">\r\n            <span>Requeridos: {stats?.requiredCompleted}/{stats?.required}</span>\r\n            <span>Opcionales: {stats?.completed - stats?.requiredCompleted}/{stats?.total - stats?.required}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status Alert */}\r\n        {isProjectReady ? (\r\n          <div className=\"flex items-center space-x-3 p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n            <Icon name=\"CheckCircle\" size={20} className=\"text-green-600\" />\r\n            <div className=\"flex-1\">\r\n              <div className=\"font-medium text-green-800\">Proyecto Listo para Cierre</div>\r\n              <div className=\"text-sm text-green-600\">\r\n                Todos los documentos requeridos est谩n completos\r\n              </div>\r\n            </div>\r\n            <Button\r\n              variant=\"success\"\r\n              iconName=\"Package\"\r\n              iconPosition=\"left\"\r\n              onClick={generateFinalPackage}\r\n            >\r\n              Generar Paquete Final\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex items-center space-x-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n            <Icon name=\"AlertTriangle\" size={20} className=\"text-yellow-600\" />\r\n            <div className=\"flex-1\">\r\n              <div className=\"font-medium text-yellow-800\">Documentos Pendientes</div>\r\n              <div className=\"text-sm text-yellow-600\">\r\n                {stats?.required - stats?.requiredCompleted} documentos requeridos faltantes\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Validation Checklist by Category */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        {categories?.map((category) => {\r\n          const categoryItems = validationItems?.filter(item => item?.category === category?.id);\r\n          const categoryCompleted = categoryItems?.filter(item => checklist?.[item?.id])?.length;\r\n          \r\n          return (\r\n            <div key={category?.id} className=\"bg-card border border-border rounded-lg p-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`p-2 rounded-lg bg-${category?.color}-100`}>\r\n                    <Icon\r\n                      name={category?.icon}\r\n                      size={18}\r\n                      className={`text-${category?.color}-600`}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <h4 className=\"font-medium text-foreground\">{category?.label}</h4>\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      {categoryCompleted}/{categoryItems?.length} completados\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className=\"text-sm font-medium\">\r\n                    {Math.round((categoryCompleted / categoryItems?.length) * 100)}%\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-3\">\r\n                {categoryItems?.map((item) => (\r\n                  <div\r\n                    key={item?.id}\r\n                    className={`flex items-center justify-between p-3 rounded-lg border ${\r\n                      checklist?.[item?.id] \r\n                        ? 'bg-green-50 border-green-200' :'bg-background border-border'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <button\r\n                        onClick={() => handleChecklistChange(item?.id, !checklist?.[item?.id])}\r\n                        className={`w-5 h-5 rounded border-2 flex items-center justify-center ${\r\n                          checklist?.[item?.id]\r\n                            ? 'bg-green-600 border-green-600' :'border-border hover:border-primary'\r\n                        }`}\r\n                      >\r\n                        {checklist?.[item?.id] && (\r\n                          <Icon name=\"Check\" size={12} className=\"text-white\" />\r\n                        )}\r\n                      </button>\r\n\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon\r\n                          name={item?.icon}\r\n                          size={14}\r\n                          className={checklist?.[item?.id] ? 'text-green-600' : 'text-muted-foreground'}\r\n                        />\r\n                        <div>\r\n                          <div className={`text-sm font-medium ${\r\n                            checklist?.[item?.id] ? 'text-green-800' : 'text-foreground'\r\n                          }`}>\r\n                            {item?.label}\r\n                            {item?.required && (\r\n                              <span className=\"text-red-500 ml-1\">*</span>\r\n                            )}\r\n                          </div>\r\n                          <div className={`text-xs ${\r\n                            checklist?.[item?.id] ? 'text-green-600' : 'text-muted-foreground'\r\n                          }`}>\r\n                            {item?.description}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      {checklist?.[item?.id] ? (\r\n                        <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                      ) : item?.required ? (\r\n                        <Icon name=\"AlertCircle\" size={16} className=\"text-red-500\" />\r\n                      ) : (\r\n                        <Icon name=\"Circle\" size={16} className=\"text-muted-foreground\" />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      {/* Missing Documents Alert */}\r\n      {!isProjectReady && (\r\n        <div className=\"bg-card border border-border rounded-lg p-6\">\r\n          <div className=\"flex items-center space-x-3 mb-4\">\r\n            <Icon name=\"AlertTriangle\" size={20} className=\"text-red-500\" />\r\n            <h4 className=\"font-semibold text-foreground\">Documentos Faltantes</h4>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            {validationItems\r\n              ?.filter(item => item?.required && !checklist?.[item?.id])\r\n              ?.map((item) => (\r\n                <div key={item?.id} className=\"flex items-center space-x-3 p-2 bg-red-50 rounded-lg\">\r\n                  <Icon name={item?.icon} size={14} className=\"text-red-500\" />\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"text-sm font-medium text-red-800\">{item?.label}</div>\r\n                    <div className=\"text-xs text-red-600\">{item?.description}</div>\r\n                  </div>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    iconName=\"Upload\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Subir\r\n                  </Button>\r\n                </div>\r\n              ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Final Documentation Package */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <h4 className=\"font-semibold text-foreground mb-4\">Paquete de Documentaci贸n Final</h4>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div className=\"space-y-3\">\r\n            <h5 className=\"font-medium text-foreground\">Incluye:</h5>\r\n            <ul className=\"space-y-2 text-sm\">\r\n              <li className=\"flex items-center space-x-2\">\r\n                <Icon name=\"FileText\" size={14} className=\"text-blue-600\" />\r\n                <span>Contrato firmado</span>\r\n              </li>\r\n              <li className=\"flex items-center space-x-2\">\r\n                <Icon name=\"Receipt\" size={14} className=\"text-green-600\" />\r\n                <span>Facturas y comprobantes</span>\r\n              </li>\r\n              <li className=\"flex items-center space-x-2\">\r\n                <Icon name=\"Award\" size={14} className=\"text-purple-600\" />\r\n                <span>Certificaciones de material</span>\r\n              </li>\r\n              <li className=\"flex items-center space-x-2\">\r\n                <Icon name=\"Camera\" size={14} className=\"text-orange-600\" />\r\n                <span>Reporte fotogr谩fico</span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            <h5 className=\"font-medium text-foreground\">Formatos disponibles:</h5>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\">PDF</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Archive\">ZIP</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Mail\">Email</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Cloud\">Cloud</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {isProjectReady && (\r\n          <div className=\"mt-6 pt-6 border-t border-border\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"text-sm text-muted-foreground\">\r\n                El paquete final ser谩 generado autom谩ticamente una vez que se complete la validaci贸n.\r\n              </div>\r\n              <Button\r\n                variant=\"success\"\r\n                iconName=\"Download\"\r\n                iconPosition=\"left\"\r\n                onClick={generateFinalPackage}\r\n              >\r\n                Generar y Descargar\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentValidation;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport DocumentTree from './components/DocumentTree';\r\nimport WorkflowStatus from './components/WorkflowStatus';\r\nimport QuotationWorkflow from './components/QuotationWorkflow';\r\nimport ProgressTracking from './components/ProgressTracking';\r\nimport DocumentValidation from './components/DocumentValidation';\r\nimport Input from '../../components/ui/Input';\r\n\r\n\r\n\r\nconst ProjectDocumentationCenter = () => {\r\n  const [projects, setProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [activeView, setActiveView] = useState('workflow');\r\n  const [workflowStep, setWorkflowStep] = useState('client-info');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Mock project data following the workflow diagram\r\n  const mockProjects = [\r\n    {\r\n      id: \"1\",\r\n      code: \"PROJ-2024-001\",\r\n      name: \"Instalaci贸n HVAC Torre Corporativa\",\r\n      client: {\r\n        name: \"ABC Corporation\",\r\n        contact: \"contacto@abccorp.com\",\r\n        phone: \"+52 55 1234 5678\",\r\n        address: \"Av. Reforma 123, Ciudad de M茅xico\"\r\n      },\r\n      workflowStep: \"quotation-validation\",\r\n      status: \"in-progress\",\r\n      statusLabel: \"En Proceso\",\r\n      createdDate: \"2024-01-15\",\r\n      lastUpdated: \"2024-01-20\",\r\n      documents: {\r\n        clientInfo: [\r\n          { name: \"Cat谩logo Cliente\", type: \"pdf\", size: \"2.5 MB\", uploaded: true },\r\n          { name: \"Planos de Obra\", type: \"dwg\", size: \"8.2 MB\", uploaded: true },\r\n          { name: \"Ubicaci贸n\", type: \"pdf\", size: \"1.1 MB\", uploaded: true }\r\n        ],\r\n        quotations: [\r\n          { name: \"Cotizaci贸n Inicial\", type: \"excel\", size: \"1.8 MB\", uploaded: true },\r\n          { name: \"Cotizaci贸n Ajustada\", type: \"excel\", size: \"1.9 MB\", uploaded: false }\r\n        ],\r\n        contracts: [\r\n          { name: \"Contrato Principal\", type: \"pdf\", size: \"3.2 MB\", uploaded: false }\r\n        ],\r\n        progressPhotos: [\r\n          { name: \"Avance Semana 1\", type: \"image\", size: \"12.5 MB\", uploaded: true, count: 15 },\r\n          { name: \"Avance Semana 2\", type: \"image\", size: \"8.3 MB\", uploaded: true, count: 10 }\r\n        ],\r\n        certifications: [],\r\n        finalDocs: []\r\n      },\r\n      quotationData: {\r\n        hasClientCatalog: true,\r\n        installationPercentage: 30,\r\n        parts: \"Equipos HVAC industriales\",\r\n        travel: 5000,\r\n        estimatedPersonnel: 8,\r\n        advancePayment: 30,\r\n        progressPayment: 70,\r\n        warranty: \"12 meses\",\r\n        totalAmount: 850000,\r\n        validatedBy: null,\r\n        clientApproved: false\r\n      },\r\n      progressTracking: {\r\n        photos: [\r\n          { id: 1, url: \"https://images.unsplash.com/photo-1581094794329-c8112a89af12\", \r\n            timestamp: \"2024-01-18 14:30\", location: \"Planta Baja - rea Norte\", description: \"Instalaci贸n ductos principales\" },\r\n          { id: 2, url: \"https://images.unsplash.com/photo-1541888946425-d81bb19240f5\", \r\n            timestamp: \"2024-01-19 10:15\", location: \"Piso 2 - Oficinas\", description: \"Montaje unidades manejadoras\" }\r\n        ],\r\n        pendingPayments: [],\r\n        completedMilestones: ['site-preparation', 'equipment-delivery']\r\n      }\r\n    },\r\n    {\r\n      id: \"2\",\r\n      code: \"PROJ-2024-002\",\r\n      name: \"Sistema Residencial Polanco\",\r\n      client: {\r\n        name: \"Residencial Los Pinos\",\r\n        contact: \"admin@lospinos.mx\",\r\n        phone: \"+52 55 9876 5432\",\r\n        address: \"Polanco, Ciudad de M茅xico\"\r\n      },\r\n      workflowStep: \"provider-search\",\r\n      status: \"quotation-approved\",\r\n      statusLabel: \"Cotizaci贸n Aprobada\",\r\n      createdDate: \"2024-02-01\",\r\n      lastUpdated: \"2024-02-05\",\r\n      documents: {\r\n        clientInfo: [\r\n          { name: \"Requerimientos\", type: \"pdf\", size: \"1.2 MB\", uploaded: true }\r\n        ],\r\n        quotations: [\r\n          { name: \"Cotizaci贸n Aprobada\", type: \"excel\", size: \"2.1 MB\", uploaded: true }\r\n        ],\r\n        contracts: [],\r\n        progressPhotos: [],\r\n        certifications: [],\r\n        finalDocs: []\r\n      },\r\n      quotationData: {\r\n        hasClientCatalog: false,\r\n        installationPercentage: 25,\r\n        parts: \"Sistemas residenciales centrales\",\r\n        travel: 2500,\r\n        estimatedPersonnel: 4,\r\n        advancePayment: 30,\r\n        progressPayment: 70,\r\n        warranty: \"24 meses\",\r\n        totalAmount: 320000,\r\n        validatedBy: \"Martin Rodriguez\",\r\n        clientApproved: true\r\n      },\r\n      progressTracking: {\r\n        photos: [],\r\n        pendingPayments: [],\r\n        completedMilestones: ['quotation-approved', 'client-approval']\r\n      }\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadProjects = async () => {\r\n      setIsLoading(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      setProjects(mockProjects);\r\n      setSelectedProject(mockProjects?.[0]);\r\n      setIsLoading(false);\r\n    };\r\n    loadProjects();\r\n  }, []);\r\n\r\n  const workflowSteps = [\r\n    { id: 'client-info', label: 'Recepci贸n Informaci贸n Cliente', icon: 'FileInput', color: 'blue' },\r\n    { id: 'document-org', label: 'Organizaci贸n Documentos', icon: 'FolderOrganize', color: 'orange' },\r\n    { id: 'catalog-check', label: '驴Cliente da Cat谩logo?', icon: 'HelpCircle', color: 'yellow' },\r\n    { id: 'quotation-dev', label: 'Elaborar Cotizaci贸n', icon: 'Calculator', color: 'green' },\r\n    { id: 'quotation-validation', label: 'Validaci贸n Cotizaci贸n', icon: 'CheckSquare', color: 'purple' },\r\n    { id: 'client-proposal', label: 'Env铆o Propuesta', icon: 'Send', color: 'blue' },\r\n    { id: 'client-approval', label: 'Aprobaci贸n Cliente', icon: 'ThumbsUp', color: 'green' },\r\n    { id: 'provider-search', label: 'B煤squeda Proveedores', icon: 'Search', color: 'orange' },\r\n    { id: 'progress-control', label: 'Control de Avances', icon: 'Camera', color: 'blue' },\r\n    { id: 'payment-confirmation', label: 'Confirmaci贸n Pagos', icon: 'CreditCard', color: 'green' },\r\n    { id: 'final-documentation', label: 'Documentaci贸n Final', icon: 'FileCheck', color: 'purple' },\r\n    { id: 'warranty-continuity', label: 'Continuidad Garant铆a', icon: 'Shield', color: 'blue' }\r\n  ];\r\n\r\n  const viewOptions = [\r\n    { value: 'workflow', label: 'Flujo de Trabajo', icon: 'GitBranch' },\r\n    { value: 'documents', label: 'Documentos', icon: 'FolderOpen' },\r\n    { value: 'quotation', label: 'Cotizaci贸n', icon: 'Calculator' },\r\n    { value: 'progress', label: 'Avances', icon: 'Camera' },\r\n    { value: 'validation', label: 'Validaci贸n', icon: 'CheckCircle' }\r\n  ];\r\n\r\n  const filteredProjects = projects?.filter(project =>\r\n    project?.name?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||\r\n    project?.code?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||\r\n    project?.client?.name?.toLowerCase()?.includes(searchTerm?.toLowerCase())\r\n  );\r\n\r\n  const handleProjectSelect = (project) => {\r\n    setSelectedProject(project);\r\n    setWorkflowStep(project?.workflowStep);\r\n  };\r\n\r\n  const handleWorkflowStepUpdate = (projectId, newStep) => {\r\n    setProjects(prev => prev?.map(project =>\r\n      project?.id === projectId\r\n        ? { ...project, workflowStep: newStep, lastUpdated: new Date()?.toISOString()?.split('T')?.[0] }\r\n        : project\r\n    ));\r\n    if (selectedProject?.id === projectId) {\r\n      setSelectedProject(prev => ({ ...prev, workflowStep: newStep }));\r\n      setWorkflowStep(newStep);\r\n    }\r\n  };\r\n\r\n  const handleDocumentUpload = (projectId, category, document) => {\r\n    setProjects(prev => prev?.map(project =>\r\n      project?.id === projectId\r\n        ? {\r\n            ...project,\r\n            documents: {\r\n              ...project?.documents,\r\n              [category]: [...(project?.documents?.[category] || []), document]\r\n            }\r\n          }\r\n        : project\r\n    ));\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <div className=\"flex items-center justify-center h-96\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n            <p className=\"text-muted-foreground\">Cargando centro de documentaci贸n...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        {/* Breadcrumb */}\r\n        <div className=\"mb-6\">\r\n          <Breadcrumb />\r\n        </div>\r\n\r\n        {/* Header */}\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-foreground mb-2\">\r\n              Centro de Documentaci贸n de Proyectos\r\n            </h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Gesti贸n centralizada del flujo completo de documentaci贸n seg煤n diagrama de actividades\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n            {/* View Toggle */}\r\n            <div className=\"flex bg-muted rounded-lg p-1\">\r\n              {viewOptions?.map((option) => (\r\n                <button\r\n                  key={option?.value}\r\n                  onClick={() => setActiveView(option?.value)}\r\n                  className={`flex items-center space-x-2 px-3 py-2 rounded-md transition-colors ${\r\n                    activeView === option?.value\r\n                      ? 'bg-primary text-primary-foreground'\r\n                      : 'text-muted-foreground hover:text-foreground'\r\n                  }`}\r\n                >\r\n                  <Icon name={option?.icon} size={16} />\r\n                  <span className=\"hidden sm:inline text-sm\">{option?.label}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            <Button\r\n              iconName=\"Upload\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Subir Documentos\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n          {/* Project List Sidebar */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-card border border-border rounded-lg p-4\">\r\n              <div className=\"mb-4\">\r\n                <div className=\"relative\">\r\n                  <Input\r\n                    type=\"search\"\r\n                    placeholder=\"Buscar proyectos...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e?.target?.value)}\r\n                    className=\"pl-10\"\r\n                  />\r\n                  <Icon \r\n                    name=\"Search\" \r\n                    size={16} \r\n                    className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                {filteredProjects?.map((project) => (\r\n                  <div\r\n                    key={project?.id}\r\n                    onClick={() => handleProjectSelect(project)}\r\n                    className={`p-3 rounded-lg border cursor-pointer transition-colors ${\r\n                      selectedProject?.id === project?.id\r\n                        ? 'bg-primary/10 border-primary text-primary' :'bg-background border-border hover:bg-muted'\r\n                    }`}\r\n                  >\r\n                    <div className=\"font-medium text-sm mb-1\">{project?.name}</div>\r\n                    <div className=\"text-xs text-muted-foreground mb-2\">{project?.code}</div>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <span className={`text-xs px-2 py-1 rounded-full ${{\r\n                        'in-progress': 'bg-blue-100 text-blue-800',\r\n                        'quotation-approved': 'bg-green-100 text-green-800',\r\n                        'pending': 'bg-yellow-100 text-yellow-800',\r\n                        'completed': 'bg-gray-100 text-gray-800'\r\n                      }?.[project?.status] || 'bg-gray-100 text-gray-800'}`}>\r\n                        {project?.statusLabel}\r\n                      </span>\r\n                      <Icon name=\"ChevronRight\" size={12} />\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Content Area */}\r\n          <div className=\"lg:col-span-3\">\r\n            {selectedProject && (\r\n              <>\r\n                {/* Project Header */}\r\n                <div className=\"bg-card border border-border rounded-lg p-6 mb-6\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <div>\r\n                      <h2 className=\"text-xl font-semibold text-foreground\">{selectedProject?.name}</h2>\r\n                      <p className=\"text-muted-foreground\">{selectedProject?.code}</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <div className=\"text-sm text-muted-foreground\">Cliente</div>\r\n                      <div className=\"font-medium\">{selectedProject?.client?.name}</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Workflow Progress Bar */}\r\n                  <div className=\"mb-4\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <span className=\"text-sm font-medium\">Progreso del Flujo</span>\r\n                      <span className=\"text-sm text-muted-foreground\">\r\n                        {Math.round((workflowSteps?.findIndex(step => step?.id === workflowStep) + 1) / workflowSteps?.length * 100)}%\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"w-full bg-muted rounded-full h-2\">\r\n                      <div \r\n                        className=\"bg-primary h-2 rounded-full transition-all duration-500\"\r\n                        style={{ \r\n                          width: `${(workflowSteps?.findIndex(step => step?.id === workflowStep) + 1) / workflowSteps?.length * 100}%` \r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Current Step */}\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon \r\n                      name={workflowSteps?.find(step => step?.id === workflowStep)?.icon || 'Circle'} \r\n                      size={16} \r\n                      className=\"text-primary\" \r\n                    />\r\n                    <span className=\"font-medium\">\r\n                      Paso Actual: {workflowSteps?.find(step => step?.id === workflowStep)?.label}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Dynamic Content Based on Active View */}\r\n                {activeView === 'workflow' && (\r\n                  <WorkflowStatus\r\n                    project={selectedProject}\r\n                    workflowSteps={workflowSteps}\r\n                    currentStep={workflowStep}\r\n                    onStepUpdate={handleWorkflowStepUpdate}\r\n                  />\r\n                )}\r\n\r\n                {activeView === 'documents' && (\r\n                  <DocumentTree\r\n                    project={selectedProject}\r\n                    onDocumentUpload={handleDocumentUpload}\r\n                  />\r\n                )}\r\n\r\n                {activeView === 'quotation' && (\r\n                  <QuotationWorkflow\r\n                    project={selectedProject}\r\n                    onUpdate={handleWorkflowStepUpdate}\r\n                  />\r\n                )}\r\n\r\n                {activeView === 'progress' && (\r\n                  <ProgressTracking\r\n                    project={selectedProject}\r\n                    onPhotoUpload={handleDocumentUpload}\r\n                  />\r\n                )}\r\n\r\n                {activeView === 'validation' && (\r\n                  <DocumentValidation\r\n                    project={selectedProject}\r\n                    onValidationComplete={handleWorkflowStepUpdate}\r\n                  />\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {/* Empty State */}\r\n            {!selectedProject && (\r\n              <div className=\"text-center py-12\">\r\n                <Icon name=\"FolderOpen\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-foreground mb-2\">Selecciona un proyecto</h3>\r\n                <p className=\"text-muted-foreground\">\r\n                  Elige un proyecto de la lista para ver su documentaci贸n y flujo de trabajo\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectDocumentationCenter;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\n\r\nconst ProjectCard = ({ project, onSelect, onStageTransition }) => {\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'border-l-red-600 bg-red-50';\r\n      case 'high': return 'border-l-orange-500 bg-orange-50';\r\n      case 'medium': return 'border-l-yellow-500 bg-yellow-50';\r\n      case 'low': return 'border-l-green-500 bg-green-50';\r\n      default: return 'border-l-gray-400 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getPriorityLabel = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'Urgente';\r\n      case 'high': return 'Alta';\r\n      case 'medium': return 'Media';\r\n      case 'low': return 'Baja';\r\n      default: return 'Normal';\r\n    }\r\n  };\r\n\r\n  const getPriorityBadgeColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'bg-red-100 text-red-800';\r\n      case 'high': return 'bg-orange-100 text-orange-800';\r\n      case 'medium': return 'bg-yellow-100 text-yellow-800';\r\n      case 'low': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`p-4 rounded-lg border-l-4 hover:shadow-md transition-all cursor-pointer ${getPriorityColor(project?.priority)}`}\r\n      onClick={() => onSelect?.(project)}\r\n    >\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <h4 className=\"font-medium text-foreground line-clamp-2 flex-1 mr-2\">\r\n          {project?.name}\r\n        </h4>\r\n        <span className={`text-xs px-2 py-1 rounded-full whitespace-nowrap ${getPriorityBadgeColor(project?.priority)}`}>\r\n          {getPriorityLabel(project?.priority)}\r\n        </span>\r\n      </div>\r\n      \r\n      <div className=\"space-y-2 mb-3\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Icon name=\"Building\" size={14} className=\"text-muted-foreground\" />\r\n          <span className=\"text-sm text-muted-foreground\">{project?.client}</span>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          <Icon name=\"Hash\" size={14} className=\"text-muted-foreground\" />\r\n          <span className=\"text-sm text-muted-foreground\">{project?.code}</span>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          <Icon name=\"Users\" size={14} className=\"text-muted-foreground\" />\r\n          <span className=\"text-sm text-muted-foreground\">\r\n            {project?.assignedPersonnel?.slice(0, 2)?.join(', ')}\r\n            {project?.assignedPersonnel?.length > 2 && ` +${project?.assignedPersonnel?.length - 2}`}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <div className=\"flex items-center space-x-1\">\r\n          <Icon name=\"Calendar\" size={14} className=\"text-muted-foreground\" />\r\n          <span className=\"text-sm text-muted-foreground\">\r\n            {new Date(project?.deadline)?.toLocaleDateString('es-MX')}\r\n          </span>\r\n        </div>\r\n        <div className=\"text-sm font-medium text-foreground\">\r\n          {project?.progress}%\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"w-full bg-gray-200 rounded-full h-2 mb-3\">\r\n        <div \r\n          className=\"bg-primary h-2 rounded-full transition-all\"\r\n          style={{ width: `${project?.progress}%` }}\r\n        ></div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        {project?.hasClientCatalog && (\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Icon name=\"FileCheck\" size={14} className=\"text-green-600\" />\r\n            <span className=\"text-xs text-green-600\">Cat谩logo cliente</span>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"flex items-center space-x-1\">\r\n          <Icon name=\"DollarSign\" size={14} className=\"text-muted-foreground\" />\r\n          <span className=\"text-sm text-muted-foreground\">\r\n            ${project?.budget?.toLocaleString('es-MX')}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {project?.notes && (\r\n        <div className=\"mt-3 p-2 bg-blue-50 rounded text-xs text-blue-800\">\r\n          <Icon name=\"Info\" size={12} className=\"inline mr-1\" />\r\n          {project?.notes}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectCard;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst DocumentUploadPanel = ({ project, onUpload }) => {\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [documentType, setDocumentType] = useState('');\r\n\r\n  const documentTypes = [\r\n    { value: 'catalog', label: 'Cat谩logo Cliente', icon: 'Book' },\r\n    { value: 'plan', label: 'Planos de Obra', icon: 'FileText' },\r\n    { value: 'requirement', label: 'Requerimientos', icon: 'CheckSquare' },\r\n    { value: 'location', label: 'Ubicaci贸n de Obra', icon: 'MapPin' },\r\n    { value: 'contract', label: 'Contrato', icon: 'FileSignature' },\r\n    { value: 'certification', label: 'Certificaci贸n', icon: 'Award' }\r\n  ];\r\n\r\n  const handleFileSelect = (event) => {\r\n    const file = event?.target?.files?.[0];\r\n    if (file) {\r\n      setSelectedFile(file);\r\n    }\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!selectedFile || !documentType) return;\r\n\r\n    setIsUploading(true);\r\n    \r\n    // Simulate upload\r\n    await new Promise(resolve => setTimeout(resolve, 2000));\r\n    \r\n    const document = {\r\n      id: Date.now()?.toString(),\r\n      name: selectedFile?.name,\r\n      type: documentType,\r\n      status: 'uploaded',\r\n      uploadedAt: new Date()?.toISOString(),\r\n      size: selectedFile?.size\r\n    };\r\n\r\n    onUpload?.(document);\r\n    \r\n    setSelectedFile(null);\r\n    setDocumentType('');\r\n    setIsUploading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Icon name=\"Upload\" size={16} className=\"text-primary\" />\r\n        <h4 className=\"font-medium\">Gesti贸n de Documentos</h4>\r\n      </div>\r\n      {/* Existing Documents */}\r\n      {project?.documents?.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <h5 className=\"text-sm font-medium text-muted-foreground\">Documentos Existentes</h5>\r\n          <div className=\"space-y-2 max-h-32 overflow-y-auto\">\r\n            {project?.documents?.map((doc, index) => (\r\n              <div key={index} className=\"flex items-center space-x-2 p-2 bg-gray-50 rounded\">\r\n                <Icon \r\n                  name={\r\n                    doc?.type === 'catalog' ? 'Book' :\r\n                    doc?.type === 'plan' ? 'FileText' :\r\n                    doc?.type === 'requirement' ? 'CheckSquare' :\r\n                    doc?.type === 'location'? 'MapPin' : 'File'\r\n                  } \r\n                  size={14} \r\n                  className=\"text-primary\" \r\n                />\r\n                <span className=\"text-sm flex-1\">{doc?.name}</span>\r\n                <span className={`text-xs px-2 py-1 rounded-full ${\r\n                  doc?.status === 'uploaded' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\r\n                }`}>\r\n                  {doc?.status === 'uploaded' ? 'Subido' : 'Pendiente'}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Upload New Document */}\r\n      <div className=\"space-y-3\">\r\n        <h5 className=\"text-sm font-medium text-muted-foreground\">Subir Nuevo Documento</h5>\r\n        \r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium\">Tipo de Documento</label>\r\n          <select\r\n            value={documentType}\r\n            onChange={(e) => setDocumentType(e?.target?.value)}\r\n            className=\"w-full p-2 border rounded-md text-sm\"\r\n          >\r\n            <option value=\"\">Seleccionar tipo...</option>\r\n            {documentTypes?.map((type) => (\r\n              <option key={type?.value} value={type?.value}>{type?.label}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium\">Archivo</label>\r\n          <Input\r\n            type=\"file\"\r\n            onChange={handleFileSelect}\r\n            accept=\".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png\"\r\n            className=\"text-sm\"\r\n          />\r\n          {selectedFile && (\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Archivo seleccionado: {selectedFile?.name}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        <Button\r\n          onClick={handleUpload}\r\n          disabled={!selectedFile || !documentType || isUploading}\r\n          iconName={isUploading ? \"Loader2\" : \"Upload\"}\r\n          iconPosition=\"left\"\r\n          size=\"sm\"\r\n          className=\"w-full\"\r\n        >\r\n          {isUploading ? 'Subiendo...' : 'Subir Documento'}\r\n        </Button>\r\n      </div>\r\n      {/* Upload Guidelines */}\r\n      <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={14} className=\"text-blue-600 mt-0.5\" />\r\n          <div className=\"text-xs text-blue-800\">\r\n            <p className=\"font-medium mb-1\">Organizaci贸n Manual de Documentos</p>\r\n            <p>Los documentos se organizan en carpetas digitales. Aseg煤rese de seleccionar el tipo correcto para una mejor organizaci贸n.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentUploadPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst QuotationPanel = ({ project, onUpdate }) => {\r\n  const [quotation, setQuotation] = useState({\r\n    installationPercentage: 25,\r\n    parts: 15,\r\n    travel: 8,\r\n    personnel: 12,\r\n    advance: 30,\r\n    progress: 70,\r\n    warranty: '12 meses',\r\n    ...project?.quotation\r\n  });\r\n\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setQuotation(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setIsSaving(true);\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    onUpdate?.(quotation);\r\n    setIsSaving(false);\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    const base = 100000; // Base amount for calculation\r\n    const installation = (quotation?.installationPercentage / 100) * base;\r\n    const parts = (quotation?.parts / 100) * base;\r\n    const travel = (quotation?.travel / 100) * base;\r\n    const personnel = (quotation?.personnel / 100) * base;\r\n    \r\n    return installation + parts + travel + personnel;\r\n  };\r\n\r\n  const getAdvanceAmount = () => {\r\n    return (quotation?.advance / 100) * calculateTotal();\r\n  };\r\n\r\n  const getProgressAmount = () => {\r\n    return (quotation?.progress / 100) * calculateTotal();\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Icon name=\"Calculator\" size={16} className=\"text-primary\" />\r\n        <h4 className=\"font-medium\">Constructor de Cotizaci贸n</h4>\r\n      </div>\r\n      {/* Decision Point Indicator */}\r\n      {project?.hasClientCatalog ? (\r\n        <div className=\"p-3 bg-green-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"CheckCircle\" size={14} className=\"text-green-600\" />\r\n            <p className=\"text-sm text-green-800 font-medium\">Cliente proporcion贸 cat谩logo</p>\r\n          </div>\r\n          <p className=\"text-xs text-green-700 mt-1\">Elaborar cotizaci贸n inicial desde cat谩logo</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"p-3 bg-yellow-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"AlertTriangle\" size={14} className=\"text-yellow-600\" />\r\n            <p className=\"text-sm text-yellow-800 font-medium\">Sin cat谩logo del cliente</p>\r\n          </div>\r\n          <p className=\"text-xs text-yellow-700 mt-1\">Identificar materiales a partir de planos de obra</p>\r\n        </div>\r\n      )}\r\n      {/* Quotation Form */}\r\n      <div className=\"space-y-3\">\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Instalaci贸n</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.installationPercentage}\r\n              onChange={(e) => handleInputChange('installationPercentage', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Piezas</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.parts}\r\n              onChange={(e) => handleInputChange('parts', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Vi谩ticos</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.travel}\r\n              onChange={(e) => handleInputChange('travel', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Personal</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.personnel}\r\n              onChange={(e) => handleInputChange('personnel', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Anticipo</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.advance}\r\n              onChange={(e) => handleInputChange('advance', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Avance</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.progress}\r\n              onChange={(e) => handleInputChange('progress', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"text-sm font-medium\">Garant铆a</label>\r\n          <select\r\n            value={quotation?.warranty}\r\n            onChange={(e) => handleInputChange('warranty', e?.target?.value)}\r\n            className=\"w-full p-2 border rounded-md text-sm\"\r\n          >\r\n            <option value=\"6 meses\">6 meses</option>\r\n            <option value=\"12 meses\">12 meses</option>\r\n            <option value=\"18 meses\">18 meses</option>\r\n            <option value=\"24 meses\">24 meses</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      {/* Calculation Summary */}\r\n      <div className=\"p-3 bg-gray-50 rounded-lg space-y-2\">\r\n        <h5 className=\"text-sm font-medium\">Resumen de C谩lculos</h5>\r\n        <div className=\"text-xs space-y-1\">\r\n          <div className=\"flex justify-between\">\r\n            <span>Total Estimado:</span>\r\n            <span className=\"font-medium\">${calculateTotal()?.toLocaleString('es-MX')}</span>\r\n          </div>\r\n          <div className=\"flex justify-between\">\r\n            <span>Anticipo ({quotation?.advance}%):</span>\r\n            <span>${getAdvanceAmount()?.toLocaleString('es-MX')}</span>\r\n          </div>\r\n          <div className=\"flex justify-between\">\r\n            <span>Avance ({quotation?.progress}%):</span>\r\n            <span>${getProgressAmount()?.toLocaleString('es-MX')}</span>\r\n          </div>\r\n          <div className=\"flex justify-between\">\r\n            <span>Garant铆a:</span>\r\n            <span>{quotation?.warranty}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Conditions Note */}\r\n      <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={14} className=\"text-blue-600 mt-0.5\" />\r\n          <div className=\"text-xs text-blue-800\">\r\n            <p className=\"font-medium mb-1\">Condiciones Est谩ndar</p>\r\n            <p>30% anticipo, 70% avance. El documento de cotizaci贸n engloba instalaci贸n, piezas, vi谩ticos, personal estimado y notas sobre garant铆as.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Button\r\n        onClick={handleSave}\r\n        disabled={isSaving}\r\n        iconName={isSaving ? \"Loader2\" : \"Save\"}\r\n        iconPosition=\"left\"\r\n        size=\"sm\"\r\n        className=\"w-full\"\r\n      >\r\n        {isSaving ? 'Guardando...' : 'Guardar Cotizaci贸n'}\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ValidationPanel = ({ project, onSubmit }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [validationNotes, setValidationNotes] = useState('');\r\n\r\n  const handleSubmitForValidation = async () => {\r\n    setIsSubmitting(true);\r\n    \r\n    await new Promise(resolve => setTimeout(resolve, 1500));\r\n    \r\n    const validation = {\r\n      status: 'submitted',\r\n      reviewer: 'Ventas/Mart铆n',\r\n      submittedAt: new Date()?.toISOString(),\r\n      notes: validationNotes\r\n    };\r\n    \r\n    onSubmit?.(validation);\r\n    setIsSubmitting(false);\r\n    setValidationNotes('');\r\n  };\r\n\r\n  const handleApprove = async () => {\r\n    setIsSubmitting(true);\r\n    \r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    \r\n    const validation = {\r\n      status: 'approved',\r\n      reviewer: 'Ventas/Mart铆n',\r\n      approvedAt: new Date()?.toISOString(),\r\n      notes: validationNotes\r\n    };\r\n    \r\n    onSubmit?.(validation);\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  const handleReject = async () => {\r\n    setIsSubmitting(true);\r\n    \r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    \r\n    const validation = {\r\n      status: 'rejected',\r\n      reviewer: 'Ventas/Mart铆n',\r\n      rejectedAt: new Date()?.toISOString(),\r\n      notes: validationNotes\r\n    };\r\n    \r\n    onSubmit?.(validation);\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Icon name=\"CheckCircle\" size={16} className=\"text-primary\" />\r\n        <h4 className=\"font-medium\">Validaci贸n de Cotizaci贸n</h4>\r\n      </div>\r\n      {/* Current Status */}\r\n      {project?.validation ? (\r\n        <div className={`p-3 rounded-lg ${\r\n          project?.validation?.status === 'approved' ? 'bg-green-50' :\r\n          project?.validation?.status === 'rejected'? 'bg-red-50' : 'bg-yellow-50'\r\n        }`}>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon \r\n              name={\r\n                project?.validation?.status === 'approved' ? 'CheckCircle' :\r\n                project?.validation?.status === 'rejected'? 'XCircle' : 'Clock'\r\n              } \r\n              size={14} \r\n              className={\r\n                project?.validation?.status === 'approved' ? 'text-green-600' :\r\n                project?.validation?.status === 'rejected'? 'text-red-600' : 'text-yellow-600'\r\n              } \r\n            />\r\n            <p className={`text-sm font-medium ${\r\n              project?.validation?.status === 'approved' ? 'text-green-800' :\r\n              project?.validation?.status === 'rejected'? 'text-red-800' : 'text-yellow-800'\r\n            }`}>\r\n              {project?.validation?.status === 'approved' ? 'Cotizaci贸n Aprobada' :\r\n               project?.validation?.status === 'rejected'? 'Cotizaci贸n Rechazada' : 'Validaci贸n Pendiente'}\r\n            </p>\r\n          </div>\r\n          <p className={`text-xs mt-1 ${\r\n            project?.validation?.status === 'approved' ? 'text-green-700' :\r\n            project?.validation?.status === 'rejected'? 'text-red-700' : 'text-yellow-700'\r\n          }`}>\r\n            Revisor: {project?.validation?.reviewer}\r\n          </p>\r\n          {project?.validation?.notes && (\r\n            <p className={`text-xs mt-2 ${\r\n              project?.validation?.status === 'approved' ? 'text-green-700' :\r\n              project?.validation?.status === 'rejected'? 'text-red-700' : 'text-yellow-700'\r\n            }`}>\r\n              Notas: {project?.validation?.notes}\r\n            </p>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"AlertCircle\" size={14} className=\"text-blue-600\" />\r\n            <p className=\"text-sm text-blue-800 font-medium\">Cotizaci贸n lista para validaci贸n</p>\r\n          </div>\r\n          <p className=\"text-xs text-blue-700 mt-1\">La cotizaci贸n debe ser validada por Ventas/Mart铆n antes de enviar al cliente</p>\r\n        </div>\r\n      )}\r\n      {/* Quotation Summary */}\r\n      {project?.quotation && (\r\n        <div className=\"p-3 bg-gray-50 rounded-lg\">\r\n          <h5 className=\"text-sm font-medium mb-2\">Resumen de Cotizaci贸n</h5>\r\n          <div className=\"text-xs space-y-1\">\r\n            <div className=\"flex justify-between\">\r\n              <span>Instalaci贸n:</span>\r\n              <span>{project?.quotation?.installationPercentage}%</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Piezas:</span>\r\n              <span>{project?.quotation?.parts}%</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Vi谩ticos:</span>\r\n              <span>{project?.quotation?.travel}%</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Personal:</span>\r\n              <span>{project?.quotation?.personnel}%</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Condiciones:</span>\r\n              <span>{project?.quotation?.advance}% anticipo, {project?.quotation?.progress}% avance</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Garant铆a:</span>\r\n              <span>{project?.quotation?.warranty}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Validation Notes */}\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium\">Notas de Validaci贸n</label>\r\n        <textarea\r\n          value={validationNotes}\r\n          onChange={(e) => setValidationNotes(e?.target?.value)}\r\n          placeholder=\"Agregar comentarios sobre la validaci贸n...\"\r\n          className=\"w-full p-2 border rounded-md text-sm resize-none\"\r\n          rows={3}\r\n        />\r\n      </div>\r\n      {/* Action Buttons */}\r\n      {!project?.validation || project?.validation?.status === 'rejected' ? (\r\n        <Button\r\n          onClick={handleSubmitForValidation}\r\n          disabled={isSubmitting}\r\n          iconName={isSubmitting ? \"Loader2\" : \"Send\"}\r\n          iconPosition=\"left\"\r\n          size=\"sm\"\r\n          className=\"w-full\"\r\n        >\r\n          {isSubmitting ? 'Enviando...' : 'Enviar para Validaci贸n'}\r\n        </Button>\r\n      ) : project?.validation?.status === 'pending' ? (\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          <Button\r\n            onClick={handleApprove}\r\n            disabled={isSubmitting}\r\n            iconName=\"CheckCircle\"\r\n            iconPosition=\"left\"\r\n            size=\"sm\"\r\n            variant=\"default\"\r\n          >\r\n            Aprobar\r\n          </Button>\r\n          <Button\r\n            onClick={handleReject}\r\n            disabled={isSubmitting}\r\n            iconName=\"XCircle\"\r\n            iconPosition=\"left\"\r\n            size=\"sm\"\r\n            variant=\"destructive\"\r\n          >\r\n            Rechazar\r\n          </Button>\r\n        </div>\r\n      ) : null}\r\n      {/* Validation Process Info */}\r\n      <div className=\"p-3 bg-amber-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Diamond\" size={14} className=\"text-amber-600 mt-0.5\" />\r\n          <div className=\"text-xs text-amber-800\">\r\n            <p className=\"font-medium mb-1\">Punto de Decisi贸n</p>\r\n            <p>La validaci贸n por Ventas/Mart铆n es un punto clave del proceso. Una vez aprobada, se puede proceder al env铆o de propuesta al cliente.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ValidationPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\n\r\nimport ProjectCard from './components/ProjectCard';\r\nimport DocumentUploadPanel from './components/DocumentUploadPanel';\r\nimport QuotationPanel from './components/QuotationPanel';\r\nimport ValidationPanel from './components/ValidationPanel';\r\n\r\nconst ProjectWorkflowManagement = () => {\r\n  const [projects, setProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [activeStage, setActiveStage] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showControls, setShowControls] = useState(false);\r\n\r\n  // Workflow stages following the diagram\r\n  const workflowStages = [\r\n    {\r\n      id: 'information-reception',\r\n      name: 'Recepci贸n de Informaci贸n',\r\n      description: 'Cat谩logos, planos, ubicaci贸n de obra o requerimientos',\r\n      color: 'bg-blue-500',\r\n      icon: 'FileText'\r\n    },\r\n    {\r\n      id: 'document-organization',\r\n      name: 'Organizaci贸n de Documentos',\r\n      description: 'Creaci贸n de carpetas digitales y organizaci贸n de archivos',\r\n      color: 'bg-indigo-500',\r\n      icon: 'FolderOpen'\r\n    },\r\n    {\r\n      id: 'quotation-development',\r\n      name: 'Elaboraci贸n de Cotizaci贸n',\r\n      description: 'Desarrollo inicial de cotizaci贸n con porcentajes y condiciones',\r\n      color: 'bg-purple-500',\r\n      icon: 'Calculator'\r\n    },\r\n    {\r\n      id: 'validation',\r\n      name: 'Validaci贸n',\r\n      description: 'Validaci贸n por Ventas/Mart铆n',\r\n      color: 'bg-yellow-500',\r\n      icon: 'CheckCircle'\r\n    },\r\n    {\r\n      id: 'client-approval',\r\n      name: 'Aprobaci贸n Cliente',\r\n      description: 'Env铆o y aprobaci贸n de propuesta por cliente',\r\n      color: 'bg-green-500',\r\n      icon: 'UserCheck'\r\n    },\r\n    {\r\n      id: 'provider-search',\r\n      name: 'B煤squeda de Proveedores',\r\n      description: 'B煤squeda en zona de obra y comunicaci贸n a Administraci贸n',\r\n      color: 'bg-orange-500',\r\n      icon: 'Users'\r\n    },\r\n    {\r\n      id: 'work-execution',\r\n      name: 'Ejecuci贸n de Obra',\r\n      description: 'Seguimiento de trabajos y control de avances',\r\n      color: 'bg-red-500',\r\n      icon: 'Wrench'\r\n    },\r\n    {\r\n      id: 'project-closure',\r\n      name: 'Cierre de Proyecto',\r\n      description: 'Documentaci贸n final y continuidad de garant铆a',\r\n      color: 'bg-gray-500',\r\n      icon: 'Archive'\r\n    }\r\n  ];\r\n\r\n  // Mock project data following the workflow\r\n  const mockProjects = [\r\n    {\r\n      id: \"1\",\r\n      code: \"PROJ-WF-001\",\r\n      name: \"Instalaci贸n HVAC Torre Corporativa\",\r\n      client: \"ABC Corporation\",\r\n      type: \"Instalaci贸n HVAC\",\r\n      stage: \"information-reception\",\r\n      priority: \"high\",\r\n      assignedPersonnel: [\"Carlos Mart铆nez\", \"Ana Rodr铆guez\"],\r\n      deadline: \"2024-04-30\",\r\n      budget: 850000,\r\n      progress: 15,\r\n      hasClientCatalog: true,\r\n      documents: [\r\n        { name: \"Planos_Arquitectonicos.pdf\", type: \"plan\", status: \"uploaded\" },\r\n        { name: \"Catalogo_Cliente.pdf\", type: \"catalog\", status: \"uploaded\" }\r\n      ],\r\n      notes: \"Cliente proporcion贸 cat谩logo completo y planos actualizados\"\r\n    },\r\n    {\r\n      id: \"2\",\r\n      code: \"PROJ-WF-002\",\r\n      name: \"Mantenimiento Sistema Industrial\",\r\n      client: \"XYZ Industries\",\r\n      type: \"Mantenimiento\",\r\n      stage: \"document-organization\",\r\n      priority: \"medium\",\r\n      assignedPersonnel: [\"Mar铆a L贸pez\"],\r\n      deadline: \"2024-03-15\",\r\n      budget: 320000,\r\n      progress: 35,\r\n      hasClientCatalog: false,\r\n      documents: [\r\n        { name: \"Requerimientos.pdf\", type: \"requirement\", status: \"uploaded\" },\r\n        { name: \"Ubicacion_Obra.pdf\", type: \"location\", status: \"uploaded\" }\r\n      ],\r\n      notes: \"Organizaci贸n manual de documentos en proceso\"\r\n    },\r\n    {\r\n      id: \"3\",\r\n      code: \"PROJ-WF-003\",\r\n      name: \"Actualizaci贸n Sistema Residencial\",\r\n      client: \"Green Energy M茅xico\",\r\n      type: \"Actualizaci贸n\",\r\n      stage: \"quotation-development\",\r\n      priority: \"low\",\r\n      assignedPersonnel: [\"Roberto Silva\", \"Carmen D铆az\"],\r\n      deadline: \"2024-05-30\",\r\n      budget: 180000,\r\n      progress: 50,\r\n      hasClientCatalog: false,\r\n      documents: [\r\n        { name: \"Planos_Obra.pdf\", type: \"plan\", status: \"uploaded\" }\r\n      ],\r\n      quotation: {\r\n        installationPercentage: 25,\r\n        parts: 15,\r\n        travel: 8,\r\n        personnel: 12,\r\n        advance: 30,\r\n        progress: 70,\r\n        warranty: \"12 meses\"\r\n      },\r\n      notes: \"Identificaci贸n de materiales desde planos en desarrollo\"\r\n    },\r\n    {\r\n      id: \"4\",\r\n      code: \"PROJ-WF-004\",\r\n      name: \"Consultor铆a Eficiencia Energ茅tica\",\r\n      client: \"Tech Solutions SA\",\r\n      type: \"Consultor铆a\",\r\n      stage: \"validation\",\r\n      priority: \"urgent\",\r\n      assignedPersonnel: [\"Fernando Ruiz\", \"Patricia Morales\"],\r\n      deadline: \"2024-07-15\",\r\n      budget: 450000,\r\n      progress: 75,\r\n      hasClientCatalog: true,\r\n      quotation: {\r\n        installationPercentage: 30,\r\n        parts: 20,\r\n        travel: 10,\r\n        personnel: 15,\r\n        advance: 30,\r\n        progress: 70,\r\n        warranty: \"24 meses\"\r\n      },\r\n      validation: {\r\n        status: \"pending\",\r\n        reviewer: \"Ventas/Mart铆n\",\r\n        submittedAt: \"2024-03-25\"\r\n      },\r\n      notes: \"Cotizaci贸n lista para validaci贸n de Ventas/Mart铆n\"\r\n    },\r\n    {\r\n      id: \"5\",\r\n      code: \"PROJ-WF-005\",\r\n      name: \"Reparaci贸n Sistema Comercial\",\r\n      client: \"Urban Development Group\",\r\n      type: \"Reparaci贸n\",\r\n      stage: \"client-approval\",\r\n      priority: \"high\",\r\n      assignedPersonnel: [\"Alejandro Torres\", \"Sof铆a Ram铆rez\"],\r\n      deadline: \"2024-04-15\",\r\n      budget: 275000,\r\n      progress: 85,\r\n      hasClientCatalog: false,\r\n      quotation: {\r\n        installationPercentage: 20,\r\n        parts: 25,\r\n        travel: 5,\r\n        personnel: 10,\r\n        advance: 30,\r\n        progress: 70,\r\n        warranty: \"18 meses\"\r\n      },\r\n      approval: {\r\n        status: \"sent\",\r\n        method: \"email\",\r\n        sentAt: \"2024-03-20\",\r\n        adjustments: 2\r\n      },\r\n      notes: \"Propuesta enviada por correo, pendiente aprobaci贸n cliente\"\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadProjects = async () => {\r\n      setIsLoading(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      setProjects(mockProjects);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    loadProjects();\r\n  }, []);\r\n\r\n  const handleStageTransition = (projectId, newStage) => {\r\n    setProjects(prev => prev?.map(project => \r\n      project?.id === projectId \r\n        ? { ...project, stage: newStage, progress: Math.min(project?.progress + 10, 100) }\r\n        : project\r\n    ));\r\n  };\r\n\r\n  const handleProjectSelect = (project) => {\r\n    setSelectedProject(project);\r\n    setShowControls(true);\r\n  };\r\n\r\n  const handleDocumentUpload = (projectId, document) => {\r\n    setProjects(prev => prev?.map(project => \r\n      project?.id === projectId \r\n        ? { \r\n            ...project, \r\n            documents: [...(project?.documents || []), document]\r\n          }\r\n        : project\r\n    ));\r\n  };\r\n\r\n  const handleQuotationUpdate = (projectId, quotationData) => {\r\n    setProjects(prev => prev?.map(project => \r\n      project?.id === projectId \r\n        ? { ...project, quotation: quotationData }\r\n        : project\r\n    ));\r\n  };\r\n\r\n  const handleValidationSubmit = (projectId, validationData) => {\r\n    setProjects(prev => prev?.map(project => \r\n      project?.id === projectId \r\n        ? { ...project, validation: validationData }\r\n        : project\r\n    ));\r\n  };\r\n\r\n  const getProjectsByStage = (stageId) => {\r\n    return projects?.filter(project => project?.stage === stageId) || [];\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'border-l-red-600 bg-red-50';\r\n      case 'high': return 'border-l-orange-500 bg-orange-50';\r\n      case 'medium': return 'border-l-yellow-500 bg-yellow-50';\r\n      case 'low': return 'border-l-green-500 bg-green-50';\r\n      default: return 'border-l-gray-400 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <div className=\"flex items-center justify-center h-96\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n            <p className=\"text-muted-foreground\">Cargando flujo de trabajo...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        {/* Breadcrumb */}\r\n        <div className=\"mb-6\">\r\n          <Breadcrumb />\r\n        </div>\r\n\r\n        {/* Header */}\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-foreground mb-2\">Flujo de Trabajo - rea de Proyectos</h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Gesti贸n completa del ciclo de vida de proyectos desde recepci贸n hasta cierre\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n            <Button\r\n              variant=\"outline\"\r\n              iconName=\"RefreshCw\"\r\n              iconPosition=\"left\"\r\n              onClick={() => window.location?.reload()}\r\n            >\r\n              Actualizar\r\n            </Button>\r\n            <Button\r\n              iconName=\"Plus\"\r\n              iconPosition=\"left\"\r\n              onClick={() => setShowControls(true)}\r\n            >\r\n              Nuevo Proyecto\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex gap-6\">\r\n          {/* Main Workflow Board */}\r\n          <div className=\"flex-1\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8\">\r\n              {workflowStages?.map((stage) => (\r\n                <div key={stage?.id} className=\"bg-card rounded-lg shadow-sm border\">\r\n                  <div className={`p-4 ${stage?.color} text-white rounded-t-lg`}>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name={stage?.icon} size={20} />\r\n                      <h3 className=\"font-semibold text-sm\">{stage?.name}</h3>\r\n                    </div>\r\n                    <p className=\"text-xs mt-1 opacity-90\">{stage?.description}</p>\r\n                    <div className=\"text-xs mt-2 bg-white/20 rounded px-2 py-1 inline-block\">\r\n                      {getProjectsByStage(stage?.id)?.length} proyectos\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4 space-y-3 min-h-[400px]\">\r\n                    {getProjectsByStage(stage?.id)?.map((project) => (\r\n                      <div\r\n                        key={project?.id}\r\n                        onClick={() => handleProjectSelect(project)}\r\n                        className={`p-3 rounded-lg border-l-4 cursor-pointer hover:shadow-md transition-all ${getPriorityColor(project?.priority)}`}\r\n                      >\r\n                        <div className=\"flex items-start justify-between mb-2\">\r\n                          <h4 className=\"font-medium text-sm text-foreground line-clamp-2\">\r\n                            {project?.name}\r\n                          </h4>\r\n                          <span className={`text-xs px-2 py-1 rounded-full ${\r\n                            project?.priority === 'urgent' ? 'bg-red-100 text-red-800' :\r\n                            project?.priority === 'high' ? 'bg-orange-100 text-orange-800' :\r\n                            project?.priority === 'medium'? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                          }`}>\r\n                            {project?.priority === 'urgent' ? 'Urgente' :\r\n                             project?.priority === 'high' ? 'Alta' :\r\n                             project?.priority === 'medium' ? 'Media' : 'Baja'}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <p className=\"text-xs text-muted-foreground mb-2\">{project?.client}</p>\r\n                        <p className=\"text-xs text-muted-foreground mb-2\">{project?.code}</p>\r\n                        \r\n                        <div className=\"flex items-center space-x-2 mb-2\">\r\n                          <Icon name=\"Users\" size={12} className=\"text-muted-foreground\" />\r\n                          <span className=\"text-xs text-muted-foreground\">\r\n                            {project?.assignedPersonnel?.slice(0, 2)?.join(', ')}\r\n                            {project?.assignedPersonnel?.length > 2 && ` +${project?.assignedPersonnel?.length - 2}`}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Icon name=\"Calendar\" size={12} className=\"text-muted-foreground\" />\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {new Date(project?.deadline)?.toLocaleDateString('es-MX')}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"text-xs font-medium text-foreground\">\r\n                            {project?.progress}%\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"w-full bg-gray-200 rounded-full h-1 mt-2\">\r\n                          <div \r\n                            className=\"bg-primary h-1 rounded-full transition-all\"\r\n                            style={{ width: `${project?.progress}%` }}\r\n                          ></div>\r\n                        </div>\r\n\r\n                        {project?.hasClientCatalog && (\r\n                          <div className=\"flex items-center space-x-1 mt-2\">\r\n                            <Icon name=\"FileCheck\" size={12} className=\"text-green-600\" />\r\n                            <span className=\"text-xs text-green-600\">Cat谩logo cliente</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                    \r\n                    {getProjectsByStage(stage?.id)?.length === 0 && (\r\n                      <div className=\"text-center py-8\">\r\n                        <Icon name=\"Inbox\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                        <p className=\"text-sm text-muted-foreground\">Sin proyectos</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Workflow Controls Panel */}\r\n          {showControls && (\r\n            <div className=\"w-96 bg-card rounded-lg shadow-lg border h-fit\">\r\n              <div className=\"p-4 border-b\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className=\"font-semibold\">Controles de Flujo</h3>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    iconName=\"X\"\r\n                    onClick={() => setShowControls(false)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"p-4 space-y-6\">\r\n                {selectedProject && (\r\n                  <div className=\"space-y-4\">\r\n                    <div>\r\n                      <h4 className=\"font-medium mb-2\">{selectedProject?.name}</h4>\r\n                      <p className=\"text-sm text-muted-foreground\">{selectedProject?.client}</p>\r\n                    </div>\r\n\r\n                    {/* Document Upload */}\r\n                    <DocumentUploadPanel\r\n                      project={selectedProject}\r\n                      onUpload={(document) => handleDocumentUpload(selectedProject?.id, document)}\r\n                    />\r\n\r\n                    {/* Quotation Builder */}\r\n                    {(selectedProject?.stage === 'quotation-development' || selectedProject?.quotation) && (\r\n                      <QuotationPanel\r\n                        project={selectedProject}\r\n                        onUpdate={(quotation) => handleQuotationUpdate(selectedProject?.id, quotation)}\r\n                      />\r\n                    )}\r\n\r\n                    {/* Validation */}\r\n                    {selectedProject?.stage === 'validation' && (\r\n                      <ValidationPanel\r\n                        project={selectedProject}\r\n                        onSubmit={(validation) => handleValidationSubmit(selectedProject?.id, validation)}\r\n                      />\r\n                    )}\r\n\r\n                    {/* Stage Transition */}\r\n                    <div className=\"space-y-2\">\r\n                      <label className=\"text-sm font-medium\">Avanzar Etapa</label>\r\n                      <div className=\"grid grid-cols-2 gap-2\">\r\n                        {workflowStages?.map((stage) => (\r\n                          <Button\r\n                            key={stage?.id}\r\n                            variant={selectedProject?.stage === stage?.id ? \"default\" : \"outline\"}\r\n                            size=\"sm\"\r\n                            onClick={() => handleStageTransition(selectedProject?.id, stage?.id)}\r\n                            disabled={selectedProject?.stage === stage?.id}\r\n                            className=\"text-xs\"\r\n                          >\r\n                            {stage?.name}\r\n                          </Button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Mobile View */}\r\n        <div className=\"lg:hidden\">\r\n          <div className=\"space-y-4\">\r\n            {workflowStages?.map((stage) => (\r\n              <div key={stage?.id} className=\"bg-card rounded-lg shadow-sm border\">\r\n                <div className={`p-4 ${stage?.color} text-white`}>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name={stage?.icon} size={20} />\r\n                    <h3 className=\"font-semibold\">{stage?.name}</h3>\r\n                    <span className=\"bg-white/20 rounded px-2 py-1 text-xs\">\r\n                      {getProjectsByStage(stage?.id)?.length}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"text-sm mt-1 opacity-90\">{stage?.description}</p>\r\n                </div>\r\n                \r\n                <div className=\"p-4\">\r\n                  {getProjectsByStage(stage?.id)?.map((project) => (\r\n                    <ProjectCard\r\n                      key={project?.id}\r\n                      project={project}\r\n                      onSelect={handleProjectSelect}\r\n                      onStageTransition={handleStageTransition}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectWorkflowManagement;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst QuotationForm = ({ quotation, onUpdate, onCalculationUpdate, onValidationSubmit, isSaving }) => {\r\n  const [calculations, setCalculations] = useState(quotation?.calculations || {});\r\n  const [isCalculating, setIsCalculating] = useState(false);\r\n\r\n  const handleCalculationChange = (field, value) => {\r\n    const updatedCalculations = {\r\n      ...calculations,\r\n      [field]: parseFloat(value) || 0\r\n    };\r\n\r\n    setCalculations(updatedCalculations);\r\n    onCalculationUpdate?.(updatedCalculations);\r\n  };\r\n\r\n  const handleAutoCalculate = async () => {\r\n    setIsCalculating(true);\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    \r\n    // Auto-calculate based on standard percentages\r\n    const autoCalculations = {\r\n      ...calculations,\r\n      installationPercentage: 25,\r\n      parts: 15,\r\n      travel: 8,\r\n      personnel: 12\r\n    };\r\n\r\n    setCalculations(autoCalculations);\r\n    onCalculationUpdate?.(autoCalculations);\r\n    setIsCalculating(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold\">Formulario de Cotizaci贸n</h3>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          iconName=\"Calculator\"\r\n          iconPosition=\"left\"\r\n          onClick={handleAutoCalculate}\r\n          disabled={isCalculating}\r\n        >\r\n          {isCalculating ? 'Calculando...' : 'Auto-Calcular'}\r\n        </Button>\r\n      </div>\r\n      {/* Basic Information */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div>\r\n          <label className=\"text-sm font-medium mb-2 block\">Proyecto</label>\r\n          <Input\r\n            value={quotation?.projectName || ''}\r\n            readOnly\r\n            className=\"bg-muted\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"text-sm font-medium mb-2 block\">Cliente</label>\r\n          <Input\r\n            value={quotation?.client?.name || ''}\r\n            readOnly\r\n            className=\"bg-muted\"\r\n          />\r\n        </div>\r\n      </div>\r\n      {/* Calculation Engine */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"font-medium flex items-center space-x-2\">\r\n          <Icon name=\"Calculator\" size={16} />\r\n          <span>Motor de C谩lculos Automatizado</span>\r\n        </h4>\r\n\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Instalaci贸n</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={calculations?.installationPercentage || 0}\r\n              onChange={(e) => handleCalculationChange('installationPercentage', e?.target?.value)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Piezas</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={calculations?.parts || 0}\r\n              onChange={(e) => handleCalculationChange('parts', e?.target?.value)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Vi谩ticos</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={calculations?.travel || 0}\r\n              onChange={(e) => handleCalculationChange('travel', e?.target?.value)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Personal</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={calculations?.personnel || 0}\r\n              onChange={(e) => handleCalculationChange('personnel', e?.target?.value)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Payment Terms */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">Garant铆a</label>\r\n            <select\r\n              value={calculations?.warranty || '12 meses'}\r\n              onChange={(e) => handleCalculationChange('warranty', e?.target?.value)}\r\n              className=\"w-full p-2 border rounded-md text-sm\"\r\n            >\r\n              <option value=\"6 meses\">6 meses</option>\r\n              <option value=\"12 meses\">12 meses</option>\r\n              <option value=\"18 meses\">18 meses</option>\r\n              <option value=\"24 meses\">24 meses</option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Anticipo</label>\r\n            <Input\r\n              type=\"number\"\r\n              value=\"30\"\r\n              readOnly\r\n              className=\"bg-muted text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Avance</label>\r\n            <Input\r\n              type=\"number\"\r\n              value=\"70\"\r\n              readOnly\r\n              className=\"bg-muted text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Calculation Results */}\r\n      <div className=\"p-4 bg-gray-50 rounded-lg\">\r\n        <h5 className=\"font-medium mb-3 flex items-center space-x-2\">\r\n          <Icon name=\"TrendingUp\" size={16} />\r\n          <span>Resumen de C谩lculos</span>\r\n        </h5>\r\n        \r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Subtotal Materiales</p>\r\n            <p className=\"font-medium\">${calculations?.subtotal?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Costo Instalaci贸n</p>\r\n            <p className=\"font-medium\">${calculations?.installationCost?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Costo Piezas</p>\r\n            <p className=\"font-medium\">${calculations?.partsCost?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Vi谩ticos</p>\r\n            <p className=\"font-medium\">${calculations?.travelCost?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Personal</p>\r\n            <p className=\"font-medium\">${calculations?.personnelCost?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground font-semibold\">Total General</p>\r\n            <p className=\"font-bold text-lg text-primary\">${calculations?.total?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Anticipo (30%)</p>\r\n            <p className=\"font-medium text-green-600\">${calculations?.advance?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Avance (70%)</p>\r\n            <p className=\"font-medium text-blue-600\">${calculations?.progress?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Payment Terms Information */}\r\n      <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={16} className=\"text-blue-600 mt-0.5\" />\r\n          <div className=\"text-sm text-blue-800\">\r\n            <p className=\"font-medium mb-1\">Estructura de Pagos Mexicana</p>\r\n            <p>30% anticipo, 70% contra avance de obra. Garant铆a incluye notas sobre fianzas. El documento engloba instalaci贸n, piezas, vi谩ticos y personal estimado con cumplimiento normativo mexicano.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Action Buttons */}\r\n      <div className=\"flex justify-end space-x-4\">\r\n        <Button\r\n          variant=\"outline\"\r\n          iconName=\"Save\"\r\n          iconPosition=\"left\"\r\n          disabled={isSaving}\r\n        >\r\n          Guardar Borrador\r\n        </Button>\r\n        <Button\r\n          onClick={onValidationSubmit}\r\n          disabled={isSaving}\r\n          iconName={isSaving ? \"Loader2\" : \"Send\"}\r\n          iconPosition=\"left\"\r\n        >\r\n          {isSaving ? 'Enviando...' : 'Enviar para Validaci贸n'}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationForm;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst QuotationPreview = ({ quotation, onVersionCreate }) => {\r\n  const currentDate = new Date()?.toLocaleDateString('es-MX', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  });\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold\">Vista Previa de Cotizaci贸n</h3>\r\n        <div className=\"flex space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Copy\"\r\n            iconPosition=\"left\"\r\n            onClick={onVersionCreate}\r\n          >\r\n            Crear Versi贸n\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Exportar PDF\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Professional Quotation Preview */}\r\n      <div className=\"bg-white border rounded-lg p-8 shadow-sm\">\r\n        {/* Header */}\r\n        <div className=\"border-b pb-6 mb-6\">\r\n          <div className=\"flex justify-between items-start\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">AireFlow Pro</h1>\r\n              <p className=\"text-sm text-gray-600 mt-1\">Soluciones HVAC Profesionales</p>\r\n              <div className=\"text-xs text-gray-500 mt-2 space-y-1\">\r\n                <p>RFC: AFP123456ABC</p>\r\n                <p>Av. Tecnol贸gico 123, Ciudad de M茅xico</p>\r\n                <p>Tel: (55) 1234-5678 | contacto@aireflowpro.com</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900\">COTIZACIN</h2>\r\n              <p className=\"text-sm font-medium mt-1\">{quotation?.id}</p>\r\n              <p className=\"text-xs text-gray-500\">Versi贸n {quotation?.version}</p>\r\n              <p className=\"text-xs text-gray-500 mt-2\">{currentDate}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Client Information */}\r\n        <div className=\"grid grid-cols-2 gap-8 mb-6\">\r\n          <div>\r\n            <h3 className=\"font-semibold text-gray-900 mb-2\">CLIENTE</h3>\r\n            <div className=\"text-sm space-y-1\">\r\n              <p className=\"font-medium\">{quotation?.client?.name}</p>\r\n              <p className=\"text-gray-600\">{quotation?.client?.contact}</p>\r\n              <p className=\"text-gray-600\">{quotation?.client?.address}</p>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h3 className=\"font-semibold text-gray-900 mb-2\">PROYECTO</h3>\r\n            <div className=\"text-sm space-y-1\">\r\n              <p className=\"font-medium\">{quotation?.projectName}</p>\r\n              <p className=\"text-gray-600\">ID: {quotation?.projectId}</p>\r\n              <p className=\"text-gray-600\">Garant铆a: {quotation?.calculations?.warranty}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Source Indicator */}\r\n        <div className={`p-3 rounded-lg mb-6 ${\r\n          quotation?.hasCatalog ? 'bg-green-50 border-green-200' : 'bg-yellow-50 border-yellow-200'\r\n        }`}>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon \r\n              name={quotation?.hasCatalog ? \"CheckCircle\" : \"Search\"} \r\n              size={16} \r\n              className={quotation?.hasCatalog ? \"text-green-600\" : \"text-yellow-600\"} \r\n            />\r\n            <p className={`text-sm font-medium ${\r\n              quotation?.hasCatalog ? \"text-green-800\" : \"text-yellow-800\"\r\n            }`}>\r\n              {quotation?.hasCatalog \r\n                ? \"Cotizaci贸n elaborada desde cat谩logo proporcionado por cliente\" \r\n                : \"Materiales identificados a partir de planos de obra\"\r\n              }\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Materials Table */}\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-3\">MATERIALES Y EQUIPOS</h3>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"text-left p-3 font-medium text-gray-900\">Descripci贸n</th>\r\n                  <th className=\"text-center p-3 font-medium text-gray-900\">Cantidad</th>\r\n                  <th className=\"text-right p-3 font-medium text-gray-900\">Precio Unitario</th>\r\n                  <th className=\"text-right p-3 font-medium text-gray-900\">Total</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200\">\r\n                {quotation?.materials?.map((material, index) => (\r\n                  <tr key={index} className=\"hover:bg-gray-50\">\r\n                    <td className=\"p-3\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <span>{material?.name}</span>\r\n                        {material?.source === 'catalog' && (\r\n                          <Icon name=\"Book\" size={12} className=\"text-green-600\" title=\"Desde cat谩logo\" />\r\n                        )}\r\n                        {material?.source === 'plan_analysis' && (\r\n                          <Icon name=\"FileText\" size={12} className=\"text-blue-600\" title=\"Desde planos\" />\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"p-3 text-center\">{material?.quantity}</td>\r\n                    <td className=\"p-3 text-right\">${material?.unitPrice?.toLocaleString('es-MX')}</td>\r\n                    <td className=\"p-3 text-right font-medium\">${material?.total?.toLocaleString('es-MX')}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n              <tfoot className=\"bg-gray-50\">\r\n                <tr>\r\n                  <td colSpan=\"3\" className=\"p-3 text-right font-medium text-gray-900\">Subtotal Materiales:</td>\r\n                  <td className=\"p-3 text-right font-bold\">${quotation?.calculations?.subtotal?.toLocaleString('es-MX')}</td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cost Breakdown */}\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-3\">DESGLOSE DE COSTOS</h3>\r\n          <div className=\"bg-gray-50 rounded-lg p-4\">\r\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between\">\r\n                  <span>Instalaci贸n ({quotation?.calculations?.installationPercentage}%)</span>\r\n                  <span>${quotation?.calculations?.installationCost?.toLocaleString('es-MX')}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span>Piezas ({quotation?.calculations?.parts}%)</span>\r\n                  <span>${quotation?.calculations?.partsCost?.toLocaleString('es-MX')}</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between\">\r\n                  <span>Vi谩ticos ({quotation?.calculations?.travel}%)</span>\r\n                  <span>${quotation?.calculations?.travelCost?.toLocaleString('es-MX')}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span>Personal ({quotation?.calculations?.personnel}%)</span>\r\n                  <span>${quotation?.calculations?.personnelCost?.toLocaleString('es-MX')}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Payment Terms */}\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-3\">CONDICIONES DE PAGO</h3>\r\n          <div className=\"bg-blue-50 rounded-lg p-4\">\r\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n              <div>\r\n                <p className=\"font-medium text-blue-900\">Anticipo (30%)</p>\r\n                <p className=\"text-2xl font-bold text-blue-700\">${quotation?.calculations?.advance?.toLocaleString('es-MX')}</p>\r\n                <p className=\"text-xs text-blue-600 mt-1\">Requerido para inicio de obra</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"font-medium text-blue-900\">Contra Avance (70%)</p>\r\n                <p className=\"text-2xl font-bold text-blue-700\">${quotation?.calculations?.progress?.toLocaleString('es-MX')}</p>\r\n                <p className=\"text-xs text-blue-600 mt-1\">Pagos contra avance de obra</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Total */}\r\n        <div className=\"border-t pt-4\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <p className=\"text-sm text-gray-600\">Total del Proyecto</p>\r\n              <p className=\"text-xs text-gray-500\">Incluye materiales, instalaci贸n y garant铆a</p>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <p className=\"text-3xl font-bold text-primary\">${quotation?.calculations?.total?.toLocaleString('es-MX')}</p>\r\n              <p className=\"text-xs text-gray-500\">MXN (Pesos Mexicanos)</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Terms and Conditions */}\r\n        <div className=\"mt-8 pt-6 border-t\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-3\">TRMINOS Y CONDICIONES</h3>\r\n          <div className=\"text-xs text-gray-600 space-y-2\">\r\n            <p> Garant铆a de {quotation?.calculations?.warranty} sobre equipos y mano de obra</p>\r\n            <p> Los precios incluyen IVA y est谩n sujetos a variaci贸n sin previo aviso</p>\r\n            <p> Tiempo de entrega: Sujeto a disponibilidad de materiales</p>\r\n            <p> Cumplimiento con normativas mexicanas NOM-001-SEDE y NOM-008-ENER</p>\r\n            <p> P贸liza de responsabilidad civil incluida durante la instalaci贸n</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"mt-8 pt-6 border-t text-center\">\r\n          <p className=\"text-xs text-gray-500\">\r\n            Esta cotizaci贸n tiene vigencia de 30 d铆as a partir de la fecha de emisi贸n\r\n          </p>\r\n          <p className=\"text-xs text-gray-500 mt-2\">\r\n            AireFlow Pro - Registro ante SEMARNAT: {quotation?.id?.split('-')?.[2]}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      {/* Notes */}\r\n      {quotation?.notes && (\r\n        <div className=\"p-4 bg-amber-50 rounded-lg\">\r\n          <h4 className=\"font-medium mb-2 flex items-center space-x-2\">\r\n            <Icon name=\"StickyNote\" size={16} className=\"text-amber-600\" />\r\n            <span>Notas Internas</span>\r\n          </h4>\r\n          <p className=\"text-sm text-amber-800\">{quotation?.notes}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationPreview;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst MaterialIdentification = ({ quotation, onMaterialUpdate }) => {\r\n  const [materials, setMaterials] = useState(quotation?.materials || []);\r\n  const [newMaterial, setNewMaterial] = useState({\r\n    name: '',\r\n    quantity: 1,\r\n    unitPrice: 0,\r\n    source: quotation?.hasCatalog ? 'catalog' : 'plan_analysis'\r\n  });\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n\r\n  const handleAddMaterial = () => {\r\n    if (!newMaterial?.name || !newMaterial?.quantity || !newMaterial?.unitPrice) return;\r\n\r\n    const material = {\r\n      id: Date.now(),\r\n      ...newMaterial,\r\n      total: newMaterial?.quantity * newMaterial?.unitPrice,\r\n      identified: true\r\n    };\r\n\r\n    const updatedMaterials = [...materials, material];\r\n    setMaterials(updatedMaterials);\r\n    onMaterialUpdate?.(updatedMaterials);\r\n\r\n    setNewMaterial({\r\n      name: '',\r\n      quantity: 1,\r\n      unitPrice: 0,\r\n      source: quotation?.hasCatalog ? 'catalog' : 'plan_analysis'\r\n    });\r\n  };\r\n\r\n  const handleMaterialChange = (id, field, value) => {\r\n    const updatedMaterials = materials?.map(material => {\r\n      if (material?.id === id) {\r\n        const updatedMaterial = { ...material, [field]: value };\r\n        if (field === 'quantity' || field === 'unitPrice') {\r\n          updatedMaterial.total = updatedMaterial?.quantity * updatedMaterial?.unitPrice;\r\n        }\r\n        return updatedMaterial;\r\n      }\r\n      return material;\r\n    });\r\n\r\n    setMaterials(updatedMaterials);\r\n    onMaterialUpdate?.(updatedMaterials);\r\n  };\r\n\r\n  const handleRemoveMaterial = (id) => {\r\n    const updatedMaterials = materials?.filter(material => material?.id !== id);\r\n    setMaterials(updatedMaterials);\r\n    onMaterialUpdate?.(updatedMaterials);\r\n  };\r\n\r\n  const handleAutoIdentify = async () => {\r\n    setIsAnalyzing(true);\r\n    await new Promise(resolve => setTimeout(resolve, 3000));\r\n\r\n    // Simulate automatic material identification\r\n    const autoMaterials = [\r\n      {\r\n        id: Date.now() + 1,\r\n        name: \"Diffusor Lineal 600mm\",\r\n        quantity: 12,\r\n        unitPrice: 850,\r\n        total: 10200,\r\n        source: \"plan_analysis\",\r\n        identified: true,\r\n        confidence: 95\r\n      },\r\n      {\r\n        id: Date.now() + 2,\r\n        name: \"Tuber铆a Cobre 1/2\\\"\",\r\n        quantity: 25,\r\n        unitPrice: 320,\r\n        total: 8000,\r\n        source: \"plan_analysis\",\r\n        identified: true,\r\n        confidence: 88\r\n      }\r\n    ];\r\n\r\n    const updatedMaterials = [...materials, ...autoMaterials];\r\n    setMaterials(updatedMaterials);\r\n    onMaterialUpdate?.(updatedMaterials);\r\n    setIsAnalyzing(false);\r\n  };\r\n\r\n  const getTotalValue = () => {\r\n    return materials?.reduce((sum, material) => sum + (material?.total || 0), 0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold\">Identificaci贸n de Materiales</h3>\r\n        <div className=\"flex space-x-2\">\r\n          {!quotation?.hasCatalog && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName={isAnalyzing ? \"Loader2\" : \"Search\"}\r\n              iconPosition=\"left\"\r\n              onClick={handleAutoIdentify}\r\n              disabled={isAnalyzing}\r\n            >\r\n              {isAnalyzing ? 'Analizando...' : 'Auto-Identificar'}\r\n            </Button>\r\n          )}\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Upload\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Importar desde Inventario\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Source Method */}\r\n      <div className={`p-4 rounded-lg ${\r\n        quotation?.hasCatalog ? 'bg-green-50 border-green-200' : 'bg-yellow-50 border-yellow-200'\r\n      }`}>\r\n        <div className=\"flex items-center space-x-2 mb-2\">\r\n          <Icon \r\n            name={quotation?.hasCatalog ? \"Book\" : \"FileText\"} \r\n            size={16} \r\n            className={quotation?.hasCatalog ? \"text-green-600\" : \"text-yellow-600\"} \r\n          />\r\n          <h4 className={`font-medium ${\r\n            quotation?.hasCatalog ? \"text-green-800\" : \"text-yellow-800\"\r\n          }`}>\r\n            {quotation?.hasCatalog ? \"Identificaci贸n desde Cat谩logo\" : \"Identificaci贸n desde Planos\"}\r\n          </h4>\r\n        </div>\r\n        <p className={`text-sm ${\r\n          quotation?.hasCatalog ? \"text-green-700\" : \"text-yellow-700\"\r\n        }`}>\r\n          {quotation?.hasCatalog \r\n            ? \"Materiales identificados autom谩ticamente desde el cat谩logo proporcionado por el cliente\"\r\n            : \"Materiales identificados mediante an谩lisis de planos de obra y especificaciones t茅cnicas\"\r\n          }\r\n        </p>\r\n      </div>\r\n      {/* Add New Material */}\r\n      <div className=\"bg-gray-50 rounded-lg p-4\">\r\n        <h4 className=\"font-medium mb-3\">Agregar Nuevo Material</h4>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-1 block\">Descripci贸n</label>\r\n            <Input\r\n              value={newMaterial?.name}\r\n              onChange={(e) => setNewMaterial(prev => ({ ...prev, name: e?.target?.value }))}\r\n              placeholder=\"Nombre del material...\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-1 block\">Cantidad</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={newMaterial?.quantity}\r\n              onChange={(e) => setNewMaterial(prev => ({ ...prev, quantity: parseInt(e?.target?.value) || 1 }))}\r\n              min=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-1 block\">Precio Unitario</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={newMaterial?.unitPrice}\r\n              onChange={(e) => setNewMaterial(prev => ({ ...prev, unitPrice: parseFloat(e?.target?.value) || 0 }))}\r\n              min=\"0\"\r\n              step=\"0.01\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div className=\"flex items-end\">\r\n            <Button\r\n              onClick={handleAddMaterial}\r\n              iconName=\"Plus\"\r\n              iconPosition=\"left\"\r\n              size=\"sm\"\r\n              className=\"w-full\"\r\n              disabled={!newMaterial?.name || !newMaterial?.quantity || !newMaterial?.unitPrice}\r\n            >\r\n              Agregar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Materials Table */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"font-medium\">Lista de Materiales Identificados</h4>\r\n        \r\n        {materials?.length > 0 ? (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-sm border rounded-lg\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"text-left p-3 font-medium\">Material</th>\r\n                  <th className=\"text-center p-3 font-medium\">Fuente</th>\r\n                  <th className=\"text-center p-3 font-medium\">Cantidad</th>\r\n                  <th className=\"text-right p-3 font-medium\">Precio Unit.</th>\r\n                  <th className=\"text-right p-3 font-medium\">Total</th>\r\n                  <th className=\"text-center p-3 font-medium\">Acciones</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200\">\r\n                {materials?.map((material) => (\r\n                  <tr key={material?.id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"p-3\">\r\n                      <Input\r\n                        value={material?.name}\r\n                        onChange={(e) => handleMaterialChange(material?.id, 'name', e?.target?.value)}\r\n                        className=\"text-sm border-none bg-transparent\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"p-3 text-center\">\r\n                      <div className=\"flex items-center justify-center space-x-1\">\r\n                        <Icon \r\n                          name={material?.source === 'catalog' ? 'Book' : 'FileText'} \r\n                          size={14} \r\n                          className={material?.source === 'catalog' ? 'text-green-600' : 'text-blue-600'} \r\n                        />\r\n                        <span className=\"text-xs\">\r\n                          {material?.source === 'catalog' ? 'Cat谩logo' : 'Planos'}\r\n                        </span>\r\n                        {material?.confidence && (\r\n                          <span className=\"text-xs text-gray-500\">({material?.confidence}%)</span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"p-3\">\r\n                      <Input\r\n                        type=\"number\"\r\n                        value={material?.quantity}\r\n                        onChange={(e) => handleMaterialChange(material?.id, 'quantity', parseInt(e?.target?.value) || 1)}\r\n                        className=\"text-sm text-center w-20 mx-auto\"\r\n                        min=\"1\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"p-3\">\r\n                      <Input\r\n                        type=\"number\"\r\n                        value={material?.unitPrice}\r\n                        onChange={(e) => handleMaterialChange(material?.id, 'unitPrice', parseFloat(e?.target?.value) || 0)}\r\n                        className=\"text-sm text-right w-24 ml-auto\"\r\n                        min=\"0\"\r\n                        step=\"0.01\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"p-3 text-right font-medium\">\r\n                      ${material?.total?.toLocaleString('es-MX')}\r\n                    </td>\r\n                    <td className=\"p-3 text-center\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        iconName=\"Trash2\"\r\n                        onClick={() => handleRemoveMaterial(material?.id)}\r\n                        className=\"text-red-600 hover:text-red-800\"\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n              <tfoot className=\"bg-gray-50\">\r\n                <tr>\r\n                  <td colSpan=\"4\" className=\"p-3 text-right font-medium\">Total de Materiales:</td>\r\n                  <td className=\"p-3 text-right font-bold text-lg\">\r\n                    ${getTotalValue()?.toLocaleString('es-MX')}\r\n                  </td>\r\n                  <td className=\"p-3\"></td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\r\n            <Icon name=\"Package\" size={48} className=\"text-gray-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No hay materiales identificados</h3>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              {quotation?.hasCatalog \r\n                ? \"Agregue materiales desde el cat谩logo del cliente\" :\"Use la identificaci贸n autom谩tica o agregue materiales manualmente\"\r\n              }\r\n            </p>\r\n            {!quotation?.hasCatalog && (\r\n              <Button\r\n                onClick={handleAutoIdentify}\r\n                disabled={isAnalyzing}\r\n                iconName={isAnalyzing ? \"Loader2\" : \"Search\"}\r\n                iconPosition=\"left\"\r\n              >\r\n                {isAnalyzing ? 'Analizando planos...' : 'Iniciar Identificaci贸n Autom谩tica'}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Integration with Inventory */}\r\n      <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Link\" size={16} className=\"text-blue-600 mt-0.5\" />\r\n          <div className=\"text-sm text-blue-800\">\r\n            <p className=\"font-medium mb-1\">Integraci贸n con Sistema de Inventario</p>\r\n            <p>Los materiales identificados se pueden sincronizar autom谩ticamente con el inventario para verificar disponibilidad y actualizar precios en tiempo real.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaterialIdentification;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst CommunicationPanel = ({ quotation, onSend, isSending }) => {\r\n  const [communicationMethod, setCommunicationMethod] = useState('email');\r\n  const [message, setMessage] = useState('');\r\n  const [adjustmentNotes, setAdjustmentNotes] = useState('');\r\n  const [showAdjustments, setShowAdjustments] = useState(false);\r\n\r\n  const handleSend = () => {\r\n    onSend?.(communicationMethod, message);\r\n  };\r\n\r\n  const generateDefaultMessage = () => {\r\n    const defaultMessages = {\r\n      email: `Estimado ${quotation?.client?.name},\r\n\r\nAdjunto encontrar谩 la cotizaci贸n ${quotation?.id} para el proyecto \"${quotation?.projectName}\".\r\n\r\nResumen:\r\n- Total del proyecto: $${quotation?.calculations?.total?.toLocaleString('es-MX')} MXN\r\n- Anticipo requerido (30%): $${quotation?.calculations?.advance?.toLocaleString('es-MX')} MXN\r\n- Garant铆a: ${quotation?.calculations?.warranty}\r\n\r\nEsta cotizaci贸n tiene vigencia de 30 d铆as. Quedamos a sus 贸rdenes para cualquier aclaraci贸n.\r\n\r\nSaludos cordiales,\r\nEquipo AireFlow Pro`,\r\n      \r\n      whatsapp: `Hola ${quotation?.client?.name} \r\n\r\nLe enviamos la cotizaci贸n ${quotation?.id} para \"${quotation?.projectName}\":\r\n\r\n Total: $${quotation?.calculations?.total?.toLocaleString('es-MX')} MXN\r\n Anticipo: $${quotation?.calculations?.advance?.toLocaleString('es-MX')} (30%)\r\n★ Garant铆a: ${quotation?.calculations?.warranty}\r\n\r\nVigencia: 30 d铆as\r\n驴Tiene alguna pregunta? `\r\n    };\r\n\r\n    setMessage(defaultMessages?.[communicationMethod] || '');\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold\">Comunicaci贸n con Cliente</h3>\r\n        {quotation?.communication?.sentAt && (\r\n          <div className=\"text-sm text-green-600 flex items-center space-x-1\">\r\n            <Icon name=\"CheckCircle\" size={16} />\r\n            <span>Enviado {new Date(quotation?.communication?.sentAt)?.toLocaleDateString('es-MX')}</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Previous Communications */}\r\n      {quotation?.communication?.adjustments > 0 && (\r\n        <div className=\"p-4 bg-amber-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name=\"RotateCcw\" size={16} className=\"text-amber-600\" />\r\n            <h4 className=\"font-medium text-amber-800\">Historial de Ajustes</h4>\r\n          </div>\r\n          <p className=\"text-sm text-amber-700\">\r\n            Esta cotizaci贸n ha tenido {quotation?.communication?.adjustments} ajuste(s) basados en comentarios del cliente.\r\n          </p>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Eye\"\r\n            iconPosition=\"left\"\r\n            className=\"mt-2\"\r\n            onClick={() => setShowAdjustments(!showAdjustments)}\r\n          >\r\n            {showAdjustments ? 'Ocultar' : 'Ver'} Historial\r\n          </Button>\r\n        </div>\r\n      )}\r\n      {/* Communication Method Selection */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"font-medium\">M茅todo de Env铆o</h4>\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <div\r\n            onClick={() => setCommunicationMethod('email')}\r\n            className={`p-4 rounded-lg border-2 cursor-pointer transition-all ${\r\n              communicationMethod === 'email' ?'border-primary bg-primary/10' :'border-gray-200 hover:border-gray-300'\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Icon name=\"Mail\" size={20} className={communicationMethod === 'email' ? 'text-primary' : 'text-gray-600'} />\r\n              <div>\r\n                <h5 className=\"font-medium\">Correo Electr贸nico</h5>\r\n                <p className=\"text-sm text-gray-600\">Env铆o formal con PDF adjunto</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            onClick={() => setCommunicationMethod('whatsapp')}\r\n            className={`p-4 rounded-lg border-2 cursor-pointer transition-all ${\r\n              communicationMethod === 'whatsapp' ?'border-primary bg-primary/10' :'border-gray-200 hover:border-gray-300'\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Icon name=\"MessageCircle\" size={20} className={communicationMethod === 'whatsapp' ? 'text-primary' : 'text-gray-600'} />\r\n              <div>\r\n                <h5 className=\"font-medium\">WhatsApp</h5>\r\n                <p className=\"text-sm text-gray-600\">Comunicaci贸n r谩pida e informal</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Message Composition */}\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h4 className=\"font-medium\">Mensaje de Acompa帽amiento</h4>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"FileText\"\r\n            iconPosition=\"left\"\r\n            onClick={generateDefaultMessage}\r\n          >\r\n            Generar Mensaje\r\n          </Button>\r\n        </div>\r\n\r\n        <textarea\r\n          value={message}\r\n          onChange={(e) => setMessage(e?.target?.value)}\r\n          placeholder={`Escriba su mensaje ${communicationMethod === 'email' ? 'de correo' : 'de WhatsApp'}...`}\r\n          className=\"w-full p-3 border rounded-lg resize-none\"\r\n          rows={communicationMethod === 'email' ? 8 : 6}\r\n        />\r\n\r\n        <div className=\"text-xs text-gray-500\">\r\n          {communicationMethod === 'email' \r\n            ? \"Se adjuntar谩 autom谩ticamente el PDF de la cotizaci贸n\" :\"Se incluir谩 un enlace para descargar la cotizaci贸n\"\r\n          }\r\n        </div>\r\n      </div>\r\n      {/* Client Contact Information */}\r\n      <div className=\"p-4 bg-gray-50 rounded-lg\">\r\n        <h4 className=\"font-medium mb-2\">Informaci贸n de Contacto</h4>\r\n        <div className=\"text-sm space-y-1\">\r\n          <p><span className=\"font-medium\">Cliente:</span> {quotation?.client?.name}</p>\r\n          <p><span className=\"font-medium\">Contacto:</span> {quotation?.client?.contact}</p>\r\n          <p><span className=\"font-medium\">Proyecto:</span> {quotation?.projectName}</p>\r\n        </div>\r\n      </div>\r\n      {/* Quotation Summary */}\r\n      <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n        <h4 className=\"font-medium mb-2 text-blue-900\">Resumen de Cotizaci贸n</h4>\r\n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n          <div>\r\n            <p className=\"text-blue-700\">Total del Proyecto</p>\r\n            <p className=\"font-bold text-lg text-blue-900\">${quotation?.calculations?.total?.toLocaleString('es-MX')}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-blue-700\">Anticipo Requerido</p>\r\n            <p className=\"font-bold text-lg text-blue-900\">${quotation?.calculations?.advance?.toLocaleString('es-MX')}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-2 text-xs text-blue-600\">\r\n          Garant铆a: {quotation?.calculations?.warranty} | Vigencia: 30 d铆as\r\n        </div>\r\n      </div>\r\n      {/* Adjustment Notes (if needed) */}\r\n      {quotation?.communication?.adjustments > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium\">Notas sobre Ajustes Realizados</label>\r\n          <textarea\r\n            value={adjustmentNotes}\r\n            onChange={(e) => setAdjustmentNotes(e?.target?.value)}\r\n            placeholder=\"Describa los cambios realizados basados en comentarios del cliente...\"\r\n            className=\"w-full p-3 border rounded-lg resize-none\"\r\n            rows={3}\r\n          />\r\n        </div>\r\n      )}\r\n      {/* Send Actions */}\r\n      <div className=\"flex justify-end space-x-4\">\r\n        <Button\r\n          variant=\"outline\"\r\n          iconName=\"Save\"\r\n          iconPosition=\"left\"\r\n        >\r\n          Guardar Borrador\r\n        </Button>\r\n        <Button\r\n          onClick={handleSend}\r\n          disabled={isSending || !message?.trim()}\r\n          iconName={isSending ? \"Loader2\" : communicationMethod === 'email' ? \"Mail\" : \"MessageCircle\"}\r\n          iconPosition=\"left\"\r\n        >\r\n          {isSending \r\n            ? 'Enviando...' \r\n            : `Enviar por ${communicationMethod === 'email' ? 'Correo' : 'WhatsApp'}`\r\n          }\r\n        </Button>\r\n      </div>\r\n      {/* Process Information */}\r\n      <div className=\"p-4 bg-green-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={16} className=\"text-green-600 mt-0.5\" />\r\n          <div className=\"text-sm text-green-800\">\r\n            <p className=\"font-medium mb-1\">Siguiente Paso del Proceso</p>\r\n            <p>Una vez enviada la propuesta, se activar谩 el seguimiento autom谩tico. Si el cliente requiere ajustes, estos se pueden gestionar desde el panel de comunicaci贸n.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommunicationPanel;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst VersionControl = ({ quotation, onVersionSelect }) => {\r\n  // Mock version history\r\n  const versionHistory = [\r\n    {\r\n      version: 3,\r\n      createdAt: '2024-03-25T16:30:00Z',\r\n      createdBy: 'Ana Rodr铆guez',\r\n      changes: 'Ajuste en precios de materiales seg煤n comentarios del cliente',\r\n      status: 'current',\r\n      total: quotation?.calculations?.total\r\n    },\r\n    {\r\n      version: 2,\r\n      createdAt: '2024-03-24T10:15:00Z',\r\n      createdBy: 'Carlos Mart铆nez',\r\n      changes: 'Reducci贸n en porcentaje de vi谩ticos de 12% a 8%',\r\n      status: 'superseded',\r\n      total: (quotation?.calculations?.total || 0) + 15000\r\n    },\r\n    {\r\n      version: 1,\r\n      createdAt: '2024-03-20T14:45:00Z',\r\n      createdBy: 'Sistema',\r\n      changes: 'Versi贸n inicial generada autom谩ticamente',\r\n      status: 'superseded',\r\n      total: (quotation?.calculations?.total || 0) + 25000\r\n    }\r\n  ];\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'current': return 'bg-green-100 text-green-800';\r\n      case 'superseded': return 'bg-gray-100 text-gray-800';\r\n      default: return 'bg-blue-100 text-blue-800';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'current': return 'Actual';\r\n      case 'superseded': return 'Anterior';\r\n      default: return 'Borrador';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg shadow-sm border p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold\">Control de Versiones</h3>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          iconName=\"GitBranch\"\r\n          iconPosition=\"left\"\r\n        >\r\n          Nueva Versi贸n\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {versionHistory?.map((version) => (\r\n          <div\r\n            key={version?.version}\r\n            className={`p-4 rounded-lg border transition-all cursor-pointer hover:shadow-md ${\r\n              version?.status === 'current' ? 'border-primary bg-primary/5' : 'border-gray-200'\r\n            }`}\r\n            onClick={() => onVersionSelect?.(version)}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className={`text-xs px-2 py-1 rounded-full font-medium ${getStatusColor(version?.status)}`}>\r\n                  v{version?.version}\r\n                </div>\r\n                <span className={`text-xs px-2 py-1 rounded-full ${\r\n                  version?.status === 'current' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'\r\n                }`}>\r\n                  {getStatusLabel(version?.status)}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-sm font-medium\">${version?.total?.toLocaleString('es-MX')}</p>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  {new Date(version?.createdAt)?.toLocaleDateString('es-MX')}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-2\">\r\n              <p className=\"text-sm text-gray-900\">{version?.changes}</p>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Icon name=\"User\" size={14} className=\"text-gray-400\" />\r\n                <span className=\"text-xs text-gray-600\">{version?.createdBy}</span>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Icon name=\"Clock\" size={14} className=\"text-gray-400\" />\r\n                <span className=\"text-xs text-gray-600\">\r\n                  {new Date(version?.createdAt)?.toLocaleTimeString('es-MX', { \r\n                    hour: '2-digit', \r\n                    minute: '2-digit' \r\n                  })}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {version?.status === 'current' && (\r\n              <div className=\"mt-3 pt-3 border-t border-primary/20\">\r\n                <div className=\"flex items-center space-x-4 text-xs\">\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Icon name=\"CheckCircle\" size={12} className=\"text-green-600\" />\r\n                    <span className=\"text-green-600\">Versi贸n activa</span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Icon name=\"Download\" size={12} className=\"text-blue-600\" />\r\n                    <span className=\"text-blue-600\">PDF disponible</span>\r\n                  </div>\r\n                  {quotation?.communication?.sentAt && (\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <Icon name=\"Send\" size={12} className=\"text-purple-600\" />\r\n                      <span className=\"text-purple-600\">Enviada al cliente</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Version Control Info */}\r\n      <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={16} className=\"text-blue-600 mt-0.5\" />\r\n          <div className=\"text-sm text-blue-800\">\r\n            <p className=\"font-medium mb-1\">Control de Versiones Colaborativo</p>\r\n            <p>El sistema mantiene un historial completo de cambios para facilitar la colaboraci贸n en tiempo real y el seguimiento de ajustes basados en feedback del cliente.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VersionControl;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport QuotationForm from './components/QuotationForm';\r\nimport QuotationPreview from './components/QuotationPreview';\r\nimport MaterialIdentification from './components/MaterialIdentification';\r\nimport CommunicationPanel from './components/CommunicationPanel';\r\nimport VersionControl from './components/VersionControl';\r\n\r\nconst QuotationBuilder = () => {\r\n  const [currentQuotation, setCurrentQuotation] = useState(null);\r\n  const [quotations, setQuotations] = useState([]);\r\n  const [activeStep, setActiveStep] = useState('form');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  // Mock data for quotations\r\n  const mockQuotations = [\r\n    {\r\n      id: \"QUO-2024-001\",\r\n      projectId: \"PROJ-WF-001\",\r\n      projectName: \"Instalaci贸n HVAC Torre Corporativa\",\r\n      client: {\r\n        name: \"ABC Corporation\",\r\n        contact: \"contacto@abccorp.com\",\r\n        address: \"Av. Reforma 123, Ciudad de M茅xico\"\r\n      },\r\n      status: \"draft\",\r\n      statusLabel: \"Borrador\",\r\n      createdAt: \"2024-03-20T10:00:00Z\",\r\n      updatedAt: \"2024-03-25T14:30:00Z\",\r\n      version: 1,\r\n      hasCatalog: true,\r\n      materials: [\r\n        { \r\n          id: 1, \r\n          name: \"Unidad Manejadora de Aire 10 TR\", \r\n          quantity: 2, \r\n          unitPrice: 45000, \r\n          total: 90000,\r\n          identified: true,\r\n          source: \"catalog\"\r\n        },\r\n        { \r\n          id: 2, \r\n          name: \"Ductos Galvanizados 24x18\", \r\n          quantity: 50, \r\n          unitPrice: 850, \r\n          total: 42500,\r\n          identified: true,\r\n          source: \"catalog\"\r\n        },\r\n        { \r\n          id: 3, \r\n          name: \"Rejillas de Retorno 24x24\", \r\n          quantity: 8, \r\n          unitPrice: 1200, \r\n          total: 9600,\r\n          identified: true,\r\n          source: \"plan_analysis\"\r\n        }\r\n      ],\r\n      calculations: {\r\n        installationPercentage: 25,\r\n        parts: 15,\r\n        travel: 8,\r\n        personnel: 12,\r\n        subtotal: 142100,\r\n        installationCost: 35525,\r\n        partsCost: 21315,\r\n        travelCost: 11368,\r\n        personnelCost: 17052,\r\n        total: 227360,\r\n        advance: 68208, // 30%\r\n        progress: 159152, // 70%\r\n        warranty: \"12 meses\"\r\n      },\r\n      communication: {\r\n        method: \"email\",\r\n        sentAt: null,\r\n        adjustments: 0\r\n      },\r\n      notes: \"Cotizaci贸n basada en cat谩logo proporcionado por cliente\"\r\n    },\r\n    {\r\n      id: \"QUO-2024-002\",\r\n      projectId: \"PROJ-WF-003\",\r\n      projectName: \"Actualizaci贸n Sistema Residencial\",\r\n      client: {\r\n        name: \"Green Energy M茅xico\",\r\n        contact: \"info@greenenergy.mx\",\r\n        address: \"Calle Innovaci贸n 456, Monterrey\"\r\n      },\r\n      status: \"pending_validation\",\r\n      statusLabel: \"Pendiente Validaci贸n\",\r\n      createdAt: \"2024-03-18T09:00:00Z\",\r\n      updatedAt: \"2024-03-24T16:45:00Z\",\r\n      version: 2,\r\n      hasCatalog: false,\r\n      materials: [\r\n        { \r\n          id: 1, \r\n          name: \"Bomba de Calor Residencial 3 TR\", \r\n          quantity: 1, \r\n          unitPrice: 28000, \r\n          total: 28000,\r\n          identified: true,\r\n          source: \"plan_analysis\"\r\n        },\r\n        { \r\n          id: 2, \r\n          name: \"Termostato Programable WiFi\", \r\n          quantity: 3, \r\n          unitPrice: 2500, \r\n          total: 7500,\r\n          identified: true,\r\n          source: \"plan_analysis\"\r\n        }\r\n      ],\r\n      calculations: {\r\n        installationPercentage: 20,\r\n        parts: 18,\r\n        travel: 12,\r\n        personnel: 15,\r\n        subtotal: 35500,\r\n        installationCost: 7100,\r\n        partsCost: 6390,\r\n        travelCost: 4260,\r\n        personnelCost: 5325,\r\n        total: 58575,\r\n        advance: 17572, // 30%\r\n        progress: 41003, // 70%\r\n        warranty: \"18 meses\"\r\n      },\r\n      communication: {\r\n        method: \"whatsapp\",\r\n        sentAt: null,\r\n        adjustments: 1\r\n      },\r\n      notes: \"Materiales identificados desde planos de obra. Requiere validaci贸n.\"\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadQuotations = async () => {\r\n      setIsLoading(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      setQuotations(mockQuotations);\r\n      setCurrentQuotation(mockQuotations?.[0]);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    loadQuotations();\r\n  }, []);\r\n\r\n  const handleQuotationUpdate = (updatedData) => {\r\n    setCurrentQuotation(prev => ({\r\n      ...prev,\r\n      ...updatedData,\r\n      updatedAt: new Date()?.toISOString()\r\n    }));\r\n  };\r\n\r\n  const handleMaterialUpdate = (materials) => {\r\n    const subtotal = materials?.reduce((sum, item) => sum + (item?.total || 0), 0);\r\n    \r\n    const calculations = {\r\n      ...currentQuotation?.calculations,\r\n      subtotal,\r\n      installationCost: (currentQuotation?.calculations?.installationPercentage / 100) * subtotal,\r\n      partsCost: (currentQuotation?.calculations?.parts / 100) * subtotal,\r\n      travelCost: (currentQuotation?.calculations?.travel / 100) * subtotal,\r\n      personnelCost: (currentQuotation?.calculations?.personnel / 100) * subtotal\r\n    };\r\n    \r\n    calculations.total = calculations?.installationCost + calculations?.partsCost + calculations?.travelCost + calculations?.personnelCost + subtotal;\r\n    calculations.advance = (30 / 100) * calculations?.total;\r\n    calculations.progress = (70 / 100) * calculations?.total;\r\n\r\n    setCurrentQuotation(prev => ({\r\n      ...prev,\r\n      materials,\r\n      calculations,\r\n      updatedAt: new Date()?.toISOString()\r\n    }));\r\n  };\r\n\r\n  const handleCalculationUpdate = (calculations) => {\r\n    const updatedCalculations = {\r\n      ...calculations,\r\n      installationCost: (calculations?.installationPercentage / 100) * currentQuotation?.calculations?.subtotal,\r\n      partsCost: (calculations?.parts / 100) * currentQuotation?.calculations?.subtotal,\r\n      travelCost: (calculations?.travel / 100) * currentQuotation?.calculations?.subtotal,\r\n      personnelCost: (calculations?.personnel / 100) * currentQuotation?.calculations?.subtotal\r\n    };\r\n\r\n    updatedCalculations.total = updatedCalculations?.installationCost + updatedCalculations?.partsCost + \r\n                               updatedCalculations?.travelCost + updatedCalculations?.personnelCost + \r\n                               currentQuotation?.calculations?.subtotal;\r\n    updatedCalculations.advance = (30 / 100) * updatedCalculations?.total;\r\n    updatedCalculations.progress = (70 / 100) * updatedCalculations?.total;\r\n\r\n    setCurrentQuotation(prev => ({\r\n      ...prev,\r\n      calculations: updatedCalculations,\r\n      updatedAt: new Date()?.toISOString()\r\n    }));\r\n  };\r\n\r\n  const handleSaveQuotation = async () => {\r\n    setIsSaving(true);\r\n    await new Promise(resolve => setTimeout(resolve, 1500));\r\n    \r\n    setQuotations(prev => prev?.map(q => \r\n      q?.id === currentQuotation?.id ? currentQuotation : q\r\n    ));\r\n    \r\n    setIsSaving(false);\r\n  };\r\n\r\n  const handleValidationSubmit = async () => {\r\n    setIsSaving(true);\r\n    await new Promise(resolve => setTimeout(resolve, 2000));\r\n    \r\n    const updatedQuotation = {\r\n      ...currentQuotation,\r\n      status: \"pending_validation\",\r\n      statusLabel: \"Pendiente Validaci贸n\",\r\n      validation: {\r\n        submittedAt: new Date()?.toISOString(),\r\n        reviewer: \"Ventas/Mart铆n\"\r\n      }\r\n    };\r\n\r\n    setCurrentQuotation(updatedQuotation);\r\n    setQuotations(prev => prev?.map(q => \r\n      q?.id === currentQuotation?.id ? updatedQuotation : q\r\n    ));\r\n    \r\n    setIsSaving(false);\r\n  };\r\n\r\n  const handleCommunicationSend = async (method, message) => {\r\n    setIsSaving(true);\r\n    await new Promise(resolve => setTimeout(resolve, 1500));\r\n    \r\n    const updatedQuotation = {\r\n      ...currentQuotation,\r\n      communication: {\r\n        method,\r\n        sentAt: new Date()?.toISOString(),\r\n        message,\r\n        adjustments: currentQuotation?.communication?.adjustments || 0\r\n      },\r\n      status: \"sent\",\r\n      statusLabel: \"Enviada\"\r\n    };\r\n\r\n    setCurrentQuotation(updatedQuotation);\r\n    setQuotations(prev => prev?.map(q => \r\n      q?.id === currentQuotation?.id ? updatedQuotation : q\r\n    ));\r\n    \r\n    setIsSaving(false);\r\n  };\r\n\r\n  const steps = [\r\n    { id: 'form', label: 'Formulario', icon: 'Edit3' },\r\n    { id: 'materials', label: 'Materiales', icon: 'Package' },\r\n    { id: 'preview', label: 'Vista Previa', icon: 'Eye' },\r\n    { id: 'communication', label: 'Comunicaci贸n', icon: 'Send' }\r\n  ];\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <div className=\"flex items-center justify-center h-96\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n            <p className=\"text-muted-foreground\">Cargando constructor de cotizaciones...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-foreground mb-2\">Constructor de Cotizaciones</h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Creaci贸n y gesti贸n integral de cotizaciones con c谩lculos automatizados\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n            <Button\r\n              variant=\"outline\"\r\n              iconName=\"Download\"\r\n              iconPosition=\"left\"\r\n              // console.log eliminado\r\n            >\r\n              Exportar PDF\r\n            </Button>\r\n            <Button\r\n              onClick={handleSaveQuotation}\r\n              disabled={isSaving}\r\n              iconName={isSaving ? \"Loader2\" : \"Save\"}\r\n              iconPosition=\"left\"\r\n            >\r\n              {isSaving ? 'Guardando...' : 'Guardar Cotizaci贸n'}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n          {/* Sidebar - Quotation List */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-card rounded-lg shadow-sm border p-4\">\r\n              <h3 className=\"font-semibold mb-4\">Cotizaciones</h3>\r\n              <div className=\"space-y-2\">\r\n                {quotations?.map((quotation) => (\r\n                  <div\r\n                    key={quotation?.id}\r\n                    onClick={() => setCurrentQuotation(quotation)}\r\n                    className={`p-3 rounded-lg cursor-pointer transition-all border ${\r\n                      currentQuotation?.id === quotation?.id\r\n                        ? 'bg-primary/10 border-primary' :'hover:bg-muted border-transparent'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-start justify-between mb-2\">\r\n                      <h4 className=\"font-medium text-sm line-clamp-2\">{quotation?.projectName}</h4>\r\n                      <span className={`text-xs px-2 py-1 rounded-full ${\r\n                        quotation?.status === 'draft' ? 'bg-gray-100 text-gray-800' :\r\n                        quotation?.status === 'pending_validation' ? 'bg-yellow-100 text-yellow-800' :\r\n                        quotation?.status === 'approved'? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'\r\n                      }`}>\r\n                        {quotation?.statusLabel}\r\n                      </span>\r\n                    </div>\r\n                    <p className=\"text-xs text-muted-foreground mb-1\">{quotation?.client?.name}</p>\r\n                    <p className=\"text-xs text-muted-foreground\">{quotation?.id}</p>\r\n                    <div className=\"flex items-center justify-between mt-2\">\r\n                      <span className=\"text-xs text-muted-foreground\">v{quotation?.version}</span>\r\n                      <span className=\"text-xs font-medium\">\r\n                        ${quotation?.calculations?.total?.toLocaleString('es-MX')}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Content */}\r\n          <div className=\"lg:col-span-3\">\r\n            {currentQuotation && (\r\n              <div className=\"space-y-6\">\r\n                {/* Step Navigation */}\r\n                <div className=\"flex bg-muted rounded-lg p-1\">\r\n                  {steps?.map((step) => (\r\n                    <button\r\n                      key={step?.id}\r\n                      onClick={() => setActiveStep(step?.id)}\r\n                      className={`flex items-center space-x-2 px-4 py-2 rounded-md transition-smooth flex-1 justify-center ${\r\n                        activeStep === step?.id\r\n                          ? 'bg-primary text-primary-foreground'\r\n                          : 'text-muted-foreground hover:text-foreground'\r\n                      }`}\r\n                    >\r\n                      <Icon name={step?.icon} size={16} />\r\n                      <span className=\"hidden sm:inline text-sm\">{step?.label}</span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Current Quotation Info */}\r\n                <div className=\"bg-card rounded-lg shadow-sm border p-4\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <div>\r\n                      <h3 className=\"font-semibold\">{currentQuotation?.projectName}</h3>\r\n                      <p className=\"text-sm text-muted-foreground\">{currentQuotation?.client?.name}</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"text-sm font-medium\">{currentQuotation?.id}</p>\r\n                      <p className=\"text-xs text-muted-foreground\">Versi贸n {currentQuotation?.version}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Catalog Status */}\r\n                  {currentQuotation?.hasCatalog ? (\r\n                    <div className=\"p-3 bg-green-50 rounded-lg\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                        <p className=\"text-sm text-green-800 font-medium\">Cotizaci贸n desde cat谩logo cliente</p>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"p-3 bg-yellow-50 rounded-lg\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon name=\"Search\" size={16} className=\"text-yellow-600\" />\r\n                        <p className=\"text-sm text-yellow-800 font-medium\">Identificaci贸n de materiales desde planos</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Step Content */}\r\n                <div className=\"bg-card rounded-lg shadow-sm border\">\r\n                  {activeStep === 'form' && (\r\n                    <QuotationForm\r\n                      quotation={currentQuotation}\r\n                      onUpdate={handleQuotationUpdate}\r\n                      onCalculationUpdate={handleCalculationUpdate}\r\n                      onValidationSubmit={handleValidationSubmit}\r\n                      isSaving={isSaving}\r\n                    />\r\n                  )}\r\n\r\n                  {activeStep === 'materials' && (\r\n                    <MaterialIdentification\r\n                      quotation={currentQuotation}\r\n                      onMaterialUpdate={handleMaterialUpdate}\r\n                    />\r\n                  )}\r\n\r\n                  {activeStep === 'preview' && (\r\n                    <QuotationPreview\r\n                      quotation={currentQuotation}\r\n                      // console.log eliminado\r\n                    />\r\n                  )}\r\n\r\n                  {activeStep === 'communication' && (\r\n                    <CommunicationPanel\r\n                      quotation={currentQuotation}\r\n                      onSend={handleCommunicationSend}\r\n                      isSending={isSaving}\r\n                    />\r\n                  )}\r\n                </div>\r\n\r\n                {/* Version Control */}\r\n                <VersionControl\r\n                  quotation={currentQuotation}\r\n                  // console.log eliminado\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationBuilder;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\nconst OrderDetailsModal = ({ isOpen, onClose, order }) => {\r\n  if (!isOpen || !order) return null;\r\n\r\n  const handleDownloadPDF = () => {\r\n    const doc = new jsPDF();\r\n    \r\n    // Configuraci贸n inicial\r\n    doc.setFontSize(20);\r\n    doc.text('Orden de Compra', 105, 15, { align: 'center' });\r\n    doc.setFontSize(12);\r\n\r\n    // Informaci贸n del encabezado\r\n    doc.text(`N煤mero: ${order.numeroOrden}`, 15, 30);\r\n    doc.text(`Fecha: ${formatDate(order.fechaCreacion)}`, 15, 40);\r\n    doc.text(`Estado: ${getStatusLabel(order.estado)}`, 15, 50);\r\n    doc.text(`Proveedor: ${order.proveedor?.nombre}`, 15, 60);\r\n    doc.text(`T茅rminos de Pago: ${getPaymentTermLabel(order.terminosPago)}`, 15, 70);\r\n    \r\n    if (order.fechaEntregaEsperada) {\r\n      doc.text(`Entrega Esperada: ${formatDate(order.fechaEntregaEsperada)}`, 15, 80);\r\n    }\r\n\r\n    // Tabla de art铆culos\r\n    const tableColumns = [\r\n      { header: 'C贸digo', dataKey: 'codigo' },\r\n      { header: 'Nombre', dataKey: 'nombre' },\r\n      { header: 'Descripci贸n', dataKey: 'descripcion' },\r\n      { header: 'Cantidad', dataKey: 'cantidad' },\r\n      { header: 'Costo Unit.', dataKey: 'costoUnitario' },\r\n      { header: 'Subtotal', dataKey: 'subtotal' }\r\n    ];\r\n\r\n    const tableRows = order.articulos?.map(item => ({\r\n      codigo: item.codigoArticulo,\r\n      nombre: item.nombre || item.descripcion || item.codigoArticulo,\r\n      descripcion: item.descripcion,\r\n      cantidad: `${item.cantidadOrdenada} ${item.unidad}`,\r\n      costoUnitario: formatCurrency(item.costoUnitario),\r\n      subtotal: formatCurrency(item.subtotal)\r\n    }));\r\n\r\n    autoTable(doc, {\r\n      head: [tableColumns.map(col => col.header)],\r\n      body: tableRows.map(row => tableColumns.map(col => row[col.dataKey])),\r\n      startY: 90,\r\n      styles: { fontSize: 10 },\r\n      headStyles: { fillColor: [41, 128, 185] },\r\n    });\r\n\r\n    // Total\r\n    const finalY = doc.previousAutoTable ? doc.previousAutoTable.finalY : 90;\r\n    doc.text(`Total: ${formatCurrency(order.totalOrden)}`, 195, finalY + 10, { align: 'right' });\r\n\r\n    // Notas si existen\r\n    if (order.notas) {\r\n      doc.text('Notas:', 15, finalY + 20);\r\n      doc.setFontSize(10);\r\n      doc.text(order.notas, 15, finalY + 30);\r\n    }\r\n\r\n    // Descargar el PDF\r\n    doc.save(`orden-compra-${order.numeroOrden}.pdf`);\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    }).format(amount);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Intl.DateTimeFormat('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(new Date(date));\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'text-warning bg-warning/10';\r\n      case 'approved': return 'text-primary bg-primary/10';\r\n      case 'received': return 'text-success bg-success/10';\r\n      case 'cancelled': return 'text-error bg-error/10';\r\n      default: return 'text-muted-foreground bg-muted';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'Pendiente';\r\n      case 'approved': return 'Aprobada';\r\n      case 'received': return 'Recibida';\r\n      case 'cancelled': return 'Cancelada';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n  const getPaymentTermLabel = (term) => {\r\n    if (!term) return 'No especificado';\r\n    \r\n    // Convertir a min煤sculas para hacer la comparaci贸n insensible a may煤sculas\r\n    const termLower = term.toLowerCase();\r\n    const terms = {\r\n      'immediate': 'Pago Inmediato',\r\n      'net15': '15 d铆as',\r\n      'net30': '30 d铆as',\r\n      'net60': '60 d铆as',\r\n      'contado': 'Pago de Contado',\r\n      'credito': 'Cr茅dito',\r\n      'custom': 'Personalizado',\r\n      'prepaid': 'Pago por Adelantado',\r\n      'cod': 'Pago Contra Entrega',\r\n      'credit_card': 'Tarjeta de Cr茅dito',\r\n      'wire_transfer': 'Transferencia Bancaria',\r\n      'cash': 'Efectivo'\r\n    };\r\n    return terms[termLower] || 'Otros T茅rminos';\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n      <div className=\"flex min-h-full items-center justify-center p-4 text-center\">\r\n        <div className=\"fixed inset-0 bg-black/50 transition-opacity\" onClick={onClose}></div>\r\n        \r\n        <div className=\"w-full max-w-4xl transform overflow-hidden rounded-lg bg-card text-left align-middle shadow-xl transition-all\">\r\n          {/* Header */}\r\n          <div className=\"bg-muted px-6 py-4 flex items-center justify-between border-b border-border\">\r\n            <h3 className=\"text-lg font-medium text-foreground\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Icon name=\"FileText\" size={18} className=\"text-primary\" />\r\n                <span>Detalles de Orden de Compra</span>\r\n              </div>\r\n            </h3>\r\n            <button onClick={onClose} className=\"rounded-md bg-transparent text-muted-foreground hover:text-foreground\">\r\n              <Icon name=\"X\" size={18} />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"px-6 py-4\">\r\n            {/* Order Header */}\r\n            <div className=\"mb-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h4 className=\"text-xl font-medium mb-1\">{order.numeroOrden}</h4>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Creada el {formatDate(order.fechaCreacion)}\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(order.estado)}`}>\r\n                    {getStatusLabel(order.estado)}\r\n                  </span>\r\n                  {order.esUrgente && (\r\n                    <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-error/10 text-error\">\r\n                      <Icon name=\"AlertCircle\" size={14} className=\"mr-1\" />\r\n                      Urgente\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n                <div>\r\n                  <h5 className=\"text-sm font-medium text-muted-foreground mb-1\">Proveedor</h5>\r\n                  <p className=\"text-foreground\">{order.proveedor?.nombre}</p>\r\n                </div>\r\n                {order.fechaEntregaEsperada && (\r\n                  <div>\r\n                    <h5 className=\"text-sm font-medium text-muted-foreground mb-1\">Entrega Esperada</h5>\r\n                    <p className=\"text-foreground\">{formatDate(order.fechaEntregaEsperada)}</p>\r\n                  </div>\r\n                )}\r\n                <div>\r\n                  <h5 className=\"text-sm font-medium text-muted-foreground mb-1\">T茅rminos de Pago</h5>\r\n                  <p className=\"text-foreground\">{getPaymentTermLabel(order.terminosPago)}</p>\r\n                </div>\r\n              </div>\r\n\r\n              {order.notas && (\r\n                <div className=\"bg-muted p-4 rounded-md\">\r\n                  <h5 className=\"text-sm font-medium mb-2\">Notas</h5>\r\n                  <p className=\"text-sm text-muted-foreground\">{order.notas}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Items Table */}\r\n            <div className=\"border border-border rounded-md mb-6\">\r\n              <table className=\"w-full\">\r\n                <thead className=\"bg-muted\">\r\n                  <tr>\r\n                    <th className=\"px-4 py-3 text-left text-sm font-medium\">C贸digo</th>\r\n                    <th className=\"px-4 py-3 text-left text-sm font-medium\">Nombre</th>\r\n                    <th className=\"px-4 py-3 text-left text-sm font-medium\">Descripci贸n</th>\r\n                    <th className=\"px-4 py-3 text-right text-sm font-medium\">Cantidad</th>\r\n                    <th className=\"px-4 py-3 text-right text-sm font-medium\">Costo Unit.</th>\r\n                    <th className=\"px-4 py-3 text-right text-sm font-medium\">Subtotal</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-border\">\r\n                  {order.articulos?.map((item) => (\r\n                    <tr key={item.articuloId} className=\"hover:bg-muted/50\">\r\n                      <td className=\"px-4 py-3 text-sm font-mono\">{item.codigoArticulo}</td>\r\n                      <td className=\"px-4 py-3 text-sm\">{item.nombre}</td>\r\n                      <td className=\"px-4 py-3 text-sm\">{item.descripcion}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-right\">\r\n                        {item.cantidadOrdenada} {item.unidad}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-right\">{formatCurrency(item.costoUnitario)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-right font-medium\">{formatCurrency(item.subtotal)}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n                <tfoot className=\"bg-muted\">\r\n                  <tr>\r\n                    <td colSpan=\"5\" className=\"px-4 py-3 text-right font-medium\">Total:</td>\r\n                    <td className=\"px-4 py-3 text-right text-lg font-bold\">{formatCurrency(order.totalOrden)}</td>\r\n                  </tr>\r\n                </tfoot>\r\n              </table>\r\n            </div>\r\n\r\n            {/* History */}\r\n            {order.historial && order.historial.length > 0 && (\r\n              <div>\r\n                <h5 className=\"font-medium mb-3\">Historial</h5>\r\n                <div className=\"space-y-2\">\r\n                  {order.historial.map((entry, index) => (\r\n                    <div key={index} className=\"flex items-start space-x-3 text-sm\">\r\n                      <div className=\"w-32 flex-shrink-0 text-muted-foreground\">\r\n                        {formatDate(entry.fecha)}\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <span className=\"font-medium\">{entry.usuario}</span>\r\n                        <span className=\"mx-1\"></span>\r\n                        <span>{entry.accion}</span>\r\n                        {entry.comentarios && (\r\n                          <p className=\"text-muted-foreground mt-1\">{entry.comentarios}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"bg-muted px-6 py-4 flex justify-end space-x-2 border-t border-border\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"flex items-center space-x-2\"\r\n              onClick={handleDownloadPDF}\r\n            >\r\n              <Icon name=\"Download\" size={18} />\r\n              <span>Descargar PDF</span>\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n            >\r\n              Cerrar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetailsModal;","// services/ordenCompraService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst ordenCompraService = {\r\n    async getOrdenes() {\r\n        try {\r\n            const data = await httpService.get(\"/ordenCompra/todas\");\r\n            return data;\r\n        } catch (error) {\r\n            console.error(\"Error al obtener 贸rdenes de compra:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async getOrdenById(id) {\r\n        try {\r\n            const data = await httpService.get(`/ordenCompra/detalle/${id}`);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al obtener la orden de compra con ID ${id}:`, error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async getOrdenByNumero(numeroOrden) {\r\n        try {\r\n            const data = await httpService.get(`/ordenCompra/numero/${numeroOrden}`);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al obtener la orden de compra n煤mero ${numeroOrden}:`, error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async createOrden(payload) {\r\n        try {\r\n            const data = await httpService.post(\"/ordenCompra/crear\", payload);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(\"Error al crear orden de compra:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async updateOrden(id, payload) {\r\n        try {\r\n            const data = await httpService.put(`/ordenCompra/editar/${id}`, payload);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al actualizar la orden de compra con ID ${id}:`, error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async deleteOrden(id) {\r\n        try {\r\n            const data = await httpService.delete(`/ordenCompra/eliminar/${id}`);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al eliminar la orden de compra con ID ${id}:`, error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async hardDeleteOrden(id) {\r\n        try {\r\n            const data = await httpService.delete(`/ordenCompra/hardDelete/${id}`);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al eliminar permanentemente la orden de compra con ID ${id}:`, error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async getOrdenesEliminadas() {\r\n        try {\r\n            const data = await httpService.get(\"/ordenCompra/eliminadas\");\r\n            return data;\r\n        } catch (error) {\r\n            console.error(\"Error al obtener 贸rdenes de compra eliminadas:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async restaurarOrden(id) {\r\n        try {\r\n            const data = await httpService.put(`/ordenCompra/restaurar/${id}`);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al restaurar la orden de compra con ID ${id}:`, error);\r\n            throw error;\r\n        }\r\n    }\r\n};\r\n\r\nexport default ordenCompraService;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\nconst InventoryTable = ({ \r\n  items, \r\n  onViewDetails, \r\n  onUpdateStock, \r\n  onCreatePO,\r\n  onAddItem,\r\n  onGenerateReport\r\n}) => {\r\n  const [sortField, setSortField] = useState('itemCode');\r\n  const [sortDirection, setSortDirection] = useState('asc');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  const handleSort = (field) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection('asc');\r\n    }\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const sortedItems = [...items]?.sort((a, b) => {\r\n    const aValue = a?.[sortField];\r\n    const bValue = b?.[sortField];\r\n    \r\n    if (typeof aValue === 'string') {\r\n      return sortDirection === 'asc' \r\n        ? aValue?.localeCompare(bValue)\r\n        : bValue?.localeCompare(aValue);\r\n    }\r\n    \r\n    return sortDirection === 'asc' ? aValue - bValue : bValue - aValue;\r\n  });\r\n\r\n  // Paginaci贸n\r\n  const totalItems = sortedItems.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedItems = sortedItems.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  const getStockStatus = (current, reorderPoint) => {\r\n    if (current === 0) return { status: 'out-of-stock', label: 'Agotado', color: 'text-error' };\r\n    if (current <= reorderPoint) return { status: 'low-stock', label: 'Stock Bajo', color: 'text-warning' };\r\n    return { status: 'in-stock', label: 'En Stock', color: 'text-success' };\r\n  };\r\n\r\n  const SortIcon = ({ field }) => {\r\n    if (sortField !== field) return <Icon name=\"ArrowUpDown\" size={16} className=\"text-muted-foreground\" />;\r\n    return <Icon name={sortDirection === 'asc' ? 'ArrowUp' : 'ArrowDown'} size={16} className=\"text-foreground\" />;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Quick Functions */}\r\n\r\n\r\n      <div className=\"bg-card rounded-lg border border-border overflow-hidden\">\r\n        {/* Desktop Table */}\r\n        <div className=\"hidden lg:block overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-muted border-b border-border\">\r\n            <tr>\r\n              <th className=\"text-left p-3 lg:p-4\">\r\n                <button\r\n                  onClick={() => handleSort('itemCode')}\r\n                  className=\"flex items-center space-x-2 font-medium text-sm text-foreground hover:text-primary transition-smooth\"\r\n                >\r\n                  <span>C贸digo</span>\r\n                  <SortIcon field=\"itemCode\" />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4\">\r\n                <button\r\n                  onClick={() => handleSort('name')}\r\n                  className=\"flex items-center space-x-2 font-medium text-sm text-foreground hover:text-primary transition-smooth\"\r\n                >\r\n                  <span>Nombre</span>\r\n                  <SortIcon field=\"name\" />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4\">\r\n                <button\r\n                  onClick={() => handleSort('description')}\r\n                  className=\"flex items-center space-x-2 font-medium text-sm text-foreground hover:text-primary transition-smooth\"\r\n                >\r\n                  <span>Descripci贸n</span>\r\n                  <SortIcon field=\"description\" />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4 hidden lg:table-cell\">\r\n                <button\r\n                  onClick={() => handleSort('category')}\r\n                  className=\"flex items-center space-x-2 font-medium text-sm text-foreground hover:text-primary transition-smooth\"\r\n                >\r\n                  <span>Categor铆a</span>\r\n                  <SortIcon field=\"category\" />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4\">\r\n                <button\r\n                  onClick={() => handleSort('currentStock')}\r\n                  className=\"flex items-center space-x-2 font-medium text-sm text-foreground hover:text-primary transition-smooth\"\r\n                >\r\n                  <span>Stock</span>\r\n                  <SortIcon field=\"currentStock\" />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4 hidden xl:table-cell\">\r\n                <span className=\"font-medium text-sm text-foreground\">Proveedor</span>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4\">\r\n                <span className=\"font-medium text-sm text-foreground\">Estado</span>\r\n              </th>\r\n              <th className=\"text-right p-3 lg:p-4\">\r\n                <span className=\"font-medium text-sm text-foreground\">Acciones</span>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {paginatedItems?.length === 0 ? (\r\n              <tr>\r\n                <td colSpan=\"7\" className=\"p-8 text-center text-muted-foreground\">\r\n                  <div className=\"flex flex-col items-center space-y-2\">\r\n                    <Icon name=\"Package\" size={48} className=\"text-muted-foreground/50\" />\r\n                    <p className=\"text-lg font-medium\">No hay art铆culos disponibles</p>\r\n                    <p className=\"text-sm\">Los art铆culos que agregues aparecer谩n aqu铆</p>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              paginatedItems?.map((item) => {\r\n              const stockStatus = getStockStatus(item?.currentStock, item?.reorderPoint);\r\n              return (\r\n                <tr key={item?.id} className=\"border-b border-border hover:bg-muted/50 transition-smooth\">\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <span className=\"font-mono text-sm text-foreground\">{item?.itemCode}</span>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <div className=\"font-medium text-sm text-foreground\">{item?.name}</div>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <div className=\"font-medium text-sm text-foreground\">{item?.description}</div>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4 hidden lg:table-cell\">\r\n                    <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-secondary/10 text-secondary\">\r\n                      {item?.category}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <div>\r\n                      <div className=\"font-medium text-sm text-foreground\">{item?.currentStock} {item?.unit}</div>\r\n                      <div className=\"text-xs text-muted-foreground lg:hidden\">Punto: {item?.reorderPoint}</div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4 hidden xl:table-cell\">\r\n                    <div className=\"text-sm font-medium text-foreground truncate max-w-32\">{item?.supplier?.name}</div>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <span className={`inline-flex items-center space-x-1 text-xs font-medium ${stockStatus?.color}`}>\r\n                      <div className={`w-2 h-2 rounded-full ${\r\n                        stockStatus?.status === 'out-of-stock' ? 'bg-error' :\r\n                        stockStatus?.status === 'low-stock' ? 'bg-warning' : 'bg-success'\r\n                      }`} />\r\n                      <span className=\"hidden sm:inline\">{stockStatus?.label}</span>\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <div className=\"flex items-center justify-end space-x-1\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => onViewDetails(item)}\r\n                        iconName=\"Eye\"\r\n                        iconSize={14}\r\n                        className=\"text-xs px-2 py-1\"\r\n                      >\r\n                        <span className=\"hidden sm:inline\">Ver</span>\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => onUpdateStock(item)}\r\n                        iconName=\"Edit\"\r\n                        iconSize={14}\r\n                        className=\"text-xs px-2 py-1\"\r\n                      >\r\n                        <span className=\"hidden sm:inline\">Editar</span>\r\n                      </Button>\r\n                      {stockStatus?.status !== 'in-stock' && (\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => onCreatePO(item)}\r\n                          iconName=\"ShoppingCart\"\r\n                          iconSize={14}\r\n                          className=\"text-xs px-2 py-1 hidden lg:inline-flex\"\r\n                        >\r\n                          <span className=\"hidden xl:inline\">Ordenar</span>\r\n                        </Button>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* Paginaci贸n Desktop */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n            <span className=\"text-xs text-muted-foreground ml-3\">\r\n              Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n            <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Cards */}\r\n      <div className=\"lg:hidden space-y-3 p-3 sm:p-4 sm:space-y-4\">\r\n        {paginatedItems?.length === 0 ? (\r\n          <div className=\"flex flex-col items-center space-y-4 py-8\">\r\n            <Icon name=\"Package\" size={48} className=\"text-muted-foreground/50\" />\r\n            <div className=\"text-center\">\r\n              <p className=\"text-lg font-medium text-foreground mb-1\">No hay art铆culos disponibles</p>\r\n              <p className=\"text-sm text-muted-foreground\">Los art铆culos que agregues aparecer谩n aqu铆</p>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          paginatedItems?.map((item) => {\r\n          const stockStatus = getStockStatus(item?.currentStock, item?.reorderPoint);\r\n          return (\r\n            <div key={item?.id} className=\"bg-background border border-border rounded-lg p-3 sm:p-4\">\r\n              <div className=\"flex items-start justify-between mb-3\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"font-mono text-sm text-muted-foreground mb-1\">{item?.itemCode}</div>\r\n                  <div className=\"font-medium text-foreground mb-1\">{item?.description}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">{item?.specifications}</div>\r\n                </div>\r\n                <span className={`inline-flex items-center space-x-1 text-xs font-medium ${stockStatus?.color}`}>\r\n                  <div className={`w-2 h-2 rounded-full ${\r\n                    stockStatus?.status === 'out-of-stock' ? 'bg-error' :\r\n                    stockStatus?.status === 'low-stock' ? 'bg-warning' : 'bg-success'\r\n                  }`} />\r\n                  <span>{stockStatus?.label}</span>\r\n                </span>\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4\">\r\n                <div>\r\n                  <div className=\"text-xs text-muted-foreground\">Stock Actual</div>\r\n                  <div className=\"font-medium text-sm text-foreground\">{item?.currentStock} {item?.unit}</div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"text-xs text-muted-foreground\">Punto Reorden</div>\r\n                  <div className=\"text-sm text-foreground\">{item?.reorderPoint} {item?.unit}</div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"text-xs text-muted-foreground\">Categor铆a</div>\r\n                  <div className=\"text-sm text-foreground\">{item?.category}</div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"text-xs text-muted-foreground\">Proveedor</div>\r\n                  <div className=\"text-sm font-medium text-foreground truncate\">{item?.supplier?.name}</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onViewDetails(item)}\r\n                  iconName=\"Eye\"\r\n                  iconSize={16}\r\n                  className=\"flex-1 text-xs sm:text-sm\"\r\n                >\r\n                  Ver\r\n                </Button>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onUpdateStock(item)}\r\n                  iconName=\"Edit\"\r\n                  iconSize={16}\r\n                  className=\"flex-1 text-xs sm:text-sm\"\r\n                >\r\n                  Editar\r\n                </Button>\r\n                {stockStatus?.status !== 'in-stock' && (\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => onCreatePO(item)}\r\n                    iconName=\"ShoppingCart\"\r\n                    iconSize={16}\r\n                    className=\"flex-1 text-xs sm:text-sm\"\r\n                  >\r\n                    Ordenar\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })\r\n        )}\r\n\r\n        {/* Paginaci贸n Mobile */}\r\n        <div className=\"flex flex-col gap-3 pt-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {totalItems === 0 ? '0 de 0' : `${startIndex + 1}-${endIndex} de ${totalItems}`}\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n              <span className=\"px-2 text-sm text-foreground\">{currentPage}/{totalPages}</span>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryTable;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst InventoryFilters = ({ \r\n  filters, \r\n  onFiltersChange, \r\n  onClearFilters, \r\n  onExport,\r\n  totalItems,\r\n  filteredItems,\r\n  inventoryItems = []\r\n}) => {\r\n  // Generar opciones de categor铆as din谩micamente desde los datos reales\r\n  const categoryOptions = React.useMemo(() => {\r\n    const categories = [...new Set(inventoryItems.map(item => item.category).filter(Boolean))];\r\n    return [\r\n      { value: '', label: 'Todas las Categor铆as' },\r\n      ...categories.map(category => ({ value: category, label: category }))\r\n    ];\r\n  }, [inventoryItems]);\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'in-stock', label: 'En Stock' },\r\n    { value: 'low-stock', label: 'Stock Bajo' },\r\n    { value: 'out-of-stock', label: 'Agotado' }\r\n  ];\r\n\r\n  // Generar opciones de proveedores din谩micamente desde los datos reales\r\n  const supplierOptions = React.useMemo(() => {\r\n    const suppliers = [...new Set(inventoryItems.map(item => item.supplier?.name).filter(Boolean))];\r\n    return [\r\n      { value: '', label: 'Todos los Proveedores' },\r\n      ...suppliers.map(supplier => ({ value: supplier, label: supplier }))\r\n    ];\r\n  }, [inventoryItems]);\r\n\r\n  // Generar opciones de ubicaciones din谩micamente desde los datos reales\r\n  const locationOptions = React.useMemo(() => {\r\n    const locations = [...new Set(inventoryItems.map(item => item.location).filter(Boolean))];\r\n    return [\r\n      { value: '', label: 'Todas las Ubicaciones' },\r\n      ...locations.map(location => ({ value: location, label: location }))\r\n    ];\r\n  }, [inventoryItems]);\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    onFiltersChange({\r\n      ...filters,\r\n      [key]: value\r\n    });\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some(value => value !== '');\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 mb-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Icon name=\"Filter\" size={20} className=\"text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Filtros de Inventario</h3>\r\n          {hasActiveFilters && (\r\n            <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary\">\r\n              Filtros Activos\r\n            </span>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Mostrando {filteredItems} de {totalItems} art铆culos\r\n          </div>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExport}\r\n            iconName=\"Download\"\r\n            iconSize={16}\r\n          >\r\n            Exportar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Search Bar */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"relative\">\r\n          <Input\r\n            type=\"search\"\r\n            placeholder=\"Buscar por c贸digo, descripci贸n o especificaciones...\"\r\n            value={filters?.search}\r\n            onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n            className=\"pl-10\"\r\n          />\r\n          <Icon \r\n            name=\"Search\" \r\n            size={16} \r\n            className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n          />\r\n        </div>\r\n      </div>\r\n      {/* Filter Controls */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Categor铆a\r\n          </label>\r\n          <select\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n            value={filters?.category || ''}\r\n            onChange={(e) => handleFilterChange('category', e.target.value)}\r\n          >\r\n            {categoryOptions.map(option => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Estado de Stock\r\n          </label>\r\n          <select\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n            value={filters?.status || ''}\r\n            onChange={(e) => handleFilterChange('status', e.target.value)}\r\n          >\r\n            {statusOptions.map(option => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Proveedor\r\n          </label>\r\n          <select\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n            value={filters?.supplier || ''}\r\n            onChange={(e) => handleFilterChange('supplier', e.target.value)}\r\n          >\r\n            {supplierOptions.map(option => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Ubicaci贸n\r\n          </label>\r\n          <select\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n            value={filters?.location || ''}\r\n            onChange={(e) => handleFilterChange('location', e.target.value)}\r\n          >\r\n            {locationOptions.map(option => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n      {/* Stock Level Filters */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n        <div>\r\n          <Input\r\n            type=\"number\"\r\n            label=\"Stock M铆nimo\"\r\n            placeholder=\"0\"\r\n            value={filters?.minStock}\r\n            onChange={(e) => handleFilterChange('minStock', e?.target?.value)}\r\n            min=\"0\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <Input\r\n            type=\"number\"\r\n            label=\"Stock M谩ximo\"\r\n            placeholder=\"1000\"\r\n            value={filters?.maxStock}\r\n            onChange={(e) => handleFilterChange('maxStock', e?.target?.value)}\r\n            min=\"0\"\r\n          />\r\n        </div>\r\n        <div className=\"flex items-end\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onClearFilters}\r\n            disabled={!hasActiveFilters}\r\n            iconName=\"X\"\r\n            iconSize={16}\r\n            className=\"w-full\"\r\n          >\r\n            Limpiar Filtros\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Quick Filter Buttons */}\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        <Button\r\n          variant={filters?.quickFilter === 'low-stock' ? 'default' : 'ghost'}\r\n          size=\"sm\"\r\n          onClick={() => handleFilterChange('quickFilter', \r\n            filters?.quickFilter === 'low-stock' ? '' : 'low-stock'\r\n          )}\r\n          iconName=\"AlertTriangle\"\r\n          iconSize={16}\r\n        >\r\n          Stock Bajo\r\n        </Button>\r\n        \r\n        <Button\r\n          variant={filters?.quickFilter === 'out-of-stock' ? 'default' : 'ghost'}\r\n          size=\"sm\"\r\n          onClick={() => handleFilterChange('quickFilter', \r\n            filters?.quickFilter === 'out-of-stock' ? '' : 'out-of-stock'\r\n          )}\r\n          iconName=\"AlertCircle\"\r\n          iconSize={16}\r\n        >\r\n          Agotado\r\n        </Button>\r\n        \r\n        <Button\r\n          variant={filters?.quickFilter === 'recent' ? 'default' : 'ghost'}\r\n          size=\"sm\"\r\n          onClick={() => handleFilterChange('quickFilter', \r\n            filters?.quickFilter === 'recent' ? '' : 'recent'\r\n          )}\r\n          iconName=\"Clock\"\r\n          iconSize={16}\r\n        >\r\n          Reci茅n Agregados\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryFilters;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst StockAlerts = ({ alerts, onCreatePO, onUpdateStock, onDismissAlert }) => {\r\n  const getAlertIcon = (type) => {\r\n    switch (type) {\r\n      case 'out-of-stock': return 'AlertCircle';\r\n      case 'low-stock': return 'AlertTriangle';\r\n      case 'overstock': return 'TrendingUp';\r\n      case 'expired': return 'Clock';\r\n      default: return 'Info';\r\n    }\r\n  };\r\n\r\n  const getAlertColor = (type) => {\r\n    switch (type) {\r\n      case 'out-of-stock': return 'text-error';\r\n      case 'low-stock': return 'text-warning';\r\n      case 'overstock': return 'text-primary';\r\n      case 'expired': return 'text-muted-foreground';\r\n      default: return 'text-foreground';\r\n    }\r\n  };\r\n\r\n  const getAlertBgColor = (type) => {\r\n    switch (type) {\r\n      case 'out-of-stock': return 'bg-error/10 border-error/20';\r\n      case 'low-stock': return 'bg-warning/10 border-warning/20';\r\n      case 'overstock': return 'bg-primary/10 border-primary/20';\r\n      case 'expired': return 'bg-muted border-border';\r\n      default: return 'bg-background border-border';\r\n    }\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Intl.DateTimeFormat('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    })?.format(new Date(date));\r\n  };\r\n\r\n  if (alerts?.length === 0) {\r\n    return (\r\n      <div className=\"bg-card rounded-lg border border-border p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-4\">\r\n          <Icon name=\"CheckCircle\" size={20} className=\"text-success\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Alertas de Stock</h3>\r\n        </div>\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"CheckCircle\" size={48} className=\"text-success mx-auto mb-4\" />\r\n          <p className=\"text-muted-foreground\">No hay alertas de stock pendientes</p>\r\n          <p className=\"text-sm text-muted-foreground mt-2\">\r\n            Todos los art铆culos est谩n dentro de los niveles normales\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Icon name=\"AlertTriangle\" size={20} className=\"text-warning\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Alertas de Stock</h3>\r\n          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-warning/10 text-warning\">\r\n            {alerts?.length} Alertas\r\n          </span>\r\n        </div>\r\n        \r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={() => alerts?.forEach(alert => onDismissAlert(alert?.id))}\r\n          iconName=\"X\"\r\n          iconSize={16}\r\n        >\r\n          Descartar Todas\r\n        </Button>\r\n      </div>\r\n      {/* Alerts List */}\r\n      <div className=\"divide-y divide-border\">\r\n        {alerts?.map((alert) => (\r\n          <div key={alert?.id} className={`p-4 ${getAlertBgColor(alert?.type)}`}>\r\n            <div className=\"flex items-start space-x-4\">\r\n              <Icon \r\n                name={getAlertIcon(alert?.type)} \r\n                size={20} \r\n                className={`flex-shrink-0 mt-0.5 ${getAlertColor(alert?.type)}`}\r\n              />\r\n              \r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <h4 className=\"font-medium text-foreground mb-1\">{alert?.title}</h4>\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">{alert?.message}</p>\r\n                    \r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs text-muted-foreground mb-3\">\r\n                      <div>\r\n                        <span className=\"font-medium\">C贸digo:</span> {alert?.itemCode}\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"font-medium\">Stock Actual:</span> {alert?.currentStock} {alert?.unit}\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"font-medium\">Punto Reorden:</span> {alert?.reorderPoint} {alert?.unit}\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"font-medium\">Proveedor:</span> {alert?.supplier}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"text-xs text-muted-foreground\">\r\n                      Generada: {formatDate(alert?.createdAt)}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => onDismissAlert(alert?.id)}\r\n                    iconName=\"X\"\r\n                    iconSize={16}\r\n                    className=\"ml-2\"\r\n                  />\r\n                </div>\r\n                \r\n                {/* Action Buttons */}\r\n                <div className=\"flex items-center space-x-2 mt-3\">\r\n                  {(alert?.type === 'out-of-stock' || alert?.type === 'low-stock') && (\r\n                    <Button\r\n                      variant=\"default\"\r\n                      size=\"sm\"\r\n                      onClick={() => onCreatePO(alert)}\r\n                      iconName=\"ShoppingCart\"\r\n                      iconSize={16}\r\n                    >\r\n                      Crear Orden de Compra\r\n                    </Button>\r\n                  )}\r\n                  \r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => onUpdateStock(alert)}\r\n                    iconName=\"Edit\"\r\n                    iconSize={16}\r\n                  >\r\n                    Actualizar Stock\r\n                  </Button>\r\n                  \r\n                  {alert?.type === 'overstock' && (\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => console.log('Transfer stock:', alert)}\r\n                      iconName=\"ArrowRightLeft\"\r\n                      iconSize={16}\r\n                    >\r\n                      Transferir\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StockAlerts;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\n\r\nconst PurchaseOrderPanel = ({ orders, onViewOrder, onApproveOrder, onCreateOrder, onDeleteOrder }) => {\r\n  const [orderToDelete, setOrderToDelete] = useState(null);\r\n  \r\n  const handleDeleteClick = (order) => {\r\n    if (window.confirm(`驴Est谩s seguro de que deseas eliminar la orden de compra ${order.numeroOrden}?`)) {\r\n      onDeleteOrder(order);\r\n    }\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    }).format(amount);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Intl.DateTimeFormat('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(new Date(date));\r\n  };\r\n\r\n//PDF \r\nconst onDownloadOrder = (order) => {\r\n  const doc = new jsPDF();\r\n  const gray = \"#333333\";\r\n\r\n  // Para que salga el texto bien en el apartado de Metodo de pago\r\n  const formatText = (text) => {\r\n    if (!text) return \"\";\r\n    return text\r\n      .replace(/_/g, \" \")\r\n      .toLowerCase()\r\n      .replace(/\\b\\w/g, (c) => c.toUpperCase());\r\n  };\r\n\r\n  // ENCABEZADO\r\n  doc.setFillColor(10, 74, 139);\r\n  doc.rect(0, 0, 210, 25, \"F\");\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.setFontSize(16);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.text(\"ORDEN DE COMPRA\", 105, 15, { align: \"center\" });\r\n\r\n  //DATOS GENERALES\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setTextColor(gray);\r\n  doc.setFontSize(12);\r\n  doc.text(\"Datos Generales\", 105, 35, { align: \"center\" });\r\n\r\n  const leftX = 20;\r\n  const rightX = 120;\r\n  const baseY = 44;\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  doc.text(`N煤mero: ${order.numeroOrden || \"\"}`, leftX, baseY);\r\n  doc.text(`Fecha: ${formatDate(order.fechaCreacion)}`, leftX, baseY + 7);\r\n  doc.text(`Estado: ${getStatusLabel(order.estado)}`, leftX, baseY + 14);\r\n  doc.text(`Proveedor: ${order.proveedor?.nombre || \"\"}`, rightX, baseY);\r\n  doc.text(`Creado por: ${order.creadoPor || \"\"}`, rightX, baseY + 7);\r\n\r\n  const maxWidthNotas = 70;\r\n  const notaTexto = `Notas: ${order.notas || \"\"}`;\r\n  const notaLineas = doc.splitTextToSize(notaTexto, maxWidthNotas);\r\n  const notaAltura = notaLineas.length * 5;\r\n\r\n  doc.text(notaLineas, rightX, baseY + 14);\r\n\r\n  if (order.fechaEntregaEsperada) {\r\n    doc.text(\r\n      `Entrega Esperada: ${formatDate(order.fechaEntregaEsperada)}`,\r\n      leftX,\r\n      baseY + 21\r\n    );\r\n  }\r\n\r\n  // DETALLES DE PAGO\r\n  const pagoY = Math.max(baseY + 28, baseY + 14 + notaAltura + 5);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.text(\"Detalles de Pago\", 105, pagoY, { align: \"center\" });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  const infoPagoY = pagoY + 8;\r\n  const metodoPagoFormateado = formatText(order.metodoPago);\r\n  const prioridadFormateada = formatText(order.prioridadAprobacion || \"Normal\");\r\n\r\n  doc.text(`M茅todo de Pago: ${metodoPagoFormateado}`, leftX, infoPagoY);\r\n  doc.text(`Prioridad: ${prioridadFormateada}`, leftX, infoPagoY + 7);\r\n  const maxWidthComentarios = 70;\r\n  const comentarioTexto = `Comentarios: ${order.comentariosAprobador || \"Sin comentarios\"}`;\r\n  const comentarioLineas = doc.splitTextToSize(comentarioTexto, maxWidthComentarios);\r\n  const comentarioAltura = comentarioLineas.length * 5;\r\n  doc.text(comentarioLineas, rightX, infoPagoY);\r\n\r\n  // TABLA DE ARTCULOS\r\n  const tableY = infoPagoY + 9 + comentarioAltura;\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.text(\"Detalle de Productos\", 105, tableY, { align: \"center\" });\r\n\r\n  const tableHead = [\r\n    [\"C贸digo\", \"Descripci贸n\", \"Cantidad\", \"Costo Unit.\", \"Subtotal\"],\r\n  ];\r\n\r\n  const tableBody = order.articulos?.map((item) => [\r\n    item.codigoArticulo || \"\",\r\n    item.descripcion || item.nombre || \"\",\r\n    `${item.cantidadOrdenada || 0} ${item.unidad || \"\"}`.trim(),\r\n    formatCurrency(item.costoUnitario || 0),\r\n    formatCurrency(item.subtotal || 0),\r\n  ]);\r\n\r\n  doc.autoTable({\r\n    head: tableHead,\r\n    body: tableBody,\r\n    startY: tableY + 5,\r\n    theme: \"grid\",\r\n    styles: { fontSize: 9 },\r\n    headStyles: {\r\n      fillColor: [10, 74, 138],\r\n      textColor: 255,\r\n      halign: \"center\",\r\n      fontStyle: \"bold\",\r\n    },\r\n    bodyStyles: { halign: \"center\" },\r\n    margin: { left: 15, right: 15 },\r\n  });\r\n\r\n  // TOTAL\r\n  const finalY = doc.lastAutoTable.finalY || tableY + 10;\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(11);\r\n  doc.setTextColor(gray);\r\n  doc.text(`Total: ${formatCurrency(order.totalOrden)}`, 195, finalY + 10, {\r\n    align: \"right\",\r\n  });\r\n\r\n  // SECCIN APROBACIONES\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  const approvalSectionY = pageHeight - 35;\r\n\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.text(\"Aprobaciones\", 105, approvalSectionY - 5, { align: \"center\" });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  const lineY = approvalSectionY + 10;\r\n  const leftXLine = 20;\r\n  const rightXLine = 135;\r\n\r\n  doc.text(\"_____________________________\", leftXLine, lineY);\r\n  doc.text(\"_____________________________\", rightXLine, lineY);\r\n  doc.text(\"Responsable de Aprobaci贸n\", leftXLine + 10, lineY + 6);\r\n  doc.text(\"Departamento de Compras\", rightXLine + 7, lineY + 6);\r\n\r\n  // DESCARGAR PDF\r\n  doc.save(`orden-compra-${order.numeroOrden}.pdf`);\r\n};\r\n\r\n\r\n  const [activeTab, setActiveTab] = useState('pending');\r\n\r\n  console.log('rdenes recibidas en PurchaseOrderPanel:', orders);\r\n  \r\n  const tabs = [\r\n    { id: 'pending', label: 'Pendientes', count: orders?.filter(o => o?.estado === 'pending')?.length },\r\n    { id: 'approved', label: 'Aprobadas', count: orders?.filter(o => o?.estado === 'approved')?.length },\r\n    { id: 'received', label: 'Recibidas', count: orders?.filter(o => o?.estado === 'received')?.length }\r\n  ];\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'text-warning bg-warning/10';\r\n      case 'approved': return 'text-primary bg-primary/10';\r\n      case 'received': return 'text-success bg-success/10';\r\n      case 'cancelled': return 'text-error bg-error/10';\r\n      default: return 'text-muted-foreground bg-muted';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'Pendiente';\r\n      case 'approved': return 'Aprobada';\r\n      case 'received': return 'Recibida';\r\n      case 'cancelled': return 'Cancelada';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n\r\n  const filteredOrders = orders?.filter(order => order?.estado === activeTab);\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Icon name=\"ShoppingCart\" size={20} className=\"text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">rdenes de Compra</h3>\r\n        </div>\r\n        \r\n        <Button\r\n          variant=\"default\"\r\n          onClick={onCreateOrder}\r\n          iconName=\"Plus\"\r\n          iconSize={16}\r\n        >\r\n          Nueva Orden\r\n        </Button>\r\n      </div>\r\n      {/* Tabs */}\r\n      <div className=\"flex border-b border-border\">\r\n        {tabs?.map((tab) => (\r\n          <button\r\n            key={tab?.id}\r\n            onClick={() => setActiveTab(tab?.id)}\r\n            className={`flex items-center space-x-2 px-6 py-3 text-sm font-medium border-b-2 transition-smooth ${\r\n              activeTab === tab?.id\r\n                ? 'border-primary text-primary bg-primary/5' :'border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50'\r\n            }`}\r\n          >\r\n            <span>{tab?.label}</span>\r\n            {tab?.count > 0 && (\r\n              <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\r\n                activeTab === tab?.id ? 'bg-primary text-primary-foreground' : 'bg-muted text-muted-foreground'\r\n              }`}>\r\n                {tab?.count}\r\n              </span>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      {/* Orders List */}\r\n      <div className=\"divide-y divide-border max-h-96 overflow-y-auto\">\r\n        {filteredOrders?.length === 0 ? (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"ShoppingCart\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n            <p className=\"text-muted-foreground\">No hay 贸rdenes {getStatusLabel(activeTab)?.toLowerCase()}</p>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={onCreateOrder}\r\n              iconName=\"Plus\"\r\n              iconSize={16}\r\n              className=\"mt-4\"\r\n            >\r\n              Crear Primera Orden\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          filteredOrders?.map((order) => (\r\n            <div key={order?.id} className=\"p-4 hover:bg-muted/50 transition-smooth\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center space-x-3 mb-2\">\r\n                    <h4 className=\"font-medium text-foreground\">{order?.numeroOrden}</h4>\r\n                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(order?.estado)}`}>\r\n                      {getStatusLabel(order?.estado)}\r\n                    </span>\r\n                    {order?.esUrgente && (\r\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-error/10 text-error\">\r\n                        <Icon name=\"AlertCircle\" size={12} className=\"mr-1\" />\r\n                        Urgente\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground mb-3\">\r\n                    <div>\r\n                      <span className=\"font-medium\">Proveedor:</span>\r\n                      <div className=\"text-foreground\">{order?.proveedor?.nombre}</div>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Fecha:</span>\r\n                      <div className=\"text-foreground\">{formatDate(order?.fechaOrden)}</div>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Total:</span>\r\n                      <div className=\"text-foreground font-medium\">{formatCurrency(order?.totalOrden)}</div>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Art铆culos:</span>\r\n                      <div className=\"text-foreground\">{order?.cantidadArticulos} art铆culos</div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {order?.expectedDelivery && (\r\n                    <div className=\"text-xs text-muted-foreground mb-3\">\r\n                      Entrega esperada: {formatDate(order?.expectedDelivery)}\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onViewOrder(order)}\r\n                      iconName=\"Eye\"\r\n                      iconSize={16}\r\n                    >\r\n                      Ver Detalles\r\n                    </Button>\r\n                    \r\n                    {order?.status === 'pending' && (\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => onApproveOrder(order)}\r\n                        iconName=\"Check\"\r\n                        iconSize={16}\r\n                      >\r\n                        Aprobar\r\n                      </Button>\r\n                    )}\r\n                    \r\n                    {order?.status === 'approved' && (\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => console.log('Track order:', order)}\r\n                        iconName=\"Truck\"\r\n                        iconSize={16}\r\n                      >\r\n                        Rastrear\r\n                      </Button>\r\n                    )}\r\n                    \r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onDownloadOrder(order)}\r\n                      iconName=\"Download\"\r\n                      iconSize={16}\r\n                    >\r\n                      Descargar\r\n                    </Button>\r\n\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleDeleteClick(order)}\r\n                      iconName=\"Trash2\"\r\n                      iconSize={16}\r\n                      className=\"text-error hover:text-error\"\r\n                    >\r\n                      Eliminar\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PurchaseOrderPanel;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst InventoryStats = ({ stats, items, onAddItem, onUpdateStock, onGenerateReport }) => {\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN',\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0\r\n    })?.format(amount);\r\n  };\r\n\r\n  const formatNumber = (number) => {\r\n    return new Intl.NumberFormat('es-MX')?.format(number);\r\n  };\r\n\r\n  const statCards = [\r\n    {\r\n      title: 'Total de Art铆culos',\r\n      value: formatNumber(stats?.totalItems),\r\n      change: stats?.itemsChange,\r\n      icon: 'Package',\r\n      color: 'text-primary',\r\n      bgColor: 'bg-primary/10'\r\n    },\r\n    {\r\n      title: 'Valor del Inventario',\r\n      value: formatCurrency(stats?.totalValue),\r\n      change: stats?.valueChange,\r\n      icon: 'DollarSign',\r\n      color: 'text-success',\r\n      bgColor: 'bg-success/10'\r\n    },\r\n    {\r\n      title: 'Stock Bajo',\r\n      value: formatNumber(stats?.lowStockItems),\r\n      change: stats?.lowStockChange,\r\n      icon: 'AlertTriangle',\r\n      color: 'text-warning',\r\n      bgColor: 'bg-warning/10'\r\n    },\r\n    {\r\n      title: 'Agotados',\r\n      value: formatNumber(stats?.outOfStockItems),\r\n      change: stats?.outOfStockChange,\r\n      icon: 'AlertCircle',\r\n      color: 'text-error',\r\n      bgColor: 'bg-error/10'\r\n    }\r\n  ];\r\n\r\n  const categoryStats = [\r\n    { name: 'Equipos HVAC', value: stats?.categories?.hvacEquipment, percentage: 35 },\r\n    { name: 'Refrigeraci贸n', value: stats?.categories?.refrigeration, percentage: 25 },\r\n    { name: 'El茅ctricos', value: stats?.categories?.electrical, percentage: 20 },\r\n    { name: 'Herramientas', value: stats?.categories?.tools, percentage: 12 },\r\n    { name: 'Otros', value: stats?.categories?.others, percentage: 8 }\r\n  ];\r\n\r\n  const getChangeColor = (change) => {\r\n    if (change > 0) return 'text-success';\r\n    if (change < 0) return 'text-error';\r\n    return 'text-muted-foreground';\r\n  };\r\n\r\n  const getChangeIcon = (change) => {\r\n    if (change > 0) return 'TrendingUp';\r\n    if (change < 0) return 'TrendingDown';\r\n    return 'Minus';\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Main Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        {statCards?.map((stat, index) => (\r\n          <div key={index} className=\"bg-card rounded-lg border border-border p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-sm font-medium text-muted-foreground mb-1\">{stat?.title}</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{stat?.value}</p>\r\n                {stat?.change !== undefined && (\r\n                  <div className={`flex items-center space-x-1 mt-2 ${getChangeColor(stat?.change)}`}>\r\n                    <Icon name={getChangeIcon(stat?.change)} size={16} />\r\n                    <span className=\"text-sm font-medium\">\r\n                      {Math.abs(stat?.change)}% vs mes anterior\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className={`w-12 h-12 rounded-lg flex items-center justify-center ${stat?.bgColor}`}>\r\n                <Icon name={stat?.icon} size={24} className={stat?.color} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {/* Category Distribution */}\r\n      {/* TODO: Habilitar m谩s adelante cuando se implemente completamente */}\r\n      {/* <div className=\"bg-card rounded-lg border border-border p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-6\">\r\n          <Icon name=\"PieChart\" size={20} className=\"text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Distribuci贸n por Categor铆a</h3>\r\n        </div>\r\n        \r\n        <div className=\"space-y-4\">\r\n          {categoryStats?.map((category, index) => (\r\n            <div key={index} className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-3 flex-1\">\r\n                <div className=\"w-3 h-3 rounded-full bg-primary\" style={{\r\n                  backgroundColor: `hsl(${index * 60}, 70%, 50%)`\r\n                }} />\r\n                <span className=\"text-sm font-medium text-foreground\">{category?.name}</span>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className=\"w-32 bg-muted rounded-full h-2\">\r\n                  <div \r\n                    className=\"h-2 rounded-full bg-primary\"\r\n                    style={{\r\n                      width: `${category?.percentage}%`,\r\n                      backgroundColor: `hsl(${index * 60}, 70%, 50%)`\r\n                    }}\r\n                  />\r\n                </div>\r\n                <span className=\"text-sm font-medium text-foreground w-16 text-right\">\r\n                  {formatNumber(category?.value)}\r\n                </span>\r\n                <span className=\"text-sm text-muted-foreground w-12 text-right\">\r\n                  {category?.percentage}%\r\n                </span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div> */}\r\n      \r\n      {/* Quick Actions */}\r\n      <div className=\"bg-card rounded-lg border border-border p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-6\">\r\n          <Icon name=\"Zap\" size={20} className=\"text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Acciones R谩pidas</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <Button\r\n            variant=\"default\"\r\n            onClick={onAddItem}\r\n            className=\"flex items-center space-x-3 p-4 bg-muted/50 rounded-lg w-full hover:bg-muted/80\"\r\n          >\r\n            <Icon name=\"Plus\" size={20} className=\"text-primary\" />\r\n            <div className=\"text-left\">\r\n              <div className=\"font-medium text-sm text-foreground\">Agregar Art铆culo</div>\r\n              <div className=\"text-xs text-muted-foreground\">Registrar nuevo producto</div>\r\n            </div>\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"default\"\r\n            onClick={() => {\r\n              const firstItem = items?.[0];\r\n              if (firstItem && onUpdateStock) {\r\n                onUpdateStock(firstItem);\r\n              }\r\n            }}\r\n            disabled={!items || items.length === 0}\r\n            className=\"flex items-center space-x-3 p-4 bg-muted/50 rounded-lg w-full hover:bg-muted/80\"\r\n          >\r\n            <Icon name=\"RefreshCw\" size={20} className=\"text-success\" />\r\n            <div className=\"text-left\">\r\n              <div className=\"font-medium text-sm text-foreground\">Actualizar Stock</div>\r\n              <div className=\"text-xs text-muted-foreground\">Ajustar inventario</div>\r\n            </div>\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"default\"\r\n            onClick={onGenerateReport}\r\n            disabled={!items || items.length === 0}\r\n            className=\"flex items-center space-x-3 p-4 bg-muted/50 rounded-lg w-full hover:bg-muted/80\"\r\n          >\r\n            <Icon name=\"FileText\" size={20} className=\"text-warning\" />\r\n            <div className=\"text-left\">\r\n              <div className=\"font-medium text-sm text-foreground\">Generar Reporte</div>\r\n              <div className=\"text-xs text-muted-foreground\">Exportar datos</div>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryStats;","// services/articuloService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst articuloService = {\r\n  async getArticulos() {\r\n    try {\r\n      const data = await httpService.get(\"/articulo/todos\");\r\n      return data;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener art铆culos:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getArticuloById(id) {\r\n    try {\r\n      const data = await httpService.get(`/articulo/buscar/${id}`);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al obtener el art铆culo con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createArticulo(payload) {\r\n    try {\r\n      const data = await httpService.post(\"/articulo/crear\", payload);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(\"Error al crear art铆culo:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateArticulo(id, payload) {\r\n    try {\r\n      const data = await httpService.put(\r\n        `/articulo/editar/${id}`,\r\n        payload\r\n      );\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al actualizar el art铆culo con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deleteArticulo(id) {\r\n    try {\r\n      const data = await httpService.delete(`/articulo/eliminar/${id}`);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al eliminar el art铆culo con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default articuloService;\r\n","// hooks/useInventory.js\r\nimport { useState, useCallback } from 'react';\r\nimport articuloService from '../services/articuloService';\r\n\r\nconst useInventory = () => {\r\n  const [articulos, setArticulos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Obtener todos los art铆culos\r\n  const getArticulos = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await articuloService.getArticulos();\r\n      \r\n      if (response.success) {\r\n        // Verificar si data es un array directamente\r\n        if (Array.isArray(response.data)) {\r\n\r\n          setArticulos(response.data);\r\n        } \r\n        // Verificar si data tiene una propiedad que contenga el array\r\n        else if (response.data && typeof response.data === 'object') {\r\n          // Buscar posibles propiedades que contengan el array\r\n          const possibleArrayKeys = ['datos', 'articulos', 'items', 'data', 'results', 'list'];\r\n          let foundArray = null;\r\n          \r\n          for (const key of possibleArrayKeys) {\r\n            if (response.data[key] && Array.isArray(response.data[key])) {\r\n              foundArray = response.data[key];\r\n\r\n              break;\r\n            }\r\n          }\r\n          \r\n          if (foundArray) {\r\n            setArticulos(foundArray);\r\n          } else {\r\n            console.log('No se encontr贸 array de art铆culos. Estructura de response.data:', Object.keys(response.data));\r\n            setArticulos([]);\r\n          }\r\n        } else {\r\n          console.log('response.data no es v谩lido:', response.data);\r\n          setArticulos([]);\r\n        }\r\n      } else {\r\n        console.log('Backend response.success es false:', response);\r\n        setArticulos([]);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useInventory.getArticulos:\", err);\r\n      setError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Obtener un art铆culo por ID\r\n  const getArticuloById = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await articuloService.getArticuloById(id);\r\n      if (response.success) {\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useInventory.getArticuloById:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Crear un nuevo art铆culo\r\n  const createArticulo = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await articuloService.createArticulo(payload);\r\n      if (response.success) {\r\n        // Agregar el nuevo art铆culo al estado local\r\n        setArticulos((prev) => [...prev, response.data]);\r\n        \r\n        // Tambi茅n recargar todos los art铆culos para asegurar sincronizaci贸n\r\n        setTimeout(async () => {\r\n          try {\r\n            await getArticulos();\r\n          } catch (error) {\r\n            console.error('Error recargando art铆culos despu茅s de crear:', error);\r\n          }\r\n        }, 100);\r\n        \r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useInventory.createArticulo:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Actualizar un art铆culo existente\r\n  const updateArticulo = async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await articuloService.updateArticulo(id, payload);\r\n      if (response.success) {\r\n        setArticulos((prev) =>\r\n          prev.map((a) => (a.id === id ? { ...a, ...response.data } : a))\r\n        );\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useInventory.updateArticulo:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Eliminar un art铆culo\r\n  const deleteArticulo = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await articuloService.deleteArticulo(id);\r\n      if (response.success) {\r\n        setArticulos((prev) => prev.filter((a) => a.id !== id));\r\n        return true;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useInventory.deleteArticulo:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    articulos,\r\n    loading,\r\n    error,\r\n    getArticulos,\r\n    getArticuloById,\r\n    createArticulo,\r\n    updateArticulo,\r\n    deleteArticulo,\r\n  };\r\n};\r\n\r\nexport default useInventory;\r\n","import React, { useState } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport Icon from '../../../components/AppIcon';\r\nimport useInventory from '../../../hooks/useInventory';\r\n\r\nconst NewItemModal = ({ isOpen, onClose, onAddItem }) => {\r\n  const { createArticulo, loading } = useInventory();\r\n  \r\n  const [formData, setFormData] = useState({\r\n    itemCode: '',\r\n    name: '',\r\n    description: '',\r\n    specifications: '',\r\n    category: '',\r\n    unit: 'pcs',\r\n    unitCost: '',\r\n    reorderPoint: '',\r\n    currentStock: '',\r\n    supplierName: '',\r\n    supplierContact: '',\r\n    notes: ''\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const categories = [\r\n    'Equipos HVAC',\r\n    'Refrigeraci贸n',\r\n    'Componentes El茅ctricos',\r\n    'Plomer铆a',\r\n    'Herramientas',\r\n    'Accesorios',\r\n    'Consumibles',\r\n    'Repuestos',\r\n    'Materiales de Instalaci贸n'\r\n  ];\r\n\r\n  const units = [\r\n    'pcs',\r\n    'kg',\r\n    'lt',\r\n    'm',\r\n    'ft',\r\n    'gal贸n',\r\n    'caja',\r\n    'rollo',\r\n    'juego'\r\n  ];\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n    // Clear error when user starts typing\r\n    if (errors?.[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData?.itemCode?.trim()) {\r\n      newErrors.itemCode = 'El c贸digo de art铆culo es requerido';\r\n    }\r\n    if (!formData?.name?.trim()) {\r\n      newErrors.name = 'El nombre del art铆culo es requerido';\r\n    }\r\n    if (!formData?.description?.trim()) {\r\n      newErrors.description = 'La descripci贸n es requerida';\r\n    }\r\n    if (!formData?.category) {\r\n      newErrors.category = 'La categor铆a es requerida';\r\n    }\r\n    if (!formData?.unitCost || parseFloat(formData?.unitCost) <= 0) {\r\n      newErrors.unitCost = 'El costo unitario debe ser mayor a 0';\r\n    }\r\n    if (!formData?.reorderPoint || parseInt(formData?.reorderPoint) < 0) {\r\n      newErrors.reorderPoint = 'El punto de reorden debe ser 0 o mayor';\r\n    }\r\n    if (!formData?.currentStock || parseInt(formData?.currentStock) < 0) {\r\n      newErrors.currentStock = 'El stock actual debe ser 0 o mayor';\r\n    }\r\n    if (!formData?.supplierName?.trim()) {\r\n      newErrors.supplierName = 'El nombre del proveedor es requerido';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      // Crear el payload seg煤n la estructura del backend\r\n      const payload = {\r\n        codigoArticulo: formData?.itemCode?.trim(),\r\n        nombre: formData?.name?.trim(),\r\n        descripcion: formData?.description?.trim(),\r\n        especificaciones: formData?.specifications?.trim() || '',\r\n        categoria: formData?.category,\r\n        unidad: formData?.unit,\r\n        costoUnitario: parseFloat(formData?.unitCost),\r\n        puntoReorden: parseInt(formData?.reorderPoint),\r\n        stockActual: parseInt(formData?.currentStock),\r\n        ubicacion: 'Almac茅n Principal', // Siempre ser谩 Almac茅n Principal\r\n        nombreProveedor: formData?.supplierName?.trim(),\r\n        contactoProveedor: formData?.supplierContact?.trim() || '',\r\n        notas: formData?.notes?.trim() || ''\r\n      };\r\n\r\n      // Llamar al servicio para crear el art铆culo\r\n      const nuevoArticulo = await createArticulo(payload);\r\n\r\n      // Transformar la respuesta del backend al formato esperado por el componente\r\n      const itemForTable = {\r\n        id: nuevoArticulo.id,\r\n        itemCode: nuevoArticulo.codigoArticulo,\r\n        name: nuevoArticulo.nombre || '',\r\n        description: nuevoArticulo.descripcion,\r\n        specifications: nuevoArticulo.especificaciones,\r\n        category: nuevoArticulo.categoria,\r\n        currentStock: nuevoArticulo.stockActual,\r\n        reservedStock: nuevoArticulo.stockReservado || 0,\r\n        reorderPoint: nuevoArticulo.puntoReorden,\r\n        unit: nuevoArticulo.unidad,\r\n        supplier: {\r\n          name: nuevoArticulo.proveedor?.nombre || nuevoArticulo.nombreProveedor,\r\n          contact: nuevoArticulo.proveedor?.contacto || nuevoArticulo.contactoProveedor\r\n        },\r\n        location: nuevoArticulo.ubicacion,\r\n        lastUpdated: new Date(nuevoArticulo.fechaActualizacion || nuevoArticulo.fechaCreacion),\r\n        unitCost: nuevoArticulo.costoUnitario,\r\n        notes: nuevoArticulo.notas\r\n      };\r\n\r\n      // Llamar a la funci贸n del componente padre para actualizar la tabla\r\n      if (onAddItem) {\r\n        await onAddItem(itemForTable);\r\n      }\r\n      \r\n      // Reset form and close modal\r\n      handleReset();\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error creating article:', error);\r\n      setErrors({ submit: 'Error al crear el art铆culo. Intente nuevamente.' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setFormData({\r\n      itemCode: '',\r\n      name: '',\r\n      description: '',\r\n      specifications: '',\r\n      category: '',\r\n      unit: 'pcs',\r\n      unitCost: '',\r\n      reorderPoint: '',\r\n      currentStock: '',\r\n      supplierName: '',\r\n      supplierContact: '',\r\n      notes: ''\r\n    });\r\n    setErrors({});\r\n  };\r\n\r\n  const handleClose = () => {\r\n    handleReset();\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-background rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col\">\r\n        {/* Modal Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border flex-shrink-0\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center\">\r\n              <Icon name=\"Package\" size={20} className=\"text-primary\" />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-foreground\">\r\n                Nuevo Art铆culo\r\n              </h2>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Agregar nuevo art铆culo al inventario\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"p-2 hover:bg-muted rounded-lg transition-colors\"\r\n            disabled={isSubmitting}\r\n          >\r\n            <Icon name=\"X\" size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Modal Body */}\r\n        <div className=\"p-6 overflow-y-auto flex-1 min-h-0\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            {/* Basic Information */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-medium text-foreground flex items-center\">\r\n                <Icon name=\"Info\" size={18} className=\"mr-2\" />\r\n                Informaci贸n B谩sica\r\n              </h3>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    C贸digo de Art铆culo *\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.itemCode}\r\n                    onChange={(e) => handleInputChange('itemCode', e?.target?.value)}\r\n                    placeholder=\"Ej: HVAC-001\"\r\n                    error={errors?.itemCode}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.itemCode && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.itemCode}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Nombre *\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.name}\r\n                    onChange={(e) => handleInputChange('name', e?.target?.value)}\r\n                    placeholder=\"Nombre del art铆culo\"\r\n                    error={errors?.name}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.name && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.name}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Categor铆a *\r\n                  </label>\r\n                  <select\r\n                    value={formData?.category}\r\n                    onChange={(e) => handleInputChange('category', e.target.value)}\r\n                    disabled={isSubmitting}\r\n                    className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                  >\r\n                    <option value=\"\">Seleccionar categor铆a</option>\r\n                    {categories?.map(cat => (\r\n                      <option key={cat} value={cat}>{cat}</option>\r\n                    ))}\r\n                  </select>\r\n                  {errors?.category && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.category}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Descripci贸n *\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.description}\r\n                    onChange={(e) => handleInputChange('description', e?.target?.value)}\r\n                    placeholder=\"Descripci贸n completa del art铆culo\"\r\n                    error={errors?.description}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.description && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.description}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Especificaciones\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.specifications}\r\n                    onChange={(e) => handleInputChange('specifications', e?.target?.value)}\r\n                    placeholder=\"Especificaciones t茅cnicas del art铆culo\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Stock and Cost Information */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-medium text-foreground flex items-center\">\r\n                <Icon name=\"BarChart\" size={18} className=\"mr-2\" />\r\n                Stock y Costos\r\n              </h3>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Stock Actual *\r\n                  </label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    value={formData?.currentStock}\r\n                    onChange={(e) => handleInputChange('currentStock', e?.target?.value)}\r\n                    placeholder=\"0\"\r\n                    error={errors?.currentStock}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.currentStock && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.currentStock}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Punto de Reorden *\r\n                  </label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    value={formData?.reorderPoint}\r\n                    onChange={(e) => handleInputChange('reorderPoint', e?.target?.value)}\r\n                    placeholder=\"0\"\r\n                    error={errors?.reorderPoint}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.reorderPoint && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.reorderPoint}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Unidad\r\n                  </label>\r\n                  <select\r\n                    value={formData?.unit}\r\n                    onChange={(e) => handleInputChange('unit', e.target.value)}\r\n                    disabled={isSubmitting}\r\n                    className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                  >\r\n                    {units?.map(unit => (\r\n                      <option key={unit} value={unit}>{unit}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Costo Unitario ($) *\r\n                  </label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    value={formData?.unitCost}\r\n                    onChange={(e) => handleInputChange('unitCost', e?.target?.value)}\r\n                    placeholder=\"0.00\"\r\n                    error={errors?.unitCost}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.unitCost && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.unitCost}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Ubicaci贸n\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value=\"Almac茅n Principal\"\r\n                    disabled={true}\r\n                    className=\"bg-muted cursor-not-allowed\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Supplier Information */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-medium text-foreground flex items-center\">\r\n                <Icon name=\"Building\" size={18} className=\"mr-2\" />\r\n                Informaci贸n del Proveedor\r\n              </h3>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Nombre del Proveedor *\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.supplierName}\r\n                    onChange={(e) => handleInputChange('supplierName', e?.target?.value)}\r\n                    placeholder=\"Nombre de la empresa proveedora\"\r\n                    error={errors?.supplierName}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.supplierName && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.supplierName}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Contacto del Proveedor\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.supplierContact}\r\n                    onChange={(e) => handleInputChange('supplierContact', e?.target?.value)}\r\n                    placeholder=\"Email, tel茅fono o contacto\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Notes */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-medium text-foreground flex items-center\">\r\n                <Icon name=\"FileText\" size={18} className=\"mr-2\" />\r\n                Notas Adicionales\r\n              </h3>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                  Observaciones\r\n                </label>\r\n                <textarea\r\n                  value={formData?.notes}\r\n                  onChange={(e) => handleInputChange('notes', e?.target?.value)}\r\n                  placeholder=\"Notas adicionales sobre el art铆culo...\"\r\n                  className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\r\n                  rows={3}\r\n                  disabled={isSubmitting}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Error Message */}\r\n            {errors?.submit && (\r\n              <div className=\"bg-destructive/10 border border-destructive/20 rounded-lg p-4\">\r\n                <div className=\"flex items-center\">\r\n                  <Icon name=\"AlertCircle\" size={16} className=\"text-destructive mr-2\" />\r\n                  <p className=\"text-sm text-destructive\">{errors?.submit}</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n\r\n        {/* Modal Footer */}\r\n        <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-border flex-shrink-0 bg-background\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={handleClose}\r\n            disabled={isSubmitting || loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            onClick={handleSubmit}\r\n            disabled={isSubmitting || loading}\r\n            iconName={(isSubmitting || loading) ? \"Loader\" : \"Plus\"}\r\n            iconSize={16}\r\n            className={(isSubmitting || loading) ? \"animate-spin\" : \"\"}\r\n          >\r\n            {(isSubmitting || loading) ? 'Creando Art铆culo...' : 'Crear Art铆culo'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewItemModal;","import React from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst ItemDetailsModal = ({ isOpen, onClose, item }) => {\r\n  if (!isOpen || !item) return null;\r\n\r\n  const getStockStatus = (current, reorderPoint) => {\r\n    if (current === 0) return { status: 'out-of-stock', label: 'Agotado', color: 'text-error', bgColor: 'bg-error/10' };\r\n    if (current <= reorderPoint) return { status: 'low-stock', label: 'Stock Bajo', color: 'text-warning', bgColor: 'bg-warning/10' };\r\n    return { status: 'in-stock', label: 'En Stock', color: 'text-success', bgColor: 'bg-success/10' };\r\n  };\r\n\r\n  const stockStatus = getStockStatus(item.currentStock, item.reorderPoint);\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    }).format(amount || 0);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Intl.DateTimeFormat('es-MX', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(new Date(date));\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4\">\r\n      <div className=\"bg-background rounded-lg shadow-xl w-full max-w-6xl max-h-[95vh] sm:max-h-[90vh] flex flex-col overflow-hidden\">\r\n        {/* Modal Header */}\r\n        <div className=\"flex items-center justify-between p-4 sm:p-6 border-b border-border flex-shrink-0\">\r\n          <div className=\"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1\">\r\n            <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n              <Icon name=\"Package\" size={16} className=\"text-primary sm:w-5 sm:h-5\" />\r\n            </div>\r\n            <div className=\"min-w-0 flex-1\">\r\n              <h2 className=\"text-lg sm:text-xl font-semibold text-foreground truncate\">Detalles del Art铆culo</h2>\r\n              <p className=\"text-xs sm:text-sm text-muted-foreground truncate\">{item.itemCode}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2 ml-2\">\r\n            <span className={`inline-flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium ${stockStatus.color} ${stockStatus.bgColor}`}>\r\n              <div className={`w-2 h-2 rounded-full ${\r\n                stockStatus.status === 'out-of-stock' ? 'bg-error' :\r\n                stockStatus.status === 'low-stock' ? 'bg-warning' : 'bg-success'\r\n              }`} />\r\n              <span>{stockStatus.label}</span>\r\n            </span>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={onClose}\r\n              iconName=\"X\"\r\n              iconSize={16}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modal Content */}\r\n        <div className=\"p-4 sm:p-6 overflow-y-auto flex-1 min-h-0\">\r\n          <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6\">\r\n            {/* Informaci贸n B谩sica */}\r\n            <div className=\"space-y-3 sm:space-y-4\">\r\n              <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n                <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                  <span>Informaci贸n B谩sica</span>\r\n                </h3>\r\n                \r\n                <div className=\"space-y-3\">\r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">C贸digo</label>\r\n                    <p className=\"font-mono text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                      {item.itemCode}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">Nombre</label>\r\n                    <p className=\"text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                      {item.name}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">Descripci贸n</label>\r\n                    <p className=\"text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                      {item.description}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">Especificaciones</label>\r\n                    <p className=\"text-sm text-foreground bg-background rounded px-2 py-2 min-h-[60px]\">\r\n                      {item.specifications}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">Categor铆a</label>\r\n                    <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-secondary/10 text-secondary\">\r\n                      {item.category}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">Ubicaci贸n</label>\r\n                    <p className=\"text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                      {item.location}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci贸n de Stock */}\r\n            <div className=\"space-y-3 sm:space-y-4\">\r\n              <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n                <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                  <Icon name=\"BarChart3\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                  <span>Stock e Inventario</span>\r\n                </h3>\r\n                \r\n                <div className=\"grid grid-cols-3 gap-2 sm:gap-4\">\r\n                  <div className=\"bg-background rounded-lg p-2 sm:p-3 text-center\">\r\n                    <div className=\"text-xl sm:text-2xl font-bold text-foreground\">{item.currentStock}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Stock Actual</div>\r\n                    <div className=\"text-xs text-muted-foreground\">{item.unit}</div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-background rounded-lg p-2 sm:p-3 text-center\">\r\n                    <div className=\"text-xl sm:text-2xl font-bold text-warning\">{item.reorderPoint}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Punto de Reorden</div>\r\n                    <div className=\"text-xs text-muted-foreground\">{item.unit}</div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-background rounded-lg p-2 sm:p-3 text-center\">\r\n                    <div className=\"text-base sm:text-lg font-bold text-primary break-all\">{formatCurrency(item.unitCost)}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Costo Unitario</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Valor Total */}\r\n                <div className=\"mt-3 bg-background rounded-lg p-3\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm font-medium text-foreground\">Valor Total en Stock:</span>\r\n                    <span className=\"text-lg font-bold text-primary\">\r\n                      {formatCurrency(item.unitCost * item.currentStock)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci贸n del Proveedor */}\r\n            <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                <Icon name=\"Truck\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                <span>Proveedor</span>\r\n              </h3>\r\n              \r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">Nombre</label>\r\n                  <p className=\"text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                    {item.supplier?.name}\r\n                  </p>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">Contacto</label>\r\n                  <p className=\"text-sm text-foreground bg-background rounded px-2 py-2\">\r\n                    {item.supplier?.contact}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci贸n Adicional */}\r\n            <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                <Icon name=\"FileText\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                <span>Informaci贸n Adicional</span>\r\n              </h3>\r\n              \r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">Notas</label>\r\n                  <p className=\"text-sm text-foreground bg-background rounded px-2 py-2 min-h-[60px]\">\r\n                    {item.notes || 'Sin notas adicionales'}\r\n                  </p>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">ltima Actualizaci贸n</label>\r\n                  <p className=\"text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                    {formatDate(item.lastUpdated)}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modal Footer */}\r\n        <div className=\"flex items-center justify-end space-x-3 p-4 sm:p-6 border-t border-border bg-background flex-shrink-0\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onClose}\r\n            className=\"w-full sm:w-auto\"\r\n          >\r\n            Cerrar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemDetailsModal;","import React, { useState, useEffect } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport Icon from '../../../components/AppIcon';\r\nimport useInventory from '../../../hooks/useInventory';\r\n\r\nconst EditItemModal = ({ isOpen, onClose, item, onUpdateSuccess }) => {\r\n  const { updateArticulo, loading } = useInventory();\r\n  \r\n  const [formData, setFormData] = useState({\r\n    itemCode: '',\r\n    name: '',\r\n    description: '',\r\n    specifications: '',\r\n    category: '',\r\n    unit: 'pcs',\r\n    unitCost: '',\r\n    reorderPoint: '',\r\n    currentStock: '',\r\n    location: 'Almac茅n Principal',\r\n    supplierName: '',\r\n    supplierContact: '',\r\n    notes: ''\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const categories = [\r\n    'Equipos HVAC',\r\n    'Refrigeraci贸n',\r\n    'Componentes El茅ctricos',\r\n    'Plomer铆a',\r\n    'Herramientas',\r\n    'Accesorios',\r\n    'Consumibles',\r\n    'Repuestos',\r\n    'Materiales de Instalaci贸n'\r\n  ];\r\n\r\n  const units = [\r\n    'pcs',\r\n    'kg',\r\n    'lt',\r\n    'm',\r\n    'ft',\r\n    'gal贸n',\r\n    'caja',\r\n    'rollo',\r\n    'juego'\r\n  ];\r\n\r\n  const locations = [\r\n    'Almac茅n Principal',\r\n    'Almac茅n Secundario',\r\n    'Taller',\r\n    'Oficina',\r\n    'Veh铆culo 1',\r\n    'Veh铆culo 2',\r\n    'Bodega Externa'\r\n  ];\r\n\r\n  // Cargar datos del item cuando se abre el modal\r\n  useEffect(() => {\r\n    if (isOpen && item) {\r\n      setFormData({\r\n        itemCode: String(item.itemCode || ''),\r\n        name: String(item.name || ''),\r\n        description: String(item.description || ''),\r\n        specifications: String(item.specifications || ''),\r\n        category: String(item.category || ''),\r\n        unit: String(item.unit || 'pcs'),\r\n        unitCost: item.unitCost !== undefined && item.unitCost !== null ? String(item.unitCost) : '',\r\n        reorderPoint: item.reorderPoint !== undefined && item.reorderPoint !== null ? String(item.reorderPoint) : '',\r\n        currentStock: item.currentStock !== undefined && item.currentStock !== null ? String(item.currentStock) : '',\r\n        location: String(item.location || 'Almac茅n Principal'),\r\n        supplierName: String(item.supplier?.name || ''),\r\n        supplierContact: String(item.supplier?.contact || ''),\r\n        notes: String(item.notes || '')\r\n      });\r\n      setErrors({});\r\n    }\r\n  }, [isOpen, item]);\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n    // Limpiar errores cuando el usuario escribe\r\n    if (errors?.[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData?.itemCode?.trim()) {\r\n      newErrors.itemCode = 'El c贸digo de art铆culo es requerido';\r\n    }\r\n    if (!formData?.name?.trim()) {\r\n      newErrors.name = 'El nombre del art铆culo es requerido';\r\n    }\r\n    if (!formData?.description?.trim()) {\r\n      newErrors.description = 'La descripci贸n es requerida';\r\n    }\r\n    if (!formData?.category) {\r\n      newErrors.category = 'La categor铆a es requerida';\r\n    }\r\n    if (!formData?.unitCost || parseFloat(formData?.unitCost) <= 0) {\r\n      newErrors.unitCost = 'El costo unitario debe ser mayor a 0';\r\n    }\r\n    if (!formData?.reorderPoint || parseInt(formData?.reorderPoint) < 0) {\r\n      newErrors.reorderPoint = 'El punto de reorden debe ser 0 o mayor';\r\n    }\r\n    if (!formData?.currentStock || parseInt(formData?.currentStock) < 0) {\r\n      newErrors.currentStock = 'El stock actual debe ser 0 o mayor';\r\n    }\r\n    if (!formData?.supplierName?.trim()) {\r\n      newErrors.supplierName = 'El nombre del proveedor es requerido';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      const payload = {\r\n        codigoArticulo: formData?.itemCode?.trim(),\r\n        nombre: formData?.name?.trim(),\r\n        descripcion: formData?.description?.trim(),\r\n        especificaciones: formData?.specifications?.trim() || '',\r\n        categoria: formData?.category,\r\n        unidad: formData?.unit,\r\n        costoUnitario: parseFloat(formData?.unitCost),\r\n        puntoReorden: parseInt(formData?.reorderPoint),\r\n        stockActual: parseInt(formData?.currentStock),\r\n        ubicacion: formData?.location,\r\n        nombreProveedor: formData?.supplierName?.trim(),\r\n        contactoProveedor: formData?.supplierContact?.trim() || '',\r\n        notas: formData?.notes?.trim() || ''\r\n      };\r\n\r\n      await updateArticulo(item.id, payload);\r\n      \r\n      if (onUpdateSuccess) {\r\n        onUpdateSuccess();\r\n      }\r\n      \r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error updating article:', error);\r\n      setErrors({ submit: 'Error al actualizar el art铆culo. Intente nuevamente.' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      itemCode: '',\r\n      name: '',\r\n      description: '',\r\n      specifications: '',\r\n      category: '',\r\n      unit: 'pcs',\r\n      unitCost: '',\r\n      reorderPoint: '',\r\n      currentStock: '',\r\n      location: 'Almac茅n Principal',\r\n      supplierName: '',\r\n      supplierContact: '',\r\n      notes: ''\r\n    });\r\n    setErrors({});\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4\">\r\n      <div className=\"bg-background rounded-lg shadow-xl w-full max-w-6xl max-h-[95vh] sm:max-h-[90vh] flex flex-col overflow-hidden\">\r\n        {/* Modal Header */}\r\n        <div className=\"flex items-center justify-between p-4 sm:p-6 border-b border-border flex-shrink-0\">\r\n          <div className=\"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1\">\r\n            <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n              <Icon name=\"Edit\" size={16} className=\"text-primary sm:w-5 sm:h-5\" />\r\n            </div>\r\n            <div className=\"min-w-0 flex-1\">\r\n              <h2 className=\"text-lg sm:text-xl font-semibold text-foreground\">Actualizar Art铆culo</h2>\r\n              <p className=\"text-xs sm:text-sm text-muted-foreground hidden sm:block\">Modificar informaci贸n del art铆culo</p>\r\n            </div>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={handleClose}\r\n            iconName=\"X\"\r\n            iconSize={16}\r\n          />\r\n        </div>\r\n\r\n        {/* Modal Content */}\r\n        <div className=\"flex-1 min-h-0 overflow-y-auto\">\r\n          <form onSubmit={handleSubmit} className=\"p-4 sm:p-6\">\r\n          <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6\">\r\n            {/* Informaci贸n B谩sica */}\r\n            <div className=\"space-y-3 sm:space-y-4\">\r\n              <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n                <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                  <span>Informaci贸n B谩sica</span>\r\n                </h3>\r\n                \r\n                <div className=\"space-y-4\">\r\n                  <Input\r\n                    label=\"C贸digo del Art铆culo\"\r\n                    value={formData.itemCode}\r\n                    onChange={(e) => handleInputChange('itemCode', e.target.value)}\r\n                    error={errors.itemCode}\r\n                    placeholder=\"Ej: HVAC-001\"\r\n                    disabled={isSubmitting || loading}\r\n                  />\r\n\r\n                  <Input\r\n                    label=\"Nombre\"\r\n                    value={formData.name}\r\n                    onChange={(e) => handleInputChange('name', e.target.value)}\r\n                    error={errors.name}\r\n                    placeholder=\"Nombre del art铆culo\"\r\n                    disabled={isSubmitting || loading}\r\n                  />\r\n                  \r\n                  <Input\r\n                    label=\"Descripci贸n\"\r\n                    value={formData.description}\r\n                    onChange={(e) => handleInputChange('description', e.target.value)}\r\n                    error={errors.description}\r\n                    placeholder=\"Descripci贸n del art铆culo\"\r\n                    disabled={isSubmitting || loading}\r\n                  />\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                      Especificaciones\r\n                    </label>\r\n                    <textarea\r\n                      value={formData.specifications || ''}\r\n                      onChange={(e) => handleInputChange('specifications', e.target.value)}\r\n                      placeholder=\"Especificaciones t茅cnicas detalladas...\"\r\n                      className=\"w-full min-h-[80px] px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-y\"\r\n                      disabled={isSubmitting || loading}\r\n                    />\r\n                    {errors.specifications && (\r\n                      <p className=\"text-error text-xs mt-1\">{errors.specifications}</p>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                      Categor铆a {errors.category && <span className=\"text-error\">*</span>}\r\n                    </label>\r\n                    <select\r\n                      value={formData.category || ''}\r\n                      onChange={(e) => handleInputChange('category', e.target.value)}\r\n                      disabled={isSubmitting || loading}\r\n                      className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                    >\r\n                      <option value=\"\">Seleccionar categor铆a</option>\r\n                      {categories.map(category => (\r\n                        <option key={category} value={category}>{category}</option>\r\n                      ))}\r\n                    </select>\r\n                    {errors.category && (\r\n                      <p className=\"text-error text-xs mt-1\">{errors.category}</p>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                      Ubicaci贸n\r\n                    </label>\r\n                    <select\r\n                      value={formData.location || 'Almac茅n Principal'}\r\n                      onChange={(e) => handleInputChange('location', e.target.value)}\r\n                      disabled={isSubmitting || loading}\r\n                      className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                    >\r\n                      {locations.map(location => (\r\n                        <option key={location} value={location}>{location}</option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Stock e Inventario */}\r\n            <div className=\"space-y-3 sm:space-y-4\">\r\n              <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n                <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                  <Icon name=\"BarChart3\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                  <span>Stock e Inventario</span>\r\n                </h3>\r\n                \r\n                <div className=\"space-y-3 sm:space-y-4\">\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\r\n                    <Input\r\n                      label=\"Stock Actual\"\r\n                      type=\"number\"\r\n                      value={formData.currentStock}\r\n                      onChange={(e) => handleInputChange('currentStock', e.target.value)}\r\n                      error={errors.currentStock}\r\n                      placeholder=\"0\"\r\n                      min=\"0\"\r\n                      disabled={isSubmitting || loading}\r\n                    />\r\n                    \r\n                    <Input\r\n                      label=\"Punto de Reorden\"\r\n                      type=\"number\"\r\n                      value={formData.reorderPoint}\r\n                      onChange={(e) => handleInputChange('reorderPoint', e.target.value)}\r\n                      error={errors.reorderPoint}\r\n                      placeholder=\"0\"\r\n                      min=\"0\"\r\n                      disabled={isSubmitting || loading}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                        Unidad\r\n                      </label>\r\n                      <select\r\n                        value={formData.unit || 'pcs'}\r\n                        onChange={(e) => handleInputChange('unit', e.target.value)}\r\n                        disabled={isSubmitting || loading}\r\n                        className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                      >\r\n                        {units.map(unit => (\r\n                          <option key={unit} value={unit}>{unit}</option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                    \r\n                    <Input\r\n                      label=\"Costo Unitario\"\r\n                      type=\"number\"\r\n                      value={formData.unitCost}\r\n                      onChange={(e) => handleInputChange('unitCost', e.target.value)}\r\n                      error={errors.unitCost}\r\n                      placeholder=\"0.00\"\r\n                      min=\"0\"\r\n                      step=\"0.01\"\r\n                      disabled={isSubmitting || loading}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci贸n del Proveedor */}\r\n            <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                <Icon name=\"Truck\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                <span>Proveedor</span>\r\n              </h3>\r\n              \r\n              <div className=\"space-y-4\">\r\n                <Input\r\n                  label=\"Nombre del Proveedor\"\r\n                  value={formData.supplierName}\r\n                  onChange={(e) => handleInputChange('supplierName', e.target.value)}\r\n                  error={errors.supplierName}\r\n                  placeholder=\"Nombre de la empresa proveedora\"\r\n                  disabled={isSubmitting || loading}\r\n                />\r\n                \r\n                <Input\r\n                  label=\"Contacto del Proveedor\"\r\n                  value={formData.supplierContact}\r\n                  onChange={(e) => handleInputChange('supplierContact', e.target.value)}\r\n                  error={errors.supplierContact}\r\n                  placeholder=\"Email, tel茅fono o persona de contacto\"\r\n                  disabled={isSubmitting || loading}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Notas Adicionales */}\r\n            <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                <Icon name=\"FileText\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                <span>Notas Adicionales</span>\r\n              </h3>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                  Notas y Observaciones\r\n                </label>\r\n                <textarea\r\n                  value={formData.notes || ''}\r\n                  onChange={(e) => handleInputChange('notes', e.target.value)}\r\n                  placeholder=\"Notas adicionales, instrucciones de uso, compatibilidad, etc...\"\r\n                  className=\"w-full min-h-[80px] px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-y\"\r\n                  disabled={isSubmitting || loading}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n            {/* Error Message */}\r\n            {errors.submit && (\r\n              <div className=\"mt-4 p-3 bg-error/10 border border-error/20 rounded-md\">\r\n                <p className=\"text-error text-sm\">{errors.submit}</p>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n\r\n        {/* Modal Footer */}\r\n        <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center justify-end space-y-2 sm:space-y-0 sm:space-x-3 p-4 sm:p-6 border-t border-border bg-background flex-shrink-0\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={handleClose}\r\n            disabled={isSubmitting || loading}\r\n            className=\"w-full sm:w-auto order-2 sm:order-1\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            onClick={handleSubmit}\r\n            disabled={isSubmitting || loading}\r\n            iconName={(isSubmitting || loading) ? \"Loader\" : \"Save\"}\r\n            iconSize={16}\r\n            className={`w-full sm:w-auto order-1 sm:order-2 ${(isSubmitting || loading) ? \"animate-spin\" : \"\"}`}\r\n          >\r\n            {(isSubmitting || loading) ? 'Actualizando...' : 'Guardar Cambios'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditItemModal;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst CreatePOModal = ({ \r\n  isOpen, \r\n  onClose, \r\n  onSubmit, \r\n  initialItem = null, \r\n  lowStockItems = [] \r\n}) => {\r\n  const [step, setStep] = useState(1);\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [orderDetails, setOrderDetails] = useState({\r\n    supplier: '',\r\n    notes: '',\r\n    urgent: false,\r\n    reference: '',\r\n    paymentTerms: 'net30',\r\n    priority: 'normal'\r\n  });\r\n\r\n  const paymentTermsOptions = [\r\n    { value: 'immediate', label: 'Inmediato' },\r\n    { value: 'net15', label: '15 d铆as' },\r\n    { value: 'net30', label: '30 d铆as' },\r\n    { value: 'net60', label: '60 d铆as' },\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: 'baja', label: 'Baja' },\r\n    { value: 'normal', label: 'Normal' },\r\n    { value: 'alta', label: 'Alta' },\r\n    { value: 'urgente', label: 'Urgente' },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (initialItem) {\r\n      // Si recibimos un item inicial, a帽adirlo a la lista de seleccionados\r\n      const orderQty = initialItem.reorderPoint - initialItem.currentStock + 5;\r\n      \r\n      // Limpiar selecci贸n previa si venimos de una alerta espec铆fica\r\n      if (initialItem.itemCode) {\r\n        setSelectedItems([{\r\n          id: initialItem.id,\r\n          itemCode: initialItem.itemCode,\r\n          name: initialItem.name || '',\r\n          description: initialItem.description,\r\n          supplier: initialItem.supplier?.name,\r\n          currentStock: initialItem.currentStock,\r\n          reorderPoint: initialItem.reorderPoint,\r\n          unit: initialItem.unit,\r\n          unitCost: initialItem.unitCost || 0,\r\n          orderQty: orderQty > 0 ? orderQty : 5,\r\n          subtotal: (initialItem.unitCost || 0) * (orderQty > 0 ? orderQty : 5)\r\n        }]);\r\n        \r\n        setOrderDetails({\r\n          ...orderDetails,\r\n          supplier: initialItem.supplier?.name\r\n        });\r\n        \r\n        // Si venimos de una alerta espec铆fica, avanzamos directamente al paso 2\r\n        setStep(2);\r\n      }\r\n    } else {\r\n      // Si no hay item inicial, resetear al paso 1\r\n      setStep(1);\r\n      setSelectedItems([]);\r\n    }\r\n  }, [initialItem]);\r\n\r\n  const handleNextStep = () => {\r\n    setStep(step + 1);\r\n  };\r\n\r\n  const handlePreviousStep = () => {\r\n    setStep(step - 1);\r\n  };\r\n\r\n  const handleItemSelectionChange = (item, isSelected) => {\r\n    if (isSelected) {\r\n      // Verificar si el art铆culo ya est谩 en la lista\r\n      if (selectedItems.some(selected => selected.id === item.id)) {\r\n        return; // Evitar a帽adir duplicados\r\n      }\r\n      \r\n      // Calcular la cantidad recomendada\r\n      const orderQty = item.reorderPoint - item.currentStock + 5;\r\n      \r\n      setSelectedItems([...selectedItems, {\r\n        id: item.id,\r\n        itemCode: item.itemCode,\r\n        name: item.name || '',\r\n        description: item.description,\r\n        supplier: item.supplier?.name,\r\n        currentStock: item.currentStock,\r\n        reorderPoint: item.reorderPoint,\r\n        unit: item.unit,\r\n        unitCost: item.unitCost || 0,\r\n        orderQty: orderQty > 0 ? orderQty : 5,\r\n        subtotal: (item.unitCost || 0) * (orderQty > 0 ? orderQty : 5)\r\n      }]);\r\n    } else {\r\n      setSelectedItems(selectedItems.filter(selected => selected.id !== item.id));\r\n    }\r\n  };\r\n\r\n  const handleQuantityChange = (id, newQty) => {\r\n    setSelectedItems(selectedItems.map(item => {\r\n      if (item.id === id) {\r\n        const qty = Math.max(1, parseInt(newQty) || 1);\r\n        return {\r\n          ...item,\r\n          orderQty: qty,\r\n          subtotal: item.unitCost * qty\r\n        };\r\n      }\r\n      return item;\r\n    }));\r\n  };\r\n\r\n  const handlePriceChange = (id, newPrice) => {\r\n    setSelectedItems(selectedItems.map(item => {\r\n      if (item.id === id) {\r\n        const price = Math.max(0, parseFloat(newPrice) || 0);\r\n        return {\r\n          ...item,\r\n          unitCost: price,\r\n          subtotal: price * item.orderQty\r\n        };\r\n      }\r\n      return item;\r\n    }));\r\n  };\r\n\r\n  const handleDetailChange = (field, value) => {\r\n    setOrderDetails({\r\n      ...orderDetails,\r\n      [field]: value\r\n    });\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    return selectedItems.reduce((total, item) => total + item.subtotal, 0);\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    }).format(amount);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    // Crear la estructura de la orden\r\n    const orderData = {\r\n      supplier: orderDetails.supplier,\r\n      notes: orderDetails.notes,\r\n      urgent: orderDetails.urgent,\r\n      reference: orderDetails.reference,\r\n      paymentTerms: orderDetails.paymentTerms,\r\n      priority: orderDetails.priority,\r\n      items: selectedItems,\r\n      total: calculateTotal(),\r\n      status: 'pending',\r\n      orderDate: new Date(),\r\n      orderNumber: `PO-${Date.now().toString().slice(-6)}`,\r\n      itemCount: selectedItems.length\r\n    };\r\n    \r\n    onSubmit(orderData);\r\n  };\r\n\r\n  // Limpiar estado cuando el modal se cierra\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      // Esperamos un poco para resetear el estado para que no se vea el cambio durante la animaci贸n de cierre\r\n      const timer = setTimeout(() => {\r\n        if (!initialItem) {\r\n          setSelectedItems([]);\r\n          setOrderDetails({\r\n            supplier: '',\r\n            notes: '',\r\n            urgent: false,\r\n            reference: '',\r\n            paymentTerms: 'net30',\r\n            priority: 'normal'\r\n          });\r\n        }\r\n      }, 300);\r\n      \r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isOpen]);\r\n  \r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n      <div className=\"flex min-h-full items-center justify-center p-4 text-center\">\r\n        <div className=\"fixed inset-0 bg-black/50 transition-opacity\" onClick={onClose}></div>\r\n        \r\n        <div className=\"w-full max-w-3xl transform overflow-hidden rounded-lg bg-card text-left align-middle shadow-xl transition-all\">\r\n          <div className=\"bg-muted px-6 py-4 flex items-center justify-between border-b border-border\">\r\n            <h3 className=\"text-lg font-medium text-foreground\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Icon name=\"ShoppingCart\" size={18} className=\"text-primary\" />\r\n                <span>Crear Orden de Compra</span>\r\n              </div>\r\n            </h3>\r\n            \r\n            <button \r\n              onClick={onClose}\r\n              className=\"rounded-md bg-transparent text-muted-foreground hover:text-foreground\"\r\n            >\r\n              <Icon name=\"X\" size={18} />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"px-6 py-4\">\r\n            {/* Progress Steps */}\r\n            <div className=\"flex items-center mb-6 w-full\">\r\n              <div className={`flex-1 h-1 ${step >= 1 ? 'bg-primary' : 'bg-muted'}`}></div>\r\n              <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\r\n                step >= 1 ? 'bg-primary text-primary-foreground' : 'bg-muted text-muted-foreground'\r\n              } mx-1`}>\r\n                1\r\n              </div>\r\n              <div className={`flex-1 h-1 ${step >= 2 ? 'bg-primary' : 'bg-muted'}`}></div>\r\n              <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\r\n                step >= 2 ? 'bg-primary text-primary-foreground' : 'bg-muted text-muted-foreground'\r\n              } mx-1`}>\r\n                2\r\n              </div>\r\n              <div className={`flex-1 h-1 ${step >= 3 ? 'bg-primary' : 'bg-muted'}`}></div>\r\n              <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\r\n                step >= 3 ? 'bg-primary text-primary-foreground' : 'bg-muted text-muted-foreground'\r\n              } mx-1`}>\r\n                3\r\n              </div>\r\n              <div className={`flex-1 h-1 ${step >= 3 ? 'bg-primary' : 'bg-muted'}`}></div>\r\n            </div>\r\n\r\n            {step === 1 && (\r\n              <>\r\n                <h4 className=\"text-md font-medium mb-4\">Selecciona los art铆culos para ordenar</h4>\r\n                <div className=\"max-h-96 overflow-y-auto border border-border rounded-md mb-4\">\r\n                  <table className=\"w-full\">\r\n                    <thead className=\"bg-muted border-b border-border\">\r\n                      <tr>\r\n                        <th className=\"p-2 text-left w-12\">\r\n                          <input \r\n                            type=\"checkbox\" \r\n                            className=\"rounded border-border\"\r\n                            onChange={(e) => {\r\n                              if (e.target.checked) {\r\n                                // Crear un mapa de IDs ya seleccionados para buscar duplicados m谩s r谩pido\r\n                                const selectedIds = new Set(selectedItems.map(item => item.id));\r\n                                \r\n                                // Seleccionar todos los art铆culos que no est茅n ya seleccionados\r\n                                const itemsToAdd = lowStockItems\r\n                                  .filter(item => !selectedIds.has(item.id))\r\n                                  .map(item => {\r\n                                    const orderQty = item.reorderPoint - item.currentStock + 5;\r\n                                    return {\r\n                                      id: item.id,\r\n                                      itemCode: item.itemCode,\r\n                                      name: item.name || '',\r\n                                      description: item.description,\r\n                                      supplier: item.supplier?.name,\r\n                                      currentStock: item.currentStock,\r\n                                      reorderPoint: item.reorderPoint,\r\n                                      unit: item.unit,\r\n                                      unitCost: item.unitCost || 0,\r\n                                      orderQty: orderQty > 0 ? orderQty : 5,\r\n                                      subtotal: (item.unitCost || 0) * (orderQty > 0 ? orderQty : 5)\r\n                                    };\r\n                                  });\r\n                                \r\n                                if (itemsToAdd.length > 0) {\r\n                                  setSelectedItems([...selectedItems, ...itemsToAdd]);\r\n                                }\r\n                              } else {\r\n                                setSelectedItems([]);\r\n                              }\r\n                            }}\r\n                            checked={selectedItems.length === lowStockItems.length && lowStockItems.length > 0}\r\n                          />\r\n                        </th>\r\n                        <th className=\"p-2 text-left\">C贸digo</th>\r\n                        <th className=\"p-2 text-left\">Nombre</th>\r\n                        <th className=\"p-2 text-left\">Descripci贸n</th>\r\n                        <th className=\"p-2 text-left\">Stock</th>\r\n                        <th className=\"p-2 text-left\">Proveedor</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {lowStockItems.length === 0 ? (\r\n                        <tr>\r\n                          <td colSpan=\"5\" className=\"p-4 text-center text-muted-foreground\">\r\n                            No hay art铆culos con stock bajo disponibles\r\n                          </td>\r\n                        </tr>\r\n                      ) : (\r\n                        lowStockItems.map((item) => (\r\n                          <tr key={item.id} className=\"border-b border-border hover:bg-muted/50 transition-smooth\">\r\n                            <td className=\"p-2\">\r\n                              <input \r\n                                type=\"checkbox\" \r\n                                className=\"rounded border-border\"\r\n                                checked={selectedItems.some(selectedItem => selectedItem.id === item.id)} \r\n                                onChange={(e) => handleItemSelectionChange(item, e.target.checked)}\r\n                              />\r\n                            </td>\r\n                            <td className=\"p-2 font-mono text-sm\">{item.itemCode}</td>\r\n                            <td className=\"p-2\">{item.name}</td>\r\n                            <td className=\"p-2\">{item.description}</td>\r\n                            <td className=\"p-2\">\r\n                              <span className={\r\n                                item.currentStock === 0 ? \"text-error\" : \r\n                                item.currentStock <= item.reorderPoint ? \"text-warning\" : \"\"\r\n                              }>\r\n                                {item.currentStock} / {item.reorderPoint} {item.unit}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"p-2\">{item.supplier?.name}</td>\r\n                          </tr>\r\n                        ))\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n\r\n                {selectedItems.length > 0 && (\r\n                  <div className=\"text-sm text-muted-foreground mb-4\">\r\n                    {selectedItems.length} art铆culo(s) seleccionado(s)\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {step === 2 && (\r\n              <>\r\n                <h4 className=\"text-md font-medium mb-4\">Detalles de los art铆culos</h4>\r\n                <div className=\"max-h-96 overflow-y-auto border border-border rounded-md mb-4\">\r\n                  <table className=\"w-full\">\r\n                    <thead className=\"bg-muted border-b border-border\">\r\n                      <tr>\r\n                        <th className=\"p-2 text-left\">C贸digo</th>\r\n                        <th className=\"p-2 text-left\">Nombre</th>\r\n                        <th className=\"p-2 text-left\">Descripci贸n</th>\r\n                        <th className=\"p-2 text-left\">Precio</th>\r\n                        <th className=\"p-2 text-left\">Cantidad</th>\r\n                        <th className=\"p-2 text-left\">Subtotal</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {selectedItems.map((item) => (\r\n                        <tr key={item.id} className=\"border-b border-border hover:bg-muted/50 transition-smooth\">\r\n                          <td className=\"p-2 font-mono text-sm\">{item.itemCode}</td>\r\n                          <td className=\"p-2\">{item.name}</td>\r\n                          <td className=\"p-2\">{item.description}</td>\r\n                          <td className=\"p-2\">\r\n                            <div className=\"flex items-center\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                min=\"0\"\r\n                                step=\"0.01\"\r\n                                value={item.unitCost}\r\n                                onChange={(e) => handlePriceChange(item.id, e.target.value)}\r\n                                className=\"w-24 text-right\"\r\n                                placeholder=\"0.00\"\r\n                              />\r\n                              <span className=\"ml-1 text-xs text-muted-foreground\">MXN</span>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"p-2\">\r\n                            <div className=\"flex items-center\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                value={item.orderQty}\r\n                                onChange={(e) => handleQuantityChange(item.id, e.target.value)}\r\n                                className=\"w-20\"\r\n                              />\r\n                              <span className=\"ml-1\">{item.unit}</span>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"p-2 font-medium\">\r\n                            {formatCurrency(item.subtotal)}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                \r\n                <div className=\"flex justify-end mb-4\">\r\n                  <div className=\"bg-muted p-3 rounded-md\">\r\n                    <div className=\"text-sm text-muted-foreground mb-1\">\r\n                      Total de la orden:\r\n                    </div>\r\n                    <div className=\"text-xl font-bold text-foreground\">\r\n                      {formatCurrency(calculateTotal())}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {step === 3 && (\r\n              <>\r\n                <h4 className=\"text-md font-medium mb-4\">Informaci贸n de la orden</h4>\r\n                \r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Proveedor *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      placeholder=\"Nombre del proveedor\"\r\n                      value={orderDetails.supplier}\r\n                      onChange={(e) => handleDetailChange('supplier', e.target.value)}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Prioridad\r\n                    </label>\r\n                    <select\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      value={orderDetails.priority}\r\n                      onChange={(e) => handleDetailChange('priority', e.target.value)}\r\n                    >\r\n                      {priorityOptions.map(option => (\r\n                        <option key={option.value} value={option.value}>\r\n                          {option.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Referencia / No. de orden\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      placeholder=\"N煤mero de referencia\"\r\n                      value={orderDetails.reference}\r\n                      onChange={(e) => handleDetailChange('reference', e.target.value)}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      T茅rminos de pago\r\n                    </label>\r\n                    <select\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      value={orderDetails.paymentTerms}\r\n                      onChange={(e) => handleDetailChange('paymentTerms', e.target.value)}\r\n                    >\r\n                      {paymentTermsOptions.map(option => (\r\n                        <option key={option.value} value={option.value}>\r\n                          {option.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"mb-4\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Notas\r\n                  </label>\r\n                  <textarea\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                    rows=\"3\"\r\n                    placeholder=\"Instrucciones o comentarios adicionales\"\r\n                    value={orderDetails.notes}\r\n                    onChange={(e) => handleDetailChange('notes', e.target.value)}\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"mb-4\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      className=\"rounded border-border mr-2\"\r\n                      checked={orderDetails.urgent}\r\n                      onChange={(e) => handleDetailChange('urgent', e.target.checked)}\r\n                    />\r\n                    <span className=\"text-sm font-medium\">Marcar como urgente</span>\r\n                  </label>\r\n                </div>\r\n                \r\n                <div className=\"bg-muted p-4 rounded-md mb-4\">\r\n                  <h5 className=\"font-medium mb-2\">Resumen</h5>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                    <div className=\"text-sm\">\r\n                      <span className=\"text-muted-foreground\">Art铆culos:</span> {selectedItems.length}\r\n                    </div>\r\n                    <div className=\"text-sm\">\r\n                      <span className=\"text-muted-foreground\">Proveedor:</span> {orderDetails.supplier || 'No especificado'}\r\n                    </div>\r\n                    <div className=\"text-sm\">\r\n                      <span className=\"text-muted-foreground\">Prioridad:</span> {priorityOptions.find(p => p.value === orderDetails.priority)?.label || 'Normal'}\r\n                    </div>\r\n                    <div className=\"text-sm\">\r\n                      <span className=\"text-muted-foreground\">Total:</span> {formatCurrency(calculateTotal())}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"bg-muted px-6 py-4 flex justify-between border-t border-border\">\r\n            {step > 1 ? (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handlePreviousStep}\r\n                iconName=\"ArrowLeft\"\r\n                iconSize={16}\r\n              >\r\n                Anterior\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={onClose}\r\n              >\r\n                Cancelar\r\n              </Button>\r\n            )}\r\n            \r\n            {step < 3 ? (\r\n              <Button\r\n                variant=\"default\"\r\n                onClick={handleNextStep}\r\n                iconName=\"ArrowRight\"\r\n                iconSize={16}\r\n                disabled={step === 1 && selectedItems.length === 0}\r\n              >\r\n                Siguiente\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                variant=\"default\"\r\n                onClick={handleSubmit}\r\n                iconName=\"Check\"\r\n                iconSize={16}\r\n                disabled={!orderDetails.supplier}\r\n              >\r\n                Crear Orden\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreatePOModal;","import httpService from \"./httpService\";\r\n\r\nconst TIMEOUT = 10000; // 10 segundos\r\n\r\nconst requisiService = {\r\n  async getRequisitions(filters = {}) {\r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => controller.abort(), TIMEOUT);\r\n\r\n    try {\r\n      const query = new URLSearchParams(filters).toString();\r\n      const url = query ? `/requisiciones?${query}` : \"/requisiciones\";\r\n\r\n      const response = await httpService.get(url, {\r\n        signal: controller.signal,\r\n        headers: {\r\n          'Cache-Control': 'no-cache',\r\n          'Pragma': 'no-cache'\r\n        }\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      // Si la respuesta tiene una estructura similar a getOrdenes\r\n      // Loguear la respuesta para depuraci贸n\r\n      console.log('Respuesta del servidor (requisiciones):', response);\r\n\r\n      if (response?.data?.items && Array.isArray(response.data.items)) {\r\n        return {\r\n          success: true,\r\n          data: response.data.items.map(item => ({\r\n            id: item.id,\r\n            numeroOrdenTrabajo: item.numeroOrdenTrabajo || item.orderNumber,\r\n            nombreProyecto: item.nombreProyecto || item.projectName,\r\n            solicitadoPor: item.solicitadoPor || item.requestedBy,\r\n            fechaSolicitud: item.fechaSolicitud || item.requestDate,\r\n            estado: item.estado || item.status,\r\n            prioridad: item.prioridad || item.priority,\r\n            descripcionSolicitud: item.descripcionSolicitud || item.description,\r\n            materiales: item.materiales || item.items || [],\r\n            materialesManuales: item.materialesManuales || item.manualItems || [], //  AGREGAR ESTO\r\n            justificacionSolicitud: item.justificacionSolicitud || item.justification,\r\n            notasAdicionales: item.notasAdicionales || item.notes\r\n          })),\r\n          message: `Se encontraron ${response.data.items.length} requisici贸n(es)`\r\n        };\r\n      }\r\n\r\n      // Si la respuesta es un array directo\r\n      if (Array.isArray(response?.data)) {\r\n        return {\r\n          success: true,\r\n          data: response.data.map(item => ({\r\n            id: item.id,\r\n            numeroOrdenTrabajo: item.numeroOrdenTrabajo || item.orderNumber,\r\n            nombreProyecto: item.nombreProyecto || item.projectName,\r\n            solicitadoPor: item.solicitadoPor || item.requestedBy,\r\n            fechaSolicitud: item.fechaSolicitud || item.requestDate,\r\n            estado: item.estado || item.status,\r\n            prioridad: item.prioridad || item.priority,\r\n            descripcionSolicitud: item.descripcionSolicitud || item.description,\r\n            materiales: item.materiales || item.items || [],\r\n            materialesManuales: item.materialesManuales || item.manualItems || [], //  AGREGAR ESTO\r\n            justificacionSolicitud: item.justificacionSolicitud || item.justification,\r\n            notasAdicionales: item.notasAdicionales || item.notes\r\n          })),\r\n          message: `Se encontraron ${response.data.length} requisici贸n(es)`\r\n        };\r\n      }\r\n\r\n      // Si no hay datos v谩lidos\r\n      return {\r\n        success: true,\r\n        data: [],\r\n        message: 'No se encontraron requisiciones'\r\n      };\r\n\r\n    } catch (error) {\r\n      clearTimeout(timeoutId);\r\n      \r\n      // Si la petici贸n fue cancelada, retornamos un resultado vac铆o v谩lido\r\n      if (error.name === 'CanceledError' || error.message === 'canceled') {\r\n        return {\r\n          success: true,\r\n          data: [],\r\n          message: 'La b煤squeda de requisiciones fue cancelada'\r\n        };\r\n      }\r\n\r\n      console.error(\"Error al obtener requisiciones:\", error);\r\n      return {\r\n        success: true,\r\n        data: [],\r\n        message: 'Error al cargar requisiciones'\r\n      };\r\n    }\r\n  },\r\n\r\n  async createRequisition(payload) {\r\n    try {\r\n      const response = await httpService.post(\"/requisiciones/crear\", payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al crear requisici贸n:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateRequisition(id, payload) {\r\n    try {\r\n      const response = await httpService.put(`/requisiciones/${id}`, payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al actualizar requisici贸n:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deleteRequisition(id) {\r\n    try {\r\n      const response = await httpService.delete(`/requisiciones/${id}`);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al eliminar requisici贸n:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getRequisitionById(id) {\r\n    try {\r\n      const response = await httpService.get(`/requisiciones/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener requisici贸n por ID:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\nexport default requisiService;\r\n","import { useState } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport requisiService from \"../services/requisiService\";\r\n\r\nconst useRequisi = () => {\r\n  const { showHttpError, showOperationSuccess } = useNotifications();\r\n  const [requisitions, setRequisitions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getRequisitions = async (filters = {}) => {\r\n    if (loading) return []; // Evitar m煤ltiples llamadas simult谩neas\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const response = await requisiService.getRequisitions(filters);\r\n      \r\n      // Siempre deber铆a ser un objeto con {success, data, message}\r\n      if (response?.success) {\r\n        const requisitionData = Array.isArray(response.data) ? response.data : [];\r\n        setRequisitions(requisitionData);\r\n        return requisitionData;\r\n      } else {\r\n        console.warn('Respuesta inesperada de requisiciones:', response);\r\n        setRequisitions([]);\r\n        return [];\r\n      }\r\n    } catch (err) {\r\n      console.error('Error en getRequisitions:', err);\r\n      setError(err);\r\n      \r\n      // No mostrar error si la petici贸n fue cancelada\r\n      if (err.message !== 'canceled' && !err.isNetworkError) {\r\n        showHttpError(\"Error al cargar requisiciones\");\r\n      }\r\n      \r\n      setRequisitions([]);\r\n      return [];\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createRequisition = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await requisiService.createRequisition(payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Requisici贸n creada\");\r\n        setRequisitions((prev) => [...prev, response.data]); //  Agregamos sin recargar todo\r\n        return response.data;\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al crear requisici贸n\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo crear la requisici贸n\");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateRequisition = async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await requisiService.updateRequisition(id, payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Requisici贸n actualizada\");\r\n        //  Usar la data de la respuesta del backend, no el payload\r\n        const updatedRequisition = response.data || { ...payload, id };\r\n        setRequisitions(prev => prev.map(r => r.id === id ? updatedRequisition : r));\r\n        return updatedRequisition;\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al actualizar requisici贸n\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo actualizar la requisici贸n\");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\nconst deleteRequisition = async (id) => {\r\n  setLoading(true);\r\n  setError(null);\r\n  try {\r\n    const response = await requisiService.deleteRequisition(id);\r\n    if (response.success) {\r\n      showOperationSuccess(response.message || \"Requisici贸n eliminada\");\r\n      setRequisitions(prev => prev.filter(r => r.id !== id));\r\n      return true;\r\n    } else {\r\n      showHttpError(response.message || \"No se pudo eliminar\");\r\n      return false;\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    showHttpError(\"Error al eliminar la requisici贸n\");\r\n    setError(err);\r\n    return false;\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n  const getRequisitionById = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await requisiService.getRequisitionById(id);\r\n      setLoading(false);\r\n      return data;\r\n    } catch (err) {\r\n      console.error('Error en getRequisitionById:', err);\r\n      setError(err);\r\n      showHttpError(\"Error al cargar la requisici贸n\");\r\n      setLoading(false);\r\n      return null;\r\n    }\r\n  };\r\n\r\n\r\n\r\n  return { requisitions, loading, error, getRequisitions, createRequisition, updateRequisition, deleteRequisition, getRequisitionById };\r\n};\r\n\r\nexport default useRequisi;\r\n","import httpService from \"./httpService\";\r\n\r\nconst operacService = {\r\n  // Ahora acepta filtros din谩micos\r\n  async getWorkOrders(filters = {}) {\r\n    try {\r\n      const query = new URLSearchParams(filters).toString();\r\n      const url = query ? `/trabajos?${query}` : \"/trabajos\";\r\n\r\n      const response = await httpService.get(url);\r\n      return response; // { success, data, message }\r\n    } catch (error) {\r\n      console.error(\"Error al obtener trabajos:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createWorkOrder(payload) {\r\n    try {\r\n      const response = await httpService.post(\"/trabajos/crear\", payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al crear trabajo:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateWorkOrder(id, payload) {\r\n    try {\r\n      const response = await httpService.put(`/trabajos/${id}`, payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al actualizar trabajo:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deleteWorkOrder(id) {\r\n    try {\r\n      const response = await httpService.delete(`/trabajos/${id}`);\r\n      return response; // { success, data, message }\r\n    } catch (error) {\r\n      console.error(\"Error al eliminar trabajo:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default operacService;\r\n","import { useState } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport operacService from \"../services/operacService\";\r\n\r\nconst useOperac = () => {\r\n  const { showHttpError, showOperationSuccess } = useNotifications();\r\n  const [oportunities, setOportunities] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getOportunities = async (filters = {}) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await operacService.getWorkOrders(filters);\r\n      const data = response.success && Array.isArray(response.data) ? response.data : [];\r\n      setOportunities(data);\r\n      return data;\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err);\r\n      showHttpError(\"Error al cargar 贸rdenes\");\r\n      return [];\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createWorkOrder = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await operacService.createWorkOrder(payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Orden creada \");\r\n        const newOrders = await getOportunities(); // Actualiza estado global\r\n        const savedOrder = newOrders.find(o => o.id === response.data.id) || response.data;\r\n        return savedOrder;\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al crear orden\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo crear la orden \");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateWorkOrder = async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await operacService.updateWorkOrder(id, payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Orden actualizada \");\r\n        // Actualiza localmente sin recargar\r\n        setOportunities(prev => prev.map(o => o.id === id ? { ...o, ...payload } : o));\r\n        return { ...payload, id };\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al actualizar orden\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo actualizar la orden \");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const deleteWorkOrder = async (id) => {\r\n  setLoading(true);\r\n  setError(null);\r\n  try {\r\n    const response = await operacService.deleteWorkOrder(id);\r\n    if (response.success) {\r\n      showOperationSuccess(response.message || \"Orden eliminada \");\r\n      setOportunities(prev => prev.filter(o => o.id !== id));\r\n      return true;\r\n    } else {\r\n      showHttpError(response.message || \"Error al eliminar la orden\");\r\n      return false;\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    showHttpError(\"No se pudo eliminar la orden \");\r\n    setError(err);\r\n    return false;\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  return { oportunities, loading, error, getOportunities, createWorkOrder, updateWorkOrder, deleteWorkOrder, };\r\n};\r\n\r\nexport default useOperac;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Icon from \"../../../components/AppIcon\";\r\nimport Button from \"../../../components/ui/Button\";\r\nimport Input from \"../../../components/ui/Input\";\r\nimport Select from \"../../../components/ui/Select\";\r\nimport useRequisi from \"../../../hooks/useRequisi\";\r\nimport useOperac from \"../../../hooks/useOperac\";\r\nimport useInventory from \"../../../hooks/useInventory\";\r\n\r\nconst RequisitionModal = ({ isOpen, onClose, requisition, onSave }) => {\r\n  const { createRequisition, updateRequisition } = useRequisi();\r\n  const { oportunities, getOportunities } = useOperac();\r\n  const { articulos, getArticulos } = useInventory();\r\n\r\n  const [formData, setFormData] = useState({\r\n    requestNumber: '',\r\n    orderNumber: '',\r\n    projectName: '',\r\n    requestedBy: '',\r\n    requestDate: '',\r\n    status: 'Pendiente',\r\n    priority: 'Media',\r\n    description: '',\r\n    items: [],\r\n    manualItems: [],\r\n    justification: \"\",\r\n    notes: \"\",\r\n  });\r\n\r\n  const [newItem, setNewItem] = useState({\r\n    idArticulo: \"\",\r\n    codigoArticulo: \"\",\r\n    name: \"\",\r\n    quantity: \"\",\r\n    unit: \"unidades\",\r\n    description: \"\",\r\n    urgency: \"Normal\",\r\n  });\r\n\r\n  const [newManualItem, setNewManualItem] = useState({\r\n    name: \"\",\r\n    quantity: \"\",\r\n    unit: \"unidades\",\r\n    description: \"\",\r\n    urgency: \"Normal\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (requisition) {\r\n      setFormData({\r\n        requestNumber: requisition?.requestNumber || \"\",\r\n        orderNumber: requisition?.orderNumber || \"\",\r\n        projectName: requisition?.projectName || \"\",\r\n        requestedBy: requisition?.requestedBy === \"Usuario Actual\" ? \"\" : requisition?.requestedBy || \"\",\r\n        requestDate:\r\n          requisition?.requestDate || new Date().toISOString().split(\"T\")[0],\r\n        status: requisition?.status || \"Pendiente\",\r\n        priority: requisition?.priority || \"Media\",\r\n        description: requisition?.description || \"\",\r\n        items: requisition?.items || [],\r\n        manualItems: requisition?.manualItems || [],\r\n        justification: requisition?.justification || \"\",\r\n        notes: requisition?.notes || \"\",\r\n      });\r\n    } else {\r\n      // Reset form for new requisition\r\n      const currentDate = new Date()?.toISOString()?.split('T')?.[0];\r\n      setFormData({\r\n        requestNumber: `REQ-${Date.now()}`,\r\n        orderNumber: \"\",\r\n        projectName: \"\",\r\n        requestedBy: \"\",\r\n        requestDate: currentDate,\r\n        status: 'Pendiente',\r\n        priority: 'Media',\r\n        description: '',\r\n        items: [],\r\n        manualItems: [],\r\n        justification: \"\",\r\n        notes: \"\",\r\n      });\r\n    }\r\n  }, [requisition, isOpen]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      getOportunities();\r\n      getArticulos();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const priorityOptions = [\r\n    { value: 'Cr铆tica', label: 'Cr铆tica' },\r\n    { value: 'Alta', label: 'Alta' },\r\n    { value: 'Media', label: 'Media' },\r\n    { value: 'Baja', label: 'Baja' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'Aprobada', label: 'Aprobada' },\r\n    { value: 'Rechazada', label: 'Rechazada' },\r\n    { value: 'En Proceso', label: 'En Proceso' },\r\n    { value: 'Completada', label: 'Completada' }\r\n  ];\r\n\r\n  const unitOptions = [\r\n    { value: 'unidades', label: 'Unidades' },\r\n    { value: 'metros', label: 'Metros' },\r\n    { value: 'litros', label: 'Litros' },\r\n    { value: 'kilogramos', label: 'Kilogramos' },\r\n    { value: 'cajas', label: 'Cajas' },\r\n    { value: 'paquetes', label: 'Paquetes' },\r\n    { value: 'cilindros', label: 'Cilindros' },\r\n    { value: 'rollos', label: 'Rollos' }\r\n  ];\r\n\r\n  const urgencyOptions = [\r\n    { value: 'Urgente', label: 'Urgente' },\r\n    { value: 'Normal', label: 'Normal' },\r\n    { value: 'Baja', label: 'Baja' }\r\n  ];\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleNewItemChange = (field, value) => {\r\n    setNewItem((prev) => ({\r\n      ...prev,\r\n      [field]: value,\r\n    }));\r\n  };\r\n\r\n  const handleNewManualItemChange = (field, value) => {\r\n    setNewManualItem((prev) => ({\r\n      ...prev,\r\n      [field]: value,\r\n    }));\r\n  };\r\n\r\n  const handleAddItem = () => {\r\n    if (newItem?.name && newItem?.quantity) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        items: [...prev.items, { ...newItem, id: Date.now() }],\r\n      }));\r\n      setNewItem({\r\n        idArticulo: \"\",\r\n        codigoArticulo: \"\",\r\n        name: \"\",\r\n        quantity: \"\",\r\n        unit: \"unidades\",\r\n        description: \"\",\r\n        urgency: \"Normal\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleAddManualItem = () => {\r\n    if (newManualItem?.name && newManualItem?.quantity) {\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        manualItems: [...prev.manualItems, { ...newManualItem, id: Date.now() }],\r\n      }));\r\n      setNewManualItem({\r\n        name: \"\",\r\n        quantity: \"\",\r\n        unit: \"unidades\",\r\n        description: \"\",\r\n        urgency: \"Normal\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRemoveItem = (itemId, type) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [type]: prev[type].filter((item) => item.id !== itemId),\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n  try {\r\n    // Formatear fecha a dd/MM/yyyy\r\n    const fecha = new Date(formData.requestDate);\r\n    const formattedDate = `${fecha.getDate().toString().padStart(2, \"0\")}/${(fecha.getMonth() + 1)\r\n      .toString()\r\n      .padStart(2, \"0\")}/${fecha.getFullYear()}`;\r\n\r\n    // Construir materiales de inventario\r\n    const materiales = formData.items.map((item) => ({\r\n      id: item.idArticulo || undefined, // para que el backend lo identifique como referencia\r\n      codigoArticulo: item.codigoArticulo || \"\",\r\n      nombreMaterial: item.name || \"\",\r\n      cantidad: Number(item.quantity) || 0,\r\n      unidad:\r\n        item.unit?.charAt(0).toUpperCase() + item.unit?.slice(1).toLowerCase() || \"Unidades\",\r\n      urgencia: item.urgency || \"Normal\",\r\n      descripcionEspecificaciones: item.description || \"\",\r\n    }));\r\n\r\n    // Construir materiales manuales\r\n    const materialesManuales = formData.manualItems.map((item) => ({\r\n      nombreMaterial: item.name || \"\",\r\n      cantidad: Number(item.quantity) || 0,\r\n      unidad:\r\n        item.unit?.charAt(0).toUpperCase() + item.unit?.slice(1).toLowerCase() || \"Unidades\",\r\n      urgencia: item.urgency || \"Normal\",\r\n      descripcionEspecificaciones: item.description || \"\",\r\n    }));\r\n\r\n    // Payload final\r\n    const payload = {\r\n      numeroOrdenTrabajo: formData.orderNumber,\r\n      nombreProyecto: formData.projectName,\r\n      solicitadoPor: formData.requestedBy,\r\n      fechaSolicitud: formattedDate,\r\n      prioridad: formData.priority,\r\n      estado: formData.status,\r\n      descripcionSolicitud: formData.description,\r\n      materiales, // <-- inventario\r\n      materialesManuales, // <-- manuales\r\n      justificacionSolicitud: formData.justification || \"\",\r\n      notasAdicionales: formData.notes || \"\",\r\n      proyectoNombre: formData.projectName,\r\n    };\r\n\r\n    // Enviar\r\n    let response;\r\n    if (requisition?.id) {\r\n      response = await updateRequisition(requisition.id, payload);\r\n    } else {\r\n      response = await createRequisition(payload);\r\n    }\r\n\r\n    if (response) {\r\n      onSave(response);\r\n      onClose();\r\n    }\r\n  } catch (error) {\r\n    console.error(\" Error al guardar la requisici贸n:\", error);\r\n  }\r\n};\r\n\r\n\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card rounded-lg border border-border w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">\r\n              {requisition?.id ? 'Editar Requisici贸n' : 'Nueva Requisici贸n de Material'}\r\n            </h2>\r\n            {formData?.requestNumber && (\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                {formData?.requestNumber}\r\n              </p>\r\n            )}\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n          >\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Informaci贸n b谩sica */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <Select\r\n  label=\"N煤mero de Orden de Trabajo\"\r\n  options={\r\n    oportunities?.map((op) => ({\r\n      label: op.ordenTrabajo,\r\n      value: op.ordenTrabajo,\r\n    })) || []\r\n  }\r\n  value={formData?.orderNumber}\r\n  onChange={(value) => {\r\n    handleInputChange(\"orderNumber\", value);\r\n\r\n    // Buscar la oportunidad seleccionada\r\n    const selected = oportunities.find((op) => op.ordenTrabajo === value);\r\n    if (selected) {\r\n      // Llenar autom谩ticamente el nombre del proyecto\r\n      handleInputChange(\"projectName\", selected.proyectoNombre || \"\");\r\n    }\r\n  }}\r\n  required\r\n/>\r\n\r\n\r\n            <Input\r\n  label=\"Nombre del Proyecto\"\r\n  placeholder=\"Nombre del proyecto\"\r\n  value={formData?.projectName}\r\n  readOnly\r\n  className=\"bg-gray-100 cursor-not-allowed\"\r\n  required\r\n/>\r\n\r\n            <Input\r\n  label=\"Solicitado por\"\r\n  placeholder=\"Usuario Actual\"\r\n  value={formData?.requestedBy}\r\n  onChange={(e) => handleInputChange(\"requestedBy\", e?.target?.value)}\r\n  required\r\n/>\r\n\r\n            <Input\r\n              label=\"Fecha de Solicitud\"\r\n              type=\"date\"\r\n              value={formData?.requestDate}\r\n              onChange={(e) => handleInputChange(\"requestDate\", e?.target?.value)}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={formData?.priority}\r\n              onChange={(value) => handleInputChange(\"priority\", value)}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Estado\"\r\n              options={statusOptions}\r\n              value={formData?.status}\r\n              onChange={(value) => handleInputChange(\"status\", value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Descripci贸n */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Descripci贸n de la Solicitud\r\n            </label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground\"\r\n              rows={3}\r\n              placeholder=\"Describe el prop贸sito de esta requisici贸n...\"\r\n              value={formData?.description}\r\n              onChange={(e) => handleInputChange(\"description\", e?.target?.value)}\r\n            />\r\n          </div>\r\n\r\n          {/* Material por Inventario */}\r\n          <div className=\"bg-muted/30 rounded-lg p-4\">\r\n            <h4 className=\"text-sm font-medium text-foreground mb-3\">\r\n              Agregar Material por Inventario\r\n            </h4>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-3\">\r\n              <Select\r\n                label=\"Materiales\"\r\n                options={\r\n                  articulos?.map((art) => ({\r\n                    label: art.nombre,\r\n                    value: art.id,\r\n                  })) || []\r\n                }\r\n                value={newItem?.idArticulo}\r\n                onChange={(value) => {\r\n                  const selected = articulos.find((a) => a.id === value);\r\n                  handleNewItemChange(\"idArticulo\", value);\r\n                  handleNewItemChange(\"codigoArticulo\", selected?.codigoArticulo || \"\");\r\n                  handleNewItemChange(\"name\", selected?.nombre || \"\");\r\n                  handleNewItemChange(\"unit\", selected?.unidad || \"unidades\");\r\n                }}\r\n              />\r\n\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <Input\r\n  label=\"Cantidad\"\r\n  type=\"number\"\r\n  placeholder=\"1\"\r\n  value={newItem?.quantity}\r\n  onChange={(e) => {\r\n    const value = Number(e?.target?.value);\r\n    if (value > 0) handleNewItemChange(\"quantity\", value);\r\n  }}\r\n/>\r\n                <Select\r\n                  label=\"Unidad\"\r\n                  options={unitOptions}\r\n                  value={newItem?.unit}\r\n                  onChange={(value) => handleNewItemChange('unit', value)}\r\n                />\r\n              </div>\r\n\r\n              <Select\r\n                label=\"Urgencia\"\r\n                options={urgencyOptions}\r\n                value={newItem?.urgency}\r\n                onChange={(value) => handleNewItemChange('urgency', value)}\r\n              />\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Descripci贸n/Especificaciones\"\r\n              placeholder=\"Especificaciones t茅cnicas...\"\r\n              value={newItem?.description}\r\n              onChange={(e) =>\r\n                handleNewItemChange(\"description\", e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={handleAddItem}\r\n              iconName=\"Plus\"\r\n              iconSize={16}\r\n              disabled={!newItem?.name || !newItem?.quantity}\r\n              className=\"mt-3\"\r\n            >\r\n              Agregar Material\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Material Manual */}\r\n          <div className=\"bg-muted/30 rounded-lg p-4 mt-6\">\r\n            <h4 className=\"text-sm font-medium text-foreground mb-3\">\r\n              Agregar Material Manualmente\r\n            </h4>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-3\">\r\n              <Input\r\n                label=\"Nombre del Material\"\r\n                placeholder=\"Ej. Tornillos, Pintura, etc.\"\r\n                value={newManualItem?.name}\r\n                onChange={(e) =>\r\n                  handleNewManualItemChange(\"name\", e?.target?.value)\r\n                }\r\n              />\r\n\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <Input\r\n  label=\"Cantidad\"\r\n  type=\"number\"\r\n  placeholder=\"1\"\r\n  value={newManualItem?.quantity}\r\n  onChange={(e) => {\r\n    const value = Number(e?.target?.value);\r\n    if (value > 0) handleNewManualItemChange(\"quantity\", value);\r\n  }}\r\n/>\r\n                <Select\r\n                  label=\"Unidad\"\r\n                  options={unitOptions}\r\n                  value={newManualItem?.unit}\r\n                  onChange={(value) =>\r\n                    handleNewManualItemChange(\"unit\", value)\r\n                  }\r\n                />\r\n              </div>\r\n\r\n              <Select\r\n                label=\"Urgencia\"\r\n                options={urgencyOptions}\r\n                value={newManualItem?.urgency}\r\n                onChange={(value) =>\r\n                  handleNewManualItemChange(\"urgency\", value)\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Descripci贸n/Especificaciones\"\r\n              placeholder=\"Detalles o especificaciones...\"\r\n              value={newManualItem?.description}\r\n              onChange={(e) =>\r\n                handleNewManualItemChange(\"description\", e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={handleAddManualItem}\r\n              iconName=\"Plus\"\r\n              iconSize={16}\r\n              disabled={!newManualItem?.name || !newManualItem?.quantity}\r\n              className=\"mt-3\"\r\n            >\r\n              Agregar Material\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Lista de materiales */}\r\n          {(formData.items.length > 0 || formData.manualItems.length > 0) && (\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-foreground mb-3\">Materiales Solicitados</h4>\r\n              <div className=\"space-y-2\">\r\n                {[...formData.items, ...formData.manualItems].map((item) => (\r\n                  <div\r\n                    key={item.id}\r\n                    className=\"border border-border rounded-lg p-3\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-2 mb-1\">\r\n                          <h5 className=\"text-sm font-medium text-foreground\">\r\n                            {item?.nombreMaterial || item?.name}\r\n                          </h5>\r\n                          <span\r\n                            className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                              item?.urgency === \"Urgente\"\r\n                                ? \"bg-red-100 text-red-800\"\r\n                                : item?.urgency === \"Normal\"\r\n                                ? \"bg-blue-100 text-blue-800\"\r\n                                : \"bg-gray-100 text-gray-800\"\r\n                            }`}\r\n                          >\r\n                            {item?.urgency}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                          Cantidad: {item?.quantity} {item?.unit}\r\n                        </p>\r\n                        {item?.description && (\r\n                          <p className=\"text-xs text-muted-foreground mt-1\">{item?.description}</p>\r\n                        )}\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() =>\r\n                          handleRemoveItem(\r\n                            item.id,\r\n                            formData.items.some((i) => i.id === item.id)\r\n                              ? \"items\"\r\n                              : \"manualItems\"\r\n                          )\r\n                        }\r\n                        iconName=\"Trash2\"\r\n                        iconSize={14}\r\n                      >\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Justification */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Justificaci贸n de la Solicitud\r\n            </label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground\"\r\n              rows={3}\r\n              placeholder=\"Justifica por qu茅 son necesarios estos materiales...\"\r\n              value={formData?.justification}\r\n              onChange={(e) => handleInputChange('justification', e?.target?.value)}\r\n            />\r\n          </div>\r\n\r\n          {/* Notes */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Notas Adicionales\r\n            </label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground\"\r\n              rows={2}\r\n              placeholder=\"Notas adicionales...\"\r\n              value={formData?.notes}\r\n              onChange={(e) => handleInputChange('notes', e?.target?.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-border\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onClose}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n  type=\"button\"\r\n  onClick={handleSave}\r\n  className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n  disabled={!formData?.projectName}\r\n>\r\n  {requisition?.id ? \"Guardar Cambios\" : \"Crear Requisici贸n\"}\r\n</Button>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RequisitionModal;","// hooks/useOrder.js\r\nimport { useState, useCallback } from 'react';\r\nimport ordenCompraService from '../services/ordenCompraService';\r\n\r\nconst useOrder = () => {\r\n  const [ordenes, setOrdenes] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Obtener todas las 贸rdenes de compra\r\n  const getOrdenes = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.getOrdenes();\r\n      console.log('Respuesta de getOrdenes:', response);\r\n      \r\n      if (response.success) {\r\n        // Verificar si data es un array directamente\r\n        if (Array.isArray(response.data)) {\r\n          console.log('Data es un array:', response.data);\r\n          setOrdenes(response.data);\r\n        } \r\n        // Verificar si data tiene una propiedad que contenga el array\r\n        else if (response.data && typeof response.data === 'object') {\r\n          console.log('Data es un objeto:', response.data);\r\n          // Buscar posibles propiedades que contengan el array\r\n          const possibleArrayKeys = ['datos', 'ordenes', 'items', 'data', 'results', 'list'];\r\n          let foundArray = null;\r\n          \r\n          for (const key of possibleArrayKeys) {\r\n            if (response.data[key] && Array.isArray(response.data[key])) {\r\n              console.log(`Encontrado array en propiedad ${key}:`, response.data[key]);\r\n              foundArray = response.data[key];\r\n              break;\r\n            }\r\n          }\r\n          \r\n          if (foundArray) {\r\n            setOrdenes(foundArray);\r\n          } else {\r\n            console.log('No se encontr贸 ning煤n array en las propiedades conocidas');\r\n            setOrdenes([]);\r\n          }\r\n        } else {\r\n          console.log('response.data no es v谩lido:', response.data);\r\n          setOrdenes([]);\r\n        }\r\n      } else {\r\n        console.log('Backend response.success es false');\r\n        setOrdenes([]);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.getOrdenes:\", err);\r\n      setError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Obtener una orden por ID\r\n  const getOrdenById = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.getOrdenById(id);\r\n      if (response.success) {\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.getOrdenById:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Obtener una orden por n煤mero\r\n  const getOrdenByNumero = async (numeroOrden) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.getOrdenByNumero(numeroOrden);\r\n      if (response.success) {\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.getOrdenByNumero:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Crear una nueva orden\r\n  const createOrden = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.createOrden(payload);\r\n      if (response.success) {\r\n        // Agregar la nueva orden al estado local\r\n        setOrdenes((prev) => [...prev, response.data]);\r\n        \r\n        // Tambi茅n recargar todas las 贸rdenes para asegurar sincronizaci贸n\r\n        setTimeout(async () => {\r\n          try {\r\n            await getOrdenes();\r\n          } catch (error) {\r\n            console.error('Error recargando 贸rdenes despu茅s de crear:', error);\r\n          }\r\n        }, 100);\r\n        \r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.createOrden:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Actualizar una orden existente\r\n  const updateOrden = async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.updateOrden(id, payload);\r\n      if (response.success) {\r\n        setOrdenes((prev) =>\r\n          prev.map((o) => (o.id === id ? { ...o, ...response.data } : o))\r\n        );\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.updateOrden:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Eliminar una orden (soft delete)\r\n  const deleteOrden = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.deleteOrden(id);\r\n      if (response.success) {\r\n        setOrdenes((prev) => prev.filter((o) => o.id !== id));\r\n        return true;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.deleteOrden:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Eliminar una orden permanentemente\r\n  const hardDeleteOrden = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.hardDeleteOrden(id);\r\n      if (response.success) {\r\n        setOrdenes((prev) => prev.filter((o) => o.id !== id));\r\n        return true;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.hardDeleteOrden:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Obtener 贸rdenes eliminadas\r\n  const getOrdenesEliminadas = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.getOrdenesEliminadas();\r\n      if (response.success) {\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.getOrdenesEliminadas:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Restaurar una orden eliminada\r\n  const restaurarOrden = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.restaurarOrden(id);\r\n      if (response.success) {\r\n        // Recargar las 贸rdenes despu茅s de restaurar\r\n        await getOrdenes();\r\n        return true;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.restaurarOrden:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    ordenes,\r\n    loading,\r\n    error,\r\n    getOrdenes,\r\n    getOrdenById,\r\n    getOrdenByNumero,\r\n    createOrden,\r\n    updateOrden,\r\n    deleteOrden,\r\n    hardDeleteOrden,\r\n    getOrdenesEliminadas,\r\n    restaurarOrden,\r\n  };\r\n};\r\n\r\nexport default useOrder;\r\n","import React, { useState, useEffect } from 'react';\r\nimport OrderDetailsModal from './components/OrderDetailsModal';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ordenCompraService from '../../services/ordenCompraService';\r\nimport InventoryTable from './components/InventoryTable';\r\nimport InventoryFilters from './components/InventoryFilters';\r\nimport StockAlerts from './components/StockAlerts';\r\nimport PurchaseOrderPanel from './components/PurchaseOrderPanel';\r\nimport MaterialRequirements from './components/MaterialRequirements';\r\nimport InventoryStats from './components/InventoryStats';\r\nimport NewItemModal from './components/NewItemModal';\r\nimport ItemDetailsModal from './components/ItemDetailsModal';\r\nimport EditItemModal from './components/EditItemModal';\r\nimport CreatePOModal from './components/CreatePOModal';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport RequisitionModal from '../work-order-processing/components/RequisitionModal';\r\nimport useInventory from '../../hooks/useInventory';\r\nimport useOrder from '../../hooks/useOrder';\r\nimport useRequisi from '../../hooks/useRequisi';\r\nimport { useNotifications } from '../../context/NotificationContext';\r\n// Funci贸n auxiliar para formatear fechas\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '';\r\n  \r\n  // Si ya est谩 en formato YYYY-MM-DD, lo devolvemos tal cual\r\n  if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)) return dateString;\r\n  \r\n  // Si est谩 en formato DD/MM/YYYY, lo convertimos\r\n  const parts = dateString.split('/');\r\n  if (parts.length === 3) {\r\n    const [day, month, year] = parts;\r\n    return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;\r\n  }\r\n  \r\n  // Si es una fecha v谩lida, la convertimos a YYYY-MM-DD\r\n  try {\r\n    const date = new Date(dateString);\r\n    if (isNaN(date.getTime())) return '';\r\n    return date.toISOString().split('T')[0];\r\n  } catch {\r\n    return '';\r\n  }\r\n};\r\n\r\nconst InventoryManagement = () => {\r\n  const { showSuccess, showError, showConfirm } = useNotifications();\r\n  const { articulos, getArticulos, loading: inventoryLoading, error: inventoryError } = useInventory();\r\n  const { \r\n    ordenes, \r\n    loading: orderLoading, \r\n    error: orderError,\r\n    createOrden,\r\n    getOrdenes,\r\n    updateOrden \r\n  } = useOrder();\r\n  const {\r\n    requisitions,\r\n    loading: requisitionsLoading,\r\n    error: requisitionsError,\r\n    getRequisitions,\r\n    updateRequisition,\r\n    deleteRequisition\r\n  } = useRequisi();\r\n  \r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [activeView, setActiveView] = useState('overview');\r\n  const [showNewItemModal, setShowNewItemModal] = useState(false);\r\n  const [showItemDetailsModal, setShowItemDetailsModal] = useState(false);\r\n  const [showEditItemModal, setShowEditItemModal] = useState(false);\r\n  const [showCreatePOModal, setShowCreatePOModal] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n  const [isInitialLoading, setIsInitialLoading] = useState(true);\r\n  const [showOrderDetailsModal, setShowOrderDetailsModal] = useState(false);\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [showItemSelectorModal, setShowItemSelectorModal] = useState(false); //  Modal de selecci贸n\r\n  const loading = inventoryLoading || orderLoading || requisitionsLoading || isUpdating;\r\n  const error = inventoryError || orderError;\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    category: '',\r\n    status: '',\r\n    supplier: '',\r\n    location: '',\r\n    minStock: '',\r\n    maxStock: '',\r\n    quickFilter: ''\r\n  });\r\n\r\n  // Transformar los art铆culos del backend al formato esperado por los componentes\r\n  const inventoryItems = React.useMemo(() => {\r\n    return articulos.map(articulo => ({\r\n      id: articulo.id,\r\n      itemCode: articulo.codigoArticulo,\r\n      name: articulo.nombre || '',\r\n      description: articulo.descripcion,\r\n      specifications: articulo.especificaciones || 'Sin especificaciones',\r\n      category: articulo.categoria,\r\n      currentStock: articulo.stockActual,\r\n      reservedStock: articulo.stockReservado || 0,\r\n      reorderPoint: articulo.puntoReorden,\r\n      unit: articulo.unidad,\r\n      supplier: {\r\n        name: articulo.proveedor?.nombre || articulo.nombreProveedor || 'Sin proveedor',\r\n        contact: articulo.proveedor?.contacto || articulo.contactoProveedor || 'Sin contacto'\r\n      },\r\n      location: articulo.ubicacion,\r\n      lastUpdated: new Date(articulo.fechaActualizacion || articulo.fechaCreacion),\r\n      unitCost: articulo.costoUnitario,\r\n      notes: articulo.notas\r\n    }));\r\n  }, [articulos]);\r\n\r\n  // Generar alertas din谩micas basadas en los art铆culos reales\r\n  const stockAlerts = React.useMemo(() => {\r\n    return inventoryItems\r\n      .filter(item => {\r\n        const currentStock = item.currentStock || 0;\r\n        const reorderPoint = item.reorderPoint || 0;\r\n        return currentStock === 0 || currentStock <= reorderPoint;\r\n      })\r\n      .map((item, index) => {\r\n        const currentStock = item.currentStock || 0;\r\n        const reorderPoint = item.reorderPoint || 0;\r\n        const description = item.description || 'Art铆culo sin descripci贸n';\r\n        const itemCode = item.itemCode || 'Sin c贸digo';\r\n        const unit = item.unit || 'pcs';\r\n        const supplierName = item.supplier?.name || 'Sin proveedor';\r\n        \r\n        return {\r\n          id: index + 1,\r\n          type: currentStock === 0 ? 'out-of-stock' : 'low-stock',\r\n          title: currentStock === 0 \r\n            ? `${description} Agotado`\r\n            : `${description} en Stock Bajo`,\r\n          message: currentStock === 0\r\n            ? `El art铆culo ${itemCode} est谩 completamente agotado.`\r\n            : `Solo quedan ${currentStock} ${unit} disponibles, por debajo del punto de reorden de ${reorderPoint} ${unit}.`,\r\n          itemCode: itemCode,\r\n          currentStock: currentStock,\r\n          reorderPoint: reorderPoint,\r\n          unit: unit,\r\n          supplier: supplierName,\r\n          createdAt: new Date()\r\n        };\r\n      });\r\n  }, [inventoryItems]);\r\n\r\n  // Art铆culos con stock bajo para 贸rdenes de compra\r\n  const lowStockItems = React.useMemo(() => {\r\n    return inventoryItems.filter(item => {\r\n      const currentStock = item.currentStock || 0;\r\n      const reorderPoint = item.reorderPoint || 0;\r\n      return currentStock === 0 || currentStock <= reorderPoint;\r\n    });\r\n  }, [inventoryItems]);\r\n\r\n  // Material requirements - to be implemented with backend\r\n  const materialRequirements = [];\r\n\r\n  // Calcular estad铆sticas din谩micas basadas en los art铆culos reales\r\n  const inventoryStats = React.useMemo(() => {\r\n    const totalItems = inventoryItems.length;\r\n    const totalValue = inventoryItems.reduce((sum, item) => {\r\n      const unitCost = item.unitCost || 0;\r\n      const currentStock = item.currentStock || 0;\r\n      return sum + (unitCost * currentStock);\r\n    }, 0);\r\n    const lowStockItems = inventoryItems.filter(item => {\r\n      const currentStock = item.currentStock || 0;\r\n      const reorderPoint = item.reorderPoint || 0;\r\n      return currentStock > 0 && currentStock <= reorderPoint;\r\n    }).length;\r\n    const outOfStockItems = inventoryItems.filter(item => (item.currentStock || 0) === 0).length;\r\n    \r\n    // Agrupar por categor铆as\r\n    const categoryGroups = inventoryItems.reduce((acc, item) => {\r\n      if (item.category) {\r\n        const category = item.category.toLowerCase().replace(/\\s+/g, '');\r\n        acc[category] = (acc[category] || 0) + 1;\r\n      }\r\n      return acc;\r\n    }, {});\r\n\r\n    return {\r\n      totalItems,\r\n      totalValue,\r\n      lowStockItems,\r\n      outOfStockItems,\r\n      itemsChange: 0, // Podr铆as implementar l贸gica para calcular cambios\r\n      valueChange: 0,\r\n      lowStockChange: 0,\r\n      outOfStockChange: 0,\r\n      categories: categoryGroups\r\n    };\r\n  }, [inventoryItems]);\r\n\r\n  // Filter inventory items based on current filters\r\n  const filteredItems = inventoryItems?.filter(item => {\r\n    if (filters?.search && !item?.description?.toLowerCase()?.includes(filters?.search?.toLowerCase()) &&\r\n        !item?.itemCode?.toLowerCase()?.includes(filters?.search?.toLowerCase())) {\r\n      return false;\r\n    }\r\n    if (filters?.category && item?.category !== filters?.category) return false;\r\n    if (filters?.supplier && item?.supplier?.name !== filters?.supplier) return false;\r\n    if (filters?.location && item?.location !== filters?.location) return false;\r\n    if (filters?.minStock && item?.currentStock < parseInt(filters?.minStock)) return false;\r\n    if (filters?.maxStock && item?.currentStock > parseInt(filters?.maxStock)) return false;\r\n    \r\n    if (filters?.status) {\r\n      const stockStatus = item?.currentStock === 0 ? 'out-of-stock' :\r\n                         item?.currentStock <= item?.reorderPoint ? 'low-stock' : 'in-stock';\r\n      if (stockStatus !== filters?.status) return false;\r\n    }\r\n    \r\n    if (filters?.quickFilter) {\r\n      const stockStatus = item?.currentStock === 0 ? 'out-of-stock' :\r\n                         item?.currentStock <= item?.reorderPoint ? 'low-stock' : 'in-stock';\r\n      if (filters?.quickFilter !== stockStatus && filters?.quickFilter !== 'reserved') return false;\r\n    }\r\n    \r\n    return true;\r\n  });\r\n\r\n  const handleFiltersChange = (newFilters) => {\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  const handleClearFilters = () => {\r\n    setFilters({\r\n      search: '',\r\n      category: '',\r\n      status: '',\r\n      supplier: '',\r\n      location: '',\r\n      minStock: '',\r\n      maxStock: '',\r\n      quickFilter: ''\r\n    });\r\n  };\r\n\r\n  const handleViewDetails = (item) => {\r\n    console.log('View item details:', item);\r\n    setSelectedItem(item);\r\n    setShowItemDetailsModal(true);\r\n  };\r\n\r\n  const handleUpdateStock = (item) => {\r\n    console.log('Update stock for:', item);\r\n    \r\n    // Si el item viene de una alerta (tiene la propiedad 'type'), \r\n    // buscar el art铆culo completo en el inventario por itemCode\r\n    if (item.type && (item.type === 'out-of-stock' || item.type === 'low-stock')) {\r\n      const inventoryItem = inventoryItems.find(invItem => invItem.itemCode === item.itemCode);\r\n      if (inventoryItem) {\r\n        setSelectedItem(inventoryItem);\r\n      } else {\r\n        console.error('No se encontr贸 el art铆culo en el inventario:', item.itemCode);\r\n        setSelectedItem(item); // Fallback al item original\r\n      }\r\n    } else {\r\n      // Es un item directo del inventario\r\n      setSelectedItem(item);\r\n    }\r\n    \r\n    setShowEditItemModal(true);\r\n  };\r\n\r\n  const handleCreatePO = (item) => {\r\n    // Si recibimos un objeto de alerta, necesitamos encontrar el art铆culo real de inventario\r\n    if (item.type && (item.type === 'out-of-stock' || item.type === 'low-stock')) {\r\n      // Buscar el art铆culo correspondiente por itemCode en el inventario\r\n      const inventoryItem = inventoryItems.find(invItem => invItem.itemCode === item.itemCode);\r\n      if (inventoryItem) {\r\n        setSelectedItem(inventoryItem);\r\n      } else {\r\n        setSelectedItem(item); // Fallback si no se encuentra\r\n      }\r\n    } else {\r\n      // Es un 铆tem directo del inventario\r\n      setSelectedItem(item);\r\n    }\r\n    setShowCreatePOModal(true);\r\n  };\r\n\r\n  // Handlers para cerrar modales\r\n  const handleCloseItemDetailsModal = () => {\r\n    setShowItemDetailsModal(false);\r\n    setSelectedItem(null);\r\n  };\r\n\r\n  const handleCloseEditItemModal = () => {\r\n    setShowEditItemModal(false);\r\n    setSelectedItem(null);\r\n  };\r\n\r\n  const handleClosePOModal = () => {\r\n    setShowCreatePOModal(false);\r\n    setSelectedItem(null);\r\n    // No necesitamos resetear el estado del modal aqu铆,\r\n    // ya que useEffect en el modal se encarga de eso cuando cambia initialItem\r\n  };\r\n\r\n  const handleSubmitPO = async (orderData) => {\r\n    try {\r\n      // Crear la orden en el backend\r\n      await createOrden({\r\n        ...orderData,\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        estado: 'pending'  // Cambiado de status a estado para coincidir con el backend\r\n      });\r\n\r\n      // Recargar las 贸rdenes para obtener la lista actualizada\r\n      await getOrdenes();\r\n      \r\n      // Cerrar el modal y cambiar a la vista de 贸rdenes\r\n      setShowCreatePOModal(false);\r\n      setSelectedItem(null);\r\n      setActiveView('orders');\r\n    } catch (error) {\r\n      console.error('Error al crear la orden de compra:', error);\r\n    }\r\n  };\r\n\r\n  // Handler para actualizaci贸n exitosa\r\n  const handleUpdateSuccess = async () => {\r\n    try {\r\n      await getArticulos(); // Recargar la lista de art铆culos\r\n    } catch (error) {\r\n      console.error('Error recargando art铆culos despu茅s de actualizar:', error);\r\n    }\r\n  };\r\n\r\n  const handleApproveRequirement = (requirement) => {\r\n    console.log('Approve requirement:', requirement);\r\n  };\r\n\r\n  const handleRejectRequirement = (requirement) => {\r\n    console.log('Reject requirement:', requirement);\r\n  };\r\n\r\n  const handleDismissAlert = (alertId) => {\r\n    console.log('Dismiss alert:', alertId);\r\n  };\r\n\r\n  // Manejadores para requisiciones\r\n  const [selectedRequisition, setSelectedRequisition] = useState(null);\r\n  const [showRequisitionModal, setShowRequisitionModal] = useState(false);\r\n\r\n  const openRequisitionModal = (req) => {\r\n  setSelectedRequisition(req);\r\n  setIsRequisitionModalOpen(true);\r\n};\r\n\r\n\r\nconst handleViewRequisition = (req) => {\r\n  const reqForView = {\r\n    id: req.id,\r\n    orderNumber: req.numeroOrdenTrabajo,\r\n    projectName: req.nombreProyecto,\r\n    requestedBy: req.solicitadoPor,\r\n    requestDate: req.fechaSolicitud,\r\n    status: req.estado || 'Pendiente',\r\n    priority: req.prioridad || 'Normal',\r\n    description: req.descripcionSolicitud,\r\n    items: req.materiales?.map(m => ({\r\n      id: m.id || Date.now(),\r\n      name: m.nombreMaterial,\r\n      quantity: m.cantidad,\r\n      unit: m.unidad,\r\n      description: m.descripcionEspecificaciones,\r\n      urgency: m.urgencia,\r\n    })) || [],\r\n    manualItems: req.materialesManuales?.map(m => ({\r\n      id: m.id || Date.now(),\r\n      name: m.nombreMaterial,\r\n      quantity: m.cantidad,\r\n      unit: m.unidad,\r\n      description: m.descripcionEspecificaciones,\r\n      urgency: m.urgencia,\r\n    })) || [],\r\n    justification: req.justificacionSolicitud,\r\n    notes: req.notasAdicionales\r\n  };\r\n\r\n  setSelectedRequisition(reqForView);\r\n  setViewOnly(true);   //  MUY IMPORTANTE\r\n  setShowRequisitionModal(true);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n  const handleEditRequisition = (req) => {\r\n    const reqForEdit = {\r\n      id: req.id,\r\n      orderNumber: req.numeroOrdenTrabajo,\r\n      projectName: req.nombreProyecto,\r\n      requestedBy: req.solicitadoPor,\r\n      requestDate: req.fechaSolicitud,\r\n      status: req.estado || 'Pendiente',\r\n      priority: req.prioridad || 'Normal',\r\n      description: req.descripcionSolicitud,\r\n      items: req.materiales?.map(m => ({\r\n        id: m.id || Date.now(),\r\n        name: m.nombreMaterial,\r\n        quantity: m.cantidad,\r\n        unit: m.unidad,\r\n        description: m.descripcionEspecificaciones\r\n      })) || [],\r\n      justification: req.justificacionSolicitud,\r\n      notes: req.notasAdicionales\r\n    };\r\n\r\n    setSelectedRequisition(reqForEdit);\r\n    setShowRequisitionModal(true);\r\n    setViewOnly(false); \r\n  };\r\n\r\n  \r\n\r\n  const handleSaveRequisition = async (editedReq) => {\r\n    try {\r\n      setIsUpdating(true);\r\n      // Convertir de nuevo al formato espa帽ol para el backend\r\n      const reqToUpdate = {\r\n        id: editedReq.id,\r\n        numeroOrdenTrabajo: editedReq.orderNumber,\r\n        nombreProyecto: editedReq.projectName,\r\n        solicitadoPor: editedReq.requestedBy,\r\n        fechaSolicitud: formatDate(editedReq.requestDate),\r\n        estado: editedReq.status,\r\n        prioridad: editedReq.priority,\r\n        descripcionSolicitud: editedReq.description,\r\n        materiales: editedReq.items?.map(item => ({\r\n          id: item.id,\r\n          nombreMaterial: item.name,\r\n          cantidad: item.quantity,\r\n          unidad: item.unit,\r\n          descripcionEspecificaciones: item.description\r\n        })),\r\n        justificacionSolicitud: editedReq.justification,\r\n        notasAdicionales: editedReq.notes\r\n      };\r\n\r\n      const success = await updateRequisition(reqToUpdate.id, reqToUpdate);\r\n      if (success) {\r\n        showSuccess('Requisici贸n actualizada correctamente');\r\n        await getRequisitions();\r\n        setShowRequisitionModal(false);\r\n        setSelectedRequisition(null);\r\n      } else {\r\n        showError('No se pudo actualizar la requisici贸n');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al actualizar requisici贸n:', error);\r\n      showError('Error al actualizar la requisici贸n');\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (req) => {\r\n    showConfirm(\r\n      `驴Est谩 seguro que desea eliminar la requisici贸n ${req.numeroOrdenTrabajo || 'seleccionada'}?`,\r\n      {\r\n        onConfirm: async () => {\r\n          try {\r\n            setIsUpdating(true);\r\n            const success = await deleteRequisition(req.id);\r\n            if (success) {\r\n              showSuccess('Requisici贸n eliminada correctamente');\r\n              await getRequisitions();\r\n            } else {\r\n              showError('No se pudo eliminar la requisici贸n');\r\n            }\r\n          } catch (error) {\r\n            console.error('Error al eliminar requisici贸n:', error);\r\n            showError('Error al eliminar la requisici贸n');\r\n          } finally {\r\n            setIsUpdating(false);\r\n          }\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const handleViewOrder = (order) => {\r\n    setSelectedOrder(order);\r\n    setShowOrderDetailsModal(true);\r\n  };\r\n\r\n  const handleCloseOrderDetails = () => {\r\n    setShowOrderDetailsModal(false);\r\n    setSelectedOrder(null);\r\n  };\r\n\r\n  const handleDownloadOrder = async (order) => {\r\n    try {\r\n      // Crear el contenido del PDF-like\r\n      const content = `\r\nORDEN DE COMPRA ${order.numeroOrden}\r\n=============================\r\nFecha: ${new Date(order.fechaCreacion).toLocaleDateString()}\r\nProveedor: ${order.proveedor.nombre}\r\nEstado: ${order.estado}\r\n${order.esUrgente ? 'URGENTE\\n' : ''}\r\n\r\nARTCULOS:\r\n${order.articulos.map(item => `\r\n${item.codigoArticulo} - ${item.descripcion}\r\nCantidad: ${item.cantidadOrdenada} ${item.unidad}\r\nPrecio unitario: ${item.costoUnitario.toLocaleString('es-MX', { style: 'currency', currency: 'MXN' })}\r\nSubtotal: ${item.subtotal.toLocaleString('es-MX', { style: 'currency', currency: 'MXN' })}\r\n`).join('\\n')}\r\n\r\nTOTAL: ${order.totalOrden.toLocaleString('es-MX', { style: 'currency', currency: 'MXN' })}\r\n\r\nNotas:\r\n${order.notas || 'Sin notas adicionales'}\r\n`;\r\n\r\n      // Crear y descargar el archivo\r\n      const blob = new Blob([content], { type: 'text/plain' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `orden-compra-${order.numeroOrden}.txt`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n      console.error('Error al descargar la orden:', error);\r\n    }\r\n  };\r\n\r\n  const handleDeleteOrder = async (order) => {\r\n    try {\r\n      await ordenCompraService.deleteOrden(order.id);\r\n      await getOrdenes(); // Recargar la lista\r\n    } catch (error) {\r\n      console.error('Error al eliminar la orden:', error);\r\n    }\r\n  };\r\n\r\n  const handleApproveOrder = async (order) => {\r\n    try {\r\n      await updateOrden(order.id, {\r\n        ...order,\r\n        status: 'approved',\r\n        updatedAt: new Date().toISOString()\r\n      });\r\n      await getOrdenes(); // Recargar la lista de 贸rdenes\r\n    } catch (error) {\r\n      console.error('Error al aprobar la orden:', error);\r\n    }\r\n  };\r\n\r\n  const handleCreateOrder = () => {\r\n    setSelectedItem(null);\r\n    setShowCreatePOModal(true);\r\n  };\r\n\r\n  const handleExport = async () => {\r\n    try {\r\n      // Funci贸n auxiliar para escapar valores CSV correctamente\r\n      const escapeCSV = (value) => {\r\n        if (value === null || value === undefined) return '\"\"';\r\n        const stringValue = String(value);\r\n        // Escapar comillas dobles duplic谩ndolas\r\n        const escapedValue = stringValue.replace(/\"/g, '\"\"');\r\n        // SIEMPRE encerrar en comillas para evitar problemas con comas y caracteres especiales\r\n        return `\"${escapedValue}\"`;\r\n      };\r\n\r\n      // Create CSV content\r\n      const csvHeaders = [\r\n        'C贸digo',\r\n        'Nombre',\r\n        'Descripci贸n',\r\n        'Categor铆a',\r\n        'Stock Actual',\r\n        'Stock Reservado',\r\n        'Punto de Reorden',\r\n        'Unidad',\r\n        'Ubicaci贸n',\r\n        'Proveedor',\r\n        'Contacto Proveedor',\r\n        'Costo Unitario',\r\n        'Valor Total',\r\n        'ltima Actualizaci贸n'\r\n      ];\r\n      \r\n      const csvRows = inventoryItems?.map(item => [\r\n        escapeCSV(item?.itemCode),\r\n        escapeCSV(item?.name),\r\n        escapeCSV(item?.description),\r\n        escapeCSV(item?.category),\r\n        escapeCSV(item?.currentStock),\r\n        escapeCSV(item?.reservedStock || 0),\r\n        escapeCSV(item?.reorderPoint),\r\n        escapeCSV(item?.unit),\r\n        escapeCSV(item?.location),\r\n        escapeCSV(item?.supplier?.name),\r\n        escapeCSV(item?.supplier?.contact),\r\n        escapeCSV(item?.unitCost),\r\n        escapeCSV(item?.currentStock * item?.unitCost),\r\n        escapeCSV(new Date(item?.lastUpdated).toLocaleDateString('es-MX'))\r\n      ]);\r\n\r\n      const csvContent = [\r\n        csvHeaders.map(h => escapeCSV(h)).join(','),\r\n        ...csvRows.map(row => row.join(','))\r\n      ].join('\\n');\r\n\r\n      // Agregar BOM (Byte Order Mark) UTF-8 para que Excel reconozca la codificaci贸n\r\n      const BOM = '\\uFEFF';\r\n      const csvWithBOM = BOM + csvContent;\r\n\r\n      // Download CSV file con codificaci贸n UTF-8\r\n      const blob = new Blob([csvWithBOM], { type: 'text/csv;charset=utf-8;' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `inventario-${new Date()?.toISOString()?.split('T')?.[0]}.csv`;\r\n      document.body?.appendChild(link);\r\n      link?.click();\r\n      document.body?.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n\r\n      console.log('Inventario exportado exitosamente');\r\n    } catch (error) {\r\n      console.error('Error al exportar inventario:', error);\r\n    }\r\n  };\r\n\r\n  const handleImportInventory = () => {\r\n    // Create file input\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = '.csv,.xlsx,.xls';\r\n    \r\n    input.onchange = (e) => {\r\n      const file = e?.target?.files?.[0];\r\n      if (file) {\r\n        console.log('Importando archivo:', file?.name);\r\n        // In a real app, you would parse the file and add items\r\n        // For now, simulate adding some sample items\r\n        const sampleItems = [\r\n          {\r\n            id: Date.now() + 1,\r\n            itemCode: 'IMP-001',\r\n            description: 'Art铆culo Importado 1',\r\n            specifications: 'Importado desde archivo CSV',\r\n            category: 'Importados',\r\n            currentStock: 10,\r\n            reservedStock: 0,\r\n            reorderPoint: 5,\r\n            unit: 'pcs',\r\n            supplier: { name: 'Proveedor Importado', contact: 'import@proveedor.com' },\r\n            location: 'Almac茅n Principal',\r\n            lastUpdated: new Date(),\r\n            unitCost: 1000\r\n          }\r\n        ];\r\n        setInventoryItems(prev => [...prev, ...sampleItems]);\r\n        console.log('Archivo importado exitosamente');\r\n      }\r\n    };\r\n    \r\n    input?.click();\r\n  };\r\n\r\n  const handleAddNewItem = async (newItem) => {\r\n    try {\r\n      // El art铆culo ya fue creado en el backend por el NewItemModal\r\n      // Solo necesitamos refrescar la lista de art铆culos\r\n      await getArticulos();\r\n      \r\n      // If we're not on the inventory view, switch to it to show the new item\r\n      if (activeView !== 'inventory') {\r\n        setActiveView('inventory');\r\n      }\r\n      \r\n      return Promise.resolve();\r\n    } catch (error) {\r\n      console.error('Error refreshing inventory after adding new item:', error);\r\n      return Promise.reject(error);\r\n    }\r\n  };\r\n\r\n  const handleOpenNewItemModal = () => {\r\n    setShowNewItemModal(true);\r\n  };\r\n\r\n  const handleCloseNewItemModal = () => {\r\n    setShowNewItemModal(false);\r\n  };\r\n\r\n\r\n  const viewTabs = [\r\n    { id: 'overview', label: 'Resumen', icon: 'LayoutDashboard' },\r\n    { id: 'inventory', label: 'Inventario', icon: 'Package' },\r\n    { id: 'alerts', label: 'Alertas', icon: 'AlertTriangle' },\r\n    { id: 'orders', label: 'rdenes', icon: 'ShoppingCart' },\r\n    { id: 'requirements', label: 'Requisiciones', icon: 'ClipboardList' }\r\n  ];\r\n\r\n  // Cargar datos al montar el componente\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const fetchData = async () => {\r\n      if (!isInitialLoading) return;\r\n\r\n      try {\r\n        // Cargar 贸rdenes primero ya que parece funcionar correctamente\r\n        await getOrdenes();\r\n\r\n        if (isMounted) {\r\n          // Luego intentar cargar art铆culos y requisiciones en paralelo\r\n          await Promise.allSettled([\r\n            getArticulos().catch(err => {\r\n              console.warn('Error al cargar art铆culos:', err);\r\n              return [];\r\n            }),\r\n            getRequisitions().catch(err => {\r\n              console.warn('Error al cargar requisiciones:', err);\r\n              return [];\r\n            })\r\n          ]);\r\n        }\r\n      } catch (error) {\r\n        console.warn('Error en la carga inicial:', error);\r\n      } finally {\r\n        if (isMounted) {\r\n          setIsInitialLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  // Recargar datos solo cuando se cambia a la pesta帽a de requisiciones\r\n  useEffect(() => {\r\n    if (activeView === 'requirements' && !loading) {\r\n      getRequisitions();\r\n    }\r\n  }, [activeView]);\r\n\r\n  useEffect(() => {\r\n    document.title = 'Gesti贸n de Inventario - AireFlow Pro';\r\n  }, []);\r\n\r\n  \r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Header \r\n        onMenuToggle={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n        isMenuOpen={mobileMenuOpen}\r\n      />\r\n      <Sidebar \r\n        isCollapsed={sidebarCollapsed}\r\n        onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n      />\r\n      <main className={`transition-all duration-300 ${\r\n        sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n      }`}>\r\n        <div className=\"p-6\">\r\n          <Breadcrumb />\r\n          \r\n          {/* Page Header */}\r\n          <div className=\"flex flex-col sm:flex-row sm:items-center justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0\">\r\n            <div className=\"min-w-0 flex-1\">\r\n              <h1 className=\"text-2xl sm:text-3xl font-bold text-foreground mb-2\">\r\n                Gesti贸n de Inventario\r\n              </h1>\r\n              <p className=\"text-sm sm:text-base text-muted-foreground\">\r\n                Control integral de partes, materiales y recursos para proyectos de Aire Acondicionado\r\n              </p>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center space-x-2 sm:space-x-3 flex-shrink-0\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleImportInventory}\r\n                iconName=\"Upload\"\r\n                iconSize={16}\r\n                className=\"text-sm\"\r\n              >\r\n                <span className=\"hidden sm:inline\">Importar</span>\r\n                <span className=\"sm:hidden\">Import</span>\r\n              </Button>\r\n              <Button\r\n                variant=\"default\"\r\n                onClick={handleOpenNewItemModal}\r\n                iconName=\"Plus\"\r\n                iconSize={16}\r\n                className=\"text-sm\"\r\n              >\r\n                <span className=\"hidden sm:inline\">Nuevo Art铆culo</span>\r\n                <span className=\"sm:hidden\">Nuevo</span>\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* View Tabs */}\r\n          <div className=\"flex flex-wrap space-x-1 mb-4 sm:mb-6 bg-muted p-1 rounded-lg w-fit max-w-full overflow-x-auto\">\r\n            {viewTabs?.map((tab) => (\r\n              <button\r\n                key={tab?.id}\r\n                onClick={() => setActiveView(tab?.id)}\r\n                className={`flex items-center space-x-1 sm:space-x-2 px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-smooth whitespace-nowrap ${\r\n                  activeView === tab?.id\r\n                    ? 'bg-background text-foreground shadow-sm'\r\n                    : 'text-muted-foreground hover:text-foreground'\r\n                }`}\r\n              >\r\n                <Icon name={tab?.icon} size={14} className=\"sm:w-4 sm:h-4\" />\r\n                <span className=\"hidden xs:inline sm:inline\">{tab?.label}</span>\r\n                {tab?.id === 'alerts' && stockAlerts?.length > 0 && (\r\n                  <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-warning text-warning-foreground\">\r\n                    {stockAlerts?.length}\r\n                  </span>\r\n                )}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Content based on active view */}\r\n          {activeView === 'overview' && (\r\n            <InventoryStats \r\n              stats={inventoryStats}\r\n              items={filteredItems}\r\n              onAddItem={() => setShowNewItemModal(true)}\r\n              onUpdateStock={() => {\r\n                //  Abrir modal de selecci贸n de art铆culo\r\n                setShowItemSelectorModal(true);\r\n              }}\r\n              onGenerateReport={() => {\r\n                // Funci贸n auxiliar para escapar valores CSV correctamente\r\n                const escapeCSV = (value) => {\r\n                  if (value === null || value === undefined) return '\"\"';\r\n                  const stringValue = String(value);\r\n                  // Escapar comillas dobles duplic谩ndolas\r\n                  const escapedValue = stringValue.replace(/\"/g, '\"\"');\r\n                  // SIEMPRE encerrar en comillas para evitar problemas con comas y caracteres especiales\r\n                  return `\"${escapedValue}\"`;\r\n                };\r\n\r\n                // Crear el contenido del CSV\r\n                const headers = [\r\n                  'C贸digo',\r\n                  'Nombre',\r\n                  'Descripci贸n',\r\n                  'Categor铆a',\r\n                  'Stock Actual',\r\n                  'Stock Reservado',\r\n                  'Punto de Reorden',\r\n                  'Unidad',\r\n                  'Proveedor',\r\n                  'Ubicaci贸n',\r\n                  'Costo Unitario',\r\n                  'Valor Total',\r\n                  'ltima Actualizaci贸n'\r\n                ];\r\n\r\n                const csvRows = filteredItems.map(item => [\r\n                  escapeCSV(item.itemCode || ''),\r\n                  escapeCSV(item.name || ''),\r\n                  escapeCSV(item.description || ''),\r\n                  escapeCSV(item.category || ''),\r\n                  escapeCSV(item.currentStock || 0),\r\n                  escapeCSV(item.reservedStock || 0),\r\n                  escapeCSV(item.reorderPoint || 0),\r\n                  escapeCSV(item.unit || ''),\r\n                  escapeCSV(item.supplier?.name || ''),\r\n                  escapeCSV(item.location || ''),\r\n                  escapeCSV(item.unitCost || 0),\r\n                  escapeCSV((item.currentStock || 0) * (item.unitCost || 0)),\r\n                  escapeCSV(item.lastUpdated ? new Date(item.lastUpdated).toLocaleString('es-MX') : ''),\r\n                ].join(','));\r\n\r\n                const csvContent = [\r\n                  headers.map(h => escapeCSV(h)).join(','),\r\n                  ...csvRows\r\n                ].join('\\n');\r\n\r\n                // Crear el blob con BOM UTF-8 y descargar\r\n                const BOM = '\\uFEFF';\r\n                const blob = new Blob([BOM + csvContent], { type: 'text/csv;charset=utf-8;' });\r\n                const link = document.createElement('a');\r\n                const url = URL.createObjectURL(blob);\r\n                \r\n                link.setAttribute('href', url);\r\n                link.setAttribute('download', `inventario_${new Date().toISOString().split('T')[0]}.csv`);\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n                URL.revokeObjectURL(url);\r\n              }}\r\n            />\r\n          )}\r\n\r\n          {activeView === 'inventory' && (\r\n            <div className=\"space-y-6\">\r\n              <InventoryFilters\r\n                filters={filters}\r\n                onFiltersChange={handleFiltersChange}\r\n                onClearFilters={handleClearFilters}\r\n                onExport={handleExport}\r\n                totalItems={inventoryItems?.length}\r\n                filteredItems={filteredItems?.length}\r\n                inventoryItems={inventoryItems}\r\n              />\r\n              <InventoryTable\r\n                items={filteredItems}\r\n                onViewDetails={handleViewDetails}\r\n                onUpdateStock={handleUpdateStock}\r\n                onCreatePO={handleCreatePO}\r\n                onAddItem={() => {\r\n                  setShowNewItemModal(true);\r\n                }}\r\n                onGenerateReport={handleExport}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {activeView === 'alerts' && (\r\n            <StockAlerts\r\n              alerts={stockAlerts}\r\n              onCreatePO={handleCreatePO}\r\n              onUpdateStock={handleUpdateStock}\r\n              onDismissAlert={handleDismissAlert}\r\n            />\r\n          )}\r\n\r\n          {activeView === 'orders' && (\r\n            <PurchaseOrderPanel\r\n              orders={ordenes}\r\n              onViewOrder={handleViewOrder}\r\n              onApproveOrder={handleApproveOrder}\r\n              onCreateOrder={handleCreateOrder}\r\n              onDownloadOrder={handleDownloadOrder}\r\n              onDeleteOrder={handleDeleteOrder}\r\n            />\r\n          )}\r\n{activeView === 'requirements' && (\r\n  <div className=\"bg-card rounded-lg border border-border shadow-sm\">\r\n\r\n    {/* Header */}\r\n    <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n      <div className=\"flex items-center space-x-3\">\r\n        <Icon name=\"ClipboardList\" size={20} className=\"text-primary\" />\r\n        <h3 className=\"text-lg font-semibold text-foreground\">\r\n          Requisiciones de Material\r\n        </h3>\r\n      </div>\r\n\r\n      <Button\r\n        variant=\"default\"\r\n        iconName=\"Plus\"\r\n        onClick={() => setShowCreatePOModal(true)}\r\n      >\r\n        Nueva Requisici贸n\r\n      </Button>\r\n    </div>\r\n\r\n    {/* Contenido */}\r\n    <div className=\"divide-y divide-border max-h-96 overflow-y-auto\">\r\n\r\n      {requisitionsLoading ? (\r\n        <div className=\"text-center py-8 text-muted-foreground\">\r\n          Cargando requisiciones...\r\n        </div>\r\n      ) : requisitions?.length > 0 ? (\r\n        requisitions.map((req) => (\r\n          <div\r\n            key={req.id}\r\n            className=\"p-5 hover:bg-muted/50 transition-colors\"\r\n          >\r\n            <div className=\"flex items-start justify-between\">\r\n\r\n              {/* Info principal */}\r\n              <div className=\"flex-1\">\r\n\r\n                {/* Encabezado */}\r\n                <div className=\"flex items-center space-x-3 mb-2\">\r\n                  <h4 className=\"text-base font-semibold text-foreground\">\r\n                    {req.numeroOrdenTrabajo || 'Sin n煤mero'}\r\n                  </h4>\r\n\r\n                  <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary\">\r\n                    {req.estado || 'Pendiente'}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Grid */}\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground mb-3\">\r\n\r\n                  <div>\r\n                    <span className=\"font-medium\">Proyecto:</span>\r\n                    <div className=\"text-foreground\">{req.nombreProyecto || 'Sin proyecto'}</div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <span className=\"font-medium\">Solicitado por:</span>\r\n                    <div className=\"text-foreground\">{req.solicitadoPor || 'No especificado'}</div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <span className=\"font-medium\">Fecha:</span>\r\n                    <div className=\"text-foreground\">\r\n                      {req.fechaSolicitud\r\n                        ? new Date(req.fechaSolicitud).toLocaleDateString('es-MX')\r\n                        : 'No especificada'}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <span className=\"font-medium\">Prioridad:</span>\r\n                    <div className=\"text-foreground\">{req.prioridad || 'Normal'}</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Descripci贸n */}\r\n                {req.descripcionSolicitud && (\r\n                  <div className=\"text-sm text-muted-foreground mb-3\">\r\n                    <span className=\"font-medium text-foreground\">Descripci贸n:</span>\r\n                    <p className=\"text-foreground\">{req.descripcionSolicitud}</p>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Materiales */}\r\n                {req.materiales?.length > 0 && (\r\n                  <div className=\"mb-3\">\r\n                    <span className=\"font-medium\">Materiales solicitados:</span>\r\n                    <ul className=\"mt-2 space-y-1 text-sm\">\r\n                      {req.materiales.map((item, index) => (\r\n                        <li key={index} className=\"text-foreground\">\r\n                          {item.cantidad || item.quantity} {item.unidad || item.unit || 'unidades'} - {item.nombreMaterial || item.name}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Acciones */}\r\n                <div className=\"flex items-center space-x-3 mt-3\">\r\n\r\n                  {/* VER DETALLES */}\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    iconName=\"Edit\"\r\n                    onClick={() => handleEditRequisition(req)}\r\n                  >\r\n                    Ver\r\n                  </Button>\r\n\r\n                  {/* EDITAR */}\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    iconName=\"Edit\"\r\n                    onClick={() => handleEditRequisition(req)}\r\n                  >\r\n                    Editar\r\n                  </Button>\r\n\r\n                  {/* ELIMINAR */}\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"text-error hover:text-error\"\r\n                    iconName=\"Trash2\"\r\n                    onClick={() => handleDelete(req)}\r\n                  >\r\n                    Eliminar\r\n                  </Button>\r\n\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <div className=\"text-center py-8 text-muted-foreground\">\r\n          No hay requisiciones disponibles.\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  </div>\r\n)}\r\n\r\n\r\n          {/* New Item Modal */}\r\n          <NewItemModal\r\n            isOpen={showNewItemModal}\r\n            onClose={handleCloseNewItemModal}\r\n            onAddItem={handleAddNewItem}\r\n          />\r\n\r\n          {/* Item Details Modal */}\r\n          <ItemDetailsModal\r\n            isOpen={showItemDetailsModal}\r\n            onClose={handleCloseItemDetailsModal}\r\n            item={selectedItem}\r\n          />\r\n\r\n          {/* Edit Item Modal */}\r\n          <EditItemModal\r\n            isOpen={showEditItemModal}\r\n            onClose={handleCloseEditItemModal}\r\n            item={selectedItem}\r\n            onUpdateSuccess={handleUpdateSuccess}\r\n          />\r\n\r\n          {/* Modal de Requisici贸n */}\r\n          <RequisitionModal\r\n            isOpen={showRequisitionModal}\r\n            onClose={() => {\r\n              setShowRequisitionModal(false);\r\n              setSelectedRequisition(null);\r\n            }}\r\n            requisition={selectedRequisition}\r\n            onSave={handleSaveRequisition}\r\n          />\r\n\r\n          {/* Create Purchase Order Modal */}\r\n          <CreatePOModal\r\n            isOpen={showCreatePOModal}\r\n            onClose={handleClosePOModal}\r\n            onSubmit={handleSubmitPO}\r\n            initialItem={selectedItem}\r\n            lowStockItems={lowStockItems}\r\n          />\r\n\r\n          {/* Order Details Modal */}\r\n          <OrderDetailsModal\r\n            isOpen={showOrderDetailsModal}\r\n            onClose={handleCloseOrderDetails}\r\n            order={selectedOrder}\r\n          />\r\n\r\n          {/* Item Selector Modal - Para \"Actualizar Stock\" */}\r\n          {showItemSelectorModal && (\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[1000] p-4\">\r\n              <div className=\"bg-card rounded-lg border border-border w-full max-w-2xl max-h-[80vh] overflow-hidden flex flex-col\">\r\n                <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n                  <h2 className=\"text-xl font-semibold text-foreground\">\r\n                    Seleccionar Art铆culo para Actualizar\r\n                  </h2>\r\n                  <button\r\n                    onClick={() => setShowItemSelectorModal(false)}\r\n                    className=\"text-muted-foreground hover:text-foreground\"\r\n                  >\r\n                    <Icon name=\"X\" size={20} />\r\n                  </button>\r\n                </div>\r\n                \r\n                <div className=\"p-6 overflow-y-auto flex-1\">\r\n                  <div className=\"mb-4\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Buscar art铆culo...\"\r\n                      className=\"w-full px-4 py-2 border border-border rounded-md\"\r\n                      onChange={(e) => setFilters({ ...filters, search: e.target.value })}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"space-y-2\">\r\n                    {filteredItems?.slice(0, 50).map((item) => (\r\n                      <button\r\n                        key={item.id}\r\n                        onClick={() => {\r\n                          handleUpdateStock(item);\r\n                          setShowItemSelectorModal(false);\r\n                        }}\r\n                        className=\"w-full text-left p-4 border border-border rounded-lg hover:bg-muted transition-colors\"\r\n                      >\r\n                        <div className=\"flex justify-between items-start\">\r\n                          <div>\r\n                            <p className=\"font-medium text-foreground\">{item.description}</p>\r\n                            <p className=\"text-sm text-muted-foreground\">C贸digo: {item.itemCode}</p>\r\n                          </div>\r\n                          <div className=\"text-right\">\r\n                            <p className=\"text-sm font-medium\">Stock: {item.currentStock} {item.unit}</p>\r\n                            <p className={`text-xs ${\r\n                              item.currentStock === 0 ? 'text-red-500' :\r\n                              item.currentStock <= item.reorderPoint ? 'text-yellow-500' :\r\n                              'text-green-500'\r\n                            }`}>\r\n                              {item.currentStock === 0 ? 'Agotado' :\r\n                               item.currentStock <= item.reorderPoint ? 'Stock bajo' :\r\n                               'Disponible'}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                  \r\n                  {filteredItems?.length === 0 && (\r\n                    <p className=\"text-center text-muted-foreground py-8\">\r\n                      No se encontraron art铆culos\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryManagement;","import React from 'react';\r\nimport AppImage from '../../../components/AppImage';\r\n\r\nconst CompanyBranding = () => {\r\n  return (\r\n    <div className=\"text-center mb-8\">\r\n      {/* Company Logo */}\r\n      <div className=\"flex justify-center mb-6\">\r\n        <div className=\"w-20 h-20 flex items-center justify-center\">\r\n          <AppImage\r\n            src=\"assets/images/WhatsApp_Image_2025-09-24_at_8.13.50_PM-1759346787603.jpeg\"\r\n            alt=\"CLIMAS H.M. Logo\"\r\n            className=\"w-full h-full object-contain\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Company Name and Tagline */}\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-3xl font-bold text-foreground mb-2\">CLIMAS H.M.</h1>\r\n        <p className=\"text-lg text-muted-foreground mb-1\">Sistema de Gesti贸n de Aire Acondicionado</p>\r\n        <p className=\"text-sm text-muted-foreground\">Plataforma Empresarial Integral</p>\r\n      </div>\r\n\r\n      {/* Trust Signals */}\r\n      <div className=\"flex flex-col items-center space-y-3\">\r\n        {/* Security Badge */}\r\n        <div className=\"flex items-center space-x-2 px-4 py-2 bg-success/10 border border-success/20 rounded-full\">\r\n          <div className=\"w-4 h-4 bg-success rounded-full flex items-center justify-center\">\r\n            <span className=\"text-success text-xs\"></span>\r\n          </div>\r\n          <span className=\"text-sm font-medium text-success\">Conexi贸n Segura SSL</span>\r\n        </div>\r\n\r\n        {/* Compliance Indicators */}\r\n        <div className=\"flex items-center space-x-4 text-xs text-muted-foreground\">\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-success rounded-full flex items-center justify-center\">\r\n              <span className=\"text-white text-xs\"></span>\r\n            </div>\r\n            <span>Cumplimiento SAT</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-success rounded-full flex items-center justify-center\">\r\n              <span className=\"text-white text-xs\"></span>\r\n            </div>\r\n            <span>ISO 27001</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-success rounded-full flex items-center justify-center\">\r\n              <span className=\"text-white text-xs\"></span>\r\n            </div>\r\n            <span>CFDI 4.0</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CompanyBranding;","import React from \"react\";\r\nimport { Check, Minus } from \"lucide-react\";\r\nimport { cn } from \"../../utils/cn\";\r\n\r\nconst Checkbox = React.forwardRef(({\r\n    className,\r\n    id,\r\n    checked,\r\n    indeterminate = false,\r\n    disabled = false,\r\n    required = false,\r\n    label,\r\n    description,\r\n    error,\r\n    size = \"default\",\r\n    ...props\r\n}, ref) => {\r\n    // Generate unique ID if not provided\r\n    const checkboxId = id || `checkbox-${Math.random()?.toString(36)?.substr(2, 9)}`;\r\n\r\n    // Size variants\r\n    const sizeClasses = {\r\n        sm: \"h-4 w-4\",\r\n        default: \"h-4 w-4\",\r\n        lg: \"h-5 w-5\"\r\n    };\r\n\r\n    return (\r\n        <div className={cn(\"flex items-start space-x-2\", className)}>\r\n            <div className=\"relative flex items-center\">\r\n                <input\r\n                    type=\"checkbox\"\r\n                    ref={ref}\r\n                    id={checkboxId}\r\n                    checked={checked}\r\n                    disabled={disabled}\r\n                    required={required}\r\n                    className=\"sr-only\"\r\n                    {...props}\r\n                />\r\n\r\n                <label\r\n                    htmlFor={checkboxId}\r\n                    className={cn(\r\n                        \"peer shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground cursor-pointer transition-colors\",\r\n                        sizeClasses?.[size],\r\n                        checked && \"bg-primary text-primary-foreground border-primary\",\r\n                        indeterminate && \"bg-primary text-primary-foreground border-primary\",\r\n                        error && \"border-destructive\",\r\n                        disabled && \"cursor-not-allowed opacity-50\"\r\n                    )}\r\n                >\r\n                    {checked && !indeterminate && (\r\n                        <Check className=\"h-3 w-3 text-current flex items-center justify-center\" />\r\n                    )}\r\n                    {indeterminate && (\r\n                        <Minus className=\"h-3 w-3 text-current flex items-center justify-center\" />\r\n                    )}\r\n                </label>\r\n            </div>\r\n            {(label || description || error) && (\r\n                <div className=\"flex-1 space-y-1\">\r\n                    {label && (\r\n                        <label\r\n                            htmlFor={checkboxId}\r\n                            className={cn(\r\n                                \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer\",\r\n                                error ? \"text-destructive\" : \"text-foreground\"\r\n                            )}\r\n                        >\r\n                            {label}\r\n                            {required && <span className=\"text-destructive ml-1\">*</span>}\r\n                        </label>\r\n                    )}\r\n\r\n                    {description && !error && (\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                            {description}\r\n                        </p>\r\n                    )}\r\n\r\n                    {error && (\r\n                        <p className=\"text-sm text-destructive\">\r\n                            {error}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nCheckbox.displayName = \"Checkbox\";\r\n\r\n// Checkbox Group component\r\nconst CheckboxGroup = React.forwardRef(({\r\n    className,\r\n    children,\r\n    label,\r\n    description,\r\n    error,\r\n    required = false,\r\n    disabled = false,\r\n    ...props\r\n}, ref) => {\r\n    return (\r\n        <fieldset\r\n            ref={ref}\r\n            disabled={disabled}\r\n            className={cn(\"space-y-3\", className)}\r\n            {...props}\r\n        >\r\n            {label && (\r\n                <legend className={cn(\r\n                    \"text-sm font-medium\",\r\n                    error ? \"text-destructive\" : \"text-foreground\"\r\n                )}>\r\n                    {label}\r\n                    {required && <span className=\"text-destructive ml-1\">*</span>}\r\n                </legend>\r\n            )}\r\n\r\n            {description && !error && (\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                    {description}\r\n                </p>\r\n            )}\r\n\r\n            <div className=\"space-y-2\">\r\n                {children}\r\n            </div>\r\n\r\n            {error && (\r\n                <p className=\"text-sm text-destructive\">\r\n                    {error}\r\n                </p>\r\n            )}\r\n        </fieldset>\r\n    );\r\n});\r\n\r\nCheckboxGroup.displayName = \"CheckboxGroup\";\r\n\r\nexport { Checkbox, CheckboxGroup };","import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getDefaultPath } from '../../../utils/auth';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\nconst LoginForm = () => {\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n    rememberMe: false\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // El backend maneja credenciales y roles\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData?.email) {\r\n      newErrors.email = 'El correo electr贸nico es requerido';\r\n    } else if (!/\\S+@\\S+\\.\\S+/?.test(formData?.email)) {\r\n      newErrors.email = 'Formato de correo electr贸nico inv谩lido';\r\n    }\r\n\r\n    if (!formData?.password) {\r\n      newErrors.password = 'La contrase帽a es requerida';\r\n    } else if (formData?.password?.length < 6) {\r\n      newErrors.password = 'La contrase帽a debe tener al menos 6 caracteres';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value, type, checked } = e?.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    }));\r\n\r\n    // Clear error when user starts typing\r\n    if (errors?.[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    \r\n    if (!validateForm()) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch('/api/usuarios/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          email: formData.email,\r\n          password: formData.password\r\n        })\r\n      });\r\n      const data = await response.json();\r\n      console.log('Login response status:', response.status);\r\n      console.log('Login response body:', data);\r\n      if (response.ok && data?.data?.token && data?.data?.usuario?.rol) {\r\n        // Guardar token y expiraci贸n (24h)\r\n  localStorage.setItem('authToken', data.data.token);\r\n        localStorage.setItem('tokenExpiresAt', String(Date.now() + 24 * 60 * 60 * 1000));\r\n        localStorage.setItem('userRole', data.data.usuario.rol);\r\n        localStorage.setItem('userEmail', data.data.usuario.email);\r\n        if (formData?.rememberMe) {\r\n          localStorage.setItem('rememberMe', 'true');\r\n        }\r\n        // Mostrar el valor exacto del rol recibido\r\n        console.log('Rol recibido:', data.data.usuario.rol);\r\n        \r\n        // Obtener la ruta por defecto seg煤n el rol del usuario\r\n        const role = String(data.data.usuario.rol).toLowerCase();\r\n        const redirect = getDefaultPath(role);\r\n        \r\n        console.log('Redirigiendo a:', redirect);\r\n        navigate(redirect);\r\n        window.location.reload();\r\n      } else {\r\n        setErrors({\r\n          general: data?.message || 'Credenciales incorrectas. Por favor, verifique su correo y contrase帽a.'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setErrors({\r\n        general: 'Error de conexi贸n. Por favor, intente nuevamente.'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-md mx-auto\">\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* Email Input */}\r\n        <Input\r\n          label=\"Correo Electr贸nico\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"usuario@aireflowpro.com\"\r\n          value={formData?.email}\r\n          onChange={handleInputChange}\r\n          error={errors?.email}\r\n          required\r\n          disabled={isLoading}\r\n        />\r\n\r\n        {/* Password Input */}\r\n        <Input\r\n          label=\"Contrase帽a\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Ingrese su contrase帽a\"\r\n          value={formData?.password}\r\n          onChange={handleInputChange}\r\n          error={errors?.password}\r\n          required\r\n          disabled={isLoading}\r\n          autoComplete=\"current-password\"\r\n        />\r\n\r\n        {/* Remember Me Checkbox */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <Checkbox\r\n            label=\"Recordarme\"\r\n            name=\"rememberMe\"\r\n            checked={formData?.rememberMe}\r\n            onChange={handleInputChange}\r\n            disabled={isLoading}\r\n          />\r\n          \r\n          <button\r\n            type=\"button\"\r\n            className=\"text-sm text-primary hover:text-primary/80 transition-smooth\"\r\n            disabled={isLoading}\r\n          >\r\n            驴Olvid贸 su contrase帽a?\r\n          </button>\r\n        </div>\r\n\r\n        {/* General Error Message */}\r\n        {errors?.general && (\r\n          <div className=\"p-3 bg-error/10 border border-error/20 rounded-lg\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"AlertCircle\" size={16} className=\"text-error flex-shrink-0\" />\r\n              <p className=\"text-sm text-error\">{errors?.general}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Submit Button */}\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"default\"\r\n          fullWidth\r\n          loading={isLoading}\r\n          disabled={isLoading}\r\n          iconName=\"LogIn\"\r\n          iconPosition=\"right\"\r\n        >\r\n          {isLoading ? 'Iniciando Sesi贸n...' : 'Iniciar Sesi贸n'}\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginForm;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst CredentialsHelper = () => {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const mockCredentials = [\r\n    { role: 'Administrador', email: 'admin@aireflowpro.com', password: 'Admin123!' },\r\n    { role: 'Gerente de Proyecto', email: 'proyecto@aireflowpro.com', password: 'Proyecto123!' },\r\n    { role: 'Representante de Ventas', email: 'ventas@aireflowpro.com', password: 'Ventas123!' },\r\n    { role: 'Supervisor de Taller', email: 'taller@aireflowpro.com', password: 'Taller123!' },\r\n    { role: 'Controlador Financiero', email: 'finanzas@aireflowpro.com', password: 'Finanzas123!' },\r\n    { role: 'Gerente de RH', email: 'personal@aireflowpro.com', password: 'Personal123!' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"mt-8 p-4 bg-muted/50 border border-border rounded-lg\">\r\n      <Button\r\n        variant=\"ghost\"\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n        className=\"w-full flex items-center justify-between p-0 h-auto\"\r\n      >\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Icon name=\"Info\" size={16} className=\"text-primary\" />\r\n          <span className=\"text-sm font-medium text-foreground\">Credenciales de Demostraci贸n</span>\r\n        </div>\r\n        <Icon \r\n          name={isExpanded ? 'ChevronUp' : 'ChevronDown'} \r\n          size={16} \r\n          className=\"text-muted-foreground\"\r\n        />\r\n      </Button>\r\n      {isExpanded && (\r\n        <div className=\"mt-4 space-y-3\">\r\n          <p className=\"text-xs text-muted-foreground mb-3\">\r\n            Use estas credenciales para acceder a diferentes m贸dulos del sistema:\r\n          </p>\r\n          \r\n          <div className=\"grid gap-2\">\r\n            {mockCredentials?.map((cred, index) => (\r\n              <div key={index} className=\"p-3 bg-card border border-border rounded-md\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"text-xs font-medium text-foreground\">{cred?.role}</span>\r\n                  <Icon name=\"User\" size={12} className=\"text-muted-foreground\" />\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name=\"Mail\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground font-mono\">{cred?.email}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name=\"Key\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground font-mono\">{cred?.password}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"mt-3 p-2 bg-warning/10 border border-warning/20 rounded-md\">\r\n            <div className=\"flex items-start space-x-2\">\r\n              <Icon name=\"AlertTriangle\" size={14} className=\"text-warning flex-shrink-0 mt-0.5\" />\r\n              <p className=\"text-xs text-warning\">\r\n                Estas son credenciales de demostraci贸n. En producci贸n, use sus credenciales reales.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CredentialsHelper;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst SecurityFeatures = () => {\r\n  const securityFeatures = [\r\n    {\r\n      icon: 'Lock',\r\n      title: 'Encriptaci贸n de Extremo a Extremo',\r\n      description: 'Todos los datos se transmiten de forma segura'\r\n    },\r\n    {\r\n      icon: 'Shield',\r\n      title: 'Autenticaci贸n Multifactor',\r\n      description: 'Protecci贸n adicional para cuentas administrativas'\r\n    },\r\n    {\r\n      icon: 'Eye',\r\n      title: 'Monitoreo de Actividad',\r\n      description: 'Registro completo de accesos y actividades'\r\n    },\r\n    {\r\n      icon: 'Clock',\r\n      title: 'Sesiones Seguras',\r\n      description: 'Cierre autom谩tico por inactividad'\r\n    }\r\n  ];\r\n\r\n  const complianceItems = [\r\n    { name: 'LGPD M茅xico', status: 'Certificado' },\r\n    { name: 'NOM-151-SCFI', status: 'Cumple' },\r\n    { name: 'Facturaci贸n CFDI 4.0', status: 'Integrado' },\r\n    { name: 'Backup Diario', status: 'Activo' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"mt-8 space-y-6\">\r\n      {/* Security Features */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center space-x-2 mb-4\">\r\n          <Icon name=\"ShieldCheck\" size={20} className=\"text-success\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Caracter铆sticas de Seguridad</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {securityFeatures?.map((feature, index) => (\r\n            <div key={index} className=\"flex items-start space-x-3 p-3 bg-muted/30 rounded-md\">\r\n              <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                <Icon name={feature?.icon} size={16} className=\"text-primary\" />\r\n              </div>\r\n              <div>\r\n                <h4 className=\"text-sm font-medium text-foreground mb-1\">{feature?.title}</h4>\r\n                <p className=\"text-xs text-muted-foreground\">{feature?.description}</p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {/* Compliance Information */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center space-x-2 mb-4\">\r\n          <Icon name=\"FileCheck\" size={20} className=\"text-success\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Cumplimiento Normativo</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n          {complianceItems?.map((item, index) => (\r\n            <div key={index} className=\"flex items-center justify-between p-3 bg-success/5 border border-success/20 rounded-md\">\r\n              <span className=\"text-sm font-medium text-foreground\">{item?.name}</span>\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Icon name=\"CheckCircle\" size={14} className=\"text-success\" />\r\n                <span className=\"text-xs text-success font-medium\">{item?.status}</span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"mt-4 p-3 bg-primary/5 border border-primary/20 rounded-md\">\r\n          <div className=\"flex items-start space-x-2\">\r\n            <Icon name=\"Info\" size={16} className=\"text-primary flex-shrink-0 mt-0.5\" />\r\n            <div>\r\n              <p className=\"text-sm font-medium text-primary mb-1\">Certificaci贸n ISO 27001</p>\r\n              <p className=\"text-xs text-primary/80\">\r\n                Sistema de gesti贸n de seguridad de la informaci贸n certificado internacionalmente.\r\n                ltima auditor铆a: Septiembre {new Date()?.getFullYear()}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Support Information */}\r\n      <div className=\"text-center text-xs text-muted-foreground\">\r\n        <p>驴Necesita ayuda? Contacte a soporte t茅cnico:</p>\r\n        <div className=\"flex items-center justify-center space-x-4 mt-2\">\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Icon name=\"Phone\" size={12} />\r\n            <span>+52 (55) 1234-5678</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Icon name=\"Mail\" size={12} />\r\n            <span>soporte@aireflowpro.com</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SecurityFeatures;","import React, { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getDefaultPath } from '../../utils/auth';\r\nimport useAuth from '../../hooks/useAuth';\r\nimport CompanyBranding from './components/CompanyBranding';\r\nimport LoginForm from './components/LoginForm';\r\nimport CredentialsHelper from './components/CredentialsHelper';\r\nimport SecurityFeatures from './components/SecurityFeatures';\r\n\r\nconst LoginPage = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const { user, isAuthenticated } = useAuth();\r\n  useEffect(() => {\r\n    if (isAuthenticated && user?.rol) {\r\n      const defaultPath = getDefaultPath(user.rol);\r\n      navigate(defaultPath, { replace: true });\r\n    }\r\n    document.title = 'Iniciar Sesi贸n - AireFlow Pro';\r\n  }, [isAuthenticated, user, navigate]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100\">\r\n      <div className=\"flex flex-col lg:flex-row min-h-screen\">\r\n        {/* Left Panel - Login Form */}\r\n        <div className=\"flex-1 flex items-center justify-center p-6 lg:p-12\">\r\n          <div className=\"w-full max-w-md\">\r\n            {/* Company Branding */}\r\n            <CompanyBranding />\r\n            \r\n            {/* Login Form */}\r\n            <div className=\"bg-card border border-border rounded-xl shadow-lg p-8\">\r\n              <div className=\"mb-6\">\r\n                <h2 className=\"text-2xl font-bold text-foreground mb-2\">Bienvenido de Nuevo</h2>\r\n                <p className=\"text-muted-foreground\">\r\n                  Ingrese sus credenciales para acceder al sistema\r\n                </p>\r\n              </div>\r\n              \r\n              <LoginForm />\r\n            </div>\r\n\r\n            {/* Demo Credentials Helper */}\r\n            <CredentialsHelper />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Panel - Security Features */}\r\n        <div className=\"lg:w-1/2 bg-card border-l border-border p-6 lg:p-12 overflow-y-auto\">\r\n          <div className=\"max-w-lg mx-auto\">\r\n            <div className=\"mb-8\">\r\n              <h2 className=\"text-2xl font-bold text-foreground mb-4\">\r\n                Plataforma Empresarial Segura\r\n              </h2>\r\n              <p className=\"text-muted-foreground leading-relaxed\">\r\n                AireFlow Pro es la soluci贸n integral para la gesti贸n de empresas HVAC, \r\n                dise帽ada espec铆ficamente para el mercado mexicano con cumplimiento \r\n                normativo completo y caracter铆sticas de seguridad empresarial.\r\n              </p>\r\n            </div>\r\n\r\n            <SecurityFeatures />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Footer */}\r\n      <footer className=\"fixed bottom-0 left-0 right-0 bg-card/95 backdrop-blur-sm border-t border-border p-4\">\r\n        <div className=\"max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between text-xs text-muted-foreground\">\r\n          <div className=\"flex items-center space-x-4 mb-2 sm:mb-0\">\r\n            <span>漏 {new Date()?.getFullYear()} AireFlow Pro. Todos los derechos reservados.</span>\r\n            <span className=\"hidden sm:inline\">|</span>\r\n            <span>Versi贸n 2.1.4</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <button className=\"hover:text-foreground transition-smooth\">\r\n              Pol铆tica de Privacidad\r\n            </button>\r\n            <span>|</span>\r\n            <button className=\"hover:text-foreground transition-smooth\">\r\n              T茅rminos de Uso\r\n            </button>\r\n            <span>|</span>\r\n            <button className=\"hover:text-foreground transition-smooth\">\r\n              Soporte T茅cnico\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;","import React from \"react\";\r\nimport Select from \"../../../components/ui/Select\";\r\nimport Input from \"../../../components/ui/Input\";\r\nimport Button from \"../../../components/ui/Button\";\r\n\r\nconst FilterGastos = ({ filters, onFilterChange, onClearFilters, totalCount, filteredCount }) => {\r\n  const handleFilterChange = (key, value) => {\r\n    onFilterChange({ ...filters, [key]: value });\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters || {}).some(v => v !== \"\");\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 mb-6\">\r\n      {/* Buscador principal */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6\">\r\n        <div className=\"flex-1 max-w-md\">\r\n          <Input\r\n            type=\"search\"\r\n            placeholder=\"Buscar por proveedor..\"\r\n            value={filters?.search || \"\"}\r\n            onChange={(e) => handleFilterChange(\"search\", e.target.value)}\r\n            className=\"w-full\"\r\n          />\r\n        </div>\r\n\r\n        {hasActiveFilters && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            onClick={onClearFilters}\r\n            iconName=\"X\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Limpiar filtros\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Filtros adicionales */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\r\n        {/* C贸digo */}\r\n        <Input\r\n          type=\"text\"\r\n          label=\"C贸digo\"\r\n          placeholder=\"Ej. OC-2025-001\"\r\n          value={filters?.codigo || \"\"}\r\n          onChange={(e) => handleFilterChange(\"codigo\", e.target.value)}\r\n        />\r\n\r\n        {/* Fecha desde */}\r\n        <Input\r\n          type=\"date\"\r\n          label=\"Fecha desde\"\r\n          value={filters?.fechaDesde || \"\"}\r\n          onChange={(e) => handleFilterChange(\"fechaDesde\", e.target.value)}\r\n        />\r\n\r\n        {/* Fecha hasta */}\r\n        <Input\r\n          type=\"date\"\r\n          label=\"Fecha hasta\"\r\n          value={filters?.fechaHasta || \"\"}\r\n          onChange={(e) => handleFilterChange(\"fechaHasta\", e.target.value)}\r\n        />\r\n      </div>\r\n      <div className=\"text-sm text-muted-foreground mt-2\">\r\n        Mostrando <strong>{filteredCount}</strong> de <strong>{totalCount}</strong> resultados\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterGastos;\r\n","import React, { useEffect, useState, useMemo } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport useProyect from '../../../hooks/useProyect';\r\nconst FilterControls = ({ onFiltersChange, onExport, onReset }) => {\r\n  const [filters, setFilters] = useState({\r\n    dateRange: 'all',\r\n    startDate: '',\r\n    endDate: '',\r\n    category: '',\r\n    department: '',\r\n    status: '',\r\n    project: '',\r\n    amountMin: '',\r\n    amountMax: '',\r\n    searchTerm: ''\r\n  });\r\n\r\n  const [showAdvanced, setShowAdvanced] = useState(false);\r\n  const { getProyectos, proyectos } = useProyect();\r\n\r\n  // Cargar proyectos desde el hook\r\n  useEffect(() => {\r\n    getProyectos().catch(() => {});\r\n  }, [getProyectos]);\r\n\r\n  // Notificar filtros iniciales al padre\r\n  useEffect(() => {\r\n    onFiltersChange?.(filters);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  /* ==============================\r\n     OPCIONES DE SELECT\r\n  ============================== */\r\n  const dateRangeOptions = [\r\n    { value: 'all', label: 'Sin filtro' },\r\n    { value: 'today', label: 'Hoy' },\r\n    { value: 'thisWeek', label: 'Esta Semana' },\r\n    { value: 'thisMonth', label: 'Este Mes' },\r\n    { value: 'lastMonth', label: 'Mes Anterior' },\r\n    { value: 'thisQuarter', label: 'Este Trimestre' },\r\n    { value: 'thisYear', label: 'Este A帽o' },\r\n    { value: 'custom', label: 'Rango Personalizado' }\r\n  ];\r\n\r\n  const categoryOptions = [\r\n    { value: '', label: 'Todas las Categor铆as' },\r\n    { value: 'Viajes', label: 'Viajes' },\r\n    { value: 'Materiales', label: 'Materiales' },\r\n    { value: 'N贸mina', label: 'N贸mina' },\r\n    { value: 'Proveedores', label: 'Proveedores' },\r\n    { value: 'Equipos', label: 'Equipos' },\r\n    { value: 'Servicios', label: 'Servicios' }\r\n  ];\r\n\r\n  const departmentOptions = [\r\n    { value: '', label: 'Todos los Departamentos' },\r\n    { value: 'Administraci贸n', label: 'Administraci贸n' },\r\n    { value: 'Proyectos', label: 'Proyectos' },\r\n    { value: 'Ventas', label: 'Ventas' },\r\n    { value: 'Taller', label: 'Taller' },\r\n    { value: 'Operaciones', label: 'Operaciones' }\r\n  ];\r\n\r\n  //  Estado: solo Pendiente y Autorizado\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'Autorizado', label: 'Autorizado' }\r\n  ];\r\n\r\n  //  Proyectos cargados din谩micamente\r\n  const projectOptions = useMemo(() => {\r\n    const base = [{ value: '', label: 'Todos los Proyectos' }];\r\n    const seen = new Set();\r\n\r\n    const list = Array.isArray(proyectos) ? proyectos : [];\r\n    const opts = list\r\n      .map((p) => {\r\n        const id =\r\n          p?.id ?? p?._id ?? p?.proyectoId ?? p?.codigo ?? p?.code ?? null;\r\n\r\n        const nombre =\r\n          p?.nombreProyecto ??\r\n          p?.nombre ??\r\n          p?.name ??\r\n          p?.titulo ??\r\n          p?.descripcion ??\r\n          '';\r\n\r\n        const codigo =\r\n          p?.codigo ?? p?.code ?? p?.clave ?? p?.projectCode ?? '';\r\n\r\n        const value = codigo || id;\r\n        if (!value) return null;\r\n        if (seen.has(value)) return null;\r\n        seen.add(value);\r\n\r\n        //  solo muestra el nombre del proyecto, sin c贸digo\r\n        return { value, label: nombre || value };\r\n      })\r\n      .filter(Boolean);\r\n\r\n    return base.concat(opts);\r\n  }, [proyectos]);\r\n\r\n  /* ==============================\r\n     MANEJADORES\r\n  ============================== */\r\n  const handleFilterChange = (key, value) => {\r\n    let next = { ...filters, [key]: value };\r\n\r\n    if (key === 'dateRange' && value !== 'custom') {\r\n      next.startDate = '';\r\n      next.endDate = '';\r\n    }\r\n\r\n    if (key === 'amountMin' || key === 'amountMax') {\r\n      const raw = String(value ?? '');\r\n      next[key] = raw === '' ? '' : isNaN(Number(raw)) ? '' : raw;\r\n    }\r\n\r\n    setFilters(next);\r\n    onFiltersChange?.(next);\r\n  };\r\n\r\n  const handleReset = () => {\r\n    const resetFilters = {\r\n      dateRange: 'all',\r\n      startDate: '',\r\n      endDate: '',\r\n      category: '',\r\n      department: '',\r\n      status: '',\r\n      project: '',\r\n      amountMin: '',\r\n      amountMax: '',\r\n      searchTerm: ''\r\n    };\r\n    setFilters(resetFilters);\r\n    onReset?.(resetFilters);\r\n    onFiltersChange?.(resetFilters);\r\n  };\r\n\r\n  const getActiveFiltersCount = () => {\r\n    return Object.entries(filters).filter(([key, value]) => {\r\n      if (key === 'dateRange') return value !== 'all';\r\n      return value !== '';\r\n    }).length;\r\n  };\r\n\r\n  /* ==============================\r\n     RENDER\r\n  ============================== */\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 space-y-4\">\r\n      {/*  Buscador y bot贸n de filtros */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\r\n        <div className=\"flex-1 max-w-md\">\r\n          <div className=\"relative\">\r\n            <Input\r\n              type=\"search\"\r\n              placeholder=\"Buscar gastos, proveedores, proyectos...\"\r\n              value={filters.searchTerm}\r\n              onChange={(e) => handleFilterChange('searchTerm', e?.target?.value)}\r\n              className=\"pl-10\"\r\n            />\r\n            <Icon\r\n              name=\"Search\"\r\n              size={16}\r\n              className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => setShowAdvanced(!showAdvanced)}\r\n            iconName={showAdvanced ? 'ChevronUp' : 'ChevronDown'}\r\n            iconPosition=\"right\"\r\n          >\r\n            Filtros Avanzados\r\n            {getActiveFiltersCount() > 0 && (\r\n              <span className=\"ml-2 px-2 py-1 bg-primary text-primary-foreground text-xs rounded-full\">\r\n                {getActiveFiltersCount()}\r\n              </span>\r\n            )}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtros b谩sicos */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Select\r\n          label=\"Rango de Fechas\"\r\n          options={dateRangeOptions}\r\n          value={filters.dateRange}\r\n          onChange={(value) => handleFilterChange('dateRange', value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Categor铆a\"\r\n          options={categoryOptions}\r\n          value={filters.category}\r\n          onChange={(value) => handleFilterChange('category', value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Estado\"\r\n          options={statusOptions}\r\n          value={filters.status}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Proyecto\"\r\n          options={projectOptions}\r\n          value={filters.project}\r\n          onChange={(value) => handleFilterChange('project', value)}\r\n          searchable\r\n        />\r\n      </div>\r\n\r\n      {/* Filtro de fechas personalizadas */}\r\n      {filters.dateRange === 'custom' && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-muted rounded-lg\">\r\n          <Input\r\n            type=\"date\"\r\n            label=\"Fecha Inicio\"\r\n            value={filters.startDate}\r\n            onChange={(e) => handleFilterChange('startDate', e?.target?.value)}\r\n          />\r\n          <Input\r\n            type=\"date\"\r\n            label=\"Fecha Fin\"\r\n            value={filters.endDate}\r\n            onChange={(e) => handleFilterChange('endDate', e?.target?.value)}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Filtros avanzados */}\r\n      {showAdvanced && (\r\n        <div className=\"border-t border-border pt-4 space-y-4\">\r\n          <h4 className=\"text-sm font-medium text-foreground\">Filtros Avanzados</h4>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            <Select\r\n              label=\"Departamento\"\r\n              options={departmentOptions}\r\n              value={filters.department}\r\n              onChange={(value) => handleFilterChange('department', value)}\r\n            />\r\n\r\n            <Input\r\n              type=\"number\"\r\n              label=\"Monto M铆nimo (MXN)\"\r\n              placeholder=\"0.00\"\r\n              value={filters.amountMin}\r\n              onChange={(e) => handleFilterChange('amountMin', e?.target?.value)}\r\n            />\r\n\r\n            <Input\r\n              type=\"number\"\r\n              label=\"Monto M谩ximo (MXN)\"\r\n              placeholder=\"999999.99\"\r\n              value={filters.amountMax}\r\n              onChange={(e) => handleFilterChange('amountMax', e?.target?.value)}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between pt-4 border-t border-border\">\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              {getActiveFiltersCount()} filtro{getActiveFiltersCount() !== 1 ? 's' : ''} activo{getActiveFiltersCount() !== 1 ? 's' : ''}\r\n            </div>\r\n            <Button\r\n              variant=\"ghost\"\r\n              onClick={handleReset}\r\n              iconName=\"RotateCcw\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Limpiar Filtros\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterControls;\r\n","// services/finanzasService.js\r\nimport httpService from './httpService';\r\n\r\nconst finanzasService = {\r\n  async getGastos() {\r\n    try {\r\n      const data = await httpService.get('/gastos');\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error al obtener gastos:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getGastoById(id) {\r\n    try {\r\n      const data = await httpService.get(`/gastos/${id}`);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al obtener el gasto con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createGasto(payload) {\r\n    try {\r\n      const data = await httpService.post('/gastos/crear', payload);\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error al crear gasto:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateGasto(id, payload) {\r\n    try {\r\n      const data = await httpService.put(`/gastos/${id}`, payload);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al actualizar el gasto con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deleteGasto(id) {\r\n    try {\r\n      const data = await httpService.delete(`/gastos/${id}`);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al eliminar el gasto con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default finanzasService;\r\n","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport { useNotifications } from 'context/NotificationContext';\r\n\r\nconst PaymentAuthorizationModal = ({ isOpen, onClose, expense, onAuthorize, onDelete }) => {\r\n  const {\r\n    showHttpError,\r\n    showOperationSuccess,\r\n    showConfirm,\r\n  } = useNotifications();\r\n\r\n  const [authData, setAuthData] = useState({\r\n    authorizationLevel: '',\r\n    approverComments: '',\r\n    paymentMethod: '',\r\n    scheduledDate: '',\r\n    priority: 'normal',\r\n    requiresAdditionalApproval: false\r\n  });\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  const authorizationLevels = [\r\n    { value: 'supervisor', label: 'Supervisor de Departamento' },\r\n    { value: 'manager', label: 'Gerente de rea' },\r\n    { value: 'director', label: 'Director Financiero' },\r\n    { value: 'executive', label: 'Direcci贸n Ejecutiva' }\r\n  ];\r\n\r\n  const paymentMethods = [\r\n    { value: 'transfer', label: 'Transferencia Bancaria' },\r\n    { value: 'check', label: 'Cheque' },\r\n    { value: 'cash', label: 'Efectivo' },\r\n    { value: 'card', label: 'Tarjeta Corporativa' }\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: 'low', label: 'Baja' },\r\n    { value: 'normal', label: 'Normal' },\r\n    { value: 'high', label: 'Alta' },\r\n    { value: 'urgent', label: 'Urgente' }\r\n  ];\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setAuthData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!expense) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      await onAuthorize?.({\r\n        id: expense?.id,\r\n        status: 'approved', // ingl茅s, como tu API\r\n        ...authData,\r\n        amount: parseFloat(expense?.amount?.replace(/[^0-9.-]+/g, '')) || 0\r\n      });\r\n\r\n      // Notificaci贸n de 茅xito\r\n      showOperationSuccess('update', 'Pago');\r\n\r\n      onClose?.();\r\n    } catch (error) {\r\n      console.error('Error authorizing payment:', error);\r\n      // Notificaci贸n de error HTTP\r\n      showHttpError(error, 'Error al autorizar el pago');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    if (!expense?.id) return;\r\n\r\n    // Usamos tu notificaci贸n de confirmaci贸n en lugar de window.confirm\r\n    showConfirm(\r\n      `驴Deseas eliminar este pago \"${expense?.description || ''}\"?`,\r\n      {\r\n        onConfirm: async () => {\r\n          setIsDeleting(true);\r\n          try {\r\n            await onDelete?.(expense.id);\r\n            showOperationSuccess('delete', 'Pago');\r\n            onClose?.();\r\n          } catch (err) {\r\n            console.error('Error eliminando pago:', err);\r\n            showHttpError(err, 'Error al eliminar el pago');\r\n          } finally {\r\n            setIsDeleting(false);\r\n          }\r\n        },\r\n        onCancel: () => {\r\n          // Si quieres hacer algo extra al cancelar, lo agregas aqu铆\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    })?.format(amount);\r\n  };\r\n\r\n  const getRequiredAuthLevel = (amount) => {\r\n    const numAmount = parseFloat(amount?.replace(/[^0-9.-]+/g, ''));\r\n    if (numAmount > 100000) return 'executive';\r\n    if (numAmount > 50000) return 'director';\r\n    if (numAmount > 10000) return 'manager';\r\n    return 'supervisor';\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card rounded-lg shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Autorizaci贸n de Pago</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Revisar y autorizar el gasto seleccionado</p>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n            disabled={isSubmitting || isDeleting}\r\n          >\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {/* Expense Details */}\r\n          <div className=\"bg-muted rounded-lg p-4 space-y-3\">\r\n            <h3 className=\"font-medium text-foreground\">Detalles del Gasto</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Descripci贸n:</span>\r\n                <p className=\"text-foreground font-medium\">{expense?.description}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Monto:</span>\r\n                <p className=\"text-foreground font-bold text-lg\">{expense?.amount}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Categor铆a:</span>\r\n                <p className=\"text-foreground\">{expense?.category}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Proyecto:</span>\r\n                <p className=\"text-foreground\">{expense?.project}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Fecha:</span>\r\n                <p className=\"text-foreground\">{expense?.date}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Solicitante:</span>\r\n                <p className=\"text-foreground\">{expense?.requestedBy || 'Juan P茅rez'}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Payment Details */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"CreditCard\" size={16} className=\"text-primary\" />\r\n              <h3 className=\"font-medium text-foreground\">Detalles de Pago</h3>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <Select\r\n                label=\"M茅todo de Pago\"\r\n                options={paymentMethods}\r\n                value={authData?.paymentMethod}\r\n                onChange={(value) => handleInputChange('paymentMethod', value)}\r\n                required\r\n              />\r\n\r\n              <Input\r\n                type=\"date\"\r\n                label=\"Fecha Programada\"\r\n                value={authData?.scheduledDate}\r\n                onChange={(e) => handleInputChange('scheduledDate', e?.target?.value)}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={authData?.priority}\r\n              onChange={(value) => handleInputChange('priority', value)}\r\n            />\r\n          </div>\r\n\r\n          {/* Comments */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm font-medium text-foreground\">\r\n              Comentarios del Aprobador\r\n            </label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent resize-none\"\r\n              rows={4}\r\n              placeholder=\"Agregue comentarios sobre la autorizaci贸n...\"\r\n              value={authData?.approverComments}\r\n              onChange={(e) => handleInputChange('approverComments', e?.target?.value)}\r\n            />\r\n          </div>\r\n\r\n          {/* Additional Approval */}\r\n          <div className=\"flex items-center space-x-3\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"additionalApproval\"\r\n              checked={authData?.requiresAdditionalApproval}\r\n              onChange={(e) => handleInputChange('requiresAdditionalApproval', e?.target?.checked)}\r\n              className=\"w-4 h-4 text-primary bg-input border-border rounded focus:ring-ring\"\r\n            />\r\n            <label htmlFor=\"additionalApproval\" className=\"text-sm text-foreground\">\r\n              Requiere aprobaci贸n adicional de nivel superior\r\n            </label>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex items-center justify-between pt-6 border-t border-border\">\r\n            {/* Bot贸n eliminar */}\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"destructive\"\r\n              iconName=\"Trash2\"\r\n              iconPosition=\"left\"\r\n              onClick={handleDelete}\r\n              disabled={isSubmitting || isDeleting}\r\n            >\r\n              {isDeleting ? 'Eliminando' : 'Eliminar pago'}\r\n            </Button>\r\n\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                onClick={onClose}\r\n                disabled={isSubmitting || isDeleting}\r\n              >\r\n                Cancelar\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"success\"\r\n                loading={isSubmitting}\r\n                disabled={isDeleting}\r\n                iconName=\"Check\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Autorizar Pago\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentAuthorizationModal;\r\n","// hooks/useFinanzas.js\r\nimport { useState } from 'react';\r\nimport finanzasService from '../services/finanzasService';\r\n\r\n// Util: toma data de {success, data} o del objeto plano\r\nconst unwrap = (resp) => (resp && typeof resp === 'object' && 'data' in resp ? resp.data : resp);\r\n// Util: id seguro (id o _id)\r\nconst getId = (o) => (o && (o.id ?? o._id));\r\n\r\nconst useFinanzas = () => {\r\n  const [finanzas, setFinanzas] = useState([]); // Puedes renombrar a \"gastos\" si gustas; mantengo \"finanzas\" por compatibilidad\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Obtener todos los gastos\r\n  const getGastos = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await finanzasService.getGastos();\r\n      const list = unwrap(resp);\r\n      if (Array.isArray(list)) {\r\n        setFinanzas(list);\r\n      } else {\r\n        setFinanzas([]);\r\n      }\r\n      return list ?? [];\r\n    } catch (err) {\r\n      console.error('Error en useFinanzas.getGastos:', err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Obtener un gasto por ID\r\n  const getGastoById = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await finanzasService.getGastoById(id);\r\n      const item = unwrap(resp);\r\n      return item;\r\n    } catch (err) {\r\n      console.error('Error en useFinanzas.getGastoById:', err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Crear un nuevo gasto\r\n  const createGasto = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await finanzasService.createGasto(payload);\r\n      const created = unwrap(resp);\r\n      if (created) {\r\n        setFinanzas((prev) => [...prev, created]);\r\n      }\r\n      return created;\r\n    } catch (err) {\r\n      console.error('Error en useFinanzas.createGasto:', err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Actualizar un gasto existente\r\n  const updateGasto = async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await finanzasService.updateGasto(id, payload);\r\n      const updated = unwrap(resp);\r\n      const targetId = id ?? getId(updated);\r\n\r\n      if (targetId !== undefined) {\r\n        setFinanzas((prev) =>\r\n          prev.map((f) => (getId(f) === targetId ? { ...f, ...updated } : f))\r\n        );\r\n      }\r\n      return updated;\r\n    } catch (err) {\r\n      console.error('Error en useFinanzas.updateGasto:', err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Eliminar un gasto\r\n  const deleteGasto = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await finanzasService.deleteGasto(id);\r\n      // Si tu API devuelve { success: true } o el item borrado, igual filtramos localmente\r\n      setFinanzas((prev) => prev.filter((f) => getId(f) !== id));\r\n      return unwrap(resp) ?? true;\r\n    } catch (err) {\r\n      console.error('Error en useFinanzas.deleteGasto:', err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    finanzas,  // lista local (gastos)\r\n    loading,\r\n    error,\r\n    // M茅todos alineados al service:\r\n    getGastos,\r\n    getGastoById,\r\n    createGasto,\r\n    updateGasto,\r\n    deleteGasto,\r\n  };\r\n};\r\n\r\nexport default useFinanzas;\r\n","// modules/finanzas/ExpenseTable.jsx\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport finanzasService from 'services/finanzasService';\r\nimport PaymentAuthorizationModal from './PaymentAuthorizationModal';\r\nimport useProyect from '../../../hooks/useProyect';\r\nimport useFinanzas from '../../../hooks/useFinanzas';\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\n/* ===================== Utils ===================== */\r\n// Parser tolerante (ISO, timestamp, dd/mm/yyyy [opcional hora])\r\nconst parseISODate = (value) => {\r\n  if (!value) return null;\r\n  if (value instanceof Date && !isNaN(value)) return value;\r\n\r\n  // num茅rico/timestamp\r\n  if (typeof value === 'number' || /^\\d+$/.test(String(value))) {\r\n    const d = new Date(Number(value));\r\n    return isNaN(d) ? null : d;\r\n  }\r\n\r\n  const s = String(value).trim();\r\n\r\n  // dd/mm/yyyy o dd/mm/yyyy HH:MM\r\n  const m = s.match(/^(\\d{2})\\/(\\d{2})\\/(\\d{4})(?:\\s+(\\d{2}):(\\d{2}))?$/);\r\n  if (m) {\r\n    const [, dd, mm, yyyy, HH = '00', MM = '00'] = m;\r\n    const d = new Date(Number(yyyy), Number(mm) - 1, Number(dd), Number(HH), Number(MM), 0, 0);\r\n    return isNaN(d) ? null : d;\r\n  }\r\n\r\n  const d = new Date(s);\r\n  return isNaN(d) ? null : d;\r\n};\r\n\r\nconst formatDate = (date) => {\r\n  const d = date instanceof Date ? date : parseISODate(date);\r\n  if (!d) return '';\r\n  return d.toLocaleDateString('es-MX', { day: '2-digit', month: '2-digit', year: 'numeric' });\r\n};\r\nconst toNumber = (v) => {\r\n  if (v === null || v === undefined || v === '') return null;\r\n  if (typeof v === 'number') return v;\r\n  const cleaned = String(v).replace(/[^0-9.-]/g, '');\r\n  const num = Number(cleaned);\r\n  return Number.isNaN(num) ? null : num;\r\n};\r\nconst formatCurrency = (amount) => {\r\n  const n = toNumber(amount);\r\n  if (n === null) return '';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(n);\r\n};\r\nconst getExpenseStatusColor = (statusValue) => {\r\n  const v = (statusValue || '').toString().toLowerCase().trim();\r\n  const map = {\r\n    pendiente: 'bg-yellow-100 text-yellow-800',\r\n    aprobado: 'bg-green-100 text-green-800',\r\n    autorizado: 'bg-green-100 text-green-800',\r\n    rechazado: 'bg-red-100 text-red-800',\r\n    pagado: 'bg-emerald-100 text-emerald-800',\r\n    programado: 'bg-blue-100 text-blue-800',\r\n    pending: 'bg-yellow-100 text-yellow-800',\r\n    approved: 'bg-green-100 text-green-800',\r\n    authorized: 'bg-green-100 text-green-800',\r\n    rejected: 'bg-red-100 text-red-800',\r\n    paid: 'bg-emerald-100 text-emerald-800',\r\n    scheduled: 'bg-blue-100 text-blue-800',\r\n  };\r\n  return map[v] || 'bg-gray-100 text-gray-800';\r\n};\r\n\r\nconst normId = (v) => (v == null ? '' : String(v).trim());\r\nconst normCode = (v) => (v == null ? '' : String(v).trim().toUpperCase());\r\n\r\n//  Helper para identificar un gasto por su id\r\nconst getDocKey = (d) =>\r\n  String(\r\n    d?.id ??\r\n      d?._id ??\r\n      d?.gastoId ??\r\n      d?.gastoID ??\r\n      d?.Id ??\r\n      d?.ID ??\r\n      ''\r\n  );\r\n\r\n/* ====== Map de documento  fila (join con proyectos) ====== */\r\nconst mapGastoDocWithProjects = (doc, projectById, projectByCode) => {\r\n  const id = doc.id ?? doc._id ?? doc.gastoId ?? `${Math.random()}`;\r\n\r\n  let date = doc.fecha ?? doc.date ?? doc.fechaGasto ?? doc.createdAt ?? null;\r\n  if (!doc.date && doc.fecha && doc.hora) {\r\n    const hhmm = String(doc.hora).slice(0, 5);\r\n    date = `${doc.fecha}T${hhmm}`;\r\n  }\r\n\r\n  const category = doc.categoria ?? doc.category ?? doc.tipo ?? '';\r\n  const description = doc.descripcion ?? doc.description ?? doc.concepto ?? '';\r\n  const amount = doc.monto ?? doc.amount ?? doc.total ?? doc.importe ?? null;\r\n  const status = doc.estado ?? doc.status ?? doc.aprobacion ?? doc.paymentStatus ?? 'Pendiente';\r\n\r\n  const proyectoNode = doc.proyecto ?? doc.project ?? {};\r\n  const projectIdRaw =\r\n    doc.idProyecto ??\r\n    doc.proyectoId ??\r\n    doc.projectId ??\r\n    proyectoNode?.id ??\r\n    proyectoNode?._id ??\r\n    proyectoNode?.proyectoId ??\r\n    null;\r\n  const projectCodeRaw =\r\n    doc.codigoProyecto ?? doc.projectCode ?? proyectoNode?.codigo ?? proyectoNode?.code ?? '';\r\n  let projectName =\r\n    doc.proyectoNombre ??\r\n    doc.projectName ??\r\n    proyectoNode?.nombre ??\r\n    proyectoNode?.name ??\r\n    doc.nombreProyecto ??\r\n    '';\r\n  let projectCode = projectCodeRaw || '';\r\n\r\n  const pid = normId(projectIdRaw);\r\n  if (!projectName && pid && projectById[pid]) {\r\n    projectName = projectById[pid].nombre || projectName;\r\n    if (!projectCode) projectCode = projectById[pid].codigo || '';\r\n  }\r\n  const pcode = normCode(projectCode);\r\n  if (!projectName && pcode && projectByCode[pcode]) {\r\n    projectName = projectByCode[pcode].nombre || projectName;\r\n    if (!projectCode) projectCode = projectByCode[pcode].codigo || '';\r\n  }\r\n\r\n  const requestedBy = doc.solicitadoPor ?? doc.requestedBy ?? doc.solicitante ?? doc.createdByName ?? '';\r\n  const department = doc.presupuestoDepartamento ?? doc.department ?? doc.departamento ?? '';\r\n\r\n  return {\r\n    id,\r\n    date,\r\n    category,\r\n    description,\r\n    amount,\r\n    status,\r\n    project: { id: pid || null, name: projectName || '', code: projectCode || '' },\r\n    requestedBy,\r\n    department,\r\n    raw: doc,\r\n  };\r\n};\r\n\r\n/* ======== Rango de fechas helpers ======== */\r\nconst startOfToday = () => { const d = new Date(); d.setHours(0,0,0,0); return d; };\r\nconst endOfToday = () => { const d = new Date(); d.setHours(23,59,59,999); return d; };\r\nconst addDays = (d, n) => { const x = new Date(d); x.setDate(x.getDate()+n); return x; };\r\nconst startOfMonth = (d) => new Date(d.getFullYear(), d.getMonth(), 1);\r\nconst endOfMonth = (d) => new Date(d.getFullYear(), d.getMonth()+1, 0, 23,59,59,999);\r\nconst startOfYear = (d) => new Date(d.getFullYear(), 0, 1);\r\nconst endOfYear = (d) => new Date(d.getFullYear(), 11, 31, 23,59,59,999);\r\nconst getQuarterRange = (d) => {\r\n  const q = Math.floor(d.getMonth()/3);\r\n  const start = new Date(d.getFullYear(), q*3, 1);\r\n  const end = new Date(d.getFullYear(), q*3 + 3, 0, 23,59,59,999);\r\n  return { start, end };\r\n};\r\n\r\n/* ======================================================\r\n   Tabla anclada a filtros externos (pasados por props)\r\n====================================================== */\r\nconst ExpenseTable = ({ filters: externalFilters }) => {\r\n  const [remoteRows, setRemoteRows] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n  const [sortConfig, setSortConfig] = useState({ key: 'date', direction: 'desc' });\r\n  const [selectedIds, setSelectedIds] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  const [showAuthModal, setShowAuthModal] = useState(false);\r\n  const [selectedExpense, setSelectedExpense] = useState(null);\r\n\r\n  const { getProyectos, proyectos } = useProyect();\r\n  const { deleteGasto } = useFinanzas();\r\n\r\n  useEffect(() => { getProyectos().catch(() => {}); }, [getProyectos]);\r\n\r\n  // Carga inicial de gastos\r\n  useEffect(() => {\r\n    let alive = true;\r\n    (async () => {\r\n      setLoading(true);\r\n      setErrorMsg('');\r\n      try {\r\n        const res = await finanzasService.getGastos();\r\n        const list = Array.isArray(res)\r\n          ? res\r\n          : Array.isArray(res?.data)\r\n          ? res.data\r\n          : Array.isArray(res?.data?.items)\r\n          ? res.data.items\r\n          : [];\r\n        if (!alive) return;\r\n        setRemoteRows(list);\r\n      } catch (err) {\r\n        console.error('Error getGastos:', err);\r\n        if (alive) setErrorMsg('No se pudieron cargar los gastos.');\r\n      } finally {\r\n        if (alive) setLoading(false);\r\n      }\r\n    })();\r\n    return () => { alive = false; };\r\n  }, []);\r\n\r\n  //  Escuchar gastos nuevos creados desde el modal (sin refrescar la p谩gina)\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    const handler = (ev) => {\r\n      let doc = ev?.detail;\r\n      if (!doc) return;\r\n\r\n      // Por si el modal manda { data: gasto }\r\n      if (doc.data && typeof doc.data === 'object' && !Array.isArray(doc.data)) {\r\n        doc = doc.data;\r\n      }\r\n\r\n      setRemoteRows((prev) => {\r\n        const keyNew = getDocKey(doc);\r\n        // si no hay id, lo metemos igual al inicio\r\n        if (!keyNew) return [doc, ...prev];\r\n\r\n        const exists = prev.some((d) => getDocKey(d) === keyNew);\r\n        if (exists) return prev;\r\n\r\n        return [doc, ...prev];\r\n      });\r\n    };\r\n\r\n    window.addEventListener('gasto:created', handler);\r\n    return () => window.removeEventListener('gasto:created', handler);\r\n  }, []);\r\n\r\n  const { projectById, projectByCode } = useMemo(() => {\r\n    const byId = {};\r\n    const byCode = {};\r\n    (proyectos || []).forEach((p) => {\r\n      const id = normId(p.id ?? p._id ?? p.proyectoId ?? p.codigo ?? p.code);\r\n      const nombre = p.nombreProyecto ?? p.nombre ?? p.name ?? p.titulo ?? p.descripcion ?? '';\r\n      const codigo = p.codigo ?? p.code ?? p.clave ?? p.projectCode ?? '';\r\n      if (id) byId[id] = { nombre, codigo };\r\n      const ncode = normCode(codigo);\r\n      if (ncode) byCode[ncode] = { nombre, codigo };\r\n    });\r\n    return { projectById: byId, projectByCode: byCode };\r\n  }, [proyectos]);\r\n\r\n  const rows = useMemo(\r\n    () =>\r\n      Array.isArray(remoteRows)\r\n        ? remoteRows.map((d) => mapGastoDocWithProjects(d, projectById, projectByCode))\r\n        : [],\r\n    [remoteRows, projectById, projectByCode]\r\n  );\r\n\r\n  /* ===== Filtros externos ===== */\r\n  const defaultFilters = {\r\n    dateRange: 'all',\r\n    startDate: '', endDate: '',\r\n    category: '', department: '', status: '',\r\n    project: '', amountMin: '', amountMax: '', searchTerm: ''\r\n  };\r\n  const f = externalFilters ?? defaultFilters;\r\n\r\n  const applyFilters = (list) => {\r\n    if (!Array.isArray(list)) return [];\r\n\r\n    const term = (f.searchTerm || '').toLowerCase().trim();\r\n    const cat  = (f.category || '').toLowerCase();\r\n    const dep  = (f.department || '').toLowerCase();\r\n    const sta  = (f.status || '').toLowerCase();\r\n    const proj = (f.project || '').toLowerCase();\r\n    const min  = f.amountMin !== '' ? Number(f.amountMin) : null;\r\n    const max  = f.amountMax !== '' ? Number(f.amountMax) : null;\r\n\r\n    let rangeStart = null, rangeEnd = null;\r\n    const now = new Date();\r\n    switch (f.dateRange) {\r\n      case 'all':\r\n        rangeStart = null; rangeEnd = null; break;\r\n      case 'today':\r\n        rangeStart = startOfToday(); rangeEnd = endOfToday(); break;\r\n      case 'thisWeek': {\r\n        const today = startOfToday(); const dow = today.getDay();\r\n        rangeStart = addDays(today, -(dow || 7) + 1); rangeStart.setHours(0,0,0,0);\r\n        rangeEnd = addDays(rangeStart, 6); rangeEnd.setHours(23,59,59,999); break;\r\n      }\r\n      case 'thisMonth':\r\n        rangeStart = startOfMonth(now); rangeEnd = endOfMonth(now); break;\r\n      case 'lastMonth': {\r\n        const prev = new Date(now.getFullYear(), now.getMonth()-1, 1);\r\n        rangeStart = startOfMonth(prev); rangeEnd = endOfMonth(prev); break;\r\n      }\r\n      case 'thisQuarter': {\r\n        const { start, end } = getQuarterRange(now);\r\n        rangeStart = start; rangeEnd = end; break;\r\n      }\r\n      case 'thisYear':\r\n        rangeStart = startOfYear(now); rangeEnd = endOfYear(now); break;\r\n      case 'custom':\r\n        rangeStart = f.startDate ? new Date(f.startDate) : null;\r\n        rangeEnd   = f.endDate   ? new Date(`${f.endDate}T23:59:59.999`) : null;\r\n        break;\r\n      default:\r\n        rangeStart = null; rangeEnd = null; break;\r\n    }\r\n\r\n    return list.filter((r) => {\r\n      if (f.dateRange !== 'all' && (rangeStart || rangeEnd)) {\r\n        const d = parseISODate(r.date);\r\n        if (!d) return false;\r\n        if (rangeStart && d < rangeStart) return false;\r\n        if (rangeEnd   && d > rangeEnd) return false;\r\n      }\r\n\r\n      if (cat && (r.category || '').toLowerCase() !== cat) return false;\r\n\r\n      if (dep) {\r\n        const rowDep = (r.department || '').toLowerCase();\r\n        if (rowDep !== dep) return false;\r\n      }\r\n\r\n      if (sta) {\r\n        const rowSta = (r.status || r.estado || '').toLowerCase();\r\n        const aliases = {\r\n          pendiente: ['pendiente','pending'],\r\n          aprobado:  ['aprobado','approved'],\r\n          autorizado:['autorizado','authorized'],\r\n          rechazado: ['rechazado','rejected'],\r\n          pagado:    ['pagado','paid'],\r\n          programado:['programado','scheduled'],\r\n        };\r\n        const wanted = aliases[sta] || [sta];\r\n        if (!wanted.includes(rowSta)) return false;\r\n      }\r\n\r\n      if (proj) {\r\n        const pname = (r.project?.name || '').toLowerCase();\r\n        const pcode = (r.project?.code || '').toLowerCase();\r\n        if (!pname.includes(proj) && !pcode.includes(proj)) return false;\r\n      }\r\n\r\n      const amt = toNumber(r.amount);\r\n      if (min !== null && (amt === null || amt < min)) return false;\r\n      if (max !== null && (amt === null || amt > max)) return false;\r\n\r\n      if (term) {\r\n        const hit =\r\n          (r.description || '').toLowerCase().includes(term) ||\r\n          (r.category || '').toLowerCase().includes(term) ||\r\n          (r.requestedBy || '').toLowerCase().includes(term) ||\r\n          (r.project?.name || '').toLowerCase().includes(term) ||\r\n          (r.project?.code || '').toLowerCase().includes(term);\r\n        if (!hit) return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  };\r\n\r\n  const filteredRows = useMemo(() => applyFilters(rows), [rows, externalFilters]);\r\n\r\n  /* ================= Ordenamiento ================= */\r\n  const handleSort = (key) => {\r\n    setSortConfig((prev) => ({\r\n      key,\r\n      direction: prev?.key === key && prev?.direction === 'asc' ? 'desc' : 'asc',\r\n    }));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const sortedRows = useMemo(() => {\r\n    const list = [...filteredRows];\r\n    const { key, direction } = sortConfig || {};\r\n    if (!key) return list;\r\n    return list.sort((a, b) => {\r\n      if (key === 'date') {\r\n        const aTime = parseISODate(a.date)?.getTime() ?? -Infinity;\r\n        const bTime = parseISODate(b.date)?.getTime() ?? -Infinity;\r\n        return direction === 'asc' ? aTime - bTime : bTime - aTime;\r\n      }\r\n      if (key === 'amount') {\r\n        const an = toNumber(a.amount) ?? -Infinity;\r\n        const bn = toNumber(b.amount) ?? -Infinity;\r\n        return direction === 'asc' ? an - bn : bn - an;\r\n      }\r\n      return 0;\r\n    });\r\n  }, [filteredRows, sortConfig]);\r\n\r\n  // Paginaci贸n\r\n  const totalItems = sortedRows.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedRows = sortedRows.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  /* ================= Selecci贸n ================= */\r\n  const toggleOne = (id) => {\r\n    setSelectedIds((prev) => (prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]));\r\n  };\r\n  const toggleAll = () => {\r\n    const pageIds = paginatedRows.map((r) => r.id);\r\n    const allSelected = pageIds.every((id) => selectedIds.includes(id));\r\n    if (allSelected) {\r\n      setSelectedIds((prev) => prev.filter((id) => !pageIds.includes(id)));\r\n    } else {\r\n      setSelectedIds((prev) => Array.from(new Set([...prev, ...pageIds])));\r\n    }\r\n  };\r\n\r\n  /* ======= Ver / Autorizar / Eliminar ======= */\r\n  const handleOpenView = (row) => {\r\n    setSelectedExpense({\r\n      id: row.id,\r\n      description: row.description || '',\r\n      amount: formatCurrency(row.amount),\r\n      category: row.category || '',\r\n      project: row.project?.name || row.project?.code || '',\r\n      date: formatDate(row.date),\r\n      requestedBy: row.requestedBy || '',\r\n    });\r\n    setShowAuthModal(true);\r\n  };\r\n\r\n  //  AQU EL CAMBIO IMPORTANTE PARA QUE SE ACTUALICE A \"AUTORIZADO\"\r\n  const handleAuthorizePayment = async ({\r\n    id,\r\n    authorizationLevel,\r\n    approverComments,\r\n    paymentMethod,\r\n    scheduledDate,\r\n    priority,\r\n    requiresAdditionalApproval,\r\n    // ... lo que m谩s te mande el modal, lo ignoramos si no se usa\r\n  }) => {\r\n    if (!id) return;\r\n    const expenseId = id;\r\n\r\n    const payload = {\r\n      estado: 'Autorizado',\r\n      status: 'authorized',\r\n      paymentStatus: 'authorized',\r\n      autorizacion: {\r\n        nivel: authorizationLevel,\r\n        comentariosAprobador: approverComments,\r\n        metodoPago: paymentMethod,\r\n        fechaProgramada: scheduledDate,\r\n        prioridad: priority,\r\n        requiereAprobacionAdicional: !!requiresAdditionalApproval,\r\n        fechaAutorizacion: new Date().toISOString(),\r\n      },\r\n    };\r\n\r\n    // Optimistic update: cambiar estado en la tabla al instante\r\n    setRemoteRows((prev) =>\r\n      prev.map((d) => {\r\n        const _id = d.id ?? d._id ?? d.gastoId;\r\n        if (String(_id) !== String(expenseId)) return d;\r\n        return {\r\n          ...d,\r\n          ...payload,\r\n          autorizacion: { ...(d.autorizacion || {}), ...payload.autorizacion },\r\n        };\r\n      })\r\n    );\r\n\r\n    try {\r\n      await finanzasService.updateGasto(expenseId, payload);\r\n    } catch (e) {\r\n      console.error(e);\r\n      // si quieres, puedes revertir el cambio ac谩 guardando un snapshot antes\r\n    }\r\n  };\r\n\r\n  const handleDeleteExpense = async (expenseId) => {\r\n    const snapshot = remoteRows;\r\n    setRemoteRows((p) => p.filter((d) => String(d.id ?? d._id ?? d.gastoId) !== String(expenseId)));\r\n    try { await deleteGasto(expenseId); } catch (e) { console.error(e); setRemoteRows(snapshot); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n      {loading && remoteRows.length === 0 && (\r\n        <div className=\"p-4 text-sm text-muted-foreground\">Cargando gastos</div>\r\n      )}\r\n      {!!errorMsg && <div className=\"p-4 text-sm text-red-600\">{errorMsg}</div>}\r\n\r\n      {/* Desktop */}\r\n      <div className=\"hidden lg:block overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-muted/50\">\r\n            <tr>\r\n              <th className=\"w-12 p-4\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={paginatedRows.length > 0 && paginatedRows.every((r) => selectedIds.includes(r.id))}\r\n                  onChange={toggleAll}\r\n                  className=\"rounded border-border\"\r\n                />\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('date')} className=\"flex items-center gap-1 hover:text-primary\">\r\n                  <span>Fecha</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Categor铆a</th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Descripci贸n</th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('amount')} className=\"flex items-center gap-1 hover:text-primary\">\r\n                  <span>Monto</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Estado</th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Proyecto</th>\r\n              <th className=\"w-20 p-4 font-medium text-foreground\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {paginatedRows.map((r) => (\r\n              <tr key={r.id} className=\"border-b border-border hover:bg-muted/30 transition-smooth\">\r\n                <td className=\"p-4\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedIds.includes(r.id)}\r\n                    onChange={() => toggleOne(r.id)}\r\n                    className=\"rounded border-border\"\r\n                  />\r\n                </td>\r\n                <td className=\"p-4\"><div className=\"text-sm text-foreground\">{formatDate(r.date)}</div></td>\r\n                <td className=\"p-4\"><div className=\"text-sm text-foreground\">{r.category || ''}</div></td>\r\n                <td className=\"p-4\"><div className=\"text-sm text-foreground\">{r.description || ''}</div></td>\r\n                <td className=\"p-4\"><div className=\"text-foreground font-medium\">{formatCurrency(r.amount)}</div></td>\r\n                <td className=\"p-4\">\r\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${getExpenseStatusColor(r.status || r.estado)}`}>\r\n                    {r.status?.toString().toLowerCase() === 'authorized' || r.estado?.toString().toLowerCase() === 'autorizado'\r\n                      ? 'Autorizado'\r\n                      : r.status || r.estado || ''}\r\n                  </span>\r\n                </td>\r\n                <td className=\"p-4\">\r\n                  <div className=\"text-sm\">\r\n                    <div className=\"text-foreground\">{r.project?.name || r.project?.code || ''}</div>\r\n                    {!!r.project?.code && <div className=\"text-muted-foreground text-xs\">{r.project.code}</div>}\r\n                  </div>\r\n                </td>\r\n                <td className=\"p-4\">\r\n                  <div className=\"flex items-center gap-1\">\r\n                    <Button variant=\"ghost\" size=\"icon\" title=\"Ver\" onClick={() => handleOpenView(r)}>\r\n                      <Icon name=\"Eye\" size={16} />\r\n                    </Button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {paginatedRows.length === 0 && !loading && (\r\n              <tr><td colSpan={8} className=\"p-8 text-center text-muted-foreground\">No hay gastos para mostrar.</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* Paginaci贸n Desktop */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n            <span className=\"text-xs text-muted-foreground ml-3\">\r\n              Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n            <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* M贸vil */}\r\n      <div className=\"lg:hidden\">\r\n        {paginatedRows.map((r) => (\r\n          <div key={r.id} className=\"border-b border-border p-4\">\r\n            <div className=\"flex items-start justify-between mb-2\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedIds.includes(r.id)}\r\n                  onChange={() => toggleOne(r.id)}\r\n                  className=\"rounded border-border\"\r\n                />\r\n                <div>\r\n                  <div className=\"text-sm text-foreground font-medium\">{r.project?.name || r.project?.code || ''}</div>\r\n                  {!!r.project?.code && <div className=\"text-xs text-muted-foreground\">{r.project.code}</div>}\r\n                </div>\r\n              </div>\r\n              <span className={`px-2 py-1 rounded-full text-xs font-medium ${getExpenseStatusColor(r.status || r.estado)}`}>\r\n                {r.status?.toString().toLowerCase() === 'authorized' || r.estado?.toString().toLowerCase() === 'autorizado'\r\n                  ? 'Autorizado'\r\n                  : r.status || r.estado || ''}\r\n              </span>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-3 mb-2\">\r\n              <div><div className=\"text-xs text-muted-foreground\">Fecha</div><div className=\"text-sm text-foreground\">{formatDate(r.date)}</div></div>\r\n              <div><div className=\"text-xs text-muted-foreground\">Monto</div><div className=\"text-sm text-foreground font-medium\">{formatCurrency(r.amount)}</div></div>\r\n              <div><div className=\"text-xs text-muted-foreground\">Categor铆a</div><div className=\"text-sm text-foreground\">{r.category || ''}</div></div>\r\n              <div><div className=\"text-xs text-muted-foreground\">Proyecto</div><div className=\"text-sm text-foreground\">{r.project?.name || r.project?.code || ''}</div></div>\r\n            </div>\r\n\r\n            <div className=\"mt-3 flex items-center gap-1\">\r\n              <Button variant=\"ghost\" size=\"icon\" title=\"Ver\" onClick={() => handleOpenView(r)}>\r\n                <Icon name=\"Eye\" size={16} />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {/* Paginaci贸n Mobile */}\r\n        <div className=\"flex flex-col gap-3 p-4 border-t border-border\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {totalItems === 0 ? '0 de 0' : `${startIndex + 1}-${endIndex} de ${totalItems}`}\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n              <span className=\"px-2 text-sm text-foreground\">{currentPage}/{totalPages}</span>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      <PaymentAuthorizationModal\r\n        isOpen={showAuthModal}\r\n        onClose={() => setShowAuthModal(false)}\r\n        expense={selectedExpense}\r\n        onAuthorize={handleAuthorizePayment}\r\n        onDelete={handleDeleteExpense}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExpenseTable;\r\n","import React from 'react';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst FinancialSummaryWidget = ({ summaryData }) => {\r\n  const COLORS = ['#2563EB', '#059669', '#F59E0B', '#DC2626', '#8B5CF6'];\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    })?.format(amount);\r\n  };\r\n\r\n  const getVarianceColor = (variance) => {\r\n    if (variance > 0) return 'text-success';\r\n    if (variance < 0) return 'text-error';\r\n    return 'text-muted-foreground';\r\n  };\r\n\r\n  const getVarianceIcon = (variance) => {\r\n    if (variance > 0) return 'TrendingUp';\r\n    if (variance < 0) return 'TrendingDown';\r\n    return 'Minus';\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n      {/* Financial Overview Cards */}\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Resumen Financiero</h3>\r\n        \r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div className=\"bg-card border border-border rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Ingresos Totales</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{formatCurrency(summaryData?.totalRevenue)}</p>\r\n                <div className=\"flex items-center space-x-1 mt-1\">\r\n                  <Icon \r\n                    name={getVarianceIcon(summaryData?.revenueVariance)} \r\n                    size={14} \r\n                    className={getVarianceColor(summaryData?.revenueVariance)}\r\n                  />\r\n                  <span className={`text-xs ${getVarianceColor(summaryData?.revenueVariance)}`}>\r\n                    {summaryData?.revenueVariance > 0 ? '+' : ''}{summaryData?.revenueVariance}%\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-success/10 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"TrendingUp\" size={24} className=\"text-success\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-card border border-border rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Gastos Totales</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{formatCurrency(summaryData?.totalExpenses)}</p>\r\n                <div className=\"flex items-center space-x-1 mt-1\">\r\n                  <Icon \r\n                    name={getVarianceIcon(summaryData?.expenseVariance)} \r\n                    size={14} \r\n                    className={getVarianceColor(-summaryData?.expenseVariance)}\r\n                  />\r\n                  <span className={`text-xs ${getVarianceColor(-summaryData?.expenseVariance)}`}>\r\n                    {summaryData?.expenseVariance > 0 ? '+' : ''}{summaryData?.expenseVariance}%\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-error/10 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"TrendingDown\" size={24} className=\"text-error\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-card border border-border rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Margen Neto</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{formatCurrency(summaryData?.netMargin)}</p>\r\n                <div className=\"flex items-center space-x-1 mt-1\">\r\n                  <Icon \r\n                    name={getVarianceIcon(summaryData?.marginVariance)} \r\n                    size={14} \r\n                    className={getVarianceColor(summaryData?.marginVariance)}\r\n                  />\r\n                  <span className={`text-xs ${getVarianceColor(summaryData?.marginVariance)}`}>\r\n                    {summaryData?.marginPercentage}% del total\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"DollarSign\" size={24} className=\"text-primary\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-card border border-border rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Pendientes Aprobaci贸n</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{summaryData?.pendingApprovals}</p>\r\n                <div className=\"flex items-center space-x-1 mt-1\">\r\n                  <Icon name=\"Clock\" size={14} className=\"text-warning\" />\r\n                  <span className=\"text-xs text-warning\">\r\n                    {formatCurrency(summaryData?.pendingAmount)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-warning/10 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"Clock\" size={24} className=\"text-warning\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Charts Section */}\r\n      <div className=\"space-y-6\">\r\n        {/* Monthly Expenses Chart */}\r\n        <div className=\"bg-card border border-border rounded-lg p-4\">\r\n          <h4 className=\"text-md font-semibold text-foreground mb-4\">Gastos Mensuales</h4>\r\n          <div className=\"h-48\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <BarChart data={summaryData?.monthlyExpenses}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--color-border)\" />\r\n                <XAxis \r\n                  dataKey=\"month\" \r\n                  stroke=\"var(--color-muted-foreground)\"\r\n                  fontSize={12}\r\n                />\r\n                <YAxis \r\n                  stroke=\"var(--color-muted-foreground)\"\r\n                  fontSize={12}\r\n                  tickFormatter={(value) => `$${(value / 1000)?.toFixed(0)}K`}\r\n                />\r\n                <Tooltip \r\n                  formatter={(value) => [formatCurrency(value), 'Gastos']}\r\n                  labelStyle={{ color: 'var(--color-foreground)' }}\r\n                  contentStyle={{ \r\n                    backgroundColor: 'var(--color-popover)',\r\n                    border: '1px solid var(--color-border)',\r\n                    borderRadius: '6px'\r\n                  }}\r\n                />\r\n                <Bar dataKey=\"amount\" fill=\"var(--color-primary)\" radius={[4, 4, 0, 0]} />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Expense Categories Pie Chart */}\r\n        <div className=\"bg-card border border-border rounded-lg p-4\">\r\n          <h4 className=\"text-md font-semibold text-foreground mb-4\">Distribuci贸n por Categor铆a</h4>\r\n          <div className=\"h-48\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <PieChart>\r\n                <Pie\r\n                  data={summaryData?.expenseCategories}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  innerRadius={40}\r\n                  outerRadius={80}\r\n                  paddingAngle={5}\r\n                  dataKey=\"value\"\r\n                >\r\n                  {summaryData?.expenseCategories?.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={COLORS?.[index % COLORS?.length]} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip \r\n                  formatter={(value) => [formatCurrency(value), 'Monto']}\r\n                  contentStyle={{ \r\n                    backgroundColor: 'var(--color-popover)',\r\n                    border: '1px solid var(--color-border)',\r\n                    borderRadius: '6px'\r\n                  }}\r\n                />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n          <div className=\"grid grid-cols-2 gap-2 mt-4\">\r\n            {summaryData?.expenseCategories?.map((category, index) => (\r\n              <div key={category?.name} className=\"flex items-center space-x-2\">\r\n                <div \r\n                  className=\"w-3 h-3 rounded-full\"\r\n                  style={{ backgroundColor: COLORS?.[index % COLORS?.length] }}\r\n                />\r\n                <span className=\"text-xs text-muted-foreground\">{category?.name}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinancialSummaryWidget;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst ReceiptManagementPanel = ({ receipts, onUpload, onDelete, onCategorize }) => {\r\n  const [selectedReceipt, setSelectedReceipt] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterCategory, setFilterCategory] = useState('');\r\n\r\n  const categoryOptions = [\r\n    { value: '', label: 'Todas las Categor铆as' },\r\n    { value: 'Viajes', label: 'Viajes' },\r\n    { value: 'Materiales', label: 'Materiales' },\r\n    { value: 'Servicios', label: 'Servicios' },\r\n    { value: 'Equipos', label: 'Equipos' },\r\n    { value: 'Otros', label: 'Otros' }\r\n  ];\r\n\r\n  const handleFileUpload = async (event) => {\r\n    const files = Array.from(event?.target?.files);\r\n    if (files?.length === 0) return;\r\n\r\n    setIsUploading(true);\r\n    setUploadProgress(0);\r\n\r\n    try {\r\n      for (let i = 0; i < files?.length; i++) {\r\n        const file = files?.[i];\r\n        \r\n        // Simulate upload progress\r\n        for (let progress = 0; progress <= 100; progress += 10) {\r\n          setUploadProgress(progress);\r\n          await new Promise(resolve => setTimeout(resolve, 100));\r\n        }\r\n\r\n        const newReceipt = {\r\n          id: Date.now() + i,\r\n          name: file?.name,\r\n          size: file?.size,\r\n          type: file?.type,\r\n          uploadDate: new Date()?.toLocaleDateString('es-MX'),\r\n          category: 'Sin Categorizar',\r\n          status: 'Pendiente',\r\n          url: URL.createObjectURL(file)\r\n        };\r\n\r\n        await onUpload(newReceipt);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading files:', error);\r\n    } finally {\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  const handleCategorize = async (receiptId, category) => {\r\n    try {\r\n      await onCategorize(receiptId, category);\r\n    } catch (error) {\r\n      console.error('Error categorizing receipt:', error);\r\n    }\r\n  };\r\n\r\n  const getFileIcon = (type) => {\r\n    if (type?.includes('image')) return 'Image';\r\n    if (type?.includes('pdf')) return 'FileText';\r\n    if (type?.includes('excel') || type?.includes('spreadsheet')) return 'FileSpreadsheet';\r\n    return 'File';\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    let i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i))?.toFixed(2)) + ' ' + sizes?.[i];\r\n  };\r\n\r\n  const filteredReceipts = receipts?.filter(receipt => {\r\n    const matchesSearch = receipt?.name?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||\r\n                         receipt?.category?.toLowerCase()?.includes(searchTerm?.toLowerCase());\r\n    const matchesCategory = filterCategory === '' || receipt?.category === filterCategory;\r\n    return matchesSearch && matchesCategory;\r\n  });\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n      <div className=\"p-6 border-b border-border\">\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Gesti贸n de Recibos</h3>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Subir, categorizar y gestionar documentos de gastos\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-3\">\r\n            <input\r\n              type=\"file\"\r\n              id=\"receipt-upload\"\r\n              multiple\r\n              accept=\".pdf,.jpg,.jpeg,.png,.xlsx,.xls\"\r\n              onChange={handleFileUpload}\r\n              className=\"hidden\"\r\n            />\r\n            <Button\r\n              variant=\"default\"\r\n              onClick={() => document.getElementById('receipt-upload')?.click()}\r\n              disabled={isUploading}\r\n              iconName=\"Upload\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Subir Recibos\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Upload Progress */}\r\n        {isUploading && (\r\n          <div className=\"mt-4\">\r\n            <div className=\"flex items-center justify-between text-sm text-muted-foreground mb-2\">\r\n              <span>Subiendo archivos...</span>\r\n              <span>{uploadProgress}%</span>\r\n            </div>\r\n            <div className=\"w-full bg-muted rounded-full h-2\">\r\n              <div \r\n                className=\"bg-primary h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${uploadProgress}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Search and Filter */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n          <div className=\"relative\">\r\n            <Input\r\n              type=\"search\"\r\n              placeholder=\"Buscar recibos...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e?.target?.value)}\r\n              className=\"pl-10\"\r\n            />\r\n            <Icon \r\n              name=\"Search\" \r\n              size={16} \r\n              className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n            />\r\n          </div>\r\n\r\n          <Select\r\n            placeholder=\"Filtrar por categor铆a\"\r\n            options={categoryOptions}\r\n            value={filterCategory}\r\n            onChange={setFilterCategory}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"p-6\">\r\n        {filteredReceipts?.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <Icon name=\"FileX\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n            <h4 className=\"text-lg font-medium text-foreground mb-2\">No hay recibos</h4>\r\n            <p className=\"text-muted-foreground mb-4\">\r\n              {searchTerm || filterCategory ? 'No se encontraron recibos con los filtros aplicados' : 'Comience subiendo sus primeros recibos'}\r\n            </p>\r\n            {!searchTerm && !filterCategory && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => document.getElementById('receipt-upload')?.click()}\r\n                iconName=\"Upload\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Subir Primer Recibo\r\n              </Button>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {filteredReceipts?.map((receipt) => (\r\n              <div key={receipt?.id} className=\"border border-border rounded-lg p-4 hover:shadow-md transition-smooth\">\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-10 h-10 bg-muted rounded-lg flex items-center justify-center\">\r\n                      <Icon name={getFileIcon(receipt?.type)} size={20} className=\"text-muted-foreground\" />\r\n                    </div>\r\n                    <div className=\"min-w-0 flex-1\">\r\n                      <h4 className=\"text-sm font-medium text-foreground truncate\">{receipt?.name}</h4>\r\n                      <p className=\"text-xs text-muted-foreground\">{formatFileSize(receipt?.size)}</p>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      onClick={() => setSelectedReceipt(receipt)}\r\n                      className=\"h-8 w-8\"\r\n                    >\r\n                      <Icon name=\"Eye\" size={14} />\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      onClick={() => onDelete(receipt?.id)}\r\n                      className=\"h-8 w-8 text-error hover:text-error\"\r\n                    >\r\n                      <Icon name=\"Trash2\" size={14} />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center justify-between text-xs\">\r\n                    <span className=\"text-muted-foreground\">Fecha:</span>\r\n                    <span className=\"text-foreground\">{receipt?.uploadDate}</span>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center justify-between text-xs\">\r\n                    <span className=\"text-muted-foreground\">Estado:</span>\r\n                    <span className={`px-2 py-1 rounded-full ${\r\n                      receipt?.status === 'Procesado' ? 'bg-success text-success-foreground' :\r\n                      receipt?.status === 'En Revisi贸n' ? 'bg-warning text-warning-foreground' :\r\n                      'bg-muted text-muted-foreground'\r\n                    }`}>\r\n                      {receipt?.status}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"pt-2\">\r\n                    <Select\r\n                      placeholder=\"Categorizar\"\r\n                      options={categoryOptions?.filter(opt => opt?.value !== '')}\r\n                      value={receipt?.category === 'Sin Categorizar' ? '' : receipt?.category}\r\n                      onChange={(value) => handleCategorize(receipt?.id, value)}\r\n                      className=\"text-xs\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Receipt Preview Modal */}\r\n      {selectedReceipt && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n          <div className=\"bg-card rounded-lg shadow-lg max-w-4xl w-full max-h-[90vh] overflow-hidden\">\r\n            <div className=\"flex items-center justify-between p-4 border-b border-border\">\r\n              <h3 className=\"text-lg font-semibold text-foreground\">{selectedReceipt?.name}</h3>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={() => setSelectedReceipt(null)}\r\n              >\r\n                <Icon name=\"X\" size={20} />\r\n              </Button>\r\n            </div>\r\n            \r\n            <div className=\"p-4 h-96 flex items-center justify-center bg-muted\">\r\n              {selectedReceipt?.type?.includes('image') ? (\r\n                <img \r\n                  src={selectedReceipt?.url} \r\n                  alt={selectedReceipt?.name}\r\n                  className=\"max-w-full max-h-full object-contain\"\r\n                />\r\n              ) : (\r\n                <div className=\"text-center\">\r\n                  <Icon name={getFileIcon(selectedReceipt?.type)} size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                  <p className=\"text-muted-foreground\">Vista previa no disponible para este tipo de archivo</p>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    className=\"mt-4\"\r\n                    onClick={() => window.open(selectedReceipt?.url, '_blank')}\r\n                    iconName=\"ExternalLink\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Abrir Archivo\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReceiptManagementPanel;","// modules/finanzas/NewExpenseModal.jsx\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport useFinanzas from '../../../hooks/useFinanzas';\r\nimport useProyect from '../../../hooks/useProyect';\r\n\r\nconst NewExpenseModal = ({ isOpen, onClose, onSubmit }) => {\r\n  const { createGasto, loading: loadingFinanzas } = useFinanzas();\r\n  const { getProyectos, proyectos, loading: loadingProyectos } = useProyect();\r\n\r\n  const [formData, setFormData] = useState({\r\n    date: new Date().toISOString().split('T')[0],\r\n    time: new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' }),\r\n    category: '',\r\n    description: '',\r\n    amount: '',\r\n    currency: 'MXN',\r\n    projectId: '',\r\n    projectName: '',\r\n    projectCode: '',\r\n    vendor: '',\r\n    requestedBy: '',\r\n    paymentMethod: 'Transferencia',\r\n    priority: 'Media',\r\n    departmentBudget: '',\r\n    notes: '',\r\n    receiptRequired: true,\r\n    authorizedBy: '',\r\n    dueDate: '',\r\n    taxDeductible: true,\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const categories = [\r\n    'Materiales','Viajes','N贸mina','Equipos','Proveedores','Servicios',\r\n    'Oficina','Marketing','Capacitaci贸n','Transporte','Mantenimiento','Otro'\r\n  ];\r\n  const currencies = ['MXN', 'USD', 'EUR'];\r\n  const paymentMethods = ['Transferencia','Cheque','Efectivo','Tarjeta Corporativa','Facturaci贸n Directa'];\r\n  const priorities = ['Baja','Media','Alta','Urgente'];\r\n  const departmentBudgets = ['Operaciones','Proyectos','Administraci贸n','Ventas','Recursos Humanos','IT','General'];\r\n\r\n  // Cargar proyectos solo al abrir el modal y si a煤n no los tenemos\r\n  useEffect(() => {\r\n    if (isOpen && Array.isArray(proyectos) && proyectos.length === 0) {\r\n      getProyectos().catch(() => {});\r\n    }\r\n  }, [isOpen, getProyectos, proyectos]);\r\n\r\n  // Opciones del select de proyectos (SOLO nombre visible)\r\n  const projectOptions = useMemo(() => {\r\n    const list = Array.isArray(proyectos) ? proyectos : [];\r\n    return list.map((p) => {\r\n      const id =\r\n        p.id ??\r\n        p.Id ??\r\n        p._id ??\r\n        p.proyectoId ??\r\n        p.codigo ??\r\n        p.code;\r\n\r\n      const nombre =\r\n        p.nombreProyecto ??\r\n        p.nombre ??\r\n        p.name ??\r\n        p.titulo ??\r\n        p.descripcion ??\r\n        'Proyecto';\r\n\r\n      const codigo = p.codigo ?? p.code ?? p.clave ?? p.projectCode ?? '';\r\n\r\n      return {\r\n        value: String(id ?? nombre), // fallback seguro por si no hay id\r\n        label: nombre,               //  SOLO nombre\r\n        raw: { id, nombre, codigo },\r\n      };\r\n    });\r\n  }, [proyectos]);\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    if (!formData.date) newErrors.date = 'La fecha es requerida';\r\n    if (!formData.category) newErrors.category = 'La categor铆a es requerida';\r\n    if (!formData.description.trim()) newErrors.description = 'La descripci贸n es requerida';\r\n\r\n    const normalized = String(formData.amount ?? '').replace(/,/g, '');\r\n    if (!normalized) newErrors.amount = 'El monto es requerido';\r\n    else if (isNaN(parseFloat(normalized)) || parseFloat(normalized) <= 0)\r\n      newErrors.amount = 'El monto debe ser un n煤mero v谩lido mayor a 0';\r\n\r\n    if (!formData.requestedBy.trim()) newErrors.requestedBy = 'El solicitante es requerido';\r\n    if (!formData.projectId) newErrors.project = 'El proyecto es requerido';\r\n    if (!formData.departmentBudget) newErrors.departmentBudget = 'El presupuesto departamental es requerido';\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData((prev) => ({ ...prev, [field]: value }));\r\n    if (errors[field]) setErrors((prev) => ({ ...prev, [field]: '' }));\r\n  };\r\n\r\n  // Selecci贸n de proyecto: guarda id, nombre y (auto) c贸digo\r\n  const handleProjectChange = (value) => {\r\n    const opt = projectOptions.find((o) => o.value === value);\r\n    const id = opt?.raw?.id ?? value;\r\n    const nombre = opt?.raw?.nombre ?? '';\r\n    const codigo = opt?.raw?.codigo ?? '';\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      projectId: String(id ?? ''),\r\n      projectName: nombre,\r\n      projectCode: codigo,\r\n    }));\r\n    if (errors.project) setErrors((prev) => ({ ...prev, project: '' }));\r\n  };\r\n\r\n  // Monto con limpieza suave\r\n  const handleAmountChange = (e) => {\r\n    const raw = e?.target?.value ?? '';\r\n    const sanitized = raw.replace(/[^\\d.,]/g, '');\r\n    const normalized = sanitized.replace(/,/g, '').replace(/(\\..*)\\./g, '$1');\r\n    setFormData((prev) => ({ ...prev, amount: normalized }));\r\n    if (errors.amount) setErrors((prev) => ({ ...prev, amount: '' }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validateForm()) return;\r\n\r\n    const amountNumber = parseFloat(String(formData.amount).replace(/,/g, ''));\r\n    const payload = {\r\n      fecha: formData.date,\r\n      hora: formData.time,\r\n      categoria: formData.category,\r\n      descripcion: formData.description,\r\n      monto: amountNumber,\r\n      moneda: formData.currency,\r\n      idProyecto: formData.projectId ? Number(formData.projectId) : null,\r\n      codigoProyecto: formData.projectCode || null,\r\n      proveedor: formData.vendor || null,\r\n      solicitadoPor: formData.requestedBy,\r\n      metodoPago: formData.paymentMethod,\r\n      prioridad: formData.priority,\r\n      presupuestoDepartamento: formData.departmentBudget,\r\n      notas: formData.notes || null,\r\n      requiereComprobante: !!formData.receiptRequired,\r\n      autorizadoPor: formData.authorizedBy || null,\r\n      fechaLimitePago: formData.dueDate || null,\r\n      deducibleImpuestos: !!formData.taxDeductible,\r\n    };\r\n\r\n    try {\r\n      const created = await createGasto(payload);\r\n\r\n      //  Normalizar respuesta para que la tabla pueda usarla directo\r\n      let newExpense = created;\r\n\r\n      // Si el backend env铆a { data: {...} } o algo similar\r\n      if (created && typeof created === 'object') {\r\n        if (created.data && !Array.isArray(created.data)) {\r\n          newExpense = created.data;\r\n        } else if (created.item) {\r\n          newExpense = created.item;\r\n        }\r\n      }\r\n\r\n      // Fallback: usamos el payload + alg煤n id\r\n      if (!newExpense || typeof newExpense !== 'object') {\r\n        newExpense = {\r\n          ...payload,\r\n          id: created?.id ?? created?._id ?? Date.now(),\r\n        };\r\n      } else {\r\n        // aseguramos campos m铆nimos que usa ExpenseTable\r\n        newExpense = {\r\n          ...newExpense,\r\n          fecha: newExpense.fecha ?? payload.fecha,\r\n          categoria: newExpense.categoria ?? payload.categoria,\r\n          descripcion: newExpense.descripcion ?? payload.descripcion,\r\n          monto: newExpense.monto ?? payload.monto,\r\n          estado: newExpense.estado ?? newExpense.status ?? 'Pendiente',\r\n          idProyecto: newExpense.idProyecto ?? payload.idProyecto,\r\n          codigoProyecto: newExpense.codigoProyecto ?? payload.codigoProyecto,\r\n        };\r\n      }\r\n\r\n      //  Disparar evento global para que ExpenseTable lo agregue sin refrescar\r\n      if (typeof window !== 'undefined') {\r\n        window.dispatchEvent(\r\n          new CustomEvent('gasto:created', {\r\n            detail: newExpense,\r\n          })\r\n        );\r\n      }\r\n\r\n      //  notificar al padre (por si el contenedor tambi茅n necesita reaccionar)\r\n      if (typeof onSubmit === 'function') {\r\n        onSubmit(newExpense);\r\n      }\r\n\r\n      handleClose();\r\n    } catch (err) {\r\n      console.error('Error al crear gasto:', err);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      date: new Date().toISOString().split('T')[0],\r\n      time: new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' }),\r\n      category: '',\r\n      description: '',\r\n      amount: '',\r\n      currency: 'MXN',\r\n      projectId: '',\r\n      projectName: '',\r\n      projectCode: '',\r\n      vendor: '',\r\n      requestedBy: '',\r\n      paymentMethod: 'Transferencia',\r\n      priority: 'Media',\r\n      departmentBudget: '',\r\n      notes: '',\r\n      receiptRequired: true,\r\n      authorizedBy: '',\r\n      dueDate: '',\r\n      taxDeductible: true,\r\n    });\r\n    setErrors({});\r\n    onClose && onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n  const isBusy = loadingFinanzas || loadingProyectos;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-card rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        {/* Header (mismo dise帽o) */}\r\n        <div className=\"sticky top-0 bg-card border-b border-border p-6 rounded-t-lg\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-foreground\">Nuevo Gasto</h2>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                Registra un nuevo gasto para autorizaci贸n\r\n              </p>\r\n            </div>\r\n            <Button variant=\"ghost\" size=\"icon\" onClick={handleClose} disabled={isBusy}>\r\n              <Icon name=\"X\" size={20} />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Formulario */}\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci贸n del Gasto */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Receipt\" size={20} className=\"mr-2\" />\r\n                Informaci贸n del Gasto\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"date\"\r\n                label=\"Fecha\"\r\n                value={formData.date}\r\n                onChange={(e) => handleInputChange('date', e.target.value)}\r\n                error={errors?.date}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"time\"\r\n                label=\"Hora\"\r\n                value={formData.time}\r\n                onChange={(e) => handleInputChange('time', e.target.value)}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Categor铆a\"\r\n                value={formData.category}\r\n                onChange={(value) => handleInputChange('category', value)}\r\n                error={errors?.category}\r\n                options={categories.map((c) => ({ value: c, label: c }))}\r\n                placeholder=\"Selecciona una categor铆a\"\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Prioridad\"\r\n                value={formData.priority}\r\n                onChange={(value) => handleInputChange('priority', value)}\r\n                options={priorities.map((p) => ({ value: p, label: p }))}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Descripci贸n\"\r\n                placeholder=\"Ej. Compra de materiales para instalaci贸n HVAC\"\r\n                value={formData.description}\r\n                onChange={(e) => handleInputChange('description', e.target.value)}\r\n                error={errors?.description}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            {/* Informaci贸n Financiera */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"DollarSign\" size={20} className=\"mr-2\" />\r\n                Informaci贸n Financiera\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"text\"\r\n                inputMode=\"decimal\"\r\n                label=\"Monto\"\r\n                placeholder=\"Ej. 2500.00\"\r\n                value={formData.amount}\r\n                onChange={handleAmountChange}\r\n                error={errors?.amount}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Moneda\"\r\n                value={formData.currency}\r\n                onChange={(value) => handleInputChange('currency', value)}\r\n                options={currencies.map((c) => ({ value: c, label: c }))}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"M茅todo de Pago\"\r\n                value={formData.paymentMethod}\r\n                onChange={(value) => handleInputChange('paymentMethod', value)}\r\n                options={paymentMethods.map((m) => ({ value: m, label: m }))}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Presupuesto Departamental\"\r\n                value={formData.departmentBudget}\r\n                onChange={(value) => handleInputChange('departmentBudget', value)}\r\n                error={errors?.departmentBudget}\r\n                options={departmentBudgets.map((d) => ({ value: d, label: d }))}\r\n                placeholder=\"Selecciona un departamento\"\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            {/* Informaci贸n del Proyecto */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Folder\" size={20} className=\"mr-2\" />\r\n                Informaci贸n del Proyecto\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Proyecto\"\r\n                value={formData.projectId}\r\n                onChange={handleProjectChange}\r\n                error={errors?.project}\r\n                options={projectOptions}\r\n                placeholder={loadingProyectos ? 'Cargando proyectos' : 'Selecciona un proyecto'}\r\n                required\r\n                disabled={isBusy || loadingProyectos}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"C贸digo de Proyecto\"\r\n                placeholder=\"Se completa autom谩ticamente\"\r\n                value={formData.projectCode}\r\n                onChange={(e) => handleInputChange('projectCode', e.target.value)}\r\n                readOnly\r\n                disabled\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Proveedor/Vendor\"\r\n                placeholder=\"Ej. Materiales Industriales SA\"\r\n                value={formData.vendor}\r\n                onChange={(e) => handleInputChange('vendor', e.target.value)}\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Solicitado por\"\r\n                placeholder=\"Ej. Carlos Mendoza\"\r\n                value={formData.requestedBy}\r\n                onChange={(e) => handleInputChange('requestedBy', e.target.value)}\r\n                error={errors?.requestedBy}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            {/* Informaci贸n Adicional */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"FileText\" size={20} className=\"mr-2\" />\r\n                Informaci贸n Adicional\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Autorizado por\"\r\n                placeholder=\"Ej. Ana Garc铆a\"\r\n                value={formData.authorizedBy}\r\n                onChange={(e) => handleInputChange('authorizedBy', e.target.value)}\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"date\"\r\n                label=\"Fecha L铆mite de Pago\"\r\n                value={formData.dueDate}\r\n                onChange={(e) => handleInputChange('dueDate', e.target.value)}\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"flex items-center gap-6\">\r\n                <label className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={formData.receiptRequired}\r\n                    onChange={(e) => handleInputChange('receiptRequired', e.target.checked)}\r\n                    className=\"h-4 w-4 text-primary focus:ring-primary border-border rounded\"\r\n                    disabled={isBusy}\r\n                  />\r\n                  <span className=\"text-sm text-foreground\">Comprobante requerido</span>\r\n                </label>\r\n\r\n                <label className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={formData.taxDeductible}\r\n                    onChange={(e) => handleInputChange('taxDeductible', e.target.checked)}\r\n                    className=\"h-4 w-4 text-primary focus:ring-primary border-border rounded\"\r\n                    disabled={isBusy}\r\n                  />\r\n                  <span className=\"text-sm text-foreground\">Deducible de impuestos</span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium text-foreground\">Notas Adicionales</label>\r\n                <textarea\r\n                  className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none bg-background text-foreground\"\r\n                  rows=\"4\"\r\n                  placeholder=\"Informaci贸n adicional sobre el gasto...\"\r\n                  value={formData.notes}\r\n                  onChange={(e) => handleInputChange('notes', e.target.value)}\r\n                  disabled={isBusy}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-border\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={handleClose} disabled={isBusy}>\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"default\"\r\n              iconName={isBusy ? undefined : 'Plus'}\r\n              iconPosition=\"left\"\r\n              disabled={isBusy}\r\n              loading={isBusy}\r\n            >\r\n              {isBusy ? 'Guardando' : 'Registrar Gasto'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewExpenseModal;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst ModalGestionCompra = ({ \r\n  isOpen, \r\n  onClose, \r\n  expense, \r\n  onAuthorize, \r\n  onDelete, \r\n  onDownload,\r\n  mode = 'edit'\r\n}) => {\r\n\r\n  const [authData, setAuthData] = useState({\r\n    paymentMethod: '',\r\n    priority: 'normal',\r\n    approverComments: '',\r\n    approvedBy: '',\r\n  });\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  // Opciones de selects\r\n  const paymentMethods = [\r\n  { value: 'efectivo', label: 'Efectivo' },\r\n  { value: 'transferencia_bancaria', label: 'Transferencia Bancaria' },\r\n  { value: 'cheque', label: 'Cheque' },\r\n  { value: 'tarjeta_corporativa', label: 'Tarjeta Corporativa' }\r\n];\r\n\r\n\r\n  const priorityOptions = [\r\n    { value: 'baja', label: 'Baja' },\r\n    { value: 'normal', label: 'Normal' },\r\n    { value: 'alta', label: 'Alta' },\r\n    { value: 'urgente', label: 'Urgente' }\r\n  ];\r\n\r\n  // Cargar datos si la orden ya est谩 aprobada (modo view)\r\n  useEffect(() => {\r\n    if (expense) {\r\n      setAuthData({\r\n        paymentMethod: expense?.metodoPago || '',\r\n        priority: expense?.prioridadAprobacion || 'normal',\r\n        approverComments: expense?.comentariosAprobador || '',\r\n        approvedBy: expense?.aprobadoPor || '',\r\n      });\r\n    }\r\n  }, [expense]);\r\n\r\n  // Manejo de cambios en inputs\r\n  const handleInputChange = (field, value) => {\r\n    setAuthData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  // Enviar autorizaci贸n al backend\r\n  const handleSubmit = async (e) => {\r\n  e?.preventDefault();\r\n  setIsSubmitting(true);\r\n\r\n  try {\r\n    const payload = {\r\n      decision: \"approved\",\r\n      metodoPago: authData.paymentMethod,\r\n      prioridad: authData.priority,\r\n      comentariosAprobador: authData.approverComments,\r\n      aprobadoPor: \"Juan P茅rez - Gerente\",\r\n    };\r\n\r\n    console.log(\"Enviando datos de aprobaci贸n:\", payload);\r\n\r\n    // Llamar al callback que conecta con approveGasto()\r\n    await onAuthorize?.(expense?.id, payload);\r\n\r\n    onClose?.();\r\n  } catch (error) {\r\n    console.error(\"Error authorizing payment:\", error);\r\n  } finally {\r\n    setIsSubmitting(false);\r\n  }\r\n};\r\n\r\n\r\n\r\n  // Eliminar (enviar a rechazadas)\r\nconst handleDelete = async () => {\r\n  if (!expense?.id) return;\r\n\r\n  setIsDeleting(true);\r\n  try {\r\n    const payload = {\r\n      decision: \"rejected\",\r\n      comentariosAprobador: authData.approverComments || \"Pago rechazado por el aprobador.\",\r\n      aprobadoPor: \"Juan P茅rez - Gerente\",\r\n      prioridad: authData.priority,\r\n      metodoPago: authData.paymentMethod,\r\n    };\r\n\r\n    console.log(\"Enviando datos de rechazo:\", payload);\r\n    await onAuthorize?.(expense.id, payload, true);\r\n    onClose?.();\r\n  } catch (err) {\r\n    console.error(\"Error rechazando pago:\", err);\r\n  } finally {\r\n    setIsDeleting(false);\r\n  }\r\n};\r\n\r\n\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const isViewMode = mode === 'view';\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card rounded-lg shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">\r\n              {isViewMode ? 'Detalles de Autorizaci贸n' : 'Autorizaci贸n de Pago'}\r\n            </h2>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {isViewMode ? 'Visualiza los detalles del gasto autorizado' : 'Revisar y autorizar el gasto seleccionado'}\r\n            </p>\r\n          </div>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose} disabled={isSubmitting || isDeleting}>\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {/* Detalles del gasto */}\r\n          <div className=\"bg-muted rounded-lg p-4 space-y-3\">\r\n            <h3 className=\"font-medium text-foreground\">Detalles del Gasto</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n              <div>\r\n                <span className=\"text-muted-foreground\">C贸digo Proyecto:</span>\r\n                <p className=\"text-foreground\">{expense?.project}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Proveedor:</span>\r\n                <p className=\"text-foreground\">{expense?.proveedor?.nombre || expense?.category}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Notas:</span>\r\n                <p className=\"text-foreground\">{expense?.notas || expense?.description}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Monto:</span>\r\n                <p className=\"text-foreground font-bold text-lg\">\r\n                  {new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(expense?.totalOrden || expense?.amount || 0)}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Fecha de Creaci贸n:</span>\r\n                <p className=\"text-foreground\">{expense?.fechaOrden?.split('T')[0]}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Solicitante:</span>\r\n                <p className=\"text-foreground\">{expense?.creadoPor || 'Juan P茅rez'}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Detalles de Pago */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"CreditCard\" size={16} className=\"text-primary\" />\r\n              <h3 className=\"font-medium text-foreground\">Detalles de Pago</h3>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <Select\r\n                label=\"M茅todo de Pago\"\r\n                options={paymentMethods}\r\n                value={authData.paymentMethod}\r\n                onChange={(value) => handleInputChange('paymentMethod', value)}\r\n                disabled={isViewMode}\r\n                required\r\n              />\r\n              <Select\r\n                label=\"Prioridad\"\r\n                options={priorityOptions}\r\n                value={authData.priority}\r\n                onChange={(value) => handleInputChange('priority', value)}\r\n                disabled={isViewMode}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Comentarios */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm font-medium text-foreground\">Comentarios del Aprobador</label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent resize-none\"\r\n              rows={4}\r\n              placeholder=\"Agregue comentarios sobre la autorizaci贸n...\"\r\n              value={authData.approverComments}\r\n              onChange={(e) => handleInputChange('approverComments', e?.target?.value)}\r\n              disabled={isViewMode}\r\n            />\r\n          </div>\r\n\r\n          {/* Botones */}\r\n          <div className=\"flex items-center justify-between pt-6 border-t border-border\">\r\n  {!isViewMode && (\r\n    <Button\r\n      type=\"button\"\r\n      variant=\"destructive\"\r\n      iconName=\"Ban\"\r\n      iconPosition=\"left\"\r\n      onClick={handleDelete}\r\n      disabled={isSubmitting || isDeleting}\r\n    >\r\n      {isDeleting ? 'Eliminando' : 'Rechazar Pago'}\r\n    </Button>\r\n  )}\r\n\r\n  <div className=\"flex items-center space-x-3\">\r\n    {/* Bot贸n para cerrar */}\r\n    <Button\r\n      type=\"button\"\r\n      variant=\"outline\"\r\n      onClick={onClose}\r\n      disabled={isSubmitting || isDeleting}\r\n    >\r\n      {isViewMode ? 'Cerrar' : 'Cancelar'}\r\n    </Button>\r\n    \r\n\r\n    {/* Bot贸n para autorizar */}\r\n    {!isViewMode && (\r\n      <Button\r\n        type=\"submit\"\r\n        variant=\"success\"\r\n        loading={isSubmitting}\r\n        disabled={isDeleting}\r\n        iconName=\"Check\"\r\n        iconPosition=\"left\"\r\n      >\r\n        Autorizar Pago\r\n      </Button>\r\n    )}\r\n  </div>\r\n</div>\r\n\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalGestionCompra;\r\n","// services/gastosService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst gastosService = {\r\n  async getGastos() {\r\n    try {\r\n      const response = await httpService.get(\"/ordenCompra/todas\");\r\n      if (response?.data?.items) {\r\n        return response.data.items;\r\n      }\r\n      return response.data || response;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener 贸rdenes de compra:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateGastos(id, payload) {\r\n    try {\r\n      const data = await httpService.put(`/ordenCompra/editar/${id}`, payload);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al actualizar la orden con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async approveGasto(id, payload) {\r\n    try {\r\n      const data = await httpService.put(`/ordenCompra/aprobar/${id}`, payload);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al aprobar la orden con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default gastosService;\r\n","import { useCallback } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport gastosService from \"../services/gastosService\";\r\n\r\nconst useGastos = () => {\r\n  const { showSuccess, showError } = useNotifications();\r\n\r\n  // Obtener lista de gastos\r\n  const getGastos = useCallback(async () => {\r\n    try {\r\n      return await gastosService.getGastos();\r\n    } catch (error) {\r\n      console.error(\"Error al obtener los gastos:\", error);\r\n      showError(\"Error al obtener la lista de gastos.\");\r\n      throw error;\r\n    }\r\n  }, [showError]);\r\n\r\n  // Actualizar un gasto\r\n  const updateGasto = useCallback(async (id, payload) => {\r\n    try {\r\n      const response = await gastosService.updateGastos(id, payload);\r\n      showSuccess(\"Orden de compra aprobada correctamente\");\r\n      return response;\r\n    } catch (error) {\r\n      console.error(`Error al actualizar el gasto con ID ${id}:`, error);\r\n      showError(\"Error al actualizar el gasto.\");\r\n      throw error;\r\n    }\r\n  }, [showSuccess, showError]);\r\n\r\n  // Autorizar o rechazar gasto\r\n  const approveGasto = useCallback(async (id, payload) => {\r\n    try {\r\n      const response = await gastosService.approveGasto(id, payload);\r\n\r\n      if (payload.decision === \"rejected\") {\r\n        showSuccess(\"Orden de compra rechazada correctamente\");\r\n      } else {\r\n        showSuccess(\"Orden de compra autorizada correctamente\");\r\n      }\r\n\r\n      return response;\r\n    } catch (error) {\r\n      console.error(`Error al procesar el gasto con ID ${id}:`, error);\r\n      showError(\"Error al procesar la orden de compra.\");\r\n      throw error;\r\n    }\r\n  }, [showSuccess, showError]);\r\n\r\n  return { getGastos, updateGasto, approveGasto };\r\n};\r\n\r\nexport default useGastos;\r\n","// modules/finanzas/GastosTable.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Icon from \"../../../components/AppIcon\";\r\nimport Button from \"../../../components/ui/Button\";\r\nimport ModalGestionCompra from \"./ModalGestionCompra\";\r\nimport useProyect from \"../../../hooks/useProyect\";\r\nimport useGastos from \"../../../hooks/useGastos\";\r\nimport { jsPDF } from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\n\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return \"\";\r\n  const d = new Date(date);\r\n  return isNaN(d)\r\n    ? \"\"\r\n    : d.toLocaleDateString(\"es-MX\", {\r\n        day: \"2-digit\",\r\n        month: \"2-digit\",\r\n        year: \"numeric\",\r\n      });\r\n};\r\n\r\nconst formatCurrency = (amount) =>\r\n  new Intl.NumberFormat(\"es-MX\", {\r\n    style: \"currency\",\r\n    currency: \"MXN\",\r\n  }).format(amount || 0);\r\n\r\nconst getStatusColor = (status) => {\r\n  switch ((status || \"\").toLowerCase()) {\r\n    case \"pendiente\":\r\n    case \"pending\":\r\n      return \"text-yellow-600 bg-yellow-100\";\r\n    case \"aprobado\":\r\n    case \"approved\":\r\n      return \"text-blue-600 bg-blue-100\";\r\n    case \"autorizado\":\r\n    case \"received\":\r\n      return \"text-green-600 bg-green-100\";\r\n    case \"rechazado\":\r\n    case \"cancelled\":\r\n      return \"text-red-600 bg-red-100\";\r\n    case \"pagado\":\r\n    case \"paid\":\r\n      return \"text-emerald-700 bg-emerald-100\";\r\n    default:\r\n      return \"text-gray-600 bg-gray-100\";\r\n  }\r\n};\r\n\r\nconst matchesEstado = (estado, tab) => {\r\n  const e = (estado || \"\").toLowerCase();\r\n\r\n  if (tab === \"pendiente\") return e === \"pendiente\" || e === \"pending\";\r\n  if (tab === \"aprobado\") return e === \"aprobado\" || e === \"approved\";\r\n  if (tab === \"pagado\") return e === \"pagado\" || e === \"paid\";\r\n  if (tab === \"rechazado\") return e === \"rechazado\" || e === \"rejected\" || e === \"cancelled\";\r\n\r\n  return false;\r\n};\r\n\r\n\r\nconst GastosTable = ({ filters = {}, data = [] }) => {\r\n  const [ordenes, setOrdenes] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n  const [selectedOrden, setSelectedOrden] = useState(null);\r\n  const [showAuthModal, setShowAuthModal] = useState(false);\r\n  const [activeTab, setActiveTab] = useState(\"pendiente\");\r\n\r\n  const { getProyectos } = useProyect();\r\n  const { getGastos, updateGasto, approveGasto } = useGastos();\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    getProyectos().catch(() => {});\r\n  }, [getProyectos]);\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const data = await getGastos();\r\n        console.log(\"Datos obtenidos:\", data);\r\n        if (!alive) return;\r\n        setOrdenes(Array.isArray(data) ? data : data.data || []);\r\n      } catch (err) {\r\n        console.error(\"Error al cargar 贸rdenes:\", err);\r\n        setErrorMsg(\"No se pudieron cargar las 贸rdenes de compra.\");\r\n      } finally {\r\n        if (alive) setLoading(false);\r\n      }\r\n    })();\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [getGastos]);\r\n\r\n  const handleOpenView = (orden) => {\r\n  const adaptedExpense = {\r\n    id: orden.id,\r\n    notas: orden.notas || \"Sin descripci贸n\",\r\n    totalOrden: orden.totalOrden || 0,\r\n    proveedor: orden.proveedor,\r\n    project: orden.numeroOrden,\r\n    fechaOrden: orden.fechaOrden,\r\n    creadoPor: orden.creadoPor,\r\n    estado: orden.estado,\r\n    metodoPago: orden.metodoPago,\r\n    prioridadAprobacion: orden.prioridadAprobacion,\r\n    comentariosAprobador: orden.comentariosAprobador,\r\n    aprobadoPor: orden.aprobadoPor,\r\n  };\r\n\r\n  setSelectedOrden(adaptedExpense);\r\n  setShowAuthModal(true);\r\n};\r\n\r\n\r\n// Si vienen datos externos desde FinanzasManagement, los usamos;\r\n// si no, usamos los que carg贸 localmente el componente.\r\nconst baseOrders = Array.isArray(data) && data.length > 0 ? data : ordenes;\r\n\r\n// 1锔 Aplicar filtros generales (sin importar estado)\r\nconst filteredBySearch = baseOrders.filter((o) => {\r\n  const search = (filters.search || \"\").toLowerCase();\r\n  const codigo = (filters.codigo || \"\").toLowerCase();\r\n  const proveedor = (filters.proveedor || \"\").toLowerCase();\r\n  const fechaDesde = filters.fechaDesde ? new Date(filters.fechaDesde) : null;\r\n  const fechaHasta = filters.fechaHasta ? new Date(filters.fechaHasta) : null;\r\n\r\n  const matchSearch =\r\n    !search ||\r\n    o.numeroOrden?.toLowerCase().includes(search) ||\r\n    o.proveedor?.nombre?.toLowerCase().includes(search) ||\r\n    o.notas?.toLowerCase().includes(search);\r\n\r\n  const matchCodigo = !codigo || o.numeroOrden?.toLowerCase().includes(codigo);\r\n  const matchProveedor = !proveedor || o.proveedor?.nombre?.toLowerCase().includes(proveedor);\r\n\r\n  const fechaOrden = o.fechaOrden ? new Date(o.fechaOrden) : null;\r\n  const matchFechaDesde = !fechaDesde || (fechaOrden && fechaOrden >= fechaDesde);\r\n  const matchFechaHasta = !fechaHasta || (fechaOrden && fechaOrden <= fechaHasta);\r\n\r\n  return (\r\n    matchSearch &&\r\n    matchCodigo &&\r\n    matchProveedor &&\r\n    matchFechaDesde &&\r\n    matchFechaHasta\r\n  );\r\n});\r\n\r\n// 2锔 Luego filtrar los que pertenecen a la pesta帽a activa\r\nconst filteredOrders = filteredBySearch.filter((o) =>\r\n  matchesEstado(o.estado, activeTab)\r\n);\r\n\r\n// 3锔 Calcular los conteos din谩micos por pesta帽a\r\nconst tabs = [\r\n  {\r\n    id: \"pendiente\",\r\n    label: \"Pendientes\",\r\n    count: filteredBySearch.filter((o) =>\r\n      matchesEstado(o.estado, \"pendiente\")\r\n    ).length,\r\n  },\r\n  {\r\n    id: \"aprobado\",\r\n    label: \"Aprobadas\",\r\n    count: filteredBySearch.filter((o) =>\r\n      matchesEstado(o.estado, \"aprobado\")\r\n    ).length,\r\n  },\r\n  {\r\n    id: \"rechazado\",\r\n    label: \"Rechazadas\",\r\n    count: filteredBySearch.filter((o) =>\r\n      matchesEstado(o.estado, \"rechazado\")\r\n    ).length,\r\n  },\r\n];\r\n\r\n\r\n\r\n\r\n\r\n  \r\nconst getStatusLabel = (estado) => {\r\n  switch ((estado || \"\").toLowerCase()) {\r\n    case \"pending\":\r\n    case \"pendiente\":\r\n      return \"Pendiente\";\r\n    case \"approved\":\r\n    case \"aprobado\":\r\n      return \"Aprobada\";\r\n    case \"received\":\r\n    case \"autorizado\":\r\n      return \"Autorizada\";\r\n    case \"paid\":\r\n    case \"pagado\":\r\n      return \"Pagada\";\r\n    case \"cancelled\":\r\n    case \"rejected\":\r\n    case \"rechazado\":\r\n      return \"Rechazada\";\r\n    default:\r\n      return estado || \"Desconocido\";\r\n  }\r\n};\r\n\r\n\r\n// PDF\r\nconst handleDownloadPDF = (order) => {\r\n  const doc = new jsPDF();\r\n  const gray = \"#333333\";\r\n\r\n  // Para que salga el texto bien en el apartado de Metodo de pago\r\n  const formatText = (text) => {\r\n    if (!text) return \"\";\r\n    return text\r\n      .replace(/_/g, \" \")\r\n      .toLowerCase()\r\n      .replace(/\\b\\w/g, (c) => c.toUpperCase()); \r\n  };\r\n\r\n  // ENCABEZADO\r\n  doc.setFillColor(10, 74, 138);\r\n  doc.rect(0, 0, 210, 25, \"F\");\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.setFontSize(16);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.text(\"ORDEN DE COMPRA\", 105, 15, { align: \"center\" });\r\n\r\n  // DATOS GENERALES\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setTextColor(gray);\r\n  doc.setFontSize(12);\r\n  doc.text(\"Datos Generales\", 105, 35, { align: \"center\" });\r\n\r\n  const leftX = 20;\r\n  const rightX = 120;\r\n  const baseY = 44;\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  \r\n  doc.text(`Folio: ${order.numeroOrden || \"\"}`, leftX, baseY);\r\n  doc.text(`Fecha de Orden: ${formatDate(order.fechaOrden)}`, leftX, baseY + 7);\r\n  doc.text(`Proveedor: ${order.proveedor?.nombre || \"\"}`, leftX, baseY + 14);\r\n  doc.text(`Estado: ${getStatusLabel(order.estado)}`, rightX, baseY);\r\n  doc.text(`Creado por: ${order.creadoPor || \"\"}`, rightX, baseY + 7);\r\n  const maxWidthNotas = 70;\r\n  const notaTexto = `Notas: ${order.notas || \"\"}`;\r\n  const notaLineas = doc.splitTextToSize(notaTexto, maxWidthNotas);\r\n  const notaAltura = notaLineas.length * 5;\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.text(notaLineas, rightX, baseY + 14);\r\n\r\n  const pagoY = Math.max(baseY + 25, baseY + 14 + notaAltura + 5);\r\n\r\n  //DETALLES DE PAGO\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(gray);\r\n  doc.text(\"Detalles de Pago\", 105, pagoY, { align: \"center\" });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  const infoPagoY = pagoY + 8;\r\n\r\n  const metodoPagoFormateado = formatText(order.metodoPago);\r\n  const prioridadFormateada = formatText(order.prioridadAprobacion || \"Normal\");\r\n\r\n  doc.text(`M茅todo de Pago: ${metodoPagoFormateado}`, leftX, infoPagoY);\r\n  doc.text(`Prioridad: ${prioridadFormateada}`, leftX, infoPagoY + 7);\r\n\r\n  //COMENTARIOS con salto autom谩tico\r\n  const maxWidthComentarios = 70;\r\n  const comentarioTexto = `Comentarios: ${order.comentariosAprobador || \"Sin comentarios\"}`;\r\n  const comentarioLineas = doc.splitTextToSize(comentarioTexto, maxWidthComentarios);\r\n  const comentarioAltura = comentarioLineas.length * 5;\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.text(comentarioLineas, rightX, infoPagoY);\r\n\r\n  //DETALLE DE PRODUCTOS\r\n  const tableY = infoPagoY + 9 + comentarioAltura;\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.text(\"Detalle de Productos\", 105, tableY, { align: \"center\" });\r\n\r\n  const articulos = Array.isArray(order.articulos)\r\n    ? order.articulos.map((a) => ({\r\n        codigo: a.codigoArticulo || \"\",\r\n        descripcion: a.descripcion || a.nombre || \"\",\r\n        cantidadConUnidad: `${a.cantidadOrdenada || 0} ${a.unidad || \"\"}`.trim(),\r\n        costoUnitario: a.costoUnitario || 0,\r\n        subtotal:\r\n          a.subtotal ||\r\n          (a.cantidadOrdenada || 0) * (a.costoUnitario || 0),\r\n      }))\r\n    : [];\r\n\r\n  // Tabla\r\n  doc.autoTable({\r\n    startY: tableY + 5,\r\n    head: [[\"C贸digo\", \"Descripci贸n\", \"Cantidad\", \"Costo Unitario\", \"Subtotal\"]],\r\n    body: articulos.map((a) => [\r\n      a.codigo,\r\n      a.descripcion,\r\n      a.cantidadConUnidad,\r\n      formatCurrency(a.costoUnitario),\r\n      formatCurrency(a.subtotal),\r\n    ]),\r\n    theme: \"grid\",\r\n    styles: { fontSize: 9 },\r\n    headStyles: {\r\n      fillColor: [10, 74, 138],\r\n      textColor: 255,\r\n      halign: \"center\",\r\n      fontStyle: \"bold\",\r\n    },\r\n    bodyStyles: { halign: \"center\" },\r\n    margin: { left: 15, right: 15 },\r\n  });\r\n\r\n  // TOTAL\r\n  const finalY = doc.lastAutoTable.finalY + 10;\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(11);\r\n  doc.setTextColor(gray);\r\n  doc.text(`Total: ${formatCurrency(order.totalOrden)}`, 195, finalY, { align: \"right\" });\r\n\r\n  // APROBACIONES\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  const approvalSectionY = pageHeight - 35;\r\n\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(gray);\r\n  doc.text(\"Aprobaciones\", 105, approvalSectionY - 5, { align: \"center\" });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  const lineY = approvalSectionY + 10;\r\n  const leftXLine = 20;\r\n  const rightXLine = 135;\r\n\r\n  doc.text(\"_____________________________\", leftXLine, lineY);\r\n  doc.text(\"_____________________________\", rightXLine, lineY);\r\n  doc.text(\"Responsable de Aprobaci贸n\", leftXLine + 10, lineY + 6);\r\n  doc.text(\"Departamento de Compras\", rightXLine + 7, lineY + 6);\r\n\r\n  // GUARDAR PDF\r\n  doc.save(`Orden_${order.numeroOrden || \"Compra\"}.pdf`);\r\n};\r\n\r\nconst handleAuthorize = async (id, payload, isRejection = false) => {\r\n  try {\r\n    await approveGasto(id, payload);\r\n    const updated = await getGastos();\r\n    setOrdenes(Array.isArray(updated) ? updated : updated.data || []);\r\n    setActiveTab(isRejection ? \"rechazado\" : \"aprobado\");\r\n    setShowAuthModal(false);\r\n  } catch (error) {\r\n    console.error(\"Error al procesar gasto:\", error);\r\n  }\r\n};\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Icon name=\"ShoppingCart\" size={20} className=\"text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">rdenes de Compra</h3>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex border-b border-border\">\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => setActiveTab(tab.id)}\r\n            className={`flex items-center space-x-2 px-6 py-3 text-sm font-medium border-b-2 transition-smooth ${\r\n              activeTab === tab.id\r\n                ? \"border-primary text-primary bg-primary/5\"\r\n                : \"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50\"\r\n            }`}\r\n          >\r\n            <span>{tab.label}</span>\r\n            {tab.count > 0 && (\r\n              <span\r\n                className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\r\n                  activeTab === tab.id\r\n                    ? \"bg-primary text-primary-foreground\"\r\n                    : \"bg-muted text-muted-foreground\"\r\n                }`}\r\n              >\r\n                {tab.count}\r\n              </span>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Body */}\r\n      <div className=\"divide-y divide-border max-h-[500px] overflow-y-auto\">\r\n        {loading && (\r\n          <div className=\"text-center py-8 text-muted-foreground\">\r\n            Cargando 贸rdenes de compra\r\n          </div>\r\n        )}\r\n        {!!errorMsg && <div className=\"text-center py-8 text-error\">{errorMsg}</div>}\r\n        {!loading && filteredOrders.length === 0 && (\r\n          <div className=\"text-center py-8\">\r\n            <Icon\r\n              name=\"ShoppingCart\"\r\n              size={48}\r\n              className=\"text-muted-foreground mx-auto mb-4\"\r\n            />\r\n            <p className=\"text-muted-foreground\">\r\n              No hay 贸rdenes {activeTab.toLowerCase()}.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {filteredOrders.map((order) => (\r\n  <div key={order.id} className=\"p-4 hover:bg-muted/50 transition-smooth\">\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className=\"flex-1\">\r\n        <div className=\"flex items-center space-x-3 mb-2\">\r\n          <h4 className=\"font-medium text-foreground\">{order.numeroOrden}</h4>\r\n\r\n          {/* Estado actual */}\r\n          <span\r\n            className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(order.estado)}`}\r\n          >\r\n            {getStatusLabel(order.estado)}\r\n          </span>\r\n          {order.esUrgente && (\r\n            <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-error/10 text-error\">\r\n              <Icon name=\"AlertCircle\" size={12} className=\"mr-1\" />\r\n              Urgente\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Resto de la informaci贸n */}\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground mb-3\">\r\n          <div>\r\n            <span className=\"font-medium\">Proveedor:</span>\r\n            <div className=\"text-foreground\">{order.proveedor?.nombre || \"\"}</div>\r\n          </div>\r\n          <div>\r\n            <span className=\"font-medium\">Fecha:</span>\r\n            <div className=\"text-foreground\">{formatDate(order.fechaOrden)}</div>\r\n          </div>\r\n          <div>\r\n            <span className=\"font-medium\">Total:</span>\r\n            <div className=\"text-foreground font-medium\">\r\n              {formatCurrency(order.totalOrden)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => handleOpenView(order)}\r\n            iconName=\"Eye\"\r\n            iconSize={16}\r\n          >\r\n            Ver Detalles\r\n          </Button>\r\n\r\n          {[\"aprobado\", \"approved\", \"rechazado\", \"rejected\", \"cancelled\"].includes(\r\n  order.estado?.toLowerCase()\r\n) && (\r\n  <Button\r\n    variant=\"ghost\"\r\n    size=\"sm\"\r\n    iconName=\"Download\"\r\n    iconSize={16}\r\n    onClick={() => handleDownloadPDF(order)}\r\n  >\r\n    Descargar\r\n  </Button>\r\n\r\n          )}\r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n))}\r\n      </div>\r\n\r\n<ModalGestionCompra\r\n  isOpen={showAuthModal}\r\n  onClose={() => setShowAuthModal(false)}\r\n  expense={selectedOrden}\r\n  onAuthorize={handleAuthorize}\r\n  onDownload={() => handleDownloadPDF(selectedOrden)}\r\n  mode={\r\n    [\"approved\", \"aprobado\", \"rejected\", \"rechazado\", \"cancelled\"].includes(\r\n      selectedOrden?.estado?.toLowerCase()\r\n    )\r\n      ? \"view\" \r\n      : \"edit\"\r\n  }\r\n/>\r\n\r\n\r\n  </div>\r\n  );\r\n};\r\n\r\nexport default GastosTable;\r\n","import React, { useEffect, useState } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport FilterGastos from \"./components/FilterGastos\";\r\nimport FilterControls from './components/FilterControls';\r\nimport ExpenseTrackingTable from './components/ExpenseTrackingTable';\r\nimport FinancialSummaryWidget from './components/FinancialSummaryWidget';\r\nimport ReceiptManagementPanel from './components/ReceiptManagementPanel';\r\nimport PaymentAuthorizationModal from './components/PaymentAuthorizationModal';\r\nimport NewExpenseModal from './components/NewExpenseModal';\r\nimport GastosTable from './components/GastosTable';\r\nimport useFinanzas from '../../hooks/useFinanzas';\r\n\r\nconst FinanzasManagement = () => {\r\n  const { getGastos, createGasto, deleteGasto, loading, finanzas } = useFinanzas();\r\n\r\n  const [expenses, setExpenses] = useState([]);\r\n  const [filters, setFilters] = useState({});\r\n  const [activeTab, setActiveTab] = useState('expenses');\r\n\r\n  const [showAuthModal, setShowAuthModal] = useState(false);\r\n  const [showNewExpenseModal, setShowNewExpenseModal] = useState(false);\r\n  const [selectedExpense, setSelectedExpense] = useState(null);\r\n\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n\r\n  // ========================================================\r\n  // Cargar gastos del backend al montar\r\n  // ========================================================\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const data = await getGastos();\r\n        if (Array.isArray(data)) setExpenses(data);\r\n        else console.warn('锔 getGastos no devolvi贸 un array:', data);\r\n      } catch (err) {\r\n        console.error('Error al obtener gastos:', err);\r\n      }\r\n    };\r\n    fetchData();\r\n    //  no pongas getGastos como dependencia o se cicla\r\n  }, []);\r\n\r\n  // ========================================================\r\n  // Handlers\r\n  // ========================================================\r\n  const handleFiltersChange = (newFilters) => setFilters(newFilters);\r\n  const handleResetFilters = () => setFilters({});\r\n\r\n  const handleViewExpense = (expense) => {\r\n    setSelectedExpense(expense);\r\n    setShowAuthModal(true);\r\n  };\r\n\r\n  const handleAuthorizePayment = async (authData) => {\r\n    try {\r\n      console.log('Autorizando pago:', authData);\r\n      // Aqu铆 puedes actualizar el estado del gasto o recargar la lista\r\n    } catch (e) {\r\n      console.error('Error al autorizar pago:', e);\r\n    }\r\n  };\r\n\r\n  const handleAddNewExpense = async (createdExpense) => {\r\n    try {\r\n      if (!createdExpense) return;\r\n      setExpenses((prev) => [createdExpense, ...prev]);\r\n      setShowNewExpenseModal(false);\r\n    } catch (err) {\r\n      console.error('Error al agregar gasto:', err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteExpense = async (expenseId) => {\r\n    if (!window.confirm('驴Seguro que deseas eliminar este gasto?')) return;\r\n    try {\r\n      await deleteGasto(expenseId);\r\n      setExpenses((prev) => prev.filter((x) => x.id !== expenseId));\r\n    } catch (err) {\r\n      console.error('Error al eliminar gasto:', err);\r\n      alert('No se pudo eliminar el gasto.');\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'expenses', label: 'Seguimiento de Gastos', icon: 'Table' },\r\n    { id: 'ordenes', label: 'rdenes de Compra', icon: 'ShoppingCart'},\r\n    { id: 'summary', label: 'Resumen Financiero', icon: 'BarChart3' },\r\n    { id: 'receipts', label: 'Gesti贸n de Recibos', icon: 'FileText' },\r\n  ];\r\n\r\n  // ========================================================\r\n  // Render principal\r\n  // ========================================================\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Header\r\n        onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)}\r\n        isMenuOpen={headerMenuOpen}\r\n      />\r\n      <Sidebar\r\n        isCollapsed={sidebarCollapsed}\r\n        onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n      />\r\n\r\n      <main\r\n        className={`transition-all duration-300 ${\r\n          sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n        }`}\r\n      >\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Breadcrumb */}\r\n          <div className=\"mb-6\">\r\n            <Breadcrumb />\r\n          </div>\r\n\r\n          {/* HEADER */}\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-foreground\">\r\n                Gesti贸n Financiera\r\n              </h1>\r\n              <p className=\"text-muted-foreground\">\r\n                Control integral de gastos, autorizaciones y reportes financieros\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                iconName=\"Download\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Exportar Reporte\r\n              </Button>\r\n              <Button\r\n                variant=\"default\"\r\n                onClick={() => setShowNewExpenseModal(true)}\r\n                iconName=\"Plus\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Nuevo Gasto\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* TABS */}\r\n          <div className=\"border-b border-border\">\r\n            <nav className=\"flex space-x-8\">\r\n              {tabs.map((tab) => (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id)}\r\n                  className={`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-smooth ${\r\n                    activeTab === tab.id\r\n                      ? 'border-primary text-primary'\r\n                      : 'border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground'\r\n                  }`}\r\n                >\r\n                  <Icon name={tab.icon} size={16} />\r\n                  <span>{tab.label}</span>\r\n                </button>\r\n              ))}\r\n            </nav>\r\n          </div>\r\n\r\n          {/* CONTENIDO */}\r\n          <div className=\"space-y-6\">\r\n            {activeTab === 'expenses' && (\r\n              <>\r\n                <FilterControls\r\n                  onFiltersChange={handleFiltersChange}\r\n                  onReset={handleResetFilters}\r\n                />\r\n\r\n                {loading ? (\r\n                  <div className=\"flex items-center justify-center h-64\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"animate-spin h-10 w-10 border-b-2 border-primary rounded-full mx-auto mb-3\" />\r\n                      <p className=\"text-muted-foreground\">\r\n                        Cargando gastos...\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                ) : expenses.length === 0 ? (\r\n                  <div className=\"text-center py-12\">\r\n                    <Icon\r\n                      name=\"FolderOpen\"\r\n                      size={64}\r\n                      className=\"text-muted-foreground mx-auto mb-4\"\r\n                    />\r\n                    <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n                      No hay gastos registrados\r\n                    </h3>\r\n                    <p className=\"text-muted-foreground mb-6\">\r\n                      Crea un nuevo gasto para comenzar\r\n                    </p>\r\n                    <Button\r\n                      onClick={() => setShowNewExpenseModal(true)}\r\n                      iconName=\"Plus\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Crear Gasto\r\n                    </Button>\r\n                  </div>\r\n                ) : (\r\n                  <ExpenseTrackingTable\r\n                    filters={filters}\r\n                    expenses={expenses}\r\n                    onViewDetails={handleViewExpense}\r\n                    onDelete={handleDeleteExpense}\r\n                  />\r\n                )}\r\n              </>\r\n            )}\r\n{activeTab === \"ordenes\" && (\r\n  <>\r\n    <FilterGastos\r\n      filters={filters}\r\n      onFilterChange={handleFiltersChange}\r\n      onClearFilters={handleResetFilters}\r\n      totalCount={0}\r\n      filteredCount={0}\r\n    />\r\n    <GastosTable filters={filters} />\r\n  </>\r\n)}\r\n\r\n            \r\n            {activeTab === 'summary' && (\r\n              <FinancialSummaryWidget summaryData={{ totalExpenses: 0, totalRevenue: 0 }} />\r\n            )}\r\n\r\n            {activeTab === 'receipts' && (\r\n              <ReceiptManagementPanel receipts={[]} />\r\n            )}\r\n            \r\n          </div>\r\n        </div>\r\n      </main>\r\n      \r\n\r\n      {/* MODALES */}\r\n      <PaymentAuthorizationModal\r\n        isOpen={showAuthModal}\r\n        onClose={() => setShowAuthModal(false)}\r\n        expense={selectedExpense}\r\n        onAuthorize={handleAuthorizePayment}\r\n      />\r\n\r\n      <NewExpenseModal\r\n        isOpen={showNewExpenseModal}\r\n        onClose={() => setShowNewExpenseModal(false)}\r\n        onSubmit={handleAddNewExpense}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinanzasManagement;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\nimport usePerson from '../../../hooks/usePerson';\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\nconst PersonnelTable = ({ personnel, onViewProfile, onEditPersonnel, onAssignPPE }) => {\r\n  const { persons, loading, error, getPersons } = usePerson();\r\n\r\n  const [sortConfig, setSortConfig] = useState({ key: 'nombreCompleto', direction: 'asc' });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  //  Cargar empleados al montar\r\n  useEffect(() => {\r\n    getPersons();\r\n  }, []);\r\n\r\n  //  Fuente de datos (props o hook)\r\n  const dataSource = useMemo(() => {\r\n    if (!personnel || personnel.length === 0) {\r\n      return persons || [];\r\n    }\r\n    return personnel;\r\n  }, [personnel, persons]);\r\n\r\n  //  Ordenamiento\r\n  const sortedPersonnel = useMemo(() => {\r\n    const sorted = [...(dataSource || [])];\r\n    if (!sortConfig.key) return sorted;\r\n    sorted.sort((a, b) => {\r\n      const aVal = a[sortConfig.key] || '';\r\n      const bVal = b[sortConfig.key] || '';\r\n      if (aVal < bVal) return sortConfig.direction === 'asc' ? -1 : 1;\r\n      if (aVal > bVal) return sortConfig.direction === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n    return sorted;\r\n  }, [dataSource, sortConfig]);\r\n\r\n  //  Paginaci贸n\r\n  const totalItems = sortedPersonnel.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedPersonnel = sortedPersonnel.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  const handleSort = (key) => {\r\n    setSortConfig((prev) => ({\r\n      key,\r\n      direction: prev.key === key && prev.direction === 'asc' ? 'desc' : 'asc',\r\n    }));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  //  Badges de estado\r\n  const getStatusBadge = (status) => {\r\n    const config = {\r\n      Activo: { bg: 'bg-success', text: 'text-success-foreground' },\r\n      Inactivo: { bg: 'bg-error', text: 'text-error-foreground' },\r\n      Suspendido: { bg: 'bg-warning', text: 'text-warning-foreground' },\r\n    }[status] || { bg: 'bg-muted', text: 'text-muted-foreground' };\r\n\r\n    return (\r\n      <span className={`px-2 py-1 text-xs font-medium rounded-full ${config.bg} ${config.text}`}>\r\n        {status}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const getComplianceBadge = (status) => {\r\n    const config = {\r\n      Completo: { bg: 'bg-success', text: 'text-success-foreground', icon: 'CheckCircle' },\r\n      Pendiente: { bg: 'bg-warning', text: 'text-warning-foreground', icon: 'Clock' },\r\n      Vencido: { bg: 'bg-error', text: 'text-error-foreground', icon: 'AlertCircle' },\r\n    }[status] || { bg: 'bg-muted', text: 'text-muted-foreground', icon: 'Clock' };\r\n\r\n    return (\r\n      <span\r\n        className={`inline-flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${config.bg} ${config.text}`}\r\n      >\r\n        <Icon name={config.icon} size={12} />\r\n        <span>{status}</span>\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const SortableHeader = ({ label, sortKey }) => (\r\n    <th\r\n      className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted transition-smooth\"\r\n      onClick={() => handleSort(sortKey)}\r\n    >\r\n      <div className=\"flex items-center space-x-1\">\r\n        <span>{label}</span>\r\n        <Icon\r\n          name={\r\n            sortConfig.key === sortKey\r\n              ? sortConfig.direction === 'asc'\r\n                ? 'ChevronUp'\r\n                : 'ChevronDown'\r\n              : 'ChevronsUpDown'\r\n          }\r\n          size={14}\r\n        />\r\n      </div>\r\n    </th>\r\n  );\r\n\r\n  //  Estados de carga y error\r\n  if (loading)\r\n    return (\r\n      <div className=\"flex justify-center items-center py-10\">\r\n        <Icon name=\"Loader2\" className=\"animate-spin mr-2\" size={18} />\r\n        <span className=\"text-muted-foreground\">Cargando empleados...</span>\r\n      </div>\r\n    );\r\n\r\n  if (error)\r\n    return (\r\n      <div className=\"text-center py-10 text-error\">\r\n        <Icon name=\"AlertCircle\" className=\"inline-block mr-2\" size={18} />\r\n        Error al cargar los empleados: {error.userMessage || error.message}\r\n      </div>\r\n    );\r\n\r\n  if (!sortedPersonnel?.length)\r\n    return (\r\n      <div className=\"text-center py-10 text-muted-foreground\">\r\n        <Icon name=\"UserX\" className=\"inline-block mr-2\" size={18} />\r\n        No hay empleados registrados.\r\n      </div>\r\n    );\r\n\r\n  //  Render principal\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border overflow-hidden\">\r\n      {/* Tabla Desktop */}\r\n      <div className=\"hidden lg:block overflow-x-auto\">\r\n        <table className=\"min-w-full divide-y divide-border\">\r\n          <thead className=\"bg-muted\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Empleado\r\n              </th>\r\n              <SortableHeader label=\"Departamento\" sortKey=\"departamento\" />\r\n              <SortableHeader label=\"Puesto\" sortKey=\"puesto\" />\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Estado\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Estudios M茅dicos\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                EPP\r\n              </th>\r\n              <SortableHeader label=\"ltima Actualizaci贸n\" sortKey=\"fechaIngreso\" />\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Acciones\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody className=\"bg-card divide-y divide-border\">\r\n            {paginatedPersonnel.map((emp) => (\r\n              <tr key={emp.id} className=\"hover:bg-muted/50 transition-smooth\">\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-10 h-10 rounded-full overflow-hidden bg-muted\">\r\n                      <Image\r\n                        src={emp.foto || '/default-avatar.png'}\r\n                        alt={emp.nombreCompleto}\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-sm font-medium text-foreground\">{emp.nombreCompleto}</div>\r\n                      <div className=\"text-sm text-muted-foreground\">{emp.empleadoId}</div>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm\">{emp.departamento || '-'}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm\">{emp.puesto || '-'}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">{getStatusBadge(emp.estado)}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  {getComplianceBadge(emp.estado === 'Activo' ? 'Completo' : 'Pendiente')}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  {getComplianceBadge(emp.estado === 'Activo' ? 'Completo' : 'Pendiente')}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground\">\r\n                  {emp.fechaIngreso || '-'}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onViewProfile(emp)}\r\n                      iconName=\"Eye\"\r\n                      iconSize={16}\r\n                    >\r\n                      Ver\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onEditPersonnel(emp)}\r\n                      iconName=\"Edit\"\r\n                      iconSize={16}\r\n                    >\r\n                      Editar\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onAssignPPE(emp)}\r\n                      iconName=\"Shield\"\r\n                      iconSize={16}\r\n                    >\r\n                      EPP\r\n                    </Button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/*  Paginaci贸n Desktop */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n            <span className=\"text-xs text-muted-foreground ml-3\">\r\n              Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n            <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Vista M贸vil */}\r\n      <div className=\"lg:hidden space-y-4 p-4\">{paginatedPersonnel.map((emp) => (\r\n          <div key={emp.id} className=\"bg-card border border-border rounded-lg p-4\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-12 h-12 rounded-full overflow-hidden bg-muted\">\r\n                  <Image\r\n                    src={emp.foto || '/default-avatar.png'}\r\n                    alt={emp.nombreCompleto}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-sm font-medium text-foreground\">{emp.nombreCompleto}</h3>\r\n                  <p className=\"text-xs text-muted-foreground\">{emp.empleadoId}</p>\r\n                </div>\r\n              </div>\r\n              {getStatusBadge(emp.estado)}\r\n            </div>\r\n\r\n            <div className=\"space-y-2 mb-4\">\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Departamento:</span>\r\n                <span>{emp.departamento || '-'}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Puesto:</span>\r\n                <span>{emp.puesto || '-'}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Estudios M茅dicos:</span>\r\n                {getComplianceBadge(emp.estado === 'Activo' ? 'Completo' : 'Pendiente')}\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">EPP:</span>\r\n                {getComplianceBadge(emp.estado === 'Activo' ? 'Completo' : 'Pendiente')}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex space-x-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onViewProfile(emp)}\r\n                iconName=\"Eye\"\r\n                iconSize={16}\r\n                className=\"flex-1\"\r\n              >\r\n                Ver Perfil\r\n              </Button>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onEditPersonnel(emp)}\r\n                iconName=\"Edit\"\r\n                iconSize={16}\r\n              >\r\n                Editar\r\n              </Button>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onAssignPPE(emp)}\r\n                iconName=\"Shield\"\r\n                iconSize={16}\r\n              >\r\n                EPP\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {/*  Paginaci贸n m贸vil */}\r\n        <div className=\"flex flex-col gap-3 pt-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {totalItems === 0 ? '0 de 0' : `${startIndex + 1}-${endIndex} de ${totalItems}`}\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n              <span className=\"px-2 text-sm text-foreground\">{currentPage}/{totalPages}</span>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonnelTable;\r\n","import React from 'react';\r\nimport Select from '../../../components/ui/Select';\r\nimport Input from '../../../components/ui/Input';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst FilterToolbar = ({ \r\n  filters, \r\n  onFilterChange, \r\n  onClearFilters, \r\n  onExportData,\r\n  totalCount,\r\n  filteredCount \r\n}) => {\r\n  const departmentOptions = [\r\n    { value: '', label: 'Todos los Departamentos' },\r\n    { value: 'Administraci贸n', label: 'Administraci贸n' },\r\n    { value: 'Proyectos', label: 'Proyectos' },\r\n    { value: 'Taller', label: 'Taller' },\r\n    { value: 'Ventas', label: 'Ventas' },\r\n    { value: 'Mantenimiento', label: 'Mantenimiento' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'Activo', label: 'Activo' },\r\n    { value: 'Inactivo', label: 'Inactivo' },\r\n    { value: 'Suspendido', label: 'Suspendido' }\r\n  ];\r\n\r\n  const complianceOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'Completo', label: 'Completo' },\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'Vencido', label: 'Vencido' }\r\n  ];\r\n\r\n  const positionOptions = [\r\n    { value: '', label: 'Todos los Puestos' },\r\n    { value: 'T茅cnico HVAC', label: 'T茅cnico HVAC' },\r\n    { value: 'Supervisor', label: 'Supervisor' },\r\n    { value: 'Ingeniero', label: 'Ingeniero' },\r\n    { value: 'Administrador', label: 'Administrador' },\r\n    { value: 'Vendedor', label: 'Vendedor' },\r\n    { value: 'Operario', label: 'Operario' }\r\n  ];\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    onFilterChange({ ...filters, [key]: value });\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some(value => value !== '');\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 mb-6\">\r\n      {/* Search and Quick Actions */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6\">\r\n        <div className=\"flex-1 max-w-md\">\r\n          <Input\r\n            type=\"search\"\r\n            placeholder=\"Buscar por nombre, ID o puesto...\"\r\n            value={filters?.search || ''}\r\n            onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n            className=\"w-full\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onExportData}\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n            iconSize={16}\r\n          >\r\n            Exportar\r\n          </Button>\r\n          \r\n          {hasActiveFilters && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              onClick={onClearFilters}\r\n              iconName=\"X\"\r\n              iconPosition=\"left\"\r\n              iconSize={16}\r\n            >\r\n              Limpiar Filtros\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* Filter Controls */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\r\n        <Select\r\n          label=\"Departamento\"\r\n          options={departmentOptions}\r\n          value={filters?.department || ''}\r\n          onChange={(value) => handleFilterChange('department', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Estado\"\r\n          options={statusOptions}\r\n          value={filters?.status || ''}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Puesto\"\r\n          options={positionOptions}\r\n          value={filters?.position || ''}\r\n          onChange={(value) => handleFilterChange('position', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Estudios M茅dicos\"\r\n          options={complianceOptions}\r\n          value={filters?.medicalCompliance || ''}\r\n          onChange={(value) => handleFilterChange('medicalCompliance', value)}\r\n          className=\"w-full\"\r\n        />\r\n      </div>\r\n      {/* Additional Filters Row */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\r\n        <Select\r\n          label=\"EPP\"\r\n          options={complianceOptions}\r\n          value={filters?.ppeCompliance || ''}\r\n          onChange={(value) => handleFilterChange('ppeCompliance', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Input\r\n          type=\"date\"\r\n          label=\"Fecha de Ingreso Desde\"\r\n          value={filters?.hireDateFrom || ''}\r\n          onChange={(e) => handleFilterChange('hireDateFrom', e?.target?.value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Input\r\n          type=\"date\"\r\n          label=\"Fecha de Ingreso Hasta\"\r\n          value={filters?.hireDateTo || ''}\r\n          onChange={(e) => handleFilterChange('hireDateTo', e?.target?.value)}\r\n          className=\"w-full\"\r\n        />\r\n      </div>\r\n      {/* Results Summary */}\r\n      <div className=\"flex items-center justify-between pt-4 border-t border-border\">\r\n        <div className=\"flex items-center space-x-4 text-sm text-muted-foreground\">\r\n          <span>\r\n            Mostrando {filteredCount} de {totalCount} empleados\r\n          </span>\r\n          {hasActiveFilters && (\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"Filter\" size={16} />\r\n              <span>Filtros activos</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2 text-sm\">\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-success rounded-full\"></div>\r\n            <span className=\"text-muted-foreground\">Completo</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-warning rounded-full\"></div>\r\n            <span className=\"text-muted-foreground\">Pendiente</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-error rounded-full\"></div>\r\n            <span className=\"text-muted-foreground\">Vencido</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterToolbar;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ComplianceDashboard = ({ complianceData, onViewDetails, onScheduleTraining }) => {\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'critical': return 'text-error';\r\n      case 'warning': return 'text-warning';\r\n      case 'good': return 'text-success';\r\n      default: return 'text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  const getStatusBg = (status) => {\r\n    switch (status) {\r\n      case 'critical': return 'bg-error/10 border-error/20';\r\n      case 'warning': return 'bg-warning/10 border-warning/20';\r\n      case 'good': return 'bg-success/10 border-success/20';\r\n      default: return 'bg-muted/10 border-border';\r\n    }\r\n  };\r\n\r\n  const ComplianceCard = ({ title, value, total, status, icon, description, action }) => (\r\n    <div className={`p-4 rounded-lg border ${getStatusBg(status)} transition-smooth hover:shadow-md`}>\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className={`p-2 rounded-lg ${getStatusBg(status)}`}>\r\n            <Icon name={icon} size={20} className={getStatusColor(status)} />\r\n          </div>\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-foreground\">{title}</h3>\r\n            <p className=\"text-xs text-muted-foreground\">{description}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <div className=\"text-lg font-semibold text-foreground\">\r\n            {value}\r\n            {total && <span className=\"text-sm text-muted-foreground\">/{total}</span>}\r\n          </div>\r\n          {total && (\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {Math.round((value / total) * 100)}%\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {action && (\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={action?.onClick}\r\n          iconName={action?.icon}\r\n          iconPosition=\"left\"\r\n          iconSize={14}\r\n          className=\"w-full mt-2\"\r\n        >\r\n          {action?.label}\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Overview Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <ComplianceCard\r\n          title=\"Estudios M茅dicos\"\r\n          value={complianceData?.medicalStudies?.expired}\r\n          total={complianceData?.medicalStudies?.total}\r\n          status={complianceData?.medicalStudies?.expired > 5 ? 'critical' : complianceData?.medicalStudies?.expired > 2 ? 'warning' : 'good'}\r\n          icon=\"Heart\"\r\n          description=\"Vencidos este mes\"\r\n          action={{\r\n            label: 'Ver Detalles',\r\n            icon: 'Eye',\r\n            onClick: () => onViewDetails('medical')\r\n          }}\r\n        />\r\n\r\n        <ComplianceCard\r\n          title=\"EPP Asignado\"\r\n          value={complianceData?.ppe?.assigned}\r\n          total={complianceData?.ppe?.total}\r\n          status={complianceData?.ppe?.assigned < complianceData?.ppe?.total * 0.9 ? 'warning' : 'good'}\r\n          icon=\"Shield\"\r\n          description=\"Equipos asignados\"\r\n          action={{\r\n            label: 'Gestionar EPP',\r\n            icon: 'Settings',\r\n            onClick: () => onViewDetails('ppe')\r\n          }}\r\n        />\r\n\r\n        <ComplianceCard\r\n          title=\"Capacitaciones\"\r\n          value={complianceData?.training?.pending}\r\n          total={complianceData?.training?.total}\r\n          status={complianceData?.training?.pending > 10 ? 'critical' : complianceData?.training?.pending > 5 ? 'warning' : 'good'}\r\n          icon=\"GraduationCap\"\r\n          description=\"Pendientes\"\r\n          action={{\r\n            label: 'Programar',\r\n            icon: 'Calendar',\r\n            onClick: () => onScheduleTraining()\r\n          }}\r\n        />\r\n\r\n        <ComplianceCard\r\n          title=\"Documentos\"\r\n          value={complianceData?.documents?.missing}\r\n          total={complianceData?.documents?.total}\r\n          status={complianceData?.documents?.missing > 3 ? 'critical' : complianceData?.documents?.missing > 1 ? 'warning' : 'good'}\r\n          icon=\"FileText\"\r\n          description=\"Faltantes\"\r\n          action={{\r\n            label: 'Revisar',\r\n            icon: 'Search',\r\n            onClick: () => onViewDetails('documents')\r\n          }}\r\n        />\r\n      </div>\r\n      {/* Alerts Section */}\r\n      <div className=\"bg-card rounded-lg border border-border p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground flex items-center space-x-2\">\r\n            <Icon name=\"AlertTriangle\" size={20} className=\"text-warning\" />\r\n            <span>Alertas de Cumplimiento</span>\r\n          </h3>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            iconName=\"Settings\"\r\n            iconPosition=\"left\"\r\n            iconSize={16}\r\n          >\r\n            Configurar Alertas\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"space-y-3\">\r\n          {complianceData?.alerts?.map((alert, index) => (\r\n            <div key={index} className={`p-4 rounded-lg border ${getStatusBg(alert?.priority)} flex items-start justify-between`}>\r\n              <div className=\"flex items-start space-x-3\">\r\n                <Icon \r\n                  name={alert?.priority === 'critical' ? 'AlertCircle' : alert?.priority === 'warning' ? 'Clock' : 'Info'} \r\n                  size={20} \r\n                  className={getStatusColor(alert?.priority)}\r\n                />\r\n                <div>\r\n                  <h4 className=\"text-sm font-medium text-foreground\">{alert?.title}</h4>\r\n                  <p className=\"text-sm text-muted-foreground\">{alert?.description}</p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">{alert?.date}</p>\r\n                </div>\r\n              </div>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onViewDetails(alert?.type)}\r\n                iconName=\"ChevronRight\"\r\n                iconSize={16}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {/* Quick Stats */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <div className=\"bg-card rounded-lg border border-border p-4\">\r\n          <div className=\"flex items-center space-x-3 mb-3\">\r\n            <div className=\"p-2 bg-primary/10 rounded-lg\">\r\n              <Icon name=\"Users\" size={20} className=\"text-primary\" />\r\n            </div>\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-foreground\">Personal Activo</h4>\r\n              <p className=\"text-xs text-muted-foreground\">Total empleados</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-foreground\">{complianceData?.totalEmployees}</div>\r\n        </div>\r\n\r\n        <div className=\"bg-card rounded-lg border border-border p-4\">\r\n          <div className=\"flex items-center space-x-3 mb-3\">\r\n            <div className=\"p-2 bg-success/10 rounded-lg\">\r\n              <Icon name=\"CheckCircle\" size={20} className=\"text-success\" />\r\n            </div>\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-foreground\">Cumplimiento</h4>\r\n              <p className=\"text-xs text-muted-foreground\">Promedio general</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-foreground\">{complianceData?.overallCompliance}%</div>\r\n        </div>\r\n\r\n        <div className=\"bg-card rounded-lg border border-border p-4\">\r\n          <div className=\"flex items-center space-x-3 mb-3\">\r\n            <div className=\"p-2 bg-accent/10 rounded-lg\">\r\n              <Icon name=\"Calendar\" size={20} className=\"text-accent\" />\r\n            </div>\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-foreground\">Pr贸ximos Vencimientos</h4>\r\n              <p className=\"text-xs text-muted-foreground\">En 30 d铆as</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-foreground\">{complianceData?.upcomingExpirations}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComplianceDashboard;","import React, { useState, useEffect } from 'react';\r\nimport { useNotifications } from '../../../context/NotificationContext';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport { Checkbox } from '../../../components/ui/Checkbox';\r\nimport usePerson from '../../../hooks/usePerson';\r\n\r\nconst PersonnelModal = ({ isOpen, onClose, employee, mode, onSave, error, openedFromEPP }) => {\r\n  const [localError, setLocalError] = useState(null);\r\n  const { createPerson, updatePersonByEmpleadoId } = usePerson();\r\n  const { showSuccess } = useNotifications();\r\n \r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    employeeId: '',\r\n    email: '',\r\n    phone: '',\r\n    department: '',\r\n    position: '',\r\n    hireDate: '',\r\n    status: 'Activo',\r\n    medicalStudies: {\r\n      lastExam: '',\r\n      nextExam: '',\r\n      status: 'Pendiente',\r\n      documents: []\r\n    },\r\n    ppe: {\r\n      helmet: false,\r\n      vest: false,\r\n      boots: false,\r\n      gloves: false,\r\n      glasses: false,\r\n      mask: false\r\n    },\r\n    certifications: [],\r\n    emergencyContact: {\r\n      name: '',\r\n      phone: '',\r\n      relationship: ''\r\n    }\r\n  });\r\n\r\n  // Secuencia de pasos\r\n  const steps = ['general', 'medical', 'ppe', 'emergency'];\r\n  const [step, setStep] = useState(openedFromEPP ? 2 : 0); // Si openedFromEPP, inicia en EPP\r\n\r\n  // Si openedFromEPP, bloquear navegaci贸n y mostrar solo EPP\r\n  const isEPPOnly = openedFromEPP === true;\r\n\r\n  //  Cargar datos del empleado seleccionado al abrir el modal\r\n  useEffect(() => {\r\n    if (employee) {\r\n      // Extraer el primer elemento si viene como arreglo\r\n      const medicalStudies = Array.isArray(employee.examenesMedicos)\r\n        ? employee.examenesMedicos[0] || { lastExam: '', nextExam: '', status: 'Pendiente', documents: [] }\r\n        : employee.medicalStudies || { lastExam: '', nextExam: '', status: 'Pendiente', documents: [] };\r\n\r\n      const ppe = Array.isArray(employee.equipos)\r\n        ? employee.equipos[0] || { helmet: false, vest: false, boots: false, gloves: false, glasses: false, mask: false }\r\n        : employee.ppe || { helmet: false, vest: false, boots: false, gloves: false, glasses: false, mask: false };\r\n\r\n      const emergencyContact = Array.isArray(employee.contactoEmergencia)\r\n        ? employee.contactoEmergencia[0] || { name: '', phone: '', relationship: '' }\r\n        : employee.emergencyContact || { name: '', phone: '', relationship: '' };\r\n\r\n      setFormData({\r\n        name: employee.nombreCompleto || '',\r\n        employeeId: employee.empleadoId || '',\r\n        email: employee.email || '',\r\n        phone: employee.telefono || '',\r\n        department: employee.departamento || '',\r\n        position: employee.puesto || '',\r\n        hireDate: employee.fechaIngreso || '',\r\n        status: employee.estado || 'Activo',\r\n        medicalStudies,\r\n        ppe,\r\n        certifications: employee.certifications || [],\r\n        emergencyContact\r\n      });\r\n    } else {\r\n      // Si es creaci贸n, reinicia el formulario\r\n      setFormData({\r\n        name: '',\r\n        employeeId: '',\r\n        email: '',\r\n        phone: '',\r\n        department: '',\r\n        position: '',\r\n        hireDate: '',\r\n        status: 'Activo',\r\n        medicalStudies: {\r\n          lastExam: '',\r\n          nextExam: '',\r\n          status: 'Pendiente',\r\n          documents: []\r\n        },\r\n        ppe: {\r\n          helmet: false,\r\n          vest: false,\r\n          boots: false,\r\n          gloves: false,\r\n          glasses: false,\r\n          mask: false\r\n        },\r\n        certifications: [],\r\n        emergencyContact: {\r\n          name: '',\r\n          phone: '',\r\n          relationship: ''\r\n        }\r\n      });\r\n    }\r\n    setStep(openedFromEPP ? 2 : 0);\r\n  }, [employee, isOpen, openedFromEPP]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  //  Opciones de select\r\n  const departmentOptions = [\r\n    { value: 'Administraci贸n', label: 'Administraci贸n' },\r\n    { value: 'Proyectos', label: 'Proyectos' },\r\n    { value: 'Taller', label: 'Taller' },\r\n    { value: 'Ventas', label: 'Ventas' },\r\n    { value: 'Mantenimiento', label: 'Mantenimiento' }\r\n  ];\r\n\r\n  const positionOptions = [\r\n    { value: 'T茅cnico HVAC', label: 'T茅cnico HVAC' },\r\n    { value: 'Supervisor', label: 'Supervisor' },\r\n    { value: 'Ingeniero', label: 'Ingeniero' },\r\n    { value: 'Administrador', label: 'Administrador' },\r\n    { value: 'Vendedor', label: 'Vendedor' },\r\n    { value: 'Operario', label: 'Operario' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: 'Activo', label: 'Activo' },\r\n    { value: 'Inactivo', label: 'Inactivo' },\r\n    { value: 'Suspendido', label: 'Suspendido' }\r\n  ];\r\n\r\n  const medicalStatusOptions = [\r\n    { value: 'Completo', label: 'Completo' },\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'Vencido', label: 'Vencido' }\r\n  ];\r\n\r\n  const relationshipOptions = [\r\n    { value: 'C贸nyuge', label: 'C贸nyuge' },\r\n    { value: 'Padre/Madre', label: 'Padre/Madre' },\r\n    { value: 'Hijo/Hija', label: 'Hijo/Hija' },\r\n    { value: 'Hermano/Hermana', label: 'Hermano/Hermana' },\r\n    { value: 'Otro', label: 'Otro' }\r\n  ];\r\n\r\n  //  Actualizar campos\r\n  const handleInputChange = (field, value) => {\r\n    if (field.includes('.')) {\r\n      const [parent, child] = field.split('.');\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [parent]: {\r\n          ...prev[parent],\r\n          [child]: value\r\n        }\r\n      }));\r\n    } else {\r\n      setFormData(prev => ({ ...prev, [field]: value }));\r\n    }\r\n  };\r\n\r\n  const handlePPEChange = (item, checked) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      ppe: {\r\n        ...prev.ppe,\r\n        [item]: checked\r\n      }\r\n    }));\r\n  };\r\n\r\n  //  Guardar nuevo empleado\r\n\r\n  // (Ya est谩 declarada al inicio, se elimina duplicado)\r\n\r\n  const handleSave = async () => {\r\n    setLocalError(null);\r\n    try {\r\n      const payload = {\r\n        nombreCompleto: formData.name,\r\n        email: formData.email,\r\n        telefono: formData.phone,\r\n        departamento: formData.department,\r\n        puesto: formData.position,\r\n        fechaIngreso: formData.hireDate,\r\n        estado: formData.status,\r\n        examenesMedicos: [formData.medicalStudies],\r\n        equipos: [formData.ppe],\r\n        contactoEmergencia: [formData.emergencyContact],\r\n        certifications: formData.certifications ?? [],\r\n      };\r\n\r\n      console.log(\"Payload enviado:\", payload);\r\n\r\n      let result;\r\n      if (mode === 'edit' && formData.employeeId) {\r\n        result = await updatePersonByEmpleadoId(formData.employeeId, payload);\r\n        showSuccess('Empleado actualizado correctamente ');\r\n      } else {\r\n        result = await createPerson({ ...payload, empleadoId: formData.employeeId, activo: true });\r\n        showSuccess('Empleado registrado correctamente ');\r\n      }\r\n\r\n      if (onSave) onSave(result);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"Error al guardar:\", error);\r\n      if (error?.status === 409 && error?.data?.error?.includes('correo')) {\r\n        setLocalError(error);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  //  Tabs del modal (solo para mostrar, deshabilitados)\r\n  const tabs = [\r\n  { id: 'general', label: 'Informaci贸n General', icon: 'User' },\r\n  { id: 'medical', label: 'Archivos', icon: 'FileText' },\r\n  { id: 'ppe', label: 'EPP', icon: 'Shield' },\r\n  { id: 'emergency', label: 'Contacto de Emergencia', icon: 'Phone' }\r\n  ];\r\n\r\n  // Traducci贸n de EPP\r\n  const ppeLabels = {\r\n    helmet: 'Casco',\r\n    vest: 'Chaleco',\r\n    boots: 'Botas',\r\n    gloves: 'Guantes',\r\n    glasses: 'Gafas',\r\n    mask: 'Mascarilla'\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-1050 flex items-center justify-center p-4\">\r\n      <div className=\"bg-card rounded-lg border border-border w-full max-w-4xl max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <Icon\r\n              name={\r\n                openedFromEPP\r\n                  ? 'Shield'\r\n                  : mode === 'create'\r\n                  ? 'UserPlus'\r\n                  : mode === 'edit'\r\n                  ? 'Edit'\r\n                  : 'Eye'\r\n              }\r\n              size={24}\r\n              className=\"text-primary\"\r\n            />\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-foreground\">\r\n                {openedFromEPP\r\n                  ? 'Editar Equipo de Protecci贸n Personal'\r\n                  : mode === 'create'\r\n                  ? 'Nuevo Empleado'\r\n                  : mode === 'edit'\r\n                  ? 'Editar Empleado'\r\n                  : 'Perfil del Empleado'}\r\n              </h2>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {openedFromEPP\r\n                  ? 'Modificar informaci贸n de EPP del empleado'\r\n                  : mode === 'create'\r\n                  ? 'Agregar nuevo empleado al sistema'\r\n                  : mode === 'edit'\r\n                  ? 'Modificar informaci贸n del empleado'\r\n                  : 'Ver detalles del empleado'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Tabs: solo mostrar si no es flujo EPP */}\r\n        {!isEPPOnly && (\r\n          <div className=\"border-b border-border\">\r\n            <nav className=\"flex space-x-8 px-6\">\r\n              {tabs.map((tab, idx) => (\r\n                <button\r\n                  key={tab.id}\r\n                  disabled={mode === 'create'}\r\n                  onClick={mode !== 'create' ? () => setStep(idx) : undefined}\r\n                  className={`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-smooth ${\r\n                    step === idx\r\n                      ? 'border-primary text-primary'\r\n                      : 'border-transparent text-muted-foreground'\r\n                  } ${mode === 'create' ? 'cursor-not-allowed opacity-60' : ''}`}\r\n                >\r\n                  <Icon name={tab.icon} size={16} />\r\n                  <span>{tab.label}</span>\r\n                </button>\r\n              ))}\r\n            </nav>\r\n          </div>\r\n        )}\r\n\r\n        {/* Contenido: solo mostrar EPP si es flujo EPP */}\r\n        <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\r\n          {/* Informaci贸n General */}\r\n          {!isEPPOnly && step === 0 && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <Input\r\n                  label=\"Nombre Completo\"\r\n                  value={mode === 'view' ? (employee?.nombreCompleto ?? '') : formData.name}\r\n                  onChange={(e) => handleInputChange('name', e.target.value)}\r\n                  required\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Input\r\n                  label=\"ID de Empleado\"\r\n                  value={mode === 'view' ? (employee?.empleadoId ?? '') : formData.employeeId}\r\n                  onChange={(e) => handleInputChange('employeeId', e.target.value)}\r\n                  required\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Input\r\n                  label=\"Correo Electr贸nico\"\r\n                  type=\"email\"\r\n                  value={mode === 'view' ? (employee?.email ?? '') : formData.email}\r\n                  onChange={(e) => {\r\n                    handleInputChange('email', e.target.value);\r\n                    if (localError) setLocalError(null);\r\n                  }}\r\n                  required\r\n                  disabled={mode === 'view'}\r\n                />\r\n                {(localError?.status === 409 && localError?.data?.error?.includes('correo')) && (\r\n                  <span className=\"block text-xs text-red-600 mt-1\">Este correo ya est谩 registrado</span>\r\n                )}\r\n                <Input\r\n                  label=\"Tel茅fono\"\r\n                  type=\"tel\"\r\n                  value={mode === 'view' ? (employee?.telefono ?? '') : formData.phone}\r\n                  onChange={(e) => {\r\n                    const value = e.target.value;\r\n                    if (/^\\d{0,10}$/.test(value)) {\r\n                      handleInputChange('phone', value);\r\n                    }\r\n                  }}\r\n                  onBlur={(e) => {\r\n                    if (e.target.value.length !== 10) {\r\n                      alert('El n煤mero de tel茅fono debe tener exactamente 10 d铆gitos.');\r\n                    }\r\n                  }}\r\n                  inputMode=\"numeric\"\r\n                  maxLength={10}\r\n                  pattern=\"\\d{10}\"\r\n                  placeholder=\"Ingresa 10 d铆gitos\"\r\n                  required\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Select\r\n                  label=\"Departamento\"\r\n                  options={departmentOptions}\r\n                  value={mode === 'view' ? (employee?.departamento ?? '') : formData.department}\r\n                  onChange={(value) => handleInputChange('department', value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Select\r\n                  label=\"Puesto\"\r\n                  options={positionOptions}\r\n                  value={mode === 'view' ? (employee?.puesto ?? '') : formData.position}\r\n                  onChange={(value) => handleInputChange('position', value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Input\r\n                  label=\"Fecha de Ingreso\"\r\n                  type=\"date\"\r\n                  value={mode === 'view' ? (employee?.fechaIngreso ?? '') : formData.hireDate}\r\n                  onChange={(e) => handleInputChange('hireDate', e.target.value)}\r\n                  required\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Select\r\n                  label=\"Estado\"\r\n                  options={statusOptions}\r\n                  value={mode === 'view' ? (employee?.estado ?? '') : formData.status}\r\n                  onChange={(value) => handleInputChange('status', value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Estudios M茅dicos */}\r\n          {!isEPPOnly && step === 1 && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <Input\r\n                  label=\"ltimo Examen M茅dico\"\r\n                  type=\"date\"\r\n                  value={mode === 'view' ? (employee?.medicalStudies?.lastExam ?? '') : formData.medicalStudies.lastExam}\r\n                  onChange={(e) => handleInputChange('medicalStudies.lastExam', e.target.value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Input\r\n                  label=\"Pr贸ximo Examen M茅dico\"\r\n                  type=\"date\"\r\n                  value={mode === 'view' ? (employee?.medicalStudies?.nextExam ?? '') : formData.medicalStudies.nextExam}\r\n                  onChange={(e) => handleInputChange('medicalStudies.nextExam', e.target.value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Select\r\n                  label=\"Estado de Estudios M茅dicos\"\r\n                  options={medicalStatusOptions}\r\n                  value={mode === 'view' ? (employee?.medicalStudies?.status ?? 'Pendiente') : formData.medicalStudies.status}\r\n                  onChange={(value) => handleInputChange('medicalStudies.status', value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n              </div>\r\n              <div className=\"border border-border rounded-lg p-4\">\r\n                <h4 className=\"text-sm font-medium text-foreground mb-3\">Documentos M茅dicos</h4>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center justify-between p-3 bg-muted rounded-lg\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <Icon name=\"FileText\" size={16} />\r\n                      <span className=\"text-sm text-foreground\">Examen m茅dico general</span>\r\n                    </div>\r\n                    <Button variant=\"ghost\" size=\"sm\" iconName=\"Download\" iconSize={14}>\r\n                      Descargar\r\n                    </Button>\r\n                  </div>\r\n                  {mode !== 'view' && (\r\n                    <Button variant=\"outline\" size=\"sm\" iconName=\"Upload\" iconPosition=\"left\" iconSize={14}>\r\n                      Subir Documento\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* EPP */}\r\n          {isEPPOnly ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div className=\"space-y-4\">\r\n                  <h4 className=\"text-sm font-medium text-foreground\">Equipo de Protecci贸n Personal</h4>\r\n                  <div className=\"space-y-3\">\r\n                    <Checkbox\r\n                      label=\"Casco de Seguridad\"\r\n                      checked={formData.ppe.helmet || false}\r\n                      onChange={(e) => handlePPEChange('helmet', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                    <Checkbox\r\n                      label=\"Chaleco Reflectivo\"\r\n                      checked={formData.ppe.vest || false}\r\n                      onChange={(e) => handlePPEChange('vest', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                    <Checkbox\r\n                      label=\"Botas de Seguridad\"\r\n                      checked={formData.ppe.boots || false}\r\n                      onChange={(e) => handlePPEChange('boots', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-4\">\r\n                  <h4 className=\"text-sm font-medium text-foreground\">Equipo Adicional</h4>\r\n                  <div className=\"space-y-3\">\r\n                    <Checkbox\r\n                      label=\"Guantes de Trabajo\"\r\n                      checked={formData.ppe.gloves || false}\r\n                      onChange={(e) => handlePPEChange('gloves', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                    <Checkbox\r\n                      label=\"Gafas de Seguridad\"\r\n                      checked={formData.ppe.glasses || false}\r\n                      onChange={(e) => handlePPEChange('glasses', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                    <Checkbox\r\n                      label=\"Mascarilla\"\r\n                      checked={formData.ppe.mask || false}\r\n                      onChange={(e) => handlePPEChange('mask', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            step === 2 && (\r\n              <div className=\"space-y-6\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  <div className=\"space-y-4\">\r\n                    <h4 className=\"text-sm font-medium text-foreground\">Equipo de Protecci贸n Personal</h4>\r\n                    <div className=\"space-y-3\">\r\n                      <Checkbox\r\n                        label=\"Casco de Seguridad\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.helmet ?? false) : formData.ppe.helmet}\r\n                        onChange={(e) => handlePPEChange('helmet', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                      <Checkbox\r\n                        label=\"Chaleco Reflectivo\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.vest ?? false) : formData.ppe.vest}\r\n                        onChange={(e) => handlePPEChange('vest', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                      <Checkbox\r\n                        label=\"Botas de Seguridad\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.boots ?? false) : formData.ppe.boots}\r\n                        onChange={(e) => handlePPEChange('boots', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"space-y-4\">\r\n                    <h4 className=\"text-sm font-medium text-foreground\">Equipo Adicional</h4>\r\n                    <div className=\"space-y-3\">\r\n                      <Checkbox\r\n                        label=\"Guantes de Trabajo\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.gloves ?? false) : formData.ppe.gloves}\r\n                        onChange={(e) => handlePPEChange('gloves', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                      <Checkbox\r\n                        label=\"Gafas de Seguridad\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.glasses ?? false) : formData.ppe.glasses}\r\n                        onChange={(e) => handlePPEChange('glasses', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                      <Checkbox\r\n                        label=\"Mascarilla\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.mask ?? false) : formData.ppe.mask}\r\n                        onChange={(e) => handlePPEChange('mask', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )\r\n          )}\r\n\r\n          {/* Contacto de Emergencia */}\r\n          {!isEPPOnly && step === 3 && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <Input\r\n                  label=\"Nombre del Contacto\"\r\n                  value={mode === 'view' ? (employee?.emergencyContact?.name ?? '') : formData.emergencyContact.name}\r\n                  onChange={(e) => handleInputChange('emergencyContact.name', e.target.value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Input\r\n                  label=\"Tel茅fono de Contacto\"\r\n                  type=\"tel\"\r\n                  value={mode === 'view' ? (employee?.emergencyContact?.phone ?? '') : formData.emergencyContact.phone}\r\n                  onChange={(e) => handleInputChange('emergencyContact.phone', e.target.value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Select\r\n                  label=\"Relaci贸n\"\r\n                  options={relationshipOptions}\r\n                  value={mode === 'view' ? (employee?.emergencyContact?.relationship ?? '') : formData.emergencyContact.relationship}\r\n                  onChange={(value) => handleInputChange('emergencyContact.relationship', value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        {mode !== 'view' && (\r\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-border\">\r\n            <Button variant=\"outline\" onClick={onClose}>\r\n              Cancelar\r\n            </Button>\r\n            {/* Bot贸n Anterior: solo si no es flujo EPP y no estamos en el primer paso */}\r\n            {!openedFromEPP && step > 0 && (\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => setStep((prev) => prev - 1)}\r\n                iconName=\"ArrowLeft\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Anterior\r\n              </Button>\r\n            )}\r\n            {/* Bot贸n especial Guardar EPP */}\r\n            {openedFromEPP && step === 2 ? (\r\n              <Button\r\n                onClick={async () => {\r\n                  setLocalError(null);\r\n                  try {\r\n                    // Solo actualiza EPP\r\n                    const payload = {\r\n                      ppe: formData.ppe\r\n                    };\r\n                    let result;\r\n                    if (mode === 'edit' && formData.employeeId) {\r\n                      result = await updatePersonByEmpleadoId(formData.employeeId, payload);\r\n                      showSuccess('EPP actualizado correctamente ');\r\n                    }\r\n                    if (onSave) onSave(result);\r\n                    onClose();\r\n                  } catch (error) {\r\n                    console.error(\"Error al guardar EPP:\", error);\r\n                    if (error?.status === 409 && error?.data?.error?.includes('correo')) {\r\n                      setLocalError(error);\r\n                    }\r\n                  }\r\n                }}\r\n                iconName=\"Save\"\r\n                iconPosition=\"left\"\r\n                disabled={localError?.status === 409 && localError?.data?.error?.includes('correo')}\r\n              >\r\n                Guardar EPP\r\n              </Button>\r\n            ) : (\r\n              step < steps.length - 1 ? (\r\n                <Button\r\n                  onClick={() => setStep((prev) => prev + 1)}\r\n                  iconName=\"ArrowRight\"\r\n                  iconPosition=\"right\"\r\n                  disabled={localError?.status === 409 && localError?.data?.error?.includes('correo')}\r\n                >\r\n                  Siguiente\r\n                </Button>\r\n              ) : (\r\n                <Button\r\n                  onClick={async () => {\r\n                    setLocalError(null);\r\n                    try {\r\n                      // Unificar todos los datos para guardar\r\n                      const payload = {\r\n                        nombreCompleto: formData.name,\r\n                        empleadoId: formData.employeeId,\r\n                        email: formData.email,\r\n                        telefono: formData.phone,\r\n                        departamento: formData.department,\r\n                        puesto: formData.position,\r\n                        fechaIngreso: formData.hireDate,\r\n                        estado: formData.status,\r\n                        medicalStudies: formData.medicalStudies,\r\n                        ppe: formData.ppe,\r\n                        certifications: formData.certifications,\r\n                        emergencyContact: formData.emergencyContact\r\n                      };\r\n                      let result;\r\n                      if (mode === 'edit' && formData.employeeId) {\r\n                        result = await updatePersonByEmpleadoId(formData.employeeId, payload);\r\n                        showSuccess('Empleado actualizado correctamente ');\r\n                      } else {\r\n                        result = await createPerson({ ...payload, activo: true });\r\n                        showSuccess('Empleado registrado correctamente ');\r\n                      }\r\n                      if (onSave) onSave(result);\r\n                      onClose();\r\n                    } catch (error) {\r\n                      console.error(\"Error al guardar:\", error);\r\n                      if (error?.status === 409 && error?.data?.error?.includes('correo')) {\r\n                        setLocalError(error);\r\n                      }\r\n                    }\r\n                  }}\r\n                  iconName=\"Save\"\r\n                  iconPosition=\"left\"\r\n                  disabled={localError?.status === 409 && localError?.data?.error?.includes('correo')}\r\n                >\r\n                  {mode === 'create' ? 'Crear Empleado' : 'Guardar Cambios'}\r\n                </Button>\r\n              )\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonnelModal;","import React, { useState, useEffect, useMemo } from 'react';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport Button from '../../components/ui/Button';\r\nimport PersonnelTable from './components/PersonnelTable';\r\nimport FilterToolbar from './components/FilterToolbar';\r\nimport ComplianceDashboard from './components/ComplianceDashboard';\r\nimport PersonnelModal from './components/PersonnelModal';\r\nimport usePerson from '../../hooks/usePerson'; \r\n\r\nconst PersonnelManagement = () => {\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [activeView, setActiveView] = useState('personnel');\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    department: '',\r\n    status: '',\r\n    position: '',\r\n    medicalCompliance: '',\r\n    ppeCompliance: '',\r\n    hireDateFrom: '',\r\n    hireDateTo: ''\r\n  });\r\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\r\n  const [modalMode, setModalMode] = useState(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [initialStep, setInitialStep] = useState(0); // 0: general, 1: medical, 2: ppe, 3: emergency\r\n  const [openedFromEPP, setOpenedFromEPP] = useState(false);\r\n\r\n  //  Hook original\r\n  const { persons, loading, error, getPersons } = usePerson();\r\n\r\n  useEffect(() => {\r\n    getPersons(); // cargar empleados\r\n  }, []);\r\n\r\n  //  L贸gica de filtrado robusta\r\n  const filteredPersonnel = useMemo(() => {\r\n  if (!persons) return [];\r\n\r\n  return persons.filter((employee) => {\r\n    const searchTerm = filters.search?.toLowerCase().trim() || '';\r\n\r\n    const matchSearch =\r\n      !searchTerm ||\r\n      employee?.nombreCompleto?.toLowerCase()?.includes(searchTerm) ||\r\n      employee?.empleadoId?.toLowerCase()?.includes(searchTerm) ||\r\n      employee?.puesto?.toLowerCase()?.includes(searchTerm);\r\n\r\n    const matchDept =\r\n      !filters.department ||\r\n      employee?.departamento?.toLowerCase() === filters.department.toLowerCase();\r\n\r\n    const matchStatus =\r\n      !filters.status ||\r\n      employee?.estado?.toLowerCase() === filters.status.toLowerCase();\r\n\r\n    const matchPosition =\r\n      !filters.position ||\r\n      employee?.puesto?.toLowerCase() === filters.position.toLowerCase();\r\n\r\n    //  Eliminamos o comentamos estos porque NO existen en tu base\r\n    // const matchMedical =\r\n    //   !filters.medicalCompliance ||\r\n    //   employee?.cumplimientoMedico?.toLowerCase() ===\r\n    //     filters.medicalCompliance.toLowerCase();\r\n\r\n    // const matchPPE =\r\n    //   !filters.ppeCompliance ||\r\n    //   employee?.cumplimientoEPP?.toLowerCase() ===\r\n    //     filters.ppeCompliance.toLowerCase();\r\n\r\n    const matchHireDateFrom =\r\n      !filters.hireDateFrom ||\r\n      new Date(employee?.fechaIngreso) >= new Date(filters.hireDateFrom);\r\n\r\n    const matchHireDateTo =\r\n      !filters.hireDateTo ||\r\n      new Date(employee?.fechaIngreso) <= new Date(filters.hireDateTo);\r\n\r\n    return (\r\n      matchSearch &&\r\n      matchDept &&\r\n      matchStatus &&\r\n      matchPosition &&\r\n      matchHireDateFrom &&\r\n      matchHireDateTo\r\n    );\r\n  });\r\n}, [persons, filters]);\r\n\r\n  //  Acciones UI\r\n  const handleViewProfile = (employee) => {\r\n    setSelectedEmployee(employee);\r\n    setModalMode('view');\r\n    setInitialStep(0);\r\n    setOpenedFromEPP(false);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleEditPersonnel = (employee) => {\r\n    setSelectedEmployee(employee);\r\n    setModalMode('edit');\r\n    setInitialStep(0);\r\n    setOpenedFromEPP(false);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleCreatePersonnel = () => {\r\n    setSelectedEmployee(null);\r\n    setModalMode('create');\r\n    setInitialStep(0);\r\n    setOpenedFromEPP(false);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleAssignPPE = (employee) => {\r\n    setSelectedEmployee(employee);\r\n    setModalMode('edit');\r\n    setInitialStep(2); // Abrir directamente en el paso de EPP\r\n    setOpenedFromEPP(true);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  // Eliminar duplicados: las funciones ya est谩n arriba con initialStep\r\n\r\n  const handleSavePersonnel = async (personnelData) => {\r\n  try {\r\n    // Si tienes create/update dentro del hook usePerson, puedes llamarlos as铆:\r\n    // await savePerson(personnelData);  // Ejemplo: si existe esa funci贸n\r\n\r\n    //  Pero para asegurar que la tabla se actualiza:\r\n    await getPersons(); //  Refresca la lista actualizada desde el backend\r\n\r\n    setIsModalOpen(false); // Cierra el modal\r\n    setSelectedEmployee(null);\r\n    setModalMode(null);\r\n\r\n  } catch (err) {\r\n    console.error(\"Error al guardar el empleado:\", err);\r\n  }\r\n};\r\n\r\n\r\n  const handleClearFilters = () => {\r\n    setFilters({\r\n      search: '',\r\n      department: '',\r\n      status: '',\r\n      position: '',\r\n      medicalCompliance: '',\r\n      ppeCompliance: '',\r\n      hireDateFrom: '',\r\n      hireDateTo: ''\r\n    });\r\n  };\r\n\r\n  const handleExportData = () => {\r\n    if (!filteredPersonnel || filteredPersonnel.length === 0) {\r\n      alert('No hay datos para exportar');\r\n      return;\r\n    }\r\n\r\n    // Preparar los datos para exportar con TODOS los campos disponibles\r\n    const dataToExport = filteredPersonnel.map(emp => {\r\n      // Extraer datos de objetos anidados\r\n      const medicalStudies = Array.isArray(emp.examenesMedicos) && emp.examenesMedicos[0] \r\n        ? emp.examenesMedicos[0] \r\n        : emp.medicalStudies || {};\r\n      \r\n      const ppe = Array.isArray(emp.equipos) && emp.equipos[0]\r\n        ? emp.equipos[0]\r\n        : emp.ppe || {};\r\n      \r\n      const emergencyContact = Array.isArray(emp.contactoEmergencia) && emp.contactoEmergencia[0]\r\n        ? emp.contactoEmergencia[0]\r\n        : emp.emergencyContact || {};\r\n\r\n      return {\r\n        'Nombre Completo': emp.nombreCompleto || '',\r\n        'ID Empleado': emp.empleadoId || '',\r\n        'Departamento': emp.departamento || '',\r\n        'Puesto': emp.puesto || '',\r\n        'Estado': emp.estado || '',\r\n        'Estudios M茅dicos': medicalStudies.status || (emp.estado === 'Activo' ? 'Completo' : 'Pendiente'),\r\n        'EPP': emp.estado === 'Activo' ? 'Completo' : 'Pendiente',\r\n        'Fecha de Ingreso': emp.fechaIngreso || '',\r\n        'Email': emp.email || '',\r\n        'Tel茅fono': emp.telefono || '',\r\n        'Direcci贸n': emp.direccion || '',\r\n        'Fecha de Nacimiento': emp.fechaNacimiento || '',\r\n        'NSS': emp.nss || '',\r\n        'CURP': emp.curp || '',\r\n        'RFC': emp.rfc || '',\r\n        'ltimo Examen M茅dico': medicalStudies.lastExam || '',\r\n        'Pr贸ximo Examen M茅dico': medicalStudies.nextExam || '',\r\n        'Casco': ppe.helmet ? 'S铆' : 'No',\r\n        'Chaleco': ppe.vest ? 'S铆' : 'No',\r\n        'Botas': ppe.boots ? 'S铆' : 'No',\r\n        'Guantes': ppe.gloves ? 'S铆' : 'No',\r\n        'Lentes': ppe.glasses ? 'S铆' : 'No',\r\n        'Mascarilla': ppe.mask ? 'S铆' : 'No',\r\n        'Contacto de Emergencia': emergencyContact.name || '',\r\n        'Tel茅fono de Emergencia': emergencyContact.phone || '',\r\n        'Relaci贸n con Contacto': emergencyContact.relationship || ''\r\n      };\r\n    });\r\n\r\n    // Convertir a CSV\r\n    const headers = Object.keys(dataToExport[0]);\r\n    const csvContent = [\r\n      headers.join(','),\r\n      ...dataToExport.map(row => \r\n        headers.map(header => {\r\n          const value = row[header];\r\n          // Escapar comillas y envolver en comillas si contiene comas\r\n          const escaped = String(value).replace(/\"/g, '\"\"');\r\n          return `\"${escaped}\"`;\r\n        }).join(',')\r\n      )\r\n    ].join('\\n');\r\n\r\n    // Crear el archivo y descargarlo\r\n    const blob = new Blob(['\\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    const url = URL.createObjectURL(blob);\r\n    \r\n    const fecha = new Date().toISOString().split('T')[0];\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `personal_${fecha}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    \r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const handleViewComplianceDetails = (type) => {\r\n  // console.log eliminado\r\n  };\r\n\r\n  const handleScheduleTraining = () => {\r\n  // console.log eliminado\r\n  };\r\n\r\n  const handleSidebarToggle = () => {\r\n    setSidebarCollapsed(!sidebarCollapsed);\r\n  };\r\n\r\n  const handleMobileMenuToggle = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n  };\r\n\r\n  //  Mock dashboard data\r\n  const mockComplianceData = {\r\n    totalEmployees: persons?.length || 0,\r\n    overallCompliance: 78,\r\n    upcomingExpirations: 8,\r\n    medicalStudies: {\r\n      total: persons?.length || 0,\r\n      expired: 3,\r\n      pending: 7,\r\n      complete: 35\r\n    },\r\n    ppe: {\r\n      total: persons?.length || 0,\r\n      assigned: 42,\r\n      pending: 3\r\n    },\r\n    training: {\r\n      pending: 12,\r\n      scheduled: 8,\r\n      completed: 25\r\n    },\r\n    documents: {\r\n      missing: 5,\r\n      pending: 8,\r\n      complete: 32\r\n    },\r\n    alerts: [\r\n      {\r\n        id: 1,\r\n        title: 'Estudios m茅dicos vencidos',\r\n        description:\r\n          '3 empleados tienen estudios m茅dicos vencidos que requieren atenci贸n inmediata',\r\n        date: '30/09/2024',\r\n        priority: 'critical',\r\n        type: 'medical'\r\n      },\r\n      {\r\n        id: 2,\r\n        title: 'EPP pendiente de asignaci贸n',\r\n        description:\r\n          '3 empleados necesitan asignaci贸n de equipo de protecci贸n personal',\r\n        date: '29/09/2024',\r\n        priority: 'warning',\r\n        type: 'ppe'\r\n      },\r\n      {\r\n        id: 3,\r\n        title: 'Capacitaciones programadas',\r\n        description:\r\n          '8 empleados tienen capacitaciones programadas para la pr贸xima semana',\r\n        date: '28/09/2024',\r\n        priority: 'good',\r\n        type: 'training'\r\n      }\r\n    ]\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={handleSidebarToggle} />\r\n      </div>\r\n\r\n      {/* Header m贸vil */}\r\n      <div className=\"lg:hidden\">\r\n        <Header onMenuToggle={handleMobileMenuToggle} isMenuOpen={mobileMenuOpen} />\r\n      </div>\r\n\r\n      {/* Contenido principal */}\r\n      <div\r\n        className={`transition-all duration-300 ${\r\n          sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n        } lg:pt-0`}\r\n      >\r\n        <div className=\"p-6\">\r\n          {/* Breadcrumb */}\r\n          <div className=\"mb-6\">\r\n            <Breadcrumb />\r\n          </div>\r\n\r\n          {/* Encabezado */}\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-8\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-foreground\">Gesti贸n de Personal</h1>\r\n              <p className=\"text-muted-foreground mt-2\">\r\n                Administraci贸n integral de recursos humanos, estudios m茅dicos y EPP\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"flex items-center bg-card border border-border rounded-lg p-1\">\r\n                <Button\r\n                  variant={activeView === 'personnel' ? 'default' : 'ghost'}\r\n                  size=\"sm\"\r\n                  onClick={() => setActiveView('personnel')}\r\n                  iconName=\"Users\"\r\n                  iconPosition=\"left\"\r\n                  iconSize={16}\r\n                >\r\n                  Personal\r\n                </Button>\r\n                {/* TODO: Habilitar cuando se implemente cumplimiento */}\r\n                {/* <Button\r\n                  variant={activeView === 'compliance' ? 'default' : 'ghost'}\r\n                  size=\"sm\"\r\n                  onClick={() => setActiveView('compliance')}\r\n                  iconName=\"Shield\"\r\n                  iconPosition=\"left\"\r\n                  iconSize={16}\r\n                >\r\n                  Cumplimiento\r\n                </Button> */}\r\n              </div>\r\n\r\n              <Button\r\n                onClick={handleCreatePersonnel}\r\n                iconName=\"UserPlus\"\r\n                iconPosition=\"left\"\r\n                iconSize={16}\r\n              >\r\n                Nuevo Empleado\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Vista principal */}\r\n          {activeView === 'personnel' ? (\r\n            <div className=\"space-y-6\">\r\n              <FilterToolbar\r\n                filters={filters}\r\n                onFilterChange={setFilters}\r\n                onClearFilters={handleClearFilters}\r\n                onExportData={handleExportData}\r\n                totalCount={persons?.length || 0}\r\n                filteredCount={filteredPersonnel?.length || 0}\r\n              />\r\n\r\n              <PersonnelTable\r\n  personnel={filteredPersonnel}\r\n  onViewProfile={handleViewProfile}\r\n  onEditPersonnel={handleEditPersonnel}\r\n  onAssignPPE={handleAssignPPE}\r\n/>\r\n\r\n            </div>\r\n          ) : (\r\n            <ComplianceDashboard\r\n              complianceData={mockComplianceData}\r\n              onViewDetails={handleViewComplianceDetails}\r\n              onScheduleTraining={handleScheduleTraining}\r\n            />\r\n          )}\r\n\r\n          {/* Modal */}\r\n          <PersonnelModal\r\n            isOpen={isModalOpen}\r\n            onClose={() => {\r\n              setIsModalOpen(false);\r\n              setSelectedEmployee(null);\r\n              setModalMode(null);\r\n              setInitialStep(0);\r\n              setOpenedFromEPP(false);\r\n            }}\r\n            employee={selectedEmployee}\r\n            mode={modalMode}\r\n            initialStep={initialStep}\r\n            openedFromEPP={openedFromEPP}\r\n            onSave={handleSavePersonnel}\r\n            error={error}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonnelManagement;\r\n","import { useState, useCallback, useRef } from 'react';\r\nimport { useNotifications } from '../context/NotificationContext';\r\nimport clientService from '../services/clientService';\r\n\r\nconst useClient = () => {\r\n  const { showOperationSuccess, showHttpError } = useNotifications();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const [clients, setClients] = useState([]);\r\n  const loadingRef = useRef(false); // Ref para evitar llamadas concurrentes\r\n  const hasLoadedRef = useRef(false); // Ref para rastrear si ya se cargaron los clientes\r\n  const clientsRef = useRef([]); // Ref para acceder a los clientes sin dependencias\r\n\r\n  const getClients = useCallback(async (force = false) => {\r\n    // Si ya hay clientes cargados y no se fuerza, no hacer la petici贸n\r\n    if (!force && hasLoadedRef.current && !loadingRef.current) {\r\n      return clientsRef.current;\r\n    }\r\n\r\n    // Si ya hay una petici贸n en curso, no hacer otra\r\n    if (loadingRef.current) {\r\n      return clientsRef.current;\r\n    }\r\n\r\n    loadingRef.current = true;\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n  const response = await clientService.getClients();\r\n  setClients(Array.isArray(response) ? response : response?.data || []);\r\n  // console.log eliminado\r\n  return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      setClients([]);\r\n      clientsRef.current = []; // Resetear el ref\r\n      hasLoadedRef.current = false; // Resetear el flag en caso de error\r\n      // No mostrar notificaci贸n, solo actualizar el estado de error\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n      loadingRef.current = false;\r\n    }\r\n  }, []); // Sin dependencias para que la funci贸n sea estable\r\n\r\n  const createClient = useCallback(async (clientData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      const response = await clientService.createClient(clientData);\r\n      setSuccess(true);\r\n      if (response && response.success && response.data) {\r\n        setClients(prevClients => {\r\n          const newClients = [...prevClients, response.data];\r\n          clientsRef.current = newClients; // Actualizar el ref\r\n          return newClients;\r\n        });\r\n        showOperationSuccess('Cliente guardado exitosamente');\r\n      }\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      setSuccess(false);\r\n      showHttpError('Error al guardar cliente');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  const editClient = useCallback(async (id, clientData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      const response = await clientService.updateClient(id, clientData);\r\n      setSuccess(true);\r\n      if (response && response.success && response.data) {\r\n        setClients(prevClients => {\r\n          const newClients = prevClients.map(c =>\r\n            (c.id === id || c._id === id)\r\n              ? { ...c, ...response.data, id: c.id || c._id }\r\n              : c\r\n          );\r\n          clientsRef.current = newClients; // Actualizar el ref\r\n          return newClients;\r\n        });\r\n        showOperationSuccess('Cliente actualizado exitosamente');\r\n      } else if (response && response.success) {\r\n        setClients(prevClients => {\r\n          const newClients = prevClients.map(c =>\r\n            (c.id === id || c._id === id)\r\n              ? { ...c, ...clientData, id: c.id || c._id }\r\n              : c\r\n          );\r\n          clientsRef.current = newClients; // Actualizar el ref\r\n          return newClients;\r\n        });\r\n        showOperationSuccess('Cliente actualizado exitosamente');\r\n      }\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      setSuccess(false);\r\n      showHttpError('Error al actualizar cliente');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  return { clients, getClients, createClient, editClient, loading, error, success, setClients };\r\n};\r\n\r\nexport default useClient;\r\n","// src/services/communicationService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst communicationService = {\r\n  async getComunicacionByCotizacionId(cotizacionId) {\r\n    // GET al endpoint comunicaciones/cotizacion/{cotizacionId}\r\n    const response = await httpService.get(\r\n      `/comunicaciones/cotizacion/${cotizacionId}`\r\n    );\r\n    return response;\r\n  },\r\n  async createCommunication(data) {\r\n    // POST al endpoint comunicacion/crear (para oportunidades)\r\n    const response = await httpService.post(\"/comunicacion/crear\", data);\r\n    return response;\r\n  },\r\n\r\n  async createCotizacionCommunication(data) {\r\n    // POST al endpoint comunicacion/cotizacion/crear (para cotizaciones)\r\n    const response = await httpService.post(\r\n      \"/comunicacion/cotizacion/crear\",\r\n      data\r\n    );\r\n    return response;\r\n  },\r\n\r\n  async getComunicacionesByCliente(clienteId) {\r\n    // GET al endpoint comunicaciones/cliente/{clienteId}\r\n    // Suprimir errores 404 (es normal que no haya comunicaciones al inicio)\r\n    try {\r\n      const response = await httpService.get(\r\n        `/comunicaciones/cliente/${clienteId}`,\r\n        {\r\n          validateStatus: (status) => status === 200 || status === 404,\r\n        }\r\n      );\r\n      return response;\r\n    } catch (error) {\r\n      // Si falla por cualquier raz贸n, retornar vac铆o\r\n      return { data: { comunicaciones: [] } };\r\n    }\r\n  },\r\n\r\n  async getComunicacionesByOportunidad(oportunidadId) {\r\n    // GET al endpoint comunicaciones/oportunidad/{oportunidadId}\r\n    try {\r\n      const response = await httpService.get(\r\n        `/comunicaciones/oportunidad/${oportunidadId}`,\r\n        {\r\n          validateStatus: (status) => status === 200 || status === 404,\r\n        }\r\n      );\r\n      return response;\r\n    } catch (error) {\r\n      // Si falla por cualquier raz贸n, retornar vac铆o\r\n      return { data: { comunicaciones: [] } };\r\n    }\r\n  },\r\n};\r\n\r\nexport default communicationService;\r\n","// src/hooks/useCommunication.js\r\nimport { useState } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport communicationService from \"../services/communicationService\";\r\n\r\nconst useCommunication = () => {\r\n  const getComunicacionByCotizacionId = async (cotizacionId) => {\r\n    // console.log eliminado\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await communicationService.getComunicacionByCotizacionId(\r\n        cotizacionId\r\n      );\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError(\"Error al obtener comunicaci贸n por cotizaci贸n\");\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const { showOperationSuccess, showHttpError } = useNotifications();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const createCommunication = async (commData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      const response = await communicationService.createCommunication(commData);\r\n      setSuccess(true);\r\n      showOperationSuccess(\"Comunicaci贸n enviada exitosamente\");\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      setSuccess(false);\r\n      showHttpError(\"Error al enviar comunicaci贸n\");\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createCotizacionCommunication = async (commData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      const response = await communicationService.createCotizacionCommunication(\r\n        commData\r\n      );\r\n      setSuccess(true);\r\n      showOperationSuccess(\"Comunicaci贸n de cotizaci贸n enviada exitosamente\");\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      setSuccess(false);\r\n      showHttpError(\"Error al enviar comunicaci贸n de cotizaci贸n\");\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getComunicacionesByCliente = async (clienteId) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await communicationService.getComunicacionesByCliente(\r\n        clienteId\r\n      );\r\n      return response;\r\n    } catch (err) {\r\n      // No hacer nada si no hay comunicaciones (404 es normal)\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getComunicacionesByOportunidad = async (oportunidadId) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response =\r\n        await communicationService.getComunicacionesByOportunidad(\r\n          oportunidadId\r\n        );\r\n      return response;\r\n    } catch (err) {\r\n      // No hacer nada si no hay comunicaciones (404 es normal)\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    createCommunication,\r\n    createCotizacionCommunication,\r\n    getComunicacionesByCliente,\r\n    getComunicacionesByOportunidad,\r\n    getComunicacionByCotizacionId,\r\n    loading,\r\n    error,\r\n    success,\r\n  };\r\n};\r\n\r\nexport default useCommunication;\r\n","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\n\r\nconst ClientCard = ({ client, onViewDetails, onEditClient, onViewProjects, onViewContracts }) => {\r\n  // Funci贸n para capitalizar la primera letra\r\n  const capitalize = (text) => {\r\n    if (!text) return '';\r\n    const str = String(text);\r\n    return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    const normalizedStatus = (status || '').toString().toLowerCase();\r\n    switch (normalizedStatus) {\r\n      case 'activo':\r\n        return 'bg-success text-success-foreground';\r\n      case 'inactivo':\r\n        return 'bg-error text-error-foreground';\r\n      case 'pendiente':\r\n        return 'bg-warning text-warning-foreground';\r\n      case 'prospecto':\r\n        return 'bg-info text-info-foreground';\r\n      default:\r\n        return 'bg-secondary text-secondary-foreground';\r\n    }\r\n  };\r\n\r\n  const getHealthColor = (health) => {\r\n    const normalizedHealth = (health || '').toString().toLowerCase();\r\n    switch (normalizedHealth) {\r\n      case 'excelente':\r\n        return 'text-success';\r\n      case 'buena':\r\n        return 'text-primary';\r\n      case 'regular':\r\n        return 'text-warning';\r\n      case 'mala':\r\n        return 'text-error';\r\n      default:\r\n        return 'text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 card-shadow hover:shadow-md transition-smooth flex flex-col h-full min-w-[340px] max-w-[440px] max-h-[480px] min-h-[340px] overflow-hidden\">\r\n      <div className=\"flex items-start justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-4 min-w-0\">\r\n          <div className=\"w-12 h-12 bg-primary rounded-lg flex items-center justify-center flex-shrink-0\">\r\n            <Icon name=\"Building2\" size={24} color=\"white\" />\r\n          </div>\r\n          <div className=\"min-w-0 flex-1\">\r\n            <h3 className=\"text-lg font-semibold text-foreground truncate w-full max-w-full\">{String(client?.companyName || client?.empresa || '')}</h3>\r\n            <p className=\"text-sm text-muted-foreground truncate w-full max-w-full\">{String(client?.industry || client?.industria || '')}</p>\r\n            <div className=\"flex items-center space-x-2 mt-1 flex-wrap\">\r\n              <span className={`px-2 py-1 text-xs rounded-full ${getStatusColor(client?.status || client?.estado)} truncate max-w-[90px]`}>\r\n                {capitalize(client?.status || client?.estado || '')}\r\n              </span>\r\n              <span className={`text-xs font-medium ${getHealthColor(client?.relationshipHealth || client?.relacion)} truncate max-w-[90px]`}>\r\n                Relaci贸n: {capitalize(client?.relationshipHealth || client?.relacion || '')}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          onClick={() => onViewDetails(client)}\r\n          title=\"Ver detalles\"\r\n        >\r\n          <Icon name=\"MoreVertical\" size={16} />\r\n        </Button>\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n        <div className=\"space-y-2 min-w-0\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"User\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">{String(client?.contactPerson || client?.contacto || '')}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Mail\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">{String(client?.email || '')}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Phone\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">{String(client?.phone || client?.telefono || '')}</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"MapPin\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">\r\n              {client?.ubicacionEmpre?.municipio || ''}{client?.ubicacionEmpre?.municipio && client?.ubicacionEmpre?.estado ? ', ' : ''}{client?.ubicacionEmpre?.estado || ''}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Calendar\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">Cliente desde: {String(client?.clientSince || client?.fechaDesde || '')}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"FileText\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">RFC: {String(client?.rfc || '').substring(0, 18)}{client?.rfc && client?.rfc.length > 18 ? '...' : ''}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between pt-4 border-t border-border gap-4\">\r\n        <div className=\"grid grid-cols-3 gap-4 min-w-0 w-full\">\r\n          <div className=\"flex flex-col items-center\">\r\n            <div className=\"text-lg font-semibold text-foreground\">{Number(client?.totalProjects) || 0}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Proyectos</div>\r\n          </div>\r\n          <div className=\"flex flex-col items-center\">\r\n            <div className=\"text-lg font-semibold text-foreground\">{Number(client?.activeContracts) || 0}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Contratos</div>\r\n          </div>\r\n          <div className=\"flex flex-col items-center\">\r\n            <div className=\"text-lg font-semibold text-success\">${Number(client?.totalValue) ? Number(client?.totalValue).toLocaleString('es-MX', {minimumFractionDigits: 2}) : '0.00'}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Valor Total</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex flex-wrap items-center gap-2 mt-2 md:mt-0\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onViewProjects(client)}\r\n            iconName=\"FolderOpen\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Proyectos\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onViewContracts(client)}\r\n            iconName=\"FileText\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Contratos\r\n          </Button>\r\n          <Button\r\n            variant=\"default\"\r\n            size=\"sm\"\r\n            onClick={() => onEditClient(client)}\r\n            iconName=\"Edit\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Editar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientCard;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\nconst ClientTable = ({ clients, onViewDetails, onEditClient, onViewProjects, onViewContracts }) => {\r\n  const [sortField, setSortField] = useState('empresa');\r\n  const [sortDirection, setSortDirection] = useState('asc');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  const handleSort = (field) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection('asc');\r\n    }\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const sortedClients = [...clients]?.sort((a, b) => {\r\n    const aValue = a?.[sortField] || '';\r\n    const bValue = b?.[sortField] || '';\r\n    if (sortDirection === 'asc') {\r\n      return aValue > bValue ? 1 : -1;\r\n    } else {\r\n      return aValue < bValue ? 1 : -1;\r\n    }\r\n  });\r\n\r\n  // Calcular datos de paginaci贸n\r\n  const totalItems = sortedClients.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedClients = sortedClients.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  // Funci贸n para capitalizar la primera letra\r\n  const capitalize = (text) => {\r\n    if (!text) return '';\r\n    const str = String(text);\r\n    return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    const normalizedStatus = (status || '').toString().toLowerCase();\r\n    switch (normalizedStatus) {\r\n      case 'activo':\r\n        return 'bg-success text-success-foreground';\r\n      case 'inactivo':\r\n        return 'bg-error text-error-foreground';\r\n      case 'pendiente':\r\n        return 'bg-warning text-warning-foreground';\r\n      case 'prospecto':\r\n        return 'bg-info text-info-foreground';\r\n      default:\r\n        return 'bg-secondary text-secondary-foreground';\r\n    }\r\n  };\r\n\r\n  const getHealthColor = (health) => {\r\n    const normalizedHealth = (health || '').toString().toLowerCase();\r\n    switch (normalizedHealth) {\r\n      case 'excelente':\r\n        return 'text-success';\r\n      case 'buena':\r\n        return 'text-primary';\r\n      case 'regular':\r\n        return 'text-warning';\r\n      case 'mala':\r\n        return 'text-error';\r\n      default:\r\n        return 'text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  const SortableHeader = ({ field, children }) => (\r\n    <th\r\n      className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted transition-smooth\"\r\n      onClick={() => handleSort(field)}\r\n    >\r\n      <div className=\"flex items-center space-x-1\">\r\n        <span>{children}</span>\r\n        <Icon\r\n          name={\r\n            sortField === field\r\n              ? sortDirection === 'asc'\r\n                ? 'ChevronUp'\r\n                : 'ChevronDown'\r\n              : 'ChevronsUpDown'\r\n          }\r\n          size={14}\r\n        />\r\n      </div>\r\n    </th>\r\n  );\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden card-shadow overflow-x-auto\">\r\n      <table className=\"min-w-full divide-y divide-border\">\r\n        <thead className=\"bg-muted\">\r\n          <tr>\r\n            <SortableHeader field=\"empresa\">Empresa</SortableHeader>\r\n            <SortableHeader field=\"contacto\">Contacto</SortableHeader>\r\n            <SortableHeader field=\"industria\">Industria</SortableHeader>\r\n            <SortableHeader field=\"ubicacionEmpre\">Ubicaci贸n</SortableHeader>\r\n            <SortableHeader field=\"estado\">Estado</SortableHeader>\r\n            {/* <SortableHeader field=\"relacion\">Relaci贸n</SortableHeader>\r\n            <SortableHeader field=\"totalProjects\">Proyectos</SortableHeader>\r\n            <SortableHeader field=\"totalValue\">Valor Total</SortableHeader> */}\r\n            <th className=\"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n              Acciones\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"bg-card divide-y divide-border\">\r\n          {paginatedClients?.map((client) => (\r\n            <tr key={client?.id || client?._id || client?.empresa} className=\"hover:bg-muted transition-smooth\">\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"w-10 h-10 bg-primary rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                    <Icon name=\"Building2\" size={16} color=\"white\" />\r\n                  </div>\r\n                  <div className=\"ml-4\">\r\n                    <div className=\"text-sm font-medium text-foreground\">{String(client?.empresa || '')}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">RFC: {String(client?.rfc || '')}</div>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"text-sm text-foreground\">{String(client?.contacto || '')}</div>\r\n                <div className=\"text-sm text-muted-foreground\">{String(client?.email || '')}</div>\r\n                <div className=\"text-sm text-muted-foreground\">{String(client?.telefono || '')}</div>\r\n              </td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-foreground\">{String(client?.industria || '')}</td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"text-sm text-foreground\">\r\n                  {client?.ubicacionEmpre?.municipio || ''}{client?.ubicacionEmpre?.municipio && client?.ubicacionEmpre?.estado ? ', ' : ''}{client?.ubicacionEmpre?.estado || ''}\r\n                </div>\r\n                {client?.ubicacion?.direccion && (\r\n                  <div className=\"text-xs text-muted-foreground max-w-[200px] truncate\" title={client.ubicacion.direccion}>\r\n                    {String(client.ubicacion.direccion)}\r\n                  </div>\r\n                )}\r\n              </td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <span className={`px-2 py-1 text-xs rounded-full ${getStatusColor(client?.estado)}`}>\r\n                  {capitalize(client?.estado || '')}\r\n                </span>\r\n              </td>\r\n              {/* <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <span className={`text-sm font-medium ${getHealthColor(client?.relacion)}`}>\r\n                  {capitalize(client?.relacion || '')}\r\n                </span>\r\n              </td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"text-sm text-foreground\">{Number(client?.totalProjects || 0)}</div>\r\n                <div className=\"text-xs text-muted-foreground\">{Number(client?.activeContracts || 0)} contratos</div>\r\n              </td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"text-sm font-semibold text-success\">\r\n                  ${Number(client?.totalValue || 0).toLocaleString('es-MX')}\r\n                </div>\r\n              </td> */}\r\n              <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                <div className=\"flex items-center justify-end space-x-2\">\r\n                  {/* <Button variant=\"ghost\" size=\"sm\" onClick={() => onViewProjects(client)} title=\"Ver proyectos\">\r\n                    <Icon name=\"FolderOpen\" size={16} />\r\n                  </Button>\r\n                  <Button variant=\"ghost\" size=\"sm\" onClick={() => onViewContracts(client)} title=\"Ver contratos\">\r\n                    <Icon name=\"FileText\" size={16} />\r\n                  </Button> */}\r\n                  <Button variant=\"ghost\" size=\"sm\" onClick={() => onEditClient(client)} title=\"Editar cliente\">\r\n                    <Icon name=\"Edit\" size={16} />\r\n                  </Button>\r\n                  {/* <Button variant=\"ghost\" size=\"sm\" onClick={() => onViewDetails(client)} title=\"Ver detalles\">\r\n                    <Icon name=\"Eye\" size={16} />\r\n                  </Button> */}\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Paginaci贸n */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n          <select\r\n            value={pageSize}\r\n            onChange={handleChangePageSize}\r\n            className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n          >\r\n            {PAGE_SIZE_OPTIONS.map((opt) => (\r\n              <option key={opt} value={opt}>{opt}</option>\r\n            ))}\r\n          </select>\r\n          <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n          <span className=\"text-xs text-muted-foreground ml-3\">\r\n            Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n          <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n          <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientTable;\r\n","import React from 'react';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst ClientFilters = ({ \r\n  filters, \r\n  onFiltersChange, \r\n  onClearFilters, \r\n  onExport,\r\n  estados = []\r\n}) => {\r\n  const industryOptions = [\r\n    { value: '', label: 'Todas las industrias' },\r\n    { value: 'Manufactura', label: 'Manufactura' },\r\n    { value: 'Comercial', label: 'Comercial' },\r\n    { value: 'Hospitalidad', label: 'Hospitalidad' },\r\n    { value: 'Educaci贸n', label: 'Educaci贸n' },\r\n    { value: 'Salud', label: 'Salud' },\r\n    { value: 'Retail', label: 'Retail' },\r\n    { value: 'Oficinas', label: 'Oficinas' },\r\n    { value: 'Residencial', label: 'Residencial' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los estados' },\r\n    { value: 'Activo', label: 'Activo' },\r\n    { value: 'Inactivo', label: 'Inactivo' },\r\n    { value: 'Pendiente', label: 'Pendiente' }\r\n  ];\r\n\r\n  const relationshipOptions = [\r\n    { value: '', label: 'Todas las relaciones' },\r\n    { value: 'Excelente', label: 'Excelente' },\r\n    { value: 'Buena', label: 'Buena' },\r\n    { value: 'Regular', label: 'Regular' },\r\n    { value: 'Mala', label: 'Mala' }\r\n  ];\r\n\r\n  const locationOptions = [\r\n    { value: '', label: 'Todas las ubicaciones' },\r\n    ...(Array.isArray(estados) ? estados.map(estado => ({\r\n      value: estado?.name || estado?.nombre || estado,\r\n      label: estado?.name || estado?.nombre || estado\r\n    })) : [])\r\n  ];\r\n\r\n  const handleFilterChange = (field, value) => {\r\n    onFiltersChange({\r\n      ...filters,\r\n      [field]: value\r\n    });\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some(value => value !== '');\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 card-shadow mb-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Filtros de B煤squeda</h3>\r\n        <div className=\"flex items-center space-x-2\">\r\n          {hasActiveFilters && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={onClearFilters}\r\n              iconName=\"X\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Limpiar Filtros\r\n            </Button>\r\n          )}\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExport}\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Exportar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\r\n        <Input\r\n          type=\"search\"\r\n          label=\"Buscar Cliente\"\r\n          placeholder=\"Nombre de empresa, contacto...\"\r\n          value={filters?.search}\r\n          onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Industria\"\r\n          options={industryOptions}\r\n          value={filters?.industry}\r\n          onChange={(value) => handleFilterChange('industry', value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Estado\"\r\n          options={statusOptions}\r\n          value={filters?.status}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Relaci贸n\"\r\n          options={relationshipOptions}\r\n          value={filters?.relationshipHealth}\r\n          onChange={(value) => handleFilterChange('relationshipHealth', value)}\r\n        />\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Select\r\n          label=\"Ubicaci贸n\"\r\n          options={locationOptions}\r\n          value={filters?.location}\r\n          onChange={(value) => handleFilterChange('location', value)}\r\n          searchable={true}\r\n          placeholder=\"Seleccionar estado...\"\r\n        />\r\n\r\n        <Input\r\n          type=\"text\"\r\n          label=\"RFC\"\r\n          placeholder=\"RFC del cliente\"\r\n          value={filters?.rfc}\r\n          onChange={(e) => handleFilterChange('rfc', e?.target?.value)}\r\n        />\r\n\r\n        {/* <Input\r\n          type=\"number\"\r\n          label=\"Proyectos M铆nimos\"\r\n          placeholder=\"N煤mero m铆nimo\"\r\n          value={filters?.minProjects}\r\n          onChange={(e) => handleFilterChange('minProjects', e?.target?.value)}\r\n        />\r\n\r\n        <Input\r\n          type=\"number\"\r\n          label=\"Valor M铆nimo (MXN)\"\r\n          placeholder=\"Valor m铆nimo\"\r\n          value={filters?.minValue}\r\n          onChange={(e) => handleFilterChange('minValue', e?.target?.value)}\r\n        /> */}\r\n      </div>\r\n      {hasActiveFilters && (\r\n        <div className=\"mt-4 pt-4 border-t border-border\">\r\n          <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\r\n            <Icon name=\"Filter\" size={16} />\r\n            <span>Filtros activos aplicados</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientFilters;","import React, { useState, useEffect } from 'react';\r\nimport useCommunication from '../../../hooks/useCommunication';\r\nimport { useAuth } from '../../../hooks/useAuth';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ClientCommunicationPanel = ({ client }) => {\r\n  const { createCommunication, getComunicacionesByCliente, loading, error, success } = useCommunication();\r\n  const { user } = useAuth();\r\n  const [showNewCommForm, setShowNewCommForm] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    tipoComunicacion: 'email',\r\n    nivelUrgencia: 'normal',\r\n    asunto: '',\r\n    mensaje: ''\r\n  });\r\n\r\n  const [communicationHistory, setCommunicationHistory] = useState([]);\r\n  const [loadingHistory, setLoadingHistory] = useState(false);\r\n\r\n  // Cargar historial de comunicaciones al montar el componente o cuando cambie el cliente\r\n  useEffect(() => {\r\n    if (client?.id || client?._id) {\r\n      const clientId = client?.id || client?._id;\r\n      getComunicacionesByCliente(clientId).then((res) => {\r\n        if (res && res.data && res.data.comunicaciones && Array.isArray(res.data.comunicaciones)) {\r\n          setCommunicationHistory(res.data.comunicaciones);\r\n        } else if (res && res.comunicaciones && Array.isArray(res.comunicaciones)) {\r\n          setCommunicationHistory(res.comunicaciones);\r\n        } else if (res && res.data && Array.isArray(res.data)) {\r\n          setCommunicationHistory(res.data);\r\n        } else {\r\n          setCommunicationHistory([]);\r\n        }\r\n      });\r\n    } else {\r\n      setCommunicationHistory([]);\r\n    }\r\n  }, [client?.id, client?._id]);\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleAddCommunication = async () => {\r\n    if (!formData?.mensaje?.trim() || !formData?.asunto?.trim()) {\r\n      return;\r\n    }\r\n\r\n    const clientId = client?.id || client?._id;\r\n    if (!clientId) {\r\n      console.error('No se encontr贸 ID del cliente');\r\n      return;\r\n    }\r\n\r\n    // Mapea los datos al formato del backend\r\n    const commData = {\r\n      tipoComunicacion: formData?.tipoComunicacion || 'email',\r\n      nivelUrgencia: formData?.nivelUrgencia || 'normal',\r\n      asunto: formData?.asunto,\r\n      mensaje: formData?.mensaje,\r\n      idCliente: clientId,\r\n      idOportunidad: 'sin-oportunidad',\r\n      creadoPor: user?.rol || user?.email || 'Usuario',\r\n    };\r\n\r\n    const result = await createCommunication(commData);\r\n    \r\n    if (result) {\r\n      // Limpiar formulario y cerrar\r\n      setFormData({ \r\n        tipoComunicacion: 'email', \r\n        nivelUrgencia: 'normal',\r\n        asunto: '',\r\n        mensaje: ''\r\n      });\r\n      setShowNewCommForm(false);\r\n      \r\n      // Recargar historial\r\n      getComunicacionesByCliente(clientId).then((res) => {\r\n        if (res && res.data && res.data.comunicaciones && Array.isArray(res.data.comunicaciones)) {\r\n          setCommunicationHistory(res.data.comunicaciones);\r\n        } else if (res && res.comunicaciones && Array.isArray(res.comunicaciones)) {\r\n          setCommunicationHistory(res.comunicaciones);\r\n        } else if (res && res.data && Array.isArray(res.data)) {\r\n          setCommunicationHistory(res.data);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const getUrgencyColor = (urgency) => {\r\n    const normalizedUrgency = (urgency || '').toString().toLowerCase();\r\n    switch (normalizedUrgency) {\r\n      case 'urgente':\r\n      case 'alta':\r\n        return 'text-red-600 bg-red-50';\r\n      case 'normal':\r\n        return 'text-blue-600 bg-blue-50';\r\n      default:\r\n        return 'text-gray-600 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getTypeIcon = (type) => {\r\n    const normalizedType = (type || '').toString().toLowerCase();\r\n    switch (normalizedType) {\r\n      case 'whatsapp':\r\n        return 'MessageCircle';\r\n      case 'llamada':\r\n      case 'phone':\r\n        return 'Phone';\r\n      case 'email':\r\n        return 'Mail';\r\n      case 'meeting':\r\n        return 'Users';\r\n      default:\r\n        return 'MessageSquare';\r\n    }\r\n  };\r\n\r\n  const getTypeIconBg = (type) => {\r\n    const normalizedType = (type || '').toString().toLowerCase();\r\n    switch (normalizedType) {\r\n      case 'email':\r\n        return 'bg-blue-500';\r\n      case 'whatsapp':\r\n        return 'bg-green-500';\r\n      case 'llamada':\r\n      case 'phone':\r\n        return 'bg-purple-500';\r\n      default:\r\n        return 'bg-gray-500';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('es-MX', { \r\n      year: 'numeric', \r\n      month: 'short', \r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Historial de Comunicaci贸n</h3>\r\n        <Button\r\n          onClick={() => setShowNewCommForm(true)}\r\n          className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n          iconName=\"Plus\"\r\n          iconPosition=\"left\"\r\n          size=\"sm\"\r\n        >\r\n          Nueva Comunicaci贸n\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Communication History */}\r\n      <div className=\"space-y-3 max-h-96 overflow-y-auto pr-2\">\r\n        {loadingHistory ? (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"Loader2\" size={24} className=\"animate-spin mx-auto text-muted-foreground\" />\r\n            <p className=\"text-sm text-muted-foreground mt-2\">Cargando historial...</p>\r\n          </div>\r\n        ) : communicationHistory.length > 0 ? (\r\n          communicationHistory.map((comm) => (\r\n            <div key={comm?.id} className=\"flex items-start space-x-3 p-3 bg-card border border-border rounded-lg hover:bg-muted/30 transition-colors\">\r\n              {/* Icon */}\r\n              <div className={`p-3 rounded-full ${getTypeIconBg(comm?.tipoComunicacion)}`}>\r\n                <Icon \r\n                  name={getTypeIcon(comm?.tipoComunicacion)} \r\n                  size={20}\r\n                  className=\"text-white\"\r\n                />\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-start justify-between mb-1\">\r\n                  <h4 className=\"font-medium text-sm text-foreground\">{comm?.asunto}</h4>\r\n                  <div className=\"flex items-center space-x-2 text-xs text-muted-foreground ml-2\">\r\n                    <Icon name=\"Calendar\" size={12} />\r\n                    <span>\r\n                      {new Date(parseInt(comm.id)).toLocaleString('es-MX', {\r\n                        year: 'numeric',\r\n                        month: '2-digit',\r\n                        day: '2-digit',\r\n                        hour: '2-digit',\r\n                        minute: '2-digit'\r\n                      })}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                \r\n                <p className=\"text-sm text-muted-foreground mb-2 line-clamp-2\">{comm?.mensaje}</p>\r\n                \r\n                <div className=\"flex items-center space-x-3 text-xs\">\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Icon name=\"User\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-muted-foreground\">{comm?.creadoPor || 'Sistema'}</span>\r\n                  </div>\r\n                  <span className={`px-2 py-1 rounded ${getUrgencyColor(comm?.nivelUrgencia)}`}>\r\n                    {comm?.nivelUrgencia === 'urgente' ? 'Urgente' : comm?.nivelUrgencia === 'alta' ? 'Alta' : 'Normal'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center py-12 bg-muted/30 rounded-lg\">\r\n            <Icon name=\"MessageSquare\" size={48} className=\"mx-auto text-muted-foreground mb-3 opacity-50\" />\r\n            <p className=\"text-sm font-medium text-foreground\">Sin comunicaciones registradas</p>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Agrega la primera comunicaci贸n con este cliente\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modal/Form for New Communication */}\r\n      {showNewCommForm && (\r\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-card rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6 space-y-4\">\r\n              {/* Modal Header */}\r\n              <div className=\"flex items-center justify-between border-b border-border pb-4\">\r\n                <h3 className=\"text-lg font-semibold text-foreground\">Nueva Comunicaci贸n</h3>\r\n                <button\r\n                  onClick={() => {\r\n                    setShowNewCommForm(false);\r\n                    setFormData({\r\n                      tipoComunicacion: 'email',\r\n                      nivelUrgencia: 'normal',\r\n                      asunto: '',\r\n                      mensaje: ''\r\n                    });\r\n                  }}\r\n                  className=\"text-muted-foreground hover:text-foreground\"\r\n                >\r\n                  <Icon name=\"X\" size={20} />\r\n                </button>\r\n              </div>\r\n\r\n              {/* Form Fields */}\r\n              <div className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block text-foreground\">\r\n                      Tipo de Comunicaci贸n <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <select\r\n                      value={formData.tipoComunicacion}\r\n                      onChange={(e) => handleInputChange('tipoComunicacion', e.target.value)}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    >\r\n                      <option value=\"email\">Correo Electr贸nico</option>\r\n                      <option value=\"whatsapp\">WhatsApp</option>\r\n                      <option value=\"llamada\">Llamada Telef贸nica</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block text-foreground\">\r\n                      Nivel de Urgencia\r\n                    </label>\r\n                    <select\r\n                      value={formData.nivelUrgencia}\r\n                      onChange={(e) => handleInputChange('nivelUrgencia', e.target.value)}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    >\r\n                      <option value=\"normal\">Normal</option>\r\n                      <option value=\"alta\">Alta</option>\r\n                      <option value=\"urgente\">Urgente</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-2 block text-foreground\">\r\n                    Asunto <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.asunto}\r\n                    onChange={(e) => handleInputChange('asunto', e.target.value)}\r\n                    placeholder=\"Ej. Seguimiento de propuesta comercial\"\r\n                    className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-2 block text-foreground\">\r\n                    Mensaje <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <textarea\r\n                    value={formData.mensaje}\r\n                    onChange={(e) => handleInputChange('mensaje', e.target.value)}\r\n                    placeholder=\"Escribir mensaje de comunicaci贸n con el cliente...\"\r\n                    rows={6}\r\n                    className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Quick Templates */}\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-2 block text-foreground\">Plantillas R谩pidas</label>\r\n                  <div className=\"grid grid-cols-2 gap-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        handleInputChange('asunto', 'Seguimiento de Proyecto');\r\n                        handleInputChange('mensaje', 'Buenos d铆as, me comunico para dar seguimiento al proyecto en curso y verificar si requieren alguna informaci贸n adicional.');\r\n                      }}\r\n                      className=\"px-3 py-2 text-xs border border-border rounded-md hover:bg-muted/50 text-left flex items-center space-x-2\"\r\n                    >\r\n                      <Icon name=\"Clock\" size={14} />\r\n                      <span>Seguimiento</span>\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        handleInputChange('asunto', 'Propuesta Comercial');\r\n                        handleInputChange('mensaje', 'Adjunto encontrar谩n nuestra propuesta comercial para el proyecto solicitado. Quedo atento a sus comentarios.');\r\n                      }}\r\n                      className=\"px-3 py-2 text-xs border border-border rounded-md hover:bg-muted/50 text-left flex items-center space-x-2\"\r\n                    >\r\n                      <Icon name=\"FileText\" size={14} />\r\n                      <span>Propuesta</span>\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        handleInputChange('asunto', 'Cotizaci贸n Actualizada');\r\n                        handleInputChange('mensaje', 'Les env铆o cotizaci贸n actualizada considerando los ajustes solicitados. Por favor confirmen para proceder.');\r\n                      }}\r\n                      className=\"px-3 py-2 text-xs border border-border rounded-md hover:bg-muted/50 text-left flex items-center space-x-2\"\r\n                    >\r\n                      <Icon name=\"DollarSign\" size={14} />\r\n                      <span>Cotizaci贸n</span>\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        handleInputChange('asunto', 'Programaci贸n de Visita');\r\n                        handleInputChange('mensaje', 'Nos gustar铆a programar una visita t茅cnica para evaluar los requerimientos del proyecto. 驴Qu茅 d铆a les vendr铆a mejor?');\r\n                      }}\r\n                      className=\"px-3 py-2 text-xs border border-border rounded-md hover:bg-muted/50 text-left flex items-center space-x-2\"\r\n                    >\r\n                      <Icon name=\"Calendar\" size={14} />\r\n                      <span>Visita</span>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Modal Footer */}\r\n              <div className=\"flex items-center justify-end space-x-3 border-t border-border pt-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => {\r\n                    setShowNewCommForm(false);\r\n                    setFormData({\r\n                      tipoComunicacion: 'email',\r\n                      nivelUrgencia: 'normal',\r\n                      asunto: '',\r\n                      mensaje: ''\r\n                    });\r\n                  }}\r\n                >\r\n                  Cancelar\r\n                </Button>\r\n                <Button\r\n                  onClick={handleAddCommunication}\r\n                  disabled={!formData.mensaje?.trim() || !formData.asunto?.trim() || loading}\r\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n                  iconName=\"Send\"\r\n                  iconPosition=\"left\"\r\n                >\r\n                  {loading ? 'Enviando...' : 'Registrar Comunicaci贸n'}\r\n                </Button>\r\n              </div>\r\n\r\n              {error && (\r\n                <div className=\"text-sm text-red-600 flex items-center space-x-2 bg-red-50 p-3 rounded-md\">\r\n                  <Icon name=\"AlertCircle\" size={16} />\r\n                  <span>Error al enviar comunicaci贸n</span>\r\n                </div>\r\n              )}\r\n              {success && (\r\n                <div className=\"text-sm text-green-600 flex items-center space-x-2 bg-green-50 p-3 rounded-md\">\r\n                  <Icon name=\"CheckCircle2\" size={16} />\r\n                  <span>Comunicaci贸n registrada correctamente</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientCommunicationPanel;\r\n","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst DocumentStatus = ({ documents, onUploadDocument, onViewDocument, onDownloadDocument }) => {\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'Completo':\r\n        return 'bg-success text-success-foreground';\r\n      case 'Pendiente':\r\n        return 'bg-warning text-warning-foreground';\r\n      case 'Vencido':\r\n        return 'bg-error text-error-foreground';\r\n      case 'En Revisi贸n':\r\n        return 'bg-primary text-primary-foreground';\r\n      default:\r\n        return 'bg-secondary text-secondary-foreground';\r\n    }\r\n  };\r\n\r\n  const getDocumentIcon = (type) => {\r\n    switch (type) {\r\n      case 'RFC':\r\n        return 'FileText';\r\n      case 'Contrato':\r\n        return 'FileCheck';\r\n      case 'Garant铆a':\r\n        return 'Shield';\r\n      case 'Facturaci贸n':\r\n        return 'Receipt';\r\n      case 'Identificaci贸n':\r\n        return 'CreditCard';\r\n      default:\r\n        return 'File';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'No especificado';\r\n    const date = new Date(dateString);\r\n    return date?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  const isExpiringSoon = (expirationDate) => {\r\n    if (!expirationDate) return false;\r\n    const today = new Date();\r\n    const expiry = new Date(expirationDate);\r\n    const diffTime = expiry - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    return diffDays <= 30 && diffDays > 0;\r\n  };\r\n\r\n  const isExpired = (expirationDate) => {\r\n    if (!expirationDate) return false;\r\n    const today = new Date();\r\n    const expiry = new Date(expirationDate);\r\n    return expiry < today;\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Estado de Documentos</h3>\r\n        <Button\r\n          variant=\"default\"\r\n          size=\"sm\"\r\n          onClick={onUploadDocument}\r\n          iconName=\"Upload\"\r\n          iconPosition=\"left\"\r\n        >\r\n          Subir Documento\r\n        </Button>\r\n      </div>\r\n  <div className=\"space-y-4 max-h-[400px] overflow-y-auto overflow-x-hidden\">\r\n        {documents?.length === 0 ? (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"FileX\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n            <p className=\"text-muted-foreground\">No hay documentos registrados</p>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={onUploadDocument}\r\n              className=\"mt-4\"\r\n              iconName=\"Upload\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Subir Primer Documento\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          documents?.map((doc) => (\r\n            <div key={doc?.id} className=\"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-muted transition-smooth\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className=\"w-10 h-10 bg-muted rounded-lg flex items-center justify-center\">\r\n                  <Icon name={getDocumentIcon(doc?.type)} size={20} className=\"text-muted-foreground\" />\r\n                </div>\r\n                \r\n                <div className=\"min-w-0 flex-1\">\r\n                  <div className=\"flex items-center space-x-2 mb-1\">\r\n                    <h4 className=\"text-sm font-medium text-foreground\">{doc?.name}</h4>\r\n                    <span className={`px-2 py-1 text-xs rounded-full ${getStatusColor(doc?.status)}`}>\r\n                      {doc?.status}\r\n                    </span>\r\n                    {isExpiringSoon(doc?.expirationDate) && (\r\n                      <span className=\"px-2 py-1 text-xs bg-warning text-warning-foreground rounded-full\">\r\n                        Por Vencer\r\n                      </span>\r\n                    )}\r\n                    {isExpired(doc?.expirationDate) && (\r\n                      <span className=\"px-2 py-1 text-xs bg-error text-error-foreground rounded-full\">\r\n                        Vencido\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-4 text-xs text-muted-foreground\">\r\n                    <span>Tipo: {doc?.type}</span>\r\n                    <span>Subido: {formatDate(doc?.uploadDate)}</span>\r\n                    {doc?.expirationDate && (\r\n                      <span>Vence: {formatDate(doc?.expirationDate)}</span>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {doc?.notes && (\r\n                    <p className=\"text-xs text-muted-foreground mt-1 line-clamp-1\">\r\n                      {doc?.notes}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-2\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onViewDocument(doc)}\r\n                  title=\"Ver documento\"\r\n                >\r\n                  <Icon name=\"Eye\" size={16} />\r\n                </Button>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onDownloadDocument(doc)}\r\n                  title=\"Descargar documento\"\r\n                >\r\n                  <Icon name=\"Download\" size={16} />\r\n                </Button>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onUploadDocument(doc)}\r\n                  title=\"Actualizar documento\"\r\n                >\r\n                  <Icon name=\"Upload\" size={16} />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n      {/* Document Summary */}\r\n      <div className=\"mt-6 pt-6 border-t border-border\">\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-success\">\r\n              {documents?.filter(d => d?.status === 'Completo')?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Completos</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-warning\">\r\n              {documents?.filter(d => d?.status === 'Pendiente')?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Pendientes</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-error\">\r\n              {documents?.filter(d => isExpired(d?.expirationDate))?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Vencidos</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-primary\">\r\n              {documents?.filter(d => isExpiringSoon(d?.expirationDate))?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Por Vencer</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentStatus;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ContractAlerts = ({ contracts, onViewContract, onRenewContract, onScheduleRenewal }) => {\r\n  const getAlertType = (contract) => {\r\n    const today = new Date();\r\n    const expirationDate = new Date(contract.expirationDate);\r\n    const diffTime = expirationDate - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n    if (diffDays < 0) return 'expired';\r\n    if (diffDays <= 30) return 'expiring';\r\n    if (diffDays <= 90) return 'warning';\r\n    return 'normal';\r\n  };\r\n\r\n  const getAlertColor = (type) => {\r\n    switch (type) {\r\n      case 'expired':\r\n        return 'border-error bg-error/10';\r\n      case 'expiring':\r\n        return 'border-warning bg-warning/10';\r\n      case 'warning':\r\n        return 'border-accent bg-accent/10';\r\n      default:\r\n        return 'border-border bg-card';\r\n    }\r\n  };\r\n\r\n  const getAlertIcon = (type) => {\r\n    switch (type) {\r\n      case 'expired':\r\n        return 'AlertTriangle';\r\n      case 'expiring':\r\n        return 'Clock';\r\n      case 'warning':\r\n        return 'AlertCircle';\r\n      default:\r\n        return 'FileCheck';\r\n    }\r\n  };\r\n\r\n  const getAlertMessage = (contract) => {\r\n    const today = new Date();\r\n    const expirationDate = new Date(contract.expirationDate);\r\n    const diffTime = expirationDate - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n    if (diffDays < 0) {\r\n      return `Vencido hace ${Math.abs(diffDays)} d铆as`;\r\n    } else if (diffDays === 0) {\r\n      return 'Vence hoy';\r\n    } else if (diffDays <= 30) {\r\n      return `Vence en ${diffDays} d铆as`;\r\n    } else if (diffDays <= 90) {\r\n      return `Vence en ${diffDays} d铆as`;\r\n    }\r\n    return 'Vigente';\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    })?.format(amount);\r\n  };\r\n\r\n  // Filter contracts that need attention\r\n  const alertContracts = contracts?.filter(contract => {\r\n    const alertType = getAlertType(contract);\r\n    return ['expired', 'expiring', 'warning']?.includes(alertType);\r\n  });\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Alertas de Contratos</h3>\r\n          {alertContracts?.length > 0 && (\r\n            <span className=\"px-2 py-1 text-xs bg-error text-error-foreground rounded-full\">\r\n              {alertContracts?.length}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={() => window.location.href = '/contract-management'}\r\n          iconName=\"FileText\"\r\n          iconPosition=\"left\"\r\n        >\r\n          Ver Todos\r\n        </Button>\r\n      </div>\r\n  <div className=\"space-y-4 max-h-[350px] overflow-y-auto overflow-x-auto px-2\" style={{minWidth: '100%', maxWidth: '100%'}}>\r\n        {alertContracts?.length === 0 ? (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"CheckCircle\" size={48} className=\"text-success mx-auto mb-4\" />\r\n            <p className=\"text-muted-foreground\">No hay contratos que requieran atenci贸n</p>\r\n            <p className=\"text-sm text-muted-foreground mt-2\">\r\n              Todos los contratos est谩n vigentes y actualizados\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          alertContracts?.map((contract) => {\r\n            const alertType = getAlertType(contract);\r\n            return (\r\n              <div\r\n                key={contract?.id}\r\n                className={`p-4 rounded-lg border-2 ${getAlertColor(alertType)} transition-smooth min-w-[400px] max-w-[600px] mx-auto`}\r\n              >\r\n                <div className=\"flex items-start justify-between flex-wrap\">\r\n                  <div className=\"flex items-start space-x-3\">\r\n                    <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${\r\n                      alertType === 'expired' ? 'bg-error text-error-foreground' :\r\n                      alertType === 'expiring' ? 'bg-warning text-warning-foreground' :\r\n                      alertType === 'warning' ? 'bg-accent text-accent-foreground' :\r\n                      'bg-primary text-primary-foreground'\r\n                    }`}>\r\n                      <Icon name={getAlertIcon(alertType)} size={20} />\r\n                    </div>\r\n                    <div className={`px-2 py-1 text-xs rounded-full whitespace-nowrap ${\r\n                      alertType === 'expired' ? 'bg-error text-error-foreground' :\r\n                      alertType === 'expiring' ? 'bg-warning text-warning-foreground' :\r\n                      'bg-accent text-accent-foreground'\r\n                    }`}>\r\n                      {getAlertMessage(contract)}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0 ml-4\">\r\n                    <div className=\"flex flex-wrap items-center gap-2 mb-1\">\r\n                      <h4 className=\"text-sm font-bold text-foreground\">\r\n                        {contract?.contractNumber}\r\n                      </h4>\r\n                      <span className=\"text-xs text-muted-foreground font-medium\">\r\n                        {contract?.clientName}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex flex-wrap gap-4 text-xs text-muted-foreground mb-1\">\r\n                      <span className=\"flex items-center gap-1\"><Icon name=\"Calendar\" size={12} />Inicio: {formatDate(contract?.startDate)}</span>\r\n                      <span className=\"flex items-center gap-1\"><Icon name=\"CalendarX\" size={12} />Vence: {formatDate(contract?.expirationDate)}</span>\r\n                      <span className=\"flex items-center gap-1\"><Icon name=\"DollarSign\" size={12} />Valor: {formatCurrency(contract?.value)}</span>\r\n                    </div>\r\n                    {contract?.description && (\r\n                      <p className=\"text-xs text-muted-foreground mt-1 line-clamp-2\">\r\n                        {contract?.description}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2 ml-4\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onViewContract(contract)}\r\n                      title=\"Ver contrato\"\r\n                    >\r\n                      <Icon name=\"Eye\" size={16} />\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => onScheduleRenewal(contract)}\r\n                      iconName=\"Calendar\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Programar\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"default\"\r\n                      size=\"sm\"\r\n                      onClick={() => onRenewContract(contract)}\r\n                      iconName=\"RefreshCw\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Renovar\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n      {/* Summary Statistics */}\r\n      <div className=\"mt-6 pt-6 border-t border-border\">\r\n        <div className=\"grid grid-cols-3 gap-4\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-error\">\r\n              {contracts?.filter(c => getAlertType(c) === 'expired')?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Vencidos</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-warning\">\r\n              {contracts?.filter(c => getAlertType(c) === 'expiring')?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Por Vencer</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-accent\">\r\n              {contracts?.filter(c => getAlertType(c) === 'warning')?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Pr贸ximos</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContractAlerts;","import React, { useState } from 'react';\r\nimport useClient from '../../../hooks/useClient';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport { useNotifications } from '../../../context/NotificationContext.jsx';\r\nimport { useEstados, useMunicipios } from '../../../hooks/useEstado';\r\n\r\nconst NewClientModal = ({ isOpen, onClose, onSubmit, mode = 'create', initialData = null }) => {\r\n  const { createClient, editClient } = useClient();\r\n  const { showSuccess, showError } = useNotifications();\r\n  const [formData, setFormData] = useState({\r\n    companyName: '',\r\n    contactPerson: '',\r\n    email: '',\r\n    phone: '',\r\n    industry: '',\r\n    status: 'Activo',\r\n    relationshipHealth: 'Buena',\r\n    rfc: '',\r\n    clientSince: new Date()?.toISOString()?.split('T')?.[0],\r\n    totalProjects: 0,\r\n    activeContracts: 0,\r\n    totalValue: 0,\r\n    lastContact: new Date()?.toISOString()?.split('T')?.[0],\r\n    nextFollowUp: '',\r\n    website: '',\r\n    notes: '',\r\n    estadoEmpresa: '',\r\n    municipioEmpresa: '',\r\n    ubicacionUrl: '',\r\n    estadoDireccion: '',\r\n    municipioDireccion: '',\r\n    direccionCompleta: ''\r\n  });\r\n\r\n  // Estado para contactos adicionales (m谩ximo 3 adicionales)\r\n  const [additionalContacts, setAdditionalContacts] = useState([]);\r\n\r\n  // Hooks para estados y municipios\r\n  const { estados, loading: loadingEstados, error: errorEstados } = useEstados();\r\n  const { municipios: municipiosEmpresa, loading: loadingMunicipiosEmpresa, error: errorMunicipiosEmpresa } = useMunicipios(formData.estadoEmpresa);\r\n  const { municipios: municipiosDireccion, loading: loadingMunicipiosDireccion, error: errorMunicipiosDireccion } = useMunicipios(formData.estadoDireccion);\r\n\r\n  React.useEffect(() => {\r\n    if (isOpen && mode === 'edit' && initialData) {\r\n      setFormData({\r\n        companyName: initialData.companyName || initialData.empresa || '',\r\n        contactPerson: initialData.contactPerson || initialData.contacto || '',\r\n        email: initialData.email || '',\r\n        phone: initialData.phone || initialData.telefono || '',\r\n        industry: initialData.industry || initialData.industria || '',\r\n        status: initialData.status || initialData.estado || 'Activo',\r\n        relationshipHealth: initialData.relationshipHealth || initialData.relacion || 'Buena',\r\n        rfc: initialData.rfc || '',\r\n        clientSince: initialData.clientSince || initialData.fechaDesde || '',\r\n        totalProjects: initialData.totalProjects || 0,\r\n        activeContracts: initialData.activeContracts || 0,\r\n        totalValue: initialData.totalValue || 0,\r\n        lastContact: initialData.lastContact || '',\r\n        nextFollowUp: initialData.nextFollowUp || initialData.proximoSeguimiento || '',\r\n        website: initialData.website || initialData.sitioWeb || '',\r\n        notes: initialData.notes || initialData.notas || '',\r\n        estadoEmpresa: initialData.ubicacionEmpre?.estado || '',\r\n        municipioEmpresa: initialData.ubicacionEmpre?.municipio || '',\r\n        ubicacionUrl: initialData.ubicacionUrl || '',\r\n        estadoDireccion: (initialData.ubicacion && initialData.ubicacion.estado) || '',\r\n        municipioDireccion: (initialData.ubicacion && initialData.ubicacion.municipio) || '',\r\n        direccionCompleta: initialData.address || (initialData.ubicacion && initialData.ubicacion.direccion) || ''\r\n      });\r\n      \r\n      // Cargar contactos adicionales si existen\r\n      if (initialData.contactos && Array.isArray(initialData.contactos) && initialData.contactos.length > 1) {\r\n        // El primer contacto es el principal, los dem谩s son adicionales\r\n        const extraContacts = initialData.contactos.slice(1);\r\n        setAdditionalContacts(extraContacts);\r\n      } else {\r\n        setAdditionalContacts([]);\r\n      }\r\n    } else if (isOpen && mode === 'create') {\r\n      // Limpiar contactos adicionales en modo create\r\n      setAdditionalContacts([]);\r\n    }\r\n  }, [isOpen, mode, initialData]);\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const industries = [\r\n    'Manufactura',\r\n    'Comercial',\r\n    'Hospitalidad',\r\n    'Educaci贸n',\r\n    'Salud',\r\n    'Gobierno',\r\n    'Retail',\r\n    'Oficinas',\r\n    'Residencial',\r\n    'Industrial',\r\n    'Otro'\r\n  ];\r\n\r\n  const locations = [\r\n    'Monterrey',\r\n    'Ciudad de M茅xico',\r\n    'Guadalajara',\r\n    'Tijuana',\r\n    'Puebla',\r\n    'Le贸n',\r\n    'Quer茅taro',\r\n    'M茅rida',\r\n    'Canc煤n',\r\n    'Otro'\r\n  ];\r\n\r\n  const statusOptions = [\r\n    'Activo',\r\n    'Pendiente',\r\n    'Inactivo',\r\n    'Prospecto'\r\n  ];\r\n\r\n  const relationshipHealthOptions = [\r\n    'Excelente',\r\n    'Buena',\r\n    'Regular',\r\n    'Mala'\r\n  ];\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData?.companyName?.trim()) {\r\n      newErrors.companyName = 'El nombre de la empresa es requerido';\r\n    } else if (formData.companyName.length < 3) {\r\n      newErrors.companyName = 'El nombre debe tener al menos 3 caracteres';\r\n    }\r\n\r\n    if (!formData?.contactPerson?.trim()) {\r\n      newErrors.contactPerson = 'La persona de contacto es requerida';\r\n    } else if (formData.contactPerson.length < 3) {\r\n      newErrors.contactPerson = 'El nombre debe tener al menos 3 caracteres';\r\n    }\r\n\r\n    if (!formData?.email?.trim()) {\r\n      newErrors.email = 'El email es requerido';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/?.test(formData?.email)) {\r\n      newErrors.email = 'El formato del email no es v谩lido';\r\n    }\r\n\r\n    if (!formData?.phone?.trim()) {\r\n      newErrors.phone = 'El tel茅fono es requerido';\r\n    } else if (!/^\\d{10}$/?.test(formData?.phone)) {\r\n      newErrors.phone = 'El tel茅fono debe tener exactamente 10 d铆gitos';\r\n    }\r\n\r\n    if (!formData?.industry) {\r\n      newErrors.industry = 'La industria es requerida';\r\n    }\r\n\r\n    if (!formData?.rfc?.trim()) {\r\n      newErrors.rfc = 'El RFC es requerido';\r\n    } else if (!/^[A-Z&]{3,4}[0-9]{6}[A-Z0-9]{3}$/?.test(formData?.rfc)) {\r\n      newErrors.rfc = 'El formato del RFC no es v谩lido (Ej. ABC123456XYZ)';\r\n    }\r\n\r\n    // Validaci贸n para sitio web (opcional pero si se llena debe ser v谩lido)\r\n    if (formData?.website?.trim() && !/^https?:\\/\\/.+\\..+/?.test(formData?.website)) {\r\n      newErrors.website = 'El formato del sitio web no es v谩lido (debe comenzar con http:// o https://)';\r\n    }\r\n\r\n    // Validaci贸n para ubicaci贸n empresa\r\n    if (!formData?.estadoEmpresa?.trim()) {\r\n      newErrors.estadoEmpresa = 'El estado de la ubicaci贸n de la empresa es requerido';\r\n    }\r\n\r\n    if (!formData?.municipioEmpresa?.trim()) {\r\n      newErrors.municipioEmpresa = 'El municipio de la ubicaci贸n de la empresa es requerido';\r\n    }\r\n\r\n    // Validaci贸n para direcci贸n del cliente\r\n    if (!formData?.estadoDireccion?.trim()) {\r\n      newErrors.estadoDireccion = 'El estado de la direcci贸n es requerido';\r\n    }\r\n\r\n    if (!formData?.municipioDireccion?.trim()) {\r\n      newErrors.municipioDireccion = 'El municipio de la direcci贸n es requerido';\r\n    }\r\n\r\n    if (!formData?.direccionCompleta?.trim()) {\r\n      newErrors.direccionCompleta = 'La direcci贸n completa es requerida';\r\n    } else if (formData.direccionCompleta.length < 10) {\r\n      newErrors.direccionCompleta = 'La direcci贸n debe ser m谩s espec铆fica (m铆nimo 10 caracteres)';\r\n    }\r\n\r\n    // Validaci贸n para ubicacionUrl (opcional pero si se llena debe ser v谩lida)\r\n    if (formData?.ubicacionUrl?.trim() && !/^https?:\\/\\/.+\\..+/?.test(formData?.ubicacionUrl)) {\r\n      newErrors.ubicacionUrl = 'El formato de la URL no es v谩lido (debe comenzar con http:// o https://)';\r\n    }\r\n\r\n    // Validaci贸n para contactos adicionales\r\n    additionalContacts.forEach((contact, index) => {\r\n      const hasAnyField = contact.contacto?.trim() || contact.email?.trim() || contact.telefono?.trim();\r\n      \r\n      if (hasAnyField) {\r\n        // Si tiene alg煤n campo, todos deben estar completos\r\n        if (!contact.contacto?.trim()) {\r\n          newErrors[`additionalContact_${index}_name`] = 'El nombre es requerido si agregas este contacto';\r\n        } else if (contact.contacto.length < 3) {\r\n          newErrors[`additionalContact_${index}_name`] = 'El nombre debe tener al menos 3 caracteres';\r\n        }\r\n        \r\n        if (!contact.email?.trim()) {\r\n          newErrors[`additionalContact_${index}_email`] = 'El email es requerido si agregas este contacto';\r\n        } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/?.test(contact.email)) {\r\n          newErrors[`additionalContact_${index}_email`] = 'El formato del email no es v谩lido';\r\n        }\r\n        \r\n        if (!contact.telefono?.trim()) {\r\n          newErrors[`additionalContact_${index}_phone`] = 'El tel茅fono es requerido si agregas este contacto';\r\n        } else if (!/^\\d{10}$/?.test(contact.telefono)) {\r\n          newErrors[`additionalContact_${index}_phone`] = 'El tel茅fono debe tener exactamente 10 d铆gitos';\r\n        }\r\n      }\r\n    });\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    // Validaci贸n y formateo para tel茅fono\r\n    if (field === 'phone') {\r\n      // Eliminar caracteres no num茅ricos\r\n      let cleanValue = value.replace(/\\D/g, '');\r\n      // Limitar a 10 d铆gitos\r\n      cleanValue = cleanValue.slice(0, 10);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    } \r\n    // Validaci贸n para RFC - solo may煤sculas y alfanum茅rico\r\n    else if (field === 'rfc') {\r\n      const cleanValue = value.toUpperCase().replace(/[^A-Z&0-9]/g, '').slice(0, 13);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Validaci贸n para nombre de empresa - limitar caracteres\r\n    else if (field === 'companyName') {\r\n      const cleanValue = value.slice(0, 100);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Validaci贸n para persona de contacto\r\n    else if (field === 'contactPerson') {\r\n      const cleanValue = value.slice(0, 100);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Validaci贸n para direcci贸n completa\r\n    else if (field === 'direccionCompleta') {\r\n      const cleanValue = value.slice(0, 200);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Validaci贸n para sitio web\r\n    else if (field === 'website') {\r\n      const cleanValue = value.slice(0, 150);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Validaci贸n para ubicacionUrl\r\n    else if (field === 'ubicacionUrl') {\r\n      const cleanValue = value.slice(0, 200);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Otros campos sin validaci贸n especial\r\n    else {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: value\r\n      }));\r\n    }\r\n\r\n    // Clear error when user starts typing\r\n    if (errors?.[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Funciones para manejar contactos adicionales\r\n  const addAdditionalContact = () => {\r\n    if (additionalContacts.length < 3) {\r\n      setAdditionalContacts([...additionalContacts, { contacto: '', email: '', telefono: '' }]);\r\n    }\r\n  };\r\n\r\n  const removeAdditionalContact = (index) => {\r\n    const newContacts = additionalContacts.filter((_, i) => i !== index);\r\n    setAdditionalContacts(newContacts);\r\n    // Limpiar errores relacionados con este contacto\r\n    const newErrors = { ...errors };\r\n    delete newErrors[`additionalContact_${index}_name`];\r\n    delete newErrors[`additionalContact_${index}_email`];\r\n    delete newErrors[`additionalContact_${index}_phone`];\r\n    setErrors(newErrors);\r\n  };\r\n\r\n  const handleAdditionalContactChange = (index, field, value) => {\r\n    const newContacts = [...additionalContacts];\r\n    \r\n    // Validaci贸n y formateo\r\n    if (field === 'telefono') {\r\n      value = value.replace(/\\D/g, '').slice(0, 10);\r\n    } else if (field === 'contacto') {\r\n      value = value.slice(0, 100);\r\n    } else if (field === 'email') {\r\n      value = value.slice(0, 100);\r\n    }\r\n    \r\n    newContacts[index][field] = value;\r\n    setAdditionalContacts(newContacts);\r\n    \r\n    // Limpiar error si existe\r\n    const errorKey = `additionalContact_${index}_${field === 'contacto' ? 'name' : field === 'telefono' ? 'phone' : 'email'}`;\r\n    if (errors[errorKey]) {\r\n      setErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[errorKey];\r\n        return newErrors;\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n    \r\n    // Construir array de contactos: principal + adicionales que est茅n completos\r\n    const contactosCompletos = additionalContacts.filter(c => {\r\n      // Solo incluir contactos que tengan los 3 campos completos\r\n      return c.contacto?.trim() && c.email?.trim() && c.telefono?.trim();\r\n    });\r\n    \r\n    const contactos = [\r\n      {\r\n        contacto: formData.contactPerson,\r\n        email: formData.email,\r\n        telefono: formData.phone\r\n      },\r\n      ...contactosCompletos\r\n    ];\r\n    \r\n    const clientData = {\r\n      empresa: formData.companyName,\r\n      contactos: contactos,\r\n      contacto: formData.contactPerson,\r\n      email: formData.email,\r\n      telefono: formData.phone,\r\n      industria: formData.industry,\r\n      ubicacionEmpre: {\r\n        estado: formData.estadoEmpresa,\r\n        municipio: formData.municipioEmpresa,\r\n      },\r\n      ubicacionUrl: formData.ubicacionUrl,\r\n      ubicacion: {\r\n        estado: formData.estadoDireccion,\r\n        municipio: formData.municipioDireccion,\r\n        direccion: formData.direccionCompleta\r\n      },\r\n      rfc: formData.rfc?.toUpperCase(),\r\n      sitioWeb: formData.website,\r\n      estado: formData.status,\r\n      relacion: formData.relationshipHealth,\r\n      fechaDesde: formData.clientSince,\r\n      proximoSeguimiento: formData.nextFollowUp,\r\n      notas: formData.notes,\r\n      totalProjects: parseInt(formData.totalProjects) || 0,\r\n      activeContracts: parseInt(formData.activeContracts) || 0,\r\n      totalValue: parseInt(formData.totalValue) || 0,\r\n      lastContact: formData.lastContact\r\n    };\r\n    console.log('Datos enviados al servicio:', clientData);\r\n    if (mode === 'edit' && initialData && initialData.id) {\r\n      // Actualizar cliente usando la funci贸n pasada por props\r\n      const res = await editClient(initialData.id, clientData);\r\n      if (res && res.success) {\r\n        showSuccess(`Cliente \"${clientData.empresa}\" actualizado exitosamente.`);\r\n        handleClose();\r\n      } else {\r\n        showError('Error al actualizar el cliente');\r\n      }\r\n    } else {\r\n      // Crear cliente usando la funci贸n pasada por props\r\n      const res = await createClient(clientData);\r\n      if (res && res.success) {\r\n        showSuccess(`Cliente \"${clientData.empresa}\" guardado exitosamente.`);\r\n        handleClose();\r\n      } else {\r\n        showError('Error al guardar el cliente');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      companyName: '',\r\n      contactPerson: '',\r\n      email: '',\r\n      phone: '',\r\n      industry: '',\r\n      status: 'Activo',\r\n      relationshipHealth: 'Buena',\r\n      rfc: '',\r\n      clientSince: new Date()?.toISOString()?.split('T')?.[0],\r\n      totalProjects: 0,\r\n      activeContracts: 0,\r\n      totalValue: 0,\r\n      lastContact: new Date()?.toISOString()?.split('T')?.[0],\r\n      nextFollowUp: '',\r\n      website: '',\r\n      notes: '',\r\n      estadoEmpresa: '',\r\n      municipioEmpresa: '',\r\n      ubicacionUrl: '',\r\n      estadoDireccion: '',\r\n      municipioDireccion: '',\r\n      direccionCompleta: ''\r\n    });\r\n    setAdditionalContacts([]);\r\n    setErrors({});\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-card rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"sticky top-0 bg-card border-b border-border p-6 rounded-t-lg\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-foreground\">\r\n                {mode === 'edit' ? 'Editar Cliente' : 'Nuevo Cliente'}\r\n              </h2>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                {mode === 'edit' ? 'Actualiza la informaci贸n del cliente' : 'Agrega un nuevo cliente al sistema'}\r\n              </p>\r\n            </div>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              onClick={handleClose}\r\n            >\r\n              <Icon name=\"X\" size={20} />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci贸n B谩sica */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Building2\" size={20} className=\"mr-2\" />\r\n                Informaci贸n B谩sica\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Nombre de la Empresa\"\r\n                placeholder=\"Ej. Grupo Industrial Monterrey\"\r\n                value={formData?.companyName}\r\n                onChange={(e) => handleInputChange('companyName', e?.target?.value)}\r\n                error={errors?.companyName}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Contacto Principal */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-2 flex items-center\">\r\n                <Icon name=\"User\" size={20} className=\"mr-2\" />\r\n                Contacto Principal\r\n              </h3>\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Informaci贸n del contacto principal (obligatorio)\r\n              </p>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Persona de Contacto\"\r\n                placeholder=\"Ej. Carlos Hern谩ndez\"\r\n                value={formData?.contactPerson}\r\n                onChange={(e) => handleInputChange('contactPerson', e?.target?.value)}\r\n                error={errors?.contactPerson}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"email\"\r\n                label=\"Email\"\r\n                placeholder=\"Ej. carlos.hernandez@empresa.com.mx\"\r\n                value={formData?.email}\r\n                onChange={(e) => handleInputChange('email', e?.target?.value)}\r\n                error={errors?.email}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Tel茅fono\"\r\n                placeholder=\"1234567890 (10 d铆gitos)\"\r\n                value={formData?.phone}\r\n                onChange={(e) => handleInputChange('phone', e?.target?.value)}\r\n                error={errors?.phone}\r\n                required\r\n                maxLength={10}\r\n              />\r\n              {formData?.phone && formData.phone.length > 0 && (\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {formData.phone.length}/10 d铆gitos\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Contactos Adicionales */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"text-lg font-medium text-foreground flex items-center\">\r\n                    <Icon name=\"Users\" size={20} className=\"mr-2\" />\r\n                    Contactos Adicionales\r\n                  </h3>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">\r\n                    Puedes agregar hasta 3 contactos adicionales (opcional)\r\n                  </p>\r\n                </div>\r\n                {additionalContacts.length < 3 && (\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={addAdditionalContact}\r\n                    iconName=\"Plus\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Agregar Contacto\r\n                  </Button>\r\n                )}\r\n              </div>\r\n\r\n              {additionalContacts.map((contact, index) => (\r\n                <div key={index} className=\"border border-border rounded-lg p-4 mb-4 bg-muted/30\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <h4 className=\"text-sm font-medium text-foreground\">\r\n                      Contacto Adicional {index + 1}\r\n                    </h4>\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => removeAdditionalContact(index)}\r\n                      iconName=\"X\"\r\n                    >\r\n                      Eliminar\r\n                    </Button>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <div>\r\n                      <Input\r\n                        label=\"Nombre\"\r\n                        placeholder=\"Ej. Mar铆a Garc铆a\"\r\n                        value={contact.contacto}\r\n                        onChange={(e) => handleAdditionalContactChange(index, 'contacto', e.target.value)}\r\n                        error={errors?.[`additionalContact_${index}_name`]}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <Input\r\n                        type=\"email\"\r\n                        label=\"Email\"\r\n                        placeholder=\"Ej. maria@empresa.com\"\r\n                        value={contact.email}\r\n                        onChange={(e) => handleAdditionalContactChange(index, 'email', e.target.value)}\r\n                        error={errors?.[`additionalContact_${index}_email`]}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <Input\r\n                        label=\"Tel茅fono\"\r\n                        placeholder=\"1234567890\"\r\n                        value={contact.telefono}\r\n                        onChange={(e) => handleAdditionalContactChange(index, 'telefono', e.target.value)}\r\n                        error={errors?.[`additionalContact_${index}_phone`]}\r\n                        maxLength={10}\r\n                      />\r\n                      {contact.telefono && contact.telefono.length > 0 && (\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                          {contact.telefono.length}/10 d铆gitos\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Select\r\n                label=\"Industria\"\r\n                value={formData?.industry}\r\n                onChange={(value) => handleInputChange('industry', value)}\r\n                error={errors?.industry}\r\n                options={industries?.map(industry => ({ value: industry, label: industry }))}\r\n                placeholder=\"Selecciona una industria\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Ubicaci贸n de la Empresa */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Building\" size={20} className=\"mr-2\" />\r\n                Ubicaci贸n de la Empresa\r\n              </h3>\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Estado y municipio donde se encuentra ubicada la empresa\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 md:col-span-2\">\r\n              <div>\r\n                <Select\r\n                  label={<>Estado <span className=\"text-destructive\">*</span></>}\r\n                  value={formData.estadoEmpresa}\r\n                  onChange={value => {\r\n                    handleInputChange('estadoEmpresa', value);\r\n                    handleInputChange('municipioEmpresa', '');\r\n                  }}\r\n                  options={\r\n                    estados ? [{ value: '', label: 'Selecciona un estado' }, ...estados.map(e => ({ value: e.code, label: e.name }))] : []\r\n                  }\r\n                  loading={loadingEstados}\r\n                  error={errors?.estadoEmpresa}\r\n                  required\r\n                  disabled={loadingEstados || !!errorEstados}\r\n                  placeholder={loadingEstados ? 'Cargando estados...' : 'Selecciona un estado'}\r\n                  searchable\r\n                />\r\n              </div>\r\n              <div>\r\n                <Select\r\n                  label={<>Municipio <span className=\"text-destructive\">*</span></>}\r\n                  value={formData.municipioEmpresa}\r\n                  onChange={value => handleInputChange('municipioEmpresa', value)}\r\n                  options={\r\n                    formData.estadoEmpresa === ''\r\n                      ? [{ value: '', label: 'Selecciona un estado primero' }]\r\n                      : loadingMunicipiosEmpresa\r\n                        ? [{ value: '', label: 'Cargando municipios...' }]\r\n                        : errorMunicipiosEmpresa\r\n                          ? [{ value: '', label: 'Error al cargar municipios' }]\r\n                          : [{ value: '', label: 'Selecciona un municipio' }, ...(municipiosEmpresa ? Object.values(municipiosEmpresa.municipios || {}).map((m, idx) => ({ value: m, label: m })) : [])]\r\n                  }\r\n                  loading={loadingMunicipiosEmpresa}\r\n                  error={errors?.municipioEmpresa}\r\n                  required\r\n                  disabled={formData.estadoEmpresa === '' || loadingMunicipiosEmpresa || !!errorMunicipiosEmpresa}\r\n                  placeholder={formData.estadoEmpresa === '' ? 'Selecciona un estado primero' : loadingMunicipiosEmpresa ? 'Cargando municipios...' : 'Selecciona un municipio'}\r\n                  searchable\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"URL de Ubicaci贸n\"\r\n                placeholder=\"Ej. https://maps.google.com/...\"\r\n                value={formData?.ubicacionUrl}\r\n                onChange={(e) => handleInputChange('ubicacionUrl', e?.target?.value)}\r\n                error={errors?.ubicacionUrl}\r\n              />\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                Opcional: Link de Google Maps o ubicaci贸n web de la empresa\r\n              </p>\r\n            </div>\r\n\r\n            {/* RFC y Sitio Web */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"FileText\" size={20} className=\"mr-2\" />\r\n                Informaci贸n Fiscal y Web\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"RFC\"\r\n                placeholder=\"Ej. ABC123456XYZ\"\r\n                value={formData?.rfc}\r\n                onChange={(e) => handleInputChange('rfc', e?.target?.value)}\r\n                error={errors?.rfc}\r\n                required\r\n                maxLength={13}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Sitio Web\"\r\n                placeholder=\"Ej. https://www.empresa.com.mx\"\r\n                value={formData?.website}\r\n                onChange={(e) => handleInputChange('website', e?.target?.value)}\r\n                error={errors?.website}\r\n              />\r\n            </div>\r\n\r\n            {/* Informaci贸n de Estado */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Settings\" size={20} className=\"mr-2\" />\r\n                Estado y Relaci贸n\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Estado\"\r\n                value={formData?.status}\r\n                onChange={(value) => handleInputChange('status', value)}\r\n                options={statusOptions?.map(status => ({ value: status, label: status }))}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Salud de la Relaci贸n\"\r\n                value={formData?.relationshipHealth}\r\n                onChange={(value) => handleInputChange('relationshipHealth', value)}\r\n                options={relationshipHealthOptions?.map(health => ({ value: health, label: health }))}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"date\"\r\n                label=\"Cliente Desde\"\r\n                value={formData?.clientSince}\r\n                onChange={(e) => handleInputChange('clientSince', e?.target?.value)}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"date\"\r\n                label=\"Pr贸ximo Seguimiento\"\r\n                value={formData?.nextFollowUp}\r\n                onChange={(e) => handleInputChange('nextFollowUp', e?.target?.value)}\r\n              />\r\n            </div>\r\n\r\n            {/* Direcci贸n del Cliente */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"MapPin\" size={20} className=\"mr-2\" />\r\n                Direcci贸n del Cliente\r\n              </h3>\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Direcci贸n completa donde se puede contactar o visitar al cliente\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 md:col-span-2\">\r\n              <div>\r\n                <Select\r\n                  label={<>Estado <span className=\"text-destructive\">*</span></>}\r\n                  value={formData.estadoDireccion}\r\n                  onChange={value => {\r\n                    handleInputChange('estadoDireccion', value);\r\n                    handleInputChange('municipioDireccion', '');\r\n                  }}\r\n                  options={\r\n                    estados ? [{ value: '', label: 'Selecciona un estado' }, ...estados.map(e => ({ value: e.code, label: e.name }))] : []\r\n                  }\r\n                  loading={loadingEstados}\r\n                  error={errors?.estadoDireccion}\r\n                  required\r\n                  disabled={loadingEstados || !!errorEstados}\r\n                  placeholder={loadingEstados ? 'Cargando estados...' : 'Selecciona un estado'}\r\n                  searchable\r\n                />\r\n              </div>\r\n              <div>\r\n                <Select\r\n                  label={<>Municipio <span className=\"text-destructive\">*</span></>}\r\n                  value={formData.municipioDireccion}\r\n                  onChange={value => handleInputChange('municipioDireccion', value)}\r\n                  options={\r\n                    formData.estadoDireccion === ''\r\n                      ? [{ value: '', label: 'Selecciona un estado primero' }]\r\n                      : loadingMunicipiosDireccion\r\n                        ? [{ value: '', label: 'Cargando municipios...' }]\r\n                        : errorMunicipiosDireccion\r\n                          ? [{ value: '', label: 'Error al cargar municipios' }]\r\n                          : [{ value: '', label: 'Selecciona un municipio' }, ...(municipiosDireccion ? Object.values(municipiosDireccion.municipios || {}).map((m, idx) => ({ value: m, label: m })) : [])]\r\n                  }\r\n                  loading={loadingMunicipiosDireccion}\r\n                  error={errors?.municipioDireccion}\r\n                  required\r\n                  disabled={formData.estadoDireccion === '' || loadingMunicipiosDireccion || !!errorMunicipiosDireccion}\r\n                  placeholder={formData.estadoDireccion === '' ? 'Selecciona un estado primero' : loadingMunicipiosDireccion ? 'Cargando municipios...' : 'Selecciona un municipio'}\r\n                  searchable\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Direcci贸n completa\"\r\n                placeholder=\"Ej. Av. Constituci贸n 1234, Col. Centro\"\r\n                value={formData?.direccionCompleta}\r\n                onChange={(e) => handleInputChange('direccionCompleta', e?.target?.value)}\r\n                error={errors?.direccionCompleta}\r\n                required\r\n                maxLength={200}\r\n              />\r\n              {formData?.direccionCompleta && formData.direccionCompleta.length > 0 && (\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {formData.direccionCompleta.length}/200 caracteres\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"FileText\" size={20} className=\"mr-2\" />\r\n                Notas Adicionales\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                  Notas\r\n                </label>\r\n                <textarea\r\n                  className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none bg-background text-foreground\"\r\n                  rows=\"4\"\r\n                  placeholder=\"Informaci贸n adicional sobre el cliente...\"\r\n                  value={formData?.notes}\r\n                  onChange={(e) => handleInputChange('notes', e?.target?.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-border\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={handleClose}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            {mode === 'edit' ? (\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"default\"\r\n                iconName=\"Save\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Guardar\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"default\"\r\n                iconName=\"Plus\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Agregar Cliente\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewClientModal;","import React, { useState, useEffect } from 'react';\r\nimport useClient from '../../hooks/useClient';\r\nimport useCommunication from '../../hooks/useCommunication';\r\nimport { useEstados } from '../../hooks/useEstado';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\n\r\nimport ClientCard from './components/ClientCard';\r\nimport ClientTable from './components/ClientTable';\r\nimport ClientFilters from './components/ClientFilters';\r\nimport ClientCommunicationPanel from './components/ClientCommunicationPanel';\r\nimport DocumentStatus from './components/DocumentStatus';\r\nimport ContractAlerts from './components/ContractAlerts';\r\nimport NewClientModal from './components/NewClientModal';\r\n\r\nconst ClientManagement = () => {\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [viewMode, setViewMode] = useState('table');\r\n  const [selectedClient, setSelectedClient] = useState(null);\r\n  const [showSidebar, setShowSidebar] = useState(false);\r\n  const [showNewClientModal, setShowNewClientModal] = useState(false);\r\n  const [clientCommunications, setClientCommunications] = useState([]);\r\n  \r\n  const { clients, getClients, createClient, editClient, loading, error } = useClient();\r\n  const { estados } = useEstados();\r\n  const { \r\n    createCommunication, \r\n    getComunicacionesByCliente, \r\n    loading: loadingComm \r\n  } = useCommunication();\r\n\r\n  // C谩lculo de clientes activos (case-insensitive para 'estado')\r\n  // C谩lculo de total clientes del mes anterior\r\n  const getPreviousMonthClients = (clientsArr) => {\r\n    if (!Array.isArray(clientsArr)) return 0;\r\n    const now = new Date();\r\n    const firstDayOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\r\n    return clientsArr.filter(c => {\r\n      const createdAt = c?.createdAt ? new Date(c.createdAt) : null;\r\n      return createdAt && createdAt < firstDayOfMonth;\r\n    }).length;\r\n  };\r\n  const getActiveClients = (clientsArr) => {\r\n    if (!Array.isArray(clientsArr)) return 0;\r\n    return clientsArr.filter(c => {\r\n      const estado = (c?.estado || c?.status || '').toString().toLowerCase();\r\n      return estado === 'activo';\r\n    }).length;\r\n  };\r\n\r\n  // C谩lculo de clientes activos del mes anterior\r\n  const getPreviousMonthActiveClients = (clientsArr) => {\r\n    if (!Array.isArray(clientsArr)) return 0;\r\n    const now = new Date();\r\n    // Primer d铆a del mes actual\r\n    const firstDayOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\r\n    return clientsArr.filter(c => {\r\n      const estado = (c?.estado || c?.status || '').toString().toLowerCase();\r\n      const createdAt = c?.createdAt ? new Date(c.createdAt) : null;\r\n      return estado === 'activo' && createdAt && createdAt < firstDayOfMonth;\r\n    }).length;\r\n  };\r\n\r\n  // C谩lculo de variaci贸n porcentual\r\n  const getMonthlyVariation = (current, previous) => {\r\n    if (typeof previous !== 'number' || previous === 0) return '+0%';\r\n    const percent = ((current - previous) / previous) * 100;\r\n    return `${percent > 0 ? '+' : ''}${percent.toFixed(0)}%`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    getClients();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    industry: '',\r\n    status: '',\r\n    relationshipHealth: '',\r\n    location: '',\r\n    rfc: '',\r\n    minProjects: '',\r\n    minValue: ''\r\n  });\r\n\r\n  const handleSidebarToggle = () => {\r\n    setSidebarCollapsed(!sidebarCollapsed);\r\n  };\r\n\r\n  const handleMobileMenuToggle = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n  };\r\n\r\n  // Mock data for communications\r\n  const mockCommunications = [\r\n    {\r\n      id: 1,\r\n      type: \"email\",\r\n      subject: \"Propuesta de Mantenimiento Anual\",\r\n      description: \"Env铆o de propuesta para contrato de mantenimiento anual de sistemas HVAC. Incluye revisiones trimestrales y soporte 24/7.\",\r\n      contactPerson: \"Carlos Hern谩ndez\",\r\n      date: \"2024-09-28T10:30:00\",\r\n      hasAttachments: true\r\n    },\r\n    {\r\n      id: 2,\r\n      type: \"phone\",\r\n      subject: \"Seguimiento de Proyecto Torre B\",\r\n      description: \"Llamada telef贸nica para revisar avances del proyecto de instalaci贸n en Torre B. Cliente satisfecho con el progreso.\",\r\n      contactPerson: \"Mar铆a Gonz谩lez\",\r\n      date: \"2024-09-25T14:15:00\",\r\n      hasAttachments: false\r\n    },\r\n    {\r\n      id: 3,\r\n      type: \"meeting\",\r\n      subject: \"Reuni贸n de Cierre de Proyecto\",\r\n      description: \"Reuni贸n presencial para la entrega final del proyecto de climatizaci贸n del hotel. Firma de acta de aceptaci贸n.\",\r\n      contactPerson: \"Roberto Mart铆nez\",\r\n      date: \"2024-09-20T09:00:00\",\r\n      hasAttachments: true\r\n    },\r\n    {\r\n      id: 4,\r\n      type: \"contract\",\r\n      subject: \"Renovaci贸n de Contrato de Servicio\",\r\n      description: \"Proceso de renovaci贸n del contrato de servicio t茅cnico para el pr贸ximo a帽o acad茅mico.\",\r\n      contactPerson: \"Ana Rodr铆guez\",\r\n      date: \"2024-09-18T16:45:00\",\r\n      hasAttachments: true\r\n    }\r\n  ];\r\n\r\n  // Mock data for documents\r\n  const mockDocuments = [\r\n    {\r\n      id: 1,\r\n      name: \"RFC - Grupo Industrial Monterrey\",\r\n      type: \"RFC\",\r\n      status: \"Completo\",\r\n      uploadDate: \"2024-03-15\",\r\n      expirationDate: null,\r\n      notes: \"Documento fiscal actualizado\"\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"Contrato de Servicios 2024\",\r\n      type: \"Contrato\",\r\n      status: \"Completo\",\r\n      uploadDate: \"2024-01-10\",\r\n      expirationDate: \"2024-12-31\",\r\n      notes: \"Contrato anual de mantenimiento\"\r\n    },\r\n    {\r\n      id: 3,\r\n      name: \"Garant铆a Equipos HVAC\",\r\n      type: \"Garant铆a\",\r\n      status: \"Pendiente\",\r\n      uploadDate: \"2024-06-20\",\r\n      expirationDate: \"2025-06-20\",\r\n      notes: \"Pendiente firma del cliente\"\r\n    },\r\n    {\r\n      id: 4,\r\n      name: \"Informaci贸n Fiscal\",\r\n      type: \"Facturaci贸n\",\r\n      status: \"En Revisi贸n\",\r\n      uploadDate: \"2024-09-01\",\r\n      expirationDate: null,\r\n      notes: \"Actualizaci贸n de datos fiscales\"\r\n    }\r\n  ];\r\n\r\n  // Mock data for contracts\r\n  const mockContracts = [\r\n    {\r\n      id: 1,\r\n      contractNumber: \"CONT-2024-001\",\r\n      clientName: \"Grupo Industrial Monterrey\",\r\n      startDate: \"2024-01-01\",\r\n      expirationDate: \"2024-12-31\",\r\n      value: 850000,\r\n      description: \"Contrato de mantenimiento anual para sistemas HVAC industriales\"\r\n    },\r\n    {\r\n      id: 2,\r\n      contractNumber: \"CONT-2024-002\",\r\n      clientName: \"Hotel Ejecutivo Guadalajara\",\r\n      startDate: \"2024-03-15\",\r\n      expirationDate: \"2024-10-15\",\r\n      value: 450000,\r\n      description: \"Instalaci贸n y mantenimiento de sistema de climatizaci贸n\"\r\n    },\r\n    {\r\n      id: 3,\r\n      contractNumber: \"CONT-2023-015\",\r\n      clientName: \"Cl铆nica M茅dica Especializada\",\r\n      startDate: \"2023-11-01\",\r\n      expirationDate: \"2024-09-25\",\r\n      value: 320000,\r\n      description: \"Sistema de ventilaci贸n especializada para 谩reas m茅dicas\"\r\n    }\r\n  ];\r\n\r\n  const [filteredClients, setFilteredClients] = useState(clients);\r\n\r\n  useEffect(() => {\r\n    let filtered = clients;\r\n\r\n    // Filtro de b煤squeda (empresa, contacto, email)\r\n    if (filters?.search) {\r\n      const search = filters.search.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => {\r\n        const empresa = (client?.empresa || client?.companyName || '').toString().toLowerCase();\r\n        const contacto = (client?.contacto || client?.contactPerson || '').toString().toLowerCase();\r\n        const email = (client?.email || '').toString().toLowerCase();\r\n        return empresa.includes(search) || contacto.includes(search) || email.includes(search);\r\n      });\r\n    }\r\n\r\n    // Industria\r\n    if (filters?.industry) {\r\n      const industry = filters.industry.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => (client?.industria || client?.industry || '').toString().toLowerCase() === industry);\r\n    }\r\n\r\n    // Estado\r\n    if (filters?.status) {\r\n      const estado = filters.status.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => (client?.estado || client?.status || '').toString().toLowerCase() === estado);\r\n    }\r\n\r\n    // Relaci贸n\r\n    if (filters?.relationshipHealth) {\r\n      const relacion = filters.relationshipHealth.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => (client?.relacion || client?.relationshipHealth || '').toString().toLowerCase() === relacion);\r\n    }\r\n\r\n    // Ubicaci贸n\r\n    if (filters?.location) {\r\n      const location = filters.location.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => {\r\n        const estadoEmpresa = (client?.ubicacionEmpre?.estado || '').toString().toLowerCase();\r\n        const municipioEmpresa = (client?.ubicacionEmpre?.municipio || '').toString().toLowerCase();\r\n        const estadoDireccion = (client?.ubicacion?.estado || '').toString().toLowerCase();\r\n        const municipioDireccion = (client?.ubicacion?.municipio || '').toString().toLowerCase();\r\n        return estadoEmpresa.includes(location) || \r\n               municipioEmpresa.includes(location) || \r\n               estadoDireccion.includes(location) || \r\n               municipioDireccion.includes(location);\r\n      });\r\n    }\r\n\r\n    // RFC\r\n    if (filters?.rfc) {\r\n      const rfc = filters.rfc.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => (client?.rfc || '').toString().toLowerCase().includes(rfc));\r\n    }\r\n\r\n    // Proyectos m铆nimos\r\n    if (filters?.minProjects) {\r\n      filtered = filtered?.filter(client => (parseInt(client?.totalProjects || client?.proyectos || 0) || 0) >= parseInt(filters?.minProjects));\r\n    }\r\n\r\n    // Valor m铆nimo\r\n    if (filters?.minValue) {\r\n      filtered = filtered?.filter(client => (parseInt(client?.totalValue || client?.valor || 0) || 0) >= parseInt(filters?.minValue));\r\n    }\r\n\r\n    setFilteredClients(filtered);\r\n  }, [filters, clients]);\r\n\r\n  const handleFiltersChange = (newFilters) => {\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  const handleClearFilters = () => {\r\n    setFilters({\r\n      search: '',\r\n      industry: '',\r\n      status: '',\r\n      relationshipHealth: '',\r\n      location: '',\r\n      rfc: '',\r\n      minProjects: '',\r\n      minValue: ''\r\n    });\r\n  };\r\n\r\n  const handleExportClients = () => {\r\n    if (!filteredClients || filteredClients.length === 0) {\r\n      alert('No hay datos para exportar');\r\n      return;\r\n    }\r\n\r\n    // Preparar los datos para exportar (sin Cliente Desde, Total Proyectos, Contratos Activos, Valor Total)\r\n    const dataToExport = filteredClients.map(client => {\r\n      // Extraer contactos adicionales si existen\r\n      const contactosAdicionales = Array.isArray(client.contactos) && client.contactos.length > 1\r\n        ? client.contactos.slice(1).map((c, idx) => `${c.contacto} (${c.email}, ${c.telefono})`).join(' | ')\r\n        : '';\r\n\r\n      return {\r\n        'Empresa': client.companyName || client.empresa || '',\r\n        'RFC': client.rfc || '',\r\n        'Contacto Principal': client.contactPerson || client.contacto || '',\r\n        'Email Principal': client.email || '',\r\n        'Tel茅fono Principal': client.phone || client.telefono || '',\r\n        'Contactos Adicionales': contactosAdicionales,\r\n        'Industria': client.industry || client.industria || '',\r\n        'Ubicaci贸n Empresa - Estado': client.ubicacionEmpre?.estado || '',\r\n        'Ubicaci贸n Empresa - Municipio': client.ubicacionEmpre?.municipio || '',\r\n        'URL Ubicaci贸n Empresa': client.ubicacionUrl || '',\r\n        'Direcci贸n Cliente - Estado': client.ubicacion?.estado || '',\r\n        'Direcci贸n Cliente - Municipio': client.ubicacion?.municipio || '',\r\n        'Direcci贸n Completa': client.ubicacion?.direccion || client.address || '',\r\n        'Sitio Web': client.website || client.sitioWeb || '',\r\n        'Estado': client.status || client.estado || '',\r\n        'Relaci贸n': client.relationshipHealth || client.relacion || '',\r\n        'Pr贸ximo Seguimiento': client.nextFollowUp || client.proximoSeguimiento || '',\r\n        'Notas': client.notes || client.notas || ''\r\n      };\r\n    });\r\n\r\n    // Convertir a CSV\r\n    const headers = Object.keys(dataToExport[0]);\r\n    const csvContent = [\r\n      headers.join(','),\r\n      ...dataToExport.map(row => \r\n        headers.map(header => {\r\n          const value = row[header];\r\n          // Escapar comillas y envolver en comillas si contiene comas\r\n          const escaped = String(value).replace(/\"/g, '\"\"');\r\n          return `\"${escaped}\"`;\r\n        }).join(',')\r\n      )\r\n    ].join('\\n');\r\n\r\n    // Crear el archivo y descargarlo\r\n    const blob = new Blob(['\\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    const url = URL.createObjectURL(blob);\r\n    \r\n    const fecha = new Date().toISOString().split('T')[0];\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `clientes_${fecha}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    \r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const handleViewDetails = (client) => {\r\n    setSelectedClient(client);\r\n    setShowSidebar(true);\r\n    // Cargar comunicaciones del cliente\r\n    loadClientCommunications(client.id || client._id);\r\n  };\r\n\r\n  // Funci贸n para cargar comunicaciones del cliente\r\n  const loadClientCommunications = async (clientId) => {\r\n    if (!clientId) return;\r\n    \r\n    try {\r\n      const response = await getComunicacionesByCliente(clientId);\r\n      if (response && response.data && response.data.comunicaciones) {\r\n        // Mapear los datos del backend al formato del frontend\r\n        const mappedComms = response.data.comunicaciones.map(comm => ({\r\n          id: comm.id,\r\n          type: comm.tipoComunicacion || comm.medioDifusion || 'email',\r\n          subject: comm.asunto,\r\n          description: comm.mensaje,\r\n          contactPerson: comm.creadoPor || 'Sistema',\r\n          date: comm.fechaCreacion,\r\n          hasAttachments: false,\r\n          urgency: comm.nivelUrgencia || 'normal',\r\n          status: comm.estado || 'completado'\r\n        }));\r\n        setClientCommunications(mappedComms);\r\n      } else {\r\n        setClientCommunications([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al cargar comunicaciones:', error);\r\n      setClientCommunications([]);\r\n    }\r\n  };\r\n\r\n  const [editModalState, setEditModalState] = useState({ open: false, client: null });\r\n\r\n  const handleEditClient = (client) => {\r\n    setEditModalState({ open: true, client });\r\n  };\r\n\r\n  const handleSubmitEditClient = async (updatedClient) => {\r\n    if (!updatedClient?.id) return;\r\n    const response = await editClient(updatedClient.id, updatedClient);\r\n    // Espera a que el estado se actualice antes de cerrar el modal\r\n    if (response && response.success) {\r\n      setEditModalState({ open: false, client: null });\r\n      // Recargar la lista de clientes para asegurar que est茅 actualizada\r\n      await getClients(true);\r\n    }\r\n  };\r\n\r\n  const handleViewProjects = (client) => {\r\n    console.log('Ver proyectos del cliente:', client);\r\n    window.location.href = `/proyectos?client=${client?.id}`;\r\n  };\r\n\r\n  const handleViewContracts = (client) => {\r\n    console.log('Ver contratos del cliente:', client);\r\n  };\r\n\r\n  const handleAddClient = () => {\r\n    setShowNewClientModal(true);\r\n  };\r\n\r\n  const handleSubmitNewClient = async (clientData) => {\r\n    const result = await createClient(clientData);\r\n    if (result && result.success) {\r\n      setShowNewClientModal(false);\r\n      // Recargar la lista de clientes para asegurar que est茅 actualizada\r\n      await getClients(true);\r\n    }\r\n  };\r\n\r\n  const handleSubmitCommunication = async (commData) => {\r\n    if (!selectedClient) return;\r\n\r\n    const payload = {\r\n      tipoComunicacion: commData.tipoComunicacion,\r\n      nivelUrgencia: commData.nivelUrgencia,\r\n      asunto: commData.asunto,\r\n      mensaje: commData.mensaje,\r\n      idCliente: selectedClient.id || selectedClient._id,\r\n      idOportunidad: '' // Vac铆o para comunicaciones directas del cliente\r\n    };\r\n\r\n    const response = await createCommunication(payload);\r\n    if (response) {\r\n      // Recargar comunicaciones\r\n      loadClientCommunications(selectedClient.id || selectedClient._id);\r\n    }\r\n  };\r\n\r\n  const handleViewCommunicationDetails = (communication) => {\r\n    console.log('Ver detalles de comunicaci贸n:', communication);\r\n  };\r\n\r\n  const handleUploadDocument = (document = null) => {\r\n    console.log('Subiendo documento:', document);\r\n  };\r\n\r\n  const handleViewDocument = (document) => {\r\n    console.log('Ver documento:', document);\r\n  };\r\n\r\n  const handleDownloadDocument = (document) => {\r\n    console.log('Descargar documento:', document);\r\n  };\r\n\r\n  const handleViewContract = (contract) => {\r\n    console.log('Ver contrato:', contract);\r\n  };\r\n\r\n  const handleRenewContract = (contract) => {\r\n    console.log('Renovar contrato:', contract);\r\n  };\r\n\r\n  const handleScheduleRenewal = (contract) => {\r\n    console.log('Programar renovaci贸n:', contract);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Desktop Sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <Sidebar \r\n          isCollapsed={sidebarCollapsed} \r\n          onToggle={handleSidebarToggle}\r\n        />\r\n      </div>\r\n\r\n      {/* Mobile Header */}\r\n      <div className=\"lg:hidden\">\r\n        <Header \r\n          onMenuToggle={handleMobileMenuToggle}\r\n          isMenuOpen={mobileMenuOpen}\r\n        />\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className={`transition-all duration-300 ${\r\n        sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n      }`}>\r\n        <div className=\"flex\">\r\n              {/* Main Content */}\r\n              <div className={`flex-1 transition-all duration-300 ${showSidebar ? 'mr-96' : ''}`}>\r\n                <div className=\"p-6\">\r\n                  {/* Modals */}\r\n                  <NewClientModal\r\n                   isOpen={showNewClientModal}\r\n                   onClose={() => setShowNewClientModal(false)}\r\n                   onSubmit={handleSubmitNewClient}\r\n                   mode=\"create\"\r\n                   createClient={createClient}\r\n                   editClient={editClient}\r\n                  />\r\n                  <NewClientModal\r\n                   isOpen={editModalState.open}\r\n                   onClose={() => setEditModalState({ open: false, client: null })}\r\n                   onSubmit={handleSubmitEditClient}\r\n                   initialData={editModalState.client}\r\n                   mode=\"edit\"\r\n                   createClient={createClient}\r\n                   editClient={editClient}\r\n                  />\r\n                  {/* Breadcrumb */}\r\n              <div className=\"mb-6\">\r\n                <Breadcrumb />\r\n              </div>\r\n\r\n              {/* Header */}\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <div>\r\n                  <h1 className=\"text-2xl font-bold text-foreground\">Gesti贸n de Clientes</h1>\r\n                  <p className=\"text-muted-foreground\">\r\n                    Administra relaciones con clientes, contratos y comunicaciones\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"flex items-center space-x-2 bg-muted rounded-lg p-1\">\r\n                    <Button\r\n                      variant={viewMode === 'table' ? 'default' : 'ghost'}\r\n                      size=\"sm\"\r\n                      onClick={() => setViewMode('table')}\r\n                      iconName=\"Table\"\r\n                    >\r\n                      Tabla\r\n                    </Button>\r\n                    <Button\r\n                      variant={viewMode === 'cards' ? 'default' : 'ghost'}\r\n                      size=\"sm\"\r\n                      onClick={() => setViewMode('cards')}\r\n                      iconName=\"Grid3X3\"\r\n                    >\r\n                      Tarjetas\r\n                    </Button>\r\n                  </div>\r\n                  <Button\r\n                    variant=\"default\"\r\n                    onClick={handleAddClient}\r\n                    iconName=\"Plus\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Nuevo Cliente\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Stats Cards */}\r\n              {/* <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6\">\r\n                <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Total Clientes</p>\r\n                      <p className=\"text-2xl font-bold text-foreground\">{Array.isArray(clients) ? clients.length : 0}</p>\r\n                    </div>\r\n                    <div className=\"w-12 h-12 bg-primary rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"Users\" size={24} color=\"white\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-4 flex items-center space-x-2\">\r\n                    <Icon name=\"TrendingUp\" size={16} className=\"text-success\" />\r\n                    <span className=\"text-sm text-success\">{getMonthlyVariation(Array.isArray(clients) ? clients.length : 0, getPreviousMonthClients(clients))} este mes</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Clientes Activos</p>\r\n                      <p className=\"text-2xl font-bold text-foreground\">\r\n                        {getActiveClients(clients)}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"w-12 h-12 bg-success rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"UserCheck\" size={24} color=\"white\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-4 flex items-center space-x-2\">\r\n                    <Icon name=\"TrendingUp\" size={16} className=\"text-success\" />\r\n                    <span className=\"text-sm text-success\">{getMonthlyVariation(getActiveClients(clients), getPreviousMonthActiveClients(clients))} este mes</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Contratos Activos</p>\r\n                      <p className=\"text-2xl font-bold text-foreground\">\r\n                        {Array.isArray(clients) ? clients.reduce((sum, client) => sum + (Number(client?.activeContracts) || 0), 0) : 0}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"w-12 h-12 bg-accent rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"FileCheck\" size={24} color=\"white\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-4 flex items-center space-x-2\">\r\n                    <Icon name=\"TrendingUp\" size={16} className=\"text-success\" />\r\n                    <span className=\"text-sm text-success\">+5% este mes</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Valor Total</p>\r\n                      <p className=\"text-2xl font-bold text-foreground\">\r\n                        ${Array.isArray(clients) ? clients.reduce((sum, client) => sum + (Number(client?.totalValue) || 0), 0).toLocaleString('es-MX') : '0'}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"w-12 h-12 bg-warning rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"DollarSign\" size={24} color=\"white\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-4 flex items-center space-x-2\">\r\n                    <Icon name=\"TrendingUp\" size={16} className=\"text-success\" />\r\n                    <span className=\"text-sm text-success\">+15% este mes</span>\r\n                  </div>\r\n                </div>\r\n              </div> */}\r\n\r\n              {/* Filters */}\r\n              <ClientFilters\r\n                filters={filters}\r\n                onFiltersChange={handleFiltersChange}\r\n                onClearFilters={handleClearFilters}\r\n                onExport={handleExportClients}\r\n                estados={estados}\r\n              />\r\n\r\n              {/* Client List */}\r\n              {viewMode === 'table' ? (\r\n                <div style={{overflowX: 'auto', width: '100%'}}>\r\n                  <ClientTable\r\n                    clients={filteredClients}\r\n                    onViewDetails={handleViewDetails}\r\n                    onEditClient={handleEditClient}\r\n                    onViewProjects={handleViewProjects}\r\n                    onViewContracts={handleViewContracts}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n                  {filteredClients?.map((client) => (\r\n                    <ClientCard\r\n                      key={client?.id}\r\n                      client={client}\r\n                      onViewDetails={handleViewDetails}\r\n                      onEditClient={handleEditClient}\r\n                      onViewProjects={handleViewProjects}\r\n                      onViewContracts={handleViewContracts}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n\r\n              {filteredClients?.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <Icon name=\"Users\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-semibold text-foreground mb-2\">No se encontraron clientes</h3>\r\n                  <p className=\"text-muted-foreground mb-4\">\r\n                    Ajusta los filtros de b煤squeda o agrega un nuevo cliente\r\n                  </p>\r\n                  <Button\r\n                    variant=\"default\"\r\n                    onClick={handleAddClient}\r\n                    iconName=\"Plus\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Agregar Primer Cliente\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Sidebar */}\r\n          {showSidebar && (\r\n            <div className=\"fixed right-0 top-0 h-full bg-card border-l border-border shadow-lg z-1000 overflow-y-auto\" style={{width: '500px', minWidth: '440px'}}>\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  <h2 className=\"text-lg font-semibold text-foreground\">\r\n                    {selectedClient?.companyName}\r\n                  </h2>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={() => setShowSidebar(false)}\r\n                  >\r\n                    <Icon name=\"X\" size={20} />\r\n                  </Button>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                  {/* Communication Panel */}\r\n                  <ClientCommunicationPanel client={selectedClient} />\r\n\r\n                  {/* Document Status */}\r\n                  <DocumentStatus\r\n                    documents={mockDocuments}\r\n                    onUploadDocument={handleUploadDocument}\r\n                    onViewDocument={handleViewDocument}\r\n                    onDownloadDocument={handleDownloadDocument}\r\n                  />\r\n\r\n                  {/* Contract Alerts */}\r\n                  <ContractAlerts\r\n                    contracts={mockContracts}\r\n                    onViewContract={handleViewContract}\r\n                    onRenewContract={handleRenewContract}\r\n                    onScheduleRenewal={handleScheduleRenewal}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Sidebar Overlay */}\r\n          {showSidebar && (\r\n            <div\r\n              className=\"fixed inset-0 bg-black bg-opacity-50 z-999 lg:hidden\"\r\n              onClick={() => setShowSidebar(false)}\r\n            />\r\n          )}\r\n\r\n          {/* New Client Modal */}\r\n          <NewClientModal\r\n            isOpen={showNewClientModal}\r\n            onClose={() => setShowNewClientModal(false)}\r\n            onSubmit={handleSubmitNewClient}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientManagement;","import React, { useState, useEffect } from \"react\";\r\nimport Icon from \"../../../components/AppIcon\";\r\nimport Button from \"../../../components/ui/Button\";\r\nimport Input from \"../../../components/ui/Input\";\r\nimport Select from \"../../../components/ui/Select\";\r\nimport { Checkbox } from \"../../../components/ui/Checkbox\";\r\nimport useOperac from \"../../../hooks/useOperac\";\r\nimport useClient from \"../../../hooks/useClient\";\r\nimport usePerson from \"../../../hooks/usePerson\";\r\nimport useProyecto from \"../../../hooks/useProyect\";\r\n\r\n\r\nconst WorkOrderModal = ({ isOpen, onClose, workOrder, mode = \"edit\", onSaveSuccess }) => {\r\n  const { createWorkOrder, updateWorkOrder } = useOperac();\r\n  const { getProyectos } = useProyecto();\r\n  const [clientProjects, setClientProjects] = useState([]);\r\n\r\n  const { clients, getClients, loading: loadingClients, error: errorClients } = useClient();\r\n  const { getPersonsByDepartment, departmentPersons, loading: loadingPersons } = usePerson();\r\n\r\n  const isViewMode = mode === \"view\";\r\n\r\n  const [formData, setFormData] = useState({\r\n    orderNumber: \"\",\r\n    assignedTechnician: { id: \"\", nombre: \"\" },\r\n    priority: \"Media\",\r\n    status: \"Pendiente\",\r\n    dueDate: \"\",\r\n    workDescription: \"\",\r\n    additionalNotes: \"\",\r\n    requiredPPE: [],\r\n    medicalRequirements: false,\r\n    client: { id: \"\", nombre: \"\", contacto: \"\", email: \"\", telefono: \"\" },\r\n    type: \"\",\r\n    proyectoNombre: \"\", \r\n  });\r\n\r\n  const [assignClient, setAssignClient] = useState(false);\r\n\r\n  //Carga de clientes y t茅cnicos\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      getClients();\r\n      getPersonsByDepartment(\"Taller,Mantenimiento\");\r\n    }\r\n  }, [isOpen]);\r\n\r\n  //Carga de proyectos seg煤n cliente seleccionado\r\n  useEffect(() => {\r\n    const fetchProjectsByClient = async () => {\r\n      if (!formData.client.id) {\r\n        setClientProjects([]);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const allProjects = await getProyectos({ force: true });\r\n        const filtered = allProjects.filter(\r\n          (p) =>\r\n            p.cliente?.id === formData.client.id ||\r\n            p.cliente?._id === formData.client.id\r\n        );\r\n        setClientProjects(filtered);\r\n      } catch (error) {\r\n        console.error(\"Error al obtener proyectos del cliente:\", error);\r\n        setClientProjects([]);\r\n      }\r\n    };\r\n\r\n    fetchProjectsByClient();\r\n  }, [formData.client.id]);\r\n\r\n  //Cuando se edita o visualiza una orden existente\r\n  useEffect(() => {\r\n  const loadWorkOrderData = async () => {\r\n    if (!workOrder) return;\r\n\r\n    // Carga inicial del formulario\r\n    setFormData({\r\n      orderNumber: workOrder.ordenTrabajo || \"\",\r\n      assignedTechnician: {\r\n        id: workOrder.tecnicoAsignado?.id || \"\",\r\n        nombre: workOrder.tecnicoAsignado?.nombre || \"\",\r\n      },\r\n      priority: workOrder.prioridad || \"Media\",\r\n      status: workOrder.estado || \"Pendiente\",\r\n      dueDate: workOrder.fechaLimite || \"\",\r\n      workDescription: workOrder.descripcion || \"\",\r\n      additionalNotes: workOrder.notasAdicionales || \"\",\r\n      requiredPPE: [\r\n        ...(workOrder.cascoSeguridad ? [\"Casco de Seguridad\"] : []),\r\n        ...(workOrder.gafasProteccion ? [\"Gafas de Protecci贸n\"] : []),\r\n        ...(workOrder.guantesTrabajo ? [\"Guantes de Trabajo\"] : []),\r\n        ...(workOrder.calzadoSeguridad ? [\"Calzado de Seguridad\"] : []),\r\n        ...(workOrder.arnesSeguridad ? [\"Arn茅s de Seguridad\"] : []),\r\n        ...(workOrder.respiradorN95 ? [\"Respirador N95\"] : []),\r\n        ...(workOrder.chalecoReflectivo ? [\"Chaleco Reflectivo\"] : []),\r\n      ],\r\n      medicalRequirements: workOrder.requiereEstudiosMedicosActualizados || false,\r\n      client: {\r\n        id: workOrder.cliente?.id || \"\",\r\n        nombre:\r\n          workOrder.cliente?.nombre ||\r\n          workOrder.cliente?.empresa ||\r\n          workOrder.cliente?.companyName ||\r\n          \"\",\r\n        contacto: workOrder.cliente?.contacto || \"\",\r\n        email: workOrder.cliente?.email || \"\",\r\n        telefono: workOrder.cliente?.telefono || \"\",\r\n      },\r\n      type: workOrder.tipo || \"\",\r\n      // lo rellenamos abajo cuando tengamos proyectos\r\n      proyectoNombre: \"\",\r\n    });\r\n\r\n    setAssignClient(!!workOrder.cliente?.id);\r\n\r\n    if (workOrder.cliente?.id) {\r\n      try {\r\n        const allProjects = await getProyectos({ force: true });\r\n        const filtered = allProjects.filter(\r\n          (p) =>\r\n            p.cliente?.id === workOrder.cliente.id ||\r\n            p.cliente?._id === workOrder.cliente.id\r\n        );\r\n        setClientProjects(filtered);\r\n\r\n        // helper para normalizar texto\r\n        const normalize = (s) =>\r\n          typeof s === \"string\" ? s.trim().toLowerCase() : \"\";\r\n\r\n        let selectedProjectId = \"\";\r\n\r\n        // 1) si en el futuro guardas tambi茅n proyecto.id en la orden:\r\n        if (workOrder.proyecto?.id || workOrder.proyecto?._id) {\r\n          selectedProjectId = workOrder.proyecto.id || workOrder.proyecto._id;\r\n        }\r\n\r\n        // 2) si solo tienes el nombre del proyecto, lo buscamos por nombre\r\n        if (!selectedProjectId && workOrder.proyectoNombre) {\r\n          const match = filtered.find((p) => {\r\n            const nombreProyecto =\r\n              p.nombre ||\r\n              p.nombreProyecto || // <- por si lo llamas as铆 en tus docs\r\n              \"\";\r\n            return (\r\n              normalize(nombreProyecto) ===\r\n              normalize(workOrder.proyectoNombre)\r\n            );\r\n          });\r\n\r\n          if (match) {\r\n            selectedProjectId = match.id || match._id;\r\n          }\r\n        }\r\n\r\n        if (selectedProjectId) {\r\n          setFormData((prev) => ({\r\n            ...prev,\r\n            proyectoNombre: selectedProjectId,\r\n          }));\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error al cargar proyectos del cliente:\", error);\r\n        setClientProjects([]);\r\n      }\r\n    }\r\n  };\r\n\r\n  loadWorkOrderData();\r\n}, [workOrder, isOpen, getProyectos]);\r\n\r\n\r\n// Agrega esto despu茅s\r\nuseEffect(() => {\r\n  if (workOrder?.cliente?.id && clients.length > 0) {\r\n    const selected = clients.find(\r\n      (c) => c.id === workOrder.cliente.id || c._id === workOrder.cliente.id\r\n    );\r\n\r\n    if (selected) {\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        client: {\r\n          id: selected.id || selected._id,\r\n          nombre:\r\n            selected.companyName || selected.empresa || selected.nombre || \"\",\r\n          contacto: selected.contacto || \"\",\r\n          email: selected.email || \"\",\r\n          telefono: selected.telefono || \"\",\r\n        },\r\n        proyectoNombre: prev.proyectoNombre,\r\n      }));\r\n      setAssignClient(true);\r\n    }\r\n  }\r\n}, [clients, workOrder]);\r\n\r\n\r\n\r\n  // Opciones\r\n  const priorityOptions = [\r\n    { value: 'Cr铆tica', label: 'Cr铆tica' },\r\n    { value: 'Alta', label: 'Alta' },\r\n    { value: 'Media', label: 'Media' },\r\n    { value: 'Baja', label: 'Baja' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'En Progreso', label: 'En Progreso' },\r\n    { value: 'En Pausa', label: 'En Pausa' },\r\n    { value: 'Completada', label: 'Completada' },\r\n    { value: 'Cancelada', label: 'Cancelada' }\r\n  ];\r\n\r\n  const ppeOptions = [\r\n    'Casco de Seguridad',\r\n    'Gafas de Protecci贸n',\r\n    'Guantes de Trabajo',\r\n    'Calzado de Seguridad',\r\n    'Arn茅s de Seguridad',\r\n    'Respirador N95',\r\n    'Chaleco Reflectivo'\r\n  ];\r\n\r\n  //Handlers\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handlePPEChange = (item, checked) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      requiredPPE: checked \r\n        ? [...prev?.requiredPPE, item]\r\n        : prev?.requiredPPE?.filter(ppe => ppe !== item)\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n  const payload = {\r\n    ordenTrabajo: formData.orderNumber,\r\n    prioridad: formData.priority,\r\n    estado: formData.status,\r\n    fechaLimite: formData.dueDate,\r\n    descripcion: formData.workDescription,\r\n    notasAdicionales: formData.additionalNotes,\r\n    cascoSeguridad: formData.requiredPPE.includes(\"Casco de Seguridad\"),\r\n    gafasProteccion: formData.requiredPPE.includes(\"Gafas de Protecci贸n\"),\r\n    guantesTrabajo: formData.requiredPPE.includes(\"Guantes de Trabajo\"),\r\n    calzadoSeguridad: formData.requiredPPE.includes(\"Calzado de Seguridad\"),\r\n    arnesSeguridad: formData.requiredPPE.includes(\"Arn茅s de Seguridad\"),\r\n    respiradorN95: formData.requiredPPE.includes(\"Respirador N95\"),\r\n    chalecoReflectivo: formData.requiredPPE.includes(\"Chaleco Reflectivo\"),\r\n    requiereEstudiosMedicosActualizados: formData.medicalRequirements,\r\n    tipo: formData.type,\r\n  };\r\n\r\n  if (assignClient && formData.client.id) {\r\n    payload.cliente = {\r\n      id: formData.client.id,\r\n      nombre: formData.client.nombre,\r\n    };\r\n  }\r\n\r\n  // ------- NUEVA LGICA PARA PROYECTO -------\r\n  let proyectoNombreFinal = \"\";\r\n  let proyectoIdFinal = \"\";\r\n\r\n  if (formData.proyectoNombre) {\r\n    // Usuario seleccion贸 un proyecto en el Select\r\n    const selectedProject = clientProjects.find(\r\n      (p) => p.id === formData.proyectoNombre || p._id === formData.proyectoNombre\r\n    );\r\n\r\n    if (selectedProject) {\r\n      proyectoNombreFinal =\r\n        selectedProject.nombre ||\r\n        selectedProject.nombreProyecto ||\r\n        \"\";\r\n      proyectoIdFinal = selectedProject.id || selectedProject._id;\r\n    }\r\n  } else if (workOrder?.proyecto?.id || workOrder?.proyectoNombre) {\r\n    // No toc贸 el Select, pero la orden ya ten铆a proyecto guardado\r\n    proyectoNombreFinal =\r\n      workOrder.proyectoNombre ||\r\n      workOrder.proyecto?.nombre ||\r\n      \"\";\r\n    proyectoIdFinal =\r\n      workOrder.proyecto?.id ||\r\n      workOrder.proyecto?._id ||\r\n      \"\";\r\n  }\r\n\r\n  if (proyectoNombreFinal) {\r\n    payload.proyecto = {\r\n      id: proyectoIdFinal || undefined,\r\n      nombre: proyectoNombreFinal,\r\n    };\r\n    payload.proyectoNombre = proyectoNombreFinal;\r\n  }\r\n  // ------------------------------------------\r\n\r\n  if (formData.assignedTechnician.id) {\r\n    payload.tecnicoAsignado = {\r\n      id: formData.assignedTechnician.id,\r\n      nombre: formData.assignedTechnician.nombre,\r\n    };\r\n  }\r\n\r\n  try {\r\n    let savedOrder;\r\n    if (workOrder?.id) {\r\n      savedOrder = await updateWorkOrder(workOrder.id, payload);\r\n    } else {\r\n      savedOrder = await createWorkOrder(payload);\r\n    }\r\n\r\n    onClose();\r\n    onSaveSuccess?.({\r\n    ...workOrder,\r\n    ...payload,\r\n    cliente: payload.cliente || workOrder?.cliente || null,\r\n    proyecto: payload.proyecto || workOrder?.proyecto || null,\r\n    proyectoNombre: payload.proyectoNombre || workOrder?.proyectoNombre || \"\"\r\n});\r\n\r\n  } catch (error) {\r\n    console.error(\"Error al guardar:\", error);\r\n  }\r\n};\r\n\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card rounded-lg border border-border w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">\r\n              {workOrder ? 'Editar Orden de Trabajo' : 'Nueva Orden de Trabajo'}\r\n            </h2>\r\n            {workOrder && (\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                {workOrder?.orderNumber} - {workOrder?.projectName}\r\n              </p>\r\n            )}\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n          >\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <Select\r\n              label=\"T茅cnico Asignado\"\r\n              options={technicianOptions}\r\n              value={formData?.assignedTechnician}\r\n              onChange={(value) => handleInputChange('assignedTechnician', value)}\r\n              searchable\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={formData?.priority}\r\n              onChange={(value) => handleInputChange('priority', value)}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Estado\"\r\n              options={statusOptions}\r\n              value={formData?.status}\r\n              onChange={(value) => handleInputChange('status', value)}\r\n              required\r\n            />\r\n\r\n            <Input\r\n              label=\"Fecha L铆mite\"\r\n              type=\"date\"\r\n              value={formData?.dueDate}\r\n              onChange={(e) => handleInputChange('dueDate', e?.target?.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Notas Adicionales\r\n            </label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent\"\r\n              rows={4}\r\n              placeholder=\"Agregar notas sobre la orden de trabajo...\"\r\n              value={formData?.notes}\r\n              onChange={(e) => handleInputChange('notes', e?.target?.value)}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-3\">\r\n              Equipo de Protecci贸n Personal (PPE) Requerido\r\n            </label>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\r\n              {ppeOptions?.map((item) => (\r\n                <Checkbox\r\n                  key={item}\r\n                  label={item}\r\n                  checked={formData?.requiredPPE?.includes(item)}\r\n                  onChange={(e) => handlePPEChange(item, e?.target?.checked)}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-muted/30 rounded-lg p-4\">\r\n            <Checkbox\r\n              label=\"Requiere Estudios M茅dicos\"\r\n              checked={formData.medicalRequirements}\r\n              onChange={(e) => handleInputChange(\"medicalRequirements\", e.target.checked)}\r\n              disabled={isViewMode}\r\n            />\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n  {/* Cliente con checkbox a la izquierda */}\r\n  <div>\r\n    <div className=\"flex items-center gap-2 mb-2\">\r\n      {/* Checkbox primero */}\r\n      <Checkbox\r\n        checked={assignClient}\r\n        onChange={(e) => setAssignClient(e.target.checked)}\r\n        disabled={isViewMode}\r\n        label=\"\" // sin texto\r\n      />\r\n      <label className=\"text-sm font-medium text-foreground\">Cliente</label>\r\n    </div>\r\n\r\n    {assignClient && (\r\n      <Select\r\n  value={formData.client.id}\r\n  onChange={(value) => {\r\n    const selected = clients.find(\r\n      (c) => c.id === value || c._id === value\r\n    );\r\n    handleInputChange(\"client\", {\r\n      id: value,\r\n      nombre:\r\n        selected?.companyName ||\r\n        selected?.empresa ||\r\n        selected?.nombre ||\r\n        \"\",\r\n      contacto: selected?.contacto || \"\",\r\n      email: selected?.email || \"\",\r\n      telefono: selected?.telefono || \"\",\r\n    });\r\n  }}\r\n  options={\r\n    Array.isArray(clients)\r\n      ? clients.map((c) => ({\r\n          value: c.id || c._id,\r\n          label:\r\n            c.companyName ||\r\n            c.empresa ||\r\n            c.nombre ||\r\n            \"Sin nombre\",\r\n        }))\r\n      : []\r\n  }\r\n  placeholder={\r\n    loadingClients\r\n      ? \"Cargando clientes...\"\r\n      : clients.length === 0\r\n      ? \"No hay clientes registrados\"\r\n      : \"Selecciona un cliente\"\r\n  }\r\n  loading={loadingClients}\r\n  disabled={isViewMode}\r\n  error={errorClients ? \"Error al cargar clientes\" : \"\"}\r\n/>\r\n\r\n    )}\r\n{assignClient && formData.client.id && (\r\n  <div className=\"mt-4\">\r\n    {/*Tarjeta del cliente (sin cambios) */}\r\n    <div className=\"relative flex flex-col items-start p-4 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-all max-w-full overflow-hidden\">\r\n      {/* L铆nea lateral decorativa */}\r\n      <div className=\"absolute left-0 top-0 h-full w-1 bg-blue-400 rounded-l-lg\"></div>\r\n\r\n      {/* Encabezado con 铆cono */}\r\n      <div className=\"flex items-center justify-between w-full mb-3\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"flex-shrink-0 bg-blue-100 p-2 rounded-md\">\r\n            <Icon name=\"Building2\" className=\"text-blue-600 w-5 h-5\" />\r\n          </div>\r\n          <h4 className=\"text-base font-semibold text-gray-900\">\r\n            {formData.client.nombre || \"Cliente sin nombre\"}\r\n          </h4>\r\n        </div>\r\n\r\n        {/* Bot贸n copiar */}\r\n        <button\r\n          onClick={() => {\r\n            const datos = `\r\nCliente: ${formData.client.nombre || \"No especificado\"}\r\nContacto: ${formData.client.contacto || \"No especificado\"}\r\nTel茅fono: ${formData.client.telefono || \"No especificado\"}\r\nEmail: ${formData.client.email || \"No especificado\"}\r\n`;\r\n            navigator.clipboard.writeText(datos);\r\n          }}\r\n          className=\"text-xs bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded-md shadow-sm transition-all\"\r\n        >\r\n          Copiar\r\n        </button>\r\n      </div>\r\n\r\n      {/* Informaci贸n del cliente */}\r\n      <div className=\"flex flex-col gap-2 text-xs text-gray-700 pl-1\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <Icon name=\"User\" className=\"w-4 h-4 text-gray-500\" />\r\n          <span className=\"font-semibold text-gray-700\">Contacto:</span>\r\n          <span className=\"truncate\">{formData.client.contacto || \"No especificado\"}</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Icon name=\"Phone\" className=\"w-4 h-4 text-gray-500\" />\r\n          <span className=\"font-semibold text-gray-700\">Tel茅fono:</span>\r\n          <span className=\"truncate\">{formData.client.telefono || \"No especificado\"}</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Icon name=\"Mail\" className=\"w-4 h-4 text-gray-500\" />\r\n          <span className=\"font-semibold text-gray-700\">Email:</span>\r\n          <span className=\"truncate\">{formData.client.email || \"No especificado\"}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    {/*Select de Proyecto  abajo y fuera del recuadro */}\r\n    <div className=\"mt-4\">\r\n      <Select\r\n  label=\"Nombre del Proyecto\"\r\n  value={formData.proyectoNombre || \"\"}\r\n  onChange={(value) => handleInputChange(\"proyectoNombre\", value)}\r\n  options={\r\n    clientProjects.length > 0\r\n      ? clientProjects.map((p) => ({\r\n          value: p.id || p._id,\r\n          label: p.nombre || p.nombreProyecto || \"Sin nombre\",\r\n        }))\r\n      : []\r\n  }\r\n  placeholder={\r\n    formData.client.id\r\n      ? clientProjects.length > 0\r\n        ? \"Selecciona un proyecto\"\r\n        : \"Este cliente no tiene proyectos\"\r\n      : \"Selecciona un cliente primero\"\r\n  }\r\n  disabled={isViewMode || !formData.client.id}\r\n/>\r\n\r\n\r\n    </div>\r\n  </div>\r\n)}\r\n  </div>\r\n              {/* Tipo */}\r\n              <Select\r\n                label=\"Tipo\"\r\n                value={formData.type}\r\n                onChange={(value) => handleInputChange(\"type\", value)}\r\n                options={[\r\n                  { value: \"Instalaci贸n\", label: \"Instalaci贸n\" },\r\n                  { value: \"Mantenimiento Preventivo\", label: \"Mantenimiento Preventivo\" },\r\n                  { value: \"Mantenimiento Correctivo\", label: \"Mantenimiento Correctivo\" },\r\n                  { value: \"Inspecci贸n\", label: \"Inspecci贸n\" },\r\n                ]}\r\n                placeholder=\"Selecciona un tipo de servicio\"\r\n                disabled={isViewMode}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-border\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onClose}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"default\"\r\n            onClick={handleSave}\r\n            iconName=\"Save\"\r\n            iconSize={16}\r\n          >\r\n            Guardar Cambios\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkOrderModal;","import React, { useState, useEffect, useMemo } from \"react\";\r\nimport Icon from \"../../../components/AppIcon\";\r\nimport Button from \"../../../components/ui/Button\";\r\nimport useOperac from \"../../../hooks/useOperac\";\r\nimport useClient from \"../../../hooks/useClient\";\r\nimport WorkOrderModal from \"../components/WorkOrderModal\";\r\nimport { useNotifications } from \"../../../context/NotificationContext\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\nconst WorkOrderTable = ({\r\n  workOrders,\r\n  requisitions,\r\n  onStatusUpdate,\r\n  onAssignTechnician,\r\n  onViewDetails,\r\n  onEditOrder,\r\n  loading,\r\n  error,\r\n}) => {\r\nconst { oportunities, getOportunities, deleteWorkOrder } = useOperac();\r\n  const { clients, getClients, loading: loadingClients } = useClient();\r\n  const { showConfirm, showOperationSuccess, showHttpError } = useNotifications();\r\n\r\n  const [expandedRows, setExpandedRows] = useState(new Set());\r\n  const [sortConfig, setSortConfig] = useState({ key: \"prioridad\", direction: \"asc\" });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n  const [localRequisitions, setLocalRequisitions] = useState([]);\r\n\r\n  // Modal\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [modalMode, setModalMode] = useState(\"view\");\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!workOrders?.length) getOportunities();\r\n    getClients();\r\n  }, []);\r\n\r\n  // Sincroniza requisiciones autom谩ticamente\r\n  useEffect(() => {\r\n    if (requisitions) setLocalRequisitions(requisitions);\r\n  }, [requisitions]);\r\n\r\n  const dataSource = useMemo(\r\n    () => (workOrders?.length ? workOrders : oportunities || []),\r\n    [workOrders, oportunities]\r\n  );\r\n  \r\n    // PARA ELIMINARLO PERO NO DESDE EL BACK SI NO VISUAL\r\nconst [deletedOrderIds, setDeletedOrderIds] = useState(() => {\r\n  const stored = localStorage.getItem(\"deletedWorkOrders\");\r\n  return stored ? new Set(JSON.parse(stored)) : new Set();\r\n});\r\n\r\nuseEffect(() => {\r\n  localStorage.setItem(\"deletedWorkOrders\", JSON.stringify([...deletedOrderIds]));\r\n}, [deletedOrderIds]);\r\n\r\nconst sortedOrders = useMemo(() => {\r\n  const filtered = dataSource.filter((order) => !deletedOrderIds.has(order.id));\r\n  if (!sortConfig.key) return filtered;\r\n  const sorted = [...filtered];\r\n  sorted.sort((a, b) => {\r\n    const aVal = a[sortConfig.key] || \"\";\r\n    const bVal = b[sortConfig.key] || \"\";\r\n    if (aVal < bVal) return sortConfig.direction === \"asc\" ? -1 : 1;\r\n    if (aVal > bVal) return sortConfig.direction === \"asc\" ? 1 : -1;\r\n    return 0;\r\n  });\r\n  return sorted;\r\n}, [dataSource, sortConfig, deletedOrderIds]);\r\n\r\n\r\n  // Paginaci贸n\r\n  const totalItems = sortedOrders.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedData = sortedOrders.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n  \r\n\r\nconst handleDelete = (order) => {\r\n  showConfirm(`驴Seguro que deseas eliminar la orden \"${order.ordenTrabajo}\"?`, {\r\n    onConfirm: () => {\r\n      setDeletedOrderIds((prev) => new Set([...prev, order.id]));\r\n      showOperationSuccess(\"delete\", \"Orden de trabajo\");\r\n      onEditOrder?.({ type: \"delete\", id: order.id });\r\n    },\r\n    onCancel: () => {\r\n      showInfo(\"Eliminaci贸n cancelada\");\r\n    },\r\n  });\r\n};\r\n  const handleSort = (key) => {\r\n    setSortConfig((prev) => ({\r\n      key,\r\n      direction: prev.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\r\n    }));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handlePageChange = (newPage) => {\r\n    if (newPage >= 1 && newPage <= totalPages) setCurrentPage(newPage);\r\n  };\r\n\r\n  const toggleRowExpansion = (orderId) => {\r\n    const newExpanded = new Set(expandedRows);\r\n    if (newExpanded?.has(orderId)) {\r\n      newExpanded?.delete(orderId);\r\n    } else {\r\n      newExpanded?.add(orderId);\r\n    }\r\n    setExpandedRows(newExpanded);\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'Cr铆tica': return 'bg-red-100 text-red-800';\r\n      case 'Alta': return 'bg-orange-100 text-orange-800';\r\n      case 'Media': return 'bg-yellow-100 text-yellow-800';\r\n      case 'Baja': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'Pendiente': return 'bg-yellow-100 text-yellow-800';\r\n      case 'En Progreso': return 'bg-blue-100 text-blue-800';\r\n      case 'Completada': return 'bg-green-100 text-green-800';\r\n      case 'En Pausa': return 'bg-orange-100 text-orange-800';\r\n      case 'Cancelada': return 'bg-red-100 text-red-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const SortableHeader = ({ label, sortKey }) => (\r\n    <th\r\n      className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted transition-all\"\r\n      onClick={() => handleSort(sortKey)}\r\n    >\r\n      <div className=\"flex items-center space-x-1\">\r\n        <span>{label}</span>\r\n        <Icon\r\n          name={\r\n            sortConfig.key === sortKey\r\n              ? sortConfig.direction === \"asc\"\r\n                ? \"ChevronUp\"\r\n                : \"ChevronDown\"\r\n              : \"ChevronsUpDown\"\r\n          }\r\n          size={14}\r\n        />\r\n      </div>\r\n    </th>\r\n  );\r\n  \r\n\r\n  if (loading || loadingClients)\r\n    return (\r\n      <div className=\"flex justify-center items-center py-10\">\r\n        <Icon name=\"Loader2\" className=\"animate-spin mr-2\" size={18} />\r\n        <span className=\"text-muted-foreground\">Cargando 贸rdenes de trabajo...</span>\r\n      </div>\r\n    );\r\n\r\n  if (error)\r\n    return (\r\n      <div className=\"text-center py-10 text-error\">\r\n        <Icon name=\"AlertCircle\" className=\"inline-block mr-2\" size={18} />\r\n        Error al cargar los datos: {error.message}\r\n      </div>\r\n    );\r\n\r\n  if (!sortedOrders?.length)\r\n    return (\r\n      <div className=\"text-center py-10 text-muted-foreground\">\r\n        <Icon name=\"ClipboardX\" className=\"inline-block mr-2\" size={18} />\r\n        No hay 贸rdenes registradas.\r\n      </div>\r\n    );\r\n\r\n      // Exportar datos a PDF\r\n  const handleExportPDF = () => {\r\n    if (!sortedOrders || sortedOrders.length === 0) {\r\n      alert(\"No hay datos disponibles para exportar.\");\r\n      return;\r\n    }\r\n\r\n    const doc = new jsPDF({\r\n      orientation: \"landscape\",\r\n      unit: \"pt\",\r\n      format: \"A4\",\r\n    });\r\n\r\n    //  Encabezado del reporte\r\n    doc.setFontSize(16);\r\n    doc.text(\"Reporte de rdenes de Trabajo\", 40, 40);\r\n\r\n    //  Fecha actual\r\n    const fechaActual = new Date().toLocaleDateString(\"es-MX\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n    doc.setFontSize(10);\r\n    doc.text(`Generado el ${fechaActual}`, 40, 60);\r\n\r\n    //  Columnas del PDF\r\n    const tableColumn = [\r\n      \"N掳 Orden\",\r\n      \"T茅cnico Asignado\",\r\n      \"Prioridad\",\r\n      \"Estado\",\r\n      \"Fecha L铆mite\",\r\n      \"Cliente\",\r\n      \"Tipo Proyecto\",\r\n      \"Notas\",\r\n    ];\r\n\r\n    //  Filas de la tabla\r\n    const tableRows = sortedOrders.map((order) => [\r\n      order?.ordenTrabajo || \"\",\r\n      order?.tecnicoAsignado?.nombre || \"Sin t茅cnico\",\r\n      order?.prioridad || \"\",\r\n      order?.estado || \"\",\r\n      order?.fechaLimite || \"\",\r\n      order?.cliente?.empresa || order?.cliente?.nombre || \"Sin cliente\",\r\n      order?.tipo || \"\",\r\n      order?.notasAdicionales || \"\",\r\n    ]);\r\n\r\n    //  Generar tabla\r\n    doc.autoTable({\r\n      head: [tableColumn],\r\n      body: tableRows,\r\n      startY: 80,\r\n      styles: {\r\n        fontSize: 9,\r\n        cellPadding: 5,\r\n      },\r\n      headStyles: {\r\n        fillColor: [25, 118, 210],\r\n        textColor: 255,\r\n        fontStyle: \"bold\",\r\n      },\r\n      alternateRowStyles: { fillColor: [245, 245, 245] },\r\n    });\r\n\r\n    //  Descargar archivo\r\n    doc.save(`ordenes_trabajo_${new Date().toISOString().split(\"T\")[0]}.pdf`);\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border overflow-hidden\">\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-muted\">\r\n            <tr>\r\n              <SortableHeader label=\"Orden de Trabajo\" sortKey=\"ordenTrabajo\" />\r\n              <SortableHeader label=\"T茅cnico Asignado\" sortKey=\"tecnicoAsignado\" />\r\n              <SortableHeader label=\"Nombre del Proyecto\" sortKey=\"nombreProyecto\" />\r\n              <SortableHeader label=\"Prioridad\" sortKey=\"prioridad\" />\r\n              <SortableHeader label=\"Estado\" sortKey=\"estado\" />\r\n              <SortableHeader label=\"Fecha L铆mite\" sortKey=\"fechaLimite\" />\r\n              <SortableHeader label=\"Cliente\" sortKey=\"cliente\" />\r\n              <SortableHeader label=\"Tipo Proyecto\" sortKey=\"tipo\" />\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Fecha L铆mite\r\n              </th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Acciones\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-card divide-y divide-border\">\r\n  {paginatedData.length === 0 ? (\r\n    <tr>\r\n      <td colSpan=\"9\" className=\"py-10 text-center text-muted-foreground\">\r\n        <Icon name=\"SearchX\" className=\"inline-block mr-2\" size={18} />\r\n        No se encontraron resultados con los filtros aplicados.\r\n      </td>\r\n    </tr>\r\n  ) : (\r\n    paginatedData.map((order) => (\r\n      <React.Fragment key={order.id}>\r\n        <tr className=\"hover:bg-muted/50 transition-colors\">\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={() => toggleRowExpansion(order.id)}\r\n                className=\"w-6 h-6\"\r\n              >\r\n                <Icon\r\n                  name={expandedRows.has(order.id) ? \"ChevronDown\" : \"ChevronRight\"}\r\n                  size={16}\r\n                />\r\n              </Button>\r\n              <div>{order.ordenTrabajo || \"\"}</div>\r\n            </div>\r\n          </td>\r\n\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n  {order.tecnicoAsignado?.nombre || \"Sin t茅cnico\"}\r\n</td>\r\n\r\n<td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n  {order.proyectoNombre || order.nombreProyecto || \"Sin proyecto\"}\r\n</td>\r\n\r\n<td className=\"px-6 py-4 whitespace-nowrap\">\r\n  <span\r\n    className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPriorityColor(\r\n      order.prioridad\r\n    )}`}\r\n  >\r\n    {order.prioridad}\r\n  </span>\r\n</td>\r\n\r\n\r\n          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n            <span\r\n              className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(\r\n                order.estado\r\n              )}`}\r\n            >\r\n              {order.estado}\r\n            </span>\r\n          </td>\r\n\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">{order.fechaLimite}</td>\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n            {order.cliente?.nombre || order.cliente?.empresa || \"Sin cliente\"}\r\n          </td>\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">{order.tipo || \"\"}</td>\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground\">\r\n            {order.notasAdicionales || \"-\"}\r\n          </td>\r\n\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n            <div className=\"flex items-center justify-end space-x-2\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                iconName=\"Eye\"\r\n                iconSize={16}\r\n                onClick={() => handleView(order)}\r\n              >\r\n                Ver\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"Edit\"\r\n                iconSize={16}\r\n                onClick={() => handleEdit(order)}\r\n              >\r\n                Editar\r\n              </Button>\r\n              <Button\r\n  variant=\"ghost\"\r\n  size=\"icon\"\r\n  onClick={() => handleDelete(order)}\r\n  title=\"Eliminar orden\"\r\n>\r\n  <Icon name=\"Trash2\" size={16} className=\"text-destructive\" />\r\n</Button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n\r\n        {/*  Fila expandida con descripci贸n, EPP y materiales */}\r\n        {expandedRows.has(order.id) && (\r\n          <tr>\r\n            <td colSpan=\"9\" className=\"px-6 py-4 bg-muted/30\">\r\n              <div className=\"space-y-3\">\r\n                <h4 className=\"text-sm font-medium text-foreground\">\r\n                  Descripci贸n del Trabajo\r\n                </h4>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {order.descripcion || \"Sin descripci贸n\"}\r\n                </p>\r\n\r\n                {/* === EQUIPO DE PROTECCIN PERSONAL === */}\r\n                <h4 className=\"text-sm font-medium text-foreground\">\r\n                  Equipo de Protecci贸n Personal\r\n                </h4>\r\n                <ul className=\"text-sm text-muted-foreground grid grid-cols-2 md:grid-cols-3 gap-2\">\r\n                  {[\r\n                    { key: \"cascoSeguridad\", label: \"Casco de Seguridad\" },\r\n                    { key: \"gafasProteccion\", label: \"Gafas de Protecci贸n\" },\r\n                    { key: \"guantesTrabajo\", label: \"Guantes de Trabajo\" },\r\n                    { key: \"calzadoSeguridad\", label: \"Calzado de Seguridad\" },\r\n                    { key: \"arnesSeguridad\", label: \"Arn茅s de Seguridad\" },\r\n                    { key: \"respiradorN95\", label: \"Respirador N95\" },\r\n                    { key: \"chalecoReflectivo\", label: \"Chaleco Reflectivo\" },\r\n                  ].map(({ key, label }) => (\r\n                    <li key={key} className=\"flex items-center space-x-2\">\r\n                      <Icon\r\n                        name={order[key] ? \"CheckCircle\" : \"XCircle\"}\r\n                        size={14}\r\n                      />\r\n                      <span>{label}</span>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n\r\n                {/* === MATERIALES REGISTRADOS === */}\r\n                <h4 className=\"text-sm font-medium text-foreground mt-4\">\r\n                  Materiales Registrados\r\n                </h4>\r\n                <div className=\"text-sm\">\r\n  {(() => {\r\n    const reqForOrder = requisitions?.filter(\r\n      (req) => req.numeroOrdenTrabajo === order.ordenTrabajo\r\n    );\r\n\r\n    if (!reqForOrder || reqForOrder.length === 0) {\r\n      return (\r\n        <p className=\"text-muted-foreground text-sm\">\r\n          No hay materiales registrados para esta orden\r\n        </p>\r\n      );\r\n    }\r\n\r\n    return reqForOrder.map((req, reqIndex) => {\r\n      // Debug\r\n      console.log('Requisici贸n en tabla:', req);\r\n      console.log('Materiales inventario:', req.materiales);\r\n      console.log('Materiales manuales:', req.materialesManuales);\r\n      \r\n      // Normalizar materiales\r\n      const materialesInventario = req.materiales || req.items || [];\r\n      const materialesManuales = req.materialesManuales || req.manualItems || [];\r\n      \r\n      return (\r\n      <div key={reqIndex} className=\"mb-4 border border-border rounded-lg p-3 bg-card\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <p className=\"text-xs font-medium text-muted-foreground\">\r\n            Requisici贸n: {req.numeroOrdenTrabajo || req.requestNumber}\r\n          </p>\r\n          <span className={`text-[10px] px-2 py-0.5 rounded-full ${\r\n            req.estado === 'Aprobada' ? 'bg-green-100 text-green-700' :\r\n            req.estado === 'Pendiente' ? 'bg-yellow-100 text-yellow-700' :\r\n            'bg-red-100 text-red-700'\r\n          }`}>\r\n            {req.estado}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Materiales del Inventario */}\r\n        {materialesInventario.length > 0 && (\r\n          <div className=\"mb-3\">\r\n            <p className=\"text-xs font-semibold text-blue-700 mb-1 flex items-center\">\r\n              <Icon name=\"Package\" size={14} className=\"mr-1\" />\r\n              Del Inventario ({materialesInventario.length})\r\n            </p>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 ml-4\">\r\n              {materialesInventario.map((item, idx) => (\r\n                <div key={idx} className=\"flex items-start space-x-2 text-xs bg-blue-50 p-2 rounded border border-blue-200\">\r\n                  <span className=\"text-blue-600 mt-0.5\"></span>\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"font-medium text-foreground\">\r\n                      {item.nombreMaterial || item.nombre || item.name}\r\n                    </p>\r\n                    {(item.codigoArticulo || item.codigo) && (\r\n                      <p className=\"text-[10px] text-muted-foreground\">\r\n                        C贸digo: {item.codigoArticulo || item.codigo}\r\n                      </p>\r\n                    )}\r\n                    <p className=\"text-muted-foreground\">\r\n                      Cantidad: {item.cantidad || item.quantity} {item.unidad || item.unit}\r\n                    </p>\r\n                    {item.urgencia && item.urgencia !== 'Normal' && (\r\n                      <span className={`text-[10px] px-1.5 py-0.5 rounded ${\r\n                        item.urgencia === 'Urgente' || item.urgencia === 'Cr铆tica'\r\n                          ? 'bg-red-100 text-red-700'\r\n                          : 'bg-orange-100 text-orange-700'\r\n                      }`}>\r\n                        {item.urgencia}\r\n                      </span>\r\n                    )}\r\n                    {item.descripcionEspecificaciones && (\r\n                      <p className=\"text-[10px] text-muted-foreground mt-1 italic\">\r\n                        {item.descripcionEspecificaciones}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Materiales Manuales */}\r\n        {materialesManuales.length > 0 && (\r\n          <div>\r\n            <p className=\"text-xs font-semibold text-green-700 mb-1 flex items-center\">\r\n              <Icon name=\"Edit3\" size={14} className=\"mr-1\" />\r\n              Manuales ({materialesManuales.length})\r\n            </p>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 ml-4\">\r\n              {materialesManuales.map((item, idx) => (\r\n                <div key={idx} className=\"flex items-start space-x-2 text-xs bg-green-50 p-2 rounded border border-green-200\">\r\n                  <span className=\"text-green-600 mt-0.5\"></span>\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"font-medium text-foreground\">\r\n                      {item.nombreMaterial || item.nombre || item.name}\r\n                    </p>\r\n                    <p className=\"text-muted-foreground\">\r\n                      Cantidad: {item.cantidad || item.quantity} {item.unidad || item.unit}\r\n                    </p>\r\n                    {item.urgencia && item.urgencia !== 'Normal' && (\r\n                      <span className={`text-[10px] px-1.5 py-0.5 rounded ${\r\n                        item.urgencia === 'Urgente' || item.urgencia === 'Cr铆tica'\r\n                          ? 'bg-red-100 text-red-700'\r\n                          : 'bg-orange-100 text-orange-700'\r\n                      }`}>\r\n                        {item.urgencia}\r\n                      </span>\r\n                    )}\r\n                    {item.descripcionEspecificaciones && (\r\n                      <p className=\"text-[10px] text-muted-foreground mt-1 italic\">\r\n                        {item.descripcionEspecificaciones}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Si no hay materiales en esta requisici贸n */}\r\n        {materialesInventario.length === 0 && materialesManuales.length === 0 && (\r\n          <p className=\"text-xs text-muted-foreground ml-4\">\r\n            Esta requisici贸n no tiene materiales registrados\r\n          </p>\r\n        )}\r\n      </div>\r\n    );\r\n    });\r\n  })()}\r\n</div>\r\n\r\n\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  <strong>Requiere estudios m茅dicos actualizados:</strong>{\" \"}\r\n                  {order.requiereEstudiosMedicosActualizados ? \"S铆\" : \"No\"}\r\n                </p>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        )}\r\n      </React.Fragment>\r\n    ))\r\n  )}\r\n</tbody>\r\n\r\n        </table>\r\n      </div>\r\n\r\n      {/* Paginaci贸n */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n          <select\r\n            value={pageSize}\r\n            onChange={handleChangePageSize}\r\n            className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n          >\r\n            {PAGE_SIZE_OPTIONS.map((opt) => (\r\n              <option key={opt} value={opt}>{opt}</option>\r\n            ))}\r\n          </select>\r\n          <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n          <span className=\"text-xs text-muted-foreground ml-3\">\r\n            Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n          <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n          <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkOrderTable;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst FilterToolbar = ({ onFiltersChange, totalCount, filteredCount }) => {\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    status: '',\r\n    technician: '',\r\n    priority: '',\r\n    project: '',\r\n    dateRange: ''\r\n  });\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'En Progreso', label: 'En Progreso' },\r\n    { value: 'Completada', label: 'Completada' },\r\n    { value: 'En Pausa', label: 'En Pausa' },\r\n    { value: 'Cancelada', label: 'Cancelada' }\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: '', label: 'Todas las Prioridades' },\r\n    { value: 'Cr铆tica', label: 'Cr铆tica' },\r\n    { value: 'Alta', label: 'Alta' },\r\n    { value: 'Media', label: 'Media' },\r\n    { value: 'Baja', label: 'Baja' }\r\n  ];\r\n\r\n  const technicianOptions = [\r\n    { value: '', label: 'Todos los T茅cnicos' },\r\n    { value: 'Carlos Mendoza', label: 'Carlos Mendoza' },\r\n    { value: 'Ana Garc铆a', label: 'Ana Garc铆a' },\r\n    { value: 'Roberto Silva', label: 'Roberto Silva' },\r\n    { value: 'Mar铆a L贸pez', label: 'Mar铆a L贸pez' },\r\n    { value: 'Diego Ram铆rez', label: 'Diego Ram铆rez' }\r\n  ];\r\n\r\n  const projectOptions = [\r\n  { value: \"\", label: \"Todos los Proyectos\" },\r\n  { value: \"Instalaci贸n\", label: \"Instalaci贸n\" },\r\n  { value: \"Mantenimiento Preventivo\", label: \"Mantenimiento Preventivo\" },\r\n  { value: \"Mantenimiento Correctivo\", label: \"Mantenimiento Correctivo\" },\r\n  { value: \"Inspecci贸n\", label: \"Inspecci贸n\" },\r\n];\r\n\r\n  const dateRangeOptions = [\r\n    { value: '', label: 'Todas las Fechas' },\r\n    { value: 'today', label: 'Hoy' },\r\n    { value: 'week', label: 'Esta Semana' },\r\n    { value: 'month', label: 'Este Mes' },\r\n    { value: 'overdue', label: 'Vencidas' }\r\n  ];\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    const newFilters = { ...filters, [key]: value };\r\n    setFilters(newFilters);\r\n    onFiltersChange(newFilters);\r\n  };\r\n\r\n  const clearAllFilters = () => {\r\n    const clearedFilters = {\r\n      search: '',\r\n      status: '',\r\n      technician: '',\r\n      priority: '',\r\n      project: '',\r\n      dateRange: ''\r\n    };\r\n    setFilters(clearedFilters);\r\n    onFiltersChange(clearedFilters);\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some((value) => value !== \"\");\r\n\r\n  // Generar mensaje din谩mico de \"sin resultados\"\r\n  const getNoResultsMessage = () => {\r\n    if (filteredCount > 0) return null;\r\n\r\n    if (filters.search)\r\n      return `No se encontraron resultados para \"${filters.search}\"`;\r\n    if (filters.status)\r\n      return `No se encontraron 贸rdenes con estado \"${filters.status}\"`;\r\n    if (filters.priority)\r\n      return `No se encontraron 贸rdenes con prioridad \"${filters.priority}\"`;\r\n    if (filters.technician)\r\n      return `No se encontraron 贸rdenes asignadas a \"${filters.technician}\"`;\r\n    if (filters.project)\r\n      return `No se encontraron 贸rdenes del proyecto \"${filters.project}\"`;\r\n    if (filters.dateRange)\r\n      return `No se encontraron 贸rdenes en el rango de fechas seleccionado`;\r\n\r\n    return \"No hay 贸rdenes registradas actualmente.\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-4 mb-6\">\r\n      {/* Encabezado */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">rdenes de Trabajo</h3>\r\n          <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\r\n  {totalCount === 0 ? (\r\n    <span>No hay 贸rdenes registradas</span>\r\n  ) : filteredCount === 0 ? (\r\n    <span>No se encontraron resultados</span>\r\n  ) : filteredCount === totalCount ? (\r\n    <span>Mostrando todas las {totalCount} 贸rdenes</span>\r\n  ) : (\r\n    <span>\r\n      Mostrando {filteredCount} de {totalCount} 贸rdenes\r\n    </span>\r\n  )}\r\n  {hasActiveFilters && (\r\n    <span className=\"px-2 py-1 bg-primary/10 text-primary rounded-full text-xs\">\r\n      Filtros activos\r\n    </span>\r\n  )}\r\n</div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtros */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4\">\r\n        {/* Buscar */}\r\n        <div className=\"lg:col-span-2\">\r\n          <div className=\"relative\">\r\n            <Input\r\n              type=\"search\"\r\n              placeholder=\"Buscar por n煤mero de orden, proyecto...\"\r\n              value={filters?.search}\r\n              onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n              className=\"pl-10\"\r\n            />\r\n            <Icon \r\n              name=\"Search\" \r\n              size={16} \r\n              className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Estado */}\r\n        <Select\r\n          placeholder=\"Estado\"\r\n          options={statusOptions}\r\n          value={filters?.status}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n        />\r\n\r\n        {/* Prioridad */}\r\n        <Select\r\n          placeholder=\"Prioridad\"\r\n          options={priorityOptions}\r\n          value={filters?.priority}\r\n          onChange={(value) => handleFilterChange('priority', value)}\r\n        />\r\n\r\n        {/* T茅cnico */}\r\n        <Select\r\n          placeholder=\"T茅cnico\"\r\n          options={technicianOptions}\r\n          value={filters?.technician}\r\n          onChange={(value) => handleFilterChange('technician', value)}\r\n          searchable\r\n        />\r\n\r\n        {/* Proyecto */}\r\n        <Select\r\n          placeholder=\"Proyecto\"\r\n          options={projectOptions}\r\n          value={filters?.project}\r\n          onChange={(value) => handleFilterChange('project', value)}\r\n          searchable\r\n        />\r\n      </div>\r\n\r\n      {/* Rango de fechas y bot贸n limpiar */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mt-4 pt-4 border-t border-border\">\r\n        <Select\r\n          placeholder=\"Rango de fechas\"\r\n          options={dateRangeOptions}\r\n          value={filters?.dateRange}\r\n          onChange={(value) => handleFilterChange('dateRange', value)}\r\n          className=\"sm:w-48\"\r\n        />\r\n\r\n        {hasActiveFilters && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={clearAllFilters}\r\n            iconName=\"X\"\r\n            iconSize={16}\r\n          >\r\n            Limpiar Filtros\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Mensaje din谩mico cuando no hay resultados */}\r\n      {filteredCount === 0 && (\r\n  <div className=\"mt-4 flex items-center text-sm italic\">\r\n    <Icon name=\"SearchX\" size={16} className=\"mr-2 text-black\" />\r\n    <span className=\"font-bold text-black\">{getNoResultsMessage()}</span>\r\n  </div>\r\n)}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterToolbar;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport useRequisi from '../../../hooks/useRequisi';\r\nimport useInventario from '../../../hooks/useInventory';\r\nimport RequisitionModal from \"../components/RequisitionModal\";\r\nimport { useNotifications } from '../../../context/NotificationContext';\r\n\r\nconst InventoryPanel = ({ onCreatePurchaseOrder, onRequestMaterial, onCreateRequisition }) => {\r\n  const [activeTab, setActiveTab] = useState('inventory');\r\n  const { showConfirm, showHttpError, showInfo, showOperationSuccess } = useNotifications();\r\n  const { requisitions, loading: loadingRequis, getRequisitions, updateRequisition, deleteRequisition } = useRequisi();\r\n  const { inventario, getInventario, loading: loadingInventario } = useInventario();\r\n  const [localRequisitions, setLocalRequisitions] = useState([]);\r\n\r\n  const displayedRequisitions = externalRequisitions?.length > 0 ? externalRequisitions : localRequisitions;\r\n\r\n  useEffect(() => { getInventario(); }, []);\r\n  useEffect(() => {\r\n    const fetchRequisitions = async () => {\r\n      const data = await getRequisitions();\r\n      setLocalRequisitions(data);\r\n    };\r\n    fetchRequisitions();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (externalRequisitions?.length > 0) setLocalRequisitions(externalRequisitions);\r\n  }, [externalRequisitions]);\r\n\r\n  const getStockStatus = (currentStock, reorderPoint) => {\r\n    if (currentStock <= 0) return 'Cr铆tico';\r\n    if (currentStock <= reorderPoint) return 'Bajo Stock';\r\n    return 'En Stock';\r\n  };\r\n\r\n  const getStockStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'Cr铆tico': return 'bg-red-100 text-red-800';\r\n      case 'Bajo Stock': return 'bg-orange-100 text-orange-800';\r\n      case 'En Stock': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getRequestStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'Pendiente': return 'bg-yellow-100 text-yellow-800';\r\n      case 'Aprobada': return 'bg-green-100 text-green-800';\r\n      case 'Rechazada': return 'bg-red-100 text-red-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const handleApprove = async (request) => {\r\n    try {\r\n      const updated = await updateRequisition(request.id, { estado: 'Aprobada' });\r\n      if (!updated) return;\r\n      const updatedList = localRequisitions.map((r) => r.id === request.id ? { ...r, estado: 'Aprobada' } : r);\r\n      setLocalRequisitions(updatedList);\r\n      onRequisitionUpdated?.(updatedList);\r\n      showOperationSuccess();\r\n    } catch (error) {\r\n      showHttpError(error, \"Error al aprobar la requisici贸n\");\r\n    }\r\n  };\r\n\r\n  const handleReject = async (request) => {\r\n    try {\r\n      const updated = await updateRequisition(request.id, { estado: 'Rechazada' });\r\n      if (!updated) return;\r\n      const updatedList = localRequisitions.map((r) => r.id === request.id ? { ...r, estado: 'Rechazada' } : r);\r\n      setLocalRequisitions(updatedList);\r\n      onRequisitionUpdated?.(updatedList);\r\n      showOperationSuccess();\r\n    } catch (error) {\r\n      showHttpError(error, \"Error al rechazar la requisici贸n\");\r\n    }\r\n  };\r\n\r\n  const handleDelete = (request) => {\r\n    showConfirm(`驴Seguro que deseas eliminar la requisici贸n \"${request.numeroOrdenTrabajo}\"?`, {\r\n      onConfirm: async () => {\r\n        try {\r\n          const success = await deleteRequisition(request.id);\r\n          if (!success) return;\r\n          const updatedList = localRequisitions.filter((r) => r.id !== request.id);\r\n          setLocalRequisitions(updatedList);\r\n          onRequisitionUpdated?.(updatedList);\r\n        } catch (error) {\r\n          showHttpError(error, \"Error al eliminar la requisici贸n\");\r\n        }\r\n      },\r\n      onCancel: () => showInfo(\"Eliminaci贸n cancelada\"),\r\n    });\r\n  };\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedRequisition, setSelectedRequisition] = useState(null);\r\n\r\n  const handleEditRequisition = (req) => {\r\n  const mappedReq = {\r\n    id: req.id,\r\n    orderNumber: req.numeroOrdenTrabajo || \"\",\r\n    projectName: req.nombreProyecto || \"\",\r\n    requestedBy: req.solicitadoPor || \"\",\r\n    requestDate: req.fechaSolicitud\r\n      ? req.fechaSolicitud.split(\"/\").reverse().join(\"-\")\r\n      : new Date().toISOString().split(\"T\")[0],\r\n    status: req.estado || \"Pendiente\",\r\n    priority: req.prioridad || \"Media\",\r\n    description: req.descripcionSolicitud || \"\",\r\n\r\n    //  materiales de inventario\r\n    items: req.materiales?.map((m) => ({\r\n      id: Date.now() + Math.random(),\r\n      idArticulo: m.id || m.idArticulo || \"\", // mantiene referencia al inventario\r\n      codigoArticulo: m.codigoArticulo || \"\",\r\n      name: m.nombreMaterial || m.nombre || \"\", // admite ambos nombres\r\n      quantity: m.cantidad,\r\n      unit: m.unidad?.toLowerCase() || \"unidades\",\r\n      urgency: m.urgencia || \"Normal\",\r\n      description: m.descripcionEspecificaciones || \"\",\r\n      type: \"inventario\",\r\n    })) || [],\r\n\r\n    //  materiales manuales\r\n    manualItems: req.materialesManuales?.map((m) => ({\r\n      id: Date.now() + Math.random(),\r\n      name: m.nombreMaterial || m.nombre || \"\",\r\n      quantity: m.cantidad || 1,\r\n      unit: m.unidad || \"pieza\",\r\n      urgency: m.urgencia || \"Normal\",\r\n      description: m.descripcionEspecificaciones || \"\",\r\n      type: \"manual\",\r\n    })) || [],\r\n\r\n    justification: req.justificacionSolicitud || \"\",\r\n    notes: req.notasAdicionales || \"\",\r\n  };\r\n\r\n  setSelectedRequisition(mappedReq);\r\n  setIsModalOpen(true);\r\n};\r\n\r\n\r\n  const handleSaveRequisition = (updatedReq) => {\r\n    const updatedList = localRequisitions.map((r) => (r.id === updatedReq.id ? updatedReq : r));\r\n    setLocalRequisitions(updatedList);\r\n    onRequisitionUpdated?.(updatedList);\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n      <div className=\"border-b border-border\">\r\n        <div className=\"flex\">\r\n          <button\r\n            onClick={() => setActiveTab('inventory')}\r\n            className={`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${\r\n              activeTab === 'inventory' ? 'border-primary text-primary bg-primary/5' : 'border-transparent text-muted-foreground hover:text-foreground'\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"Package\" size={16} />\r\n              <span>Inventario</span>\r\n            </div>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setActiveTab('requests')}\r\n            className={`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${\r\n              activeTab === 'requests' ? 'border-primary text-primary bg-primary/5' : 'border-transparent text-muted-foreground hover:text-foreground'\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"ClipboardList\" size={16} />\r\n              <span>Requisiciones</span>\r\n            </div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contenido */}\r\n      <div className=\"p-4 h-[calc(100%-48px)]\">\r\n        {/* INVENTARIO */}\r\n        {activeTab === 'inventory' && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-foreground\">Estado del Inventario</h3>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"RefreshCw\" iconSize={16} onClick={getInventario}>\r\n                Actualizar\r\n              </Button>\r\n            </div>\r\n\r\n            {loadingInventario ? (\r\n              <p className=\"text-sm text-muted-foreground\">Cargando inventario...</p>\r\n            ) : inventario.length === 0 ? (\r\n              <p className=\"text-sm text-muted-foreground\">No hay art铆culos en el inventario.</p>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {inventario.map((item) => {\r\n                  const nombre = item.descripcion || item.description || item.codigoArticulo || 'Art铆culo sin nombre';\r\n                  const stock = item.stockActual ?? 0;\r\n                  const puntoReorden = item.puntoReorden ?? 0;\r\n                  const unidad = item.unidad ?? '';\r\n                  const ubicacion = item.ubicacion ?? 'Sin ubicaci贸n';\r\n                  const estado = getStockStatus(stock, puntoReorden);\r\n\r\n                  return (\r\n                    <div key={item.id} className=\"border border-border rounded-lg p-4\">\r\n                      <div className=\"flex items-start justify-between mb-3\">\r\n                        <div className=\"flex-1\">\r\n                          <h4 className=\"text-sm font-medium text-foreground\">{nombre}</h4>\r\n                          <p className=\"text-xs text-muted-foreground\">SKU: {item.codigoArticulo || 'N/A'}</p>\r\n                        </div>\r\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStockStatusColor(estado)}`}>{estado}</span>\r\n                      </div>\r\n                      <div className=\"grid grid-cols-2 gap-4 mb-3\">\r\n                        <div>\r\n                          <p className=\"text-xs text-muted-foreground\">Stock Actual</p>\r\n                          <p className=\"text-sm font-medium text-foreground\">{stock} {unidad}</p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-xs text-muted-foreground\">Punto de Reorden</p>\r\n                          <p className=\"text-sm font-medium text-foreground\">{puntoReorden} {unidad}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          <Icon name=\"MapPin\" size={12} className=\"inline mr-1\" />\r\n                          {ubicacion}\r\n                        </div>\r\n                        {(estado === 'Cr铆tico' || estado === 'Bajo Stock') && (\r\n                          <Button variant=\"outline\" size=\"sm\" onClick={() => onCreatePurchaseOrder(item)} iconName=\"ShoppingCart\" iconSize={14}>Ordenar</Button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* REQUISICIONES */}\r\n        {activeTab === 'requests' && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-foreground\">Requisiciones de Material</h3>\r\n              <Button variant=\"default\" size=\"sm\" iconName=\"Plus\" iconSize={16} onClick={onCreateRequisition}>\r\n                Nueva Requisici贸n\r\n              </Button>\r\n            </div>\r\n\r\n            {loadingRequis ? (\r\n              <p>Cargando requisiciones...</p>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {displayedRequisitions.length === 0 ? (\r\n                  <p className=\"text-sm text-muted-foreground\">No hay requisiciones disponibles.</p>\r\n                ) : (\r\n                  displayedRequisitions.map((request) => {\r\n                    // Debug - ver estructura de datos\r\n                    console.log('Requisici贸n completa:', request);\r\n                    console.log('Materiales inventario:', request.materiales);\r\n                    console.log('Materiales manuales:', request.materialesManuales);\r\n                    \r\n                    // Normalizar materiales de inventario\r\n                    const materialesInventario = request.materiales || request.items || [];\r\n                    \r\n                    // Normalizar materiales manuales\r\n                    const materialesManuales = request.materialesManuales || request.manualItems || [];\r\n                    \r\n                    const allMaterials = [\r\n                      ...materialesInventario,\r\n                      ...materialesManuales\r\n                    ];\r\n\r\n                    return (\r\n                      <div key={request.id} className=\"border border-border rounded-lg p-4 shadow-sm transition-all duration-300 hover:shadow-md\">\r\n                        <div className=\"flex items-start justify-between mb-3\">\r\n                          <div className=\"flex-1\">\r\n                            <h4 className=\"text-sm font-medium text-foreground\">{request.numeroOrdenTrabajo}</h4>\r\n                            <p className=\"text-xs text-muted-foreground\">{request.nombreProyecto}</p>\r\n                          </div>\r\n                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getRequestStatusColor(request.estado)}`}>{request.estado}</span>\r\n                        </div>\r\n\r\n                        <div className=\"mb-3\">\r\n                          <p className=\"text-xs text-muted-foreground mb-2\">Materiales Solicitados:</p>\r\n                          {allMaterials.length > 0 ? (\r\n                            <div className=\"space-y-2\">\r\n                              {/* Materiales del Inventario */}\r\n                              {materialesInventario.length > 0 && (\r\n                                <div>\r\n                                  <p className=\"text-xs font-medium text-blue-700 mb-1 flex items-center\">\r\n                                    <Icon name=\"Package\" size={12} className=\"mr-1\" />\r\n                                    Del Inventario ({materialesInventario.length})\r\n                                  </p>\r\n                                  <ul className=\"space-y-1 ml-4\">\r\n                                    {materialesInventario.map((item, index) => (\r\n                                      <li key={index} className=\"text-xs text-foreground flex items-start space-x-2\">\r\n                                        <span className=\"text-blue-600 mt-0.5\"></span>\r\n                                        <span>\r\n                                          <span className=\"font-medium\">{item.nombreMaterial || item.nombre || item.name}</span>\r\n                                          {item.codigoArticulo && (\r\n                                            <span className=\"text-muted-foreground text-[10px]\"> ({item.codigoArticulo})</span>\r\n                                          )}\r\n                                          <span className=\"text-muted-foreground\"> - {item.cantidad || item.quantity} {item.unidad || item.unit}</span>\r\n                                          {item.urgencia && item.urgencia !== 'Normal' && (\r\n                                            <span className={`ml-1 text-[10px] px-1 py-0.5 rounded ${\r\n                                              item.urgencia === 'Urgente' || item.urgencia === 'Cr铆tica' \r\n                                                ? 'bg-red-100 text-red-700' \r\n                                                : 'bg-orange-100 text-orange-700'\r\n                                            }`}>\r\n                                              {item.urgencia}\r\n                                            </span>\r\n                                          )}\r\n                                        </span>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              )}\r\n                              \r\n                              {/* Materiales Manuales */}\r\n                              {materialesManuales.length > 0 && (\r\n                                <div>\r\n                                  <p className=\"text-xs font-medium text-green-700 mb-1 flex items-center\">\r\n                                    <Icon name=\"Edit3\" size={12} className=\"mr-1\" />\r\n                                    Manuales ({materialesManuales.length})\r\n                                  </p>\r\n                                  <ul className=\"space-y-1 ml-4\">\r\n                                    {materialesManuales.map((item, index) => (\r\n                                      <li key={index} className=\"text-xs text-foreground flex items-start space-x-2\">\r\n                                        <span className=\"text-green-600 mt-0.5\"></span>\r\n                                        <span>\r\n                                          <span className=\"font-medium\">{item.nombreMaterial || item.nombre || item.name}</span>\r\n                                          <span className=\"text-muted-foreground\"> - {item.cantidad || item.quantity} {item.unidad || item.unit}</span>\r\n                                          {item.urgencia && item.urgencia !== 'Normal' && (\r\n                                            <span className={`ml-1 text-[10px] px-1 py-0.5 rounded ${\r\n                                              item.urgencia === 'Urgente' || item.urgencia === 'Cr铆tica' \r\n                                                ? 'bg-red-100 text-red-700' \r\n                                                : 'bg-orange-100 text-orange-700'\r\n                                            }`}>\r\n                                              {item.urgencia}\r\n                                            </span>\r\n                                          )}\r\n                                        </span>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          ) : (\r\n                            <p className=\"text-xs text-muted-foreground\">No se han agregado materiales a煤n.</p>\r\n                          )}\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"text-xs text-muted-foreground\">\r\n                            <Icon name=\"User\" size={12} className=\"inline mr-1\" />\r\n                            {request.solicitadoPor}  {request.fechaSolicitud}\r\n                          </div>\r\n\r\n                          <div className=\"flex flex-col items-center gap-2 mt-2\">\r\n                            <div className=\"flex items-center justify-center gap-2\">\r\n                              <Button variant=\"outline\" size=\"sm\" iconName=\"Edit\" iconSize={16} onClick={() => handleEditRequisition(request)} className=\"p-2 border-gray-300 hover:bg-gray-100\" title=\"Editar\" />\r\n                              <Button variant=\"outline\" size=\"sm\" iconName=\"Trash2\" iconSize={16} onClick={() => handleDelete(request)} className=\"p-2 text-red-600 border-gray-300 hover:bg-red-50\" title=\"Eliminar\" />\r\n                            </div>\r\n\r\n                            {request.estado === \"Pendiente\" && (\r\n                              <div className=\"flex justify-center gap-2 mt-1\">\r\n                                <Button variant=\"outline\" size=\"sm\" iconName=\"X\" iconSize={14} onClick={() => handleReject(request)} className=\"min-w-[100px] text-gray-700 border-gray-400 hover:bg-gray-100\">Rechazar</Button>\r\n                                <Button variant=\"default\" size=\"sm\" iconName=\"Check\" iconSize={14} onClick={() => handleApprove(request)} className=\"min-w-[100px]\">Aprobar</Button>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      <RequisitionModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        requisition={selectedRequisition}\r\n        onSave={handleSaveRequisition}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryPanel;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst StatsCards = ({ stats }) => {\r\n  const cards = [\r\n    {\r\n      title: 'rdenes Activas',\r\n      value: stats?.activeOrders,\r\n      change: '+12%',\r\n      changeType: 'positive',\r\n      icon: 'ClipboardList',\r\n      color: 'bg-blue-500'\r\n    },\r\n    {\r\n      title: 'Pendientes',\r\n      value: stats?.pendingOrders,\r\n      change: '+5%',\r\n      changeType: 'positive',\r\n      icon: 'Clock',\r\n      color: 'bg-yellow-500'\r\n    },\r\n    {\r\n      title: 'En Progreso',\r\n      value: stats?.inProgressOrders,\r\n      change: '+8%',\r\n      changeType: 'positive',\r\n      icon: 'Play',\r\n      color: 'bg-green-500'\r\n    },\r\n    {\r\n      title: 'Completadas Hoy',\r\n      value: stats?.completedToday,\r\n      change: '+15%',\r\n      changeType: 'positive',\r\n      icon: 'CheckCircle',\r\n      color: 'bg-emerald-500'\r\n    },\r\n    {\r\n      title: 'T茅cnicos Activos',\r\n      value: stats?.activeTechnicians,\r\n      change: '0%',\r\n      changeType: 'neutral',\r\n      icon: 'Users',\r\n      color: 'bg-purple-500'\r\n    },\r\n    {\r\n      title: 'Materiales Cr铆ticos',\r\n      value: stats?.criticalMaterials,\r\n      change: '-3%',\r\n      changeType: 'negative',\r\n      icon: 'AlertTriangle',\r\n      color: 'bg-red-500'\r\n    }\r\n  ];\r\n\r\n  const getChangeColor = (type) => {\r\n    switch (type) {\r\n      case 'positive': return 'text-green-600';\r\n      case 'negative': return 'text-red-600';\r\n      default: return 'text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\">\r\n      {cards?.map((card, index) => (\r\n        <div key={index} className=\"bg-card border border-border rounded-lg p-4 hover:shadow-md transition-shadow\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div className={`w-10 h-10 ${card?.color} rounded-lg flex items-center justify-center`}>\r\n              <Icon name={card?.icon} size={20} color=\"white\" />\r\n            </div>\r\n            <span className={`text-sm font-medium ${getChangeColor(card?.changeType)}`}>\r\n              {card?.change}\r\n            </span>\r\n          </div>\r\n          \r\n          <div>\r\n            <p className=\"text-2xl font-bold text-foreground mb-1\">{card?.value}</p>\r\n            <p className=\"text-sm text-muted-foreground\">{card?.title}</p>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StatsCards;","import React, { useState, useEffect } from 'react';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport Button from '../../components/ui/Button';\r\nimport WorkOrderTable from './components/WorkOrderTable';\r\nimport FilterToolbar from './components/FilterToolbar';\r\nimport InventoryPanel from './components/InventoryPanel';\r\nimport WorkOrderModal from './components/WorkOrderModal';\r\nimport RequisitionModal from './components/RequisitionModal';\r\nimport StatsCards from './components/StatsCards';\r\nimport useOperac from '../../hooks/useOperac';\r\nimport useRequisi from '../../hooks/useRequisi';\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\n\r\nconst WorkOrderProcessing = () => {\r\n  const { oportunities, loading, error, getOportunities } = useOperac();\r\n  const { requisitions, loading: loadingRequisitions, getRequisitions, updateRequisition, createRequisition, deleteRequisition } = useRequisi();\r\n\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [workOrders, setWorkOrders] = useState([]);\r\n  const [filteredOrders, setFilteredOrders] = useState([]);\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [stats, setStats] = useState({});\r\n  const [isRequisitionModalOpen, setIsRequisitionModalOpen] = useState(false);\r\n  const [selectedRequisition, setSelectedRequisition] = useState(null);\r\n\r\n  const handleSidebarToggle = () => {\r\n    setSidebarCollapsed(!sidebarCollapsed);\r\n  };\r\n\r\n  const handleMobileMenuToggle = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n  };\r\n\r\n  // Mock data for work orders\r\n  const mockWorkOrders = [\r\n    {\r\n      id: 1,\r\n      orderNumber: 'OT-2024-015',\r\n      projectName: 'Torre Corporativa ABC',\r\n      clientName: 'Corporaci贸n ABC S.A.',\r\n      type: 'Instalaci贸n HVAC',\r\n      priority: 'Alta',\r\n      status: 'En Progreso',\r\n      assignedTechnician: 'Carlos Mendoza',\r\n      technicianRole: 'T茅cnico Senior',\r\n      dueDate: '05/10/2024',\r\n      progress: 65,\r\n      description: `Instalaci贸n completa del sistema HVAC en torre corporativa de 15 pisos.\\nIncluye unidades manejadoras de aire, ductos, y sistema de control automatizado.\\nSe requiere coordinaci贸n con otros contratistas para acceso a 谩reas t茅cnicas.`,\r\n      requiredMaterials: [\r\n        { name: 'Compresor Rotativo 5HP', quantity: '2 unidades' },\r\n        { name: 'Filtro de Aire HEPA', quantity: '8 unidades' },\r\n        { name: 'Ductos Galvanizados', quantity: '150 metros' }\r\n      ],\r\n      attachments: [\r\n        { name: 'Planos_HVAC_ABC.pdf', type: 'pdf' },\r\n        { name: 'Especificaciones_T茅cnicas.docx', type: 'doc' }\r\n      ],\r\n      requiredPPE: ['Casco de Seguridad', 'Arn茅s de Seguridad', 'Calzado de Seguridad'],\r\n      medicalRequirements: true,\r\n      notes: 'Trabajo en altura requiere certificaci贸n vigente'\r\n    },\r\n    {\r\n      id: 2,\r\n      orderNumber: 'OT-2024-016',\r\n      projectName: 'Centro Comercial Plaza Norte',\r\n      clientName: 'Inmobiliaria Plaza Norte',\r\n      type: 'Mantenimiento Preventivo',\r\n      priority: 'Media',\r\n      status: 'Pendiente',\r\n      assignedTechnician: 'Ana Garc铆a',\r\n      technicianRole: 'Especialista HVAC',\r\n      dueDate: '08/10/2024',\r\n      progress: 0,\r\n      description: `Mantenimiento preventivo trimestral del sistema HVAC del centro comercial.\\nIncluye limpieza de filtros, revisi贸n de compresores y calibraci贸n de termostatos.\\nProgramado durante horarios de menor afluencia de p煤blico.`,\r\n      requiredMaterials: [\r\n        { name: 'Filtros de Aire', quantity: '20 unidades' },\r\n        { name: 'Refrigerante R-410A', quantity: '2 cilindros' },\r\n        { name: 'Aceite para Compresor', quantity: '5 litros' }\r\n      ],\r\n      attachments: [\r\n        { name: 'Checklist_Mantenimiento.pdf', type: 'pdf' }\r\n      ],\r\n      requiredPPE: ['Casco de Seguridad', 'Gafas de Protecci贸n', 'Guantes de Trabajo'],\r\n      medicalRequirements: false,\r\n      notes: 'Coordinar con administraci贸n del centro comercial'\r\n    },\r\n    {\r\n      id: 3,\r\n      orderNumber: 'OT-2024-017',\r\n      projectName: 'Hospital General San Jos茅',\r\n      clientName: 'Hospital General San Jos茅',\r\n      type: 'Reparaci贸n de Emergencia',\r\n      priority: 'Cr铆tica',\r\n      status: 'En Progreso',\r\n      assignedTechnician: 'Roberto Silva',\r\n      technicianRole: 'T茅cnico Junior',\r\n      dueDate: '02/10/2024',\r\n      progress: 85,\r\n      description: `Reparaci贸n urgente del sistema de climatizaci贸n en 谩rea de cuidados intensivos.\\nFalla en compresor principal requiere reemplazo inmediato.\\nTrabajo 24/7 hasta completar la reparaci贸n cr铆tica.`,\r\n      requiredMaterials: [\r\n        { name: 'Compresor Scroll 10HP', quantity: '1 unidad' },\r\n        { name: 'Kit de Conexiones', quantity: '1 set' },\r\n        { name: 'Refrigerante R-134A', quantity: '3 cilindros' }\r\n      ],\r\n      attachments: [\r\n        { name: 'Reporte_Falla_UCI.pdf', type: 'pdf' },\r\n        { name: 'Foto_Compresor_Da帽ado.jpg', type: 'image' }\r\n      ],\r\n      requiredPPE: ['Casco de Seguridad', 'Respirador N95', 'Guantes de Trabajo', 'Calzado de Seguridad'],\r\n      medicalRequirements: true,\r\n      notes: 'Ambiente hospitalario - seguir protocolos de bioseguridad'\r\n    },\r\n    {\r\n      id: 4,\r\n      orderNumber: 'OT-2024-018',\r\n      projectName: 'Edificio Residencial Vista Mar',\r\n      clientName: 'Constructora Vista Mar',\r\n      type: 'Instalaci贸n Nueva',\r\n      priority: 'Media',\r\n      status: 'Completada',\r\n      assignedTechnician: 'Mar铆a L贸pez',\r\n      technicianRole: 'Supervisora',\r\n      dueDate: '28/09/2024',\r\n      progress: 100,\r\n      description: `Instalaci贸n de sistema HVAC en edificio residencial de 8 pisos.\\nSistema VRF con unidades individuales por apartamento.\\nIncluye programaci贸n de controles remotos y capacitaci贸n a usuarios.`,\r\n      requiredMaterials: [\r\n        { name: 'Unidades VRF', quantity: '24 unidades' },\r\n        { name: 'Controles Remotos', quantity: '24 unidades' },\r\n        { name: 'Tuber铆a de Cobre', quantity: '200 metros' }\r\n      ],\r\n      attachments: [\r\n        { name: 'Manual_Usuario_VRF.pdf', type: 'pdf' },\r\n        { name: 'Certificado_Instalaci贸n.pdf', type: 'pdf' }\r\n      ],\r\n      requiredPPE: ['Casco de Seguridad', 'Calzado de Seguridad', 'Guantes de Trabajo'],\r\n      medicalRequirements: false,\r\n      notes: 'Proyecto completado satisfactoriamente - cliente aprob贸 entrega'\r\n    },\r\n    {\r\n      id: 5,\r\n      orderNumber: 'OT-2024-019',\r\n      projectName: 'Oficinas Corporativas TechSoft',\r\n      clientName: 'TechSoft Solutions',\r\n      type: 'Actualizaci贸n de Sistema',\r\n      priority: 'Baja',\r\n      status: 'En Pausa',\r\n      assignedTechnician: 'Diego Ram铆rez',\r\n      technicianRole: 'T茅cnico Senior',\r\n      dueDate: '15/10/2024',\r\n      progress: 30,\r\n      description: `Actualizaci贸n del sistema de control HVAC a tecnolog铆a IoT.\\nInstalaci贸n de sensores inteligentes y sistema de monitoreo remoto.\\nProyecto pausado por disponibilidad de equipos especializados.`,\r\n      requiredMaterials: [\r\n        { name: 'Sensores IoT', quantity: '15 unidades' },\r\n        { name: 'Gateway de Comunicaci贸n', quantity: '1 unidad' },\r\n        { name: 'Cableado de Red', quantity: '100 metros' }\r\n      ],\r\n      attachments: [\r\n        { name: 'Propuesta_IoT_TechSoft.pdf', type: 'pdf' }\r\n      ],\r\n      requiredPPE: ['Casco de Seguridad', 'Gafas de Protecci贸n'],\r\n      medicalRequirements: false,\r\n      notes: 'Esperando llegada de sensores IoT - fecha estimada 10/10/2024'\r\n    }\r\n  ];\r\n\r\n  const mockStats = {\r\n    activeOrders: 24,\r\n    pendingOrders: 8,\r\n    inProgressOrders: 12,\r\n    completedToday: 4,\r\n    activeTechnicians: 15,\r\n    criticalMaterials: 3\r\n  };\r\n\r\n  useEffect(() => {\r\n    setWorkOrders(mockWorkOrders);\r\n    setFilteredOrders(mockWorkOrders);\r\n    setStats(mockStats);\r\n  }, []);\r\n\r\n  const handleFiltersChange = (filters) => {\r\n  let filtered = [...(localOrders || [])];\r\n\r\n  // B煤squeda general\r\n  if (filters?.search) {\r\n    const search = filters.search.toLowerCase();\r\n    filtered = filtered.filter(order =>\r\n      order?.ordenTrabajo?.toLowerCase()?.includes(search) ||\r\n      order?.cliente?.nombre?.toLowerCase()?.includes(search) ||\r\n      order?.cliente?.empresa?.toLowerCase()?.includes(search) ||\r\n      order?.tipo?.toLowerCase()?.includes(search) ||\r\n      order?.tecnicoAsignado?.nombre?.toLowerCase()?.includes(search) ||\r\n      order?.notasAdicionales?.toLowerCase()?.includes(search)\r\n    );\r\n  }\r\n\r\n  //  Estado\r\n  if (filters?.status)\r\n    filtered = filtered.filter(order => order?.estado === filters.status);\r\n\r\n  // Prioridad\r\n  if (filters?.priority)\r\n    filtered = filtered.filter(order => order?.prioridad === filters.priority);\r\n\r\n  // T茅cnico\r\n  if (filters?.technician)\r\n    filtered = filtered.filter(order =>\r\n      order?.tecnicoAsignado?.nombre === filters.technician\r\n    );\r\n\r\n  // Proyecto (por tipo)\r\n  if (filters?.project)\r\n    filtered = filtered.filter(order => order?.tipo === filters.project);\r\n\r\n  // Rango de fechas\r\n  if (filters?.dateRange) {\r\n    const today = new Date();\r\n    filtered = filtered.filter(order => {\r\n      const dueDate = new Date(order?.fechaLimite);\r\n      if (isNaN(dueDate)) return false;\r\n      switch (filters.dateRange) {\r\n        case 'today':\r\n          return dueDate.toDateString() === today.toDateString();\r\n        case 'week': {\r\n          const startOfWeek = new Date(today);\r\n          startOfWeek.setDate(today.getDate() - today.getDay());\r\n          const endOfWeek = new Date(startOfWeek);\r\n          endOfWeek.setDate(startOfWeek.getDate() + 6);\r\n          return dueDate >= startOfWeek && dueDate <= endOfWeek;\r\n        }\r\n        case 'month':\r\n          return (\r\n            dueDate.getMonth() === today.getMonth() &&\r\n            dueDate.getFullYear() === today.getFullYear()\r\n          );\r\n        case 'overdue':\r\n          return dueDate < today;\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  setFilteredOrders(filtered);\r\n};\r\n\r\n  const handleStatusUpdate = (order, newStatus) => {\r\n    const updatedOrders = workOrders?.map(wo => \r\n      wo?.id === order?.id ? { ...wo, status: newStatus } : wo\r\n    );\r\n    setWorkOrders(updatedOrders);\r\n    setFilteredOrders(updatedOrders);\r\n  };\r\n\r\n  // CRUD de 贸rdenes\r\n  const handleSaveOrder = async (data) => {\r\n  //  Si es eliminaci贸n\r\n  if (data?.type === \"delete\") {\r\n    setLocalOrders(prev => prev.filter(o => o.id !== data.id));\r\n    setFilteredOrders(prev => prev.filter(o => o.id !== data.id));\r\n    return;\r\n  }\r\n\r\n  //Si es creaci贸n o edici贸n\r\n  let newOrder = { ...data };\r\n\r\n  if (!newOrder?.id) {\r\n    newOrder.id = Date.now();\r\n    newOrder.estado = 'Pendiente';\r\n    newOrder.fechaCreacion = new Date().toISOString();\r\n  }\r\n\r\n  setLocalOrders(prev => {\r\n    const exists = prev.some(o => o.id === newOrder.id);\r\n    return exists\r\n      ? prev.map(o => (o.id === newOrder.id ? newOrder : o))\r\n      : [newOrder, ...prev];\r\n  });\r\n\r\n  setFilteredOrders(prev => {\r\n    const exists = prev.some(o => o.id === newOrder.id);\r\n    return exists\r\n      ? prev.map(o => (o.id === newOrder.id ? newOrder : o))\r\n      : [newOrder, ...prev];\r\n  });\r\n\r\n  setIsModalOpen(false);\r\n  setSelectedOrder(null);\r\n};\r\n\r\n\r\n  const handleCreateNewOrder = () => {\r\n    // Create empty order structure for new order creation\r\n    const newOrder = {\r\n      id: null, // Will be generated when saved\r\n      orderNumber: '', // Will be auto-generated\r\n      projectName: '',\r\n      clientName: '',\r\n      type: '',\r\n      priority: 'Media',\r\n      status: 'Pendiente',\r\n      assignedTechnician: '',\r\n      technicianRole: '',\r\n      dueDate: '',\r\n      progress: 0,\r\n      description: '',\r\n      requiredMaterials: [],\r\n      attachments: [],\r\n      requiredPPE: [],\r\n      medicalRequirements: false,\r\n      notes: ''\r\n    };\r\n    \r\n    setSelectedOrder(newOrder);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleCreateNewRequisition = () => {\r\n    // Create empty requisition structure for new requisition creation\r\n    const newRequisition = {\r\n      id: null, // Will be generated when saved\r\n      requestNumber: '', // Will be auto-generated\r\n      orderNumber: '',\r\n      projectName: '',\r\n      requestedBy: 'Usuario Actual',\r\n      requestDate: new Date()?.toISOString()?.split('T')?.[0],\r\n      status: 'Pendiente',\r\n      priority: 'Media',\r\n      description: '',\r\n      items: [],\r\n      justification: '',\r\n      approvedBy: '',\r\n      approvalDate: '',\r\n      notes: ''\r\n    };\r\n    \r\n    setSelectedRequisition(newRequisition);\r\n    setIsRequisitionModalOpen(true);\r\n  };\r\n\r\n  // Guardar requisici贸n\r\n  const handleSaveRequisition = async (savedRequisition) => {\r\n    let newReq = { ...savedRequisition };\r\n    try {\r\n      if (!newReq?.id) {\r\n        // Si es una nueva requisici贸n, la creamos en el backend\r\n        const response = await createRequisition(newReq);\r\n        if (response) {\r\n          newReq = response;\r\n        }\r\n      } else {\r\n        // Si es una actualizaci贸n, actualizamos en el backend\r\n        const response = await updateRequisition(newReq.id, newReq);\r\n        if (response) {\r\n          newReq = response;\r\n        }\r\n      }\r\n\r\n      setLocalRequisitions(prev => [newReq, ...prev.filter(r => r.id !== newReq.id)]);\r\n      setLocalOrders(prev => [newReq, ...prev.filter(r => r.id !== newReq.id)]);\r\n\r\n      // Forzar actualizaci贸n de requisiciones\r\n      await getRequisitions();\r\n      \r\n      setIsRequisitionModalOpen(false);\r\n      setSelectedRequisition(null);\r\n    } catch (error) {\r\n      console.error(\"Error al guardar la requisici贸n:\", error);\r\n    }\r\n  };\r\n\r\nconst handleExportData = () => {\r\n  if (!filteredOrders || filteredOrders.length === 0) {\r\n    alert(\"No hay datos disponibles para exportar.\");\r\n    return;\r\n  }\r\n\r\n  const doc = new jsPDF({\r\n    orientation: \"landscape\",\r\n    unit: \"pt\",\r\n    format: \"A4\",\r\n  });\r\n\r\n  const gray = \"#333333\";\r\n\r\n  //ENCABEZADO AZUL\r\n  doc.setFillColor(10, 74, 138);\r\n  doc.rect(0, 0, doc.internal.pageSize.getWidth(), 40, \"F\");\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(18);\r\n  doc.text(\"REPORTE DE RDENES DE TRABAJO\", doc.internal.pageSize.getWidth() / 2, 25, {\r\n    align: \"center\",\r\n  });\r\n\r\n  //FECHA DE GENERACIN\r\n  const fechaActual = new Date().toLocaleDateString(\"es-MX\", {\r\n    year: \"numeric\",\r\n    month: \"2-digit\",\r\n    day: \"2-digit\",\r\n  });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.text(`Generado el ${fechaActual}`, doc.internal.pageSize.getWidth() - 120, 25);\r\n\r\n  //SECCIN DATOS GENERALES\r\n  let startY = 60;\r\n  doc.setTextColor(gray);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(13);\r\n  doc.text(\"Resumen General\", doc.internal.pageSize.getWidth() / 2, startY, { align: \"center\" });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n\r\n  //Totales de resumen\r\n  const totalOrdenes = filteredOrders.length;\r\n  const completadas = filteredOrders.filter((o) => o.estado === \"Completada\" || o.status === \"Completada\").length;\r\n  const pendientes = filteredOrders.filter((o) => o.estado === \"Pendiente\" || o.status === \"Pendiente\").length;\r\n  const enProceso = filteredOrders.filter((o) => o.estado === \"En Proceso\" || o.status === \"En Proceso\").length;\r\n\r\nstartY += 20;\r\n\r\n// Construimos el texto completo\r\nconst resumenTexto = `Total de rdenes: ${totalOrdenes}   |   Completadas: ${completadas}   |   Pendientes: ${pendientes}   |   En Proceso: ${enProceso}`;\r\ndoc.text(resumenTexto, doc.internal.pageSize.getWidth() / 2, startY, { align: \"center\" });\r\n\r\n\r\n  //ORDENAR POR PRIORIDAD (Alta  Media  Baja  Cr铆tico)\r\n  const prioridadOrden = [\"Alta\", \"Media\", \"Baja\", \"Cr铆tico\"];\r\n  const sortedOrders = [...filteredOrders].sort((a, b) => {\r\n    const prioridadA = prioridadOrden.indexOf((a.prioridad || a.priority || \"\").trim());\r\n    const prioridadB = prioridadOrden.indexOf((b.prioridad || b.priority || \"\").trim());\r\n    return (prioridadA === -1 ? 99 : prioridadA) - (prioridadB === -1 ? 99 : prioridadB);\r\n  });\r\n\r\n  //TABLA DETALLADA\r\n  const tableColumn = [\r\n    \"N掳 Orden\",\r\n    \"T茅cnico Asignado\",\r\n    \"Prioridad\",\r\n    \"Estado\",\r\n    \"Fecha L铆mite\",\r\n    \"Cliente\",\r\n    \"Tipo Proyecto\",\r\n    \"Notas\",\r\n  ];\r\n\r\n  const tableRows = sortedOrders.map((order) => [\r\n    order?.ordenTrabajo || order?.orderNumber || \"\",\r\n    order?.tecnicoAsignado?.nombre || order?.assignedTechnician || \"Sin t茅cnico\",\r\n    order?.prioridad || order?.priority || \"\",\r\n    order?.estado || order?.status || \"\",\r\n    order?.fechaLimite || order?.dueDate || \"\",\r\n    order?.cliente?.empresa || order?.cliente?.nombre || order?.clientName || \"Sin cliente\",\r\n    order?.tipo || order?.projectName || \"\",\r\n    order?.notasAdicionales || order?.notes || \"\",\r\n  ]);\r\n\r\n  doc.autoTable({\r\n    startY: startY + 25,\r\n    head: [tableColumn],\r\n    body: tableRows,\r\n    theme: \"grid\",\r\n    styles: { fontSize: 9, cellPadding: 5 },\r\n    headStyles: {\r\n      fillColor: [10, 74, 138],\r\n      textColor: 255,\r\n      halign: \"center\",\r\n      fontStyle: \"bold\",\r\n    },\r\n    bodyStyles: { textColor: [50, 50, 50] },\r\n    alternateRowStyles: { fillColor: [245, 245, 245] },\r\n    margin: { left: 30, right: 30 },\r\n  });\r\n\r\n  //GUARDAR PDF\r\n  doc.save(`reporte_ordenes_trabajo_${new Date().toISOString().split(\"T\")[0]}.pdf`);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Desktop Sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <Sidebar \r\n          isCollapsed={sidebarCollapsed} \r\n          onToggle={handleSidebarToggle}\r\n        />\r\n      </div>\r\n      {/* Mobile Header */}\r\n      <div className=\"lg:hidden\">\r\n        <Header \r\n          onMenuToggle={handleMobileMenuToggle}\r\n          isMenuOpen={mobileMenuOpen}\r\n        />\r\n      </div>\r\n\r\n      <div className={`transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <div className=\"p-6\">\r\n          {/* Header Section */}\r\n          <div className=\"mb-6\">\r\n            <Breadcrumb />\r\n            <div className=\"flex items-center justify-between mt-4\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground\">Procesamiento de rdenes de Trabajo</h1>\r\n                <p className=\"text-muted-foreground mt-2\">\r\n                  Gesti贸n integral de 贸rdenes de trabajo, asignaci贸n de t茅cnicos y control de materiales\r\n                </p>\r\n              </div>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  iconName=\"Plus\"\r\n                  iconSize={16}\r\n                  onClick={handleCreateNewOrder}\r\n                >\r\n                  Nueva Orden\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  iconName=\"ClipboardList\"\r\n                  iconSize={16}\r\n                  onClick={handleCreateNewRequisition}\r\n                >\r\n                  Nueva Requisici贸n\r\n                </Button>\r\n                <div className=\"flex justify-end p-4\">\r\n <Button\r\n  variant=\"default\"\r\n  iconName=\"Download\"\r\n  iconSize={16}\r\n  onClick={handleExportData} \r\n>\r\n  Exportar\r\n</Button>\r\n</div>\r\n\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Stats Cards */}\r\n          <StatsCards stats={stats} />\r\n\r\n          {/* Main Content */}\r\n          <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\r\n            {/* Work Orders Section */}\r\n            <div className=\"xl:col-span-2 space-y-6\">\r\n              <FilterToolbar\r\n                onFiltersChange={handleFiltersChange}\r\n                totalCount={workOrders?.length}\r\n                filteredCount={filteredOrders?.length}\r\n              />\r\n\r\n              <WorkOrderTable\r\n                workOrders={filteredOrders}\r\n                onStatusUpdate={handleStatusUpdate}\r\n                onAssignTechnician={handleAssignTechnician}\r\n                onViewDetails={handleViewDetails}\r\n                onEditOrder={handleEditOrder}\r\n              />\r\n            </div>\r\n\r\n            {/* Inventory Panel */}\r\n            <div className=\"xl:col-span-1\">\r\n              <InventoryPanel\r\n                onCreatePurchaseOrder={handleCreatePurchaseOrder}\r\n                onRequestMaterial={handleRequestMaterial}\r\n                onCreateRequisition={handleCreateNewRequisition}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Work Order Modal */}\r\n          <WorkOrderModal\r\n            isOpen={isModalOpen}\r\n            onClose={() => {\r\n              setIsModalOpen(false);\r\n              setSelectedOrder(null);\r\n            }}\r\n            workOrder={selectedOrder}\r\n            onSave={handleSaveOrder}\r\n          />\r\n\r\n          {/* Requisition Modal */}\r\n          <RequisitionModal\r\n            isOpen={isRequisitionModalOpen}\r\n            onClose={() => {\r\n              setIsRequisitionModalOpen(false);\r\n              setSelectedRequisition(null);\r\n            }}\r\n            requisition={selectedRequisition}\r\n            onSave={handleSaveRequisition}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkOrderProcessing;","import httpService from \"./httpService\";\r\n\r\nconst tallerService = {\r\n  // list talleres with optional filters\r\n  async getWorkOrders(filters = {}) {\r\n    try {\r\n      const query = new URLSearchParams(filters).toString();\r\n      const url = query ? `/talleres?${query}` : \"/talleres\";\r\n\r\n      const response = await httpService.get(url);\r\n      return response; // { success, data, message }\r\n    } catch (error) {\r\n      console.error(\"Error al obtener talleres:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getWorkOrderById(id) {\r\n    try {\r\n      const response = await httpService.get(`/taller/${id}`);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener taller por id:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createWorkOrder(payload) {\r\n    try {\r\n      const response = await httpService.post(\"/taller/crear\", payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al crear taller:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateWorkOrder(id, payload) {\r\n    try {\r\n      // support PUT (or PATCH) via the same endpoint - prefer PUT\r\n      const response = await httpService.put(`/taller/${id}`, payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al actualizar taller:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deleteWorkOrder(id) {\r\n    try {\r\n      const response = await httpService.delete(`/taller/${id}`);\r\n      return response; // { success, data, message }\r\n    } catch (error) {\r\n      console.error(\"Error al eliminar taller:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default tallerService;\r\n","import { useState, useCallback } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport tallerService from \"../services/tallerService\";\r\n\r\nconst useOperacAlt = () => {\r\n  const { showHttpError, showOperationSuccess } = useNotifications();\r\n  const [oportunities, setOportunities] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getOportunities = useCallback(async (filters = {}) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n  const response = await tallerService.getWorkOrders(filters);\r\n      const data = response.success && Array.isArray(response.data) ? response.data : [];\r\n      setOportunities(data);\r\n      return data;\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err);\r\n      showHttpError(\"Error al cargar 贸rdenes\");\r\n      return [];\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showHttpError]);\r\n\r\n  const createWorkOrder = useCallback(async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n  const response = await tallerService.createWorkOrder(payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Orden creada\");\r\n        const newOrders = await getOportunities();  \r\n        const savedOrder = newOrders.find(o => o.id === response.data.id) || response.data;\r\n        return savedOrder;\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al crear orden\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo crear la orden\");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError, getOportunities]);\r\n\r\n  const updateWorkOrder = useCallback(async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n  const response = await tallerService.updateWorkOrder(id, payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Orden actualizada\");\r\n        // Actualiza localmente sin recargar\r\n        setOportunities(prev => prev.map(o => o.id === id ? { ...o, ...payload } : o));\r\n        return { ...payload, id };\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al actualizar orden\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo actualizar la orden\");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  const deleteWorkOrder = useCallback(async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n  const response = await tallerService.deleteWorkOrder(id);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Orden eliminada\");\r\n        setOportunities(prev => prev.filter(o => o.id !== id));\r\n        return true;\r\n      } else {\r\n        showHttpError(response.message || \"Error al eliminar la orden\");\r\n        return false;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo eliminar la orden\");\r\n      setError(err);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  return { oportunities, loading, error, getOportunities, createWorkOrder, updateWorkOrder, deleteWorkOrder };\r\n};\r\n\r\nexport default useOperacAlt;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport useOperacAlt from '../../../hooks/useOperacAlt';\r\n\r\n        const WorkflowBoard = ({ workOrders = [], onStatusChange, onOrderSelect }) => {\r\n          const { oportunities, getOportunities } = useOperacAlt();\r\n\r\n          const columns = [\r\n            { id: 'material-reception', title: 'Recepci贸n Material', icon: 'Package', color: 'bg-blue-500' },\r\n            { id: 'safety-checklist', title: 'Lista Seguridad', icon: 'Shield', color: 'bg-orange-500' },\r\n            { id: 'manufacturing', title: 'Fabricaci贸n', icon: 'Wrench', color: 'bg-purple-500' },\r\n            { id: 'quality-control', title: 'Control Calidad', icon: 'CheckCircle', color: 'bg-green-500' },\r\n            { id: 'ready-shipment', title: 'Listo Env铆o', icon: 'Truck', color: 'bg-teal-500' }\r\n          ];\r\n\r\n          // helper to build a stable string key for an order\r\n          const getOrderKey = (orderOrId) => {\r\n            try {\r\n              if (!orderOrId) return '';\r\n              if (typeof orderOrId === 'string' || typeof orderOrId === 'number') return String(orderOrId);\r\n              // order object\r\n              const o = orderOrId;\r\n              return String(o.id || o.ordenTrabajo || o.folio || (o.raw && (o.raw.id || o.raw.folio)) || '').trim();\r\n            } catch (e) {\r\n              return '';\r\n            }\r\n          };\r\n\r\n          // (debug panel removed)  normalization and rendering remain\r\n\r\n          // fetch when no external prop provided\r\n          // NOTE: avoid including `getOportunities` in deps because the hook returns a new\r\n          // function identity each render which would cause this effect to run repeatedly.\r\n          useEffect(() => {\r\n            if (!workOrders || !workOrders.length) getOportunities();\r\n            // Intentionally only depend on workOrders length to prevent cycling\r\n          }, [workOrders?.length]);\r\n\r\n          const sourceOrders = useMemo(() => (workOrders?.length ? workOrders : oportunities || []), [workOrders, oportunities]);\r\n\r\n\r\n          // normalize incoming order shapes (keep original object under `raw`)\r\n          function normalizeOrder(o) {\r\n            if (!o) return null;\r\n            const ordenTrabajo = o.ordenTrabajo || o.id || o.order || o.folio;\r\n            const proyectoNombre = o.proyectoNombre || o.projectRef || o.nombreProyecto || o.projectName;\r\n            const cliente = o.cliente || o.client || o.clientName || (o.clienteNombre ? { nombre: o.clienteNombre } : null);\r\n            const clientLabel = cliente?.nombre || cliente?.empresa || cliente || o.clientName || '';\r\n\r\n            let tecnicos = [];\r\n            if (Array.isArray(o.tecnicoAsignado)) tecnicos = o.tecnicoAsignado.map(t => ({ nombre: t.nombre || t.name || t }));\r\n            else if (o.tecnicoAsignado && typeof o.tecnicoAsignado === 'object') tecnicos = [{ nombre: o.tecnicoAsignado.nombre || o.tecnicoAsignado.name }];\r\n            else if (o.tecnicoAsignado) tecnicos = [{ nombre: o.tecnicoAsignado }];\r\n            else if (Array.isArray(o.assignedTechnicians)) tecnicos = o.assignedTechnicians.map(t => ({ nombre: t.name || t.nombre }));\r\n            // also accept 'tecnicos' as an alias from backend\r\n            else if (Array.isArray(o.tecnicos)) tecnicos = o.tecnicos.map(t => ({ nombre: t.nombre || t.name || t }));\r\n\r\n            let prioridad = o.prioridad || o.priority || o.priorityLabel || '';\r\n            // infer priority from other fields when backend misuses 'estado' for priority\r\n            try {\r\n              const maybeEstado = (o.estado || o.estado?.toString?.() || o.status || '').toString().toLowerCase();\r\n              if (!prioridad && maybeEstado) {\r\n                const priMap = ['alta','high','urgent','urgente','cr铆tica','critica','media','baja','low'];\r\n                if (priMap.includes(maybeEstado)) prioridad = (o.estado || maybeEstado);\r\n              }\r\n            } catch (e) {\r\n              // ignore\r\n            }\r\n            const prioridadLabel = o.prioridad || o.priorityLabel || o.priority || prioridad || '';\r\n            const fechaLimite = o.fechaLimite || o.estimatedCompletion || o.fecha || o.fechaEstimada || '';\r\n            // normalize various progress fields and parse strings like \"15%\"\r\n            const _rawProg = o.estadoProgreso ?? o.estado_progreso ?? o.progressPercentage ?? o.progressPercent ?? o.estado_progress ?? o.progress ?? o.progreso;\r\n            let estadoProgreso = 0;\r\n            try {\r\n              if (_rawProg == null) estadoProgreso = 0;\r\n              else if (typeof _rawProg === 'string') {\r\n                const n = parseInt(String(_rawProg).replace('%', '').trim(), 10);\r\n                estadoProgreso = Number.isFinite(n) ? n : 0;\r\n              } else {\r\n                estadoProgreso = Math.round(Number(_rawProg) || 0);\r\n              }\r\n            } catch (e) { estadoProgreso = 0; }\r\n\r\n            const statusRaw = (o.status || o.estado || '').toString();\r\n            const estadoMap = (val) => {\r\n              if (!val) return '';\r\n              const v = String(val).toLowerCase().trim();\r\n              // map common Spanish and English states to column ids\r\n              if (['material-reception','recepcion material','recepci贸n material','recepci贸n_material','recepci贸n'].includes(v)) return 'material-reception';\r\n              if (['safety-checklist','lista seguridad','seguridad','safety','checklist seguridad'].includes(v)) return 'safety-checklist';\r\n              if (['manufacturing','fabricaci贸n','fabricacion','en progreso','progreso','producci贸n','produccion','produccion'].includes(v)) return 'manufacturing';\r\n              if (['quality-control','control calidad','calidad','qc','quality'].includes(v)) return 'quality-control';\r\n              if (['ready-shipment','listo env铆o','listo envio','env铆o','envio','enviado','completada','completado','listo'].includes(v)) return 'ready-shipment';\r\n              if (['pendiente','pendiente por revisar','new','nuevo'].includes(v)) return 'material-reception';\r\n              if (['en pausa','pausa','pausado'].includes(v)) return 'manufacturing';\r\n              // fallback: if value already matches expected ids\r\n              if (['material-reception','safety-checklist','manufacturing','quality-control','ready-shipment'].includes(v)) return v;\r\n              return val;\r\n            };\r\n\r\n            const status = estadoMap(statusRaw);\r\n\r\n            // expose original estado value for transparency\r\n            const estado = o.estado || o.status || '';\r\n\r\n            return {\r\n              raw: o,\r\n              ordenTrabajo,\r\n              proyectoNombre,\r\n              cliente: cliente || null,\r\n              clientLabel,\r\n              tecnicos,\r\n              prioridad,\r\n              prioridadLabel,\r\n              estadoProgreso,\r\n              fechaLimite,\r\n              status,\r\n              estado,\r\n              tecnicoAsignado: o.tecnicoAsignado || (tecnicos.length ? tecnicos.map(t => ({ nombre: t.nombre })) : null),\r\n              notasAdicionales: o.notasAdicionales || o.notes || o.descripcion || '',\r\n              tipo: o.tipo || o.type || '',\r\n              id: o.id || ordenTrabajo,\r\n              assignedTechnicians: o.assignedTechnicians || tecnicos.map(t => ({ name: t.nombre })),\r\n              projectRef: o.projectRef || proyectoNombre,\r\n              materials: o.materiales || o.materials || null,\r\n              progress: o.progress || o.progreso || 0,\r\n              estimatedCompletion: o.estimatedCompletion || fechaLimite,\r\n              priorityValue: prioridad,\r\n            };\r\n          }\r\n\r\n          // precompute normalized orders for rendering and for the debug panel\r\n          const normalizedOrders = useMemo(() => sourceOrders.map(normalizeOrder).filter(Boolean), [sourceOrders]);\r\n\r\n          // (debugging/logs removed) keep normalizedOrders for UI rendering\r\n\r\n          const getPriorityColor = (priority) => {\r\n            const colors = { low: 'border-gray-300', medium: 'border-yellow-400', high: 'border-orange-500', urgent: 'border-red-500' };\r\n            return colors[priority] || 'border-gray-300';\r\n          };\r\n\r\n          const getProgressColor = (progress) => {\r\n            if (progress < 30) return 'bg-red-500';\r\n            if (progress < 70) return 'bg-yellow-500';\r\n            return 'bg-green-500';\r\n          };\r\n\r\n          // persist some UI-only states in session so reloads keep positions and completed flags\r\n          const [localProgress, setLocalProgress] = useState(() => {\r\n            try { return JSON.parse(localStorage.getItem('wb_local_progress') || '{}'); } catch (e) { return {}; }\r\n          });\r\n          const [localHidden, setLocalHidden] = useState(() => {\r\n            try { return JSON.parse(localStorage.getItem('wb_local_hidden') || '{}'); } catch (e) { return {}; }\r\n          });\r\n          const [localCompleted, setLocalCompleted] = useState(() => {\r\n            try { return JSON.parse(localStorage.getItem('wb_local_completed') || '{}'); } catch (e) { return {}; }\r\n          });\r\n          const [localStatusOverrides, setLocalStatusOverrides] = useState(() => {\r\n            try { return JSON.parse(localStorage.getItem('wb_status_overrides') || '{}'); } catch (e) { return {}; }\r\n          });\r\n\r\n          // keep localStorage in sync when these states change\r\n          useEffect(() => {\r\n            try { localStorage.setItem('wb_status_overrides', JSON.stringify(localStatusOverrides || {})); } catch (e) { }\r\n          }, [localStatusOverrides]);\r\n          useEffect(() => {\r\n            try { localStorage.setItem('wb_local_completed', JSON.stringify(localCompleted || {})); } catch (e) { }\r\n          }, [localCompleted]);\r\n          useEffect(() => {\r\n            try { localStorage.setItem('wb_local_hidden', JSON.stringify(localHidden || {})); } catch (e) { }\r\n          }, [localHidden]);\r\n          useEffect(() => {\r\n            try { localStorage.setItem('wb_local_progress', JSON.stringify(localProgress || {})); } catch (e) { }\r\n          }, [localProgress]);\r\n\r\n          // Initialize overrides on load: ensure each known order has a default override of\r\n          // 'material-reception' but DO NOT clobber existing overrides. This prevents\r\n          // resetting user moves when normalizedOrders updates (e.g. after parent updates).\r\n          useEffect(() => {\r\n            setLocalStatusOverrides((prev) => {\r\n              try {\r\n                const next = { ...(prev || {}) };\r\n                normalizedOrders.forEach((o) => {\r\n                  const k = getOrderKey(o);\r\n                  if (!k) return;\r\n                  if (!next[k]) next[k] = 'material-reception';\r\n                });\r\n                return next;\r\n              } catch (e) {\r\n                return prev || {};\r\n              }\r\n            });\r\n          }, [normalizedOrders]);\r\n\r\n          // Limpiar localStorage cuando el servidor tiene valores m谩s recientes\r\n          useEffect(() => {\r\n            setLocalProgress((prev) => {\r\n              try {\r\n                const next = { ...prev };\r\n                let hasChanges = false;\r\n                normalizedOrders.forEach((o) => {\r\n                  const k = getOrderKey(o);\r\n                  if (!k) return;\r\n                  // Si el servidor tiene un progreso definido, eliminar el valor local\r\n                  const serverProgress = o?.estadoProgreso ?? o?.progress;\r\n                  if (serverProgress !== undefined && serverProgress !== null && next[k] !== undefined) {\r\n                    delete next[k];\r\n                    hasChanges = true;\r\n                  }\r\n                });\r\n                return hasChanges ? next : prev;\r\n              } catch (e) {\r\n                return prev || {};\r\n              }\r\n            });\r\n          }, [normalizedOrders]);\r\n\r\n          const handleMoveOrder = (order, newStatus) => {\r\n            const orderKey = getOrderKey(order);\r\n            if (!orderKey) return; // don't proceed without a stable key\r\n            // compute progress based on column index (0..n-1). final column => 100%\r\n            const nextIndex = columns.findIndex(c => c.id === newStatus);\r\n            const newProgress = nextIndex >= 0 ? Math.round((nextIndex / (columns.length - 1)) * 100) : null;\r\n            const payload = {};\r\n            // Important: don't auto-mark 100% when moving into 'ready-shipment' via Siguiente.\r\n            // The user requested that only the explicit 'Listo' button marks 100% and completed.\r\n            if (newProgress !== null && newStatus !== 'ready-shipment') {\r\n              payload.estadoProgreso = newProgress;\r\n              // Solo actualizar localStorage si el servidor NO tiene ya un valor\r\n              const serverProgress = order?.estadoProgreso ?? order?.progress;\r\n              if (serverProgress === undefined || serverProgress === null) {\r\n                setLocalProgress(prev => ({ ...prev, [orderKey]: newProgress }));\r\n              }\r\n            }\r\n            if (newProgress === 100 && newStatus !== 'ready-shipment') payload.completed = true;\r\n            // persist local status override so UI keeps the card in the new column across reloads\r\n            setLocalStatusOverrides(prev => {\r\n              const next = { ...(prev || {}) };\r\n              next[orderKey] = newStatus;\r\n              return next;\r\n            });\r\n            onStatusChange?.(orderKey, newStatus, payload);\r\n          };\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg\">\r\n              {/* Title */}\r\n              <div className=\"p-4 border-b\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <Icon name=\"Workflow\" className=\"text-primary\" size={20} />\r\n                  <h3 className=\"text-lg font-semibold\">Flujo Operativo Taller</h3>\r\n                  <div className=\"ml-auto\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"overflow-x-auto p-4\">\r\n                <div className=\"flex space-x-4\">\r\n                  {columns.map((column) => {\r\n                    // filter normalized orders by (possibly overridden) column status\r\n                    const orders = normalizedOrders.filter((o) => {\r\n                      const k = getOrderKey(o);\r\n                      // Prefer authoritative status from the parent (o.status) when present.\r\n                      // localStatusOverrides are only a fallback so parent-initiated reverts are respected.\r\n                      const hasParentStatus = o && o.status !== undefined && o.status !== null && String(o.status) !== '';\r\n                      const s = hasParentStatus ? o.status : ((k && localStatusOverrides[k]) || o?.status);\r\n                      return s === column.id;\r\n                    });\r\n\r\n                    // orders per column are rendered below\r\n\r\n                    // sort by priority (critical/urgent, high/alta, medium/media, low/baja)\r\n                    const priorityRank = (p) => {\r\n                      const v = String(p || '').toLowerCase();\r\n                      if (['cr铆tica','critica','urgent','urgente'].includes(v)) return 1;\r\n                      if (['alta','high'].includes(v)) return 2;\r\n                      if (['media','medium'].includes(v)) return 3;\r\n                      if (['baja','low'].includes(v)) return 4;\r\n                      return 99;\r\n                    };\r\n                    orders.sort((a, b) => priorityRank(a.prioridad || a.priorityValue) - priorityRank(b.prioridad || b.priorityValue));\r\n\r\n                    // compute visible orders (exclude hidden) so header counts match rendered cards\r\n                    const visibleOrders = orders.filter((o) => {\r\n                      const k = getOrderKey(o);\r\n                      return !(k && (localHidden[k] || o?.hidden));\r\n                    });\r\n\r\n                    return (\r\n                      <div key={column.id} className=\"bg-muted/30 rounded-lg p-3 flex flex-col flex-shrink-0 w-72 md:w-80 lg:w-96 h-[60vh]\">\r\n                        {/* Fixed header area for each column to align starts */}\r\n                          <div className=\"flex items-center space-x-2 mb-3 h-16 flex-shrink-0\">\r\n                          <div className={`w-3 h-3 rounded-full ${column.color}`} />\r\n                          <Icon name={column.icon} size={16} className=\"text-foreground\" />\r\n                          <span className=\"font-medium text-sm truncate\">{column.title}</span>\r\n                          <span className=\"text-xs text-muted-foreground bg-muted px-2 py-1 rounded-full ml-auto\">{visibleOrders.length}</span>\r\n                        </div>\r\n                        {/* compact IDs info removed */}\r\n\r\n                        <div className=\"space-y-3 overflow-y-auto flex-1 pr-1 no-scrollbar\">\r\n                          {visibleOrders.length === 0 && (\r\n                            <div className=\"text-center text-muted-foreground py-6\">\r\n                              <Icon name={column.icon} size={28} className=\"mx-auto mb-2 opacity-50\" />\r\n                              <div className=\"text-sm\">Sin 贸rdenes</div>\r\n                            </div>\r\n                          )}\r\n                          {visibleOrders.map((order, __idx) => {\r\n                            const stableKey = getOrderKey(order) || (order?.id || order?.ordenTrabajo || `order-${__idx}`);\r\n                            // ensure we build a unique react key per rendered item (append index)\r\n                            const reactKey = `${stableKey}-${__idx}`;\r\n                            const isHidden = stableKey && (localHidden[stableKey] || order?.hidden);\r\n                            if (isHidden) return null;\r\n                            // Siempre priorizar valores del servidor sobre localStorage\r\n                            const parentProgress = (order?.estadoProgreso !== undefined && order?.estadoProgreso !== null)\r\n                              ? Number(order.estadoProgreso)\r\n                              : (order?.progress !== undefined && order?.progress !== null) ? Number(order.progress) : null;\r\n\r\n                            const localProg = (stableKey && localProgress && (localProgress[stableKey] !== undefined && localProgress[stableKey] !== null))\r\n                              ? Number(localProgress[stableKey])\r\n                              : null;\r\n\r\n                            let rawProgress = 0;\r\n                            // SIEMPRE preferir parentProgress (servidor) sobre localStorage\r\n                            if (parentProgress !== null && !Number.isNaN(parentProgress)) {\r\n                              rawProgress = Math.round(parentProgress);\r\n                              // Limpiar localStorage si hay un valor del servidor m谩s reciente\r\n                              if (stableKey && localProg !== null && localProg !== parentProgress) {\r\n                                setLocalProgress(prev => {\r\n                                  const next = { ...prev };\r\n                                  delete next[stableKey];\r\n                                  return next;\r\n                                });\r\n                              }\r\n                            } else if (localProg !== null && !Number.isNaN(localProg)) {\r\n                              rawProgress = Math.round(localProg);\r\n                            } else {\r\n                              rawProgress = Math.round(Number(order?.progreso ?? 0) || 0);\r\n                            }\r\n\r\n                            // Siempre preferir el progreso del servidor sobre flags locales\r\n                            let computedProgress = rawProgress;\r\n                            if (parentProgress !== null && !Number.isNaN(parentProgress)) {\r\n                              computedProgress = Math.min(100, Math.max(0, Math.round(parentProgress)));\r\n                            } else if (stableKey && localCompleted && localCompleted[stableKey]) {\r\n                              computedProgress = 100;\r\n                            } else {\r\n                              computedProgress = Math.min(100, Math.max(0, Math.round(rawProgress)));\r\n                            }\r\n                            const priorityKey = (p) => {\r\n                              const v = String(p || '').toLowerCase();\r\n                              if (['cr铆tica','critica','urgent','urgente'].includes(v)) return 'urgent';\r\n                              if (['alta','high'].includes(v)) return 'high';\r\n                              if (['media','medium'].includes(v)) return 'medium';\r\n                              if (['baja','low'].includes(v)) return 'low';\r\n                              return v;\r\n                            };\r\n\r\n                            return (\r\n                <div\r\n                  key={reactKey}\r\n                                className={`bg-background border-2 ${getPriorityColor(priorityKey(order?.prioridad || order?.priorityValue))} rounded-lg p-4 cursor-pointer hover:shadow-md transition-all duration-200 overflow-hidden h-80 md:h-96 flex flex-col justify-between`}\r\n                                onClick={() => {\r\n                                  // prefer sending a normalized, stable object to the parent so\r\n                                  // the Controls panel can render consistent fields regardless of source\r\n                                  const selected = {\r\n                                    id: order?.id || order?.ordenTrabajo,\r\n                                    ordenTrabajo: order?.ordenTrabajo || order?.id,\r\n                                    // Cliente (m煤ltiples aliases)\r\n                                    clientName: order?.clientLabel || order?.clientName || order?.cliente?.nombre || (order?.raw && (order.raw.clientName || '')),\r\n                                    clientLabel: order?.clientLabel || order?.clientName || order?.cliente?.nombre || '',\r\n                                    cliente: order?.cliente || (order?.raw && (order.raw.cliente || null)) || null,\r\n                                    // Prioridad (exponer varios nombres que el Controls usa como fallback)\r\n                                    prioridad: order?.prioridad || order?.priorityValue || '',\r\n                                    prioridadLabel: order?.prioridadLabel || order?.priorityLabel || order?.prioridad || '',\r\n                                    priorityValue: order?.priorityValue || order?.prioridad || '',\r\n                                    // Progreso (exponer en dos nombres)\r\n                                    progress: order?.progress || order?.progreso || order?.estadoProgreso || 0,\r\n                                    progreso: order?.progreso || order?.progress || order?.estadoProgreso || 0,\r\n                                    // Proyecto\r\n                                    projectRef: order?.projectRef || order?.proyectoNombre || '',\r\n                                    proyectoNombre: order?.proyectoNombre || order?.projectRef || '',\r\n                                    // T茅cnicos: pasar como assignedTechnicians y tambi茅n como tecnicoAsignado / tecnicos\r\n                                    assignedTechnicians: (Array.isArray(order?.assignedTechnicians) ? order.assignedTechnicians : (order?.assignedTechnicians ? [order.assignedTechnicians] : (Array.isArray(order?.tecnicoAsignado) ? order.tecnicoAsignado.map(t => ({ name: t?.nombre || t?.name || t })) : (order?.tecnicoAsignado ? [{ name: order.tecnicoAsignado.nombre || order.tecnicoAsignado.name || order.tecnicoAsignado }] : [])))) || [],\r\n                                    tecnicoAsignado: (Array.isArray(order?.tecnicoAsignado) ? order.tecnicoAsignado : (order?.tecnicoAsignado ? [order.tecnicoAsignado] : (Array.isArray(order?.assignedTechnicians) ? order.assignedTechnicians.map(t => ({ nombre: t?.name || t?.nombre || t })) : (order?.tecnicos || [])))) || [],\r\n                                    tecnicos: (Array.isArray(order?.tecnicos) ? order.tecnicos : (order?.tecnicos ? [order.tecnicos] : (Array.isArray(order?.tecnicoAsignado) ? order.tecnicoAsignado.map(t => ({ nombre: t?.nombre || t?.name || t })) : (Array.isArray(order?.assignedTechnicians) ? order.assignedTechnicians.map(t => ({ nombre: t?.name || t?.nombre || t })) : [])))) || [],\r\n                                    raw: order?.raw || order,\r\n                                  };\r\n                                  onOrderSelect?.(selected);\r\n                                }}\r\n                                // cuando Debug est谩 activado, forzamos estilos visibles para confirmar existencia en DOM\r\n                                // no debug styles\r\n                              >\r\n                                <div className=\"flex items-start justify-between mb-2\">\r\n                                  <div className=\"min-w-0\">\r\n                                  <div className=\"font-medium text-sm truncate\">{order?.ordenTrabajo || order?.id}</div>\r\n                                  <div className=\"text-xs text-muted-foreground truncate max-w-[16rem]\">{order?.proyectoNombre}</div>\r\n                                </div>\r\n\r\n                                  <div className={`px-2 py-1 rounded-full text-xs font-medium max-w-[8rem] overflow-hidden truncate ${\r\n                                    priorityKey(order?.prioridad || order?.priorityValue) === 'urgent'\r\n                                      ? 'bg-red-100 text-red-700'\r\n                                      : priorityKey(order?.prioridad || order?.priorityValue) === 'high'\r\n                                      ? 'bg-orange-100 text-orange-700'\r\n                                      : priorityKey(order?.prioridad || order?.priorityValue) === 'medium'\r\n                                      ? 'bg-yellow-100 text-yellow-700'\r\n                                      : 'bg-gray-100 text-gray-700'\r\n                                  }`}>\r\n                                    <span className=\"truncate\">{order?.prioridadLabel || order?.prioridad || order?.priorityValue}</span>\r\n                                  </div>\r\n                                  {( (stableKey && localCompleted && localCompleted[stableKey]) || computedProgress >= 100 || order?.status === 'ready-shipment') && (\r\n                                    <div className=\"ml-2 px-2 py-0.5 rounded-full bg-green-100 text-green-700 text-xs font-medium\">Completado</div>\r\n                                  )}\r\n                                </div>\r\n\r\n                                <div className=\"mb-3\">\r\n                                  <div className=\"font-medium text-sm text-foreground truncate max-w-[16rem]\">{order?.cliente?.nombre || order?.clientLabel}</div>\r\n                                </div>\r\n\r\n                                <div className=\"mb-3\">\r\n                                  <div className=\"text-xs text-muted-foreground mb-1\">T茅cnicos:</div>\r\n                                    {(() => {\r\n                                      const rawTech = order?.tecnicoAsignado || order?.tecnicos || [];\r\n                                      const techList = Array.isArray(rawTech) ? rawTech : (rawTech ? [rawTech] : []);\r\n                                      return techList.slice(0, 2).map((tech, idx) => (\r\n                                        <div key={idx} className=\"text-xs truncate\">\r\n                                          <span className=\"truncate block max-w-[12rem]\">{tech?.nombre || tech?.name || tech}</span>\r\n                                        </div>\r\n                                      ));\r\n                                    })()}\r\n                                    {((order?.tecnicoAsignado || order?.tecnicos) || []).length > 2 && (\r\n                                      <div className=\"text-xs text-muted-foreground\">+{((order?.tecnicoAsignado || order?.tecnicos) || []).length - 2} m谩s</div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                  <div className=\"mb-3\">\r\n                                  {(() => {\r\n                                    const reception = order?.recepcionMateriales || order?.raw?.recepcionMateriales || { materials: [] };\r\n                                    const materials = order?.materials;\r\n                                    \r\n                                    // Calcular totales desde recepcionMateriales si existen\r\n                                    const totalReceived = reception?.materials?.reduce((sum, m) => sum + (Number(m.received) || 0), 0) || reception?.cantidadRecibida || reception?.received || materials?.received || 0;\r\n                                    const totalRequired = reception?.materials?.reduce((sum, m) => sum + (Number(m.required) || 0), 0) || materials?.total || 0;\r\n                                    const totalPending = Math.max(0, totalRequired - totalReceived);\r\n                                    \r\n                                    return (\r\n                                      <>\r\n                                        <div className=\"flex items-center justify-between text-xs mb-1\">\r\n                                          <span className=\"text-muted-foreground\">Materiales:</span>\r\n                                          <div className=\"flex items-center gap-1\">\r\n                                            <span className=\"text-green-600 font-semibold\">{totalReceived}</span>\r\n                                            <span className=\"text-muted-foreground\">/</span>\r\n                                            <span className=\"font-semibold\">{totalRequired}</span>\r\n                                            {totalPending > 0 && (\r\n                                              <>\r\n                                                <span className=\"text-muted-foreground mx-1\"></span>\r\n                                                <span className=\"text-orange-600 font-medium\">{totalPending} faltantes</span>\r\n                                              </>\r\n                                            )}\r\n                                          </div>\r\n                                        </div>\r\n                                        <div className=\"w-full bg-gray-200 rounded-full h-1\">\r\n                                          <div\r\n                                            className={`h-1 rounded-full ${\r\n                                              totalPending === 0 ? 'bg-green-500' : totalReceived > 0 ? 'bg-yellow-500' : 'bg-red-500'\r\n                                            }`}\r\n                                            style={{ width: `${totalRequired > 0 ? (totalReceived / totalRequired * 100) : 0}%` }}\r\n                                          />\r\n                                        </div>\r\n                                        {order?.materials?.issues?.length > 0 && (\r\n                                          <div className=\"text-xs text-red-600 mt-1\">{order?.materials?.issues?.length} problema(s)</div>\r\n                                        )}\r\n                                      </>\r\n                                    );\r\n                                  })()}\r\n                                </div>\r\n\r\n                                <div className=\"mb-3\">\r\n                                  <div className=\"flex items-center justify-between text-xs mb-1\">\r\n                                    <span className=\"text-muted-foreground\">Progreso:</span>\r\n                                    <span className=\"font-medium\">{computedProgress}%</span>\r\n                                  </div>\r\n                                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                                    <div className={`h-2 rounded-full ${getProgressColor(computedProgress)}`} style={{ width: `${computedProgress}%` }} />\r\n                                  </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center space-x-1 text-xs text-muted-foreground mb-3\">\r\n                                  <Icon name=\"Calendar\" size={12} />\r\n                                  <span>Est: {order?.fechaLimite}</span>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center space-x-2 text-xs\">\r\n                                  {order?.safetyChecklistCompleted && (\r\n                                    <div className=\"flex items-center space-x-1 text-green-600\">\r\n                                      <Icon name=\"Shield\" size={12} />\r\n                                      <span>Seguro</span>\r\n                                    </div>\r\n                                  )}\r\n                                  {order?.qualityControlStatus === 'approved' && (\r\n                                    <div className=\"flex items-center space-x-1 text-green-600\">\r\n                                      <Icon name=\"CheckCircle\" size={12} />\r\n                                      <span>QC OK</span>\r\n                                    </div>\r\n                                  )}\r\n                                  {order?.changeOrders?.length > 0 && (\r\n                                    <div className=\"flex items-center space-x-1 text-orange-600\">\r\n                                      <Icon name=\"Edit\" size={12} />\r\n                                      <span>{order?.changeOrders?.length}</span>\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n\r\n                                <div className=\"mt-3 pt-3 border-t border-muted\">\r\n                                  <div className=\"flex space-x-1\">\r\n                                    {column.id !== 'ready-shipment' ? (\r\n                                      <Button\r\n                                        size=\"xs\"\r\n                                        variant=\"outline\"\r\n                                        onClick={(e) => {\r\n                                          e?.stopPropagation();\r\n                                          const nextStatuses = {\r\n                                            'material-reception': 'safety-checklist',\r\n                                            'safety-checklist': 'manufacturing',\r\n                                            'manufacturing': 'quality-control',\r\n                                            'quality-control': 'ready-shipment'\r\n                                          };\r\n                                          handleMoveOrder(order, nextStatuses[column.id]);\r\n                                        }}\r\n                                        className=\"flex-1\"\r\n                                      >\r\n                                        Siguiente\r\n                                      </Button>\r\n                                    ) : (\r\n                                      (() => {\r\n                                        const orderKey = stableKey;\r\n                                        const isCompleted = !!(\r\n                                          (orderKey && localCompleted && localCompleted[orderKey]) ||\r\n                                          (order?.estadoProgreso >= 100) ||\r\n                                          (order?.progress >= 100) ||\r\n                                          (order?.progreso >= 100)\r\n                                        );\r\n\r\n                                        if (!isCompleted) {\r\n                                          // show only the Listo button until the order is marked completed\r\n                                          return (\r\n                                            <Button\r\n                                              size=\"xs\"\r\n                                              variant=\"outline\"\r\n                                              onClick={(e) => {\r\n                                                e?.stopPropagation();\r\n                                                if (!orderKey) return;\r\n                                                // optimistic mark completed\r\n                                                setLocalProgress(prev => ({ ...prev, [orderKey]: 100 }));\r\n                                                setLocalCompleted(prev => ({ ...prev, [orderKey]: true }));\r\n                                                // persist status override as final\r\n                                                setLocalStatusOverrides(prev => {\r\n                                                  const next = { ...(prev || {}) };\r\n                                                  next[orderKey] = 'ready-shipment';\r\n                                                  return next;\r\n                                                });\r\n                                                    // mark completed locally and notify parent\r\n                                                    onStatusChange?.(orderKey, 'ready-shipment', { estadoProgreso: 100, completed: true });\r\n                                              }}\r\n                                              className=\"flex-1\"\r\n                                            >\r\n                                              Listo\r\n                                            </Button>\r\n                                          );\r\n                                        }\r\n\r\n                                        // once completed, replace with Finalizar button\r\n                                        return (\r\n                                          <Button\r\n                                            size=\"xs\"\r\n                                            variant=\"ghost\"\r\n                                            onClick={(e) => {\r\n                                              e?.stopPropagation();\r\n                                              if (!orderKey) return;\r\n                                              // DEBUG: log Finalizar payload to console to trace parent matching\r\n                                              setLocalHidden(prev => ({ ...prev, [orderKey]: true }));\r\n                                              onStatusChange?.(orderKey, 'ready-shipment', { hidden: true });\r\n                                            }}\r\n                                          >\r\n                                            Finalizar\r\n                                          </Button>\r\n                                        );\r\n                                      })()\r\n                                    )}\r\n                                    <Button\r\n                                      size=\"xs\"\r\n                                      variant=\"outline\"\r\n                                      onClick={(e) => {\r\n                                        e?.stopPropagation();\r\n                                        // Handle photo evidence\r\n                                      }}\r\n                                      iconName=\"Camera\"\r\n                                    />\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default WorkflowBoard;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\nimport requisiService from '../../../services/requisiService';\r\nimport useGastos from '../../../hooks/useGastos';\r\n\r\n        \r\n\r\n  const WorkflowControls = ({ selectedOrder, currentShift, totalOrders, workOrdersIds = [], workOrders = [], onForceRemove, onRevertStatus, localMissingByOrder = {} }) => {\r\n          const isWorkingHours = currentShift === 'morning';\r\n    const { getGastos } = useGastos();\r\n          const selectedMissingPPE = Array.isArray(selectedOrder?.safetyChecklistMissing)\r\n            ? selectedOrder.safetyChecklistMissing\r\n            : (Array.isArray(selectedOrder?.raw?.safetyChecklistMissing) ? selectedOrder.raw.safetyChecklistMissing : []);\r\n          const resolvePriority = () => {\r\n            if (!selectedOrder) return '';\r\n            // direct values\r\n            const direct = selectedOrder?.prioridadLabel || selectedOrder?.prioridad || selectedOrder?.priorityValue || selectedOrder?.raw?.prioridad || selectedOrder?.raw?.priority || '';\r\n            if (direct) return direct;\r\n\r\n            // try matching related records in provided workOrders prop\r\n            try {\r\n              const candidates = [];\r\n              // possible keys on selectedOrder/raw: id, ordenTrabajo, trabajoId\r\n              if (selectedOrder?.id) candidates.push(String(selectedOrder.id));\r\n              if (selectedOrder?.ordenTrabajo) candidates.push(String(selectedOrder.ordenTrabajo));\r\n              if (selectedOrder?.raw?.trabajoId) candidates.push(String(selectedOrder.raw.trabajoId));\r\n              if (selectedOrder?.raw?.id) candidates.push(String(selectedOrder.raw.id));\r\n\r\n              for (const w of (workOrders || [])) {\r\n                if (!w) continue;\r\n                const keys = [w?.id, w?.ordenTrabajo, w?.trabajoId, (w?.raw && w.raw?.trabajoId), (w?.raw && w.raw?.id)].filter(Boolean).map(String);\r\n                if (keys.some(k => candidates.includes(k))) {\r\n                  const p = w?.prioridad || w?.prioridadLabel || w?.priority || w?.priorityLabel || (w?.raw && (w.raw.prioridad || w.raw.priority)) || '';\r\n                  if (p) return p;\r\n                }\r\n              }\r\n            } catch (e) {\r\n              // ignore\r\n            }\r\n\r\n            // last resort: use estado if it looks like a priority\r\n            try {\r\n              const estado = (selectedOrder?.raw?.estado || selectedOrder?.raw?.status || selectedOrder?.estado || selectedOrder?.status || '').toString();\r\n              if (estado) {\r\n                const low = estado.toLowerCase();\r\n                if (['alta','high','urgent','urgente','cr铆tica','critica','media','baja','low'].some(s => low.includes(s))) return selectedOrder?.raw?.estado || estado;\r\n              }\r\n            } catch (e) {}\r\n\r\n            return '';\r\n          };\r\n\r\n          // helpers moved into component scope to avoid returning objects into JSX\r\n          const formatProgress = (p) => {\r\n            if (p === null || p === undefined || p === '') return '0%';\r\n            // Normalize into a numeric value removing non-numeric characters except dot and minus\r\n            const normalizeToNumber = (val) => {\r\n              if (typeof val === 'number') return val;\r\n              if (typeof val !== 'string') return NaN;\r\n              const s = val.trim();\r\n              // if contains percent sign, strip it but keep decimal\r\n              const cleaned = s.replace(/[^0-9.+-]/g, '');\r\n              const n = Number(cleaned);\r\n              return Number.isFinite(n) ? n : NaN;\r\n            };\r\n\r\n            const num = normalizeToNumber(p);\r\n            if (Number.isNaN(num)) return String(p);\r\n\r\n            let percent = num;\r\n            // If it's clearly a fraction (0 < num <= 1) treat as fraction\r\n            if (percent > 0 && percent <= 1) {\r\n              percent = percent * 100;\r\n            } else if (percent > 100) {\r\n              // If it's an unexpectedly large number (e.g. 1500) try dividing by 100 (common scale issues)\r\n              const maybe = percent / 100;\r\n              if (maybe > 0 && maybe <= 100) percent = maybe;\r\n              // otherwise leave as-is (will be rounded)\r\n            }\r\n            if (percent < 0) percent = 0;\r\n            if (percent > 100) percent = 100;\r\n\r\n            return `${Math.round(percent)}%`;\r\n          };\r\n\r\n          const formatDate = (v) => {\r\n            if (!v && v !== 0) return '';\r\n            try {\r\n              // If value is a plain YYYY-MM-DD string, construct a local Date to avoid timezone shifts\r\n              if (typeof v === 'string' && /^\\d{4}-\\d{2}-\\d{2}$/.test(v)) {\r\n                const [y, m, d] = v.split('-').map(Number);\r\n                const dt = new Date(y, m - 1, d); // local date\r\n                return dt.toLocaleDateString(undefined, { day: '2-digit', month: 'short', year: 'numeric' });\r\n              }\r\n              const d = (v instanceof Date) ? v : new Date(v);\r\n              if (Number.isNaN(d.getTime())) return String(v);\r\n              return d.toLocaleDateString(undefined, { day: '2-digit', month: 'short', year: 'numeric' });\r\n            } catch (e) {\r\n              return String(v);\r\n            }\r\n          };\r\n\r\n          // Generate a PDF report for the selected order.\r\n          const extractApprovedFromArray = (arr) => {\r\n            if (!Array.isArray(arr)) return [];\r\n            return arr\r\n              .filter(item => {\r\n                if (!item) return false;\r\n                const s = String(item?.status || item?.estado || item?.approved || item?.aprobado || '').toLowerCase();\r\n                if (s.includes('aprob')) return true;\r\n                if (item?.approved === true) return true;\r\n                if (item?.approvedAt || item?.approvedBy) return true;\r\n                return false;\r\n              })\r\n              .map(it => ({\r\n                name: it?.name || it?.nombre || it?.item || it?.producto || 'Material',\r\n                required: Number(it?.required ?? it?.cantidad ?? it?.total ?? it?.qty ?? 0) || 0,\r\n                received: Number(it?.received ?? it?.recibido ?? it?.have ?? 0) || 0,\r\n                raw: it\r\n              }));\r\n          };\r\n// --------------------------------------------\r\n// GENERATE PDF - DISEO BONITO + DATOS COMPLETOS\r\n// --------------------------------------------\r\nconst generateReport = async () => {\r\n  if (!selectedOrder) return;\r\n\r\n  // --------------------------------------------\r\n  // CARGAR MATERIALES DESDE MATERIAL RECEPTION PANEL\r\n  // --------------------------------------------\r\n  let receptionMaterials = [];\r\n\r\n  try {\r\n    const resp = await inventoryService.getReceptionMaterials(selectedOrder?.ordenTrabajo);\r\n    if (resp?.success && Array.isArray(resp.data)) {\r\n      receptionMaterials = resp.data;\r\n      console.log(\"Materiales recepci贸n cargados:\", receptionMaterials);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error cargando materiales recepci贸n\", err);\r\n  }\r\n\r\n  // --------------------------------------------\r\n  // PROGRESO (DELTA) - SIN CAMBIOS\r\n  // --------------------------------------------\r\n  const normalizeKey = (v) => String(v || '').toLowerCase().replace(/[^a-z0-9]/g, '');\r\n  const onlyDigits = (v) => (String(v || '').match(/\\d+/g) || []).join('');\r\n\r\n  const computeDailyProgressDelta = () => {\r\n    try {\r\n      const raw = selectedOrder?.raw || {};\r\n      const todayKey = (d) => `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;\r\n      const today = todayKey(new Date());\r\n\r\n      const candidates = raw.progressHistory || raw.progress_logs ||\r\n                         raw.updates || raw.progressUpdates ||\r\n                         raw.progreso_historial || raw.history ||\r\n                         raw.progress_log || null;\r\n\r\n      if (Array.isArray(candidates) && candidates.length) {\r\n        const entries = candidates.map(e => {\r\n          if (typeof e === 'number') return { date: today, value: Number(e) };\r\n          if (typeof e === 'string') {\r\n            const m = e.match(/(\\d{4}-\\d{2}-\\d{2}).*?([0-9+.\\-%]+)/);\r\n            if (m) return { date: m[1], value: Number(String(m[2]).replace('%','')) };\r\n            return { date: today, value: Number(e.replace(/[^0-9.+-]/g,'')) };\r\n          }\r\n          return { date: (e.date || e.fecha || e.d) || today, value: Number(e.value ?? e.progreso ?? e.progress ?? e.porcentaje ?? 0) };\r\n        });\r\n\r\n        const todays = entries.filter(en => String(en.date).startsWith(today));\r\n        if (todays.length >= 2) return Math.round((todays.at(-1).value - todays[0].value) * 100) / 100;\r\n        if (todays.length === 1) {\r\n          const before = entries.filter(en => !String(en.date).startsWith(today)).sort((a,b)=> new Date(a.date)-new Date(b.date)).pop();\r\n          if (before) return Math.round((todays[0].value - before.value) * 100) / 100;\r\n          return Math.round((todays[0].value) * 100) / 100;\r\n        }\r\n      }\r\n      const cur = Number(selectedOrder?.progress ?? selectedOrder?.progreso ?? 0);\r\n      const prev = Number(selectedOrder?.raw?.previousProgress ?? selectedOrder?.previousProgress ?? 0);\r\n      if (!Number.isNaN(cur) && !Number.isNaN(prev)) return Math.round((cur - prev) * 100) / 100;\r\n      return null;\r\n    } catch { return null; }\r\n  };\r\n\r\n  // --------------------------------------------\r\n  // MATERIALES - AHORA USAR RECEPCIN\r\n  // --------------------------------------------\r\n  const buildMaterials = () => {\r\n    // 1锔 Si existen materiales de recepci贸n, usar esos\r\n    if (Array.isArray(receptionMaterials) && receptionMaterials.length > 0) {\r\n      return receptionMaterials.map(m => {\r\n        const required = Number(m.requerido ?? m.cantidad ?? m.required ?? 0);\r\n        const received = Number(m.recibido ?? m.entregado ?? m.received ?? 0);\r\n\r\n        return {\r\n          name: m.material || m.nombre || \"Material\",\r\n          required,\r\n          received,\r\n          missing: Math.max(0, required - received)\r\n        };\r\n      });\r\n    }\r\n\r\n    // 2锔 Fallback a selectedOrder.materials (si no hubiera recepci贸n)\r\n    const raw = selectedOrder?.materials || [];\r\n    return raw.map(it => ({\r\n      name: it.name || it.nombre || \"Material\",\r\n      required: Number(it.required ?? it.cantidad ?? 0),\r\n      received: Number(it.received ?? it.recibido ?? 0),\r\n      missing: Math.max(0, (it.required ?? 0) - (it.received ?? 0))\r\n    }));\r\n  };\r\n\r\n  // --------------------------------------------\r\n  // PDF\r\n  // --------------------------------------------\r\n  const doc = new jsPDF({ unit: \"pt\", format: \"a4\" });\r\n  const margin = 40;\r\n\r\n  // ENCABEZADO\r\n  doc.setFillColor(10, 74, 138);\r\n  doc.rect(0, 0, 595.28, 40, \"F\");\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(18);\r\n  doc.text(\"REPORTE DE ORDEN\", 595.28 / 2, 25, { align: \"center\" });\r\n\r\n  doc.setTextColor(\"#333\");\r\n\r\n  // TTULO\r\n  const title = `Orden: ${selectedOrder?.ordenTrabajo || selectedOrder?.id || \"\"}`;\r\n  doc.setFontSize(14);\r\n  doc.text(title, margin, 70);\r\n\r\n  doc.setFontSize(10);\r\n  doc.text(`Generado: ${new Date().toLocaleString()}`, margin, 88);\r\n\r\n  // --------------------------------------------\r\n  // TABLA INFO\r\n  // --------------------------------------------\r\n  const rows = [];\r\n  rows.push([\"Orden Trabajo\", String(selectedOrder?.ordenTrabajo || selectedOrder?.id || \"\")]);\r\n  rows.push([\"Cliente\", String(selectedOrder?.clientName || selectedOrder?.cliente?.nombre || \"\")]);\r\n\r\n  const progress = Number(selectedOrder?.progress ?? selectedOrder?.progreso ?? 0);\r\n  const delta = computeDailyProgressDelta();\r\n\r\n  rows.push([\"Progreso\", `${progress}%`]);\r\n  if (delta !== null) rows.push([\"Avance del d铆a\", `${delta >= 0 ? \"+\" : \"\"}${delta}%`]);\r\n\r\n  rows.push([\"Prioridad\", selectedOrder?.prioridad || \"\"]);\r\n  rows.push([\"Fecha L铆mite\", selectedOrder?.fechaLimite || \"-\"]);\r\n\r\n  const techs =\r\n    (Array.isArray(selectedOrder?.tecnicos)\r\n      ? selectedOrder.tecnicos\r\n      : selectedOrder?.tecnicoAsignado\r\n      ? [selectedOrder.tecnicoAsignado]\r\n      : []\r\n    )\r\n      .map(t => t?.nombre || t?.name || \"\")\r\n      .join(\", \");\r\n\r\n  rows.push([\"T茅cnicos\", techs]);\r\n  rows.push([\"Flujo Actual\", selectedOrder?.estado || selectedOrder?.status || \"\"]);\r\n\r\n  if (selectedOrder?.safetyChecklistCompleted) {\r\n    rows.push([\"Check Seguridad\", \"Completado\"]);\r\n  }\r\n\r\n  doc.autoTable({\r\n    startY: 110,\r\n    head: [[\"Campo\", \"Valor\"]],\r\n    body: rows,\r\n    theme: \"grid\",\r\n    styles: { fontSize: 10 },\r\n    headStyles: { fillColor: [10, 74, 138], textColor: 255 }\r\n  });\r\n\r\n  // --------------------------------------------\r\n  // TABLA MATERIALES (RECEPCIN REAL)\r\n  // --------------------------------------------\r\n  let cursorY = doc.lastAutoTable.finalY + 20;\r\n  const materials = buildMaterials();\r\n\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.text(\"Materiales Recepcionados\", margin, cursorY);\r\n\r\n  doc.autoTable({\r\n    startY: cursorY + 10,\r\n    head: [[\"Material\", \"Requerido\", \"Recibido\", \"Faltante\"]],\r\n    body: materials.map(m => [m.name, m.required, m.received, m.missing]),\r\n    theme: \"grid\",\r\n    styles: { fontSize: 9 },\r\n    headStyles: { fillColor: [10, 74, 138], textColor: 255 }\r\n  });\r\n\r\n  // --------------------------------------------\r\n  // GUARDAR PDF\r\n  // --------------------------------------------\r\n  doc.save(`Reporte_Orden_${selectedOrder?.ordenTrabajo || selectedOrder?.id || \"\"}.pdf`);\r\n};\r\n\r\n\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg p-4\">\r\n              <h3 className=\"font-medium mb-4 flex items-center space-x-2\">\r\n                <Icon name=\"Settings\" size={20} />\r\n                <span>Controles Operativos</span>\r\n              </h3>\r\n\r\n              {/* Shift Status */}\r\n              <div className=\"mb-4 p-3 bg-muted rounded-lg\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"font-medium\">Estado del Turno</div>\r\n                    <div className=\"text-sm text-muted-foreground\">8:00 - 18:00</div>\r\n                  </div>\r\n                  <div className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                    isWorkingHours \r\n                      ? 'bg-green-100 text-green-700' :'bg-red-100 text-red-700'\r\n                  }`}>\r\n                    {isWorkingHours ? 'Activo' : 'Inactivo'}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Order Summary */}\r\n              <div className=\"mb-4\">\r\n                <div className=\"text-sm text-muted-foreground mb-2\">Resumen rdenes</div>\r\n                <div className=\"text-2xl font-bold\">{totalOrders}</div>\r\n                <div className=\"text-sm text-muted-foreground\">rdenes activas</div>\r\n              </div>\r\n\r\n              \r\n\r\n              {/* Selected Order Info */}\r\n              {selectedOrder && (\r\n                <div className=\"mb-4 p-3 bg-primary/10 rounded-lg border border-primary/20 overflow-hidden\">\r\n                  <div className=\"font-medium mb-2 text-center\">Orden Seleccionada</div>\r\n                  <div className=\"text-sm grid grid-cols-2 gap-3\">\r\n                    {/* helpers defined in component scope: formatProgress, formatDate */}\r\n                    <div className=\"truncate\">\r\n                      <strong className=\"block\">Orden Trabajo</strong>\r\n                      <span className=\"block mt-1 font-medium\">{selectedOrder?.ordenTrabajo || selectedOrder?.id}</span>\r\n                    </div>\r\n\r\n                    <div className=\"truncate\">\r\n                      <strong className=\"block\">Progreso</strong>\r\n                      <span className=\"block mt-1\">\r\n                        {(() => {\r\n                          // Collect possible progress sources (many aliases)\r\n                          const candidates = [\r\n                            selectedOrder?.progress,\r\n                            selectedOrder?.progreso,\r\n                            selectedOrder?.raw?.progreso,\r\n                            selectedOrder?.raw?.estadoProgreso,\r\n                            selectedOrder?.raw?.progress,\r\n                            selectedOrder?.raw?.estado,\r\n                            selectedOrder?.raw?.porcentaje,\r\n                            selectedOrder?.porcentaje,\r\n                          ].filter(v => v !== undefined && v !== null);\r\n\r\n                          // normalize helper (reuse logic similar to formatProgress but return numeric percent)\r\n                          const normalizeNumericPercent = (val) => {\r\n                            if (val === null || val === undefined || val === '') return NaN;\r\n                            const s = (typeof val === 'string') ? val.trim() : String(val);\r\n                            // strip non numeric except dot and minus\r\n                            const cleaned = s.replace(/[^0-9.+-]/g, '');\r\n                            const n = Number(cleaned);\r\n                            if (Number.isNaN(n)) return NaN;\r\n                            let num = n;\r\n                            if (num > 0 && num <= 1) num = num * 100;\r\n                            else if (num > 100) {\r\n                              const maybe = num / 100;\r\n                              if (maybe > 0 && maybe <= 100) num = maybe;\r\n                            }\r\n                            if (num < 0) num = 0;\r\n                            if (num > 100) num = 100;\r\n                            return num;\r\n                          };\r\n\r\n                          let best = NaN;\r\n                          for (const c of candidates) {\r\n                            const n = normalizeNumericPercent(c);\r\n                            if (Number.isNaN(n)) continue;\r\n                            // prefer values that look like whole percentages (>=1)\r\n                            if (n >= 1 && (Number.isNaN(best) || n > best)) {\r\n                              best = n; // pick the largest clear percentage\r\n                            } else if (Number.isNaN(best)) {\r\n                              best = n;\r\n                            }\r\n                          }\r\n\r\n                          // fallback to any available raw if none normalized\r\n                          const fallback = candidates.length ? candidates[0] : null;\r\n\r\n                          if (!Number.isNaN(best)) return formatProgress(best);\r\n                          if (fallback !== null && fallback !== undefined) return formatProgress(fallback);\r\n                          return '0%';\r\n                        })()}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"col-span-2\">\r\n                      <strong className=\"block\">Cliente</strong>\r\n                      <span className=\"block mt-1 break-words\">{selectedOrder?.clientName || selectedOrder?.clientLabel || (selectedOrder?.cliente && (selectedOrder.cliente.nombre || selectedOrder.cliente)) || ''}</span>\r\n                    </div>\r\n\r\n                    <div className=\"col-span-2\">\r\n                      <strong className=\"block\">Proyecto</strong>\r\n                      <span className=\"block mt-1 break-words\">\r\n                        {(\r\n                          selectedOrder?.projectRef ||\r\n                          selectedOrder?.proyectoNombre ||\r\n                          selectedOrder?.raw?.proyecto ||\r\n                          selectedOrder?.raw?.projectName ||\r\n                          selectedOrder?.raw?.project ||\r\n                          selectedOrder?.project?.name ||\r\n                          selectedOrder?.project?.nombre ||\r\n                          ''\r\n                        )}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"truncate\">\r\n                      <strong className=\"block\">Prioridad</strong>\r\n                      <span className=\"block mt-1\">{(resolvePriority()) || selectedOrder?.raw?.prioridad || selectedOrder?.raw?.estado || selectedOrder?.estado || ''}</span>\r\n                    </div>\r\n\r\n                    <div className=\"truncate\">\r\n                      <strong className=\"block\">Fecha l铆mite</strong>\r\n                      <span className=\"block mt-1\">\r\n                        {(() => {\r\n                          const rawDate = selectedOrder?.fechaLimite || selectedOrder?.estimatedCompletion || selectedOrder?.proyectoFecha || selectedOrder?.raw?.fechaLimite || selectedOrder?.raw?.fecha || selectedOrder?.raw?.estimatedCompletion || selectedOrder?.raw?.fechaEstimada || '';\r\n                          try {\r\n                            return formatDate(rawDate);\r\n                          } catch (e) {\r\n                            return rawDate || '';\r\n                          }\r\n                        })()}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* Materiales - recibidos y faltantes */}\r\n                    <div className=\"col-span-2 mt-1\">\r\n                      <strong className=\"block mb-1\">Materiales</strong>\r\n                      {(() => {\r\n                        const reception = selectedOrder?.recepcionMateriales || selectedOrder?.raw?.recepcionMateriales || { materials: [] };\r\n                        const materials = selectedOrder?.materials;\r\n                        \r\n                        // Calcular totales desde recepcionMateriales si existen\r\n                        const totalReceived = reception?.materials?.reduce((sum, m) => sum + (Number(m.received) || 0), 0) || reception?.cantidadRecibida || reception?.received || materials?.received || 0;\r\n                        const totalRequired = reception?.materials?.reduce((sum, m) => sum + (Number(m.required) || 0), 0) || materials?.total || 0;\r\n                        const totalPending = Math.max(0, totalRequired - totalReceived);\r\n                        \r\n                        return (\r\n                          <div className=\"flex items-center gap-2 text-sm\">\r\n                            <span className=\"text-green-600 font-semibold\">{totalReceived}</span>\r\n                            <span className=\"text-muted-foreground\">/</span>\r\n                            <span className=\"font-semibold\">{totalRequired}</span>\r\n                            {totalPending > 0 && (\r\n                              <>\r\n                                <span className=\"text-muted-foreground\"></span>\r\n                                <span className=\"text-orange-600 font-medium flex items-center gap-1\">\r\n                                  <Icon name=\"AlertCircle\" size={14} />\r\n                                  {totalPending} faltantes\r\n                                </span>\r\n                              </>\r\n                            )}\r\n                          </div>\r\n                        );\r\n                      })()}\r\n                    </div>\r\n\r\n                    {/* T茅cnicos ocupa toda la fila en caso de necesitar m谩s espacio */}\r\n                    {(() => {\r\n                      const fromSelected = (selectedOrder?.assignedTechnicians || selectedOrder?.tecnicoAsignado || selectedOrder?.tecnicos || []);\r\n                      let techArray = Array.isArray(fromSelected) ? fromSelected : (fromSelected ? [fromSelected] : []);\r\n                      if (!techArray.length && selectedOrder?.raw) {\r\n                        const rawTech = selectedOrder.raw.tecnicoAsignado || selectedOrder.raw.tecnicos || selectedOrder.raw.assignedTechnicians || null;\r\n                        if (rawTech) techArray = Array.isArray(rawTech) ? rawTech : [rawTech];\r\n                      }\r\n                      if (!techArray.length) return null;\r\n                      const names = techArray.map(t => (t?.name || t?.nombre || (typeof t === 'string' ? t : ''))).filter(Boolean);\r\n                      if (!names.length) return null;\r\n                      return (\r\n                        <div className=\"truncate col-span-2 mt-1\">\r\n                          <strong className=\"block\">T茅cnicos</strong>\r\n                          <span className=\"block mt-1\">{names.join(', ')}</span>\r\n                        </div>\r\n                      );\r\n                    })()}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Quick Actions */}\r\n              <div className=\"space-y-2\">\r\n                {selectedOrder && (\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"outline\"\r\n                    className=\"w-full\"\r\n                    iconName=\"RefreshCw\"\r\n                    onClick={() => onRevertStatus?.(selectedOrder)}\r\n                  >\r\n                    Regresar progreso\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  className=\"w-full\"\r\n                  iconName=\"FileText\"\r\n                  onClick={async () => {\r\n                    try {\r\n                      await generateReport();\r\n                    } catch (e) {\r\n                      // fallback: no-op\r\n                    }\r\n                  }}\r\n                >\r\n                  Generar Reporte\r\n                </Button>\r\n                \r\n                \r\n              </div>\r\n\r\n              {/* Working Hours Reminder */}\r\n              {!isWorkingHours && (\r\n                <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n                  <div className=\"flex items-start space-x-2\">\r\n                    <Icon name=\"AlertTriangle\" size={16} className=\"text-yellow-600 mt-0.5\" />\r\n                    <div className=\"text-sm\">\r\n                      <div className=\"font-medium text-yellow-800\">Fuera de Horario</div>\r\n                      <div className=\"text-yellow-700\">\r\n                        Turno de trabajo: 8:00 - 18:00\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default WorkflowControls;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport requisiService from '../../../services/requisiService';\r\nimport useGastos from '../../../hooks/useGastos';\r\nimport useOperacAlt from '../../../hooks/useOperacAlt';\r\n\r\nconst MaterialReceptionPanel = ({ workOrders = [], onMaterialReception, selectedOrder: propSelectedOrder }) => {\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [receptionData, setReceptionData] = useState({ received: 0, notes: '', issues: [] });\r\n  const [newIssue, setNewIssue] = useState('');\r\n  const [approvedMaterials, setApprovedMaterials] = useState([]);\r\n  const [approvedSource, setApprovedSource] = useState('');\r\n  const [materialsReception, setMaterialsReception] = useState([]);\r\n  const [orderMaterialsCache, setOrderMaterialsCache] = useState({});\r\n  const { getGastos } = useGastos();\r\n  const { updateWorkOrder } = useOperacAlt();\r\n\r\n  // Persist approved materials per-order to localStorage (taller) so previews survive reloads\r\n  const TALLER_PREFIX = 'wb_taller_approved_';\r\n  const TALLER_RECEIVED_PREFIX = 'wb_taller_received_';\r\n  const saveApprovedToTaller = (orderKey, materials, source) => {\r\n    try {\r\n      if (!orderKey) return;\r\n      const payload = { materials, source, updatedAt: Date.now() };\r\n      localStorage.setItem(`${TALLER_PREFIX}${orderKey}`, JSON.stringify(payload));\r\n    } catch (e) { /* ignore storage errors */ }\r\n  };\r\n\r\n  const loadApprovedFromTaller = (orderKey) => {\r\n    try {\r\n      if (!orderKey) return null;\r\n      const raw = localStorage.getItem(`${TALLER_PREFIX}${orderKey}`);\r\n      if (!raw) return null;\r\n      try {\r\n        const parsed = JSON.parse(raw);\r\n        return parsed;\r\n      } catch (e) { return null; }\r\n    } catch (e) { return null; }\r\n  };\r\n\r\n  const saveReceptionToTaller = (orderKey, receptionPayload) => {\r\n    try {\r\n      if (!orderKey) return;\r\n      localStorage.setItem(`${TALLER_RECEIVED_PREFIX}${orderKey}`, JSON.stringify({ ...receptionPayload, updatedAt: Date.now() }));\r\n    } catch (e) {}\r\n  };\r\n\r\n  const loadReceptionFromTaller = (orderKey) => {\r\n    try {\r\n      if (!orderKey) return null;\r\n      const raw = localStorage.getItem(`${TALLER_RECEIVED_PREFIX}${orderKey}`);\r\n      if (!raw) return null;\r\n      return JSON.parse(raw);\r\n    } catch (e) { return null; }\r\n  };\r\n\r\n  const normalizeMaterialsForCache = (materials) => {\r\n    if (!Array.isArray(materials)) return [];\r\n    if (materials.length === 0) return [];\r\n    const first = materials[0];\r\n    // If items are in the approved-flag heuristic shape (name/required/received), map to article-like shape\r\n    if (first && (first.required !== undefined || first.received !== undefined) && !first.codigo && !first.descripcion) {\r\n      return materials.map(it => ({\r\n        codigo: it?.codigo || '',\r\n        descripcion: it?.name || it?.nombre || it?.descripcion || 'Sin descripci贸n',\r\n        cantidad: Number(it?.required ?? 0),\r\n        cantidadConUnidad: `${Number(it?.required ?? 0)}`,\r\n        raw: it\r\n      }));\r\n    }\r\n    // otherwise normalize/aggregate into canonical shape\r\n    return normalizeAndAggregate(materials);\r\n  };\r\n\r\n  const initMaterialsReception = (materials, persisted = null) => {\r\n    if (!Array.isArray(materials)) return [];\r\n    return materials.map((m, idx) => {\r\n      const key = (m.codigo || m.descripcion || m.descripcion || (`_${idx}`)).toString();\r\n      const required = Number(m.cantidad ?? m.required ?? m.qty ?? 0) || 0;\r\n      const persistedEntry = persisted && Array.isArray(persisted?.materials) ? persisted.materials.find(p => (p.codigo || p.descripcion) === (m.codigo || m.descripcion)) : null;\r\n      const received = persistedEntry ? Number(persistedEntry.received || 0) : 0;\r\n      return {\r\n        key,\r\n        codigo: m.codigo || null,\r\n        descripcion: m.descripcion || m.nombre || m.name || '',\r\n        required,\r\n        received,\r\n        missing: Math.max(0, required - received),\r\n        raw: m.raw || m\r\n      };\r\n    });\r\n  };\r\n\r\n  const setCacheAndPersist = (orderKey, materials, source) => {\r\n    if (!orderKey) return;\r\n    const normalized = normalizeMaterialsForCache(materials);\r\n    setOrderMaterialsCache(prev => ({ ...prev, [orderKey]: { materials: normalized, source } }));\r\n    saveApprovedToTaller(orderKey, normalized, source);\r\n  };\r\n\r\n  // Utility to summarize materials for logging\r\n  const summarizeMaterials = (materials) => {\r\n    if (!Array.isArray(materials)) return [];\r\n    return materials.map(m => ({ codigo: m?.codigo || m?.id || null, descripcion: m?.descripcion || m?.nombre || m?.name || null, cantidad: m?.cantidad ?? m?.required ?? m?.qty ?? null }));\r\n  };\r\n\r\n\r\n\r\n  // On workOrders change, preload any persisted taller materials so previews are instant\r\n  useEffect(() => {\r\n    if (!Array.isArray(workOrders) || workOrders.length === 0) return;\r\n    const initial = {};\r\n    for (const order of workOrders) {\r\n      const orderKey = order?.ordenTrabajo || order?.id || order?.folio || '';\r\n      if (!orderKey) continue;\r\n      // if we already have cache, skip\r\n      if (orderMaterialsCache[orderKey]) continue;\r\n      const payload = loadApprovedFromTaller(orderKey);\r\n      if (payload && Array.isArray(payload.materials)) {\r\n        initial[orderKey] = { materials: payload.materials, source: payload.source || 'taller' };\r\n      }\r\n    }\r\n    if (Object.keys(initial).length) {\r\n      setOrderMaterialsCache(prev => ({ ...initial, ...prev }));\r\n    }\r\n  }, [workOrders]);\r\n\r\n  const handleOrderSelect = (order) => {\r\n    setSelectedOrder(order);\r\n    setReceptionData({\r\n      received: order?.materials?.received || 0,\r\n      notes: '',\r\n      issues: order?.materials?.issues || []\r\n    });\r\n    setApprovedSource('');\r\n    // Always load materials for the selected order\r\n    computeApprovedMaterialsFromOrder(order, true);\r\n  };\r\n\r\n  const handleForceSearch = async () => {\r\n    // allow user to force a search by selectedOrder or by manual key\r\n    const orderKey = selectedOrder ? (selectedOrder?.ordenTrabajo || selectedOrder?.id || selectedOrder?.folio || (selectedOrder?.raw && (selectedOrder.raw.id || selectedOrder.raw.numeroOrdenTrabajo))) : window.prompt('Introduce clave de orden (ej. OT-2025-13 o PO-...)');\r\n    if (!orderKey) return;\r\n    console.debug('[MaterialReceptionPanel] force search for key', orderKey);\r\n    const fakeOrder = { ordenTrabajo: orderKey, id: orderKey, folio: orderKey, raw: { id: orderKey, numeroOrdenTrabajo: orderKey } };\r\n    // run the same computation path\r\n    await computeApprovedMaterialsFromOrder(fakeOrder);\r\n    setApprovedSource(prev => prev ? `${prev}|force` : 'force');\r\n  };\r\n\r\n  // heuristics to identify approved items from various shapes\r\n  const extractApprovedFromArray = (arr) => {\r\n    if (!Array.isArray(arr)) return [];\r\n    return arr\r\n      .filter(item => {\r\n        if (!item) return false;\r\n        const s = String(item?.status || item?.estado || item?.approved || item?.aprobado || '').toLowerCase();\r\n        if (s.includes('aprob')) return true;\r\n        if (item?.approved === true) return true;\r\n        if (item?.approvedAt || item?.approvedBy) return true;\r\n        return false;\r\n      })\r\n      .map(it => ({\r\n        name: it?.name || it?.nombre || it?.item || it?.producto || 'Material',\r\n        required: Number(it?.required ?? it?.cantidad ?? it?.total ?? it?.qty ?? 0) || 0,\r\n        received: Number(it?.received ?? it?.recibido ?? it?.have ?? 0) || 0,\r\n        raw: it\r\n      }));\r\n  };\r\n\r\n  const computeApprovedMaterialsFromOrder = async (order, updateCache = true) => {\r\n    // Clean, easier-to-follow implementation with explicit try/catch blocks\r\n    if (!order) {\r\n      setApprovedMaterials([]);\r\n      return [];\r\n    }\r\n\r\n    const orderKey = order?.ordenTrabajo || order?.id || order?.folio || order?.raw?.id || '';\r\n\r\n    // Check cache first for performance\r\n    if (orderKey && orderMaterialsCache[orderKey] && !updateCache) {\r\n      const cached = orderMaterialsCache[orderKey];\r\n      setApprovedMaterials(cached.materials);\r\n      setApprovedSource(cached.source);\r\n      const persisted = loadReceptionFromTaller(orderKey);\r\n      setMaterialsReception(initMaterialsReception(cached.materials, persisted));\r\n      return cached.materials;\r\n    }\r\n\r\n    // Gather local candidate arrays to detect any already-approved items\r\n    const candidates = [];\r\n    if (Array.isArray(order?.materials)) candidates.push(...order.materials);\r\n    if (Array.isArray(order?.raw?.materiales)) candidates.push(...order.raw.materiales);\r\n    if (Array.isArray(order?.raw?.materials)) candidates.push(...order.raw.materials);\r\n\r\n    const approvedLocal = extractApprovedFromArray(candidates);\r\n    if (approvedLocal.length) {\r\n      const result = approvedLocal;\r\n      setApprovedMaterials(result);\r\n      setApprovedSource('local');\r\n      // initialize reception entries (load persisted reception if any)\r\n      const persisted = loadReceptionFromTaller(orderKey);\r\n      setMaterialsReception(initMaterialsReception(result, persisted));\r\n      if (updateCache && orderKey) setCacheAndPersist(orderKey, result, 'local');\r\n      return result;\r\n    }\r\n\r\n    // If the order contains manually added materials (materialesManuales), map them to article shape and show\r\n    if (Array.isArray(order?.materialesManuales) && order.materialesManuales.length) {\r\n      console.debug('[MaterialReceptionPanel] using materialesManuales from order', order.materialesManuales.length);\r\n      const manualMapped = order.materialesManuales.map(it => ({\r\n        codigo: it?.id || it?.codigo || '',\r\n        descripcion: it?.nombreMaterial || it?.descripcionEspecificaciones || it?.nombre || it?.descripcion || it?.item || 'Material manual',\r\n        cantidadConUnidad: `${Number(it?.cantidad ?? 0)}${it?.unidad ? ` ${it.unidad}` : ''}`,\r\n        cantidad: Number(it?.cantidad ?? 0),\r\n        unidad: it?.unidad || '',\r\n        raw: it\r\n      }));\r\n      const result = normalizeAndAggregate(manualMapped);\r\n      setApprovedMaterials(result);\r\n      setApprovedSource('local-manuales');\r\n      const persisted = loadReceptionFromTaller(orderKey);\r\n      setMaterialsReception(initMaterialsReception(result, persisted));\r\n      if (updateCache && orderKey) setCacheAndPersist(orderKey, result, 'local-manuales');\r\n      return result;\r\n    }\r\n\r\n    if (!orderKey) {\r\n      console.debug('[MaterialReceptionPanel] no orderKey found for order', order);\r\n      setApprovedMaterials([]);\r\n      return [];\r\n    }\r\n\r\n    // Helpers\r\n    const normalizeKey = (v) => String(v || '').toLowerCase().replace(/[^a-z0-9]/g, '');\r\n    const onlyDigits = (v) => (String(v || '').match(/\\d+/g) || []).join('');\r\n\r\n    // 1) Try requisitions\r\n    try {\r\n      console.debug('[MaterialReceptionPanel] querying requisitions for', orderKey);\r\n      const resp = await requisiService.getRequisitions({ numeroOrdenTrabajo: orderKey });\r\n      console.debug('[MaterialReceptionPanel] requisitions response', resp?.data?.length ?? 0);\r\n\r\n      if (resp?.success && Array.isArray(resp.data) && resp.data.length) {\r\n        const nor = normalizeKey(orderKey);\r\n        const nd = onlyDigits(orderKey);\r\n        const matchedReqs = resp.data.filter(req => {\r\n          try {\r\n            const keys = [req?.numeroOrdenTrabajo, req?.ordenTrabajo, req?.folio, req?.id, req?.referencia].filter(Boolean).map(String);\r\n            return keys.some(k => {\r\n              const nk = normalizeKey(k);\r\n              const kd = onlyDigits(k);\r\n              if (nk && nor && (nk.includes(nor) || nor.includes(nk))) return true;\r\n              if (kd && nd && kd === nd) return true;\r\n              if (String(k).toLowerCase().includes(String(orderKey).toLowerCase()) || String(orderKey).toLowerCase().includes(String(k).toLowerCase())) return true;\r\n              return false;\r\n            });\r\n          } catch (err) { return false; }\r\n        });\r\n\r\n        console.debug('[MaterialReceptionPanel] matched requisitions count', matchedReqs.length);\r\n        if (matchedReqs.length) {\r\n          const mats = [];\r\n          matchedReqs.forEach(req => {\r\n            const list = Array.isArray(req.materiales) ? req.materiales : (Array.isArray(req.items) ? req.items : []);\r\n            list.forEach(it => mats.push(it));\r\n          });\r\n\r\n          console.debug('[MaterialReceptionPanel] matched requisitions materials count', mats.length);\r\n          if (mats.length) {\r\n            const first = mats[0];\r\n            // If items already have article-like fields, normalize directly\r\n            if (first && (first.codigo || first.descripcion || first.costoUnitario || first.cantidadConUnidad || first.nombre)) {\r\n              const result = normalizeAndAggregate(mats);\r\n              setApprovedMaterials(result);\r\n              setApprovedSource('requisitions-articulos');\r\n              const persisted = loadReceptionFromTaller(orderKey);\r\n              setMaterialsReception(initMaterialsReception(result, persisted));\r\n              if (updateCache && orderKey) setCacheAndPersist(orderKey, result, 'requisitions-articulos');\r\n              return result;\r\n            }\r\n\r\n            // Map generic shapes to article shape\r\n            const mapped = mats.map(it => ({\r\n              codigo: it.id || it.codigo || '',\r\n              descripcion: it.nombre || it.descripcion || it.nombreMaterial || it.producto || it.name || it.item || 'Material sin nombre',\r\n              cantidadConUnidad: `${Number(it.cantidad ?? it.qty ?? it.required ?? 0)}${it.unidad ? ` ${it.unidad}` : ''}`,\r\n              cantidad: Number(it.cantidad ?? it.qty ?? it.required ?? 0),\r\n              unidad: it.unidad || it.unidadMedida || '',\r\n              costoUnitario: it.costoUnitario || it.precioUnitario || it.unitPrice,\r\n              subtotal: it.subtotal,\r\n              raw: it\r\n            }));\r\n\r\n            if (mapped.length) {\r\n              const result = normalizeAndAggregate(mapped);\r\n              setApprovedMaterials(result);\r\n              setApprovedSource('requisitions-materiales');\r\n              const persisted = loadReceptionFromTaller(orderKey);\r\n              setMaterialsReception(initMaterialsReception(result, persisted));\r\n              if (updateCache && orderKey) setCacheAndPersist(orderKey, result, 'requisitions-materiales');\r\n              return result;\r\n            }\r\n          }\r\n\r\n          // As a last resort in requisitions, try approved-flag heuristic across matched requisitions\r\n          const approvedFromReq = [];\r\n          matchedReqs.forEach(req => {\r\n            const list = Array.isArray(req.materiales) ? req.materiales : (Array.isArray(req.items) ? req.items : []);\r\n            approvedFromReq.push(...extractApprovedFromArray(list));\r\n          });\r\n          if (approvedFromReq.length) {\r\n            setApprovedMaterials(approvedFromReq);\r\n            setApprovedSource('requisitions-heuristic');\r\n            const persisted = loadReceptionFromTaller(orderKey);\r\n            setMaterialsReception(initMaterialsReception(approvedFromReq, persisted));\r\n            if (updateCache && orderKey) setCacheAndPersist(orderKey, approvedFromReq, 'requisitions-heuristic');\r\n            return approvedFromReq;\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('[MaterialReceptionPanel] requisitions fetch failed', e?.message || e);\r\n    }\r\n\r\n    // 2) Fallback to gastos (purchase orders)\r\n    try {\r\n      console.debug('[MaterialReceptionPanel] querying gastos via getGastos for orderKey', orderKey);\r\n      const gresp = await getGastos();\r\n      const list = Array.isArray(gresp) ? gresp : (gresp?.items || gresp?.data || []);\r\n      console.debug('[MaterialReceptionPanel] getGastos response length', Array.isArray(list) ? list.length : 0);\r\n\r\n      if (Array.isArray(list) && list.length) {\r\n        const nor = normalizeKey(orderKey);\r\n        const nd = onlyDigits(orderKey);\r\n        const matches = list.filter(po => {\r\n          try {\r\n            const keys = [po?.numeroOrdenTrabajo, po?.orderNumber, po?.numero, po?.folio, po?.id, po?.ordenTrabajo, po?.numeroOrdenCompra].filter(Boolean).map(String);\r\n            return keys.some(k => {\r\n              const nk = normalizeKey(k);\r\n              const kd = onlyDigits(k);\r\n              if (!nk && !kd) return false;\r\n              if (nk && nor && (nk.includes(nor) || nor.includes(nk))) return true;\r\n              if (kd && nd && kd === nd) return true;\r\n              if (String(orderKey).toLowerCase().includes(String(k).toLowerCase()) || String(k).toLowerCase().includes(String(orderKey).toLowerCase())) return true;\r\n              return false;\r\n            });\r\n          } catch (err) { return false; }\r\n        });\r\n\r\n        console.debug('[MaterialReceptionPanel] gastos matches count', matches.length);\r\n        if (matches.length) {\r\n          const articles = [];\r\n          matches.forEach(m => {\r\n            const items = Array.isArray(m.articulos) ? m.articulos : (Array.isArray(m.materiales) ? m.materiales : (Array.isArray(m.items) ? m.items : []));\r\n            items.forEach(it => articles.push(it));\r\n          });\r\n\r\n          console.debug('[MaterialReceptionPanel] extracted articles count', articles.length);\r\n          if (articles.length) {\r\n            const res = normalizeAndAggregate(articles);\r\n            setApprovedMaterials(res);\r\n            setApprovedSource('gastos-articulos');\r\n            const persisted = loadReceptionFromTaller(orderKey);\r\n            setMaterialsReception(initMaterialsReception(res, persisted));\r\n            if (updateCache && orderKey) setCacheAndPersist(orderKey, res, 'gastos-articulos');\r\n            return res;\r\n          }\r\n\r\n          // try approved-flag heuristic in gastos\r\n          const approvedFromGastos = [];\r\n          matches.forEach(m => {\r\n            const items = Array.isArray(m.materiales) ? m.materiales : (Array.isArray(m.items) ? m.items : []);\r\n            approvedFromGastos.push(...extractApprovedFromArray(items));\r\n          });\r\n          if (approvedFromGastos.length) {\r\n            setApprovedMaterials(approvedFromGastos);\r\n            setApprovedSource('gastos-heuristic');\r\n            const persisted = loadReceptionFromTaller(orderKey);\r\n            setMaterialsReception(initMaterialsReception(approvedFromGastos, persisted));\r\n            if (updateCache && orderKey) setCacheAndPersist(orderKey, approvedFromGastos, 'gastos-heuristic');\r\n            return approvedFromGastos;\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('[MaterialReceptionPanel] getGastos fetch failed', e?.message || e);\r\n    }\r\n\r\n    // No materials found\r\n    setApprovedMaterials([]);\r\n    setApprovedSource('none');\r\n    if (updateCache && orderKey) setCacheAndPersist(orderKey, [], 'none');\r\n    return [];\r\n  };\r\n\r\n  // Load approved materials for all work orders on mount to show previews\r\n  useEffect(() => {\r\n    const loadMaterialsForAllOrders = async () => {\r\n      for (const order of workOrders) {\r\n        const orderKey = order?.ordenTrabajo || order?.id || order?.folio || '';\r\n        if (orderKey && !orderMaterialsCache[orderKey]) {\r\n          try {\r\n            await computeApprovedMaterialsFromOrder(order, true);\r\n          } catch (e) {\r\n            console.warn('[MaterialReceptionPanel] Failed to load materials for order', orderKey, e);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    if (workOrders.length > 0) {\r\n      loadMaterialsForAllOrders();\r\n    }\r\n  }, [workOrders, orderMaterialsCache]);\r\n\r\n  // If a selected order is provided by the parent (from WorkflowBoard), load it into the panel\r\n  useEffect(() => {\r\n    const handleOrderChange = async () => {\r\n      if (!propSelectedOrder) {\r\n        // Clear materials when no order is selected\r\n        setSelectedOrder(null);\r\n        setApprovedMaterials([]);\r\n        setApprovedSource('');\r\n        return;\r\n      }\r\n      \r\n      const incomingKey = propSelectedOrder?.id || propSelectedOrder?.ordenTrabajo || propSelectedOrder?.folio || '';\r\n      if (!incomingKey) return;\r\n      \r\n      const currentKey = selectedOrder?.id || selectedOrder?.ordenTrabajo || selectedOrder?.folio || '';\r\n      \r\n      // Always process if keys are different or if no current order\r\n      if (String(currentKey) !== String(incomingKey) || !selectedOrder) {\r\n        // Clear current materials first\r\n        setApprovedMaterials([]);\r\n        setApprovedSource('');\r\n        \r\n        // Set the selected order\r\n        setSelectedOrder(propSelectedOrder);\r\n        \r\n        // Load existing reception data from database (recepcionMateriales field) or localStorage\r\n        // Los datos pueden estar en propSelectedOrder.recepcionMateriales O en propSelectedOrder.raw.recepcionMateriales\r\n        const dbReception = propSelectedOrder?.recepcionMateriales || propSelectedOrder?.raw?.recepcionMateriales;\r\n        const localReception = loadReceptionFromTaller(incomingKey);\r\n        \r\n        // Prefer database data over localStorage\r\n        const existingReception = dbReception || localReception;\r\n        \r\n        if (existingReception) {\r\n          // Soportar ambos formatos: nuevos nombres (cantidadRecibida) y antiguos (received)\r\n          const receivedValue = existingReception?.cantidadRecibida ?? existingReception?.received ?? 0;\r\n          const notesValue = existingReception?.notasAdicionales ?? existingReception?.notes ?? '';\r\n          const issuesValue = existingReception?.problemasFaltantes ?? existingReception?.issues ?? [];\r\n          \r\n          setReceptionData({\r\n            received: receivedValue,\r\n            notes: notesValue,\r\n            issues: Array.isArray(issuesValue) ? issuesValue : []\r\n          });\r\n          \r\n          // Load existing materials reception data\r\n          if (Array.isArray(existingReception?.materials) && existingReception.materials.length > 0) {\r\n            setMaterialsReception(existingReception.materials);\r\n          }\r\n        } else {\r\n          // No existing reception, use defaults\r\n          setReceptionData({\r\n            received: propSelectedOrder?.materials?.received || 0,\r\n            notes: '',\r\n            issues: propSelectedOrder?.materials?.issues || []\r\n          });\r\n        }\r\n        \r\n        // Force load fresh materials for this specific order ONLY if there's no saved reception data\r\n        // If there's saved reception with materials, we already loaded them above\r\n        if (!existingReception || !existingReception.materials || existingReception.materials.length === 0) {\r\n          try {\r\n            // Force cache/persist when loading a selected order so taller previews update automatically\r\n            await computeApprovedMaterialsFromOrder(propSelectedOrder, true);\r\n          } catch (e) {\r\n            console.warn('[MaterialReceptionPanel] Failed to load materials for selected order', incomingKey, e);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    \r\n    handleOrderChange();\r\n  }, [propSelectedOrder?.id, propSelectedOrder?.ordenTrabajo, propSelectedOrder?.folio]);\r\n\r\n  const handleAddIssue = () => {\r\n    if (newIssue?.trim()) {\r\n      setReceptionData(prev => ({ ...prev, issues: [...prev?.issues, newIssue?.trim()] }));\r\n      setNewIssue('');\r\n    }\r\n  };\r\n\r\n  const handleMaterialReceivedChange = (key, value) => {\r\n    setMaterialsReception(prev => {\r\n      const updated = prev.map(m => {\r\n        if (m.key !== key) return m;\r\n        const received = Number(isNaN(Number(value)) ? 0 : Number(value));\r\n        return { ...m, received, missing: Math.max(0, (Number(m.required) || 0) - received) };\r\n      });\r\n      // persist draft reception for this order\r\n      try {\r\n        const orderKey = selectedOrder ? (selectedOrder?.ordenTrabajo || selectedOrder?.id || selectedOrder?.folio || '') : '';\r\n        if (orderKey) saveReceptionToTaller(orderKey, { materials: updated, notes: receptionData?.notes, issues: receptionData?.issues });\r\n      } catch (e) {}\r\n      // also update total received in receptionData\r\n      try {\r\n        const totalReceived = updated.reduce((s, it) => s + (Number(it.received) || 0), 0);\r\n        setReceptionData(prev => ({ ...prev, received: totalReceived }));\r\n      } catch (e) {}\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  const handleRemoveIssue = (index) => {\r\n    setReceptionData(prev => ({ ...prev, issues: prev?.issues?.filter((_, i) => i !== index) }));\r\n  };\r\n\r\n  const handleSubmitReception = async () => {\r\n    if (selectedOrder) {\r\n      const orderKey = selectedOrder?.ordenTrabajo || selectedOrder?.id || selectedOrder?.folio || '';\r\n      const orderId = selectedOrder?.id;\r\n      \r\n      // Calcular total de pendientes (missing) sumando todos los materiales\r\n      const pendientes = materialsReception.reduce((sum, material) => {\r\n        return sum + (material.missing || 0);\r\n      }, 0);\r\n      \r\n      const status = receptionData?.received >= (selectedOrder?.materials?.total || 0) ? 'complete' : 'partial';\r\n      \r\n      // Build complete payload with all reception details\r\n      const receptionPayload = {\r\n        ...receptionData,\r\n        status,\r\n        materials: materialsReception,\r\n        orderKey,\r\n        pendientes,\r\n        orderData: {\r\n          ordenTrabajo: selectedOrder?.ordenTrabajo,\r\n          cliente: selectedOrder?.cliente,\r\n          proyecto: selectedOrder?.proyecto,\r\n          total: selectedOrder?.materials?.total\r\n        },\r\n        registeredAt: Date.now(),\r\n        updatedAt: Date.now()\r\n      };\r\n      \r\n      // Save to taller localStorage (allows updates)\r\n      try { \r\n        if (orderKey) {\r\n          saveReceptionToTaller(orderKey, receptionPayload);\r\n        }\r\n      } catch(e) {\r\n        console.error('[MaterialReceptionPanel] Error guardando recepci贸n localStorage:', e);\r\n      }\r\n      \r\n      // Save to database using useOperacAlt\r\n      try {\r\n        if (orderId) {\r\n          const dbPayload = {\r\n            recepcionMateriales: {\r\n              // Guardar con ambos formatos para compatibilidad\r\n              received: receptionData.received,\r\n              cantidadRecibida: receptionData.received,\r\n              notes: receptionData.notes,\r\n              notasAdicionales: receptionData.notes,\r\n              issues: receptionData.issues,\r\n              problemasFaltantes: receptionData.issues,\r\n              pendientes: pendientes,\r\n              totalPendientes: pendientes,\r\n              status,\r\n              materials: materialsReception,\r\n              updatedAt: new Date().toISOString()\r\n            }\r\n          };\r\n          \r\n          const result = await updateWorkOrder(orderId, dbPayload);\r\n          \r\n          if (result) {\r\n            // Actualizar selectedOrder localmente con los datos guardados para que se muestren inmediatamente\r\n            setSelectedOrder(prev => ({\r\n              ...prev,\r\n              recepcionMateriales: dbPayload.recepcionMateriales\r\n            }));\r\n          } else {\r\n            console.error('[MaterialReceptionPanel] Error al guardar en BD');\r\n          }\r\n        }\r\n      } catch(e) {\r\n        console.error('[MaterialReceptionPanel] Error guardando recepci贸n en BD:', e);\r\n      }\r\n      \r\n      // Notify parent component with complete payload including recepcionMateriales\r\n      onMaterialReception?.(selectedOrder?.id, {\r\n        ...receptionPayload,\r\n        recepcionMateriales: {\r\n          received: receptionData.received,\r\n          cantidadRecibida: receptionData.received,\r\n          notes: receptionData.notes,\r\n          notasAdicionales: receptionData.notes,\r\n          issues: receptionData.issues,\r\n          problemasFaltantes: receptionData.issues,\r\n          pendientes: pendientes,\r\n          totalPendientes: pendientes,\r\n          status,\r\n          materials: materialsReception,\r\n          updatedAt: new Date().toISOString()\r\n        }\r\n      });\r\n      \r\n      // Clear form\r\n      setSelectedOrder(null);\r\n      setReceptionData({ received: 0, notes: '', issues: [] });\r\n      setMaterialsReception([]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border rounded-lg p-6\">\r\n      <div className=\"flex items-center space-x-2 mb-6\">\r\n        <Icon name=\"Package\" className=\"text-blue-500\" size={24} />\r\n        <h2 className=\"text-xl font-bold\">Recepci贸n de Materiales</h2>\r\n        {process.env.NODE_ENV !== 'production' && (\r\n          <div className=\"ml-3 inline-flex items-center space-x-2\">\r\n            <div className=\"inline-flex items-center px-2 py-0.5 rounded-full bg-gray-100 text-xs text-gray-700 border\">\r\n              <span className=\"font-medium mr-2\">Aprobados:</span>\r\n              <span className=\"font-semibold\">{approvedMaterials?.length ?? 0}</span>\r\n              <span className=\"text-[10px] ml-2 text-muted-foreground\">{approvedSource || ''}</span>\r\n            </div>\r\n            <Button size=\"xs\" variant=\"outline\" onClick={handleForceSearch} iconName=\"Search\">Buscar aprobados</Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Orders List */}\r\n        <div>\r\n          <h3 className=\"font-medium mb-3\">rdenes Pendientes</h3>\r\n          <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n            {workOrders?.map((order) => {\r\n              const orderKey = order?.ordenTrabajo || order?.id || order?.folio || '';\r\n              const cachedMaterials = orderMaterialsCache[orderKey];\r\n              const existingReception = loadReceptionFromTaller(orderKey);\r\n              \r\n              return (\r\n                <div\r\n                  key={order?.ordenTrabajo || order?.id}\r\n                  onClick={() => handleOrderSelect(order)}\r\n                  className={`p-3 border rounded-lg cursor-pointer transition-colors ${(selectedOrder?.ordenTrabajo || selectedOrder?.id) === (order?.ordenTrabajo || order?.id) ? 'border-primary bg-primary/10' : 'border-muted hover:border-primary/50'}`}\r\n                >\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"font-medium\">{order?.ordenTrabajo || order?.id}</div>\r\n                        {existingReception && (\r\n                          <span className=\"inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-blue-100 text-blue-700 border border-blue-200\">\r\n                             Recepci贸n guardada\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"text-sm text-muted-foreground\">{order?.clientName}</div>\r\n                      {/* Mostrar estad铆sticas de materiales */}\r\n                      {(() => {\r\n                        const reception = existingReception || { materials: [] };\r\n                        const totalRequired = cachedMaterials?.materials?.reduce((sum, m) => sum + (Number(m.cantidad) || 0), 0) || order?.materials?.total || 0;\r\n                        const totalReceived = reception?.materials?.reduce((sum, m) => sum + (Number(m.received) || 0), 0) || reception?.cantidadRecibida || reception?.received || order?.materials?.received || 0;\r\n                        const totalPending = Math.max(0, totalRequired - totalReceived);\r\n                        \r\n                        return (\r\n                          <div className=\"text-sm\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <span className=\"font-medium\">Materiales:</span>\r\n                              <span className=\"text-green-600 font-semibold\">{totalReceived}</span>\r\n                              <span className=\"text-muted-foreground\">/</span>\r\n                              <span className=\"font-semibold\">{totalRequired}</span>\r\n                              {totalPending > 0 && (\r\n                                <>\r\n                                  <span className=\"text-muted-foreground\"></span>\r\n                                  <span className=\"text-orange-600 font-medium flex items-center gap-1\">\r\n                                    <Icon name=\"AlertCircle\" size={14} />\r\n                                    {totalPending} faltantes\r\n                                  </span>\r\n                                </>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })()}\r\n                      \r\n                      {/* Preview de materiales aprobados */}\r\n                      {cachedMaterials && cachedMaterials.materials && cachedMaterials.materials.length > 0 && (\r\n                        <div className=\"mt-2 text-xs text-green-700 bg-green-50 rounded px-2 py-1\">\r\n                          <div className=\"font-medium\"> {cachedMaterials.materials.length} materiales aprobados</div>\r\n                          <div className=\"truncate\">\r\n                            {cachedMaterials.materials.slice(0, 2).map(m => \r\n                              m.descripcion || m.nombre || m.codigo || 'Material'\r\n                            ).join(', ')}\r\n                            {cachedMaterials.materials.length > 2 && '...'}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className={`px-2 py-1 rounded-full text-xs ${order?.materials?.status === 'complete' ? 'bg-green-100 text-green-700' : order?.materials?.status === 'partial' ? 'bg-yellow-100 text-yellow-700' : 'bg-red-100 text-red-700'}`}>\r\n                      {order?.materials?.status === 'complete' ? 'Completo' : order?.materials?.status === 'partial' ? 'Parcial' : 'Pendiente'}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {order?.materials?.issues?.length > 0 && (\r\n                    <div className=\"mt-2 text-xs text-red-600\">{order?.materials?.issues?.length} problema(s) reportado(s)</div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {workOrders?.length === 0 && !selectedOrder && (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n              <Icon name=\"Package\" size={48} className=\"mx-auto mb-2 opacity-50\" />\r\n              <div>No hay 贸rdenes pendientes de recepci贸n</div>\r\n            </div>\r\n          )}\r\n          \r\n          {workOrders?.length === 0 && selectedOrder && (\r\n            <div className=\"p-3 border rounded-lg bg-blue-50 border-blue-200\">\r\n              <div className=\"flex items-center space-x-2 mb-2\">\r\n                <Icon name=\"Info\" size={16} className=\"text-blue-600\" />\r\n                <span className=\"text-sm font-medium text-blue-800\">Orden Seleccionada</span>\r\n              </div>\r\n              <div className=\"text-sm text-blue-700\">\r\n                <div className=\"font-medium\">{selectedOrder?.ordenTrabajo || selectedOrder?.id}</div>\r\n                <div>{selectedOrder?.clientName || selectedOrder?.nombreProyecto}</div>\r\n              </div>\r\n              {(() => {\r\n                const orderKey = selectedOrder?.ordenTrabajo || selectedOrder?.id || selectedOrder?.folio || '';\r\n                const cachedMaterials = orderMaterialsCache[orderKey];\r\n                return cachedMaterials && cachedMaterials.materials && cachedMaterials.materials.length > 0 && (\r\n                  <div className=\"mt-2\">\r\n                    <div className=\"text-xs text-green-700 bg-green-50 rounded px-2 py-1 mb-2\">\r\n                      <div className=\"font-medium\"> {cachedMaterials.materials.length} materiales aprobados</div>\r\n                    </div>\r\n                    \r\n                    {/* Lista compacta de materiales */}\r\n                    <div className=\"space-y-1 max-h-32 overflow-y-auto\">\r\n                      {cachedMaterials.materials.map((material, idx) => (\r\n                        <div key={idx} className=\"text-xs bg-white border rounded px-2 py-1\">\r\n                          <div className=\"font-medium text-gray-800 truncate\">\r\n                            {material?.descripcion || material?.nombre || material?.producto || material?.name || 'Sin descripci贸n'}\r\n                            {!material?.codigo && <span className=\"ml-1 text-gray-500\">(Manual)</span>}\r\n                          </div>\r\n                          <div className=\"text-gray-600\">\r\n                            <span>Descripci贸n: {material?.descripcion || material?.nombre || ''}</span>\r\n                            <span className=\"ml-3\">Cant: {material?.cantidadConUnidad || material?.cantidad || 0}</span>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Reception Form */}\r\n        <div>\r\n          {selectedOrder ? (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"bg-muted p-4 rounded-lg\">\r\n                <h4 className=\"font-medium mb-2\">Verificaci贸n Material - {selectedOrder?.ordenTrabajo || selectedOrder?.id}</h4>\r\n                <div className=\"text-sm space-y-1\">\r\n                  <div><strong>Proyecto:</strong> {selectedOrder?.projectRef}</div>\r\n                  <div><strong>Cliente:</strong> {selectedOrder?.clientName}</div>\r\n                  <div><strong>Total requerido:</strong> {selectedOrder?.materials?.total} items</div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Approved materials list (editable): show per-material required/received and allow editing received counts */}\r\n              {materialsReception && materialsReception.length > 0 && (\r\n                <div className=\"p-3 border rounded-lg bg-white\">\r\n                  <h5 className=\"font-medium mb-2\">Materiales aprobados para recepci贸n</h5>\r\n                  <div className=\"text-sm space-y-3 max-h-64 overflow-y-auto\">\r\n                    {materialsReception.map((m, idx) => (\r\n                      <div key={m.key || idx} className=\"flex items-start justify-between border-b pb-3 gap-4\">\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"font-medium text-sm break-words\">\r\n                            {m.descripcion || 'Sin descripci贸n'}\r\n                            {!m.codigo && <span className=\"ml-2 text-xs text-muted-foreground\">(Agregado manualmente)</span>}\r\n                          </div>\r\n                          <div className=\"text-xs text-muted-foreground mt-1\">\r\n                            <span className=\"font-medium\">Requerido:</span> {m.required}  <span className=\"font-medium\">Pendiente:</span> {m.missing}\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex flex-col items-start space-y-2 flex-shrink-0\">\r\n                          <div className=\"text-xs text-muted-foreground whitespace-nowrap ml-0.5\">Cantidad recibida</div>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <Input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={m.received}\r\n                              onChange={(e) => handleMaterialReceivedChange(m.key, e?.target?.value)}\r\n                              className=\"w-20 text-center\"\r\n                            />\r\n                            <Button size=\"xs\" variant=\"outline\" onClick={() => handleMaterialReceivedChange(m.key, m.required)}>Marcar completo</Button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Issues */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Problemas/Faltantes</label>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex space-x-2\">\r\n                    <Input value={newIssue} onChange={(e) => setNewIssue(e?.target?.value)} placeholder=\"Describir problema o faltante...\" onKeyPress={(e) => e?.key === 'Enter' && handleAddIssue()} />\r\n                    <Button onClick={handleAddIssue} size=\"sm\" iconName=\"Plus\">Agregar</Button>\r\n                  </div>\r\n\r\n                  {receptionData?.issues?.map((issue, index) => (\r\n                    <div key={index} className=\"flex items-center justify-between bg-red-50 p-2 rounded border border-red-200\">\r\n                      <span className=\"text-sm text-red-800\">{issue}</span>\r\n                      <Button size=\"xs\" variant=\"ghost\" onClick={() => handleRemoveIssue(index)} iconName=\"X\" className=\"text-red-600 hover:text-red-800\" />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Notes */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Notas Adicionales</label>\r\n                <textarea value={receptionData?.notes} onChange={(e) => setReceptionData(prev => ({ ...prev, notes: e?.target?.value }))} className=\"w-full p-3 border rounded-lg resize-none\" rows={3} placeholder=\"Observaciones, condiciones especiales, etc...\" />\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex space-x-2 pt-4\">\r\n                <Button onClick={handleSubmitReception} className=\"flex-1\" iconName=\"Check\">\r\n                  {loadReceptionFromTaller(selectedOrder?.ordenTrabajo || selectedOrder?.id || selectedOrder?.folio || '') ? 'Actualizar Recepci贸n' : 'Registrar Recepci贸n'}\r\n                </Button>\r\n                <Button variant=\"outline\" onClick={() => setSelectedOrder(null)}>Cancelar</Button>\r\n              </div>\r\n\r\n              {/* Status Alert */}\r\n              {receptionData?.received < (selectedOrder?.materials?.total || 0) && (\r\n                <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\r\n                  <div className=\"flex items-start space-x-2\">\r\n                    <Icon name=\"AlertTriangle\" size={16} className=\"text-yellow-600 mt-0.5\" />\r\n                    <div className=\"text-sm\">\r\n                      <div className=\"font-medium text-yellow-800\">Material Incompleto</div>\r\n                      <div className=\"text-yellow-700\">Se reportar谩n faltantes a Proyectos y se esperar谩 reposici贸n</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n              <Icon name=\"MousePointer\" size={48} className=\"mx-auto mb-2 opacity-50\" />\r\n              <div>Seleccione una orden para verificar materiales</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Normalize articles to a canonical 'article' shape and aggregate duplicates by code/description\r\nconst normalizeAndAggregate = (arr) => {\r\n  if (!Array.isArray(arr)) return [];\r\n\r\n  const parseQuantity = (q) => {\r\n    if (q == null) return 0;\r\n    if (typeof q === 'number') return q;\r\n    const s = String(q).replace(/,/g, '.');\r\n    const m = s.match(/[-+]?[0-9]*\\.?[0-9]+/);\r\n    return m ? Number(m[0]) : 0;\r\n  };\r\n\r\n  const normalizeItem = (it) => {\r\n    const codigo = it?.codigo || it?.id || '';\r\n    // Priorizar nombre/descripci贸n con m谩s opciones de campos\r\n    const descripcion = it?.descripcion || it?.nombre || it?.nombreMaterial || it?.producto || it?.name || it?.item || (codigo ? '' : 'Sin descripci贸n');\r\n    // try to extract numeric quantity from different fields\r\n    const qty = parseQuantity(it?.cantidadConUnidad ?? it?.cantidad ?? it?.qty ?? it?.required ?? it?.cantidad_total ?? it?.cantidadTotal);\r\n    // try to extract unit if present in cantidadConUnidad\r\n    let unit = '';\r\n    if (it?.unidad) unit = it.unidad;\r\n    else if (it?.cantidadConUnidad) {\r\n      const m = String(it.cantidadConUnidad).match(/[a-zA-Z%]+/);\r\n      unit = m ? m[0] : '';\r\n    }\r\n    return {\r\n      codigo,\r\n      descripcion,\r\n      cantidad: qty,\r\n      unidad: unit,\r\n      cantidadConUnidad: `${qty}${unit ? ` ${unit}` : ''}`,\r\n      costoUnitario: it?.costoUnitario || it?.precioUnitario || it?.unitPrice,\r\n      subtotal: it?.subtotal,\r\n      raw: it\r\n    };\r\n  };\r\n\r\n  const map = new Map();\r\n  arr.forEach(it => {\r\n    const n = normalizeItem(it);\r\n    const key = (n.codigo || n.descripcion || '').toString().toLowerCase().trim();\r\n    if (!map.has(key)) map.set(key, { ...n });\r\n    else {\r\n      const exist = map.get(key);\r\n      exist.cantidad = (Number(exist.cantidad) || 0) + (Number(n.cantidad) || 0);\r\n      exist.cantidadConUnidad = `${exist.cantidad}${exist.unidad ? ` ${exist.unidad}` : ''}`;\r\n      // preserve costoUnitario/subtotal if present on one of them\r\n      if (!exist.costoUnitario && n.costoUnitario) exist.costoUnitario = n.costoUnitario;\r\n      if (!exist.subtotal && n.subtotal) exist.subtotal = n.subtotal;\r\n    }\r\n  });\r\n\r\n  return Array.from(map.values());\r\n};\r\n\r\nexport default MaterialReceptionPanel;","import React, { useState, useEffect } from 'react';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        import { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\n  const SafetyChecklistPanel = ({ workOrders, onSafetyComplete, selectedOrder: propSelectedOrder, onLocalMissingChange }) => {\r\n          const [selectedOrder, setSelectedOrder] = useState(null);\r\n          const [checklist, setChecklist] = useState({});\r\n          const [missingPPE, setMissingPPE] = useState({});\r\n          const [customMissing, setCustomMissing] = useState('');\r\n          const [persistedState, setPersistedState] = useState(null);\r\n\r\n          // localStorage key helper\r\n          const storageKeyFor = (orderKey) => `wb_safety_check_${orderKey}`;\r\n\r\n          const loadLocalState = (orderKey) => {\r\n            try {\r\n              if (!orderKey) return null;\r\n              const raw = localStorage.getItem(storageKeyFor(orderKey));\r\n              if (!raw) return null;\r\n              return JSON.parse(raw);\r\n            } catch (e) {\r\n              return null;\r\n            }\r\n          };\r\n\r\n          const saveLocalState = (orderKey, state) => {\r\n            try {\r\n              if (!orderKey) return;\r\n              localStorage.setItem(storageKeyFor(orderKey), JSON.stringify(state || {}));\r\n            } catch (e) {\r\n            }\r\n          };\r\n\r\n          const safetyItems = [\r\n            {\r\n              id: 'ppe',\r\n              title: 'Equipo de Protecci贸n Personal (EPP)',\r\n              items: [\r\n                'Casco de Seguridad',\r\n                'Gafas de Protecci贸n',\r\n                'Guantes de Trabajo',\r\n                'Calzado de Seguridad',\r\n                'Arn茅s de Seguridad',\r\n                'Respirador N95',\r\n                'Chaleco Reflectivo'\r\n              ]\r\n            },\r\n            {\r\n              id: 'tools',\r\n              title: 'Herramientas y Equipos',\r\n              items: [\r\n                'Herramientas en buen estado',\r\n                'Equipos calibrados',\r\n                'Extensiones el茅ctricas revisadas',\r\n                'Escaleras/andamios seguros',\r\n                'Equipos de soldadura verificados'\r\n              ]\r\n            },\r\n            {\r\n              id: 'procedures',\r\n              title: 'Procedimientos',\r\n              items: [\r\n                'Planos t茅cnicos disponibles',\r\n                'Instrucciones de trabajo claras',\r\n                'Procedimientos de emergencia',\r\n                'Contactos de emergencia visibles',\r\n                'Permisos de trabajo actualizados'\r\n              ]\r\n            }\r\n          ];\r\n\r\n            // Mapping labels for missing-list inference (reusable)\r\n            const PPE_LABEL_MAP = {\r\n              cascoSeguridad: ['casco de seguridad','casco','casco seguridad'],\r\n              gafasProteccion: ['gafas de protecci贸n','gafas de proteccion','gafas'],\r\n              guantesTrabajo: ['guantes de trabajo','guantes'],\r\n              calzadoSeguridad: ['calzado de seguridad','calzado'],\r\n              arnesSeguridad: ['arn茅s de seguridad','arnes de seguridad','arnes','arn茅s'],\r\n              respiradorN95: ['respirador n95','respirador','n95'],\r\n              chalecoReflectivo: ['chaleco reflectivo','chaleco'],\r\n              requiereEstudiosMedicosActualizados: ['estudios medicos actualizados','estudios m茅dicos actualizados','estudios']\r\n            };\r\n\r\n            // Helper: read PPE boolean fields from order (accepts multiple shapes)\r\n            const getPPEValue = (order, field) => {\r\n              if (!order) return false;\r\n              // 1) direct boolean fields (top-level)\r\n              if (order[field] !== undefined) return !!order[field];\r\n              // 2) nested safety object\r\n              if (order.safetyChecklist && order.safetyChecklist[field] !== undefined) return !!order.safetyChecklist[field];\r\n              // 3) raw payload\r\n              if (order.raw && order.raw[field] !== undefined) return !!order.raw[field];\r\n\r\n              // 4) try alternate key forms (snake_case)\r\n              const snake = field.replace(/([A-Z])/g, '_$1').toLowerCase();\r\n              if (order[snake] !== undefined) return !!order[snake];\r\n              if (order.raw && order.raw[snake] !== undefined) return !!order.raw[snake];\r\n\r\n              // 5) if the order stores a list of missing items (safetyChecklistMissing), derive boolean\r\n              const missingList = Array.isArray(order.safetyChecklistMissing)\r\n                ? order.safetyChecklistMissing\r\n                : (Array.isArray(order.raw && order.raw.safetyChecklistMissing) ? order.raw.safetyChecklistMissing : null);\r\n              if (Array.isArray(missingList)) {\r\n                const possibles = PPE_LABEL_MAP[field] || [field];\r\n                const lowerMissing = missingList.map(m => String(m || '').toLowerCase());\r\n                // if any possible label appears in missingList, then the item is missing => return false\r\n                for (const p of possibles) {\r\n                  if (lowerMissing.some(mm => mm.includes(p))) return false;\r\n                }\r\n                // not listed as missing -> assume present\r\n                return true;\r\n              }\r\n              return false;\r\n            };\r\n\r\n            const getRecordedMissing = (order) => {\r\n              if (!order) return [];\r\n              if (Array.isArray(order.safetyChecklistMissing)) return order.safetyChecklistMissing;\r\n              if (order.raw && Array.isArray(order.raw.safetyChecklistMissing)) return order.raw.safetyChecklistMissing;\r\n              return [];\r\n            };\r\n\r\n            const PPE_FIELDS = [\r\n              ['cascoSeguridad','Casco'],\r\n              ['gafasProteccion','Gafas'],\r\n              ['guantesTrabajo','Guantes'],\r\n              ['calzadoSeguridad','Calzado'],\r\n              ['arnesSeguridad','Arn茅s'],\r\n              ['respiradorN95','Respirador'],\r\n              ['chalecoReflectivo','Chaleco'],\r\n              ['requiereEstudiosMedicosActualizados','Estudios']\r\n            ];\r\n\r\n          const handleOrderSelect = (order) => {\r\n            setSelectedOrder(order);\r\n            // Initialize checklist with false values\r\n            const initialChecklist = {};\r\n            \r\n            safetyItems?.forEach(section => {\r\n              section?.items?.forEach((item, index) => {\r\n                const key = `${section?.id}-${index}`;\r\n                initialChecklist[key] = false;\r\n                \r\n              });\r\n            });\r\n            // Merge with any persisted state for this order so marks are not lost\r\n            const orderKey = order?.id || order?.ordenTrabajo || order?.folio || '';\r\n            const saved = loadLocalState(orderKey) || {};\r\n            const mergedChecklist = { ...initialChecklist, ...(saved.checklist || {}) };\r\n            const mergedMissing = { ...(saved.missingPPE || {}) };\r\n            setChecklist(mergedChecklist);\r\n            setMissingPPE(mergedMissing);\r\n            setPersistedState(saved);\r\n          };\r\n\r\n          // If a selected order is provided by the parent (board selection), initialize the panel with it\r\n          useEffect(() => {\r\n            if (!propSelectedOrder) return;\r\n            \r\n            // Only select if it's actually a different order\r\n            const incomingId = propSelectedOrder?.id || propSelectedOrder?.ordenTrabajo || propSelectedOrder?.folio || '';\r\n            const currentId = selectedOrder?.id || selectedOrder?.ordenTrabajo || selectedOrder?.folio || '';\r\n            \r\n            if (incomingId && incomingId !== currentId) {\r\n              handleOrderSelect(propSelectedOrder);\r\n            }\r\n          }, [propSelectedOrder?.id, propSelectedOrder?.ordenTrabajo, propSelectedOrder?.folio]);\r\n\r\n          const handleChecklistChange = (itemKey, checked) => {\r\n            setChecklist(prev => ({\r\n              ...prev,\r\n              [itemKey]: checked\r\n            }));\r\n          };\r\n\r\n          // Mark all items in a section as verified (only affects applicable items)\r\n          const handleMarkAllVerified = (sectionId) => {\r\n            if (!selectedOrder) return;\r\n            const checklistUpdates = {};\r\n            const missingUpdates = {};\r\n            const section = safetyItems.find(s => s.id === sectionId);\r\n            section?.items?.forEach((it, idx) => {\r\n              const key = `${sectionId}-${idx}`;\r\n              let applies = true;\r\n              if (sectionId === 'ppe') {\r\n                const field = PPE_FIELDS[idx]?.[0];\r\n                applies = !!getPPEValue(selectedOrder, field);\r\n              }\r\n              if (applies) {\r\n                checklistUpdates[key] = true;\r\n                missingUpdates[key] = false;\r\n              }\r\n            });\r\n            setChecklist(prev => ({ ...prev, ...checklistUpdates }));\r\n            setMissingPPE(prev => ({ ...prev, ...missingUpdates }));\r\n          };\r\n\r\n          const handleMissingToggle = (itemKey, checked) => {\r\n            setMissingPPE(prev => ({ ...prev, [itemKey]: checked }));\r\n            if (checked) {\r\n              // Uncheck verification if marked missing\r\n              setChecklist(prev => ({ ...prev, [itemKey]: false }));\r\n            }\r\n          };\r\n\r\n          const handleAddCustomMissing = () => {\r\n            if (!customMissing?.trim()) return;\r\n            const key = `custom-${Date.now()}`;\r\n            setMissingPPE(prev => ({ ...prev, [key]: true }));\r\n            setChecklist(prev => ({ ...prev, [key]: false }));\r\n            // store label alongside checklist for rendering\r\n            setChecklist(prev => ({ ...prev, [key + '-label']: customMissing.trim() }));\r\n            setCustomMissing('');\r\n          };\r\n\r\n          // Notify parent about local missing labels for the currently selected order\r\n          // Use a ref to track the last notified value to prevent infinite loops\r\n          const lastNotifiedRef = React.useRef({});\r\n          \r\n          useEffect(() => {\r\n            try {\r\n              if (!onLocalMissingChange) return;\r\n              if (!selectedOrder) return;\r\n              const orderKey = selectedOrder?.id || selectedOrder?.ordenTrabajo || selectedOrder?.folio || '';\r\n              if (!orderKey) return;\r\n              \r\n              const localMissingLabels = Object.keys(missingPPE || {}).filter(k => !!missingPPE[k]).map(k => {\r\n                if (k.startsWith('custom-')) return checklist?.[k + '-label'] || 'Otro';\r\n                const parts = k.split('-');\r\n                const sec = safetyItems.find(s => s.id === parts[0]);\r\n                const idx = Number(parts[1]);\r\n                return sec?.items?.[idx] || 'Otro';\r\n              });\r\n              \r\n              const uniqueLabels = Array.from(new Set(localMissingLabels));\r\n              const labelsKey = JSON.stringify(uniqueLabels);\r\n              \r\n              // Only notify if the value actually changed\r\n              if (lastNotifiedRef.current[orderKey] !== labelsKey) {\r\n                lastNotifiedRef.current[orderKey] = labelsKey;\r\n                onLocalMissingChange(orderKey, uniqueLabels);\r\n              }\r\n            } catch (e) {\r\n              // ignore\r\n            }\r\n          }, [missingPPE, selectedOrder, checklist]);\r\n\r\n          const getCompletionPercentage = () => {\r\n            // Only consider required items in the progress calculation.\r\n            if (!selectedOrder) return 0;\r\n            const requiredKeys = [];\r\n            safetyItems?.forEach(section => {\r\n              section?.items?.forEach((it, idx) => {\r\n                const key = `${section?.id}-${idx}`;\r\n                if (section?.id === 'ppe') {\r\n                  const field = PPE_FIELDS[idx]?.[0];\r\n                  if (getPPEValue(selectedOrder, field)) requiredKeys.push(key);\r\n                } else {\r\n                  requiredKeys.push(key);\r\n                }\r\n              });\r\n            });\r\n            const uniqueReq = Array.from(new Set(requiredKeys));\r\n            if (uniqueReq.length === 0) return 0;\r\n            const checkedItems = uniqueReq.filter(k => !!checklist?.[k]).length;\r\n            const totalItems = uniqueReq.length;\r\n            return totalItems > 0 ? Math.round((checkedItems / totalItems) * 100) : 0;\r\n          };\r\n\r\n          const isChecklistComplete = () => {\r\n            if (!selectedOrder) return false;\r\n            // Only required items must be checked\r\n            const requiredKeys = [];\r\n            safetyItems?.forEach(section => {\r\n              section?.items?.forEach((it, idx) => {\r\n                const key = `${section?.id}-${idx}`;\r\n                if (section?.id === 'ppe') {\r\n                  const field = PPE_FIELDS[idx]?.[0];\r\n                  if (getPPEValue(selectedOrder, field)) requiredKeys.push(key);\r\n                } else {\r\n                  requiredKeys.push(key);\r\n                }\r\n              });\r\n            });\r\n            Object.keys(checklist || {}).forEach(k => { if (k.startsWith('custom-')) requiredKeys.push(k); });\r\n            const uniqueReq = Array.from(new Set(requiredKeys));\r\n            if (uniqueReq.length === 0) return false;\r\n            // If the order already has recorded missing items, do not allow completion\r\n            const recordedMissing = getRecordedMissing(selectedOrder) || [];\r\n            if (recordedMissing.length > 0) return false;\r\n            // Also prevent completion if there are local missing marks\r\n            const localMissingKeys = Object.keys(missingPPE || {}).filter(k => !!missingPPE[k]);\r\n            if (localMissingKeys.length > 0) return false;\r\n            return uniqueReq.every(k => !!checklist?.[k]);\r\n          };\r\n\r\n          // Persist local changes to localStorage whenever they change\r\n          useEffect(() => {\r\n            if (!selectedOrder) return;\r\n            const orderKey = selectedOrder?.id || selectedOrder?.ordenTrabajo || selectedOrder?.folio || '';\r\n            if (!orderKey) return;\r\n            \r\n            const completed = isChecklistComplete();\r\n            const toSave = {\r\n              checklist: checklist || {},\r\n              missingPPE: missingPPE || {},\r\n              completed: completed,\r\n              updatedAt: new Date().toISOString()\r\n            };\r\n            saveLocalState(orderKey, toSave);\r\n            \r\n            // Only update persistedState if completed status actually changed\r\n            setPersistedState(prev => {\r\n              if (prev?.completed !== completed) {\r\n                return toSave;\r\n              }\r\n              return prev;\r\n            });\r\n          }, [checklist, missingPPE, selectedOrder]);\r\n\r\n          const handleSubmitChecklist = () => {\r\n            if (!selectedOrder) return;\r\n            // Build missing list combining recorded (server) and local missing entries\r\n            const recorded = getRecordedMissing(selectedOrder) || [];\r\n            const localMissing = Object.keys(missingPPE || {}).filter(k => !!missingPPE[k]).map(k => {\r\n              if (k.startsWith('custom-')) return checklist?.[k + '-label'] || 'Otro';\r\n              const parts = k.split('-');\r\n              const sec = safetyItems.find(s => s.id === parts[0]);\r\n              const idx = Number(parts[1]);\r\n              return sec?.items?.[idx] || 'Otro';\r\n            });\r\n            const missing = Array.from(new Set([...(recorded || []), ...localMissing]));\r\n\r\n            const completedFlag = isChecklistComplete();\r\n            const payload = {\r\n              completed: completedFlag,\r\n              missingPPE: missing\r\n            };\r\n            // Save completed state locally so it persists even after UI updates\r\n            try {\r\n              const orderKey = selectedOrder?.id || selectedOrder?.ordenTrabajo || selectedOrder?.folio || '';\r\n              const saved = loadLocalState(orderKey) || {};\r\n              const toSave = { ...saved, checklist: checklist || {}, missingPPE: missing || {}, completed: completedFlag, updatedAt: new Date().toISOString() };\r\n              saveLocalState(orderKey, toSave);\r\n              setPersistedState(toSave);\r\n            } catch (e) {}\r\n\r\n            onSafetyComplete?.(selectedOrder?.id, payload);\r\n            // Close panel but keep persisted marks\r\n            setSelectedOrder(null);\r\n            setChecklist({});\r\n            setMissingPPE({});\r\n          };\r\n\r\n          // Whether this order is logically completed (server or local)\r\n          const isCompletedLocked = !!(selectedOrder?.safetyChecklistCompleted || persistedState?.completed);\r\n          const primaryButtonLabel = isCompletedLocked ? 'Actualizar' : 'Completar Verificaci贸n';\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg p-6\">\r\n              <div className=\"flex items-center space-x-2 mb-6\">\r\n                <Icon name=\"Shield\" className=\"text-orange-500\" size={24} />\r\n                <h2 className=\"text-xl font-bold\">Lista de Verificaci贸n de Seguridad</h2>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Orders List */}\r\n                <div>\r\n                  <h3 className=\"font-medium mb-3\">rdenes Pendientes</h3>\r\n                  <div className=\"space-y-2\">\r\n                    {workOrders?.map((order) => (\r\n                      <div\r\n                        key={order?.id}\r\n                        onClick={() => handleOrderSelect(order)}\r\n                        className={`p-3 border rounded-lg cursor-pointer transition-colors ${\r\n                          selectedOrder?.id === order?.id\r\n                            ? 'border-primary bg-primary/10' :'border-muted hover:border-primary/50'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div>\r\n                            <div className=\"font-medium\">{order?.ordenTrabajo || order?.id}</div>\r\n                            <div className=\"text-sm text-muted-foreground\">{order?.clientName}</div>\r\n                          </div>\r\n                            <div className={`px-2 py-1 rounded-full text-xs ${\r\n                              order?.safetyChecklistCompleted \r\n                                ? 'bg-green-100 text-green-700' :'bg-red-100 text-red-700'\r\n                            }`}>\r\n                              {order?.safetyChecklistCompleted ? 'Completo' : 'Pendiente'}\r\n                            </div>\r\n                        </div>\r\n                          {/* PPE List: mostrar en forma de lista vertical */}\r\n                          <div className=\"mt-3\">\r\n                            <div className=\"text-sm font-medium mb-2\">EPP</div>\r\n                            <ul className=\"space-y-1 text-sm\">\r\n                              {PPE_FIELDS.map(([field, label]) => ({ field, label }))\r\n                                .filter(({ field }) => getPPEValue(order, field))\r\n                                .map(({ field, label }) => (\r\n                                  <li key={`${order?.ordenTrabajo || order?.id}-${field}`} className=\"flex items-center justify-between\">\r\n                                    <span className=\"truncate mr-4\">{label}</span>\r\n                                    <span className={`text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700`}>\r\n                                      Requiere\r\n                                    </span>\r\n                                  </li>\r\n                                ))}\r\n                            </ul>\r\n                          </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {workOrders?.length === 0 && (\r\n                    <div className=\"text-center py-8 text-muted-foreground\">\r\n                      <Icon name=\"Shield\" size={48} className=\"mx-auto mb-2 opacity-50\" />\r\n                      <div>No hay 贸rdenes pendientes</div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Safety Checklist */}\r\n                <div className=\"lg:col-span-2\">\r\n                  {selectedOrder ? (\r\n                    <div className=\"space-y-4\">\r\n                      {/* Order Info */}\r\n                      <div className=\"bg-muted p-4 rounded-lg\">\r\n                        <h4 className=\"font-medium mb-2\">Lista de Seguridad - {selectedOrder?.ordenTrabajo || selectedOrder?.id}</h4>\r\n                        <div className=\"text-sm space-y-1\">\r\n                          <div><strong>Proyecto:</strong> {selectedOrder?.projectRef}</div>\r\n                          <div><strong>Cliente:</strong> {selectedOrder?.clientName}</div>\r\n                        </div>\r\n                        \r\n                        {/* Progress */}\r\n                        <div className=\"mt-3\">\r\n                          <div className=\"flex items-center justify-between text-sm mb-1\">\r\n                            <span>Progreso de Verificaci贸n</span>\r\n                            <span className=\"font-medium\">{getCompletionPercentage()}%</span>\r\n                          </div>\r\n                          <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                            <div \r\n                              className={`h-2 rounded-full transition-all duration-300 ${\r\n                                getCompletionPercentage() === 100 ? 'bg-green-500' : 'bg-orange-500'\r\n                              }`}\r\n                              style={{ width: `${getCompletionPercentage()}%` }}\r\n                            ></div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Checklist Sections */}\r\n                      <div className=\"space-y-4 max-h-96 overflow-y-auto\">\r\n                        {safetyItems?.map((section) => (\r\n                          <div key={section?.id} className=\"bg-muted/30 rounded-lg p-4\">\r\n                            <div className=\"flex items-center justify-between mb-3\">\r\n                                <h5 className=\"font-medium flex items-center space-x-2\">\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => handleMarkAllVerified(section?.id)}\r\n                                  className=\"inline-flex items-center p-1 rounded hover:bg-muted/20\"\r\n                                  title=\"Marcar verificadas\"\r\n                                  aria-label={`Marcar verificadas ${section?.id}`}\r\n                                >\r\n                                  <Icon name=\"CheckSquare\" size={16} />\r\n                                </button>\r\n                                <span>{section?.title}</span>\r\n                              </h5>\r\n                              <div className=\"flex items-center space-x-2\">\r\n                                {/* compact icon-only action handled via the icon button */}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                              {section?.items?.map((item, index) => {\r\n                                const itemKey = `${section?.id}-${index}`;\r\n                                // For PPE section, determine if this item is required for the selectedOrder\r\n                                let requiredForSelected = true;\r\n                                if (section?.id === 'ppe' && selectedOrder) {\r\n                                  const field = PPE_FIELDS[index]?.[0];\r\n                                  requiredForSelected = !!getPPEValue(selectedOrder, field);\r\n                                }\r\n                                const recordedMissing = getRecordedMissing(selectedOrder || {})?.map(m => String(m || '').toLowerCase()) || [];\r\n\r\n                                return (\r\n                                  <div key={itemKey} className=\"flex items-center justify-between space-x-3\">\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                      {(() => {\r\n                                    \r\n                                        const disabledForChecklist = (section?.id === 'ppe' && selectedOrder && !getPPEValue(selectedOrder, PPE_FIELDS[index]?.[0])) || recordedMissing.some(r => (String(item || '').toLowerCase().includes(r) || r.includes(String(item || '').toLowerCase()))) || !!missingPPE?.[itemKey];\r\n                                        return (\r\n                                          <Checkbox\r\n                                            id={itemKey}\r\n                                            checked={!!checklist?.[itemKey]}\r\n                                            onChange={(e) => handleChecklistChange(itemKey, e?.target?.checked)}\r\n                                            disabled={disabledForChecklist}\r\n                                          />\r\n                                        );\r\n                                      })()}\r\n                                      <label htmlFor={itemKey} className={`text-sm cursor-pointer ${!requiredForSelected ? 'opacity-50' : ''}`}>\r\n                                        {item}\r\n                                      </label>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                          {requiredForSelected ? (\r\n                                        <>\r\n                                          <label className=\"text-xs text-muted-foreground mr-2\">Falta</label>\r\n                                          <input type=\"checkbox\" className=\"accent-red-600\" checked={!!missingPPE?.[itemKey]} onChange={(e) => handleMissingToggle(itemKey, e?.target?.checked)} />\r\n                                        </>\r\n                                      ) : (\r\n                                        <span className=\"text-xs text-muted-foreground mr-2\">No requiere</span>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                );\r\n                              })}\r\n                              {/* Render any custom missing items added */}\r\n                              {Object.keys(missingPPE || {}).filter(k => k.startsWith('custom-')).map((ck) => (\r\n                                <div key={ck} className=\"flex items-center justify-between space-x-3\">\r\n                                  <div className=\"flex items-center space-x-3\">\r\n                                    <Checkbox id={ck} checked={!!checklist?.[ck]} onChange={(e) => handleChecklistChange(ck, e?.target?.checked)} />\r\n                                    <label className=\"text-sm cursor-pointer\">{checklist?.[ck + '-label'] || 'Otro'}</label>\r\n                                  </div>\r\n                                  <div className=\"flex items-center space-x-2\">\r\n                                    <label className=\"text-xs text-muted-foreground mr-2\">Falta</label>\r\n                                    <input type=\"checkbox\" className=\"accent-red-600\" checked={!!missingPPE?.[ck]} onChange={(e) => handleMissingToggle(ck, e?.target?.checked)} />\r\n                                  </div>\r\n                                </div>\r\n                              ))}\r\n                              <div className=\"flex items-center space-x-2 mt-2\">\r\n                                <input value={customMissing} onChange={(e) => setCustomMissing(e?.target?.value)} placeholder=\"Agregar...\" className=\"flex-1 px-2 py-1 border rounded\" />\r\n                                <Button size=\"xs\" onClick={handleAddCustomMissing}>Agregar</Button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n\r\n                      {(getRecordedMissing(selectedOrder) || []).length > 0 && (\r\n                        <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <Icon name=\"AlertTriangle\" size={16} className=\"text-red-600 mt-0.5\" />\r\n                            <div className=\"text-sm\">\r\n                              <div className=\"font-medium text-red-800\">Faltantes registrados</div>\r\n                              <div className=\"text-red-700\">No es posible completar la verificaci贸n mientras existan 铆tems marcados como faltantes. Revise y resuelva los siguientes:</div>\r\n                              <ul className=\"list-disc ml-5 mt-2 text-red-700\">\r\n                                {getRecordedMissing(selectedOrder).map((m, i) => (\r\n                                  <li key={`missing-${i}`}>{m}</li>\r\n                                ))}\r\n                              </ul>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Actions */}\r\n                      <div className=\"flex space-x-2 pt-4 border-t\">\r\n                        <Button\r\n                          onClick={handleSubmitChecklist}\r\n                          disabled={!isChecklistComplete()}\r\n                          className=\"flex-1\"\r\n                          iconName=\"Shield\"\r\n                        >\r\n                          {primaryButtonLabel}\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          onClick={() => setSelectedOrder(null)}\r\n                        >\r\n                          Cancelar\r\n                        </Button>\r\n                      </div>\r\n\r\n                      {/* Completion Alert */}\r\n                      {!isChecklistComplete() && (\r\n                        <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-3\">\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <Icon name=\"AlertTriangle\" size={16} className=\"text-orange-600 mt-0.5\" />\r\n                            <div className=\"text-sm\">\r\n                              <div className=\"font-medium text-orange-800\">Verificaci贸n Incompleta</div>\r\n                              <div className=\"text-orange-700\">\r\n                                Complete todos los elementos antes de continuar con la fabricaci贸n\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {isChecklistComplete() && (\r\n                        <div className=\"bg-green-50 border border-green-200 rounded-lg p-3\">\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <Icon name=\"CheckCircle\" size={16} className=\"text-green-600 mt-0.5\" />\r\n                            <div className=\"text-sm\">\r\n                              <div className=\"font-medium text-green-800\">Verificaci贸n Completa</div>\r\n                              <div className=\"text-green-700\">\r\n                                Todos los elementos de seguridad han sido verificados\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center py-8 text-muted-foreground\">\r\n                      <Icon name=\"MousePointer\" size={48} className=\"mx-auto mb-2 opacity-50\" />\r\n                      <div>Seleccione una orden para completar la lista de seguridad</div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default SafetyChecklistPanel;","import React, { useState, useEffect } from 'react';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n\r\n        const AttendancePanel = ({ currentShift }) => {\r\n          const [attendanceData, setAttendanceData] = useState([]);\r\n          const [currentTime, setCurrentTime] = useState(new Date());\r\n\r\n          const mockPersonnel = [\r\n            { id: 1, name: 'Carlos Mart铆nez', role: 'T茅cnico Senior', status: 'present', checkIn: '07:55', checkOut: null },\r\n            { id: 2, name: 'Ana Rodr铆guez', role: 'Especialista', status: 'present', checkIn: '08:02', checkOut: null },\r\n            { id: 3, name: 'Luis Garc铆a', role: 'Supervisor', status: 'present', checkIn: '07:50', checkOut: null },\r\n            { id: 4, name: 'Mar铆a L贸pez', role: 'Fabricador', status: 'present', checkIn: '08:05', checkOut: null },\r\n            { id: 5, name: 'Jos茅 Hern谩ndez', role: 'Asistente', status: 'late', checkIn: '08:15', checkOut: null },\r\n            { id: 6, name: 'Roberto Silva', role: 'Inspector QC', status: 'absent', checkIn: null, checkOut: null },\r\n            { id: 7, name: 'Carmen D铆az', role: 'T茅cnico QC', status: 'present', checkIn: '07:58', checkOut: null },\r\n            { id: 8, name: 'Fernando Ruiz', role: 'Coordinador', status: 'present', checkIn: '07:45', checkOut: null }\r\n          ];\r\n\r\n          useEffect(() => {\r\n            setAttendanceData(mockPersonnel);\r\n            \r\n            // Update current time every minute\r\n            const timer = setInterval(() => {\r\n              setCurrentTime(new Date());\r\n            }, 60000);\r\n\r\n            return () => clearInterval(timer);\r\n          }, []);\r\n\r\n          const formatTime = (timeString) => {\r\n            if (!timeString) return '--:--';\r\n            return timeString;\r\n          };\r\n\r\n          const getStatusColor = (status) => {\r\n            const colors = {\r\n              'present': 'bg-green-100 text-green-700',\r\n              'late': 'bg-yellow-100 text-yellow-700',\r\n              'absent': 'bg-red-100 text-red-700',\r\n              'checked-out': 'bg-gray-100 text-gray-700'\r\n            };\r\n            return colors?.[status] || 'bg-gray-100 text-gray-700';\r\n          };\r\n\r\n          const getStatusLabel = (status) => {\r\n            const labels = {\r\n              'present': 'Presente',\r\n              'late': 'Tarde',\r\n              'absent': 'Ausente',\r\n              'checked-out': 'Sali贸'\r\n            };\r\n            return labels?.[status] || 'Desconocido';\r\n          };\r\n\r\n          const handleCheckOut = (personnelId) => {\r\n            const currentTimeStr = currentTime?.toLocaleTimeString('es-ES', { \r\n              hour: '2-digit', \r\n              minute: '2-digit' \r\n            });\r\n            \r\n            setAttendanceData(prev => prev?.map(person => \r\n              person?.id === personnelId \r\n                ? { \r\n                    ...person, \r\n                    checkOut: currentTimeStr,\r\n                    status: 'checked-out'\r\n                  }\r\n                : person\r\n            ));\r\n          };\r\n\r\n          const getAttendanceStats = () => {\r\n            const total = attendanceData?.length;\r\n            const present = attendanceData?.filter(p => p?.status === 'present')?.length;\r\n            const late = attendanceData?.filter(p => p?.status === 'late')?.length;\r\n            const absent = attendanceData?.filter(p => p?.status === 'absent')?.length;\r\n            \r\n            return { total, present, late, absent };\r\n          };\r\n\r\n          const stats = getAttendanceStats();\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"font-medium flex items-center space-x-2\">\r\n                  <Icon name=\"Clock\" size={20} />\r\n                  <span>Control de Asistencia</span>\r\n                </h3>\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {currentTime?.toLocaleTimeString('es-ES', { \r\n                    hour: '2-digit', \r\n                    minute: '2-digit' \r\n                  })}\r\n                </div>\r\n              </div>\r\n              {/* Attendance Stats */}\r\n              <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n                <div className=\"bg-green-50 p-2 rounded text-center\">\r\n                  <div className=\"text-lg font-bold text-green-700\">{stats?.present}</div>\r\n                  <div className=\"text-xs text-green-600\">Presente</div>\r\n                </div>\r\n                <div className=\"bg-yellow-50 p-2 rounded text-center\">\r\n                  <div className=\"text-lg font-bold text-yellow-700\">{stats?.late}</div>\r\n                  <div className=\"text-xs text-yellow-600\">Tarde</div>\r\n                </div>\r\n              </div>\r\n              {/* Shift Hours */}\r\n              <div className=\"bg-muted p-3 rounded-lg mb-4\">\r\n                <div className=\"flex items-center justify-between text-sm\">\r\n                  <span>Horario de Turno:</span>\r\n                  <span className=\"font-medium\">8:00 - 18:00</span>\r\n                </div>\r\n                <div className=\"flex items-center justify-between text-sm\">\r\n                  <span>Total Personal:</span>\r\n                  <span className=\"font-medium\">{stats?.total}</span>\r\n                </div>\r\n              </div>\r\n              {/* Personnel List */}\r\n              <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                {attendanceData?.map((person) => (\r\n                  <div key={person?.id} className=\"flex items-center justify-between p-2 bg-muted/30 rounded\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"font-medium text-sm\">{person?.name}</div>\r\n                      <div className=\"text-xs text-muted-foreground\">{person?.role}</div>\r\n                    </div>\r\n                    \r\n                    <div className=\"text-right\">\r\n                      <div className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(person?.status)}`}>\r\n                        {getStatusLabel(person?.status)}\r\n                      </div>\r\n                      <div className=\"text-xs text-muted-foreground mt-1\">\r\n                        {person?.checkIn ? `E: ${formatTime(person?.checkIn)}` : ''}\r\n                        {person?.checkOut ? ` S: ${formatTime(person?.checkOut)}` : ''}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {person?.status === 'present' || person?.status === 'late' ? (\r\n                      <Button\r\n                        size=\"xs\"\r\n                        variant=\"outline\"\r\n                        onClick={() => handleCheckOut(person?.id)}\r\n                        iconName=\"LogOut\"\r\n                        className=\"ml-2\"\r\n                      >\r\n                      </Button>\r\n                    ) : null}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              {/* Quick Actions */}\r\n              <div className=\"mt-4 pt-4 border-t space-y-2\">\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  className=\"w-full\"\r\n                  iconName=\"FileText\"\r\n                >\r\n                  Generar Reporte Diario\r\n                </Button>\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  className=\"w-full\"\r\n                  iconName=\"Bell\"\r\n                >\r\n                  Notificar Ausencias\r\n                </Button>\r\n              </div>\r\n              {/* Shift Status Alert */}\r\n              <div className={`mt-4 p-3 rounded-lg ${\r\n                currentShift === 'morning' ?'bg-green-50 border border-green-200' :'bg-red-50 border border-red-200'\r\n              }`}>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon \r\n                    name={currentShift === 'morning' ? 'CheckCircle' : 'XCircle'} \r\n                    size={16} \r\n                    className={currentShift === 'morning' ? 'text-green-600' : 'text-red-600'} \r\n                  />\r\n                  <div className=\"text-sm\">\r\n                    <div className={`font-medium ${\r\n                      currentShift === 'morning' ? 'text-green-800' : 'text-red-800'\r\n                    }`}>\r\n                      {currentShift === 'morning' ? 'Turno Activo' : 'Fuera de Horario'}\r\n                    </div>\r\n                    <div className={currentShift === 'morning' ? 'text-green-700' : 'text-red-700'}>\r\n                      {currentShift === 'morning' ?'Personal en horario laboral' :'Turno terminado - registro cerrado'}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default AttendancePanel;","import React, { useState } from 'react';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        import { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\n        const QualityControlPanel = ({ workOrders, onQualityUpdate }) => {\r\n          const [selectedOrder, setSelectedOrder] = useState(null);\r\n          const [qualityData, setQualityData] = useState({\r\n            checks: {},\r\n            photos: [],\r\n            notes: '',\r\n            decision: null\r\n          });\r\n\r\n          const qualityChecks = [\r\n            {\r\n              category: 'Dimensiones',\r\n              items: [\r\n                'Medidas seg煤n planos',\r\n                'Tolerancias correctas',\r\n                'Alineaci贸n apropiada'\r\n              ]\r\n            },\r\n            {\r\n              category: 'Materiales',\r\n              items: [\r\n                'Material especificado',\r\n                'Acabados correctos',\r\n                'Sin defectos visibles'\r\n              ]\r\n            },\r\n            {\r\n              category: 'Ensamble',\r\n              items: [\r\n                'Soldaduras de calidad',\r\n                'Conexiones seguras',\r\n                'Funcionamiento correcto'\r\n              ]\r\n            },\r\n            {\r\n              category: 'Documentaci贸n',\r\n              items: [\r\n                'Certificados de material',\r\n                'Registros de pruebas',\r\n                'Fotograf铆as de evidencia'\r\n              ]\r\n            }\r\n          ];\r\n\r\n          const handleOrderSelect = (order) => {\r\n            setSelectedOrder(order);\r\n            // Initialize quality checks\r\n            const initialChecks = {};\r\n            qualityChecks?.forEach(category => {\r\n              category?.items?.forEach((item, index) => {\r\n                initialChecks[`${category?.category}-${index}`] = false;\r\n              });\r\n            });\r\n            setQualityData({\r\n              checks: initialChecks,\r\n              photos: [],\r\n              notes: '',\r\n              decision: null\r\n            });\r\n          };\r\n\r\n          const handleCheckChange = (checkKey, checked) => {\r\n            setQualityData(prev => ({\r\n              ...prev,\r\n              checks: {\r\n                ...prev?.checks,\r\n                [checkKey]: checked\r\n              }\r\n            }));\r\n          };\r\n\r\n          const handlePhotoUpload = (event) => {\r\n            const files = Array.from(event?.target?.files);\r\n            const newPhotos = files?.map(file => ({\r\n              name: file?.name,\r\n              size: file?.size,\r\n              url: URL?.createObjectURL(file),\r\n              type: 'evidence'\r\n            }));\r\n            setQualityData(prev => ({\r\n              ...prev,\r\n              photos: [...prev?.photos, ...newPhotos]\r\n            }));\r\n          };\r\n\r\n          const getCompletionPercentage = () => {\r\n            const totalChecks = Object?.keys(qualityData?.checks)?.length;\r\n            const completedChecks = Object?.values(qualityData?.checks)?.filter(Boolean)?.length;\r\n            return totalChecks > 0 ? Math?.round((completedChecks / totalChecks) * 100) : 0;\r\n          };\r\n\r\n          const areAllChecksComplete = () => {\r\n            return Object?.values(qualityData?.checks)?.every(Boolean);\r\n          };\r\n\r\n          const handleQualityDecision = (decision) => {\r\n            setQualityData(prev => ({ ...prev, decision }));\r\n          };\r\n\r\n          const handleSubmitQuality = () => {\r\n            if (selectedOrder && qualityData?.decision) {\r\n              onQualityUpdate?.(selectedOrder?.id, {\r\n                status: qualityData?.decision === 'approve' ? 'approved' : 'rejected',\r\n                checks: qualityData?.checks,\r\n                photos: qualityData?.photos,\r\n                notes: qualityData?.notes\r\n              });\r\n              setSelectedOrder(null);\r\n              setQualityData({\r\n                checks: {},\r\n                photos: [],\r\n                notes: '',\r\n                decision: null\r\n              });\r\n            }\r\n          };\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg p-4\">\r\n              <div className=\"flex items-center space-x-2 mb-4\">\r\n                <Icon name=\"CheckCircle\" className=\"text-green-500\" size={20} />\r\n                <h3 className=\"font-medium\">Control de Calidad</h3>\r\n              </div>\r\n              {/* Orders List */}\r\n              <div className=\"mb-4\">\r\n                <h4 className=\"text-sm font-medium mb-2\">rdenes en Revisi贸n</h4>\r\n                <div className=\"space-y-2 max-h-32 overflow-y-auto\">\r\n                  {workOrders?.map((order) => (\r\n                    <div\r\n                      key={order?.id}\r\n                      onClick={() => handleOrderSelect(order)}\r\n                      className={`p-2 border rounded cursor-pointer text-sm transition-colors ${\r\n                        selectedOrder?.id === order?.id\r\n                          ? 'border-primary bg-primary/10' :'border-muted hover:border-primary/50'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex justify-between items-start\">\r\n                        <div>\r\n                          <div className=\"font-medium\">{order?.id}</div>\r\n                          <div className=\"text-xs text-muted-foreground\">{order?.clientName}</div>\r\n                        </div>\r\n                        <div className={`px-2 py-1 rounded-full text-xs ${\r\n                          order?.qualityControlStatus === 'approved' ? 'bg-green-100 text-green-700' :\r\n                          order?.qualityControlStatus === 'rejected' ? 'bg-red-100 text-red-700' :\r\n                          order?.qualityControlStatus === 'review'? 'bg-yellow-100 text-yellow-700' : 'bg-gray-100 text-gray-700'\r\n                        }`}>\r\n                          {order?.qualityControlStatus === 'approved' ? 'Aprobado' :\r\n                           order?.qualityControlStatus === 'rejected' ? 'Rechazado' :\r\n                           order?.qualityControlStatus === 'review' ? 'Revisi贸n' : 'Pendiente'}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              {selectedOrder ? (\r\n                <div className=\"space-y-4\">\r\n                  {/* Order Info */}\r\n                  <div className=\"bg-muted p-3 rounded-lg\">\r\n                    <div className=\"text-sm font-medium\">{selectedOrder?.id}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">\r\n                      {selectedOrder?.clientName}  {selectedOrder?.progress}% completado\r\n                    </div>\r\n                    \r\n                    {/* Progress Bar */}\r\n                    <div className=\"mt-2\">\r\n                      <div className=\"flex items-center justify-between text-xs mb-1\">\r\n                        <span>Verificaciones</span>\r\n                        <span>{getCompletionPercentage()}%</span>\r\n                      </div>\r\n                      <div className=\"w-full bg-gray-200 rounded-full h-1\">\r\n                        <div \r\n                          className=\"h-1 rounded-full bg-green-500 transition-all\"\r\n                          style={{ width: `${getCompletionPercentage()}%` }}\r\n                        ></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Quality Checks */}\r\n                  <div className=\"max-h-48 overflow-y-auto space-y-3\">\r\n                    {qualityChecks?.map((category) => (\r\n                      <div key={category?.category} className=\"space-y-2\">\r\n                        <h5 className=\"text-sm font-medium\">{category?.category}</h5>\r\n                        {category?.items?.map((item, index) => {\r\n                          const checkKey = `${category?.category}-${index}`;\r\n                          return (\r\n                            <div key={checkKey} className=\"flex items-center space-x-2 ml-2\">\r\n                              <Checkbox\r\n                                id={checkKey}\r\n                                checked={qualityData?.checks?.[checkKey] || false}\r\n                                onChange={(e) => handleCheckChange(checkKey, e?.target?.checked)}\r\n                              />\r\n                              <label htmlFor={checkKey} className=\"text-sm cursor-pointer\">\r\n                                {item}\r\n                              </label>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {/* Photo Evidence */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-2\">\r\n                      Evidencia Final\r\n                    </label>\r\n                    <div className=\"border-2 border-dashed border-muted-foreground/30 rounded-lg p-3 text-center\">\r\n                      <input\r\n                        type=\"file\"\r\n                        multiple\r\n                        accept=\"image/*\"\r\n                        onChange={handlePhotoUpload}\r\n                        className=\"hidden\"\r\n                        id=\"quality-photos\"\r\n                      />\r\n                      <label htmlFor=\"quality-photos\" className=\"cursor-pointer\">\r\n                        <Icon name=\"Camera\" size={24} className=\"mx-auto mb-1 text-muted-foreground\" />\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          Fotos del producto final\r\n                        </div>\r\n                      </label>\r\n                    </div>\r\n\r\n                    {qualityData?.photos?.length > 0 && (\r\n                      <div className=\"mt-2 grid grid-cols-4 gap-1\">\r\n                        {qualityData?.photos?.map((photo, index) => (\r\n                          <div key={index} className=\"relative\">\r\n                            <img \r\n                              src={photo?.url} \r\n                              alt={photo?.name}\r\n                              className=\"w-full h-12 object-cover rounded\"\r\n                            />\r\n                            <button\r\n                              onClick={() => setQualityData(prev => ({\r\n                                ...prev,\r\n                                photos: prev?.photos?.filter((_, i) => i !== index)\r\n                              }))}\r\n                              className=\"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs\"\r\n                            >\r\n                              \r\n                            </button>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Notes */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-1\">\r\n                      Observaciones\r\n                    </label>\r\n                    <textarea\r\n                      value={qualityData?.notes}\r\n                      onChange={(e) => setQualityData(prev => ({ ...prev, notes: e?.target?.value }))}\r\n                      className=\"w-full p-2 border rounded text-sm resize-none\"\r\n                      rows={2}\r\n                      placeholder=\"Observaciones sobre la calidad...\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Decision */}\r\n                  {areAllChecksComplete() && (\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium mb-2\">Decisi贸n</label>\r\n                      <div className=\"flex space-x-2\">\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={qualityData?.decision === 'approve' ? 'default' : 'outline'}\r\n                          onClick={() => handleQualityDecision('approve')}\r\n                          iconName=\"Check\"\r\n                          className=\"flex-1\"\r\n                        >\r\n                          Aprobar\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={qualityData?.decision === 'reject' ? 'destructive' : 'outline'}\r\n                          onClick={() => handleQualityDecision('reject')}\r\n                          iconName=\"X\"\r\n                          className=\"flex-1\"\r\n                        >\r\n                          Rechazar\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Submit */}\r\n                  <Button\r\n                    onClick={handleSubmitQuality}\r\n                    disabled={!qualityData?.decision}\r\n                    className=\"w-full\"\r\n                    iconName=\"Send\"\r\n                  >\r\n                    Enviar Revisi贸n\r\n                  </Button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-8 text-muted-foreground\">\r\n                  <Icon name=\"MousePointer\" size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                  <div className=\"text-sm\">Seleccione una orden para revisar</div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default QualityControlPanel;","import React, { useState } from 'react';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        import Input from '../../../components/ui/Input';\r\n\r\n        const ChangeOrderPanel = ({ workOrders, onChangeOrder }) => {\r\n          const [selectedOrder, setSelectedOrder] = useState(null);\r\n          const [changeData, setChangeData] = useState({\r\n            type: '',\r\n            description: '',\r\n            reason: '',\r\n            impact: '',\r\n            requestedBy: '',\r\n            approved: false\r\n          });\r\n          const [showHistory, setShowHistory] = useState(false);\r\n\r\n          const changeTypes = [\r\n            { value: 'client', label: 'Cambio del Cliente' },\r\n            { value: 'engineering', label: 'Cambio de Ingenier铆a' },\r\n            { value: 'material', label: 'Cambio de Material' },\r\n            { value: 'process', label: 'Cambio de Proceso' }\r\n          ];\r\n\r\n          const handleOrderSelect = (order) => {\r\n            setSelectedOrder(order);\r\n            setChangeData({\r\n              type: '',\r\n              description: '',\r\n              reason: '',\r\n              impact: '',\r\n              requestedBy: '',\r\n              approved: false\r\n            });\r\n            setShowHistory(false);\r\n          };\r\n\r\n          const handleSubmitChange = () => {\r\n            if (selectedOrder && changeData?.type && changeData?.description) {\r\n              onChangeOrder?.(selectedOrder?.id, changeData);\r\n              setChangeData({\r\n                type: '',\r\n                description: '',\r\n                reason: '',\r\n                impact: '',\r\n                requestedBy: '',\r\n                approved: false\r\n              });\r\n            }\r\n          };\r\n\r\n          const getChangeTypeIcon = (type) => {\r\n            const icons = {\r\n              'client': 'User',\r\n              'engineering': 'Cog',\r\n              'material': 'Package',\r\n              'process': 'Settings'\r\n            };\r\n            return icons?.[type] || 'Edit';\r\n          };\r\n\r\n          const getChangeTypeColor = (type) => {\r\n            const colors = {\r\n              'client': 'text-blue-600 bg-blue-50',\r\n              'engineering': 'text-purple-600 bg-purple-50',\r\n              'material': 'text-green-600 bg-green-50',\r\n              'process': 'text-orange-600 bg-orange-50'\r\n            };\r\n            return colors?.[type] || 'text-gray-600 bg-gray-50';\r\n          };\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"Edit\" className=\"text-orange-500\" size={20} />\r\n                  <h3 className=\"font-medium\">rdenes de Cambio</h3>\r\n                </div>\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  onClick={() => setShowHistory(!showHistory)}\r\n                  iconName=\"History\"\r\n                >\r\n                  {showHistory ? 'Nueva' : 'Historial'}\r\n                </Button>\r\n              </div>\r\n              {!showHistory ? (\r\n                <div className=\"space-y-4\">\r\n                  {/* Orders List */}\r\n                  <div>\r\n                    <h4 className=\"text-sm font-medium mb-2\">rdenes Activas</h4>\r\n                    <div className=\"space-y-2 max-h-32 overflow-y-auto\">\r\n                      {workOrders?.slice(0, 5)?.map((order) => (\r\n                        <div\r\n                          key={order?.id}\r\n                          onClick={() => handleOrderSelect(order)}\r\n                          className={`p-2 border rounded cursor-pointer text-sm transition-colors ${\r\n                            selectedOrder?.id === order?.id\r\n                              ? 'border-primary bg-primary/10' :'border-muted hover:border-primary/50'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex justify-between items-center\">\r\n                            <div>\r\n                              <div className=\"font-medium\">{order?.id}</div>\r\n                              <div className=\"text-xs text-muted-foreground\">{order?.clientName}</div>\r\n                            </div>\r\n                            {order?.changeOrders?.length > 0 && (\r\n                              <div className=\"flex items-center space-x-1 text-orange-600\">\r\n                                <Icon name=\"Edit\" size={12} />\r\n                                <span className=\"text-xs\">{order?.changeOrders?.length}</span>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {selectedOrder && (\r\n                    <div className=\"space-y-3 border-t pt-4\">\r\n                      {/* Order Info */}\r\n                      <div className=\"bg-muted p-3 rounded-lg\">\r\n                        <div className=\"text-sm font-medium\">{selectedOrder?.id}</div>\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          {selectedOrder?.clientName}  {selectedOrder?.statusLabel}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Change Type */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Tipo de Cambio</label>\r\n                        <div className=\"grid grid-cols-2 gap-1\">\r\n                          {changeTypes?.map((type) => (\r\n                            <button\r\n                              key={type?.value}\r\n                              onClick={() => setChangeData(prev => ({ ...prev, type: type?.value }))}\r\n                              className={`p-2 text-xs border rounded transition-colors ${\r\n                                changeData?.type === type?.value\r\n                                  ? 'border-primary bg-primary/10 text-primary' :'border-muted hover:border-primary/50'\r\n                              }`}\r\n                            >\r\n                              {type?.label}\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Description */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Descripci贸n del Cambio</label>\r\n                        <textarea\r\n                          value={changeData?.description}\r\n                          onChange={(e) => setChangeData(prev => ({ ...prev, description: e?.target?.value }))}\r\n                          className=\"w-full p-2 border rounded text-sm resize-none\"\r\n                          rows={2}\r\n                          placeholder=\"Describir el cambio requerido...\"\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Reason */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Raz贸n</label>\r\n                        <Input\r\n                          value={changeData?.reason}\r\n                          onChange={(e) => setChangeData(prev => ({ ...prev, reason: e?.target?.value }))}\r\n                          placeholder=\"驴Por qu茅 es necesario este cambio?\"\r\n                          className=\"text-sm\"\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Impact */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Impacto</label>\r\n                        <Input\r\n                          value={changeData?.impact}\r\n                          onChange={(e) => setChangeData(prev => ({ ...prev, impact: e?.target?.value }))}\r\n                          placeholder=\"Tiempo adicional, materiales, etc.\"\r\n                          className=\"text-sm\"\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Requested By */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Solicitado Por</label>\r\n                        <Input\r\n                          value={changeData?.requestedBy}\r\n                          onChange={(e) => setChangeData(prev => ({ ...prev, requestedBy: e?.target?.value }))}\r\n                          placeholder=\"Nombre del solicitante\"\r\n                          className=\"text-sm\"\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Submit */}\r\n                      <Button\r\n                        onClick={handleSubmitChange}\r\n                        disabled={!changeData?.type || !changeData?.description}\r\n                        className=\"w-full\"\r\n                        size=\"sm\"\r\n                        iconName=\"Plus\"\r\n                      >\r\n                        Registrar en Bit谩cora\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n\r\n                  {!selectedOrder && (\r\n                    <div className=\"text-center py-6 text-muted-foreground\">\r\n                      <Icon name=\"MousePointer\" size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                      <div className=\"text-sm\">Seleccione una orden para registrar cambios</div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                /* Change History */\r\n                (<div className=\"space-y-3\">\r\n                  <h4 className=\"text-sm font-medium\">Historial de Cambios</h4>\r\n                  <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                    {workOrders\r\n                      ?.filter(order => order?.changeOrders?.length > 0)\r\n                      ?.map((order) => (\r\n                      <div key={order?.id}>\r\n                        {order?.changeOrders?.map((change, index) => (\r\n                          <div key={`${order?.id}-${index}`} className=\"p-3 border rounded-lg\">\r\n                            <div className=\"flex items-start justify-between mb-2\">\r\n                              <div className=\"flex items-center space-x-2\">\r\n                                <Icon \r\n                                  name={getChangeTypeIcon(change?.type)} \r\n                                  size={16}\r\n                                />\r\n                                <div>\r\n                                  <div className=\"text-sm font-medium\">{order?.id}</div>\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {change?.date || 'Fecha no disponible'}\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                              <div className={`px-2 py-1 rounded-full text-xs font-medium ${getChangeTypeColor(change?.type || 'client')}`}>\r\n                                {changeTypes?.find(t => t?.value === change?.type)?.label || 'Cliente'}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"text-sm text-foreground mb-1\">\r\n                              {change?.description}\r\n                            </div>\r\n                            {change?.reason && (\r\n                              <div className=\"text-xs text-muted-foreground\">\r\n                                Raz贸n: {change?.reason}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  {workOrders?.filter(order => order?.changeOrders?.length > 0)?.length === 0 && (\r\n                    <div className=\"text-center py-6 text-muted-foreground\">\r\n                      <Icon name=\"History\" size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                      <div className=\"text-sm\">No hay cambios registrados</div>\r\n                    </div>\r\n                  )}\r\n                </div>)\r\n              )}\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default ChangeOrderPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport WorkflowBoard from './components/WorkflowBoard';\r\nimport useOperacAlt from '../../hooks/useOperacAlt';\r\nimport WorkflowControls from './components/WorkflowControls';\r\nimport MaterialReceptionPanel from './components/MaterialReceptionPanel';\r\nimport SafetyChecklistPanel from './components/SafetyChecklistPanel';\r\nimport AttendancePanel from './components/AttendancePanel';\r\nimport QualityControlPanel from './components/QualityControlPanel';\r\nimport ChangeOrderPanel from './components/ChangeOrderPanel';\r\n\r\nconst WorkshopOperationsManagement = () => {\r\n  const [workOrders, setWorkOrders] = useState([]);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [activePanel, setActivePanel] = useState('workflow');\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [panelMissingByOrder, setPanelMissingByOrder] = useState({});\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [currentShift, setCurrentShift] = useState('morning');\r\n  const { oportunities, getOportunities, updateWorkOrder: updateWorkOrderRemote, deleteWorkOrder: deleteWorkOrderRemote } = useOperacAlt();\r\n\r\n  useEffect(() => {\r\n    const loadWorkOrders = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const data = await getOportunities();\r\n        setWorkOrders(Array.isArray(data) ? data : []);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadWorkOrders();\r\n  }, []);\r\n\r\n  const handleOrderStatusChange = (orderId, newStatus, payload = {}) => {\r\n    if (payload && payload.hidden) {\r\n      try {\r\n        const matched = (workOrders || []).find(order => {\r\n          if (!order) return false;\r\n          const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n          return candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n        });\r\n\r\n        const backendId = matched?.id || matched?.ordenTrabajo || matched?.folio || null;\r\n\r\n        if (backendId && deleteWorkOrderRemote) {\r\n          const doRemoteDelete = () => {\r\n            return deleteWorkOrderRemote(backendId).then((success) => {\r\n              if (success) {\r\n                setWorkOrders(prev => {\r\n                  const list = prev || [];\r\n                  return list.filter(order => {\r\n                    if (!order) return false;\r\n                    const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n                    return !candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n                  });\r\n                });\r\n              }\r\n              return success;\r\n            }).catch(() => {\r\n              return false;\r\n            });\r\n          };\r\n\r\n          if (backendId && updateWorkOrderRemote) {\r\n            updateWorkOrderRemote(backendId, { estadoProgreso: 100, completed: true })\r\n              .then(() => doRemoteDelete())\r\n              .catch(() => doRemoteDelete());\r\n          } else {\r\n            doRemoteDelete();\r\n          }\r\n        } else {\r\n        }\r\n      } catch (e) {\r\n       //ignora los errores\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    setWorkOrders(prev => (prev || []).map(order => {\r\n      if (!order) return order;\r\n      const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n      const matches = candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n      if (!matches) return order;\r\n      return {\r\n        ...order,\r\n        status: newStatus,\r\n        statusLabel: getStatusLabel(newStatus),\r\n        ...(payload.estadoProgreso !== undefined ? { estadoProgreso: payload.estadoProgreso } : {}),\r\n        ...(payload.completed ? { completed: true } : {})\r\n      };\r\n    }));\r\n    try {\r\n      const matched = (workOrders || []).find(order => {\r\n        if (!order) return false;\r\n        const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n        return candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n      });\r\n      const backendId = matched?.id || matched?.ordenTrabajo || matched?.folio || null;\r\n      if (backendId && updateWorkOrderRemote) {\r\n        // send the payload + status so backend can update progress/status\r\n        const remotePayload = { ...(payload || {}), status: newStatus };\r\n        updateWorkOrderRemote(backendId, remotePayload).catch(() => {\r\n          // already handled inside hook (notifications)\r\n        });\r\n      } else {\r\n        // no backend id or updateWorkOrderRemote available for this order\r\n      }\r\n    } catch (e) {\r\n      // error while attempting remote update\r\n    }\r\n  };\r\n\r\n          // Force-remove helper (used by debug control) - removes matching order by id/ordenTrabajo/folio or by JSON substring\r\n          const handleForceRemove = (orderId) => {\r\n            if (!orderId) return;\r\n            setWorkOrders(prev => {\r\n              const list = prev || [];\r\n              // attempt exact-field removal first\r\n              const directMatches = list.filter(order => {\r\n                if (!order) return false;\r\n                const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n                return candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n              });\r\n              if (directMatches.length > 0) {\r\n                return list.filter(order => {\r\n                  if (!order) return false;\r\n                  const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n                  return !candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n                });\r\n              }\r\n\r\n              // fallback: remove by JSON substring\r\n              try {\r\n                const needle = String(orderId);\r\n                return list.filter(order => {\r\n                  try { return !JSON.stringify(order).includes(needle); } catch (e) { return true; }\r\n                });\r\n              } catch (e) {\r\n                return list;\r\n              }\r\n            });\r\n          };\r\n\r\n          const getStatusLabel = (status) => {\r\n            const statusLabels = {\r\n              'material-reception': 'Recepci贸n Material',\r\n              'safety-checklist': 'Lista Seguridad',\r\n              'manufacturing': 'Fabricaci贸n',\r\n              'quality-control': 'Control Calidad',\r\n              'ready-shipment': 'Listo Env铆o'\r\n            };\r\n            return statusLabels?.[status] || status;\r\n          };\r\n\r\n          // map various backend status/estado strings to canonical column ids\r\n          const mapToColumnId = (val) => {\r\n            if (!val) return '';\r\n            const v = String(val).toLowerCase().trim();\r\n            if (['material-reception','recepcion material','recepci贸n material','recepci贸n_material','recepci贸n','pendiente','pendiente por revisar','new','nuevo'].includes(v)) return 'material-reception';\r\n            if (['safety-checklist','lista seguridad','seguridad','safety','checklist seguridad'].includes(v)) return 'safety-checklist';\r\n            if (['manufacturing','fabricaci贸n','fabricacion','en progreso','progreso','producci贸n','produccion','en pausa','pausa','pausado'].includes(v)) return 'manufacturing';\r\n            if (['quality-control','control calidad','calidad','qc','quality','revisi贸n'].includes(v)) return 'quality-control';\r\n            if (['ready-shipment','listo env铆o','listo envio','env铆o','envio','enviado','completada','completado','listo'].includes(v)) return 'ready-shipment';\r\n            // fallback: if it's already a canonical id\r\n            if (['material-reception','safety-checklist','manufacturing','quality-control','ready-shipment'].includes(v)) return v;\r\n            return '';\r\n          };\r\n\r\n          const columns = ['material-reception','safety-checklist','manufacturing','quality-control','ready-shipment'];\r\n\r\n          const getPreviousColumn = (current) => {\r\n            const idx = columns.indexOf(current);\r\n            if (idx <= 0) return columns[0];\r\n            return columns[idx - 1];\r\n          };\r\n\r\n          const computeProgressForColumn = (col) => {\r\n            const idx = columns.indexOf(col);\r\n            if (idx < 0) return 0;\r\n            return Math.round((idx / (columns.length - 1)) * 100);\r\n          };\r\n\r\n          // allow parent to revert an order to previous status and restore progress\r\n          const handleRevertStatus = (orderRef) => {\r\n            setWorkOrders(prev => (prev || []).map(order => {\r\n              if (!order) return order;\r\n              // build candidate values for the existing order\r\n              const orderCandidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio].filter(Boolean).map(String);\r\n\r\n              // build candidate values from the provided reference (could be a string id or the selected object)\r\n              let refCandidates = [];\r\n              try {\r\n                if (orderRef && typeof orderRef === 'object') {\r\n                  refCandidates = [orderRef?.id, orderRef?.ordenTrabajo, orderRef?.folio, orderRef?.raw?.id, orderRef?.raw?.ordenTrabajo, orderRef?.raw?.folio].filter(Boolean).map(String);\r\n                } else {\r\n                  refCandidates = [String(orderRef)];\r\n                }\r\n              } catch (e) {\r\n                refCandidates = [String(orderRef || '')];\r\n              }\r\n\r\n              const matches = orderCandidates.some(oc => refCandidates.some(rc => rc === oc));\r\n\r\n              // fallback: if no exact match, allow substring match against serialized orderRef when it's a string\r\n              if (!matches) {\r\n                try {\r\n                  const needle = typeof orderRef === 'string' ? orderRef : JSON.stringify(orderRef || '');\r\n                  if (needle && JSON.stringify(order).includes(needle)) {\r\n                    // consider this a match\r\n                  } else return order;\r\n                } catch (e) {\r\n                  return order;\r\n                }\r\n              }\r\n\r\n              const current = mapToColumnId(order?.status || order?.estado || '');\r\n              const prevCol = getPreviousColumn(current || columns[0]);\r\n              const restoredProgress = computeProgressForColumn(prevCol);\r\n              \r\n              // Persistir el cambio en la base de datos\r\n              const backendId = order?.id || order?.raw?.id;\r\n              if (backendId && updateWorkOrderRemote) {\r\n                const remotePayload = {\r\n                  status: prevCol,\r\n                  estado: prevCol,\r\n                  estadoProgreso: restoredProgress,\r\n                  progress: restoredProgress\r\n                };\r\n                updateWorkOrderRemote(backendId, remotePayload).catch((err) => {\r\n                  console.error('[handleRevertStatus] Error al actualizar en BD:', err);\r\n                });\r\n              }\r\n              \r\n              return {\r\n                ...order,\r\n                status: prevCol,\r\n                statusLabel: getStatusLabel(prevCol),\r\n                estadoProgreso: restoredProgress,\r\n                progress: restoredProgress\r\n              };\r\n            }));\r\n          };\r\n\r\n          const handleMaterialReception = (orderId, receptionData) => {\r\n            setWorkOrders(prev => prev?.map(order => \r\n              order?.id === orderId \r\n                ? { \r\n                    ...order, \r\n                    materials: {\r\n                      ...order?.materials,\r\n                      received: receptionData?.cantidadRecibida || receptionData?.received || 0,\r\n                      total: receptionData?.materials?.reduce((sum, m) => sum + (Number(m.required) || 0), 0) || order?.materials?.total || 0,\r\n                      status: receptionData?.status,\r\n                      issues: receptionData?.problemasFaltantes || receptionData?.issues || []\r\n                    },\r\n                    recepcionMateriales: receptionData?.recepcionMateriales || {\r\n                      cantidadRecibida: receptionData?.cantidadRecibida || receptionData?.received || 0,\r\n                      notasAdicionales: receptionData?.notasAdicionales || receptionData?.notes || '',\r\n                      problemasFaltantes: receptionData?.problemasFaltantes || receptionData?.issues || [],\r\n                      totalPendientes: receptionData?.totalPendientes || receptionData?.pendientes || 0,\r\n                      status: receptionData?.status,\r\n                      materials: receptionData?.materials || [],\r\n                      updatedAt: receptionData?.updatedAt || new Date().toISOString()\r\n                    },\r\n                    raw: {\r\n                      ...order?.raw,\r\n                      recepcionMateriales: receptionData?.recepcionMateriales || {\r\n                        cantidadRecibida: receptionData?.cantidadRecibida || receptionData?.received || 0,\r\n                        notasAdicionales: receptionData?.notasAdicionales || receptionData?.notes || '',\r\n                        problemasFaltantes: receptionData?.problemasFaltantes || receptionData?.issues || [],\r\n                        totalPendientes: receptionData?.totalPendientes || receptionData?.pendientes || 0,\r\n                        status: receptionData?.status,\r\n                        materials: receptionData?.materials || [],\r\n                        updatedAt: receptionData?.updatedAt || new Date().toISOString()\r\n                      }\r\n                    },\r\n                    status: receptionData?.status === 'complete' ? 'safety-checklist' : 'material-reception'\r\n                  }\r\n                : order\r\n            ));\r\n          };\r\n\r\n          const handleSafetyChecklist = (orderId, payload) => {\r\n            // payload can be a boolean (completed) or an object { completed: bool, missingPPE: [] }\r\n            const completed = typeof payload === 'boolean' ? payload : !!(payload && payload.completed);\r\n            const missingPPE = (payload && Array.isArray(payload.missingPPE)) ? payload.missingPPE : [];\r\n            setWorkOrders(prev => prev?.map(order => \r\n              order?.id === orderId \r\n                ? { \r\n                    ...order, \r\n                    safetyChecklistCompleted: completed,\r\n                    safetyChecklistMissing: missingPPE,\r\n                    status: completed ? 'manufacturing' : 'safety-checklist'\r\n                  }\r\n                : order\r\n            ));\r\n            try {\r\n              const matched = (workOrders || []).find(order => {\r\n                if (!order) return false;\r\n                const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n                return candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n              });\r\n              const backendId = matched?.id || matched?.ordenTrabajo || matched?.folio || null;\r\n              if (backendId && updateWorkOrderRemote) {\r\n                // Compose remote payload - include completed and missingPPE under flexible keys\r\n                const remotePayload = {\r\n                  safetyChecklistCompleted: completed,\r\n                  safetyChecklistMissing: missingPPE,\r\n                  completed: completed\r\n                };\r\n                updateWorkOrderRemote(backendId, remotePayload).catch(() => {\r\n                  // failure to persist remotely is non-fatal; local state remains authoritative until next sync\r\n                });\r\n              }\r\n            } catch (e) {\r\n              // ignore errors\r\n            }\r\n          };\r\n\r\n          const handleQualityControl = (orderId, qcData) => {\r\n            setWorkOrders(prev => prev?.map(order => \r\n              order?.id === orderId \r\n                ? { \r\n                    ...order, \r\n                    qualityControlStatus: qcData?.status,\r\n                    status: qcData?.status === 'approved' ? 'ready-shipment' : 'quality-control'\r\n                  }\r\n                : order\r\n            ));\r\n          };\r\n\r\n          const handleChangeOrder = (orderId, changeData) => {\r\n            setWorkOrders(prev => prev?.map(order => \r\n              order?.id === orderId \r\n                ? { \r\n                    ...order, \r\n                    changeOrders: [...(order?.changeOrders || []), {\r\n                      id: Date.now(),\r\n                      ...changeData,\r\n                      date: new Date()?.toISOString()?.split('T')?.[0]\r\n                    }]\r\n                  }\r\n                : order\r\n            ));\r\n          };\r\n\r\n          const panelOptions = [\r\n            { value: 'workflow', label: 'Flujo Taller', icon: 'Workflow' },\r\n            { value: 'materials', label: 'Recepci贸n Material', icon: 'Package' },\r\n            { value: 'safety', label: 'Seguridad', icon: 'Shield' },\r\n            { value: 'attendance', label: 'Asistencia', icon: 'Clock' },\r\n            { value: 'quality', label: 'Control Calidad', icon: 'CheckCircle' },\r\n            { value: 'changes', label: 'rdenes Cambio', icon: 'Edit' }\r\n          ];\r\n\r\n          if (isLoading) {\r\n            return (\r\n              <div className=\"min-h-screen bg-background flex\">\r\n                <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n                <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n                  <div className=\"flex items-center justify-center h-96\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n                      <p className=\"text-muted-foreground\">Cargando proyectos...</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          }\r\n\r\n          return (\r\n            <div className=\"min-h-screen bg-background\">\r\n              {/* Desktop Sidebar */}\r\n              <div className=\"hidden lg:block\">\r\n                <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n              </div>\r\n\r\n              {/* Mobile Header Placeholder */}\r\n              <div className=\"lg:hidden\">\r\n                <div className=\"p-4 bg-background border-b\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"text-lg font-semibold\">Gesti贸n Operativa - Taller</div>\r\n                    <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className=\"p-2 rounded bg-muted\">\r\n                      <Icon name=\"Menu\" size={18} />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <React.StrictMode>\r\n                {null}\r\n              </React.StrictMode>\r\n\r\n              <div className={`transition-all duration-300 ${\r\n                sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n              } lg:pt-0`}>\r\n                <div className=\"container mx-auto px-4 py-8\">\r\n                  {/* Breadcrumb */}\r\n                  <div className=\"mb-6\">\r\n                    <Breadcrumb customItems={[\r\n                      { label: 'Dashboard', path: '/dashboard', icon: 'Home' },\r\n                      { label: 'Gesti贸n Operativa - rea de Taller', path: '/workshop-operations-management', icon: 'Wrench', current: true }\r\n                    ]} />\r\n                  </div>\r\n                {/* Header */}\r\n                <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n                  <div>\r\n                    <h1 className=\"text-3xl font-bold text-foreground mb-2\">Gesti贸n Operativa - rea de Taller</h1>\r\n                    <p className=\"text-muted-foreground\">\r\n                      Flujo completo desde recepci贸n de materiales hasta control de calidad y env铆o (8:00-18:00)\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                    {/* Shift Indicator */}\r\n                    <div className=\"bg-muted rounded-lg px-4 py-2\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon name=\"Clock\" size={16} className=\"text-primary\" />\r\n                        <span className=\"text-sm font-medium\">\r\n                          Turno: {currentShift === 'morning' ? '8:00 - 18:00' : 'Fuera de Horario'}\r\n                        </span>\r\n                        <div className={`w-2 h-2 rounded-full ${\r\n                          currentShift === 'morning' ? 'bg-green-500' : 'bg-red-500'\r\n                        }`}></div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex bg-muted rounded-lg p-1 overflow-x-auto no-scrollbar sticky top-20 z-40\">\r\n                      {panelOptions?.slice(0, 3)?.map((option) => (\r\n                        <button\r\n                          key={option?.value}\r\n                          onClick={() => setActivePanel(option?.value)}\r\n                          className={`flex items-center justify-center space-x-2 px-3 py-2 rounded-md transition-smooth whitespace-nowrap min-w-[96px] ${\r\n                            activePanel === option?.value\r\n                              ? 'bg-primary text-primary-foreground'\r\n                              : 'text-muted-foreground hover:text-foreground'\r\n                          }`}\r\n                        >\r\n                          <Icon name={option?.icon} size={28} />\r\n                          <span className=\"text-sm font-medium\">{option?.label}</span>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Workshop Stats */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8\">\r\n                  <div className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Icon name=\"Package\" className=\"text-blue-500\" size={20} />\r\n                      <span className=\"font-medium\">Recepci贸n</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold\">{workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === 'material-reception')?.length}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">rdenes</div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Icon name=\"Shield\" className=\"text-orange-500\" size={20} />\r\n                      <span className=\"font-medium\">Seguridad</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold\">{workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === 'safety-checklist')?.length}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">Listas</div>\r\n                  </div>\r\n\r\n                  <div className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Icon name=\"Wrench\" className=\"text-purple-500\" size={20} />\r\n                      <span className=\"font-medium\">Fabricaci贸n</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold\">{workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === 'manufacturing')?.length}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">En Proceso</div>\r\n                  </div>\r\n\r\n                  <div className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Icon name=\"CheckCircle\" className=\"text-green-500\" size={20} />\r\n                      <span className=\"font-medium\">Calidad</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold\">{workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === 'quality-control')?.length}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">Revisi贸n</div>\r\n                  </div>\r\n\r\n                  <div className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Icon name=\"Truck\" className=\"text-teal-500\" size={20} />\r\n                      <span className=\"font-medium\">Env铆o</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold\">{workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === 'ready-shipment')?.length}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">Listos</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Main Content Area */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                  {/* Primary Workflow Board */}\r\n                  <div className=\"lg:col-span-2\">\r\n                    {activePanel === 'workflow' && (\r\n                      <WorkflowBoard\r\n                        workOrders={workOrders}\r\n                        onStatusChange={handleOrderStatusChange}\r\n                        onOrderSelect={setSelectedOrder}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'materials' && (\r\n                      <MaterialReceptionPanel\r\n                        workOrders={workOrders?.filter(o => o?.status === 'material-reception')}\r\n                        selectedOrder={selectedOrder}\r\n                        onMaterialReception={handleMaterialReception}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'safety' && (() => {\r\n                      const hasPPEFields = (o) => {\r\n                        if (!o) return false;\r\n                        const keys = ['cascoSeguridad','gafasProteccion','guantesTrabajo','calzadoSeguridad','arnesSeguridad','respiradorN95','chalecoReflectivo','requiereEstudiosMedicosActualizados','safetyChecklistMissing'];\r\n                        for (const k of keys) {\r\n                          if (o[k] !== undefined) return true;\r\n                          if (o.raw && o.raw[k] !== undefined) return true;\r\n                        }\r\n                        return false;\r\n                      };\r\n\r\n                      const safetyOrders = (workOrders || []).filter(o => mapToColumnId(o?.status || o?.estado) === 'safety-checklist' || hasPPEFields(o));\r\n\r\n                      return (\r\n                        <SafetyChecklistPanel\r\n                          workOrders={safetyOrders}\r\n                          selectedOrder={selectedOrder}\r\n                          onSafetyComplete={handleSafetyChecklist}\r\n                          onLocalMissingChange={(orderId, missingArray) => {\r\n                            try {\r\n                              const key = String(orderId || (selectedOrder?.id || selectedOrder?.ordenTrabajo || ''));\r\n                              setPanelMissingByOrder(prev => ({ ...prev, [key]: Array.isArray(missingArray) ? missingArray : [] }));\r\n                            } catch (e) {}\r\n                          }}\r\n                        />\r\n                      );\r\n                    })()}\r\n                  </div>\r\n\r\n                  {/* Secondary Controls Panel */}\r\n                  <div className=\"space-y-6\">\r\n                    {(() => {\r\n                      const cols = ['material-reception','safety-checklist','manufacturing','quality-control','ready-shipment'];\r\n                      const totalActive = cols.reduce((acc, col) => acc + (workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === col)?.length || 0), 0);\r\n                      return (\r\n                        <WorkflowControls\r\n                          selectedOrder={selectedOrder}\r\n                          currentShift={currentShift}\r\n                          totalOrders={totalActive}\r\n                          workOrdersIds={(workOrders || []).map(o => o?.id || o?.ordenTrabajo || o?.folio)}\r\n                          workOrders={workOrders}\r\n                          onForceRemove={handleForceRemove}\r\n                          onRevertStatus={handleRevertStatus}\r\n                          onSafetyComplete={handleSafetyChecklist}\r\n                          localMissingByOrder={panelMissingByOrder}\r\n                        />\r\n                      );\r\n                    })()}\r\n\r\n                    {/* Secondary Panels */}\r\n                    {activePanel === 'attendance' && (\r\n                      <AttendancePanel currentShift={currentShift} />\r\n                    )}\r\n\r\n                    {activePanel === 'quality' && (\r\n                      <QualityControlPanel\r\n                        workOrders={workOrders?.filter(o => o?.status === 'quality-control')}\r\n                        onQualityUpdate={handleQualityControl}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'changes' && (\r\n                      <ChangeOrderPanel\r\n                        workOrders={workOrders}\r\n                        onChangeOrder={handleChangeOrder}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                {/* Log workOrders on change to help debugging Finalizar */}\r\n                {/* Remove this effect after verification */}\r\n                {(() => {\r\n                  try {\r\n                    // eslint-disable-next-line no-console\r\n                    console.debug('[Workshop] workOrders count:', workOrders?.length, 'ids:', (workOrders || []).map(o => o?.id || o?.ordenTrabajo || o?.folio));\r\n                  } catch (e) {}\r\n                  return null;\r\n                })()}\r\n                {/* Empty State */}\r\n                {workOrders?.length === 0 && !isLoading && (\r\n                  <div className=\"text-center py-12\">\r\n                    <Icon name=\"Wrench\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                    <h3 className=\"text-lg font-medium text-foreground mb-2\">No hay 贸rdenes de trabajo</h3>\r\n                    <p className=\"text-muted-foreground mb-6\">\r\n                      Las 贸rdenes aparecer谩n aqu铆 cuando sean enviadas por el 谩rea de Proyectos\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          );\r\n        };\r\n\r\n        export default WorkshopOperationsManagement;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst WorkflowBoard = ({\r\n  workOrders = [],\r\n  onStageUpdate,\r\n  onMaterialReception,\r\n  onSafetyChecklist,\r\n  onManufacturingUpdate,\r\n  onQualityControl,\r\n  onEvidenceSubmission,\r\n  onChangeOrder,\r\n  onReportToProjects,\r\n  onRequestToPurchases\r\n}) => {\r\n  const stages = [\r\n    {\r\n      id: 'material_reception',\r\n      name: 'Recepci贸n de Materiales',\r\n      color: 'bg-blue-500',\r\n      icon: 'Package'\r\n    },\r\n    {\r\n      id: 'safety_attendance',\r\n      name: 'Seguridad y Asistencia',\r\n      color: 'bg-orange-500',\r\n      icon: 'Shield'\r\n    },\r\n    {\r\n      id: 'manufacturing',\r\n      name: 'Fabricaci贸n',\r\n      color: 'bg-purple-500',\r\n      icon: 'Wrench'\r\n    },\r\n    {\r\n      id: 'quality_control',\r\n      name: 'Control de Calidad',\r\n      color: 'bg-green-500',\r\n      icon: 'CheckCircle'\r\n    },\r\n    {\r\n      id: 'evidence_submission',\r\n      name: 'Env铆o de Evidencias',\r\n      color: 'bg-indigo-500',\r\n      icon: 'Camera'\r\n    }\r\n  ];\r\n\r\n  const getStatusColor = (workOrder, stage) => {\r\n    if (workOrder?.stage !== stage?.id) return 'border-border';\r\n    \r\n    switch (workOrder?.priority) {\r\n      case 'Cr铆tica': return 'border-red-500 bg-red-50';\r\n      case 'Alta': return 'border-orange-500 bg-orange-50';\r\n      case 'Media': return 'border-yellow-500 bg-yellow-50';\r\n      case 'Baja': return 'border-green-500 bg-green-50';\r\n      default: return 'border-border';\r\n    }\r\n  };\r\n\r\n  const handleWorkOrderAction = (workOrder, action) => {\r\n    switch (action) {\r\n      case 'verify_materials':\r\n        onMaterialReception?.(workOrder?.id, { status: 'in_progress' });\r\n        break;\r\n      case 'complete_safety':\r\n        onSafetyChecklist?.(workOrder?.id, { status: 'completed' });\r\n        break;\r\n      case 'update_progress':\r\n        onManufacturingUpdate?.(workOrder?.id, { progress: workOrder?.manufacturing?.progress + 25 });\r\n        break;\r\n      case 'quality_check':\r\n        onQualityControl?.(workOrder?.id, { status: 'in_progress' });\r\n        break;\r\n      case 'submit_evidence':\r\n        onEvidenceSubmission?.(workOrder?.id, { status: 'completed', submittedToProjects: true });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const renderWorkOrderCard = (workOrder) => (\r\n    <div\r\n      key={workOrder?.id}\r\n      className={`bg-card border rounded-lg p-4 mb-3 card-shadow ${getStatusColor(workOrder, stages?.find(s => s?.id === workOrder?.stage))}`}\r\n    >\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <div>\r\n          <h4 className=\"font-semibold text-sm text-foreground\">{workOrder?.orderNumber}</h4>\r\n          <p className=\"text-xs text-muted-foreground\">{workOrder?.projectReference}</p>\r\n        </div>\r\n        <div className={`px-2 py-1 rounded text-xs font-medium ${\r\n          workOrder?.priority === 'Cr铆tica' ? 'bg-red-100 text-red-800' :\r\n          workOrder?.priority === 'Alta' ? 'bg-orange-100 text-orange-800' :\r\n          workOrder?.priority === 'Media'? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n        }`}>\r\n          {workOrder?.priority}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Icon name=\"Users\" size={14} className=\"text-muted-foreground\" />\r\n          <div className=\"flex -space-x-1\">\r\n            {workOrder?.assignedTechnicians?.slice(0, 2)?.map((tech, index) => (\r\n              <div\r\n                key={tech?.id}\r\n                className=\"w-6 h-6 bg-secondary rounded-full flex items-center justify-center text-xs font-medium text-secondary-foreground\"\r\n                title={`${tech?.name} - ${tech?.role}`}\r\n              >\r\n                {tech?.name?.charAt(0)}\r\n              </div>\r\n            ))}\r\n            {workOrder?.assignedTechnicians?.length > 2 && (\r\n              <div className=\"w-6 h-6 bg-muted rounded-full flex items-center justify-center text-xs font-medium text-muted-foreground\">\r\n                +{workOrder?.assignedTechnicians?.length - 2}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stage-specific info */}\r\n        {workOrder?.stage === 'material_reception' && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-xs text-muted-foreground\">Materiales:</span>\r\n              <span className={`text-xs font-medium ${\r\n                workOrder?.materialsReceived?.status === 'completed' ? 'text-green-600' :\r\n                workOrder?.materialsReceived?.status === 'in_progress'? 'text-orange-600' : 'text-red-600'\r\n              }`}>\r\n                {workOrder?.materialsReceived?.items?.filter(item => item?.received)?.length || 0}/{workOrder?.materialsReceived?.items?.length || 0}\r\n              </span>\r\n            </div>\r\n            {workOrder?.materialsReceived?.status !== 'completed' && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => handleWorkOrderAction(workOrder, 'verify_materials')}\r\n                className=\"w-full text-xs\"\r\n              >\r\n                Verificar Materiales\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {workOrder?.stage === 'safety_attendance' && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-xs text-muted-foreground\">Seguridad:</span>\r\n              <span className={`text-xs font-medium ${\r\n                workOrder?.safetyChecklist?.status === 'completed' ? 'text-green-600' :\r\n                workOrder?.safetyChecklist?.status === 'in_progress'? 'text-orange-600' : 'text-red-600'\r\n              }`}>\r\n                {workOrder?.safetyChecklist?.items?.filter(item => item?.checked)?.length || 0}/{workOrder?.safetyChecklist?.items?.length || 0}\r\n              </span>\r\n            </div>\r\n            {workOrder?.safetyChecklist?.status !== 'completed' && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => handleWorkOrderAction(workOrder, 'complete_safety')}\r\n                className=\"w-full text-xs\"\r\n              >\r\n                Completar Checklist\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {workOrder?.stage === 'manufacturing' && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-xs text-muted-foreground\">Progreso:</span>\r\n              <span className=\"text-xs font-medium text-foreground\">{workOrder?.manufacturing?.progress || 0}%</span>\r\n            </div>\r\n            <div className=\"w-full bg-muted rounded-full h-2\">\r\n              <div \r\n                className=\"bg-primary h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${workOrder?.manufacturing?.progress || 0}%` }}\r\n              />\r\n            </div>\r\n            {workOrder?.manufacturing?.progress < 100 && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => handleWorkOrderAction(workOrder, 'update_progress')}\r\n                className=\"w-full text-xs\"\r\n              >\r\n                Actualizar Progreso\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {workOrder?.stage === 'quality_control' && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-xs text-muted-foreground\">Calidad:</span>\r\n              <span className={`text-xs font-medium ${\r\n                workOrder?.qualityControl?.status === 'completed' ? 'text-green-600' :\r\n                workOrder?.qualityControl?.status === 'in_progress'? 'text-orange-600' : 'text-red-600'\r\n              }`}>\r\n                {workOrder?.qualityControl?.checkpoints?.filter(cp => cp?.passed === true)?.length || 0}/{workOrder?.qualityControl?.checkpoints?.length || 0}\r\n              </span>\r\n            </div>\r\n            {workOrder?.qualityControl?.status !== 'completed' && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => handleWorkOrderAction(workOrder, 'quality_check')}\r\n                className=\"w-full text-xs\"\r\n              >\r\n                Inspecci贸n\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {workOrder?.stage === 'evidence_submission' && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-xs text-muted-foreground\">Evidencias:</span>\r\n              <span className={`text-xs font-medium ${\r\n                workOrder?.evidenceSubmission?.submittedToProjects ? 'text-green-600' : 'text-orange-600'\r\n              }`}>\r\n                {workOrder?.evidenceSubmission?.photos?.length || 0} fotos, {workOrder?.evidenceSubmission?.documents?.length || 0} docs\r\n              </span>\r\n            </div>\r\n            {!workOrder?.evidenceSubmission?.submittedToProjects && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => handleWorkOrderAction(workOrder, 'submit_evidence')}\r\n                className=\"w-full text-xs\"\r\n              >\r\n                Enviar a Proyectos\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Change orders indicator */}\r\n        {workOrder?.changeOrders?.length > 0 && (\r\n          <div className=\"flex items-center space-x-1 mt-2 pt-2 border-t border-border\">\r\n            <Icon name=\"AlertTriangle\" size={12} className=\"text-warning\" />\r\n            <span className=\"text-xs text-warning\">{workOrder?.changeOrders?.length} cambio(s)</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Workflow\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Tablero de Flujo Operativo</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Kanban del flujo de trabajo del taller</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"RefreshCw\">\r\n            Actualizar\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Filter\">\r\n            Filtros\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-4\">\r\n        {stages?.map((stage) => {\r\n          const stageWorkOrders = workOrders?.filter(wo => wo?.stage === stage?.id) || [];\r\n          \r\n          return (\r\n            <div key={stage?.id} className=\"space-y-3\">\r\n              <div className={`${stage?.color} text-white p-3 rounded-lg`}>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name={stage?.icon} size={16} color=\"white\" />\r\n                    <h3 className=\"font-medium text-sm\">{stage?.name}</h3>\r\n                  </div>\r\n                  <div className=\"w-6 h-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center\">\r\n                    <span className=\"text-xs font-bold\">{stageWorkOrders?.length}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2 max-h-96 overflow-y-auto\">\r\n                {stageWorkOrders?.map(workOrder => renderWorkOrderCard(workOrder))}\r\n                \r\n                {stageWorkOrders?.length === 0 && (\r\n                  <div className=\"text-center py-8\">\r\n                    <Icon name={stage?.icon} size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                    <p className=\"text-sm text-muted-foreground\">No hay 贸rdenes en esta etapa</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkflowBoard;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst MaterialReceptionPanel = ({ \r\n  workOrders = [], \r\n  onMaterialReception, \r\n  onReportToProjects, \r\n  onRequestToPurchases \r\n}) => {\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [materialPhotos, setMaterialPhotos] = useState([]);\r\n  const [notes, setNotes] = useState('');\r\n  const [selectedMaterials, setSelectedMaterials] = useState([]);\r\n\r\n  const handleMaterialCheck = (workOrderId, materialIndex, status, condition) => {\r\n    const workOrder = workOrders?.find(wo => wo?.id === workOrderId);\r\n    if (!workOrder) return;\r\n\r\n    const updatedItems = workOrder?.materialsReceived?.items?.map((item, index) => \r\n      index === materialIndex \r\n        ? { ...item, received: status === 'received', condition }\r\n        : item\r\n    );\r\n\r\n    const allReceived = updatedItems?.every(item => item?.received);\r\n    const hasDefects = updatedItems?.some(item => item?.condition === 'defective');\r\n\r\n    onMaterialReception?.(workOrderId, {\r\n      status: allReceived ? 'completed' : 'in_progress',\r\n      items: updatedItems,\r\n      photos: materialPhotos,\r\n      notes: notes\r\n    });\r\n\r\n    // Report defects to Projects\r\n    if (hasDefects) {\r\n      const defectiveItems = updatedItems?.filter(item => item?.condition === 'defective');\r\n      onReportToProjects?.(workOrderId, 'defect_report', {\r\n        defectiveItems,\r\n        photos: materialPhotos,\r\n        notes\r\n      });\r\n    }\r\n\r\n    // Request replacements from Purchases\r\n    const missingItems = updatedItems?.filter(item => !item?.received);\r\n    if (missingItems?.length > 0) {\r\n      onRequestToPurchases?.(workOrderId, 'replacement_request', {\r\n        missingItems,\r\n        notes\r\n      });\r\n    }\r\n  };\r\n\r\n  const handlePhotoUpload = (event) => {\r\n    const files = Array.from(event?.target?.files || []);\r\n    const photoUrls = files?.map(file => URL.createObjectURL(file));\r\n    setMaterialPhotos(prev => [...prev, ...photoUrls]);\r\n  };\r\n\r\n  const handleCompleteReception = (workOrder) => {\r\n    const allItemsProcessed = workOrder?.materialsReceived?.items?.every(item => \r\n      item?.received !== undefined\r\n    );\r\n    \r\n    if (!allItemsProcessed) {\r\n      alert('Por favor verifica todos los materiales antes de completar la recepci贸n.');\r\n      return;\r\n    }\r\n\r\n    const completeItems = workOrder?.materialsReceived?.items?.filter(item => \r\n      item?.received && item?.condition === 'good'\r\n    );\r\n    \r\n    const hasCompleteItems = completeItems?.length > 0;\r\n\r\n    onMaterialReception?.(workOrder?.id, {\r\n      status: hasCompleteItems ? 'completed' : 'pending',\r\n      items: workOrder?.materialsReceived?.items,\r\n      photos: materialPhotos,\r\n      notes: notes,\r\n      completedAt: new Date()?.toISOString()\r\n    });\r\n\r\n    // Reset form\r\n    setSelectedOrder(null);\r\n    setMaterialPhotos([]);\r\n    setNotes('');\r\n    setSelectedMaterials([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Package\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Recepci贸n de Materiales</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Verificaci贸n y registro de materiales recibidos</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Camera\">\r\n            C谩mara\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\">\r\n            Reporte\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {workOrders?.length === 0 ? (\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"Package\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">No hay materiales pendientes</h3>\r\n          <p className=\"text-muted-foreground\">Todos los materiales han sido recibidos y verificados</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {workOrders?.map((workOrder) => (\r\n            <div key={workOrder?.id} className=\"border border-border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground\">{workOrder?.orderNumber}</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">{workOrder?.projectReference}</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Cliente: {workOrder?.clientName}</p>\r\n                </div>\r\n                <div className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                  workOrder?.priority === 'Cr铆tica' ? 'bg-red-100 text-red-800' :\r\n                  workOrder?.priority === 'Alta' ? 'bg-orange-100 text-orange-800' :\r\n                  workOrder?.priority === 'Media'? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                }`}>\r\n                  {workOrder?.priority}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <h4 className=\"font-medium text-sm text-foreground mb-2\">Lista de Materiales:</h4>\r\n                \r\n                {workOrder?.materialsReceived?.items?.map((material, materialIndex) => (\r\n                  <div key={materialIndex} className=\"flex items-center justify-between p-3 bg-muted rounded-lg\">\r\n                    <div className=\"flex-1\">\r\n                      <p className=\"font-medium text-sm text-foreground\">{material?.name}</p>\r\n                      <p className=\"text-xs text-muted-foreground\">Cantidad: {material?.quantity}</p>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center space-x-2\">\r\n                      {/* Material status buttons */}\r\n                      <div className=\"flex items-center space-x-1\">\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={material?.received && material?.condition === 'good' ? 'default' : 'outline'}\r\n                          onClick={() => handleMaterialCheck(workOrder?.id, materialIndex, 'received', 'good')}\r\n                          className=\"text-xs px-2 py-1\"\r\n                        >\r\n                          <Icon name=\"CheckCircle\" size={12} className=\"mr-1\" />\r\n                          Bueno\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={material?.condition === 'defective' ? 'destructive' : 'outline'}\r\n                          onClick={() => handleMaterialCheck(workOrder?.id, materialIndex, 'received', 'defective')}\r\n                          className=\"text-xs px-2 py-1\"\r\n                        >\r\n                          <Icon name=\"XCircle\" size={12} className=\"mr-1\" />\r\n                          Defecto\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={!material?.received ? 'secondary' : 'outline'}\r\n                          onClick={() => handleMaterialCheck(workOrder?.id, materialIndex, 'missing', null)}\r\n                          className=\"text-xs px-2 py-1\"\r\n                        >\r\n                          <Icon name=\"AlertTriangle\" size={12} className=\"mr-1\" />\r\n                          Faltante\r\n                        </Button>\r\n                      </div>\r\n\r\n                      {/* Status indicator */}\r\n                      <div className=\"w-3 h-3 rounded-full\">\r\n                        {material?.received && material?.condition === 'good' && (\r\n                          <div className=\"w-3 h-3 bg-green-500 rounded-full\" title=\"Material recibido en buen estado\" />\r\n                        )}\r\n                        {material?.condition === 'defective' && (\r\n                          <div className=\"w-3 h-3 bg-red-500 rounded-full\" title=\"Material defectuoso reportado\" />\r\n                        )}\r\n                        {!material?.received && (\r\n                          <div className=\"w-3 h-3 bg-yellow-500 rounded-full\" title=\"Material faltante\" />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Photo upload section */}\r\n              <div className=\"mt-4 p-3 bg-muted rounded-lg\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <h4 className=\"font-medium text-sm text-foreground\">Documentaci贸n Fotogr谩fica</h4>\r\n                  <label className=\"cursor-pointer\">\r\n                    <input\r\n                      type=\"file\"\r\n                      multiple\r\n                      accept=\"image/*\"\r\n                      onChange={handlePhotoUpload}\r\n                      className=\"hidden\"\r\n                    />\r\n                    <Button variant=\"outline\" size=\"sm\" iconName=\"Camera\">\r\n                      Tomar Foto\r\n                    </Button>\r\n                  </label>\r\n                </div>\r\n                \r\n                {materialPhotos?.length > 0 && (\r\n                  <div className=\"grid grid-cols-3 gap-2 mb-3\">\r\n                    {materialPhotos?.map((photo, index) => (\r\n                      <div key={index} className=\"relative\">\r\n                        <img\r\n                          src={photo}\r\n                          alt={`Material evidence ${index + 1}`}\r\n                          className=\"w-full h-16 object-cover rounded border\"\r\n                        />\r\n                        <Button\r\n                          variant=\"destructive\"\r\n                          size=\"icon\"\r\n                          className=\"absolute -top-1 -right-1 w-5 h-5\"\r\n                          onClick={() => setMaterialPhotos(prev => prev?.filter((_, i) => i !== index))}\r\n                        >\r\n                          <Icon name=\"X\" size={12} />\r\n                        </Button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Notes section */}\r\n              <div className=\"mt-4\">\r\n                <Input\r\n                  placeholder=\"Notas sobre recepci贸n de materiales...\"\r\n                  value={notes}\r\n                  onChange={(e) => setNotes(e?.target?.value)}\r\n                  className=\"mb-3\"\r\n                />\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex justify-end space-x-2 mt-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => onReportToProjects?.(workOrder?.id, 'material_status', {\r\n                    items: workOrder?.materialsReceived?.items,\r\n                    photos: materialPhotos,\r\n                    notes\r\n                  })}\r\n                  iconName=\"Send\"\r\n                >\r\n                  Reportar a Proyectos\r\n                </Button>\r\n                <Button\r\n                  variant=\"default\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleCompleteReception(workOrder)}\r\n                  iconName=\"CheckCircle\"\r\n                >\r\n                  Completar Recepci贸n\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaterialReceptionPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\nconst SafetyChecklistPanel = ({ workOrders = [], onSafetyUpdate }) => {\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [checklistNotes, setChecklistNotes] = useState('');\r\n\r\n  const safetyItems = [\r\n    {\r\n      id: 'ppe_complete',\r\n      name: 'EPP Completo',\r\n      description: 'Casco, gafas, guantes, calzado de seguridad',\r\n      icon: 'Shield',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'tools_condition',\r\n      name: 'Herramientas en buen estado',\r\n      description: 'Verificaci贸n de herramientas y equipos',\r\n      icon: 'Wrench',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'work_area_clear',\r\n      name: 'rea de trabajo despejada',\r\n      description: 'Espacio libre de obst谩culos y riesgos',\r\n      icon: 'MapPin',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'certifications_valid',\r\n      name: 'Certificaciones vigentes',\r\n      description: 'Certificados de trabajo en altura, espacios confinados, etc.',\r\n      icon: 'Award',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'emergency_procedures',\r\n      name: 'Procedimientos de emergencia',\r\n      description: 'Conocimiento de rutas de evacuaci贸n y primeros auxilios',\r\n      icon: 'AlertCircle',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'communication_devices',\r\n      name: 'Dispositivos de comunicaci贸n',\r\n      description: 'Radios, tel茅fonos de emergencia funcionando',\r\n      icon: 'Phone',\r\n      required: false\r\n    }\r\n  ];\r\n\r\n  const handleChecklistUpdate = (workOrderId, itemId, checked) => {\r\n    const workOrder = workOrders?.find(wo => wo?.id === workOrderId);\r\n    if (!workOrder) return;\r\n\r\n    const updatedItems = workOrder?.safetyChecklist?.items?.map(item =>\r\n      item?.name?.toLowerCase()?.replace(/\\s+/g, '_') === itemId\r\n        ? { ...item, checked }\r\n        : item\r\n    );\r\n\r\n    const requiredItems = safetyItems?.filter(item => item?.required);\r\n    const completedRequired = updatedItems?.filter(item => {\r\n      const safetyItem = safetyItems?.find(si => \r\n        si?.name?.toLowerCase()?.replace(/\\s+/g, '_') === item?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return item?.checked && safetyItem?.required;\r\n    });\r\n\r\n    const isCompleted = completedRequired?.length >= requiredItems?.length;\r\n\r\n    onSafetyUpdate?.(workOrderId, {\r\n      status: isCompleted ? 'completed' : 'in_progress',\r\n      items: updatedItems,\r\n      completedAt: isCompleted ? new Date()?.toISOString() : null,\r\n      notes: checklistNotes\r\n    });\r\n  };\r\n\r\n  const handleCompleteChecklist = (workOrder) => {\r\n    const requiredItems = safetyItems?.filter(item => item?.required);\r\n    const checkedRequired = workOrder?.safetyChecklist?.items?.filter(item => {\r\n      const safetyItem = safetyItems?.find(si => \r\n        si?.name?.toLowerCase()?.replace(/\\s+/g, '_') === item?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return item?.checked && safetyItem?.required;\r\n    });\r\n\r\n    if (checkedRequired?.length < requiredItems?.length) {\r\n      alert('Por favor completa todos los elementos obligatorios de seguridad antes de continuar.');\r\n      return;\r\n    }\r\n\r\n    onSafetyUpdate?.(workOrder?.id, {\r\n      status: 'completed',\r\n      items: workOrder?.safetyChecklist?.items,\r\n      completedAt: new Date()?.toISOString(),\r\n      notes: checklistNotes\r\n    });\r\n\r\n    setSelectedOrder(null);\r\n    setChecklistNotes('');\r\n  };\r\n\r\n  const getCompletionPercentage = (workOrder) => {\r\n    const totalRequired = safetyItems?.filter(item => item?.required)?.length;\r\n    const completedRequired = workOrder?.safetyChecklist?.items?.filter(item => {\r\n      const safetyItem = safetyItems?.find(si => \r\n        si?.name?.toLowerCase()?.replace(/\\s+/g, '_') === item?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return item?.checked && safetyItem?.required;\r\n    })?.length || 0;\r\n    \r\n    return Math.round((completedRequired / totalRequired) * 100);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Shield\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Checklist de Seguridad</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Verificaci贸n obligatoria antes de iniciar trabajos</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"AlertTriangle\">\r\n            Incidencias\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\">\r\n            Manual\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {workOrders?.length === 0 ? (\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"Shield\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">No hay checklists pendientes</h3>\r\n          <p className=\"text-muted-foreground\">Todas las verificaciones de seguridad est谩n completas</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {workOrders?.map((workOrder) => (\r\n            <div key={workOrder?.id} className=\"border border-border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground\">{workOrder?.orderNumber}</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">{workOrder?.projectReference}</p>\r\n                  <div className=\"flex items-center space-x-2 mt-1\">\r\n                    <div className=\"flex -space-x-1\">\r\n                      {workOrder?.assignedTechnicians?.map((tech, index) => (\r\n                        <div\r\n                          key={tech?.id}\r\n                          className=\"w-6 h-6 bg-secondary rounded-full flex items-center justify-center text-xs font-medium text-secondary-foreground border-2 border-background\"\r\n                          title={`${tech?.name} - ${tech?.role}`}\r\n                        >\r\n                          {tech?.name?.charAt(0)}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <span className=\"text-xs text-muted-foreground\">T茅cnicos asignados</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className={`px-3 py-1 rounded-full text-xs font-medium mb-2 ${\r\n                    workOrder?.priority === 'Cr铆tica' ? 'bg-red-100 text-red-800' :\r\n                    workOrder?.priority === 'Alta' ? 'bg-orange-100 text-orange-800' :\r\n                    workOrder?.priority === 'Media'? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                  }`}>\r\n                    {workOrder?.priority}\r\n                  </div>\r\n                  <div className=\"text-sm font-medium text-foreground\">\r\n                    {getCompletionPercentage(workOrder)}% Completo\r\n                  </div>\r\n                  <div className=\"w-16 bg-muted rounded-full h-2 mt-1\">\r\n                    <div \r\n                      className=\"bg-orange-500 h-2 rounded-full transition-all duration-300\"\r\n                      style={{ width: `${getCompletionPercentage(workOrder)}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <h4 className=\"font-medium text-sm text-foreground mb-2\">Lista de Verificaci贸n de Seguridad:</h4>\r\n                \r\n                {safetyItems?.map((safetyItem) => {\r\n                  const workOrderItem = workOrder?.safetyChecklist?.items?.find(item =>\r\n                    item?.name?.toLowerCase()?.replace(/\\s+/g, '_') === safetyItem?.id\r\n                  );\r\n                  const isChecked = workOrderItem?.checked || false;\r\n                  \r\n                  return (\r\n                    <div key={safetyItem?.id} className={`flex items-start space-x-3 p-3 rounded-lg ${\r\n                      safetyItem?.required ? 'bg-orange-50 border border-orange-200' : 'bg-muted'\r\n                    }`}>\r\n                      <div className=\"flex items-center space-x-2 flex-shrink-0\">\r\n                        <Checkbox\r\n                          checked={isChecked}\r\n                          onChange={(checked) => handleChecklistUpdate(workOrder?.id, safetyItem?.id, checked)}\r\n                          className=\"mt-0.5\"\r\n                        />\r\n                        <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${\r\n                          isChecked ? 'bg-green-500' : safetyItem?.required ? 'bg-orange-500' : 'bg-gray-500'\r\n                        }`}>\r\n                          <Icon name={safetyItem?.icon} size={16} color=\"white\" />\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <h4 className=\"font-medium text-sm text-foreground\">{safetyItem?.name}</h4>\r\n                          {safetyItem?.required && (\r\n                            <span className=\"px-2 py-1 bg-orange-500 text-white text-xs rounded-full\">\r\n                              Obligatorio\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">{safetyItem?.description}</p>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex-shrink-0\">\r\n                        {isChecked ? (\r\n                          <Icon name=\"CheckCircle\" size={20} className=\"text-green-500\" />\r\n                        ) : (\r\n                          <Icon name=\"Circle\" size={20} className=\"text-muted-foreground\" />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              {/* Notes section */}\r\n              <div className=\"mt-4\">\r\n                <textarea\r\n                  placeholder=\"Observaciones de seguridad...\"\r\n                  value={checklistNotes}\r\n                  onChange={(e) => setChecklistNotes(e?.target?.value)}\r\n                  className=\"w-full p-3 border border-border rounded-lg resize-none h-20 text-sm\"\r\n                />\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex justify-between items-center mt-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-blue-500\" />\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    Elementos obligatorios: {safetyItems?.filter(item => item?.required)?.length}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"flex space-x-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    iconName=\"AlertTriangle\"\r\n                    disabled\r\n                  >\r\n                    Reportar Incidencia\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"default\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleCompleteChecklist(workOrder)}\r\n                    iconName=\"CheckCircle\"\r\n                    disabled={getCompletionPercentage(workOrder) < 100}\r\n                  >\r\n                    Aprobar Seguridad\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SafetyChecklistPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst AttendancePanel = ({ currentShift = {}, onAttendanceUpdate }) => {\r\n  const [attendanceList, setAttendanceList] = useState([\r\n    {\r\n      id: 1,\r\n      name: 'Carlos Mendoza',\r\n      role: 'T茅cnico Senior',\r\n      checkIn: '08:00',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-001'\r\n    },\r\n    {\r\n      id: 2,\r\n      name: 'Ana Garc铆a',\r\n      role: 'Especialista HVAC',\r\n      checkIn: '08:15',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-001'\r\n    },\r\n    {\r\n      id: 3,\r\n      name: 'Roberto Silva',\r\n      role: 'T茅cnico Junior',\r\n      checkIn: '08:05',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-002'\r\n    },\r\n    {\r\n      id: 4,\r\n      name: 'Mar铆a L贸pez',\r\n      role: 'Supervisora',\r\n      checkIn: '07:45',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-002'\r\n    },\r\n    {\r\n      id: 5,\r\n      name: 'Diego Ram铆rez',\r\n      role: 'T茅cnico Senior',\r\n      checkIn: '08:00',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-003'\r\n    },\r\n    {\r\n      id: 6,\r\n      name: 'Laura Jim茅nez',\r\n      role: 'Especialista HVAC',\r\n      checkIn: null,\r\n      checkOut: null,\r\n      status: 'absent',\r\n      workOrder: null,\r\n      reason: 'Cita m茅dica programada'\r\n    },\r\n    {\r\n      id: 7,\r\n      name: 'Patricia Morales',\r\n      role: 'Supervisora',\r\n      checkIn: '08:10',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-004'\r\n    },\r\n    {\r\n      id: 8,\r\n      name: 'Alejandro Ruiz',\r\n      role: 'T茅cnico Senior',\r\n      checkIn: '08:00',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-004'\r\n    },\r\n    {\r\n      id: 9,\r\n      name: 'Fernando Castro',\r\n      role: 'Especialista IoT',\r\n      checkIn: '08:30',\r\n      checkOut: null,\r\n      status: 'late',\r\n      workOrder: 'WO-2024-005'\r\n    },\r\n    {\r\n      id: 10,\r\n      name: 'Gabriela V谩zquez',\r\n      role: 'T茅cnico Senior',\r\n      checkIn: '08:00',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-005'\r\n    },\r\n    {\r\n      id: 11,\r\n      name: 'Jos茅 Hern谩ndez',\r\n      role: 'T茅cnico Junior',\r\n      checkIn: null,\r\n      checkOut: null,\r\n      status: 'absent',\r\n      workOrder: null,\r\n      reason: 'No justificado'\r\n    },\r\n    {\r\n      id: 12,\r\n      name: 'Carmen Torres',\r\n      role: 'Especialista HVAC',\r\n      checkIn: '08:20',\r\n      checkOut: null,\r\n      status: 'late',\r\n      workOrder: null\r\n    }\r\n  ]);\r\n\r\n  const handleCheckIn = (technicianId) => {\r\n    const currentTime = new Date()?.toLocaleTimeString('es-MX', { \r\n      hour: '2-digit', \r\n      minute: '2-digit',\r\n      hour12: false \r\n    });\r\n    \r\n    setAttendanceList(prev => prev?.map(tech =>\r\n      tech?.id === technicianId\r\n        ? { ...tech, checkIn: currentTime, status: currentTime > '08:15' ? 'late' : 'present' }\r\n        : tech\r\n    ));\r\n\r\n    updateAttendanceStats();\r\n  };\r\n\r\n  const handleCheckOut = (technicianId) => {\r\n    const currentTime = new Date()?.toLocaleTimeString('es-MX', { \r\n      hour: '2-digit', \r\n      minute: '2-digit',\r\n      hour12: false \r\n    });\r\n    \r\n    setAttendanceList(prev => prev?.map(tech =>\r\n      tech?.id === technicianId\r\n        ? { ...tech, checkOut: currentTime, status: 'completed' }\r\n        : tech\r\n    ));\r\n\r\n    updateAttendanceStats();\r\n  };\r\n\r\n  const updateAttendanceStats = () => {\r\n    const presentCount = attendanceList?.filter(tech => \r\n      tech?.status === 'present' || tech?.status === 'late'\r\n    )?.length;\r\n    \r\n    onAttendanceUpdate?.({\r\n      attendanceCount: presentCount,\r\n      totalTechnicians: attendanceList?.length,\r\n      attendanceRate: Math.round((presentCount / attendanceList?.length) * 100)\r\n    });\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'present': return 'text-green-600 bg-green-100';\r\n      case 'late': return 'text-orange-600 bg-orange-100';\r\n      case 'absent': return 'text-red-600 bg-red-100';\r\n      case 'completed': return 'text-blue-600 bg-blue-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'present': return 'CheckCircle';\r\n      case 'late': return 'Clock';\r\n      case 'absent': return 'XCircle';\r\n      case 'completed': return 'LogOut';\r\n      default: return 'User';\r\n    }\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    switch (status) {\r\n      case 'present': return 'Presente';\r\n      case 'late': return 'Tardanza';\r\n      case 'absent': return 'Ausente';\r\n      case 'completed': return 'Salida';\r\n      default: return 'Indefinido';\r\n    }\r\n  };\r\n\r\n  const presentTechnicians = attendanceList?.filter(tech => tech?.status === 'present' || tech?.status === 'late')?.length;\r\n  const absentTechnicians = attendanceList?.filter(tech => tech?.status === 'absent')?.length;\r\n  const lateTechnicians = attendanceList?.filter(tech => tech?.status === 'late')?.length;\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Users\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Control de Asistencia</h2>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Turno {currentShift?.start} - {currentShift?.end} | {currentShift?.date}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <div className=\"text-2xl font-bold text-foreground\">{presentTechnicians}/{attendanceList?.length}</div>\r\n          <div className=\"text-sm text-muted-foreground\">Presentes</div>\r\n        </div>\r\n      </div>\r\n      {/* Attendance Summary */}\r\n      <div className=\"grid grid-cols-3 gap-4 mb-6\">\r\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"CheckCircle\" size={20} className=\"text-green-600\" />\r\n            <div>\r\n              <div className=\"font-semibold text-green-800\">{presentTechnicians - lateTechnicians}</div>\r\n              <div className=\"text-xs text-green-600\">A Tiempo</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Clock\" size={20} className=\"text-orange-600\" />\r\n            <div>\r\n              <div className=\"font-semibold text-orange-800\">{lateTechnicians}</div>\r\n              <div className=\"text-xs text-orange-600\">Tardanzas</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"XCircle\" size={20} className=\"text-red-600\" />\r\n            <div>\r\n              <div className=\"font-semibold text-red-800\">{absentTechnicians}</div>\r\n              <div className=\"text-xs text-red-600\">Ausentes</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Attendance List */}\r\n      <div className=\"space-y-2 max-h-80 overflow-y-auto\">\r\n        {attendanceList?.map((technician) => (\r\n          <div key={technician?.id} className=\"flex items-center justify-between p-3 bg-muted rounded-lg\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-10 h-10 bg-secondary rounded-full flex items-center justify-center\">\r\n                <Icon name=\"User\" size={16} color=\"white\" />\r\n              </div>\r\n              <div>\r\n                <h4 className=\"font-medium text-sm text-foreground\">{technician?.name}</h4>\r\n                <p className=\"text-xs text-muted-foreground\">{technician?.role}</p>\r\n                {technician?.workOrder && (\r\n                  <p className=\"text-xs text-blue-600\">Asignado a: {technician?.workOrder}</p>\r\n                )}\r\n                {technician?.reason && (\r\n                  <p className=\"text-xs text-red-600\">Motivo: {technician?.reason}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-4\">\r\n              {/* Check in/out times */}\r\n              <div className=\"text-right\">\r\n                {technician?.checkIn && (\r\n                  <div className=\"text-sm font-medium text-foreground\">\r\n                    Entrada: {technician?.checkIn}\r\n                  </div>\r\n                )}\r\n                {technician?.checkOut && (\r\n                  <div className=\"text-sm text-muted-foreground\">\r\n                    Salida: {technician?.checkOut}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Status badge */}\r\n              <div className={`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${getStatusColor(technician?.status)}`}>\r\n                <Icon name={getStatusIcon(technician?.status)} size={12} />\r\n                <span>{getStatusText(technician?.status)}</span>\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex space-x-1\">\r\n                {!technician?.checkIn && technician?.status === 'absent' && (\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"outline\"\r\n                    onClick={() => handleCheckIn(technician?.id)}\r\n                    iconName=\"LogIn\"\r\n                    className=\"text-xs px-2 py-1\"\r\n                  >\r\n                    Check In\r\n                  </Button>\r\n                )}\r\n                {technician?.checkIn && !technician?.checkOut && technician?.status !== 'absent' && (\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"outline\"\r\n                    onClick={() => handleCheckOut(technician?.id)}\r\n                    iconName=\"LogOut\"\r\n                    className=\"text-xs px-2 py-1\"\r\n                  >\r\n                    Check Out\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {/* Quick actions */}\r\n      <div className=\"flex justify-between items-center mt-6 pt-4 border-t border-border\">\r\n        <div className=\"flex space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Download\">\r\n            Exportar Reporte\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Calendar\">\r\n            Ver Historial\r\n          </Button>\r\n        </div>\r\n        \r\n        <div className=\"text-sm text-muted-foreground\">\r\n          ltima actualizaci贸n: {new Date()?.toLocaleTimeString('es-MX')}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendancePanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst QualityControlPanel = ({ workOrders = [], onQualityUpdate, onReportToProjects }) => {\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [qualityPhotos, setQualityPhotos] = useState([]);\r\n  const [inspectionNotes, setInspectionNotes] = useState('');\r\n\r\n  const qualityCheckpoints = [\r\n    {\r\n      id: 'installation_verification',\r\n      name: 'Verificaci贸n de instalaci贸n',\r\n      description: 'Revisi贸n de montaje y conexiones seg煤n especificaciones',\r\n      icon: 'Wrench',\r\n      critical: true\r\n    },\r\n    {\r\n      id: 'function_tests',\r\n      name: 'Pruebas de funcionamiento',\r\n      description: 'Operaci贸n del sistema bajo condiciones normales',\r\n      icon: 'Play',\r\n      critical: true\r\n    },\r\n    {\r\n      id: 'visual_inspection',\r\n      name: 'Inspecci贸n visual',\r\n      description: 'Revisi贸n de acabados, etiquetado y limpieza',\r\n      icon: 'Eye',\r\n      critical: false\r\n    },\r\n    {\r\n      id: 'technical_documentation',\r\n      name: 'Documentaci贸n t茅cnica',\r\n      description: 'Manuales, garant铆as y certificados completos',\r\n      icon: 'FileText',\r\n      critical: true\r\n    },\r\n    {\r\n      id: 'safety_compliance',\r\n      name: 'Cumplimiento de seguridad',\r\n      description: 'Verificaci贸n de normas de seguridad aplicables',\r\n      icon: 'Shield',\r\n      critical: true\r\n    },\r\n    {\r\n      id: 'performance_tests',\r\n      name: 'Pruebas de rendimiento',\r\n      description: 'Medici贸n de par谩metros t茅cnicos y eficiencia',\r\n      icon: 'BarChart3',\r\n      critical: false\r\n    }\r\n  ];\r\n\r\n  const handleCheckpointUpdate = (workOrderId, checkpointId, passed, notes = '') => {\r\n    const workOrder = workOrders?.find(wo => wo?.id === workOrderId);\r\n    if (!workOrder) return;\r\n\r\n    const updatedCheckpoints = workOrder?.qualityControl?.checkpoints?.map(checkpoint => {\r\n      const qualityCheckpoint = qualityCheckpoints?.find(qc => \r\n        qc?.name?.toLowerCase()?.replace(/\\s+/g, '_') === checkpoint?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      \r\n      if (qualityCheckpoint?.id === checkpointId) {\r\n        return { \r\n          ...checkpoint, \r\n          passed, \r\n          notes,\r\n          inspectedAt: new Date()?.toISOString(),\r\n          inspector: 'Inspector Actual' // This should come from authentication\r\n        };\r\n      }\r\n      return checkpoint;\r\n    });\r\n\r\n    const criticalCheckpoints = qualityCheckpoints?.filter(qc => qc?.critical);\r\n    const passedCritical = updatedCheckpoints?.filter(cp => {\r\n      const qualityCheckpoint = qualityCheckpoints?.find(qc => \r\n        qc?.name?.toLowerCase()?.replace(/\\s+/g, '_') === cp?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return cp?.passed === true && qualityCheckpoint?.critical;\r\n    });\r\n\r\n    const hasFailures = updatedCheckpoints?.some(cp => cp?.passed === false);\r\n    const criticalComplete = passedCritical?.length >= criticalCheckpoints?.length;\r\n    \r\n    const status = hasFailures ? 'failed' : \r\n                  criticalComplete ? 'completed' : 'in_progress';\r\n\r\n    onQualityUpdate?.(workOrderId, {\r\n      status,\r\n      checkpoints: updatedCheckpoints,\r\n      photos: qualityPhotos,\r\n      inspector: 'Inspector Actual',\r\n      completedAt: status === 'completed' ? new Date()?.toISOString() : null,\r\n      notes: inspectionNotes\r\n    });\r\n\r\n    // Auto-report failures to Projects\r\n    if (hasFailures) {\r\n      const failedCheckpoints = updatedCheckpoints?.filter(cp => cp?.passed === false);\r\n      onReportToProjects?.(workOrderId, 'quality_failure', {\r\n        failedCheckpoints,\r\n        photos: qualityPhotos,\r\n        notes: inspectionNotes,\r\n        inspector: 'Inspector Actual'\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCompleteInspection = (workOrder) => {\r\n    const criticalCheckpoints = qualityCheckpoints?.filter(qc => qc?.critical);\r\n    const passedCritical = workOrder?.qualityControl?.checkpoints?.filter(cp => {\r\n      const qualityCheckpoint = qualityCheckpoints?.find(qc => \r\n        qc?.name?.toLowerCase()?.replace(/\\s+/g, '_') === cp?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return cp?.passed === true && qualityCheckpoint?.critical;\r\n    });\r\n\r\n    if (passedCritical?.length < criticalCheckpoints?.length) {\r\n      alert('Por favor completa todos los puntos cr铆ticos de control de calidad.');\r\n      return;\r\n    }\r\n\r\n    const hasFailures = workOrder?.qualityControl?.checkpoints?.some(cp => cp?.passed === false);\r\n    \r\n    onQualityUpdate?.(workOrder?.id, {\r\n      status: hasFailures ? 'failed' : 'completed',\r\n      checkpoints: workOrder?.qualityControl?.checkpoints,\r\n      photos: qualityPhotos,\r\n      inspector: 'Inspector Actual',\r\n      completedAt: new Date()?.toISOString(),\r\n      notes: inspectionNotes\r\n    });\r\n\r\n    // Report completion to Projects\r\n    onReportToProjects?.(workOrder?.id, 'quality_approval', {\r\n      status: hasFailures ? 'rejected' : 'approved',\r\n      checkpoints: workOrder?.qualityControl?.checkpoints,\r\n      photos: qualityPhotos,\r\n      notes: inspectionNotes,\r\n      inspector: 'Inspector Actual'\r\n    });\r\n\r\n    setSelectedOrder(null);\r\n    setQualityPhotos([]);\r\n    setInspectionNotes('');\r\n  };\r\n\r\n  const handlePhotoUpload = (event) => {\r\n    const files = Array.from(event?.target?.files || []);\r\n    const photoUrls = files?.map(file => URL.createObjectURL(file));\r\n    setQualityPhotos(prev => [...prev, ...photoUrls]);\r\n  };\r\n\r\n  const getCompletionPercentage = (workOrder) => {\r\n    const totalCritical = qualityCheckpoints?.filter(qc => qc?.critical)?.length;\r\n    const completedCritical = workOrder?.qualityControl?.checkpoints?.filter(cp => {\r\n      const qualityCheckpoint = qualityCheckpoints?.find(qc => \r\n        qc?.name?.toLowerCase()?.replace(/\\s+/g, '_') === cp?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return cp?.passed === true && qualityCheckpoint?.critical;\r\n    })?.length || 0;\r\n    \r\n    return Math.round((completedCritical / totalCritical) * 100);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"CheckCircle\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Control de Calidad</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Inspecci贸n y validaci贸n de trabajos completados</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Camera\">\r\n            C谩mara\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\">\r\n            Checklist\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {workOrders?.length === 0 ? (\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"CheckCircle\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">No hay inspecciones pendientes</h3>\r\n          <p className=\"text-muted-foreground\">Todas las 贸rdenes est谩n en proceso de fabricaci贸n</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {workOrders?.map((workOrder) => (\r\n            <div key={workOrder?.id} className=\"border border-border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground\">{workOrder?.orderNumber}</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">{workOrder?.projectReference}</p>\r\n                  <div className=\"flex items-center space-x-2 mt-1\">\r\n                    <Icon name=\"User\" size={14} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      Inspector: {workOrder?.qualityControl?.inspector || 'No asignado'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className={`px-3 py-1 rounded-full text-xs font-medium mb-2 ${\r\n                    workOrder?.priority === 'Cr铆tica' ? 'bg-red-100 text-red-800' :\r\n                    workOrder?.priority === 'Alta' ? 'bg-orange-100 text-orange-800' :\r\n                    workOrder?.priority === 'Media'? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                  }`}>\r\n                    {workOrder?.priority}\r\n                  </div>\r\n                  <div className=\"text-sm font-medium text-foreground\">\r\n                    {getCompletionPercentage(workOrder)}% Inspeccionado\r\n                  </div>\r\n                  <div className=\"w-16 bg-muted rounded-full h-2 mt-1\">\r\n                    <div \r\n                      className=\"bg-green-500 h-2 rounded-full transition-all duration-300\"\r\n                      style={{ width: `${getCompletionPercentage(workOrder)}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <h4 className=\"font-medium text-sm text-foreground mb-2\">Puntos de Control de Calidad:</h4>\r\n                \r\n                {qualityCheckpoints?.map((checkpoint) => {\r\n                  const workOrderCheckpoint = workOrder?.qualityControl?.checkpoints?.find(cp =>\r\n                    cp?.name?.toLowerCase()?.replace(/\\s+/g, '_') === checkpoint?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n                  );\r\n                  const status = workOrderCheckpoint?.passed;\r\n                  \r\n                  return (\r\n                    <div key={checkpoint?.id} className={`flex items-start space-x-3 p-3 rounded-lg ${\r\n                      checkpoint?.critical ? 'bg-green-50 border border-green-200' : 'bg-muted'\r\n                    }`}>\r\n                      <div className={`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${\r\n                        status === true ? 'bg-green-500' :\r\n                        status === false ? 'bg-red-500': checkpoint?.critical ?'bg-green-500' : 'bg-gray-500'\r\n                      }`}>\r\n                        <Icon name={checkpoint?.icon} size={16} color=\"white\" />\r\n                      </div>\r\n                      \r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <h4 className=\"font-medium text-sm text-foreground\">{checkpoint?.name}</h4>\r\n                          {checkpoint?.critical && (\r\n                            <span className=\"px-2 py-1 bg-green-500 text-white text-xs rounded-full\">\r\n                              Cr铆tico\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">{checkpoint?.description}</p>\r\n                        {workOrderCheckpoint?.notes && (\r\n                          <p className=\"text-xs text-blue-600 mt-1\">Notas: {workOrderCheckpoint?.notes}</p>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <div className=\"flex items-center space-x-2 flex-shrink-0\">\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={status === true ? 'default' : 'outline'}\r\n                          onClick={() => handleCheckpointUpdate(workOrder?.id, checkpoint?.id, true)}\r\n                          className=\"text-xs px-2 py-1\"\r\n                        >\r\n                          <Icon name=\"CheckCircle\" size={12} className=\"mr-1\" />\r\n                          Aprobado\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={status === false ? 'destructive' : 'outline'}\r\n                          onClick={() => handleCheckpointUpdate(workOrder?.id, checkpoint?.id, false)}\r\n                          className=\"text-xs px-2 py-1\"\r\n                        >\r\n                          <Icon name=\"XCircle\" size={12} className=\"mr-1\" />\r\n                          Rechazado\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              {/* Photo evidence section */}\r\n              <div className=\"mt-4 p-3 bg-muted rounded-lg\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <h4 className=\"font-medium text-sm text-foreground\">Evidencia Fotogr谩fica</h4>\r\n                  <label className=\"cursor-pointer\">\r\n                    <input\r\n                      type=\"file\"\r\n                      multiple\r\n                      accept=\"image/*\"\r\n                      onChange={handlePhotoUpload}\r\n                      className=\"hidden\"\r\n                    />\r\n                    <Button variant=\"outline\" size=\"sm\" iconName=\"Camera\">\r\n                      Tomar Foto\r\n                    </Button>\r\n                  </label>\r\n                </div>\r\n                \r\n                {qualityPhotos?.length > 0 && (\r\n                  <div className=\"grid grid-cols-4 gap-2 mb-3\">\r\n                    {qualityPhotos?.map((photo, index) => (\r\n                      <div key={index} className=\"relative\">\r\n                        <img\r\n                          src={photo}\r\n                          alt={`Quality evidence ${index + 1}`}\r\n                          className=\"w-full h-16 object-cover rounded border\"\r\n                        />\r\n                        <Button\r\n                          variant=\"destructive\"\r\n                          size=\"icon\"\r\n                          className=\"absolute -top-1 -right-1 w-5 h-5\"\r\n                          onClick={() => setQualityPhotos(prev => prev?.filter((_, i) => i !== index))}\r\n                        >\r\n                          <Icon name=\"X\" size={12} />\r\n                        </Button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Inspection notes */}\r\n              <div className=\"mt-4\">\r\n                <textarea\r\n                  placeholder=\"Observaciones de la inspecci贸n...\"\r\n                  value={inspectionNotes}\r\n                  onChange={(e) => setInspectionNotes(e?.target?.value)}\r\n                  className=\"w-full p-3 border border-border rounded-lg resize-none h-20 text-sm\"\r\n                />\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex justify-between items-center mt-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-green-500\" />\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    Puntos cr铆ticos: {qualityCheckpoints?.filter(qc => qc?.critical)?.length}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"flex space-x-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => onReportToProjects?.(workOrder?.id, 'quality_update', {\r\n                      checkpoints: workOrder?.qualityControl?.checkpoints,\r\n                      photos: qualityPhotos,\r\n                      notes: inspectionNotes\r\n                    })}\r\n                    iconName=\"Send\"\r\n                  >\r\n                    Reportar Progreso\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"default\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleCompleteInspection(workOrder)}\r\n                    iconName=\"CheckCircle\"\r\n                    disabled={getCompletionPercentage(workOrder) < 100}\r\n                  >\r\n                    Finalizar Inspecci贸n\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QualityControlPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst EvidenceSubmissionPanel = ({ workOrders = [], onEvidenceSubmission, onReportToProjects }) => {\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [evidencePhotos, setEvidencePhotos] = useState([]);\r\n  const [documents, setDocuments] = useState([]);\r\n  const [submissionNotes, setSubmissionNotes] = useState('');\r\n\r\n  const requiredDocuments = [\r\n    {\r\n      id: 'installation_certificate',\r\n      name: 'Certificado de Instalaci贸n',\r\n      description: 'Documento oficial de instalaci贸n completada',\r\n      icon: 'FileCheck',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'user_manual',\r\n      name: 'Manual de Usuario',\r\n      description: 'Gu铆a de operaci贸n y mantenimiento',\r\n      icon: 'Book',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'warranty_document',\r\n      name: 'Documento de Garant铆a',\r\n      description: 'T茅rminos y condiciones de garant铆a',\r\n      icon: 'Shield',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'technical_specs',\r\n      name: 'Especificaciones T茅cnicas',\r\n      description: 'Detalles t茅cnicos del sistema instalado',\r\n      icon: 'FileText',\r\n      required: false\r\n    },\r\n    {\r\n      id: 'compliance_certificate',\r\n      name: 'Certificado de Cumplimiento',\r\n      description: 'Cumplimiento de normas y regulaciones',\r\n      icon: 'Award',\r\n      required: false\r\n    }\r\n  ];\r\n\r\n  const evidenceCategories = [\r\n    {\r\n      id: 'installation_progress',\r\n      name: 'Progreso de Instalaci贸n',\r\n      description: 'Fotos del proceso de instalaci贸n paso a paso',\r\n      icon: 'Wrench'\r\n    },\r\n    {\r\n      id: 'final_product',\r\n      name: 'Producto Final',\r\n      description: 'Fotograf铆as del sistema completamente instalado',\r\n      icon: 'Camera'\r\n    },\r\n    {\r\n      id: 'quality_tests',\r\n      name: 'Pruebas de Calidad',\r\n      description: 'Evidencia de pruebas de funcionamiento',\r\n      icon: 'CheckCircle'\r\n    },\r\n    {\r\n      id: 'workspace_cleanup',\r\n      name: 'Limpieza del rea',\r\n      description: 'rea de trabajo limpia y organizada',\r\n      icon: 'Trash2'\r\n    }\r\n  ];\r\n\r\n  const handlePhotoUpload = (event, category = null) => {\r\n    const files = Array.from(event?.target?.files || []);\r\n    files?.forEach(file => {\r\n      const photoData = {\r\n        id: Date.now() + Math.random(),\r\n        file,\r\n        url: URL.createObjectURL(file),\r\n        category: category || 'general',\r\n        timestamp: new Date()?.toISOString(),\r\n        description: ''\r\n      };\r\n      setEvidencePhotos(prev => [...prev, photoData]);\r\n    });\r\n  };\r\n\r\n  const handleDocumentUpload = (event, documentType) => {\r\n    const file = event?.target?.files?.[0];\r\n    if (!file) return;\r\n\r\n    const documentData = {\r\n      id: Date.now(),\r\n      type: documentType,\r\n      name: file?.name,\r\n      file,\r\n      url: URL.createObjectURL(file),\r\n      uploadedAt: new Date()?.toISOString()\r\n    };\r\n    setDocuments(prev => [...prev, documentData]);\r\n  };\r\n\r\n  const handleSubmitEvidence = (workOrder) => {\r\n    const requiredDocs = requiredDocuments?.filter(doc => doc?.required);\r\n    const uploadedRequired = documents?.filter(doc => \r\n      requiredDocs?.some(req => req?.id === doc?.type)\r\n    );\r\n\r\n    if (uploadedRequired?.length < requiredDocs?.length) {\r\n      alert('Por favor sube todos los documentos obligatorios antes de enviar las evidencias.');\r\n      return;\r\n    }\r\n\r\n    if (evidencePhotos?.length < 3) {\r\n      alert('Por favor incluye al menos 3 fotograf铆as como evidencia del trabajo completado.');\r\n      return;\r\n    }\r\n\r\n    const evidencePackage = {\r\n      status: 'completed',\r\n      photos: evidencePhotos?.map(photo => ({\r\n        category: photo?.category,\r\n        url: photo?.url,\r\n        description: photo?.description,\r\n        timestamp: photo?.timestamp\r\n      })),\r\n      documents: documents?.map(doc => ({\r\n        type: doc?.type,\r\n        name: doc?.name,\r\n        url: doc?.url,\r\n        uploadedAt: doc?.uploadedAt\r\n      })),\r\n      submittedToProjects: true,\r\n      submissionDate: new Date()?.toISOString(),\r\n      notes: submissionNotes,\r\n      submittedBy: 'Workshop Team'\r\n    };\r\n\r\n    onEvidenceSubmission?.(workOrder?.id, evidencePackage);\r\n\r\n    // Send package to Projects department\r\n    onReportToProjects?.(workOrder?.id, 'work_completion', {\r\n      ...evidencePackage,\r\n      projectReference: workOrder?.projectReference,\r\n      clientName: workOrder?.clientName,\r\n      completedTechnicians: workOrder?.assignedTechnicians\r\n    });\r\n\r\n    // Reset form\r\n    setSelectedOrder(null);\r\n    setEvidencePhotos([]);\r\n    setDocuments([]);\r\n    setSubmissionNotes('');\r\n  };\r\n\r\n  const removePhoto = (photoId) => {\r\n    setEvidencePhotos(prev => prev?.filter(photo => photo?.id !== photoId));\r\n  };\r\n\r\n  const removeDocument = (docId) => {\r\n    setDocuments(prev => prev?.filter(doc => doc?.id !== docId));\r\n  };\r\n\r\n  const updatePhotoDescription = (photoId, description) => {\r\n    setEvidencePhotos(prev => prev?.map(photo =>\r\n      photo?.id === photoId ? { ...photo, description } : photo\r\n    ));\r\n  };\r\n\r\n  const getPhotosByCategory = (category) => {\r\n    return evidencePhotos?.filter(photo => photo?.category === category);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Camera\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Env铆o de Evidencias</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Documentaci贸n y fotograf铆as del trabajo completado</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Upload\">\r\n            Cargar\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Send\">\r\n            Enviar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {workOrders?.length === 0 ? (\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"Camera\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">No hay trabajos listos para env铆o</h3>\r\n          <p className=\"text-muted-foreground\">Los trabajos aparecer谩n aqu铆 una vez aprobados en control de calidad</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {workOrders?.map((workOrder) => (\r\n            <div key={workOrder?.id} className=\"border border-border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground\">{workOrder?.orderNumber}</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">{workOrder?.projectReference}</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Cliente: {workOrder?.clientName}</p>\r\n                  <div className=\"flex items-center space-x-2 mt-1\">\r\n                    <div className=\"flex -space-x-1\">\r\n                      {workOrder?.assignedTechnicians?.map((tech, index) => (\r\n                        <div\r\n                          key={tech?.id}\r\n                          className=\"w-6 h-6 bg-secondary rounded-full flex items-center justify-center text-xs font-medium text-secondary-foreground border-2 border-background\"\r\n                          title={`${tech?.name} - ${tech?.role}`}\r\n                        >\r\n                          {tech?.name?.charAt(0)}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <span className=\"text-xs text-muted-foreground\">T茅cnicos responsables</span>\r\n                  </div>\r\n                </div>\r\n                <div className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                  workOrder?.evidenceSubmission?.submittedToProjects ? 'bg-green-100 text-green-800' : 'bg-orange-100 text-orange-800'\r\n                }`}>\r\n                  {workOrder?.evidenceSubmission?.submittedToProjects ? 'Enviado' : 'Pendiente'}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Evidence Categories */}\r\n              <div className=\"space-y-4\">\r\n                <h4 className=\"font-medium text-sm text-foreground\">Categor铆as de Evidencia:</h4>\r\n                \r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  {evidenceCategories?.map((category) => {\r\n                    const categoryPhotos = getPhotosByCategory(category?.id);\r\n                    \r\n                    return (\r\n                      <div key={category?.id} className=\"border border-border rounded-lg p-3\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <Icon name={category?.icon} size={16} className=\"text-indigo-600\" />\r\n                            <div>\r\n                              <h5 className=\"font-medium text-sm text-foreground\">{category?.name}</h5>\r\n                              <p className=\"text-xs text-muted-foreground\">{category?.description}</p>\r\n                            </div>\r\n                          </div>\r\n                          <label className=\"cursor-pointer\">\r\n                            <input\r\n                              type=\"file\"\r\n                              multiple\r\n                              accept=\"image/*\"\r\n                              onChange={(e) => handlePhotoUpload(e, category?.id)}\r\n                              className=\"hidden\"\r\n                            />\r\n                            <Button variant=\"outline\" size=\"sm\" iconName=\"Plus\" className=\"text-xs px-2 py-1\">\r\n                              Agregar\r\n                            </Button>\r\n                          </label>\r\n                        </div>\r\n                        \r\n                        {categoryPhotos?.length > 0 ? (\r\n                          <div className=\"grid grid-cols-3 gap-2\">\r\n                            {categoryPhotos?.map((photo) => (\r\n                                <div key={photo?.id} className=\"relative group overflow-hidden\">\r\n                                <img\r\n                                  src={photo?.url}\r\n                                  alt={`${category?.name} evidence`}\r\n                                  className=\"w-full h-16 object-cover rounded border\"\r\n                                />\r\n                                <Button\r\n                                  variant=\"destructive\"\r\n                                  size=\"icon\"\r\n                                  className=\"absolute -top-1 -right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                  onClick={() => removePhoto(photo?.id)}\r\n                                >\r\n                                  <Icon name=\"X\" size={10} />\r\n                                </Button>\r\n                                <input\r\n                                  type=\"text\"\r\n                                  placeholder=\"Descripci贸n...\"\r\n                                  value={photo?.description}\r\n                                  onChange={(e) => updatePhotoDescription(photo?.id, e?.target?.value)}\r\n                                  className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs px-1 py-0.5 rounded-b truncate\"\r\n                                />\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"text-center py-4 border-2 border-dashed border-muted rounded\">\r\n                            <Icon name=\"ImagePlus\" size={24} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                            <p className=\"text-xs text-muted-foreground\">No hay fotos para esta categor铆a</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Required Documents */}\r\n              <div className=\"mt-6\">\r\n                <h4 className=\"font-medium text-sm text-foreground mb-3\">Documentos Requeridos:</h4>\r\n                \r\n                <div className=\"space-y-2\">\r\n                  {requiredDocuments?.map((docType) => {\r\n                    const uploadedDoc = documents?.find(doc => doc?.type === docType?.id);\r\n                    \r\n                    return (\r\n                      <div key={docType?.id} className={`flex items-center justify-between p-3 rounded-lg ${\r\n                        docType?.required ? 'bg-indigo-50 border border-indigo-200' : 'bg-muted'\r\n                      }`}>\r\n                        <div className=\"flex items-center space-x-3\">\r\n                            <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${\r\n                            uploadedDoc ? 'bg-green-500' : docType?.required ? 'bg-indigo-500' : 'bg-gray-500'\r\n                          } overflow-hidden`}> \r\n                            <Icon name={docType?.icon} size={16} color=\"white\" />\r\n                          </div>\r\n                          <div>\r\n                            <h5 className=\"font-medium text-sm text-foreground flex items-center space-x-2\">\r\n                              <span>{docType?.name}</span>\r\n                              {docType?.required && (\r\n                                <span className=\"px-2 py-1 bg-indigo-500 text-white text-xs rounded-full\">\r\n                                  Obligatorio\r\n                                </span>\r\n                              )}\r\n                            </h5>\r\n                            <p className=\"text-xs text-muted-foreground\">{docType?.description}</p>\r\n                            {uploadedDoc && (\r\n                              <p className=\"text-xs text-green-600 truncate\">Archivo: {uploadedDoc?.name}</p>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {uploadedDoc ? (\r\n                            <>\r\n                              <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                iconName=\"Eye\"\r\n                                className=\"text-xs px-2 py-1\"\r\n                                onClick={() => window.open(uploadedDoc?.url, '_blank')}\r\n                              >\r\n                                Ver\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"destructive\"\r\n                                size=\"sm\"\r\n                                iconName=\"Trash2\"\r\n                                className=\"text-xs px-2 py-1\"\r\n                                onClick={() => removeDocument(uploadedDoc?.id)}\r\n                              >\r\n                                Eliminar\r\n                              </Button>\r\n                            </>\r\n                          ) : (\r\n                            <label className=\"cursor-pointer\">\r\n                              <input\r\n                                type=\"file\"\r\n                                accept=\".pdf,.doc,.docx,.jpg,.png\"\r\n                                onChange={(e) => handleDocumentUpload(e, docType?.id)}\r\n                                className=\"hidden\"\r\n                              />\r\n                              <Button variant=\"outline\" size=\"sm\" iconName=\"Upload\" className=\"text-xs px-2 py-1\">\r\n                                Subir\r\n                              </Button>\r\n                            </label>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Submission Notes */}\r\n              <div className=\"mt-4\">\r\n                <textarea\r\n                  placeholder=\"Notas adicionales para el equipo de Proyectos...\"\r\n                  value={submissionNotes}\r\n                  onChange={(e) => setSubmissionNotes(e?.target?.value)}\r\n                  className=\"w-full p-3 border border-border rounded-lg resize-none h-20 text-sm\"\r\n                />\r\n              </div>\r\n\r\n              {/* Summary and Submit */}\r\n              <div className=\"mt-4 p-3 bg-muted rounded-lg\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <h4 className=\"font-medium text-sm text-foreground\">Resumen de Evidencias</h4>\r\n                  <div className=\"text-xs text-muted-foreground\">\r\n                    ltima actualizaci贸n: {new Date()?.toLocaleString('es-MX')}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-3 gap-4 text-center\">\r\n                  <div>\r\n                    <div className=\"text-lg font-bold text-foreground\">{evidencePhotos?.length}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Fotograf铆as</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-lg font-bold text-foreground\">{documents?.length}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Documentos</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className={`text-lg font-bold ${\r\n                      workOrder?.evidenceSubmission?.submittedToProjects ? 'text-green-600' : 'text-orange-600'\r\n                    }`}>\r\n                      {workOrder?.evidenceSubmission?.submittedToProjects ? 'Enviado' : 'Pendiente'}\r\n                    </div>\r\n                    <div className=\"text-xs text-muted-foreground\">Estado</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex justify-end space-x-2 mt-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  iconName=\"Eye\"\r\n                  onClick={() => setSelectedOrder(selectedOrder === workOrder?.id ? null : workOrder?.id)}\r\n                >\r\n                  {selectedOrder === workOrder?.id ? 'Ocultar' : 'Vista Previa'}\r\n                </Button>\r\n                <Button\r\n                  variant=\"default\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleSubmitEvidence(workOrder)}\r\n                  iconName=\"Send\"\r\n                  disabled={workOrder?.evidenceSubmission?.submittedToProjects}\r\n                >\r\n                  Enviar a Proyectos\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EvidenceSubmissionPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst ChangeOrderPanel = ({ workOrders = [], onChangeOrder, onReportToProjects }) => {\r\n  const [selectedOrder, setSelectedOrder] = useState('');\r\n  const [changeType, setChangeType] = useState('');\r\n  const [changeDescription, setChangeDescription] = useState('');\r\n  const [changeReason, setChangeReason] = useState('');\r\n  const [impactAssessment, setImpactAssessment] = useState('');\r\n  const [requestedBy, setRequestedBy] = useState('');\r\n\r\n  const changeTypes = [\r\n    { value: 'client', label: 'Cambio del Cliente', icon: 'User', color: 'text-blue-600' },\r\n    { value: 'engineering', label: 'Cambio de Ingenier铆a', icon: 'Settings', color: 'text-purple-600' },\r\n    { value: 'material', label: 'Cambio de Materiales', icon: 'Package', color: 'text-orange-600' },\r\n    { value: 'safety', label: 'Requerimiento de Seguridad', icon: 'Shield', color: 'text-red-600' },\r\n    { value: 'quality', label: 'Mejora de Calidad', icon: 'CheckCircle', color: 'text-green-600' },\r\n    { value: 'technical', label: 'Ajuste T茅cnico', icon: 'Wrench', color: 'text-gray-600' }\r\n  ];\r\n\r\n  const handleSubmitChangeOrder = () => {\r\n    if (!selectedOrder || !changeType || !changeDescription || !requestedBy) {\r\n      alert('Por favor completa todos los campos obligatorios.');\r\n      return;\r\n    }\r\n\r\n    const changeOrderData = {\r\n      id: Date.now(),\r\n      type: changeType,\r\n      description: changeDescription,\r\n      reason: changeReason,\r\n      impact: impactAssessment,\r\n      requestedBy: requestedBy,\r\n      date: new Date()?.toISOString(),\r\n      status: 'pending_approval',\r\n      registeredBy: 'Workshop Team'\r\n    };\r\n\r\n    onChangeOrder?.(parseInt(selectedOrder), changeOrderData);\r\n\r\n    // Report change order to Projects\r\n    onReportToProjects?.(parseInt(selectedOrder), 'change_order', changeOrderData);\r\n\r\n    // Reset form\r\n    setSelectedOrder('');\r\n    setChangeType('');\r\n    setChangeDescription('');\r\n    setChangeReason('');\r\n    setImpactAssessment('');\r\n    setRequestedBy('');\r\n  };\r\n\r\n  const getChangeTypeInfo = (type) => {\r\n    return changeTypes?.find(ct => ct?.value === type) || changeTypes?.[0];\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'pending_approval': return 'bg-orange-100 text-orange-800';\r\n      case 'approved': return 'bg-green-100 text-green-800';\r\n      case 'rejected': return 'bg-red-100 text-red-800';\r\n      case 'in_progress': return 'bg-blue-100 text-blue-800';\r\n      case 'completed': return 'bg-gray-100 text-gray-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getAllChangeOrders = () => {\r\n    return workOrders?.reduce((allChanges, workOrder) => {\r\n      if (workOrder?.changeOrders?.length > 0) {\r\n        return [...allChanges, ...workOrder?.changeOrders?.map(change => ({\r\n          ...change,\r\n          workOrderNumber: workOrder?.orderNumber,\r\n          workOrderId: workOrder?.id,\r\n          projectReference: workOrder?.projectReference\r\n        }))];\r\n      }\r\n      return allChanges;\r\n    }, []) || [];\r\n  };\r\n\r\n  const allChangeOrders = getAllChangeOrders();\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"AlertTriangle\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Gesti贸n de Cambios</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Registro y seguimiento de 贸rdenes de cambio</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\">\r\n            Bit谩cora Digital\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"History\">\r\n            Historial\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Change Order Registration Form */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Registrar Nueva Orden de Cambio</h3>\r\n          \r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Orden de Trabajo *\r\n            </label>\r\n            <Select\r\n              value={selectedOrder}\r\n              onChange={setSelectedOrder}\r\n              placeholder=\"Seleccionar orden de trabajo...\"\r\n            >\r\n              {workOrders?.map((workOrder) => (\r\n                <option key={workOrder?.id} value={workOrder?.id}>\r\n                  {workOrder?.orderNumber} - {workOrder?.projectReference}\r\n                </option>\r\n              ))}\r\n            </Select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Tipo de Cambio *\r\n            </label>\r\n            <Select\r\n              value={changeType}\r\n              onChange={setChangeType}\r\n              placeholder=\"Seleccionar tipo de cambio...\"\r\n            >\r\n              {changeTypes?.map((type) => (\r\n                <option key={type?.value} value={type?.value}>\r\n                  {type?.label}\r\n                </option>\r\n              ))}\r\n            </Select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Solicitado por *\r\n            </label>\r\n            <Input\r\n              value={requestedBy}\r\n              onChange={(e) => setRequestedBy(e?.target?.value)}\r\n              placeholder=\"Nombre del solicitante...\"\r\n              className=\"w-full\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Descripci贸n del Cambio *\r\n            </label>\r\n            <textarea\r\n              value={changeDescription}\r\n              onChange={(e) => setChangeDescription(e?.target?.value)}\r\n              placeholder=\"Describe detalladamente el cambio solicitado...\"\r\n              className=\"w-full p-3 border border-border rounded-lg resize-none h-20 text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Justificaci贸n\r\n            </label>\r\n            <textarea\r\n              value={changeReason}\r\n              onChange={(e) => setChangeReason(e?.target?.value)}\r\n              placeholder=\"Raz贸n o justificaci贸n del cambio...\"\r\n              className=\"w-full p-3 border border-border rounded-lg resize-none h-16 text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Evaluaci贸n de Impacto\r\n            </label>\r\n            <textarea\r\n              value={impactAssessment}\r\n              onChange={(e) => setImpactAssessment(e?.target?.value)}\r\n              placeholder=\"Impacto en cronograma, costos, recursos, etc...\"\r\n              className=\"w-full p-3 border border-border rounded-lg resize-none h-16 text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <Button\r\n            onClick={handleSubmitChangeOrder}\r\n            variant=\"default\"\r\n            iconName=\"Send\"\r\n            iconPosition=\"left\"\r\n            className=\"w-full\"\r\n          >\r\n            Registrar Orden de Cambio\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Change Orders History */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Historial de Cambios</h3>\r\n          \r\n          {allChangeOrders?.length === 0 ? (\r\n            <div className=\"text-center py-8 bg-muted rounded-lg\">\r\n              <Icon name=\"FileText\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n              <h4 className=\"text-lg font-semibold text-foreground mb-2\">No hay 贸rdenes de cambio registradas</h4>\r\n              <p className=\"text-muted-foreground text-sm\">Las 贸rdenes de cambio aparecer谩n aqu铆 una vez registradas</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n              {allChangeOrders\r\n                ?.sort((a, b) => new Date(b?.date) - new Date(a?.date))\r\n                ?.map((changeOrder, index) => {\r\n                const typeInfo = getChangeTypeInfo(changeOrder?.type);\r\n                \r\n                return (\r\n                  <div key={changeOrder?.id || index} className=\"border border-border rounded-lg p-4\">\r\n                    <div className=\"flex items-start justify-between mb-3\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <div className=\"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center\">\r\n                          <Icon name={typeInfo?.icon} size={16} color=\"white\" />\r\n                        </div>\r\n                        <div>\r\n                          <h4 className=\"font-semibold text-sm text-foreground\">\r\n                            {changeOrder?.workOrderNumber}\r\n                          </h4>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {changeOrder?.projectReference}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(changeOrder?.status)}`}>\r\n                        {changeOrder?.status === 'pending_approval' ? 'Pendiente Aprobaci贸n' :\r\n                         changeOrder?.status === 'approved' ? 'Aprobado' :\r\n                         changeOrder?.status === 'rejected' ? 'Rechazado' :\r\n                         changeOrder?.status === 'in_progress'? 'En Progreso' : 'Completado'}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon name={typeInfo?.icon} size={14} className={typeInfo?.color} />\r\n                        <span className=\"text-sm font-medium text-foreground\">{typeInfo?.label}</span>\r\n                      </div>\r\n                      \r\n                      <p className=\"text-sm text-foreground\">{changeOrder?.description}</p>\r\n                      \r\n                      {changeOrder?.reason && (\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          <span className=\"font-medium\">Justificaci贸n:</span> {changeOrder?.reason}\r\n                        </p>\r\n                      )}\r\n                      \r\n                      {changeOrder?.impact && (\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          <span className=\"font-medium\">Impacto:</span> {changeOrder?.impact}\r\n                        </p>\r\n                      )}\r\n\r\n                      <div className=\"flex items-center justify-between pt-2 border-t border-border\">\r\n                        <div className=\"flex items-center space-x-4 text-xs text-muted-foreground\">\r\n                          <span>Solicitado por: {changeOrder?.requestedBy}</span>\r\n                          <span></span>\r\n                          <span>{new Date(changeOrder?.date)?.toLocaleDateString('es-MX')}</span>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex space-x-2\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            iconName=\"Eye\"\r\n                            className=\"text-xs px-2 py-1\"\r\n                          >\r\n                            Ver Detalles\r\n                          </Button>\r\n                          {changeOrder?.status === 'pending_approval' && (\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              iconName=\"Send\"\r\n                              className=\"text-xs px-2 py-1\"\r\n                              onClick={() => onReportToProjects?.(changeOrder?.workOrderId, 'change_follow_up', changeOrder)}\r\n                            >\r\n                              Seguimiento\r\n                            </Button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Summary Statistics */}\r\n      <div className=\"mt-6 pt-6 border-t border-border\">\r\n        <h4 className=\"font-medium text-sm text-foreground mb-3\">Resumen de Cambios</h4>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n          {[\r\n            { status: 'pending_approval', label: 'Pendientes', color: 'text-orange-600' },\r\n            { status: 'approved', label: 'Aprobados', color: 'text-green-600' },\r\n            { status: 'rejected', label: 'Rechazados', color: 'text-red-600' },\r\n            { status: 'in_progress', label: 'En Progreso', color: 'text-blue-600' },\r\n            { status: 'completed', label: 'Completados', color: 'text-gray-600' }\r\n          ]?.map((stat) => {\r\n            const count = allChangeOrders?.filter(co => co?.status === stat?.status)?.length || 0;\r\n            return (\r\n              <div key={stat?.status} className=\"text-center\">\r\n                <div className={`text-2xl font-bold ${stat?.color}`}>{count}</div>\r\n                <div className=\"text-xs text-muted-foreground\">{stat?.label}</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangeOrderPanel;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst WorkshopStats = ({ stats = {}, currentShift = {} }) => {\r\n  const statsCards = [\r\n    {\r\n      title: 'rdenes Activas',\r\n      value: stats?.activeWorkOrders || 0,\r\n      icon: 'ClipboardList',\r\n      color: 'bg-blue-500',\r\n      trend: '+2 desde ayer',\r\n      trendIcon: 'TrendingUp',\r\n      trendColor: 'text-green-600'\r\n    },\r\n    {\r\n      title: 'Completadas Hoy',\r\n      value: stats?.completedToday || 0,\r\n      icon: 'CheckCircle',\r\n      color: 'bg-green-500',\r\n      trend: '+1 desde ayer',\r\n      trendIcon: 'TrendingUp',\r\n      trendColor: 'text-green-600'\r\n    },\r\n    {\r\n      title: 'Materiales Pendientes',\r\n      value: stats?.pendingMaterials || 0,\r\n      icon: 'Package',\r\n      color: 'bg-orange-500',\r\n      trend: '-1 desde ayer',\r\n      trendIcon: 'TrendingDown',\r\n      trendColor: 'text-red-600'\r\n    },\r\n    {\r\n      title: 'Asistencia Turno',\r\n      value: `${stats?.attendanceRate || 0}%`,\r\n      icon: 'Users',\r\n      color: 'bg-purple-500',\r\n      trend: `${currentShift?.attendanceCount}/${currentShift?.totalTechnicians} t茅cnicos`,\r\n      trendIcon: 'UserCheck',\r\n      trendColor: 'text-blue-600'\r\n    },\r\n    {\r\n      title: 'Progreso Promedio',\r\n      value: `${stats?.averageProgress || 0}%`,\r\n      icon: 'Activity',\r\n      color: 'bg-indigo-500',\r\n      trend: '+15% esta semana',\r\n      trendIcon: 'TrendingUp',\r\n      trendColor: 'text-green-600'\r\n    },\r\n    {\r\n      title: 'Problemas de Calidad',\r\n      value: stats?.qualityIssues || 0,\r\n      icon: 'AlertTriangle',\r\n      color: 'bg-red-500',\r\n      trend: stats?.qualityIssues === 0 ? 'Sin incidencias' : 'Requiere atenci贸n',\r\n      trendIcon: stats?.qualityIssues === 0 ? 'CheckCircle' : 'AlertCircle',\r\n      trendColor: stats?.qualityIssues === 0 ? 'text-green-600' : 'text-red-600'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\">\r\n      {statsCards?.map((card, index) => (\r\n        <div key={index} className=\"bg-card border border-border rounded-lg p-4 card-shadow\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div className={`w-10 h-10 ${card?.color} rounded-lg flex items-center justify-center`}>\r\n              <Icon name={card?.icon} size={20} color=\"white\" />\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <p className=\"text-xs text-muted-foreground font-medium\">{card?.title}</p>\r\n              <p className=\"text-2xl font-bold text-foreground\">{card?.value}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Icon name={card?.trendIcon} size={12} className={card?.trendColor} />\r\n            <span className={`text-xs ${card?.trendColor}`}>{card?.trend}</span>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkshopStats;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ShiftManagementPanel = ({ currentShift = {}, onAttendanceUpdate }) => {\r\n  const shiftStats = [\r\n    {\r\n      label: 'Horario de Turno',\r\n      value: `${currentShift?.start} - ${currentShift?.end}`,\r\n      icon: 'Clock',\r\n      color: 'text-blue-600'\r\n    },\r\n    {\r\n      label: 'Fecha',\r\n      value: new Date(currentShift?.date)?.toLocaleDateString('es-MX') || 'Hoy',\r\n      icon: 'Calendar',\r\n      color: 'text-green-600'\r\n    },\r\n    {\r\n      label: 'T茅cnicos Presentes',\r\n      value: `${currentShift?.attendanceCount}/${currentShift?.totalTechnicians}`,\r\n      icon: 'Users',\r\n      color: 'text-purple-600'\r\n    },\r\n    {\r\n      label: 'Porcentaje de Asistencia',\r\n      value: `${Math.round((currentShift?.attendanceCount / currentShift?.totalTechnicians) * 100) || 0}%`,\r\n      icon: 'TrendingUp',\r\n      color: 'text-orange-600'\r\n    }\r\n  ];\r\n\r\n  const shiftTips = [\r\n    {\r\n      icon: 'Shield',\r\n      title: 'Verificaci贸n de Seguridad',\r\n      description: 'Asegurar que todos los t茅cnicos completen el checklist de seguridad antes de iniciar trabajos.'\r\n    },\r\n    {\r\n      icon: 'Clock',\r\n      title: 'Control de Tiempo',\r\n      description: 'Monitorear el progreso de las 贸rdenes para cumplir con el horario del turno.'\r\n    },\r\n    {\r\n      icon: 'Camera',\r\n      title: 'Documentaci贸n',\r\n      description: 'Registrar evidencia fotogr谩fica de cada etapa del proceso de trabajo.'\r\n    },\r\n    {\r\n      icon: 'Send',\r\n      title: 'Comunicaci贸n',\r\n      description: 'Mantener comunicaci贸n constante con los departamentos de Proyectos y Compras.'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow mb-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Calendar\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Gesti贸n de Turno</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Informaci贸n y control del turno actual</p>\r\n          </div>\r\n        </div>\r\n        <Button variant=\"outline\" size=\"sm\" iconName=\"RotateCcw\">\r\n          Actualizar Datos\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n        {shiftStats?.map((stat, index) => (\r\n          <div key={index} className=\"bg-muted rounded-lg p-4\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Icon name={stat?.icon} size={20} className={stat?.color} />\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground font-medium\">{stat?.label}</p>\r\n                <p className=\"text-sm font-bold text-foreground\">{stat?.value}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        {shiftTips?.map((tip, index) => (\r\n          <div key={index} className=\"border border-border rounded-lg p-3\">\r\n            <div className=\"flex items-start space-x-2\">\r\n              <div className=\"w-6 h-6 bg-indigo-500 rounded flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                <Icon name={tip?.icon} size={12} color=\"white\" />\r\n              </div>\r\n              <div>\r\n                <h4 className=\"font-medium text-sm text-foreground\">{tip?.title}</h4>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">{tip?.description}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShiftManagementPanel;","import React, { useState, useEffect } from 'react';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\n\r\nimport Button from '../../components/ui/Button';\r\n\r\nimport WorkflowBoard from './components/WorkflowBoard';\r\nimport MaterialReceptionPanel from './components/MaterialReceptionPanel';\r\nimport SafetyChecklistPanel from './components/SafetyChecklistPanel';\r\nimport AttendancePanel from './components/AttendancePanel';\r\nimport QualityControlPanel from './components/QualityControlPanel';\r\nimport EvidenceSubmissionPanel from './components/EvidenceSubmissionPanel';\r\nimport ChangeOrderPanel from './components/ChangeOrderPanel';\r\nimport WorkshopStats from './components/WorkshopStats';\r\nimport ShiftManagementPanel from './components/ShiftManagementPanel';\r\n\r\nconst WorkshopOperationsCenter = () => {\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [activePanel, setActivePanel] = useState('workflow');\r\n  const [workOrders, setWorkOrders] = useState([]);\r\n  const [currentShift, setCurrentShift] = useState({\r\n    start: '8:00',\r\n    end: '18:00',\r\n    date: new Date()?.toISOString()?.split('T')?.[0],\r\n    attendanceCount: 12,\r\n    totalTechnicians: 15\r\n  });\r\n\r\n  // Mock data for workshop work orders following the operational flow\r\n  const mockWorkOrders = [\r\n    {\r\n      id: 1,\r\n      orderNumber: 'WO-2024-001',\r\n      projectReference: 'Torre Corporativa ABC',\r\n      clientName: 'Corporaci贸n ABC S.A.',\r\n      stage: 'material_reception',\r\n      priority: 'Alta',\r\n      assignedTechnicians: [\r\n        { id: 1, name: 'Carlos Mendoza', role: 'T茅cnico Senior' },\r\n        { id: 2, name: 'Ana Garc铆a', role: 'Especialista HVAC' }\r\n      ],\r\n      materialsReceived: {\r\n        status: 'pending',\r\n        items: [\r\n          { name: 'Compresor Rotativo 5HP', quantity: '2 unidades', received: false, condition: null },\r\n          { name: 'Filtro de Aire HEPA', quantity: '8 unidades', received: false, condition: null },\r\n          { name: 'Ductos Galvanizados', quantity: '150 metros', received: false, condition: null }\r\n        ],\r\n        photos: [],\r\n        notes: ''\r\n      },\r\n      safetyChecklist: {\r\n        status: 'pending',\r\n        items: [\r\n          { name: 'EPP Completo', checked: false },\r\n          { name: 'Herramientas en buen estado', checked: false },\r\n          { name: 'rea de trabajo despejada', checked: false },\r\n          { name: 'Certificaciones vigentes', checked: false }\r\n        ]\r\n      },\r\n      manufacturing: {\r\n        progress: 0,\r\n        startDate: null,\r\n        estimatedCompletion: '2024-10-15',\r\n        photos: [],\r\n        notes: ''\r\n      },\r\n      qualityControl: {\r\n        status: 'pending',\r\n        checkpoints: [\r\n          { name: 'Verificaci贸n de instalaci贸n', passed: null },\r\n          { name: 'Pruebas de funcionamiento', passed: null },\r\n          { name: 'Inspecci贸n visual', passed: null },\r\n          { name: 'Documentaci贸n t茅cnica', passed: null }\r\n        ],\r\n        photos: [],\r\n        inspector: null\r\n      },\r\n      evidenceSubmission: {\r\n        status: 'pending',\r\n        photos: [],\r\n        documents: [],\r\n        submittedToProjects: false,\r\n        submissionDate: null\r\n      },\r\n      changeOrders: []\r\n    },\r\n    {\r\n      id: 2,\r\n      orderNumber: 'WO-2024-002',\r\n      projectReference: 'Centro Comercial Plaza Norte',\r\n      clientName: 'Inmobiliaria Plaza Norte',\r\n      stage: 'safety_attendance',\r\n      priority: 'Media',\r\n      assignedTechnicians: [\r\n        { id: 3, name: 'Roberto Silva', role: 'T茅cnico Junior' },\r\n        { id: 4, name: 'Mar铆a L贸pez', role: 'Supervisora' }\r\n      ],\r\n      materialsReceived: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'Filtros de Aire', quantity: '20 unidades', received: true, condition: 'good' },\r\n          { name: 'Refrigerante R-410A', quantity: '2 cilindros', received: true, condition: 'good' },\r\n          { name: 'Aceite para Compresor', quantity: '5 litros', received: true, condition: 'good' }\r\n        ],\r\n        photos: ['material-photo-1.jpg', 'material-photo-2.jpg'],\r\n        notes: 'Todos los materiales recibidos en excelente estado'\r\n      },\r\n      safetyChecklist: {\r\n        status: 'in_progress',\r\n        items: [\r\n          { name: 'EPP Completo', checked: true },\r\n          { name: 'Herramientas en buen estado', checked: true },\r\n          { name: 'rea de trabajo despejada', checked: false },\r\n          { name: 'Certificaciones vigentes', checked: false }\r\n        ]\r\n      },\r\n      manufacturing: {\r\n        progress: 0,\r\n        startDate: null,\r\n        estimatedCompletion: '2024-10-12',\r\n        photos: [],\r\n        notes: ''\r\n      },\r\n      qualityControl: {\r\n        status: 'pending',\r\n        checkpoints: [\r\n          { name: 'Verificaci贸n de instalaci贸n', passed: null },\r\n          { name: 'Pruebas de funcionamiento', passed: null },\r\n          { name: 'Inspecci贸n visual', passed: null },\r\n          { name: 'Documentaci贸n t茅cnica', passed: null }\r\n        ],\r\n        photos: [],\r\n        inspector: null\r\n      },\r\n      evidenceSubmission: {\r\n        status: 'pending',\r\n        photos: [],\r\n        documents: [],\r\n        submittedToProjects: false,\r\n        submissionDate: null\r\n      },\r\n      changeOrders: []\r\n    },\r\n    {\r\n      id: 3,\r\n      orderNumber: 'WO-2024-003',\r\n      projectReference: 'Hospital General San Jos茅',\r\n      clientName: 'Hospital General San Jos茅',\r\n      stage: 'manufacturing',\r\n      priority: 'Cr铆tica',\r\n      assignedTechnicians: [\r\n        { id: 5, name: 'Diego Ram铆rez', role: 'T茅cnico Senior' },\r\n        { id: 6, name: 'Laura Jim茅nez', role: 'Especialista HVAC' }\r\n      ],\r\n      materialsReceived: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'Compresor Scroll 10HP', quantity: '1 unidad', received: true, condition: 'good' },\r\n          { name: 'Kit de Conexiones', quantity: '1 set', received: true, condition: 'good' },\r\n          { name: 'Refrigerante R-134A', quantity: '3 cilindros', received: true, condition: 'good' }\r\n        ],\r\n        photos: ['material-photo-3.jpg', 'material-photo-4.jpg'],\r\n        notes: 'Materiales de emergencia recibidos y verificados'\r\n      },\r\n      safetyChecklist: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'EPP Completo', checked: true },\r\n          { name: 'Herramientas en buen estado', checked: true },\r\n          { name: 'rea de trabajo despejada', checked: true },\r\n          { name: 'Certificaciones vigentes', checked: true }\r\n        ]\r\n      },\r\n      manufacturing: {\r\n        progress: 85,\r\n        startDate: '2024-10-01',\r\n        estimatedCompletion: '2024-10-03',\r\n        photos: ['progress-photo-1.jpg', 'progress-photo-2.jpg'],\r\n        notes: 'Instalaci贸n de emergencia en UCI en progreso avanzado'\r\n      },\r\n      qualityControl: {\r\n        status: 'pending',\r\n        checkpoints: [\r\n          { name: 'Verificaci贸n de instalaci贸n', passed: null },\r\n          { name: 'Pruebas de funcionamiento', passed: null },\r\n          { name: 'Inspecci贸n visual', passed: null },\r\n          { name: 'Documentaci贸n t茅cnica', passed: null }\r\n        ],\r\n        photos: [],\r\n        inspector: null\r\n      },\r\n      evidenceSubmission: {\r\n        status: 'pending',\r\n        photos: [],\r\n        documents: [],\r\n        submittedToProjects: false,\r\n        submissionDate: null\r\n      },\r\n      changeOrders: [\r\n        {\r\n          id: 1,\r\n          type: 'client',\r\n          description: 'Cambio en ubicaci贸n de unidad por requerimientos m茅dicos',\r\n          requestedBy: 'Hospital General San Jos茅',\r\n          date: '2024-10-02',\r\n          status: 'approved',\r\n          impact: 'Reubicaci贸n de equipos, sin cambio en cronograma'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 4,\r\n      orderNumber: 'WO-2024-004',\r\n      projectReference: 'Edificio Residencial Vista Mar',\r\n      clientName: 'Constructora Vista Mar',\r\n      stage: 'quality_control',\r\n      priority: 'Media',\r\n      assignedTechnicians: [\r\n        { id: 7, name: 'Patricia Morales', role: 'Supervisora' },\r\n        { id: 8, name: 'Alejandro Ruiz', role: 'T茅cnico Senior' }\r\n      ],\r\n      materialsReceived: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'Unidades VRF', quantity: '24 unidades', received: true, condition: 'good' },\r\n          { name: 'Controles Remotos', quantity: '24 unidades', received: true, condition: 'good' },\r\n          { name: 'Tuber铆a de Cobre', quantity: '200 metros', received: true, condition: 'good' }\r\n        ],\r\n        photos: ['material-photo-5.jpg', 'material-photo-6.jpg'],\r\n        notes: 'Sistema VRF completo recibido seg煤n especificaciones'\r\n      },\r\n      safetyChecklist: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'EPP Completo', checked: true },\r\n          { name: 'Herramientas en buen estado', checked: true },\r\n          { name: 'rea de trabajo despejada', checked: true },\r\n          { name: 'Certificaciones vigentes', checked: true }\r\n        ]\r\n      },\r\n      manufacturing: {\r\n        progress: 100,\r\n        startDate: '2024-09-20',\r\n        estimatedCompletion: '2024-09-30',\r\n        photos: ['final-photo-1.jpg', 'final-photo-2.jpg'],\r\n        notes: 'Instalaci贸n VRF completada exitosamente en todos los pisos'\r\n      },\r\n      qualityControl: {\r\n        status: 'in_progress',\r\n        checkpoints: [\r\n          { name: 'Verificaci贸n de instalaci贸n', passed: true },\r\n          { name: 'Pruebas de funcionamiento', passed: true },\r\n          { name: 'Inspecci贸n visual', passed: false },\r\n          { name: 'Documentaci贸n t茅cnica', passed: null }\r\n        ],\r\n        photos: ['qc-photo-1.jpg'],\r\n        inspector: 'Patricia Morales'\r\n      },\r\n      evidenceSubmission: {\r\n        status: 'pending',\r\n        photos: [],\r\n        documents: [],\r\n        submittedToProjects: false,\r\n        submissionDate: null\r\n      },\r\n      changeOrders: []\r\n    },\r\n    {\r\n      id: 5,\r\n      orderNumber: 'WO-2024-005',\r\n      projectReference: 'Oficinas Corporativas TechSoft',\r\n      clientName: 'TechSoft Solutions',\r\n      stage: 'evidence_submission',\r\n      priority: 'Baja',\r\n      assignedTechnicians: [\r\n        { id: 9, name: 'Fernando Castro', role: 'Especialista IoT' },\r\n        { id: 10, name: 'Gabriela V谩zquez', role: 'T茅cnico Senior' }\r\n      ],\r\n      materialsReceived: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'Sensores IoT', quantity: '15 unidades', received: true, condition: 'good' },\r\n          { name: 'Gateway de Comunicaci贸n', quantity: '1 unidad', received: true, condition: 'good' },\r\n          { name: 'Cableado de Red', quantity: '100 metros', received: true, condition: 'good' }\r\n        ],\r\n        photos: ['iot-material-1.jpg', 'iot-material-2.jpg'],\r\n        notes: 'Sistema IoT completo con tecnolog铆a de vanguardia'\r\n      },\r\n      safetyChecklist: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'EPP Completo', checked: true },\r\n          { name: 'Herramientas en buen estado', checked: true },\r\n          { name: 'rea de trabajo despejada', checked: true },\r\n          { name: 'Certificaciones vigentes', checked: true }\r\n        ]\r\n      },\r\n      manufacturing: {\r\n        progress: 100,\r\n        startDate: '2024-09-25',\r\n        estimatedCompletion: '2024-10-01',\r\n        photos: ['iot-install-1.jpg', 'iot-install-2.jpg'],\r\n        notes: 'Sistema IoT instalado y configurado completamente'\r\n      },\r\n      qualityControl: {\r\n        status: 'completed',\r\n        checkpoints: [\r\n          { name: 'Verificaci贸n de instalaci贸n', passed: true },\r\n          { name: 'Pruebas de funcionamiento', passed: true },\r\n          { name: 'Inspecci贸n visual', passed: true },\r\n          { name: 'Documentaci贸n t茅cnica', passed: true }\r\n        ],\r\n        photos: ['qc-final-1.jpg', 'qc-final-2.jpg'],\r\n        inspector: 'Gabriela V谩zquez'\r\n      },\r\n      evidenceSubmission: {\r\n        status: 'in_progress',\r\n        photos: ['evidence-1.jpg', 'evidence-2.jpg', 'evidence-3.jpg'],\r\n        documents: ['manual-usuario.pdf', 'certificado-instalacion.pdf'],\r\n        submittedToProjects: false,\r\n        submissionDate: null\r\n      },\r\n      changeOrders: []\r\n    }\r\n  ];\r\n\r\n  const [workshopStats, setWorkshopStats] = useState({\r\n    activeWorkOrders: 5,\r\n    completedToday: 2,\r\n    pendingMaterials: 3,\r\n    qualityIssues: 1,\r\n    attendanceRate: 80,\r\n    averageProgress: 54\r\n  });\r\n\r\n  useEffect(() => {\r\n    setWorkOrders(mockWorkOrders);\r\n    \r\n    // Update workshop stats based on work orders\r\n    const stats = {\r\n      activeWorkOrders: mockWorkOrders?.length,\r\n      completedToday: mockWorkOrders?.filter(wo => wo?.stage === 'evidence_submission')?.length,\r\n      pendingMaterials: mockWorkOrders?.filter(wo => wo?.materialsReceived?.status === 'pending')?.length,\r\n      qualityIssues: mockWorkOrders?.filter(wo => \r\n        wo?.qualityControl?.checkpoints?.some(cp => cp?.passed === false)\r\n      )?.length,\r\n      attendanceRate: Math.round((currentShift?.attendanceCount / currentShift?.totalTechnicians) * 100),\r\n      averageProgress: Math.round(\r\n        mockWorkOrders?.reduce((sum, wo) => sum + wo?.manufacturing?.progress, 0) / mockWorkOrders?.length\r\n      )\r\n    };\r\n    setWorkshopStats(stats);\r\n  }, [currentShift?.attendanceCount, currentShift?.totalTechnicians]);\r\n\r\n  const handleSidebarToggle = () => {\r\n    setSidebarCollapsed(!sidebarCollapsed);\r\n  };\r\n\r\n  const handleMobileMenuToggle = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n  };\r\n\r\n  const handleStageUpdate = (workOrderId, newStage) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId ? { ...wo, stage: newStage } : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleMaterialReception = (workOrderId, materialData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              materialsReceived: { ...wo?.materialsReceived, ...materialData },\r\n              stage: materialData?.status === 'completed' ? 'safety_attendance' : wo?.stage\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleSafetyChecklist = (workOrderId, safetyData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              safetyChecklist: { ...wo?.safetyChecklist, ...safetyData },\r\n              stage: safetyData?.status === 'completed' ? 'manufacturing' : wo?.stage\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleManufacturingUpdate = (workOrderId, manufacturingData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              manufacturing: { ...wo?.manufacturing, ...manufacturingData },\r\n              stage: manufacturingData?.progress === 100 ? 'quality_control' : wo?.stage\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleQualityControl = (workOrderId, qualityData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              qualityControl: { ...wo?.qualityControl, ...qualityData },\r\n              stage: qualityData?.status === 'completed' ? 'evidence_submission' : wo?.stage\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleEvidenceSubmission = (workOrderId, evidenceData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              evidenceSubmission: { ...wo?.evidenceSubmission, ...evidenceData }\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleChangeOrder = (workOrderId, changeOrderData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              changeOrders: [...(wo?.changeOrders || []), changeOrderData]\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleAttendanceUpdate = (attendanceData) => {\r\n    setCurrentShift(prev => ({ ...prev, ...attendanceData }));\r\n  };\r\n\r\n  const handleReportToProjects = (workOrderId, reportType, reportData) => {\r\n  // console.log eliminado\r\n    // Integration with Projects department\r\n  };\r\n\r\n  const handleRequestToPurchases = (workOrderId, requestType, requestData) => {\r\n  // console.log eliminado\r\n    // Integration with Purchases department\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Desktop Sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <Sidebar \r\n          isCollapsed={sidebarCollapsed} \r\n          onToggle={handleSidebarToggle}\r\n        />\r\n      </div>\r\n\r\n      {/* Mobile Header */}\r\n      <div className=\"lg:hidden\">\r\n        <Header \r\n          onMenuToggle={handleMobileMenuToggle}\r\n          isMenuOpen={mobileMenuOpen}\r\n        />\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className={`transition-all duration-300 ${\r\n        sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n      }`}>\r\n        <div className=\"p-6\">\r\n          {/* Breadcrumb */}\r\n          <div className=\"mb-6\">\r\n            <Breadcrumb />\r\n          </div>\r\n\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-foreground\">Centro de Operaciones del Taller</h1>\r\n              <p className=\"text-muted-foreground\">\r\n                Gesti贸n integral del flujo operativo del taller - Turno {currentShift?.start} a {currentShift?.end}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"flex items-center space-x-2 bg-muted rounded-lg p-1\">\r\n                <Button\r\n                  variant={activePanel === 'workflow' ? 'default' : 'ghost'}\r\n                  size=\"sm\"\r\n                  onClick={() => setActivePanel('workflow')}\r\n                  iconName=\"Workflow\"\r\n                >\r\n                  Flujo\r\n                </Button>\r\n                <Button\r\n                  variant={activePanel === 'operations' ? 'default' : 'ghost'}\r\n                  size=\"sm\"\r\n                  onClick={() => setActivePanel('operations')}\r\n                  iconName=\"Settings\"\r\n                >\r\n                  Operaciones\r\n                </Button>\r\n              </div>\r\n              <Button\r\n                variant=\"default\"\r\n                iconName=\"FileText\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Reporte Semanal\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Workshop Stats */}\r\n          <WorkshopStats stats={workshopStats} currentShift={currentShift} />\r\n\r\n          {/* Shift Management Panel */}\r\n          <ShiftManagementPanel \r\n            currentShift={currentShift}\r\n            onAttendanceUpdate={handleAttendanceUpdate}\r\n          />\r\n\r\n          {/* Main Workshop Content */}\r\n          {activePanel === 'workflow' ? (\r\n            <div className=\"space-y-6\">\r\n              {/* Workflow Board - Kanban Style */}\r\n              <WorkflowBoard\r\n                workOrders={workOrders}\r\n                onStageUpdate={handleStageUpdate}\r\n                onMaterialReception={handleMaterialReception}\r\n                onSafetyChecklist={handleSafetyChecklist}\r\n                onManufacturingUpdate={handleManufacturingUpdate}\r\n                onQualityControl={handleQualityControl}\r\n                onEvidenceSubmission={handleEvidenceSubmission}\r\n                onChangeOrder={handleChangeOrder}\r\n                onReportToProjects={handleReportToProjects}\r\n                onRequestToPurchases={handleRequestToPurchases}\r\n              />\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\r\n              {/* Material Reception Panel */}\r\n              <MaterialReceptionPanel\r\n                workOrders={workOrders?.filter(wo => wo?.stage === 'material_reception' || wo?.materialsReceived?.status === 'pending')}\r\n                onMaterialReception={handleMaterialReception}\r\n                onReportToProjects={handleReportToProjects}\r\n                onRequestToPurchases={handleRequestToPurchases}\r\n              />\r\n\r\n              {/* Safety & Attendance Panel */}\r\n              <div className=\"space-y-6\">\r\n                <SafetyChecklistPanel\r\n                  workOrders={workOrders?.filter(wo => wo?.stage === 'safety_attendance')}\r\n                  onSafetyUpdate={handleSafetyChecklist}\r\n                />\r\n                \r\n                <AttendancePanel\r\n                  currentShift={currentShift}\r\n                  onAttendanceUpdate={handleAttendanceUpdate}\r\n                />\r\n              </div>\r\n\r\n              {/* Quality Control Panel */}\r\n              <QualityControlPanel\r\n                workOrders={workOrders?.filter(wo => wo?.stage === 'quality_control')}\r\n                onQualityUpdate={handleQualityControl}\r\n                onReportToProjects={handleReportToProjects}\r\n              />\r\n\r\n              {/* Evidence Submission Panel */}\r\n              <EvidenceSubmissionPanel\r\n                workOrders={workOrders?.filter(wo => wo?.stage === 'evidence_submission')}\r\n                onEvidenceSubmission={handleEvidenceSubmission}\r\n                onReportToProjects={handleReportToProjects}\r\n              />\r\n\r\n              {/* Change Order Panel */}\r\n              <div className=\"xl:col-span-2\">\r\n                <ChangeOrderPanel\r\n                  workOrders={workOrders}\r\n                  onChangeOrder={handleChangeOrder}\r\n                  onReportToProjects={handleReportToProjects}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkshopOperationsCenter;","import React, { useState, useEffect } from 'react';\r\nimport useCommunication from '../../../hooks/useCommunication';\r\nimport { useAuth } from '../../../hooks/useAuth';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        \r\n\r\n        const CommunicationPanel = ({ opportunity, onAddCommunication }) => {\r\n          const { createCommunication, getComunicacionesByOportunidad, loading, error, success } = useCommunication();\r\n          const { user } = useAuth();\r\n          const [newCommunication, setNewCommunication] = useState({\r\n            type: 'whatsapp',\r\n            content: '',\r\n            urgency: 'normal',\r\n            hasAttachments: false\r\n          });\r\n\r\n          const [showHistory, setShowHistory] = useState(false);\r\n          const [localHistory, setLocalHistory] = useState([]);\r\n\r\n          // Cargar comunicaciones de la oportunidad al montar el componente\r\n          useEffect(() => {\r\n            if (opportunity?.id) {\r\n              loadCommunications();\r\n            }\r\n          }, [opportunity?.id]);\r\n\r\n          const loadCommunications = async () => {\r\n            const response = await getComunicacionesByOportunidad(opportunity.id);\r\n            if (response?.data?.comunicaciones) {\r\n              const formattedComms = response.data.comunicaciones.map(comm => ({\r\n                id: comm.id,\r\n                type: comm.tipoComunicacion,\r\n                date: new Date(parseInt(comm.id)).toLocaleDateString('es-MX'),\r\n                content: comm.mensaje,\r\n                urgency: comm.nivelUrgencia,\r\n                createdBy: comm.creadoPor,\r\n              }));\r\n              setLocalHistory(formattedComms);\r\n            }\r\n          };\r\n\r\n          const handleInputChange = (field, value) => {\r\n            setNewCommunication(prev => ({ ...prev, [field]: value }));\r\n          };\r\n\r\n          const handleAddCommunication = async () => {\r\n            if (!newCommunication?.content?.trim()) return;\r\n\r\n            // Mapea los datos al formato del backend\r\n            const commData = {\r\n              tipoComunicacion: newCommunication?.type || 'whatsapp',\r\n              nivelUrgencia: newCommunication?.urgency || 'normal',\r\n              asunto: `Comunicaci贸n desde Oportunidad`,\r\n              mensaje: newCommunication?.content,\r\n              idCliente: opportunity?.clientId || opportunity?.clienteId,\r\n              idOportunidad: opportunity?.id,\r\n              creadoPor: user?.rol ? `${user.rol} (${user.email})` : user?.email || 'Usuario',\r\n            };\r\n\r\n            const result = await createCommunication(commData);\r\n            if (!result) return;\r\n            \r\n            // Recargar las comunicaciones desde el backend\r\n            await loadCommunications();\r\n            \r\n            setNewCommunication({ type: 'whatsapp', content: '', urgency: 'normal', hasAttachments: false });\r\n          };\r\n\r\n          const getUrgencyColor = (urgency) => {\r\n            switch (urgency) {\r\n              case 'urgente': return 'text-red-600 bg-red-50';\r\n              case 'alta': return 'text-orange-600 bg-orange-50';\r\n              case 'normal': return 'text-blue-600 bg-blue-50';\r\n              default: return 'text-gray-600 bg-gray-50';\r\n            }\r\n          };\r\n\r\n          return (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"MessageSquare\" size={16} className=\"text-primary\" />\r\n                  <h4 className=\"font-medium\">Comunicaci贸n con Cliente</h4>\r\n                </div>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => setShowHistory(!showHistory)}\r\n                  iconName={showHistory ? 'ChevronUp' : 'ChevronDown'}\r\n                >\r\n                  Historial\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Communication History */}\r\n              {showHistory && (\r\n                <div className=\"max-h-48 overflow-y-auto space-y-2 bg-muted/30 rounded-lg p-3\">\r\n                  {localHistory.map((comm) => (\r\n                    <div key={comm?.id} className=\"flex items-start space-x-2 text-sm\">\r\n                      <Icon \r\n                        name={comm?.type === 'whatsapp' ? 'MessageCircle' : comm?.type === 'email' ? 'Mail' : 'Phone'} \r\n                        size={14} \r\n                        className=\"text-muted-foreground mt-0.5\" \r\n                      />\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <span className=\"text-xs text-muted-foreground\">{comm?.date}</span>\r\n                          <span className={`px-2 py-1 text-xs rounded ${getUrgencyColor(comm?.urgency)}`}>\r\n                            {comm?.urgency === 'urgente' ? 'Urgente' : comm?.urgency === 'alta' ? 'Alta' : 'Normal'}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-foreground mt-1\">{comm?.content}</p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                  {localHistory.length === 0 && (\r\n                    <p className=\"text-sm text-muted-foreground text-center py-4\">Sin comunicaciones registradas</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* New Communication */}\r\n              <div className=\"space-y-3\">\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-1 block\">Canal</label>\r\n                    <select\r\n                      value={newCommunication?.type}\r\n                      onChange={(e) => handleInputChange('type', e?.target?.value)}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background\"\r\n                    >\r\n                      <option value=\"whatsapp\">WhatsApp</option>\r\n                      <option value=\"email\">Email</option>\r\n                      <option value=\"llamada\">Llamada</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-1 block\">Urgencia</label>\r\n                    <select\r\n                      value={newCommunication?.urgency}\r\n                      onChange={(e) => handleInputChange('urgency', e?.target?.value)}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background\"\r\n                    >\r\n                      <option value=\"normal\">Normal</option>\r\n                      <option value=\"alta\">Alta</option>\r\n                      <option value=\"urgente\">Urgente</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-1 block\">Mensaje</label>\r\n                  <textarea\r\n                    value={newCommunication?.content}\r\n                    onChange={(e) => handleInputChange('content', e?.target?.value)}\r\n                    placeholder=\"Escribir comunicaci贸n con el cliente...\"\r\n                    rows={3}\r\n                    className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"attachments\"\r\n                    checked={newCommunication?.hasAttachments}\r\n                    onChange={(e) => handleInputChange('hasAttachments', e?.target?.checked)}\r\n                    className=\"rounded border-border\"\r\n                  />\r\n                  <label htmlFor=\"attachments\" className=\"text-sm\">Incluye anexos</label>\r\n                </div>\r\n\r\n                <Button\r\n                  onClick={handleAddCommunication}\r\n                  disabled={!newCommunication?.content?.trim() || loading}\r\n                  className=\"w-full\"\r\n                  iconName=\"Send\"\r\n                  iconPosition=\"left\"\r\n                >\r\n                  {loading ? 'Enviando...' : 'Enviar Comunicaci贸n'}\r\n                </Button>\r\n                {error && <div className=\"text-xs text-destructive mt-2\">Error al enviar comunicaci贸n</div>}\r\n                {success && <div className=\"text-xs text-green-600 mt-2\">Comunicaci贸n enviada correctamente</div>}\r\n              </div>\r\n\r\n              {/* Quick Actions */}\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium\">Acciones R谩pidas</label>\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleInputChange('content', 'Solicitar aclaraciones t茅cnicas m铆nimas')}\r\n                    className=\"text-xs\"\r\n                  >\r\n                    Solicitar Aclaraciones\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleInputChange('content', 'Confirmar costo extra por escrito')}\r\n                    className=\"text-xs\"\r\n                  >\r\n                    Confirmar Costos Extra\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default CommunicationPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport useClient from '../../../hooks/useClient';\r\nimport usePerson from '../../../hooks/usePerson';\r\nimport useProyecto from '../../../hooks/useProyect';\r\n\r\nconst NewOpportunityModal = ({ isOpen, onClose, onCreateOpportunity, error }) => {\r\n  const [formData, setFormData] = useState({\r\n    clientId: '',\r\n    projectId: '',\r\n    contactChannel: 'whatsapp',\r\n    projectType: 'project',\r\n    priority: 'medium',\r\n    contactPerson: '',\r\n    phone: '',\r\n    email: '',\r\n    projectDescription: '',\r\n    location: '',\r\n    estimatedBudget: '',\r\n    timeline: '',\r\n    salesRep: 'Mar铆a Garc铆a',\r\n    notes: ''\r\n  });\r\n  // Proyectos\r\n  const { proyectos, getProyectos, loading: loadingProyectos, error: errorProyectos } = useProyecto();\r\n\r\n  // Filtrar proyectos por cliente seleccionado\r\n  const proyectosCliente = Array.isArray(proyectos)\r\n    ? proyectos.filter(p => {\r\n        const clienteId = p?.cliente?.id || p?.client?.id;\r\n        return clienteId === formData.clientId;\r\n      })\r\n    : [];\r\n\r\n  // Opciones para el select de proyectos\r\n  const proyectoOptions = proyectosCliente.map(p => ({\r\n    value: p.id || p._id,\r\n    label: p.nombre || p.name || p.nombreProyecto || 'Proyecto sin nombre'\r\n  }));\r\n\r\n  const { clients, getClients, loading: loadingClients, error: errorClients } = useClient();\r\n \r\n  const { departmentPersons, getPersonsByDepartment, loading: loadingSalesReps, error: errorSalesReps } = usePerson();\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      getClients();\r\n      getPersonsByDepartment('Ventas');\r\n      getProyectos();\r\n    }\r\n  }, [isOpen]);\r\n  // Limpiar datos de proyecto solo si el cliente realmente cambi贸 (sin ciclo infinito)\r\n  const prevClientIdRef = React.useRef('');\r\n  useEffect(() => {\r\n    if (isOpen && prevClientIdRef.current !== formData.clientId) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        projectId: '',\r\n        projectType: 'project',\r\n        projectDescription: '',\r\n        location: '',\r\n        estimatedBudget: '',\r\n        timeline: ''\r\n      }));\r\n      prevClientIdRef.current = formData.clientId;\r\n    }\r\n  }, [isOpen, formData.clientId]);\r\n\r\n  // Cuando selecciona un proyecto, autollenar detalles\r\n  useEffect(() => {\r\n    if (!formData.projectId) return;\r\n    const proyecto = proyectosCliente.find(p => (p.id || p._id) === formData.projectId);\r\n    if (proyecto) {\r\n      // Formatear ubicaci贸n correctamente\r\n      let ubicacionTexto = '';\r\n      if (proyecto.ubicacion) {\r\n        if (typeof proyecto.ubicacion === 'string') {\r\n          ubicacionTexto = proyecto.ubicacion;\r\n        } else if (typeof proyecto.ubicacion === 'object') {\r\n          const { direccion = '', municipio = '', estado = '' } = proyecto.ubicacion;\r\n          ubicacionTexto = `${direccion}${municipio ? ', ' + municipio : ''}${estado ? ', ' + estado : ''}`.trim();\r\n        }\r\n      }\r\n      \r\n      setFormData(prev => ({\r\n        ...prev,\r\n        projectType: proyecto.tipoProyecto || proyecto.type || 'project',\r\n        projectDescription: proyecto.descripcion || proyecto.description || proyecto.descripcionProyecto || '',\r\n        location: ubicacionTexto || proyecto.location || '',\r\n        estimatedBudget: String(proyecto.presupuesto?.total || proyecto.presupuesto || ''),\r\n        timeline: proyecto.cronograma?.fechaFin\r\n          ? `${proyecto.cronograma?.fechaInicio || ''} - ${proyecto.cronograma?.fechaFin}`\r\n          : (typeof proyecto.cronograma === 'string' ? proyecto.cronograma : '')\r\n      }));\r\n    }\r\n    // Solo se ejecuta cuando cambia projectId\r\n    // eslint-disable-next-line\r\n  }, [formData.projectId]);\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Opciones de ejecutivos de ventas\r\n  const salesRepOptions = Array.isArray(departmentPersons) && departmentPersons.length > 0\r\n  ? departmentPersons.map(emp => ({ value: emp.nombreCompleto || emp.nombre || emp.name || emp.fullName || emp.email, label: emp.nombreCompleto || emp.nombre || emp.name || emp.fullName || emp.email }))\r\n    : [];\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n\r\n    // Clear error when user starts typing\r\n    if (errors?.[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n\r\n    if (!formData?.clientId?.trim()) {\r\n      newErrors.clientId = 'El cliente es requerido';\r\n    }\r\n    if (!formData?.projectId?.trim()) {\r\n      newErrors.projectId = 'El proyecto es requerido';\r\n    }\r\n\r\n    if (!formData?.contactPerson?.trim()) {\r\n      newErrors.contactPerson = 'La persona de contacto es requerida';\r\n    }\r\n\r\n    if (!formData?.phone?.trim()) {\r\n      newErrors.phone = 'El tel茅fono es requerido';\r\n    }\r\n\r\n    if (!formData?.email?.trim()) {\r\n      newErrors.email = 'El email es requerido';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/?.test(formData?.email)) {\r\n      newErrors.email = 'El formato del email no es v谩lido';\r\n    }\r\n\r\n    if (!formData?.projectDescription?.trim()) {\r\n      newErrors.projectDescription = 'La descripci贸n del proyecto es requerida';\r\n    }\r\n\r\n    if (!formData?.location?.trim()) {\r\n      newErrors.location = 'La ubicaci贸n es requerida';\r\n    }\r\n\r\n    if (!String(formData?.estimatedBudget).trim()) {\r\n      newErrors.estimatedBudget = 'El presupuesto estimado es requerido';\r\n    }\r\n\r\n    if (!formData?.timeline?.trim()) {\r\n      newErrors.timeline = 'El cronograma es requerido';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const generateOpportunityId = () => {\r\n    const timestamp = Date.now();\r\n    const random = Math.floor(Math.random() * 1000);\r\n    return `SALES-${timestamp?.toString()?.slice(-6)}${random?.toString()?.padStart(3, '0')}`;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      // Simulate API call delay\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n      const selectedClient = clients?.find(c => c.id === formData?.clientId || c._id === formData?.clientId);\r\n      const newOpportunity = {\r\n        clienteId: formData?.clientId,\r\n        proyectoId: formData?.projectId,\r\n        nombreCliente: selectedClient?.companyName || selectedClient?.empresa || selectedClient?.nombre || selectedClient?.name || '',\r\n        canalContacto: formData?.contactChannel,\r\n        tipoProyecto: formData?.projectType,\r\n        prioridad: formData?.priority,\r\n        personaContacto: formData?.contactPerson?.trim(),\r\n        telefono: formData?.phone?.trim(),\r\n        email: formData?.email?.trim(),\r\n        descripcionProyecto: formData?.projectDescription?.trim(),\r\n        ubicacion: formData?.location?.trim(),\r\n        presupuestoEstimado: String(formData?.estimatedBudget).trim(),\r\n        cronogramaEsperado: formData?.timeline?.trim(),\r\n        ejecutivoVentas: departmentPersons?.find(emp => (emp.nombreCompleto || emp.nombre || emp.name || emp.fullName || emp.email) === formData?.salesRep)?.nombreCompleto || formData?.salesRep,\r\n        notasAdicionales: formData?.notes?.trim() || `Nueva oportunidad registrada por ${formData?.salesRep}`\r\n      };\r\n\r\n      onCreateOpportunity?.(newOpportunity);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.error('Error creating opportunity:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      clientId: '',\r\n      contactChannel: 'whatsapp',\r\n      projectType: 'project',\r\n      priority: 'medium',\r\n      contactPerson: '',\r\n      phone: '',\r\n      email: '',\r\n      projectDescription: '',\r\n      location: '',\r\n      estimatedBudget: '',\r\n      timeline: '',\r\n      salesRep: 'Mar铆a Garc铆a',\r\n      notes: ''\r\n    });\r\n    setErrors({});\r\n    setIsSubmitting(false);\r\n    onClose?.();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"fixed inset-0 bg-black/50 transition-opacity\" \r\n        onClick={handleClose}\r\n      />\r\n      {/* Modal */}\r\n      <div className=\"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Nueva Oportunidad de Venta</h2>\r\n            <p className=\"text-sm text-muted-foreground mt-1\">\r\n              Registra una nueva oportunidad comercial\r\n            </p>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            iconName=\"X\"\r\n            onClick={handleClose}\r\n            disabled={isSubmitting}\r\n          />\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"overflow-y-auto max-h-[calc(90vh-140px)]\">\r\n          <div className=\"p-6 space-y-6\">\r\n            {/* Basic Information */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Building2\" size={18} className=\"mr-2\" />\r\n                Informaci贸n B谩sica\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Cliente <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.clientId}\r\n                    onChange={(value) => handleInputChange('clientId', value)}\r\n                    options={\r\n                      Array.isArray(clients) && clients.length > 0\r\n                        ? clients.map(c => ({\r\n                            value: c.id || c._id,\r\n                            label: c.companyName || c.empresa || 'Sin nombre'\r\n                          }) )\r\n                        : []\r\n                    }\r\n                    placeholder={\r\n                      loadingClients\r\n                        ? 'Cargando clientes...'\r\n                        : (clients.length === 0 ? 'No hay clientes registrados' : 'Selecciona un cliente')\r\n                    }\r\n                    loading={loadingClients}\r\n                    error={errors?.clientId}\r\n                    searchable\r\n                  />\r\n                  {errorClients && <div className=\"text-xs text-destructive\">Error al cargar clientes</div>}\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Proyecto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.projectId}\r\n                    onChange={(value) => handleInputChange('projectId', value)}\r\n                    options={proyectoOptions}\r\n                    placeholder={formData.clientId ? (loadingProyectos ? 'Cargando proyectos...' : (proyectoOptions.length === 0 ? 'No hay proyectos para este cliente' : 'Selecciona un proyecto')) : 'Selecciona un cliente primero'}\r\n                    loading={loadingProyectos}\r\n                    error={errors?.projectId}\r\n                    searchable\r\n                    disabled={!formData.clientId}\r\n                  />\r\n                  {errorProyectos && <div className=\"text-xs text-destructive\">Error al cargar proyectos</div>}\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Canal de Contacto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.contactChannel}\r\n                    onChange={(value) => handleInputChange('contactChannel', value)}\r\n                    options={[\r\n                      { value: 'whatsapp', label: 'WhatsApp' },\r\n                      { value: 'email', label: 'Email' },\r\n                      { value: 'phone', label: 'Tel茅fono' }\r\n                    ]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Tipo de Proyecto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.projectType}\r\n                    onChange={(value) => handleInputChange('projectType', value)}\r\n                    options={[\r\n                      { value: 'project', label: 'Proyecto Completo' },\r\n                      { value: 'piece', label: 'Pieza/Servicio' }\r\n                    ]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Prioridad <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.priority}\r\n                    onChange={(value) => handleInputChange('priority', value)}\r\n                    options={[\r\n                      { value: 'urgent', label: 'Urgente' },\r\n                      { value: 'high', label: 'Alta' },\r\n                      { value: 'medium', label: 'Media' },\r\n                      { value: 'low', label: 'Baja' }\r\n                    ]}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Contact Information */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Users\" size={18} className=\"mr-2\" />\r\n                Informaci贸n de Contacto\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <Input\r\n                  label=\"Persona de Contacto\"\r\n                  required\r\n                  value={formData?.contactPerson}\r\n                  onChange={(e) => handleInputChange('contactPerson', e?.target?.value)}\r\n                  error={errors?.contactPerson}\r\n                  placeholder=\"Ej. Ing. Carlos Rodriguez\"\r\n                />\r\n\r\n                <Input\r\n                  label=\"Tel茅fono\"\r\n                  required\r\n                  value={formData?.phone}\r\n                  onChange={(e) => {\r\n                    // Solo permitir n煤meros y m谩ximo 10 d铆gitos\r\n                    const val = e?.target?.value.replace(/[^0-9]/g, '').slice(0, 10);\r\n                    handleInputChange('phone', val);\r\n                  }}\r\n                  error={errors?.phone}\r\n                  placeholder=\"Ej. 5512345678\"\r\n                  maxLength={10}\r\n                  inputMode=\"numeric\"\r\n                  autoComplete=\"tel\"\r\n                />\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <Input\r\n                    label=\"Email\"\r\n                    type=\"email\"\r\n                    required\r\n                    value={formData?.email}\r\n                    onChange={(e) => handleInputChange('email', e?.target?.value)}\r\n                    error={errors?.email}\r\n                    placeholder=\"contacto@empresa.com\"\r\n                  />\r\n                  {error?.status === 409 && error?.data?.error?.includes('correo') && (\r\n                    <p className=\"text-xs text-destructive mt-1\">Correo registrado</p>\r\n                  )}\r\n                  {error?.status === 409 && error?.data?.error?.includes('correo') && (\r\n                    <p className=\"text-xs text-destructive mt-1\">Correo registrado</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Project Details */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"FileText\" size={18} className=\"mr-2\" />\r\n                Detalles del Proyecto\r\n              </h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Descripci贸n del Proyecto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <textarea\r\n                    className=\"mt-2 flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[100px]\"\r\n                    value={formData?.projectDescription}\r\n                    onChange={(e) => handleInputChange('projectDescription', e?.target?.value)}\r\n                    placeholder=\"Describe el proyecto o servicio solicitado...\"\r\n                  />\r\n                  {errors?.projectDescription && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.projectDescription}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <Input\r\n                  label=\"Ubicaci贸n\"\r\n                  required\r\n                  value={formData?.location}\r\n                  onChange={(e) => handleInputChange('location', e?.target?.value)}\r\n                  error={errors?.location}\r\n                  placeholder=\"Ciudad, Estado\"\r\n                />\r\n\r\n                <Input\r\n                  label=\"Presupuesto Estimado (MXN)\"\r\n                  type=\"number\"\r\n                  required\r\n                  value={formData?.estimatedBudget}\r\n                  onChange={(e) => handleInputChange('estimatedBudget', e?.target?.value)}\r\n                  error={errors?.estimatedBudget}\r\n                  placeholder=\"0\"\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                />\r\n\r\n                <Input\r\n                  label=\"Cronograma Esperado\"\r\n                  required\r\n                  value={formData?.timeline}\r\n                  onChange={(e) => handleInputChange('timeline', e?.target?.value)}\r\n                  error={errors?.timeline}\r\n                  placeholder=\"Ej. 3 meses, 8 semanas\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Assignment */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"UserCheck\" size={18} className=\"mr-2\" />\r\n                Asignaci贸n\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Ejecutivo de Ventas <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.salesRep}\r\n                    onChange={(value) => handleInputChange('salesRep', value)}\r\n                    options={salesRepOptions}\r\n                    loading={loadingSalesReps}\r\n                    error={errorSalesReps}\r\n                    placeholder={loadingSalesReps ? 'Cargando ejecutivos...' : (salesRepOptions.length === 0 ? 'No hay ejecutivos de ventas' : 'Selecciona ejecutivo')}\r\n                    searchable\r\n                   />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground\">Notas Adicionales</label>\r\n                  <textarea\r\n                    className=\"mt-2 flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[80px]\"\r\n                    value={formData?.notes}\r\n                    onChange={(e) => handleInputChange('notes', e?.target?.value)}\r\n                    placeholder=\"Informaci贸n adicional relevante...\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"flex items-center justify-end space-x-4 p-6 border-t bg-gray-50 dark:bg-gray-800/50\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={handleClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              iconName={isSubmitting ? \"Loader2\" : \"Plus\"}\r\n              iconPosition=\"left\"\r\n              className={isSubmitting ? \"animate-spin\" : \"\"}\r\n            >\r\n              {isSubmitting ? 'Creando...' : 'Crear Oportunidad'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewOpportunityModal;","import httpService from './httpService';\r\n\r\nconst API_BASE = '/oportunidades';\r\n\r\nconst opportunityService = {\r\n  crearOportunidad: async (data) => {\r\n    return httpService.post(`${API_BASE}/crear`, data);\r\n  },\r\n  obtenerTodasLasOportunidades: async () => {\r\n    return httpService.get(`${API_BASE}/obtenerTodasLasOportunidades`);\r\n  },\r\n  obtenerOportunidadPorId: async (id) => {\r\n    return httpService.get(`${API_BASE}/obtenerOportunidades/${id}`);\r\n  },\r\n  actualizarOportunidad: async (id, data) => {\r\n    return httpService.put(`${API_BASE}/actualizar/${id}`, data);\r\n  }\r\n};\r\n\r\nexport default opportunityService;\r\n","import { useState, useEffect } from 'react';\r\nimport { useNotifications } from '../context/NotificationContext';\r\nimport opportunityService from '../services/opportunityService';\r\n\r\nexport function useOpportunity() {\r\n  const { showOperationSuccess, showHttpError } = useNotifications();\r\n  const [oportunidades, setOportunidades] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchOportunidades = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await opportunityService.obtenerTodasLasOportunidades();\r\n      const raw = response.data || [];\r\n      const mapped = raw.map((opp) => ({\r\n  id: opp.id,\r\n  clienteId: opp.clienteId,\r\n  proyectoId: opp.proyectoId,\r\n  clientName: opp.nombreCliente,\r\n        contactChannel: opp.canalContacto,\r\n        projectType: opp.tipoProyecto,\r\n        salesRep: opp.ejecutivoVentas,\r\n        stage: opp.etapa || 'initial-contact',\r\n        priority: opp.prioridad,\r\n        stageDuration: opp.diasEnEtapa || 1,\r\n        contactInfo: {\r\n          phone: opp.telefono,\r\n          email: opp.email,\r\n          contactPerson: opp.personaContacto,\r\n        },\r\n        projectDetails: {\r\n          description: opp.descripcionProyecto,\r\n          location: opp.ubicacion,\r\n          estimatedBudget: opp.presupuestoEstimado,\r\n          timeline: opp.cronogramaEsperado,\r\n        },\r\n        quotationData: opp.quotationData || {\r\n          scope: '',\r\n          assumptions: [],\r\n          timeline: '',\r\n          conditions: '',\r\n          materials: [],\r\n          riskAssessment: 'low',\r\n          extraCosts: [],\r\n          totalAmount: 0,\r\n          validity: '30 d铆as'\r\n        },\r\n        contractualInfo: opp.contractualInfo || {\r\n          paymentConditions: '',\r\n          billingData: {\r\n            businessName: '',\r\n            rfc: '',\r\n            address: ''\r\n          },\r\n          deliverySchedule: []\r\n        },\r\n        notes: opp.notasAdicionales,\r\n        createdAt: opp.createdAt,\r\n        updatedAt: opp.updatedAt,\r\n      }));\r\n      setOportunidades(mapped);\r\n    } catch (err) {\r\n      setError(err);\r\n      // No mostrar notificaci贸n, solo actualizar el estado de error\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const crearOportunidad = async (data) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await opportunityService.crearOportunidad(data);\r\n      await fetchOportunidades();\r\n      showOperationSuccess('Oportunidad guardada exitosamente');\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al guardar oportunidad');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n    };\r\n\r\n    const actualizarOportunidad = async (id, data) => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const response = await opportunityService.actualizarOportunidad(id, data);\r\n        await fetchOportunidades();\r\n        showOperationSuccess('Oportunidad actualizada exitosamente');\r\n        return response;\r\n      } catch (err) {\r\n        setError(err);\r\n        showHttpError('Error al actualizar oportunidad');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOportunidades();\r\n  }, []);\r\n\r\n  return {\r\n    oportunidades,\r\n    loading,\r\n    error,\r\n    fetchOportunidades,\r\n    crearOportunidad,\r\n     actualizarOportunidad,\r\n  };\r\n}\r\n","// SalesOpportunityManagement.jsx\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ClientRegistrationPanel from './components/ClientRegistrationPanel';\r\nimport CommunicationPanel from './components/CommunicationPanel';\r\nimport QuotationRequestPanel from './components/QuotationRequestPanel';\r\nimport WorkOrderPanel from './components/WorkOrderPanel';\r\nimport ChangeManagementPanel from './components/ChangeManagementPanel';\r\nimport NewOpportunityModal from './components/NewOpportunityModal';\r\nimport { useOpportunity } from '../../hooks/useOpportunity';\r\nimport { useNotifications } from '../../context/NotificationContext';\r\n\r\n\r\nconst SalesOpportunityManagement = () => {\r\n  const { oportunidades, loading, error, crearOportunidad, fetchOportunidades, actualizarOportunidad } = useOpportunity();\r\n  const { showOperationSuccess } = useNotifications();\r\n  // Estado local de oportunidades para el mock y handlers\r\n  const [opportunities, setOpportunities] = useState([]);\r\n  const [selectedOpportunity, setSelectedOpportunity] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showControls, setShowControls] = useState(false);\r\n  const [showNewOpportunityModal, setShowNewOpportunityModal] = useState(false);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n\r\n  // Verificar si viene de crear cotizaci贸n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    if (params.get('cotizacionCreada') === 'true') {\r\n      showOperationSuccess('Cotizaci贸n creada exitosamente. La oportunidad permanece en Desarrollo de Cotizaci贸n.');\r\n      // Limpiar el par谩metro de la URL\r\n      window.history.replaceState({}, '', '/oportunidades');\r\n      // Recargar oportunidades para ver los datos actualizados\r\n      fetchOportunidades();\r\n    }\r\n  }, []);\r\n\r\n  // Etapas del flujo de ventas\r\n  const salesStages = useMemo(() => [\r\n    {\r\n      id: 'initial-contact',\r\n      name: 'Contacto Inicial',\r\n      description: 'Recepci贸n de solicitud (WhatsApp/Correo)',\r\n      color: 'bg-blue-500',\r\n      icon: 'MessageCircle'\r\n    },\r\n    {\r\n      id: 'information-validation',\r\n      name: 'Validaci贸n de Informaci贸n',\r\n      description: 'Clasificaci贸n y validaci贸n de informaci贸n m铆nima',\r\n      color: 'bg-indigo-500',\r\n      icon: 'CheckSquare'\r\n    },\r\n    {\r\n      id: 'quotation-development',\r\n      name: 'Desarrollo de Cotizaci贸n',\r\n      description: 'Preparar cotizaci贸n con alcances, supuestos y tiempos',\r\n      color: 'bg-purple-500',\r\n      icon: 'FileText'\r\n    },\r\n    {\r\n      id: 'client-review',\r\n      name: 'Revisi贸n del Cliente',\r\n      description: 'Env铆o de cotizaci贸n y seguimiento de aprobaci贸n',\r\n      color: 'bg-yellow-500',\r\n      icon: 'Eye'\r\n    },\r\n    {\r\n      id: 'closure',\r\n      name: 'Cierre',\r\n      description: 'Aprobaci贸n final o cierre de oportunidad',\r\n      color: 'bg-green-500',\r\n      icon: 'CheckCircle2'\r\n    }\r\n  ], []);\r\n\r\n  // Mock inicial (puedes reemplazar por fetch real)\r\n  const mockOpportunities = useMemo(() => ([\r\n    {\r\n      id: \"SALES-001\",\r\n      clientName: \"Corporaci贸n ABC\",\r\n      contactChannel: \"whatsapp\",\r\n      projectType: \"project\",\r\n      salesRep: \"Mar铆a Garc铆a\",\r\n      stage: \"initial-contact\",\r\n      priority: \"high\",\r\n      stageDuration: 2,\r\n      contactInfo: {\r\n        phone: \"+52 55 1234 5678\",\r\n        email: \"contacto@corporacionabc.com\",\r\n        contactPerson: \"Ing. Carlos Rodriguez\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Instalaci贸n de sistema HVAC para edificio corporativo\",\r\n        location: \"Ciudad de M茅xico\",\r\n        estimatedBudget: 2500000,\r\n        timeline: \"3 meses\"\r\n      },\r\n      documents: [],\r\n      communications: [\r\n        {\r\n          id: \"comm-1\",\r\n          type: \"whatsapp\",\r\n          date: \"2024-03-28\",\r\n          content: \"Cliente solicita cotizaci贸n para sistema HVAC\",\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      notes: \"Cliente contact贸 por WhatsApp. Requiere instalaci贸n completa.\"\r\n    },\r\n    {\r\n      id: \"SALES-002\",\r\n      clientName: \"Industrias XYZ\",\r\n      contactChannel: \"email\",\r\n      projectType: \"piece\",\r\n      salesRep: \"Roberto Silva\",\r\n      stage: \"information-validation\",\r\n      priority: \"medium\",\r\n      stageDuration: 5,\r\n      contactInfo: {\r\n        phone: \"+52 55 9876 5432\",\r\n        email: \"proyectos@industriasxyz.com\",\r\n        contactPerson: \"Arq. Ana Martinez\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Mantenimiento y actualizaci贸n de sistema existente\",\r\n        location: \"Guadalajara, Jalisco\",\r\n        estimatedBudget: 850000,\r\n        timeline: \"6 semanas\"\r\n      },\r\n      requirements: {\r\n        complete: false,\r\n        checklist: {\r\n          technicalSpecs: true,\r\n          locationAccess: false,\r\n          budgetRange: true,\r\n          timeline: true,\r\n          permits: false\r\n        }\r\n      },\r\n      communications: [\r\n        {\r\n          id: \"comm-2\",\r\n          type: \"email\",\r\n          date: \"2024-03-25\",\r\n          content: \"Enviamos formulario de requerimientos t茅cnicos\",\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      notes: \"Pendiente confirmaci贸n de acceso y permisos\"\r\n    },\r\n    {\r\n      id: \"SALES-003\",\r\n      clientName: \"Green Energy M茅xico\",\r\n      contactChannel: \"whatsapp\",\r\n      projectType: \"project\",\r\n      salesRep: \"Carmen D铆az\",\r\n      stage: \"quotation-development\",\r\n      priority: \"urgent\",\r\n      stageDuration: 8,\r\n      contactInfo: {\r\n        phone: \"+52 55 4567 8901\",\r\n        email: \"ventas@greenenergy.mx\",\r\n        contactPerson: \"Ing. Fernando L贸pez\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Sistema HVAC para complejo residencial sustentable\",\r\n        location: \"Monterrey, Nuevo Le贸n\",\r\n        estimatedBudget: 4200000,\r\n        timeline: \"4 meses\"\r\n      },\r\n      requirements: {\r\n        complete: true,\r\n        checklist: {\r\n          technicalSpecs: true,\r\n          locationAccess: true,\r\n          budgetRange: true,\r\n          timeline: true,\r\n          permits: true\r\n        }\r\n      },\r\n      quotationData: {\r\n        scope: \"Instalaci贸n completa de sistema HVAC con controles inteligentes\",\r\n        assumptions: [\r\n          \"Acceso libre a todas las 谩reas durante horario laboral\",\r\n          \"Cliente proporciona conexiones el茅ctricas principales\"\r\n        ],\r\n        timeline: \"16 semanas\",\r\n        conditions: \"50% anticipo, 50% contra entrega\",\r\n        materials: [\"Unidades condensadoras\", \"Ductos\", \"Controles\"],\r\n        riskAssessment: \"Medio - proyecto en construcci贸n\",\r\n        extraCosts: []\r\n      },\r\n      communications: [\r\n        {\r\n          id: \"comm-3\",\r\n          type: \"whatsapp\",\r\n          date: \"2024-03-20\",\r\n          content: \"Cliente solicita ajustes en cronograma\",\r\n          urgency: \"urgent\"\r\n        }\r\n      ],\r\n      notes: \"Cotizaci贸n en desarrollo. Cliente muy interesado.\"\r\n    },\r\n    {\r\n      id: \"SALES-004\",\r\n      clientName: \"Tech Solutions SA\",\r\n      contactChannel: \"email\",\r\n      projectType: \"project\",\r\n      salesRep: \"Patricia Morales\",\r\n      stage: \"client-review\",\r\n      priority: \"high\",\r\n      stageDuration: 12,\r\n      contactInfo: {\r\n        phone: \"+52 55 2345 6789\",\r\n        email: \"infraestructura@techsolutions.com\",\r\n        contactPerson: \"Lic. Miguel Hern谩ndez\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Modernizaci贸n de sistema de climatizaci贸n para oficinas\",\r\n        location: \"Puebla, Puebla\",\r\n        estimatedBudget: 1800000,\r\n        timeline: \"10 semanas\"\r\n      },\r\n      quotationData: {\r\n        scope: \"Reemplazo de equipos obsoletos y optimizaci贸n energ茅tica\",\r\n        assumptions: [\r\n          \"Trabajo nocturno y fines de semana\",\r\n          \"Coordinaci贸n con otros contratistas\"\r\n        ],\r\n        timeline: \"10 semanas\",\r\n        conditions: \"30% anticipo, 40% avance 50%, 30% finalizaci贸n\",\r\n        totalAmount: 1950000,\r\n        validity: \"30 d铆as\"\r\n      },\r\n      quotationStatus: {\r\n        sent: true,\r\n        sentDate: \"2024-03-15\",\r\n        method: \"email\",\r\n        attachments: [\"Cotizaci贸n_TechSolutions.pdf\", \"Cronograma.pdf\"],\r\n        clientFeedback: \"Cliente solicit贸 ajustes menores\"\r\n      },\r\n      communications: [\r\n        {\r\n          id: \"comm-4\",\r\n          type: \"email\",\r\n          date: \"2024-03-22\",\r\n          content: \"Cliente acepta condiciones, solicita ajuste en cronograma\",\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      notes: \"Cotizaci贸n enviada. Cliente en proceso de aprobaci贸n interna.\"\r\n    },\r\n    {\r\n      id: \"SALES-005\",\r\n      clientName: \"Urban Development Group\",\r\n      contactChannel: \"whatsapp\",\r\n      projectType: \"project\",\r\n      salesRep: \"Alejandro Torres\",\r\n      stage: \"closure\",\r\n      priority: \"medium\",\r\n      stageDuration: 15,\r\n      contactInfo: {\r\n        phone: \"+52 55 6789 0123\",\r\n        email: \"desarrollo@urbandevelopment.mx\",\r\n        contactPerson: \"Arq. Sofia Ram铆rez\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Sistema HVAC para centro comercial\",\r\n        location: \"Tijuana, Baja California\",\r\n        estimatedBudget: 3500000,\r\n        timeline: \"5 meses\"\r\n      },\r\n      quotationData: {\r\n        totalAmount: 3750000,\r\n        approved: true,\r\n        approvalDate: \"2024-03-26\"\r\n      },\r\n      contractualInfo: {\r\n        paymentConditions: \"40% anticipo, 30% avance 50%, 30% finalizaci贸n\",\r\n        billingData: {\r\n          businessName: \"Urban Development Group S.A. de C.V.\",\r\n          rfc: \"UDG123456789\",\r\n          address: \"Av. Revoluci贸n 1234, Tijuana, BC\"\r\n        },\r\n        deliverySchedule: [\r\n          { milestone: \"Equipos principales\", date: \"2024-05-15\" },\r\n          { milestone: \"Instalaci贸n completa\", date: \"2024-07-30\" }\r\n        ]\r\n      },\r\n      workOrderGenerated: true,\r\n      workOrderRef: \"WO-2024-UDG-001\",\r\n      communications: [\r\n        {\r\n          id: \"comm-5\",\r\n          type: \"email\",\r\n          date: \"2024-03-26\",\r\n          content: \"Contrato firmado. Iniciando proceso interno\",\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      notes: \"隆Oportunidad cerrada exitosamente! Orden de trabajo generada.\"\r\n    }\r\n  ]), []);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const load = async () => {\r\n      setIsLoading(true);\r\n      // Simula fetch\r\n      await new Promise((r) => setTimeout(r, 600));\r\n      if (!mounted) return;\r\n      setOpportunities(mockOpportunities);\r\n      setIsLoading(false);\r\n    };\r\n    load();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [mockOpportunities]);\r\n\r\n  // --- Handlers ---\r\n  const handleCreateOpportunity = (newOpportunity) => {\r\n    crearOportunidad(newOpportunity)\r\n      .then(response => {\r\n        console.log('Respuesta backend oportunidad:', response);\r\n        // Si el backend responde con 茅xito, actualiza el estado local\r\n        if (response && response.success && response.data) {\r\n          setOpportunities(prev => [response.data, ...prev]);\r\n        }\r\n        setShowNewOpportunityModal(false);\r\n      })\r\n      .catch(error => {\r\n        // Manejo de error opcional\r\n        console.error('Error al guardar oportunidad:', error);\r\n      });\r\n  };\r\n\r\n  const handleNewOpportunityClick = () => {\r\n    setShowNewOpportunityModal(true);\r\n    setShowControls(false);\r\n    setSelectedOpportunity(null);\r\n  };\r\n\r\n  const handleStageTransition = async (opportunityId, newStage) => {\r\n    try {\r\n      // Si se selecciona \"Desarrollo de Cotizaci贸n\", redirigir antes de la actualizaci贸n\r\n      if (newStage === 'quotation-development') {\r\n        // Actualiza primero el estado\r\n        await actualizarOportunidad(opportunityId, { etapa: newStage });\r\n        // Redirige a cotizaciones con los par谩metros necesarios\r\n        window.location.href = `/cotizaciones?opportunityId=${opportunityId}&newQuotation=true`;\r\n        return;\r\n      }\r\n\r\n      // Para otras etapas, contin煤a con el flujo normal\r\n      await actualizarOportunidad(opportunityId, { etapa: newStage });\r\n      if (selectedOpportunity?.id === opportunityId) {\r\n        setSelectedOpportunity(prev => ({ ...prev, stage: newStage, stageDuration: 0 }));\r\n      }\r\n    } catch (err) {\r\n      // Manejo de error ya est谩 en el hook\r\n    }\r\n  };\r\n\r\n  const handleOpportunitySelect = (opportunity) => {\r\n    setSelectedOpportunity(opportunity);\r\n    setShowControls(true);\r\n  };\r\n\r\n  const handleClientRegistration = (opportunityId, clientData) => {\r\n    setOpportunities(prev => prev?.map(opp =>\r\n      opp?.id === opportunityId\r\n        ? { ...opp, contactInfo: { ...opp?.contactInfo, ...clientData } }\r\n        : opp\r\n    ));\r\n    if (selectedOpportunity?.id === opportunityId) {\r\n      setSelectedOpportunity(prev => ({ ...prev, contactInfo: { ...prev?.contactInfo, ...clientData } }));\r\n    }\r\n  };\r\n\r\n  const handleCommunicationAdd = (opportunityId, communication) => {\r\n    setOpportunities(prev => prev?.map(opp =>\r\n      opp?.id === opportunityId\r\n        ? {\r\n            ...opp,\r\n            communications: [...(opp?.communications || []), communication]\r\n          }\r\n        : opp\r\n    ));\r\n    if (selectedOpportunity?.id === opportunityId) {\r\n      setSelectedOpportunity(prev => ({ ...prev, communications: [...(prev?.communications || []), communication] }));\r\n    }\r\n  };\r\n\r\n  const handleQuotationUpdate = (opportunityId, quotationData) => {\r\n    setOpportunities(prev => prev?.map(opp =>\r\n      opp?.id === opportunityId\r\n        ? { ...opp, quotationData }\r\n        : opp\r\n    ));\r\n    if (selectedOpportunity?.id === opportunityId) {\r\n      setSelectedOpportunity(prev => ({ ...prev, quotationData }));\r\n    }\r\n  };\r\n\r\n  const handleWorkOrderGeneration = (opportunityId, workOrderData) => {\r\n    setOpportunities(prev => prev?.map(opp =>\r\n      opp?.id === opportunityId\r\n        ? {\r\n            ...opp,\r\n            workOrderGenerated: true,\r\n            workOrderRef: workOrderData?.reference\r\n          }\r\n        : opp\r\n    ));\r\n    if (selectedOpportunity?.id === opportunityId) {\r\n      setSelectedOpportunity(prev => ({ ...prev, workOrderGenerated: true, workOrderRef: workOrderData?.reference }));\r\n    }\r\n  };\r\n\r\n  const getOpportunitiesByStage = (stageId) => {\r\n    if (!oportunidades) return [];\r\n    // Si la etapa es 'initial-contact', incluir las que no tienen etapa\r\n    if (stageId === 'initial-contact') {\r\n      return oportunidades.filter(opp => !opp.stage || opp.stage === 'initial-contact');\r\n    }\r\n    return oportunidades.filter(opp => opp.stage === stageId);\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'border-l-4 border-red-600 bg-red-50';\r\n      case 'high': return 'border-l-4 border-orange-500 bg-orange-50';\r\n      case 'medium': return 'border-l-4 border-yellow-500 bg-yellow-50';\r\n      case 'low': return 'border-l-4 border-green-500 bg-green-50';\r\n      default: return 'border-l-4 border-gray-400 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getDurationColor = (days) => {\r\n    if (days <= 3) return 'text-green-600';\r\n    if (days <= 7) return 'text-yellow-600';\r\n    return 'text-red-600';\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando oportunidades de venta...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Render ---\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n\r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n\r\n        <main className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Encabezado */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Gesti贸n de Oportunidades de Venta</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                  Flujo completo de ventas desde contacto inicial hasta cierre de oportunidad\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  iconName=\"RefreshCw\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => window.location?.reload()}\r\n                >\r\n                  Actualizar\r\n                </Button>\r\n                <Button\r\n                  iconName=\"Plus\"\r\n                  iconPosition=\"left\"\r\n                  onClick={handleNewOpportunityClick}\r\n                >\r\n                  Nueva Oportunidad\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Kanban + Panel derecho */}\r\n            <div className=\"relative flex transition-all duration-300\">\r\n              {/* Kanban container */}\r\n              <div\r\n                className={`flex-1 pb-6 transition-all duration-300 ${showControls ? 'mr-[32rem]' : ''}`}\r\n              >\r\n                {/* Scroll horizontal en desktop; en mobile se apilan columnas (flex-col) */}\r\n                <div className=\"lg:overflow-x-auto lg:overflow-y-hidden\">\r\n                  <div className=\"flex gap-6 min-w-max px-0 lg:px-6\r\n                                  flex-col lg:flex-row\">\r\n                    {salesStages.map((stage) => (\r\n                      <div\r\n                        key={stage.id}\r\n                        className=\"flex flex-col w-full lg:w-[280px] bg-white rounded-2xl shadow-md border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow\"\r\n                      >\r\n                        {/* Header etapa */}\r\n                        <div className={`${stage.color} p-4 text-white flex flex-col rounded-t-2xl`}>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <Icon name={stage.icon} size={20} />\r\n                            <h3 className=\"font-semibold text-base\">{stage.name}</h3>\r\n                          </div>\r\n                          <p className=\"text-xs mt-1 opacity-90\">{stage.description}</p>\r\n                          <span className=\"text-xs mt-2 bg-white/20 rounded px-2 py-1 w-fit\">\r\n                            {getOpportunitiesByStage(stage.id)?.length} oportunidades\r\n                          </span>\r\n                        </div>\r\n\r\n                        {/* Contenido tarjetas y mensaje vac铆o */}\r\n                        <div className=\"p-4 space-y-3 bg-gray-50 overflow-y-auto max-h-[60vh] scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent\">\r\n                          {/* Tarjetas */}\r\n                          {getOpportunitiesByStage(stage.id)?.map((opportunity) => (\r\n                            <article\r\n                              key={opportunity.id}\r\n                              onClick={() => handleOpportunitySelect(opportunity)}\r\n                              role=\"button\"\r\n                              tabIndex={0}\r\n                              onKeyDown={(e) => { if (e.key === 'Enter') handleOpportunitySelect(opportunity); }}\r\n                              className={`p-3 rounded-xl cursor-pointer hover:scale-[1.02] transform transition-all ${getPriorityColor(opportunity.priority)}`}\r\n                              aria-label={`${opportunity.clientName} - ${opportunity.id}`}\r\n                            >\r\n                              <div className=\"flex items-start justify-between mb-2\">\r\n                                <h4 className=\"font-medium text-sm text-gray-900 line-clamp-2\">\r\n                                  {opportunity.clientName}\r\n                                </h4>\r\n                                <span\r\n                                  className={`text-xs px-2 py-1 rounded-full ${\r\n                                    opportunity.priority === 'urgent'\r\n                                      ? 'bg-red-100 text-red-800'\r\n                                      : opportunity.priority === 'high'\r\n                                      ? 'bg-orange-100 text-orange-800'\r\n                                      : opportunity.priority === 'medium'\r\n                                      ? 'bg-yellow-100 text-yellow-800'\r\n                                      : 'bg-green-100 text-green-800'\r\n                                  }`}\r\n                                >\r\n                                  {opportunity.priority === 'urgent'\r\n                                    ? 'Urgente'\r\n                                    : opportunity.priority === 'high'\r\n                                    ? 'Alta'\r\n                                    : opportunity.priority === 'medium'\r\n                                    ? 'Media'\r\n                                    : 'Baja'}\r\n                                </span>\r\n                              </div>\r\n\r\n                              <div className=\"flex items-center justify-between text-xs text-gray-500 mb-1\">\r\n                                <div className=\"flex items-center space-x-2\">\r\n                                  <Icon\r\n                                    name={opportunity.contactChannel === 'whatsapp' ? 'MessageCircle' : 'Mail'}\r\n                                    size={12}\r\n                                  />\r\n                                  <span className=\"capitalize\">{opportunity.contactChannel}</span>\r\n                                  <span\r\n                                    className={`px-2 py-0.5 rounded text-xs ${\r\n                                      opportunity.projectType === 'project'\r\n                                        ? 'bg-blue-100 text-blue-800'\r\n                                        : 'bg-purple-100 text-purple-800'\r\n                                    }`}\r\n                                  >\r\n                                    {opportunity.projectType === 'project' ? 'Proyecto' : 'Pieza'}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n\r\n                              <div className=\"flex items-center space-x-2 mb-1\">\r\n                                <Icon name=\"User\" size={12} />\r\n                                <span className=\"text-xs text-gray-600\">{opportunity.salesRep}</span>\r\n                              </div>\r\n\r\n                              <div className=\"flex items-center justify-between\">\r\n                                <div className=\"flex items-center space-x-1\">\r\n                                  <Icon name=\"Clock\" size={12} />\r\n                                  <span\r\n                                    className={`text-xs font-medium ${getDurationColor(\r\n                                      opportunity.stageDuration\r\n                                    )}`}\r\n                                  >\r\n                                    {opportunity.stageDuration} d铆as\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n\r\n                              {opportunity.workOrderGenerated && (\r\n                                <div className=\"flex items-center space-x-1 mt-2 text-green-600\">\r\n                                  <Icon name=\"CheckCircle2\" size={12} />\r\n                                  <span className=\"text-xs font-medium\">Orden generada</span>\r\n                                </div>\r\n                              )}\r\n                            </article>\r\n                          ))}\r\n                          {/* Mensaje vac铆o */}\r\n                          {getOpportunitiesByStage(stage.id)?.length === 0 && (\r\n                            <div className=\"text-center py-8 text-gray-400\">\r\n                              <Icon name=\"Inbox\" size={28} className=\"mx-auto mb-2\" />\r\n                              <p className=\"text-sm\">Sin oportunidades</p>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Panel derecho - Desktop: fixed right panel; Mobile: slide-over full screen */}\r\n              {showControls && (\r\n                <>\r\n                  {/* Overlay solo para mobile */}\r\n                  <div\r\n                    className=\"lg:hidden fixed inset-0 bg-black/40 z-30\"\r\n                    onClick={() => setShowControls(false)}\r\n                    aria-hidden=\"true\"\r\n                  />\r\n\r\n                  {/* Fondo semitransparente solo para mobile */}\r\n                  <div\r\n                    className=\"fixed inset-0 bg-black/30 z-40 lg:hidden\"\r\n                    onClick={() => setShowControls(false)}\r\n                  />\r\n\r\n                  <aside\r\n                    className={`fixed top-16 right-4 w-11/12 max-w-xs h-[80vh] bg-white z-[60] rounded-l-2xl shadow-xl overflow-y-auto\r\n                  transform transition-transform duration-300\r\n                  ${showControls ? 'translate-x-0' : 'translate-x-full'}\r\n                  lg:top-[6rem] lg:right-0 lg:w-[25rem] lg:h-[calc(100vh-6rem)] lg:translate-x-0 lg:rounded-l-2xl lg:shadow-xl lg:border-l`}\r\n                    role=\"region\"\r\n                    aria-label=\"Controles de oportunidad\"\r\n                  >\r\n                    {/* Header sticky */}\r\n                    <div className=\"sticky top-0 bg-white border-b p-4 flex justify-between items-center z-50\">\r\n                      <h3 className=\"font-semibold text-gray-800 text-lg\">Controles de Oportunidad</h3>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        iconName=\"X\"\r\n                        onClick={() => setShowControls(false)}\r\n                        aria-label=\"Cerrar controles\"\r\n                      />\r\n                    </div>\r\n\r\n                    {/* Contenido */}\r\n                    <div className=\"p-4 space-y-6\">\r\n                      {selectedOpportunity ? (\r\n                        <div className=\"space-y-4\">\r\n                          <div>\r\n                            <h4 className=\"font-medium mb-2 text-sm sm:text-base\">{selectedOpportunity?.clientName}</h4>\r\n                          </div>\r\n\r\n                          {/* OCULTO TEMPORALMENTE - Paneles seg煤n etapa */}\r\n                          {/* {(selectedOpportunity?.stage === 'initial-contact' || !selectedOpportunity?.stage) && (\r\n                            <ClientRegistrationPanel\r\n                              opportunity={selectedOpportunity}\r\n                              onRegister={(clientData) =>\r\n                                handleClientRegistration(selectedOpportunity?.id, clientData)\r\n                              }\r\n                            />\r\n                          )} */}\r\n\r\n                          {/* Panel de Comunicaci贸n - VISIBLE */}\r\n                          <CommunicationPanel\r\n                            opportunity={selectedOpportunity}\r\n                            onAddCommunication={(communication) =>\r\n                              handleCommunicationAdd(selectedOpportunity?.id, communication)\r\n                            }\r\n                          />\r\n\r\n                          {/* OCULTO TEMPORALMENTE - QuotationRequestPanel */}\r\n                          {/* {(selectedOpportunity?.stage === 'quotation-development' ||\r\n                            selectedOpportunity?.stage === 'client-review' ||\r\n                            selectedOpportunity?.stage === 'closure') && (\r\n                            <QuotationRequestPanel\r\n                              opportunity={{\r\n                                ...selectedOpportunity,\r\n                                quotationData: selectedOpportunity?.quotationData || {\r\n                                  scope: '',\r\n                                  assumptions: [],\r\n                                  timeline: '',\r\n                                  conditions: '',\r\n                                  materials: [],\r\n                                  riskAssessment: 'low',\r\n                                  extraCosts: [],\r\n                                  totalAmount: 0,\r\n                                  validity: '30 d铆as'\r\n                                }\r\n                              }}\r\n                              onUpdate={(quotationData) =>\r\n                                handleQuotationUpdate(selectedOpportunity?.id, quotationData)\r\n                              }\r\n                            />\r\n                          )} */}\r\n\r\n                          {/* OCULTO TEMPORALMENTE - Panel de revisi贸n del cliente */}\r\n                          {/* {selectedOpportunity?.stage === 'client-review' && selectedOpportunity?.quotationStatus && (\r\n                            <div className=\"border rounded-lg p-4 bg-muted/10\">\r\n                              <h4 className=\"font-medium mb-2 flex items-center\">\r\n                                <Icon name=\"Eye\" size={16} className=\"mr-2 text-yellow-600\" />\r\n                                Revisi贸n del Cliente\r\n                              </h4>\r\n                              <div className=\"text-sm mb-2\">\r\n                                <strong>Enviado:</strong> {selectedOpportunity.quotationStatus.sent ? 'S铆' : 'No'}<br />\r\n                                <strong>Fecha de env铆o:</strong> {selectedOpportunity.quotationStatus.sentDate}<br />\r\n                                <strong>M茅todo:</strong> {selectedOpportunity.quotationStatus.method}<br />\r\n                                <strong>Adjuntos:</strong> {selectedOpportunity.quotationStatus.attachments?.join(', ') || 'Ninguno'}<br />\r\n                                <strong>Feedback del cliente:</strong> {selectedOpportunity.quotationStatus.clientFeedback || 'Sin comentarios'}\r\n                              </div>\r\n                            </div>\r\n                          )} */}\r\n\r\n                          {/* OCULTO TEMPORALMENTE - Panel de orden de trabajo en cierre */}\r\n                          {/* {selectedOpportunity?.stage === 'closure' && (\r\n                            <WorkOrderPanel\r\n                              opportunity={selectedOpportunity}\r\n                              onGenerateWorkOrder={(workOrderData) =>\r\n                                handleWorkOrderGeneration(selectedOpportunity?.id, workOrderData)\r\n                              }\r\n                            />\r\n                          )} */}\r\n\r\n                          {/* OCULTO TEMPORALMENTE - ChangeManagementPanel */}\r\n                          {/* {selectedOpportunity?.stage !== 'initial-contact' && (\r\n                            <ChangeManagementPanel\r\n                              opportunity={selectedOpportunity}\r\n                              onRequestChange={(changeData) =>\r\n                                console.log('Change requested:', changeData)\r\n                              }\r\n                            />\r\n                          )} */}\r\n\r\n                          {/* Botones para cambiar etapa - VISIBLE */}\r\n                          <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium\">Avanzar Etapa</label>\r\n                            <div className=\"grid grid-cols-1 gap-2\">{salesStages?.map((stage) => (\r\n                                <Button\r\n                                  key={stage?.id}\r\n                                  variant={selectedOpportunity?.stage === stage?.id ? 'default' : 'outline'}\r\n                                  size=\"sm\"\r\n                                  onClick={() =>\r\n                                    handleStageTransition(selectedOpportunity?.id, stage?.id)\r\n                                  }\r\n                                  disabled={selectedOpportunity?.stage === stage?.id}\r\n                                  className=\"text-xs justify-start\"\r\n                                >\r\n                                  <Icon name={stage?.icon} size={14} className=\"mr-2\" />\r\n                                  {stage?.name}\r\n                                </Button>\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"text-center text-gray-500 py-6\">\r\n                          <p className=\"mb-2\">Selecciona una oportunidad para ver controles</p>\r\n                          <Button onClick={() => setShowControls(false)}>Cerrar</Button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </aside>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </main>\r\n\r\n        {/* Modal para nueva oportunidad */}\r\n        <NewOpportunityModal\r\n          isOpen={showNewOpportunityModal}\r\n          onClose={() => setShowNewOpportunityModal(false)}\r\n          onCreateOpportunity={handleCreateOpportunity}\r\n          error={error}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesOpportunityManagement;\r\n","// quotationService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst quotationService = {\r\n  async createQuotation(data) {\r\n    try {\r\n      const response = await httpService.post(\"cotizacion/crear\", data);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(\"Error creating quotation:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getCotizaciones() {\r\n    try {\r\n      const response = await httpService.get(\"cotizaciones\");\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error obteniendo cotizaciones:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n    async crearConstructor(data) {\r\n      try {\r\n        const response = await httpService.post('cotizaciones/constructor/crear', data);\r\n        return response;\r\n      } catch (error) {\r\n        console.error('Error creando constructor:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    async getCotizacionById(id) {\r\n      try {\r\n        const response = await httpService.get(`cotizacion/${id}`);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error(\"Error obteniendo cotizaci贸n por ID:\", error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    async editCotizacion(id, data) {\r\n      try {\r\n        const response = await httpService.put(`cotizacion/${id}`, data);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error(\"Error editando cotizaci贸n:\", error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    async upsertRevision(revisionData) {\r\n      try {\r\n        // POST/PUT para crear o actualizar revisi贸n\r\n        const response = await httpService.post('cotizaciones/revision', revisionData);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('Error creando/actualizando revisi贸n:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    async getRevision({ id, idCotizacion }) {\r\n      try {\r\n        const params = [];\r\n        if (id) params.push(`id=${id}`);\r\n        if (idCotizacion) params.push(`idCotizacion=${idCotizacion}`);\r\n        const query = params.length ? `?${params.join('&')}` : '';\r\n        const response = await httpService.get(`cotizaciones/revision/obtener${query}`);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('Error obteniendo revisi贸n:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    async getConstructorByCotizacionId(id) {\r\n      try {\r\n        const response = await httpService.get(`cotizaciones/constructor/obtener?idCotizacion=${id}`);\r\n        return response.data;\r\n      } catch (error) {\r\n        // Si el error es 404, significa que no existe constructor y es un caso v谩lido\r\n        if (error.status === 404) {\r\n          return null;\r\n        }\r\n        // Para otros errores, los manejamos como antes\r\n        console.error('Error obteniendo constructor:', error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    // Agregar/actualizar materiales en una cotizaci贸n\r\n    async updateMateriales(idCotizacion, materiales) {\r\n      try {\r\n        const response = await httpService.patch(`cotizacion/${idCotizacion}/materiales`, { materiales });\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('Error actualizando materiales:', error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    // Actualizar materiales y evaluaci贸n de riesgos\r\n    async updateMaterialesYRiesgos(idCotizacion, data) {\r\n      try {\r\n        const response = await httpService.patch(`cotizacion/${idCotizacion}/materiales`, data);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('Error actualizando materiales y riesgos:', error);\r\n        throw error;\r\n      }\r\n    },\r\n};\r\n\r\nexport default quotationService;\r\n","import { useState } from \"react\";\r\nimport quotationService from \"../services/quotationService\";\r\n\r\nconst useQuotation = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const createQuotation = async (data) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.createQuotation(data);\r\n      // console.log eliminado\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getCotizaciones = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.getCotizaciones();\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getCotizacionById = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.getCotizacionById(id);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const editCotizacion = async (id, data) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.editCotizacion(id, data);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const crearConstructor = async (data) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.crearConstructor(data);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const getConstructorByCotizacionId = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.getConstructorByCotizacionId(id);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Nueva funci贸n para crear/actualizar revisi贸n\r\n  const upsertRevision = async (revisionData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.upsertRevision(revisionData);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Nueva funci贸n para obtener revisi贸n\r\n  const getRevision = async ({ id, idCotizacion }) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.getRevision({ id, idCotizacion });\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Nueva funci贸n para actualizar materiales\r\n  const updateMateriales = async (idCotizacion, materiales) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.updateMateriales(idCotizacion, materiales);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Nueva funci贸n para actualizar materiales y evaluaci贸n de riesgos\r\n  const updateMaterialesYRiesgos = async (idCotizacion, data) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.updateMaterialesYRiesgos(idCotizacion, data);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    createQuotation,\r\n    getCotizaciones,\r\n    getCotizacionById,\r\n    editCotizacion,\r\n    crearConstructor,\r\n    getConstructorByCotizacionId,\r\n    upsertRevision,\r\n    getRevision,\r\n    updateMateriales,\r\n    updateMaterialesYRiesgos,\r\n    loading,\r\n    error,\r\n  };\r\n};\r\n\r\nexport default useQuotation;\r\n","import React, { useState, useEffect } from 'react';\r\nimport useQuotation from '../../../hooks/useQuotation';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { useNotification } from '../../../context/NotificationContext';\r\n\r\nconst QuotationBuilder = ({ cotizacion, onUpdate, onAddRevision }) => {\r\n  const { crearConstructor, getConstructorByCotizacionId } = useQuotation();\r\n  const notification = useNotification();\r\n          const [formData, setFormData] = useState({\r\n            scope: cotizacion?.quotationData?.scope || '',\r\n            assumptions: cotizacion?.quotationData?.assumptions || [],\r\n            timeline: cotizacion?.quotationData?.timeline || '',\r\n            conditions: cotizacion?.quotationData?.conditions || '',\r\n            warranty: cotizacion?.quotationData?.warranty || '',\r\n            totalAmount: cotizacion?.quotationData?.totalAmount || 0,\r\n            validity: cotizacion?.quotationData?.validity || '30 d铆as'\r\n          });\r\n          const [loading, setLoading] = useState(false);\r\n          const [error, setError] = useState('');\r\n          // Cargar datos del constructor existente si hay\r\n          useEffect(() => {\r\n            async function fetchConstructor() {\r\n              // Limpiar el formulario al cambiar de cotizaci贸n\r\n              setFormData({\r\n                scope: '',\r\n                assumptions: [],\r\n                timeline: '',\r\n                conditions: '',\r\n                warranty: '',\r\n                totalAmount: 0,\r\n                validity: '30 d铆as'\r\n              });\r\n              if (!cotizacion?.id) return;\r\n              setLoading(true);\r\n              setError('');\r\n              try {\r\n                const existing = await getConstructorByCotizacionId(cotizacion.id);\r\n                // Solo mostramos en consola si existe\r\n                if (existing) {\r\n                  // console.log eliminado\r\n                  setFormData({\r\n                    scope: existing.alcance || '',\r\n                    assumptions: existing.supuestos || [],\r\n                    timeline: existing.tiempo_ejecucion || '',\r\n                    conditions: existing.condiciones_pago || '',\r\n                    warranty: existing.garantia || '',\r\n                    totalAmount: existing.monto_total || 0,\r\n                    validity: existing.vigencia || '30 d铆as',\r\n                  });\r\n                } else {\r\n                  setFormData({\r\n                    scope: cotizacion?.quotationData?.scope || '',\r\n                    assumptions: cotizacion?.quotationData?.assumptions || [],\r\n                    timeline: cotizacion?.quotationData?.timeline || '',\r\n                    conditions: cotizacion?.quotationData?.conditions || '',\r\n                    warranty: cotizacion?.quotationData?.warranty || '',\r\n                    totalAmount: cotizacion?.quotationData?.totalAmount || 0,\r\n                    validity: cotizacion?.quotationData?.validity || '30 d铆as'\r\n                  });\r\n                }\r\n              } catch (err) {\r\n                setError('Error al cargar constructor');\r\n              } finally {\r\n                setLoading(false);\r\n              }\r\n            }\r\n            fetchConstructor();\r\n          }, [cotizacion?.id]);\r\n\r\n          const [newAssumption, setNewAssumption] = useState('');\r\n          const [hasChanges, setHasChanges] = useState(false);\r\n\r\n          const handleInputChange = (field, value) => {\r\n            setFormData(prev => ({ ...prev, [field]: value }));\r\n            setHasChanges(true);\r\n          };\r\n\r\n          const addAssumption = () => {\r\n            if (!newAssumption?.trim()) return;\r\n            const newAssumptions = [...(formData?.assumptions || []), newAssumption];\r\n            setFormData(prev => ({ ...prev, assumptions: newAssumptions }));\r\n            setNewAssumption('');\r\n            setHasChanges(true);\r\n          };\r\n\r\n          const removeAssumption = (index) => {\r\n            const newAssumptions = formData?.assumptions?.filter((_, i) => i !== index);\r\n            setFormData(prev => ({ ...prev, assumptions: newAssumptions }));\r\n            setHasChanges(true);\r\n          };\r\n\r\n  const handleSave = async () => {\r\n    onUpdate?.({ quotationData: formData });\r\n    const payload = {\r\n      Constructor: {\r\n        cotizacionId: cotizacion?.id,\r\n        Folio: cotizacion?.folio || cotizacion?.id,\r\n        alcance: formData?.scope,\r\n        condiciones_pago: formData?.conditions,\r\n        supuestos: formData?.assumptions,\r\n        garantia: formData?.warranty,\r\n        monto_total: formData?.totalAmount,\r\n        tiempo_ejecucion: formData?.timeline,\r\n        vigencia: formData?.validity\r\n      }\r\n    };\r\n    try {\r\n      await crearConstructor(payload);\r\n      notification.showSuccess('guardado');\r\n    } catch (err) {\r\n      notification.showError('Error al guardar el constructor');\r\n    }\r\n    setHasChanges(false);\r\n  };\r\n\r\n          const handleCreateRevision = () => {\r\n            const revision = {\r\n              changes: \"Actualizaci贸n de alcance y condiciones\",\r\n              author: cotizacion?.assignedTo || \"Usuario Actual\"\r\n            };\r\n            onAddRevision?.(revision);\r\n            setHasChanges(false);\r\n          };\r\n\r\n          const handleSaveConstructor = async () => {\r\n            const payload = {\r\n              Constructor: {\r\n                cotizacionId: cotizacion?.id,\r\n                Folio: cotizacion?.id,\r\n                alcance: formData?.scope,\r\n                condiciones_pago: formData?.conditions,\r\n                supuestos: formData?.assumptions,\r\n                garantia: formData?.warranty,\r\n                monto_total: formData?.totalAmount,\r\n                tiempo_ejecucion: formData?.timeline,\r\n                vigencia: formData?.validity\r\n              }\r\n            };\r\n            try {\r\n              const res = await crearConstructor(payload);\r\n              // console.log eliminado\r\n              alert('Constructor guardado exitosamente');\r\n            } catch (err) {\r\n              alert('Error al guardar el constructor');\r\n            }\r\n          };\r\n\r\n          return (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-semibold\">{cotizacion?.projectName}</h3>\r\n                  <p className=\"text-muted-foreground\">{cotizacion?.clientName} - {cotizacion?.folio}</p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  {hasChanges && (\r\n                    <span className=\"text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded\">\r\n                      Cambios sin guardar\r\n                    </span>\r\n                  )}\r\n                  {/* Bot贸n gris superior para guardar */}\r\n                  <button\r\n                    className=\"text-muted-foreground flex items-center space-x-1\"\r\n                    style={{ background: 'none', border: 'none', cursor: hasChanges ? 'pointer' : 'not-allowed', fontSize: '16px', padding: 0 }}\r\n                    onClick={hasChanges ? handleSave : undefined}\r\n                    disabled={!hasChanges}\r\n                  >\r\n                    <Icon name=\"Save\" size={20} />\r\n                    <span>Guardar</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Left Column */}\r\n                <div className=\"space-y-4\">\r\n                  {/* Scope Definition */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Definici贸n de Alcance</label>\r\n                    <textarea\r\n                      value={formData?.scope}\r\n                      onChange={(e) => handleInputChange('scope', e?.target?.value)}\r\n                      placeholder=\"Descripci贸n detallada del alcance del proyecto...\"\r\n                      rows={4}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Assumptions */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Supuestos del Proyecto</label>\r\n                    <div className=\"space-y-2\">\r\n                      {formData?.assumptions?.map((assumption, index) => (\r\n                        <div key={index} className=\"flex items-start space-x-2 p-2 bg-muted/30 rounded\">\r\n                          <Icon name=\"Check\" size={14} className=\"text-green-600 mt-0.5\" />\r\n                          <span className=\"flex-1 text-sm\">{assumption}</span>\r\n                          <button\r\n                            onClick={() => removeAssumption(index)}\r\n                            className=\"text-red-600 hover:text-red-800\"\r\n                          >\r\n                            <Icon name=\"X\" size={14} />\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                      <div className=\"flex space-x-2\">\r\n                        <Input\r\n                          value={newAssumption}\r\n                          onChange={(e) => setNewAssumption(e?.target?.value)}\r\n                          placeholder=\"Agregar supuesto...\"\r\n                          className=\"flex-1\"\r\n                          onKeyPress={(e) => e?.key === 'Enter' && addAssumption()}\r\n                        />\r\n                        <Button\r\n                          size=\"sm\"\r\n                          onClick={addAssumption}\r\n                          iconName=\"Plus\"\r\n                          disabled={!newAssumption?.trim()}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Timeline and Validity */}\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"text-sm font-medium mb-2 block\">Tiempo de Ejecuci贸n</label>\r\n                      <Input\r\n                        value={formData?.timeline}\r\n                        onChange={(e) => handleInputChange('timeline', e?.target?.value)}\r\n                        placeholder=\"ej: 16 semanas\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-sm font-medium mb-2 block\">Vigencia</label>\r\n                      <Input\r\n                        value={formData?.validity}\r\n                        onChange={(e) => handleInputChange('validity', e?.target?.value)}\r\n                        placeholder=\"30 d铆as\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Right Column */}\r\n                <div className=\"space-y-4\">\r\n                  {/* Payment Conditions */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Condiciones de Pago</label>\r\n                    <textarea\r\n                      value={formData?.conditions}\r\n                      onChange={(e) => handleInputChange('conditions', e?.target?.value)}\r\n                      placeholder=\"ej: 50% anticipo, 25% avance 50%, 25% finalizaci贸n\"\r\n                      rows={3}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Warranty */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Garant铆a</label>\r\n                    <Input\r\n                      value={formData?.warranty}\r\n                      onChange={(e) => handleInputChange('warranty', e?.target?.value)}\r\n                      placeholder=\"ej: 24 meses en equipos, 12 meses en instalaci贸n\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Total Amount */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Monto Total (MXN)</label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={formData?.totalAmount}\r\n                      onChange={(e) => handleInputChange('totalAmount', parseFloat(e?.target?.value) || 0)}\r\n                      placeholder=\"0.00\"\r\n                    />\r\n                    {formData?.totalAmount > 0 && (\r\n                      <p className=\"text-sm text-muted-foreground mt-1\">\r\n                        ${formData?.totalAmount?.toLocaleString('es-MX')} MXN\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Quick Actions */}\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"text-sm font-medium\">Plantillas R谩pidas</label>\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleInputChange('conditions', '50% anticipo, 50% contra entrega')}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Pago 50/50\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleInputChange('warranty', '24 meses equipos, 12 meses instalaci贸n')}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Garant铆a Est谩ndar\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleInputChange('validity', '45 d铆as')}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Vigencia 45 d铆as\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => addAssumption('Acceso libre durante horario laboral')}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Acceso Est谩ndar\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"flex items-center justify-between pt-6 border-t border-border\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-muted-foreground\" />\r\n                  <span className=\"text-sm text-muted-foreground\">\r\n                     ltima actualizaci贸n: {cotizacion?.lastModified}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex space-x-2\">\r\n                  {/* Bot贸n comentado: Crear Revisi贸n (se dej贸 comentado para posible uso futuro)\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={handleCreateRevision}\r\n                    iconName=\"GitBranch\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Crear Revisi贸n\r\n                  </Button>\r\n                  */}\r\n\r\n                  {/* Bot贸n comentado: Enviar a Revisi贸n (se dej贸 comentado para posible uso futuro)\r\n                  <Button\r\n                    // console.log eliminado\r\n                    iconName=\"Users\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Enviar a Revisi贸n\r\n                  </Button>\r\n                  */}\r\n                  {/* Eliminar el bot贸n azul de Guardar aqu铆 */}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default QuotationBuilder;","import React, { useState, useEffect, useMemo } from 'react';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        import Input from '../../../components/ui/Input';\r\n        import useInventory from '../../../hooks/useInventory';\r\n        import useQuotation from '../../../hooks/useQuotation';\r\n        import { useNotifications } from '../../../context/NotificationContext';\r\n\r\n        const MaterialRiskChecklist = ({ quotation, onUpdate }) => {\r\n          const { articulos, getArticulos, loading: inventoryLoading } = useInventory();\r\n          const { updateMaterialesYRiesgos, getCotizacionById, loading: quotationLoading } = useQuotation();\r\n          const { showSuccess, showError } = useNotifications();\r\n          const [materials, setMaterials] = useState([]);\r\n          const [riskAssessment, setRiskAssessment] = useState({\r\n            overall: 'low',\r\n            factors: [],\r\n            extraCostsPrevention: true\r\n          });\r\n          const [newMaterial, setNewMaterial] = useState({ \r\n            item: '', \r\n            quantity: '', \r\n            cost: 0, \r\n            risk: 'low',\r\n            itemCode: '',\r\n            unit: '',\r\n            fromInventory: false,\r\n            inventoryItemId: null\r\n          });\r\n          const [newRiskFactor, setNewRiskFactor] = useState({ factor: '', risk: 'low', mitigation: '' });\r\n          const [showInventorySelector, setShowInventorySelector] = useState(false);\r\n          const [inventorySearch, setInventorySearch] = useState('');\r\n          const [loadingMaterials, setLoadingMaterials] = useState(false);\r\n\r\n          // Cargar art铆culos del inventario\r\n          useEffect(() => {\r\n            getArticulos();\r\n          }, []);\r\n\r\n          // Cargar materiales guardados cuando cambia la cotizaci贸n\r\n          useEffect(() => {\r\n            async function fetchMateriales() {\r\n              // Limpiar materiales al cambiar de cotizaci贸n\r\n              setMaterials([]);\r\n              setRiskAssessment({\r\n                overall: 'low',\r\n                factors: [],\r\n                extraCostsPrevention: true\r\n              });\r\n\r\n              if (!quotation?.id) return;\r\n\r\n              setLoadingMaterials(true);\r\n              try {\r\n                const cotizacionCompleta = await getCotizacionById(quotation.id);\r\n                \r\n                // Cargar materiales si existen\r\n                if (cotizacionCompleta?.materiales && Array.isArray(cotizacionCompleta.materiales)) {\r\n                  setMaterials(cotizacionCompleta.materiales);\r\n                }\r\n\r\n                // Cargar evaluaci贸n de riesgos si existe\r\n                if (cotizacionCompleta?.riskAssessment) {\r\n                  setRiskAssessment(cotizacionCompleta.riskAssessment);\r\n                }\r\n              } catch (error) {\r\n                console.error('Error al cargar materiales:', error);\r\n                // Si hay error, intentar usar los datos locales del quotation prop\r\n                if (quotation?.materials) {\r\n                  setMaterials(quotation.materials);\r\n                }\r\n                if (quotation?.riskAssessment) {\r\n                  setRiskAssessment(quotation.riskAssessment);\r\n                }\r\n              } finally {\r\n                setLoadingMaterials(false);\r\n              }\r\n            }\r\n\r\n            fetchMateriales();\r\n          }, [quotation?.id]);\r\n\r\n          // Filtrar art铆culos del inventario seg煤n b煤squeda\r\n          const filteredInventoryItems = useMemo(() => {\r\n            if (!inventorySearch.trim()) return articulos;\r\n            \r\n            const searchLower = inventorySearch.toLowerCase();\r\n            return articulos.filter(item => \r\n              item?.nombre?.toLowerCase().includes(searchLower) ||\r\n              item?.codigo?.toLowerCase().includes(searchLower) ||\r\n              item?.descripcion?.toLowerCase().includes(searchLower) ||\r\n              item?.categoria?.toLowerCase().includes(searchLower)\r\n            );\r\n          }, [articulos, inventorySearch]);\r\n\r\n          const handleMaterialChange = (index, field, value) => {\r\n            const updatedMaterials = materials?.map((material, i) => \r\n              i === index ? { ...material, [field]: value } : material\r\n            );\r\n            setMaterials(updatedMaterials);\r\n          };\r\n\r\n          // Seleccionar un art铆culo del inventario\r\n          const handleSelectInventoryItem = (item) => {\r\n            setNewMaterial({\r\n              item: item.nombre || '',\r\n              itemCode: item.codigo || '',\r\n              quantity: '1',\r\n              cost: item.costoUnitario || 0,\r\n              unit: item.unidad || '',\r\n              risk: 'low',\r\n              fromInventory: true,\r\n              inventoryItemId: item.id\r\n            });\r\n            setShowInventorySelector(false);\r\n            setInventorySearch('');\r\n          };\r\n\r\n          const addMaterial = () => {\r\n            if (!newMaterial?.item?.trim() || !newMaterial?.quantity?.trim()) return;\r\n            \r\n            setMaterials(prev => [...prev, { \r\n              ...newMaterial, \r\n              id: Date.now(),\r\n              addedAt: new Date().toISOString()\r\n            }]);\r\n            setNewMaterial({ \r\n              item: '', \r\n              quantity: '', \r\n              cost: 0, \r\n              risk: 'low',\r\n              itemCode: '',\r\n              unit: '',\r\n              fromInventory: false,\r\n              inventoryItemId: null\r\n            });\r\n          };\r\n\r\n          const removeMaterial = (index) => {\r\n            setMaterials(prev => prev?.filter((_, i) => i !== index));\r\n          };\r\n\r\n          const addRiskFactor = () => {\r\n            if (!newRiskFactor?.factor?.trim()) return;\r\n            \r\n            setRiskAssessment(prev => ({\r\n              ...prev,\r\n              factors: [...(prev?.factors || []), { ...newRiskFactor, id: Date.now() }]\r\n            }));\r\n            setNewRiskFactor({ factor: '', risk: 'low', mitigation: '' });\r\n          };\r\n\r\n          const removeRiskFactor = (index) => {\r\n            setRiskAssessment(prev => ({\r\n              ...prev,\r\n              factors: prev?.factors?.filter((_, i) => i !== index)\r\n            }));\r\n          };\r\n\r\n          const handleSave = async () => {\r\n            try {\r\n              // Guardar en el backend si existe el ID de cotizaci贸n\r\n              if (quotation?.id) {\r\n                const dataToSave = {\r\n                  materiales: materials,\r\n                  riskAssessment: {\r\n                    ...riskAssessment,\r\n                    overall: calculateOverallRisk()\r\n                  }\r\n                };\r\n                \r\n                await updateMaterialesYRiesgos(quotation.id, dataToSave);\r\n                showSuccess('Materiales y evaluaci贸n de riesgos guardados exitosamente');\r\n              }\r\n              \r\n              // Tambi茅n llamar al onUpdate para actualizar el estado local\r\n              onUpdate?.({ \r\n                materials, \r\n                riskAssessment: {\r\n                  ...riskAssessment,\r\n                  overall: calculateOverallRisk()\r\n                }\r\n              });\r\n            } catch (error) {\r\n              console.error('Error guardando materiales:', error);\r\n              showError('Error al guardar los materiales');\r\n            }\r\n          };\r\n\r\n          const calculateOverallRisk = () => {\r\n            const highRiskMaterials = materials?.filter(m => m?.risk === 'high')?.length || 0;\r\n            const highRiskFactors = riskAssessment?.factors?.filter(f => f?.risk === 'high')?.length || 0;\r\n            \r\n            if (highRiskMaterials > 0 || highRiskFactors > 0) return 'high';\r\n            \r\n            const mediumRiskMaterials = materials?.filter(m => m?.risk === 'medium')?.length || 0;\r\n            const mediumRiskFactors = riskAssessment?.factors?.filter(f => f?.risk === 'medium')?.length || 0;\r\n            \r\n            if (mediumRiskMaterials > 0 || mediumRiskFactors > 0) return 'medium';\r\n            \r\n            return 'low';\r\n          };\r\n\r\n          const getRiskColor = (risk) => {\r\n            switch (risk) {\r\n              case 'high': return 'text-red-600 bg-red-50 border-red-200';\r\n              case 'medium': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\r\n              case 'low': return 'text-green-600 bg-green-50 border-green-200';\r\n              default: return 'text-gray-600 bg-gray-50 border-gray-200';\r\n            }\r\n          };\r\n\r\n          const totalCost = materials?.reduce((sum, material) => sum + (material?.cost || 0), 0);\r\n\r\n          // Mostrar loading mientras se cargan los materiales\r\n          if (loadingMaterials) {\r\n            return (\r\n              <div className=\"flex items-center justify-center h-96\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n                  <p className=\"text-muted-foreground\">Cargando materiales...</p>\r\n                </div>\r\n              </div>\r\n            );\r\n          }\r\n\r\n          return (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-xl font-semibold\">Checklist de Materiales y Riesgos</h3>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className={`px-3 py-1 text-sm rounded-full border ${getRiskColor(calculateOverallRisk())}`}>\r\n                    Riesgo General: {calculateOverallRisk() === 'high' ? 'Alto' : calculateOverallRisk() === 'medium' ? 'Medio' : 'Bajo'}\r\n                  </div>\r\n                  <Button\r\n                    onClick={handleSave}\r\n                    iconName=\"Save\"\r\n                    iconPosition=\"left\"\r\n                    disabled={quotationLoading}\r\n                  >\r\n                    {quotationLoading ? 'Guardando...' : 'Guardar Checklist'}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Materials Section */}\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name=\"Package\" size={20} className=\"text-primary\" />\r\n                    <h4 className=\"text-lg font-medium\">Lista de Materiales</h4>\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      Total: ${totalCost?.toLocaleString('es-MX')} MXN\r\n                    </div>\r\n                  </div>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => setShowInventorySelector(!showInventorySelector)}\r\n                    iconName=\"Search\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Buscar en Inventario\r\n                  </Button>\r\n                </div>\r\n\r\n                {/* Inventory Selector Modal */}\r\n                {showInventorySelector && (\r\n                  <div className=\"bg-card border-2 border-primary rounded-lg p-4 shadow-lg\">\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                      <h5 className=\"font-medium\">Seleccionar del Inventario</h5>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          setShowInventorySelector(false);\r\n                          setInventorySearch('');\r\n                        }}\r\n                        iconName=\"X\"\r\n                      />\r\n                    </div>\r\n                    \r\n                    <Input\r\n                      value={inventorySearch}\r\n                      onChange={(e) => setInventorySearch(e.target.value)}\r\n                      placeholder=\"Buscar por nombre, c贸digo, categor铆a...\"\r\n                      className=\"mb-3\"\r\n                    />\r\n\r\n                    <div className=\"max-h-80 overflow-y-auto space-y-2\">\r\n                      {inventoryLoading ? (\r\n                        <p className=\"text-center text-muted-foreground py-4\">Cargando inventario...</p>\r\n                      ) : filteredInventoryItems.length === 0 ? (\r\n                        <p className=\"text-center text-muted-foreground py-4\">No se encontraron art铆culos</p>\r\n                      ) : (\r\n                        filteredInventoryItems.map((item) => (\r\n                          <div\r\n                            key={item.id}\r\n                            onClick={() => handleSelectInventoryItem(item)}\r\n                            className=\"p-3 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors\"\r\n                          >\r\n                            <div className=\"flex items-start justify-between\">\r\n                              <div className=\"flex-1\">\r\n                                <div className=\"flex items-center space-x-2 mb-1\">\r\n                                  <span className=\"font-medium text-sm\">{item.nombre}</span>\r\n                                  <span className=\"text-xs px-2 py-0.5 bg-muted rounded\">\r\n                                    {item.codigo}\r\n                                  </span>\r\n                                </div>\r\n                                <p className=\"text-xs text-muted-foreground line-clamp-1\">\r\n                                  {item.descripcion}\r\n                                </p>\r\n                                <div className=\"flex items-center space-x-3 mt-2 text-xs\">\r\n                                  <span className=\"text-muted-foreground\">\r\n                                    <span className=\"font-medium\">Stock:</span> {item.stockActual} {item.unidad}\r\n                                  </span>\r\n                                  <span className=\"text-muted-foreground\">\r\n                                    <span className=\"font-medium\">Costo:</span> ${item.costoUnitario?.toLocaleString('es-MX')} MXN\r\n                                  </span>\r\n                                  <span className=\"text-muted-foreground\">\r\n                                    <span className=\"font-medium\">Categor铆a:</span> {item.categoria}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                              <Icon name=\"Plus\" size={16} className=\"text-primary ml-2\" />\r\n                            </div>\r\n                          </div>\r\n                        ))\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"bg-card border rounded-lg overflow-hidden\">\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                      <thead className=\"bg-muted/50\">\r\n                        <tr>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">C贸digo</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Material/Equipo</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Cantidad</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Unidad</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Costo (MXN)</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Subtotal</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Riesgo</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Origen</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Acciones</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {materials?.map((material, index) => (\r\n                          <tr key={index} className=\"border-t border-border\">\r\n                            <td className=\"px-4 py-3\">\r\n                              <span className=\"text-xs text-muted-foreground\">\r\n                                {material?.itemCode || '-'}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <div className=\"flex items-center space-x-2\">\r\n                                <Input\r\n                                  value={material?.item}\r\n                                  onChange={(e) => handleMaterialChange(index, 'item', e?.target?.value)}\r\n                                  placeholder=\"Descripci贸n del material\"\r\n                                  size=\"sm\"\r\n                                />\r\n                                {material?.fromInventory && (\r\n                                  <Icon name=\"Package\" size={14} className=\"text-green-600\" title=\"Del inventario\" />\r\n                                )}\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                value={material?.quantity}\r\n                                onChange={(e) => handleMaterialChange(index, 'quantity', e?.target?.value)}\r\n                                placeholder=\"0\"\r\n                                size=\"sm\"\r\n                                className=\"w-20\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <Input\r\n                                value={material?.unit || ''}\r\n                                onChange={(e) => handleMaterialChange(index, 'unit', e?.target?.value)}\r\n                                placeholder=\"pcs\"\r\n                                size=\"sm\"\r\n                                className=\"w-20\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                value={material?.cost}\r\n                                onChange={(e) => handleMaterialChange(index, 'cost', parseFloat(e?.target?.value) || 0)}\r\n                                placeholder=\"0.00\"\r\n                                size=\"sm\"\r\n                                className=\"w-28\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <span className=\"text-sm font-medium\">\r\n                                ${((parseFloat(material?.quantity) || 0) * (material?.cost || 0)).toLocaleString('es-MX')}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <select\r\n                                value={material?.risk}\r\n                                onChange={(e) => handleMaterialChange(index, 'risk', e?.target?.value)}\r\n                                className=\"w-full px-2 py-1 text-sm border border-border rounded bg-background\"\r\n                              >\r\n                                <option value=\"low\">Bajo</option>\r\n                                <option value=\"medium\">Medio</option>\r\n                                <option value=\"high\">Alto</option>\r\n                              </select>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <span className={`text-xs px-2 py-1 rounded-full ${\r\n                                material?.fromInventory \r\n                                  ? 'bg-green-100 text-green-800' \r\n                                  : 'bg-blue-100 text-blue-800'\r\n                              }`}>\r\n                                {material?.fromInventory ? 'Inventario' : 'Manual'}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={() => removeMaterial(index)}\r\n                                iconName=\"Trash2\"\r\n                                className=\"text-red-600\"\r\n                              />\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                        \r\n                        {/* Add New Material Row */}\r\n                        <tr className=\"border-t border-border bg-muted/20\">\r\n                          <td className=\"px-4 py-3\">\r\n                            <Input\r\n                              value={newMaterial?.itemCode}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, itemCode: e?.target?.value }))}\r\n                              placeholder=\"C贸digo\"\r\n                              size=\"sm\"\r\n                              disabled={newMaterial?.fromInventory}\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <Input\r\n                              value={newMaterial?.item}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, item: e?.target?.value }))}\r\n                              placeholder=\"Nuevo material...\"\r\n                              size=\"sm\"\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <Input\r\n                              type=\"number\"\r\n                              value={newMaterial?.quantity}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, quantity: e?.target?.value }))}\r\n                              placeholder=\"0\"\r\n                              size=\"sm\"\r\n                              className=\"w-20\"\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <Input\r\n                              value={newMaterial?.unit}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, unit: e?.target?.value }))}\r\n                              placeholder=\"pcs\"\r\n                              size=\"sm\"\r\n                              className=\"w-20\"\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <Input\r\n                              type=\"number\"\r\n                              value={newMaterial?.cost}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, cost: parseFloat(e?.target?.value) || 0 }))}\r\n                              placeholder=\"0.00\"\r\n                              size=\"sm\"\r\n                              className=\"w-28\"\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <span className=\"text-sm font-medium\">\r\n                              ${((parseFloat(newMaterial?.quantity) || 0) * (newMaterial?.cost || 0)).toLocaleString('es-MX')}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <select\r\n                              value={newMaterial?.risk}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, risk: e?.target?.value }))}\r\n                              className=\"w-full px-2 py-1 text-sm border border-border rounded bg-background\"\r\n                            >\r\n                              <option value=\"low\">Bajo</option>\r\n                              <option value=\"medium\">Medio</option>\r\n                              <option value=\"high\">Alto</option>\r\n                            </select>\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <span className={`text-xs px-2 py-1 rounded-full ${\r\n                              newMaterial?.fromInventory \r\n                                ? 'bg-green-100 text-green-800' \r\n                                : 'bg-blue-100 text-blue-800'\r\n                            }`}>\r\n                              {newMaterial?.fromInventory ? 'Inventario' : 'Manual'}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <Button\r\n                              size=\"sm\"\r\n                              onClick={addMaterial}\r\n                              iconName=\"Plus\"\r\n                              disabled={!newMaterial?.item?.trim()}\r\n                            >\r\n                              Agregar\r\n                            </Button>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Risk Factors Section */}\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"AlertTriangle\" size={20} className=\"text-primary\" />\r\n                  <h4 className=\"text-lg font-medium\">Factores de Riesgo</h4>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                  {riskAssessment?.factors?.map((factor, index) => (\r\n                    <div key={index} className={`p-4 rounded-lg border ${getRiskColor(factor?.risk)}`}>\r\n                      <div className=\"flex items-start justify-between\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center space-x-2 mb-2\">\r\n                            <Icon name=\"AlertCircle\" size={16} />\r\n                            <h5 className=\"font-medium\">{factor?.factor}</h5>\r\n                            <span className=\"text-xs px-2 py-1 rounded-full bg-current/20\">\r\n                              Riesgo {factor?.risk === 'high' ? 'Alto' : factor?.risk === 'medium' ? 'Medio' : 'Bajo'}\r\n                            </span>\r\n                          </div>\r\n                          <p className=\"text-sm\">{factor?.mitigation}</p>\r\n                        </div>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => removeRiskFactor(index)}\r\n                          iconName=\"X\"\r\n                          className=\"text-red-600\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n\r\n                  {/* Add New Risk Factor */}\r\n                  <div className=\"p-4 border border-dashed border-border rounded-lg\">\r\n                    <div className=\"space-y-3\">\r\n                      <Input\r\n                        value={newRiskFactor?.factor}\r\n                        onChange={(e) => setNewRiskFactor(prev => ({ ...prev, factor: e?.target?.value }))}\r\n                        placeholder=\"Factor de riesgo (ej: Disponibilidad de materiales)\"\r\n                      />\r\n                      <div className=\"grid grid-cols-2 gap-2\">\r\n                        <select\r\n                          value={newRiskFactor?.risk}\r\n                          onChange={(e) => setNewRiskFactor(prev => ({ ...prev, risk: e?.target?.value }))}\r\n                          className=\"px-3 py-2 text-sm border border-border rounded-md bg-background\"\r\n                        >\r\n                          <option value=\"low\">Riesgo Bajo</option>\r\n                          <option value=\"medium\">Riesgo Medio</option>\r\n                          <option value=\"high\">Riesgo Alto</option>\r\n                        </select>\r\n                        <Button\r\n                          onClick={addRiskFactor}\r\n                          disabled={!newRiskFactor?.factor?.trim()}\r\n                          iconName=\"Plus\"\r\n                          iconPosition=\"left\"\r\n                          size=\"sm\"\r\n                        >\r\n                          Agregar Factor\r\n                        </Button>\r\n                      </div>\r\n                      <Input\r\n                        value={newRiskFactor?.mitigation}\r\n                        onChange={(e) => setNewRiskFactor(prev => ({ ...prev, mitigation: e?.target?.value }))}\r\n                        placeholder=\"Plan de mitigaci贸n\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Prevention Tools */}\r\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                <div className=\"flex items-center space-x-2 mb-3\">\r\n                  <Icon name=\"Shield\" size={20} className=\"text-green-600\" />\r\n                  <h4 className=\"font-medium text-green-800\">Prevenci贸n de Costos Extra</h4>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2 mb-3\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"prevention-enabled\"\r\n                    checked={riskAssessment?.extraCostsPrevention}\r\n                    onChange={(e) => setRiskAssessment(prev => ({ ...prev, extraCostsPrevention: e?.target?.checked }))}\r\n                    className=\"rounded border-border\"\r\n                  />\r\n                  <label htmlFor=\"prevention-enabled\" className=\"text-sm text-green-800\">\r\n                    Sistema de prevenci贸n de costos extra activado\r\n                  </label>\r\n                </div>\r\n                <p className=\"text-sm text-green-700\">\r\n                  El checklist de materiales y evaluaci贸n de riesgos ayuda a identificar posibles costos adicionales antes de la finalizaci贸n de la cotizaci贸n.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default MaterialRiskChecklist;","import React, { useRef, useEffect, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\nimport useClient from '../../../hooks/useClient';\r\nimport useProyecto from '../../../hooks/useProyect';\r\nimport useQuotation from '../../../hooks/useQuotation';\r\nimport { useNotifications } from '../../../context/NotificationContext';\r\n\r\n// Utilidades de formateo\r\nconst formatCurrency = (amount) => {\r\n  if (amount === null || amount === undefined || Number.isNaN(Number(amount))) return '$0.00';\r\n  return new Intl.NumberFormat('es-MX', {\r\n    style: 'currency',\r\n    currency: 'MXN'\r\n  }).format(Number(amount));\r\n};\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return 'Fecha no disponible';\r\n  const d = new Date(dateString);\r\n  if (Number.isNaN(d.getTime())) return 'Fecha no disponible';\r\n  return d.toLocaleDateString('es-MX', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  });\r\n};\r\n\r\n// Funci贸n para obtener la fecha actual\r\nconst getCurrentDate = () => {\r\n  const today = new Date();\r\n  return today.toLocaleDateString('es-MX', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  });\r\n};\r\n\r\nconst QuotationPreview = ({ quotation = {} }) => {\r\n  const quotationRef = useRef(null);\r\n  const [clientData, setClientData] = useState(null);\r\n  const [projectData, setProjectData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [cotizacionCompleta, setCotizacionCompleta] = useState(null);\r\n\r\n  const { getClients } = useClient();\r\n  const { getProyectos, getProyectoById } = useProyecto();\r\n  const { getCotizacionById } = useQuotation();\r\n  const { showError, showWarning } = useNotifications();\r\n  const [proyectoData, setProyectoData] = useState(null);\r\n\r\n  // Funci贸n defensiva para extraer id/nombre de arrays heterog茅neos\r\n  const safeFindIdAndName = (arr = [], idFields = ['id', 'id_cliente', 'id_proyecto'], nameFields = ['nombre', 'nombre_cliente', 'nombre_proyecto', 'empresa']) => {\r\n    if (!Array.isArray(arr)) return { id: undefined, name: undefined };\r\n    let id, name;\r\n    for (const obj of arr) {\r\n      if (!obj) continue;\r\n      for (const f of idFields) {\r\n        if (id === undefined && (obj[f] !== undefined && obj[f] !== null)) {\r\n          id = obj[f];\r\n          break;\r\n        }\r\n      }\r\n      for (const f of nameFields) {\r\n        if (!name && obj[f]) {\r\n          name = obj[f];\r\n          break;\r\n        }\r\n      }\r\n      if (id !== undefined && name) break;\r\n    }\r\n    return { id, name };\r\n  };\r\n\r\n  // Debug ligero (opcional)\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    \r\n    const fetchCotizacion = async () => {\r\n      if (!quotation?.id || cotizacionCompleta) return;\r\n      \r\n      try {\r\n        const cotizacionDetallada = await getCotizacionById(quotation.id);\r\n        if (isMounted) {\r\n          console.log('Cotizaci贸n obtenida completa:', cotizacionDetallada);\r\n          // Extraer data de la respuesta si viene encapsulada\r\n          const dataContent = cotizacionDetallada?.data || cotizacionDetallada;\r\n          console.log('Data content:', dataContent);\r\n          console.log('Fecha creaci贸n:', dataContent.fechaCreacion);\r\n          console.log('Fecha actualizaci贸n:', dataContent.fechaActualizacion);\r\n          console.log('Ultima modificaci贸n:', dataContent.ultimaModificacion);\r\n          \r\n          // Preservar las fechas originales en formato ISO\r\n          const cotizacionConFechas = {\r\n            ...dataContent,\r\n            fechaCreacion: dataContent.fechaCreacion,\r\n            fechaActualizacion: dataContent.fechaActualizacion || dataContent.ultimaModificacion\r\n          };\r\n          console.log('Cotizaci贸n con fechas:', cotizacionConFechas);\r\n          setCotizacionCompleta(cotizacionConFechas);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error al obtener la cotizaci贸n:', error);\r\n        if (isMounted) {\r\n          showError('Error al cargar los detalles de la cotizaci贸n');\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchCotizacion();\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [quotation?.id, getCotizacionById, showError]);\r\n\r\n  // Efecto para obtener datos del proyecto cuando tengamos la cotizaci贸n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const fetchProyecto = async () => {\r\n      console.log('Estado actual de cotizacionCompleta:', cotizacionCompleta);\r\n      \r\n      // Buscar el ID del proyecto en la estructura actualizada\r\n      const proyectoId = cotizacionCompleta?.projectId || \r\n                        cotizacionCompleta?.informacion_basica?.proyecto?.[0]?.id_proyecto ||\r\n                        cotizacionCompleta?.informacion_basica?.id_proyecto;\r\n\r\n      if (!proyectoId) {\r\n        console.log('No se encontr贸 el ID del proyecto en la cotizaci贸n');\r\n        // Si tenemos el nombre del proyecto pero no el ID, intentamos buscarlo en la lista de proyectos\r\n        if (cotizacionCompleta?.projectName) {\r\n          try {\r\n            const proyectos = await getProyectos();\r\n            const proyecto = proyectos?.find(p => p.nombre === cotizacionCompleta.projectName);\r\n            if (proyecto?.id) {\r\n              console.log('Se encontr贸 el proyecto por nombre:', proyecto);\r\n              if (isMounted) {\r\n                setProjectData({ data: proyecto });\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.error('Error al buscar proyecto por nombre:', error);\r\n          }\r\n        }\r\n        return;\r\n      }\r\n\r\n      try {\r\n        console.log('ID del proyecto encontrado:', proyectoId);\r\n        const proyectoDetallado = await getProyectoById(proyectoId);\r\n        console.log('Respuesta del servidor (proyecto):', proyectoDetallado);\r\n        \r\n        if (isMounted) {\r\n          setProjectData(proyectoDetallado);\r\n          console.log('ProjectData actualizado:', proyectoDetallado);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error al obtener el proyecto:', error);\r\n        if (isMounted) {\r\n          showWarning('No se pudieron cargar los detalles del proyecto');\r\n        }\r\n      }\r\n    };\r\n\r\n    if (cotizacionCompleta) {\r\n      fetchProyecto();\r\n    }\r\n    \r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [cotizacionCompleta, getProyectoById, getProyectos, showWarning]);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const normalizeList = (resp) => {\r\n      if (!resp) return [];\r\n      if (Array.isArray(resp)) return resp;\r\n      if (resp?.data?.data && Array.isArray(resp.data.data)) return resp.data.data;\r\n      if (resp?.data && Array.isArray(resp.data)) return resp.data;\r\n      return [];\r\n    };\r\n\r\n    const fetchData = async () => {\r\n      if (!quotation?.id) {\r\n        console.warn('QuotationPreview: no hay ID de cotizaci贸n, usando datos m铆nimos');\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Obtener proyectos y clientes en paralelo (si las funciones est谩n disponibles)\r\n        const [proyectosResp, clientsResp] = await Promise.allSettled([\r\n          typeof getProyectos === 'function' ? getProyectos() : Promise.resolve([]),\r\n          typeof getClients === 'function' ? getClients() : Promise.resolve([])\r\n        ]);\r\n\r\n        const proyectosList = proyectosResp.status === 'fulfilled' ? normalizeList(proyectosResp.value) : [];\r\n        const clientsList = clientsResp.status === 'fulfilled' ? normalizeList(clientsResp.value) : [];\r\n\r\n        // Intentar encontrar la cotizaci贸n completa en proyectos (si corresponde)\r\n        let cotizacionData = null;\r\n        if (quotation?.id) {\r\n          cotizacionData = proyectosList.find(p => String(p.id) === String(quotation.id)) || null;\r\n          if (!cotizacionData) {\r\n            // fallback: buscar por folio, o usar la prop quotation directamente\r\n            cotizacionData = proyectosList.find(p => String(p.folio) === String(quotation.folio)) || null;\r\n          }\r\n        }\r\n\r\n        if (!cotizacionData) {\r\n          // No se encontr贸 una cotizaci贸n \"completa\" en proyectos -> usar la prop quotation (normalizar m铆nimamente)\r\n          cotizacionData = {\r\n            ...quotation,\r\n            id: quotation.id || undefined,\r\n            folio: quotation.folio || (quotation.id ? `COT-${new Date().getFullYear()}-${quotation.id}` : `COT-${Date.now()}`),\r\n            informacion_basica: quotation.informacion_basica || quotation.informacion_cliente || {}\r\n          };\r\n        }\r\n\r\n        // Extraer cliente/proyecto desde informacion_basica de forma defensiva\r\n        const infoBasica = cotizacionData?.informacion_basica || {};\r\n        const clienteArr = infoBasica?.cliente || infoBasica?.clientes || [];\r\n        const proyectoArr = infoBasica?.proyecto || infoBasica?.proyectos || [];\r\n\r\n        const { id: clientIdFromInfo, name: clientNameFromInfo } = safeFindIdAndName(clienteArr, ['id', 'id_cliente'], ['nombre', 'empresa', 'nombre_cliente']);\r\n        const { id: projectIdFromInfo, name: projectNameFromInfo } = safeFindIdAndName(proyectoArr, ['id', 'id_proyecto'], ['nombre', 'nombre_proyecto']);\r\n\r\n        // Preferir IDs directos en la prop quotation si existen\r\n        const clientId = quotation.clientId || clientIdFromInfo || cotizacionData.clientId || undefined;\r\n        const projectId = quotation.projectId || projectIdFromInfo || cotizacionData.projectId || undefined;\r\n\r\n        // Enriquecer clientData y projectData desde los listados (si se encontraron)\r\n        const foundClient = clientId ? clientsList.find(c => String(c.id) === String(clientId)) : null;\r\n        const foundProject = projectId ? proyectosList.find(p => String(p.id) === String(projectId)) : null;\r\n\r\n        // Contacto defensivo\r\n        const contactoObj = quotation?.informacion_contacto?.[0]?.persona_contacto1?.[0] || {};\r\n\r\n        if (isMounted) {\r\n          setClientData({\r\n            ...(foundClient || {}),\r\n            id: clientId || (foundClient && foundClient.id),\r\n            empresa: (foundClient && (foundClient.empresa || foundClient.nombre)) || clientNameFromInfo || 'Cliente no especificado',\r\n            rfc: (foundClient && foundClient.rfc) || 'No disponible',\r\n            contacto: contactoObj?.Persona_de_contacto_nombre || contactoObj?.nombre || (foundClient && (foundClient.contacto || foundClient.nombre_contacto)) || 'No especificado',\r\n            email: contactoObj?.email || (foundClient && (foundClient.email || foundClient.contacto_email)) || 'No disponible',\r\n            telefono: contactoObj?.telefono || (foundClient && (foundClient.telefono || foundClient.contacto_telefono)) || 'No disponible',\r\n            ubicacion: (foundClient && foundClient.ubicacion) || {\r\n              direccion: cotizacionData?.detalles_proyecto?.ubicacion_proyecto?.[0]?.direccion || '',\r\n              ciudad: cotizacionData?.detalles_proyecto?.ubicacion_proyecto?.[0]?.municipio || '',\r\n              estado: cotizacionData?.detalles_proyecto?.ubicacion_proyecto?.[0]?.estado || ''\r\n            }\r\n          });\r\n\r\n          // Resolver cronograma defensivo\r\n          const resolvedCronograma = (foundProject && foundProject.cronograma) || (cotizacionData?.detalles_proyecto && (() => {\r\n            const tiempo = cotizacionData.detalles_proyecto.tiempo_ejecucion;\r\n            if (typeof tiempo === 'string' && tiempo.includes(' a ')) {\r\n              const [fechaInicio, fechaFin] = tiempo.split(' a ').map(s => s.trim());\r\n              return { fechaInicio, fechaFin };\r\n            }\r\n            return {\r\n              fechaInicio: cotizacionData.detalles_proyecto?.fecha_inicio,\r\n              fechaFin: cotizacionData.detalles_proyecto?.fecha_fin_estimada\r\n            };\r\n          })()) || undefined;\r\n\r\n          setProjectData({\r\n            ...(foundProject || {}),\r\n            id: projectId || (foundProject && foundProject.id),\r\n            nombre: (foundProject && (foundProject.nombre || foundProject.titulo)) || projectNameFromInfo || cotizacionData?.detalles_proyecto?.nombre_proyecto || 'Proyecto sin nombre',\r\n            descripcion: (foundProject && foundProject.descripcion) || cotizacionData?.detalles_proyecto?.descripcion_proyecto || 'Sin descripci贸n disponible',\r\n            ubicacion: (foundProject && foundProject.ubicacion) || cotizacionData?.detalles_proyecto?.ubicacion_proyecto?.[0]?.direccion || 'Ubicaci贸n no especificada',\r\n            tipoProyecto: (foundProject && foundProject.tipoProyecto) || infoBasica?.tipo_proyecto || 'No especificado',\r\n            prioridad: (foundProject && foundProject.prioridad) || infoBasica?.prioridad || 'Normal',\r\n            cronograma: resolvedCronograma,\r\n            totalPresupuesto: (foundProject && foundProject.totalPresupuesto) || cotizacionData?.detalles_proyecto?.presupuesto_estimado_mxn || cotizacionData?.totalAmount || 0\r\n          });\r\n\r\n          // Guardar cotizaci贸n completa en estado para debug o usos posteriores\r\n          setCotizacionCompleta({\r\n            ...cotizacionData,\r\n            clientId,\r\n            projectId\r\n          });\r\n        }\r\n\r\n        // Advertencias si faltan ids cr铆ticos\r\n        if (!clientId || !projectId) {\r\n          showWarning && showWarning('Faltan datos de cliente o proyecto en la cotizaci贸n. Se us贸 la informaci贸n disponible.');\r\n        }\r\n      } catch (err) {\r\n        console.error('QuotationPreview - error al cargar datos:', err);\r\n        showError && showError(err?.message || 'Error al cargar los datos de la cotizaci贸n');\r\n      } finally {\r\n        if (isMounted) setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [quotation, getProyectos, getClients, showError, showWarning]);\r\n\r\n  const handleExportPDF = async () => {\r\n    if (!quotationRef.current) return;\r\n    try {\r\n      const content = quotationRef.current;\r\n      const canvas = await html2canvas(content, {\r\n        scale: 2,\r\n        useCORS: true,\r\n        logging: false,\r\n        backgroundColor: '#ffffff'\r\n      });\r\n      const imgData = canvas.toDataURL('image/jpeg', 1.0);\r\n      const pdf = new jsPDF('p', 'mm', 'a4');\r\n      const pdfWidth = pdf.internal.pageSize.getWidth();\r\n      const pdfHeight = pdf.internal.pageSize.getHeight();\r\n      const imgWidth = canvas.width;\r\n      const imgHeight = canvas.height;\r\n      const ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight);\r\n      const imgX = (pdfWidth - imgWidth * ratio) / 2;\r\n      const imgY = 0;\r\n      pdf.addImage(imgData, 'JPEG', imgX, imgY, imgWidth * ratio, imgHeight * ratio);\r\n      pdf.save(`Cotizacion-${quotation?.id || 'nueva'}.pdf`);\r\n    } catch (error) {\r\n      console.error('Error al generar PDF:', error);\r\n      showError && showError('Error al generar PDF');\r\n    }\r\n  };\r\n\r\n  const handlePrint = () => {\r\n    try {\r\n      // Crear estilos de impresi贸n\r\n      const printStyles = `\r\n        @media print {\r\n          * {\r\n            -webkit-print-color-adjust: exact !important;\r\n            print-color-adjust: exact !important;\r\n          }\r\n          \r\n          body * {\r\n            visibility: hidden;\r\n          }\r\n          \r\n          .print-section, .print-section * {\r\n            visibility: visible;\r\n          }\r\n          \r\n          .print-section {\r\n            position: absolute;\r\n            left: 0;\r\n            top: 0;\r\n            width: 100%;\r\n          }\r\n          \r\n          @page {\r\n            size: A4;\r\n            margin: 15mm;\r\n          }\r\n          \r\n          /* Ocultar botones */\r\n          button {\r\n            display: none !important;\r\n          }\r\n          \r\n          /* Ocultar estado de la cotizaci贸n */\r\n          .space-y-6 > .bg-muted\\\\/30:last-child {\r\n            display: none !important;\r\n          }\r\n        }\r\n      `;\r\n      \r\n      const style = document.createElement('style');\r\n      style.id = 'print-styles';\r\n      style.textContent = printStyles;\r\n      document.head.appendChild(style);\r\n      \r\n      // A帽adir clase para impresi贸n\r\n      if (quotationRef.current) {\r\n        quotationRef.current.classList.add('print-section');\r\n      }\r\n      \r\n      // Dar tiempo para que se apliquen los estilos\r\n      setTimeout(() => {\r\n        window.print();\r\n        \r\n        // Limpiar despu茅s de imprimir\r\n        setTimeout(() => {\r\n          if (quotationRef.current) {\r\n            quotationRef.current.classList.remove('print-section');\r\n          }\r\n          const styleElement = document.getElementById('print-styles');\r\n          if (styleElement) {\r\n            document.head.removeChild(styleElement);\r\n          }\r\n        }, 100);\r\n      }, 100);\r\n      \r\n    } catch (error) {\r\n      console.error('Error al imprimir:', error);\r\n      showError && showError('Hubo un problema al imprimir el documento');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-xl font-semibold\">Vista Previa de Cotizaci贸n</h3>\r\n        <div className=\"flex space-x-2\">\r\n          <Button variant=\"outline\" onClick={handlePrint} iconName=\"Printer\" iconPosition=\"left\">\r\n            Imprimir\r\n          </Button>\r\n          <Button onClick={handleExportPDF} iconName=\"Download\" iconPosition=\"left\">\r\n            Exportar PDF\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div ref={quotationRef} className=\"bg-white border rounded-lg p-8 shadow-sm print:shadow-none print:border-none relative\">\r\n        {loading && (\r\n          <div className=\"absolute inset-0 bg-white/90 flex items-center justify-center z-10\">\r\n            <div className=\"flex flex-col items-center space-y-4\">\r\n              <div className=\"relative\">\r\n                <Icon name=\"Loader2\" className=\"animate-spin\" size={32} />\r\n                <Icon name=\"Wind\" className=\"absolute inset-0 m-auto opacity-30\" size={16} />\r\n              </div>\r\n              <span className=\"text-sm text-muted-foreground font-medium\">\r\n                Cargando informaci贸n de la cotizaci贸n...\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Encabezado empresa */}\r\n        <div className=\"flex items-center justify-between mb-8 pb-4 border-b\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"w-12 h-12 bg-primary rounded-lg flex items-center justify-center\">\r\n              <Icon name=\"Wind\" size={24} color=\"white\" />\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-foreground\">AireFlow Pro</h1>\r\n              <p className=\"text-muted-foreground\">Sistemas HVAC Profesionales</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-right text-sm text-muted-foreground\">\r\n            <p>RFC: AFP123456789</p>\r\n            <p>Tel: +52 55 1234 5678</p>\r\n            <p>info@aireflowpro.com</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cabecera de la cotizaci贸n */}\r\n        <div className=\"grid grid-cols-2 gap-8 mb-8\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold mb-4\">COTIZACIN</h2>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <p><span className=\"font-medium\">No. Cotizaci贸n:</span> {quotation?.folio || cotizacionCompleta?.folio || 'No disponible'}</p>\r\n              <p><span className=\"font-medium\">Fecha:</span> {getCurrentDate()}</p>\r\n              <p><span className=\"font-medium\">Vendedor:</span> {quotation?.assignedTo || cotizacionCompleta?.assignedTo || 'No asignado'}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <h3 className=\"font-semibold mb-2\">CLIENTE</h3>\r\n            <div className=\"text-sm space-y-1\">\r\n              <p className=\"font-medium\">{clientData?.empresa || clientData?.nombre || 'Cliente no especificado'}</p>\r\n              <p><span className=\"font-medium\">RFC:</span> {clientData?.rfc || 'No disponible'}</p>\r\n              <p><span className=\"font-medium\">Direcci贸n:</span> {clientData?.ubicacion ? `${clientData.ubicacion.direccion || ''}${clientData.ubicacion.ciudad ? ', ' + clientData.ubicacion.ciudad : ''}${clientData.ubicacion.estado ? ', ' + clientData.ubicacion.estado : ''}` : 'Direcci贸n no disponible'}</p>\r\n              <p><span className=\"font-medium\">Contacto:</span> {clientData?.contacto || 'No especificado'}</p>\r\n              <p><span className=\"font-medium\">Email:</span> {clientData?.email || 'No disponible'}</p>\r\n              <p><span className=\"font-medium\">Tel茅fono:</span> {clientData?.telefono || 'No disponible'}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Informaci贸n del proyecto */}\r\n        <div className=\"mb-8\">\r\n          <h3 className=\"text-lg font-semibold mb-4 text-primary\">INFORMACIN DEL PROYECTO</h3>\r\n          <div className=\"bg-muted/30 rounded-lg p-4\">\r\n            <h4 className=\"font-medium mb-2\">{projectData?.data?.nombre || projectData?.nombre || cotizacionCompleta?.projectName || 'Proyecto sin nombre'}</h4>\r\n            <p className=\"text-sm text-foreground mb-3\">{projectData?.data?.descripcion || projectData?.descripcion || cotizacionCompleta?.description || 'Sin descripci贸n disponible'}</p>\r\n            <div className=\"text-sm text-foreground space-y-2\">\r\n              <p><span className=\"font-bold\">Ubicaci贸n:</span> {\r\n                projectData?.data?.ubicacion ? \r\n                `${projectData.data.ubicacion.direccion || ''}, ${projectData.data.ubicacion.municipio || ''}, ${projectData.data.ubicacion.estado || ''}` :\r\n                (projectData?.ubicacion ? \r\n                  `${projectData.ubicacion.direccion || ''}, ${projectData.ubicacion.municipio || ''}, ${projectData.ubicacion.estado || ''}` :\r\n                  (cotizacionCompleta?.location ? \r\n                    `${cotizacionCompleta.location.direccion || ''}, ${cotizacionCompleta.location.municipio || ''}, ${cotizacionCompleta.location.estado || ''}` :\r\n                    'Ubicaci贸n no especificada'))\r\n              }</p>\r\n              <p><span className=\"font-bold\">Tipo de proyecto:</span> {(projectData?.data?.tipoProyecto || projectData?.tipoProyecto || cotizacionCompleta?.projectType || 'NO ESPECIFICADO')?.toUpperCase()}</p>\r\n              <p><span className=\"font-bold\">Prioridad:</span> {(projectData?.data?.prioridad || projectData?.prioridad || cotizacionCompleta?.priority || 'Media')}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Alcance - Comentado temporalmente\r\n        <div className=\"mb-8\">\r\n          <h3 className=\"text-lg font-semibold mb-4 text-primary\">ALCANCE DE TRABAJO</h3>\r\n          <div className=\"text-sm leading-relaxed\">\r\n            <p>{quotation?.quotationData?.scope || cotizacionCompleta?.quotationData?.scope || 'No hay alcance disponible'}</p>\r\n          </div>\r\n        </div>\r\n        */}\r\n\r\n        {/* Materiales y equipos */}\r\n        {quotation?.materials && quotation?.materials?.length > 0 && (\r\n          <div className=\"mb-8\">\r\n            <h3 className=\"text-lg font-semibold mb-4 text-primary\">MATERIALES Y EQUIPOS</h3>\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full text-sm border border-border\">\r\n                <thead className=\"bg-muted/50\">\r\n                  <tr>\r\n                    <th className=\"px-4 py-2 text-left border border-border\">Descripci贸n</th>\r\n                    <th className=\"px-4 py-2 text-left border border-border\">Cantidad</th>\r\n                    <th className=\"px-4 py-2 text-right border border-border\">Precio Unit.</th>\r\n                    <th className=\"px-4 py-2 text-right border border-border\">Total</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {quotation.materials.map((material, index) => {\r\n                    const qty = Number(material?.quantity) || 0;\r\n                    const cost = Number(material?.cost) || 0;\r\n                    const unit = qty > 0 ? cost / qty : cost;\r\n                    return (\r\n                      <tr key={index}>\r\n                        <td className=\"px-4 py-2 border border-border\">{material?.item || '-'}</td>\r\n                        <td className=\"px-4 py-2 border border-border\">{qty || '-'}</td>\r\n                        <td className=\"px-4 py-2 text-right border border-border\">{formatCurrency(unit)}</td>\r\n                        <td className=\"px-4 py-2 text-right border border-border\">{formatCurrency(cost)}</td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                  <tr className=\"bg-muted/30 font-semibold\">\r\n                    <td colSpan=\"3\" className=\"px-4 py-2 text-right border border-border\">SUBTOTAL:</td>\r\n                    <td className=\"px-4 py-2 text-right border border-border\">{formatCurrency(quotation.materials.reduce((sum, m) => sum + (Number(m?.cost) || 0), 0))}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Cronograma y condiciones */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold mb-4 text-primary\">CRONOGRAMA</h3>\r\n            <div className=\"bg-muted/30 rounded-lg p-4 text-sm\">\r\n              <p><span className=\"font-medium\">Tiempo de ejecuci贸n:</span> {projectData?.cronograma ? `${projectData.cronograma.fechaInicio || '-'} a ${projectData.cronograma.fechaFin || '-'}` : 'No especificado'}</p>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold mb-4 text-primary\">CONDICIONES COMERCIALES</h3>\r\n            <div className=\"bg-muted/30 rounded-lg p-4 text-sm\">\r\n              <p> Precio sujeto a cambios sin previo aviso</p>\r\n              <p> Forma de pago: 50% anticipo, 50% contra entrega</p>\r\n              <p> Tiempo de entrega: seg煤n cronograma</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Total */}\r\n        <div className=\"bg-primary/10 rounded-lg p-6 mb-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div><h3 className=\"text-xl font-semibold text-primary\">INVERSIN TOTAL</h3></div>\r\n            <div className=\"text-right\">\r\n              <div className=\"text-3xl font-bold text-primary\">{formatCurrency(\r\n                (projectData?.data?.totalPresupuesto || projectData?.totalPresupuesto || cotizacionCompleta?.quotationData?.totalAmount || 0) +\r\n                (quotation?.materials?.reduce((sum, m) => sum + (Number(m?.cost) || 0), 0) || 0)\r\n              )}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"border-t pt-4 text-center text-sm text-muted-foreground\">\r\n          <p>Gracias por la confianza en AireFlow Pro</p>\r\n          <p>Para cualquier consulta, contacte a: {quotation?.assignedTo || quotation?.asignado || '-'}</p>\r\n          <p className=\"mt-2 font-medium\">Esta cotizaci贸n cumple con la normativa mexicana vigente</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Estado de la cotizaci贸n */}\r\n      <div className=\"bg-muted/30 rounded-lg p-4\">\r\n        <h4 className=\"font-medium mb-2\">Estado de la Cotizaci贸n</h4>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\r\n          <div className=\"flex items-center space-x-2\"><Icon name=\"Calendar\" size={16} className=\"text-muted-foreground\" /><span>Creada: {cotizacionCompleta?.createdDate || cotizacionCompleta?.fechaCreacion || quotation?.createdDate || 'Fecha no disponible'}</span></div>\r\n          <div className=\"flex items-center space-x-2\"><Icon name=\"Clock\" size={16} className=\"text-muted-foreground\" /><span>Modificada: {cotizacionCompleta?.lastModified || cotizacionCompleta?.fechaActualizacion || quotation?.lastModified || 'Fecha no disponible'}</span></div>\r\n          <div className=\"flex items-center space-x-2\"><Icon name=\"User\" size={16} className=\"text-muted-foreground\" /><span>Versi贸n: {quotation?.revisions?.[quotation?.revisions?.length - 1]?.version || '1.0'}</span></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationPreview;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport useCommunication from '../../../hooks/useCommunication';\r\nimport useClient from '../../../hooks/useClient';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\n        const ClientCommunication = ({ quotation, onAddCommunication }) => {\r\n          const [newCommunication, setNewCommunication] = useState({\r\n            type: 'email',\r\n            subject: '',\r\n            content: '',\r\n            urgency: 'normal',\r\n          });\r\n          const { createCotizacionCommunication, getComunicacionesByCliente, getComunicacionByCotizacionId, loading } = useCommunication();\r\n\r\n          const [showHistory, setShowHistory] = useState(true);\r\n          const [clientHistory, setClientHistory] = useState([]);\r\n          const historyRef = useRef(null);\r\n          // Mostrar historial de comunicaci贸n por cotizaci贸n\r\n          useEffect(() => {\r\n            if (quotation?.id) {\r\n              getComunicacionByCotizacionId(quotation.id).then((res) => {\r\n                if (res && res.data && Array.isArray(res.data)) {\r\n                  setClientHistory(res.data);\r\n                } else {\r\n                  setClientHistory([]);\r\n                }\r\n              });\r\n            } else {\r\n              setClientHistory([]);\r\n            }\r\n          }, [quotation?.id]);\r\n\r\n          const handleInputChange = (field, value) => {\r\n            setNewCommunication(prev => ({ ...prev, [field]: value }));\r\n          };\r\n\r\n          const handleSendCommunication = () => {\r\n            if (!newCommunication?.subject?.trim() || !newCommunication?.content?.trim()) return;\r\n\r\n            // console.log eliminado\r\n            const idCliente = quotation?.clientId\r\n              || quotation?.informacion_basica?.cliente?.find?.(c => 'id_cliente' in c)?.id_cliente\r\n              || '';\r\n            const commData = {\r\n              tipoComunicacion: newCommunication.type,\r\n              nivelUrgencia: newCommunication.urgency,\r\n              asunto: newCommunication.subject,\r\n              mensaje: newCommunication.content,\r\n              idCliente,\r\n              idCotizacion: quotation?.id,\r\n            };\r\n            // console.log eliminado\r\n            createCotizacionCommunication(commData).then((data) => {\r\n              if (data) {\r\n                setNewCommunication({\r\n                  type: 'email',\r\n                  subject: '',\r\n                  content: '',\r\n                  urgency: 'normal',\r\n                });\r\n                // Recargar 煤nicamente el historial desde el backend\r\n                if (quotation?.id) {\r\n                  getComunicacionByCotizacionId(quotation.id).then((res) => {\r\n                    if (res && res.data && Array.isArray(res.data)) {\r\n                      setClientHistory(res.data);\r\n                      setShowHistory(true);\r\n                      // Hacer scroll al tope para mostrar el 煤ltimo mensaje (suponiendo orden descendente)\r\n                      setTimeout(() => {\r\n                        if (historyRef.current) {\r\n                          historyRef.current.scrollTo({ top: 0, behavior: 'smooth' });\r\n                        }\r\n                      }, 120);\r\n                    }\r\n                  }).catch(() => {\r\n                    // Fallback: insertar la comunicaci贸n si la recarga falla\r\n                    setClientHistory(prev => [data, ...(prev || [])]);\r\n                    setShowHistory(true);\r\n                  });\r\n                } else {\r\n                  // Si no hay id de cotizaci贸n, insertar localmente\r\n                  setClientHistory(prev => [data, ...(prev || [])]);\r\n                  setShowHistory(true);\r\n                }\r\n                // Callback externo si existe\r\n                onAddCommunication?.(data);\r\n              }\r\n            });\r\n          };\r\n\r\n          const handleQuotationSend = () => {\r\n            const quotationComm = {\r\n              type: 'email',\r\n              subject: `Cotizaci贸n ${quotation?.id} - ${quotation?.projectName}`,\r\n              content: `Estimado cliente,\\n\\nAdjunto encontrar谩 la cotizaci贸n solicitada para el proyecto \"${quotation?.projectName}\".\\n\\nQuedamos a su disposici贸n para cualquier aclaraci贸n.\\n\\nSaludos cordiales,\\n${quotation?.assignedTo}\\nAireFlow Pro`,\r\n              urgency: 'high',\r\n              hasAttachments: true,\r\n              attachments: [`Cotizacion_${quotation?.id}.pdf`]\r\n            };\r\n\r\n            onAddCommunication?.(quotationComm);\r\n          };\r\n\r\n          const getUrgencyColor = (urgency) => {\r\n            switch (urgency) {\r\n              case 'urgent': return 'text-red-600 bg-red-50';\r\n              case 'high': return 'text-orange-600 bg-orange-50';\r\n              case 'normal': return 'text-blue-600 bg-blue-50';\r\n              default: return 'text-gray-600 bg-gray-50';\r\n            }\r\n          };\r\n\r\n          const getTypeIcon = (type) => {\r\n            switch (type) {\r\n              case 'whatsapp': return 'MessageCircle';\r\n              case 'email': return 'Mail';\r\n              case 'phone': return 'Phone';\r\n              default: return 'MessageSquare';\r\n            }\r\n          };\r\n\r\n          return (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-xl font-semibold\">Comunicaci贸n con Cliente</h3>\r\n                <div className=\"flex space-x-2\">\r\n                  {/* Bot贸n comentado: Enviar Cotizaci贸n (se dej贸 comentado para posible uso futuro)\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={handleQuotationSend}\r\n                    iconName=\"Send\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Enviar Cotizaci贸n\r\n                  </Button>\r\n                  */}\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => setShowHistory(!showHistory)}\r\n                    iconName={showHistory ? 'EyeOff' : 'Eye'}\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    {showHistory ? 'Ocultar' : 'Ver'} Historial\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Communication History */}\r\n              {showHistory && (\r\n                <div className=\"space-y-4\">\r\n                  <h4 className=\"font-medium flex items-center space-x-2\">\r\n                    <Icon name=\"History\" size={16} />\r\n                    <span>Historial de Comunicaciones</span>\r\n                  </h4>\r\n                  \r\n                  <div ref={historyRef} className=\"max-h-96 overflow-y-auto space-y-3 bg-muted/20 rounded-lg p-4\">\r\n                    {clientHistory.length > 0 ? (\r\n                      clientHistory.map((comm) => (\r\n                        <div key={comm.id} className=\"bg-white rounded-lg p-4 border\">\r\n                          <div className=\"flex items-start justify-between mb-2\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <Icon \r\n                                name={getTypeIcon(comm.tipoComunicacion)} \r\n                                size={16} \r\n                                className={`${comm.tipoComunicacion === 'whatsapp' ? 'text-green-600' : 'text-blue-600'}`} \r\n                              />\r\n                              <span className=\"font-medium text-sm\">{comm.asunto || 'Sin asunto'}</span>\r\n                              <span className={`px-2 py-1 text-xs rounded ${getUrgencyColor(comm.nivelUrgencia)}`}>\r\n                                {comm.nivelUrgencia === 'urgente' ? 'Urgente' : comm.nivelUrgencia === 'alta' ? 'Alta' : 'Normal'}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <span className=\"text-xs text-muted-foreground\">\r\n                                {new Date(parseInt(comm.id)).toLocaleString('es-MX', {\r\n                                  year: 'numeric',\r\n                                  month: '2-digit',\r\n                                  day: '2-digit',\r\n                                  hour: '2-digit',\r\n                                  minute: '2-digit'\r\n                                })}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                          <p className=\"text-sm text-foreground leading-relaxed whitespace-pre-line\">{comm.mensaje}</p>\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <div className=\"text-center py-8\">\r\n                        <Icon name=\"Inbox\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                        <p className=\"text-sm text-muted-foreground\">Sin comunicaciones registradas</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* New Communication Form */}\r\n              <div className=\"bg-card border rounded-lg p-6\">\r\n                <h4 className=\"font-medium mb-4 flex items-center space-x-2\">\r\n                  <Icon name=\"Edit3\" size={16} />\r\n                  <span>Nueva Comunicaci贸n</span>\r\n                </h4>\r\n                \r\n                <div className=\"space-y-4\">\r\n                  {/* Communication Type and Urgency */}\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"text-sm font-medium mb-2 block\">Canal de Comunicaci贸n</label>\r\n                      <select\r\n                        value={newCommunication?.type}\r\n                        onChange={(e) => handleInputChange('type', e?.target?.value)}\r\n                        className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background\"\r\n                      >\r\n                        <option value=\"email\">Correo Electr贸nico</option>\r\n                        <option value=\"whatsapp\">WhatsApp</option>\r\n                        <option value=\"llamada\">Llamada Telef贸nica</option>\r\n                      </select>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-sm font-medium mb-2 block\">Nivel de Urgencia</label>\r\n                      <select\r\n                        value={newCommunication?.urgency}\r\n                        onChange={(e) => handleInputChange('urgency', e?.target?.value)}\r\n                        className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background\"\r\n                      >\r\n                        <option value=\"normal\">Normal</option>\r\n                        <option value=\"alta\">Alta</option>\r\n                        <option value=\"urgente\">Urgente</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Subject */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Asunto</label>\r\n                    <Input\r\n                      value={newCommunication?.subject}\r\n                      onChange={(e) => handleInputChange('subject', e?.target?.value)}\r\n                      placeholder=\"Asunto de la comunicaci贸n\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Content */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Mensaje</label>\r\n                    <textarea\r\n                      value={newCommunication?.content}\r\n                      onChange={(e) => handleInputChange('content', e?.target?.value)}\r\n                      placeholder=\"Escribir mensaje al cliente...\"\r\n                      rows={6}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Opci贸n de anexos eliminada por requerimiento */}\r\n\r\n                  {/* Quick Templates */}\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"text-sm font-medium\">Plantillas R谩pidas</label>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          handleInputChange('subject', 'Solicitud de aclaraciones t茅cnicas');\r\n                          handleInputChange('content', 'Estimado cliente,\\n\\nPara elaborar la cotizaci贸n m谩s precisa, necesitamos algunas aclaraciones t茅cnicas adicionales:\\n\\n1. \\n2. \\n3. \\n\\nQuedamos en espera de su respuesta.\\n\\nSaludos cordiales.');\r\n                        }}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Solicitar Aclaraciones\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          handleInputChange('subject', 'Seguimiento de cotizaci贸n');\r\n                          handleInputChange('content', 'Estimado cliente,\\n\\nEsperamos que se encuentre bien. Nos ponemos en contacto para dar seguimiento a la cotizaci贸n enviada.\\n\\n驴Ha tenido oportunidad de revisar nuestra propuesta?\\n\\nQuedamos a su disposici贸n para cualquier duda o aclaraci贸n.\\n\\nSaludos cordiales.');\r\n                        }}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Seguimiento\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          handleInputChange('subject', 'Confirmaci贸n de costos adicionales');\r\n                          handleInputChange('content', 'Estimado cliente,\\n\\nDespu茅s de la revisi贸n t茅cnica, hemos identificado algunos trabajos adicionales necesarios:\\n\\n[Descripci贸n del trabajo adicional]\\nCosto adicional: $XXX MXN\\nTiempo adicional: XX d铆as\\n\\nSolicito su confirmaci贸n para proceder.\\n\\nSaludos cordiales.');\r\n                        }}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Confirmar Extras\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Send Button */}\r\n                  <div className=\"flex items-center justify-between pt-4 border-t border-border\">\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      Cliente: {quotation?.clientName} - {quotation?.contactInfo?.email}\r\n                    </div>\r\n                    <Button\r\n                      onClick={handleSendCommunication}\r\n                      disabled={!newCommunication?.subject?.trim() || !newCommunication?.content?.trim() || loading}\r\n                      iconName=\"Send\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Enviar Comunicaci贸n\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default ClientCommunication;","import React, { useEffect, useState } from 'react';\r\nimport useQuotation from '../../../hooks/useQuotation';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst RevisionHistory = ({ quotation }) => {\r\n  const { getRevision } = useQuotation();\r\n  const [revisionData, setRevisionData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [expandedAreas, setExpandedAreas] = useState({});\r\n\r\n  const toggleArea = (area) => {\r\n    setExpandedAreas(prev => ({\r\n      ...prev,\r\n      [area]: !prev[area]\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (quotation?.id) {\r\n      setLoading(true);\r\n      getRevision({ idCotizacion: quotation.id })\r\n        .then(response => {\r\n          if (response?.areasRevision) {\r\n            const formattedData = {\r\n              success: true,\r\n              data: [response]\r\n            };\r\n            setRevisionData(formattedData);\r\n          } else {\r\n            setRevisionData(null);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error al obtener revisiones:', error);\r\n          setRevisionData(null);\r\n        })\r\n        .finally(() => {\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      setRevisionData(null);\r\n    }\r\n  }, [quotation?.id]);\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    return new Date(dateString).toLocaleString('es-MX', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <Icon name=\"Loader\" className=\"animate-spin\" size={24} />\r\n        <span className=\"ml-2\">Cargando revisiones...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-xl font-semibold\">Historial de Revisiones</h3>\r\n        <div className=\"text-sm text-muted-foreground\">\r\n          Versi贸n actual: 1.0\r\n        </div>\r\n      </div>\r\n\r\n      {/* Timeline of Revisions */}\r\n      <div className=\"space-y-6\">\r\n        {revisionData?.data?.[0]?.areasRevision ? (\r\n          Object.entries(revisionData.data[0].areasRevision)\r\n            .sort(([a], [b]) => {\r\n              if (a === '_comentariosGenerales') return 1;\r\n              if (b === '_comentariosGenerales') return -1;\r\n              return a.localeCompare(b);\r\n            })\r\n            .map(([area, revisiones]) => (\r\n              <div key={area} className=\"bg-card border rounded-lg overflow-hidden\">\r\n                <button \r\n                  onClick={() => toggleArea(area)}\r\n                  className=\"w-full bg-muted/10 px-4 py-3 border-b hover:bg-muted/20 transition-colors\"\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <h4 className=\"font-medium flex items-center space-x-2\">\r\n                      <Icon name={\r\n                        area === \"Precios y Costos\" ? \"DollarSign\" :\r\n                        area === \"Alcance y Supuestos\" ? \"FileText\" :\r\n                        area === \"Cronograma\" ? \"Calendar\" :\r\n                        area === \"Aspectos T茅cnicos\" ? \"Tool\" :\r\n                        area === \"_comentariosGenerales\" ? \"MessageCircle\" : \"Folder\"\r\n                      } size={16} />\r\n                      <span>{area === \"_comentariosGenerales\" ? \"Comentarios Generales\" : area}</span>\r\n                    </h4>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        {Object.keys(revisiones).length} {Object.keys(revisiones).length === 1 ? 'revisi贸n' : 'revisiones'}\r\n                      </span>\r\n                      <Icon \r\n                        name={expandedAreas[area] ? \"ChevronUp\" : \"ChevronDown\"} \r\n                        size={16} \r\n                        className=\"text-muted-foreground\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n                \r\n                <div className={`divide-y ${!expandedAreas[area] ? 'hidden' : ''}`}>\r\n                  {Object.entries(revisiones).map(([fecha, revision]) => (\r\n                    <div key={fecha} className=\"p-4 hover:bg-muted/5 transition-colors\">\r\n                      <div className=\"flex items-start justify-between mb-2\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {revision.revisor && (\r\n                            <span className=\"text-sm font-medium text-foreground\">\r\n                              {revision.revisor}\r\n                            </span>\r\n                          )}\r\n                          {revision.estado && (\r\n                            <span className={`px-2 py-0.5 text-xs rounded-full ${\r\n                              revision.estado === \"Actualizado\" ? \"bg-green-100 text-green-700\" :\r\n                              revision.estado === \"Pendiente\" ? \"bg-yellow-100 text-yellow-700\" :\r\n                              \"bg-blue-100 text-blue-700\"\r\n                            }`}>\r\n                              {revision.estado}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                          {formatDate(revision.fecha)}\r\n                        </span>\r\n                      </div>\r\n                      <p className=\"text-sm text-foreground whitespace-pre-line\">\r\n                        {revision.descripcion || revision.comentarios}\r\n                      </p>\r\n                      {revision.revisado !== undefined && (\r\n                        <div className=\"mt-2 flex items-center space-x-2 text-xs text-muted-foreground\">\r\n                          <Icon name={revision.revisado ? \"CheckCircle\" : \"Clock\"} size={12} />\r\n                          <span>{revision.revisado ? \"Revisado\" : \"Pendiente de revisi贸n\"}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ))\r\n        ) : (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"GitBranch\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n            <h4 className=\"font-medium text-foreground mb-1\">Sin revisiones</h4>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Las revisiones aparecer谩n aqu铆 cuando se realicen cambios\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Revision Statistics */}\r\n      <div className=\"bg-muted/30 rounded-lg p-4\">\r\n        <h4 className=\"font-medium mb-3\">Estad铆sticas de Revisi贸n</h4>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"GitCommit\" size={16} className=\"text-muted-foreground\" />\r\n            <span>Total de revisiones: {\r\n              revisionData?.data?.[0]?.areasRevision ? \r\n              Object.keys(revisionData.data[0].areasRevision).length : 0\r\n            }</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Calendar\" size={16} className=\"text-muted-foreground\" />\r\n            <span>ltima actualizaci贸n: {formatDate(revisionData?.data?.[0]?.fechaActualizacion)}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Clock\" size={16} className=\"text-muted-foreground\" />\r\n            <span>Fecha creaci贸n: {formatDate(revisionData?.data?.[0]?.fechaCreacion)}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Change Tracking */}\r\n      <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n        <div className=\"flex items-center space-x-2 mb-2\">\r\n          <Icon name=\"Shield\" size={16} className=\"text-green-600\" />\r\n          <span className=\"font-medium text-green-800\">Trazabilidad Completa</span>\r\n        </div>\r\n        <p className=\"text-sm text-green-700\">\r\n          Todos los cambios son registrados autom谩ticamente para mantener un historial completo de la cotizaci贸n.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RevisionHistory;","import React, { useState } from 'react';\r\nimport { useNotifications } from '../../../context/NotificationContext';\r\nimport useQuotation from '../../../hooks/useQuotation';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        import Input from '../../../components/ui/Input';\r\n\r\n        const InternalReview = ({ quotation, onSubmitReview }) => {\r\n          const { showSuccess, showError } = useNotifications();\r\n          const { upsertRevision } = useQuotation();\r\n          \r\n          //  Funci贸n para verificar si un 谩rea tiene datos v谩lidos\r\n          const areaTieneDatos = (area) => {\r\n            if (!area || typeof area !== 'object') return false;\r\n            \r\n            // Tiene comentarios con contenido\r\n            const tieneComentarios = area.comentarios && \r\n                                    typeof area.comentarios === 'string' && \r\n                                    area.comentarios.trim().length > 0;\r\n            \r\n            // Est谩 marcado como revisado\r\n            const estaRevisado = area.revisado === true;\r\n            \r\n            // Tiene revisor asignado\r\n            const tieneRevisor = area.revisor && \r\n                                typeof area.revisor === 'string' && \r\n                                area.revisor.trim().length > 0;\r\n            \r\n            // Es v谩lida si tiene comentarios O est谩 revisado O tiene revisor\r\n            return tieneComentarios || estaRevisado || tieneRevisor;\r\n          };\r\n          \r\n          //  Funci贸n para filtrar solo 谩reas con datos reales\r\n          const filtrarAreasConDatos = (areasRevision) => {\r\n            const areasFiltradas = {};\r\n            \r\n            Object.entries(areasRevision || {}).forEach(([key, value]) => {\r\n              if (areaTieneDatos(value)) {\r\n                areasFiltradas[key] = value;\r\n              }\r\n            });\r\n            \r\n            return areasFiltradas;\r\n          };\r\n          \r\n          // Funci贸n para enviar la revisi贸n al backend\r\n          const sendRevisionToBackend = async (reviewData) => {\r\n            try {\r\n              const fechaHoy = new Date().toISOString().split('T')[0];\r\n              \r\n              // Mapeo de nombres de 谩reas\r\n              const areaMap = {\r\n                preciosYCostos: 'Precios y Costos',\r\n                alcanceYSupuestos: 'Alcance y Supuestos',\r\n                cronograma: 'Cronograma',\r\n                aspectosTecnicos: 'Aspectos T茅cnicos'\r\n              };\r\n              \r\n              //  FILTRAR 谩reas antes de construir el payload\r\n              const areasFiltradas = filtrarAreasConDatos(reviewData?.areasRevision);\r\n              \r\n              // Verificar si hay comentarios generales con contenido\r\n              const tieneComentariosGenerales = overallComments && \r\n                                               typeof overallComments === 'string' && \r\n                                               overallComments.trim().length > 0;\r\n              \r\n              //  Si no hay datos v谩lidos para enviar, mostrar error\r\n              if (Object.keys(areasFiltradas).length === 0 && !tieneComentariosGenerales) {\r\n                showError('Debes completar al menos un 谩rea de revisi贸n o agregar comentarios generales');\r\n                return;\r\n              }\r\n              \r\n              // Construir el objeto de revisi贸n solo con 谩reas que tienen datos\r\n              const areasRevision = {};\r\n              Object.entries(areasFiltradas).forEach(([key, value]) => {\r\n                const areaName = areaMap[key] || key;\r\n                areasRevision[areaName] = {\r\n                  [fechaHoy]: {\r\n                    revisor: value?.revisor?.trim() || '',\r\n                    revisado: value?.revisado || false,\r\n                    comentarios: value?.comentarios?.trim() || '',\r\n                    fecha: fechaHoy\r\n                  }\r\n                };\r\n              });\r\n              \r\n              const revisionPayload = {\r\n                idCotizacion: quotation?.id,\r\n                areasRevision,\r\n                comentariosGenerales: tieneComentariosGenerales ? overallComments.trim() : undefined\r\n              };\r\n              \r\n              await upsertRevision(revisionPayload);\r\n              showSuccess('Revisi贸n enviada correctamente');\r\n            } catch (err) {\r\n              showError('Error al enviar la revisi贸n');\r\n              console.error('Error:', err);\r\n            }\r\n          };\r\n          const [reviewData, setReviewData] = useState(quotation?.internalReview || {\r\n            status: 'pending',\r\n            areasRevision: {\r\n              preciosYCostos: { revisado: false, revisor: '', comentarios: '' },\r\n              alcanceYSupuestos: { revisado: false, revisor: '', comentarios: '' },\r\n              cronograma: { revisado: false, revisor: '', comentarios: '' },\r\n              aspectosTecnicos: { revisado: false, revisor: '', comentarios: '' }\r\n            }\r\n          });\r\n\r\n          const [overallComments, setOverallComments] = useState('');\r\n\r\n          const reviewAreas = [\r\n            { \r\n              key: 'preciosYCostos', \r\n              name: 'Precios y Costos', \r\n              icon: 'DollarSign',\r\n              description: 'Revisi贸n de precios competitivos y m谩rgenes'\r\n            },\r\n            { \r\n              key: 'alcanceYSupuestos', \r\n              name: 'Alcance y Supuestos', \r\n              icon: 'FileText',\r\n              description: 'Validaci贸n del alcance definido y supuestos'\r\n            },\r\n            { \r\n              key: 'cronograma', \r\n              name: 'Cronograma', \r\n              icon: 'Calendar',\r\n              description: 'Evaluaci贸n de tiempos de ejecuci贸n'\r\n            },\r\n            { \r\n              key: 'aspectosTecnicos', \r\n              name: 'Aspectos T茅cnicos', \r\n              icon: 'Settings',\r\n              description: 'Revisi贸n de soluci贸n t茅cnica propuesta'\r\n            }\r\n          ];\r\n\r\n          const handleAreaChange = (area, field, value) => {\r\n            setReviewData(prev => ({\r\n              ...prev,\r\n              areasRevision: {\r\n                ...prev?.areasRevision,\r\n                [area]: {\r\n                  ...prev?.areasRevision?.[area],\r\n                  [field]: value\r\n                }\r\n              }\r\n            }));\r\n          };\r\n\r\n          const handleSubmitForReview = () => {\r\n            const updatedReview = {\r\n              ...reviewData,\r\n              status: 'in-review',\r\n              submittedDate: new Date()?.toISOString()?.split('T')?.[0],\r\n              submittedBy: quotation?.assignedTo\r\n            };\r\n            onSubmitReview?.(updatedReview);\r\n            sendRevisionToBackend(updatedReview);\r\n          };\r\n\r\n          const handleApproveReview = () => {\r\n            const allAreasReviewed = Object.values(reviewData?.areasRevision)?.every(area => area?.revisado);\r\n            if (!allAreasReviewed) {\r\n              alert('Todas las 谩reas deben ser revisadas antes de la aprobaci贸n');\r\n              return;\r\n            }\r\n            const approvedReview = {\r\n              ...reviewData,\r\n              status: 'approved',\r\n              approvedDate: new Date()?.toISOString()?.split('T')?.[0],\r\n              approvedBy: 'Ventas/Mart铆n', // This would come from current user\r\n              overallComments\r\n            };\r\n            onSubmitReview?.(approvedReview);\r\n            sendRevisionToBackend(approvedReview);\r\n          };\r\n\r\n          const getStatusColor = (status) => {\r\n            switch (status) {\r\n              case 'approved': return 'text-green-600 bg-green-50 border-green-200';\r\n              case 'in-review': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\r\n              case 'rejected': return 'text-red-600 bg-red-50 border-red-200';\r\n              case 'pending': return 'text-gray-600 bg-gray-50 border-gray-200';\r\n              default: return 'text-gray-600 bg-gray-50 border-gray-200';\r\n            }\r\n          };\r\n\r\n          const getCompletionPercentage = () => {\r\n            const totalAreas = Object.keys(reviewData?.areasRevision)?.length;\r\n            const reviewedAreas = Object.values(reviewData?.areasRevision)?.filter(area => area?.revisado)?.length;\r\n            return Math.round((reviewedAreas / totalAreas) * 100);\r\n          };\r\n\r\n          return (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-semibold\">Revisi贸n Comercial Interna</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Validaci贸n de precios, alcances y tiempos antes del env铆o al cliente\r\n                  </p>\r\n                </div>\r\n                <div className={`px-3 py-1 text-sm rounded-full border ${getStatusColor(reviewData?.status)}`}>\r\n                  {reviewData?.status === 'approved' ? 'Aprobada' :\r\n                   reviewData?.status === 'in-review' ? 'En Revisi贸n' :\r\n                   reviewData?.status === 'rejected' ? 'Rechazada' : 'Pendiente'}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Review Progress */}\r\n              <div className=\"bg-card border rounded-lg p-4\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"font-medium\">Progreso de Revisi贸n</span>\r\n                  <span className=\"text-sm text-muted-foreground\">{getCompletionPercentage()}% completado</span>\r\n                </div>\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                  <div \r\n                    className=\"bg-primary h-2 rounded-full transition-all\"\r\n                    style={{ width: `${getCompletionPercentage()}%` }}\r\n                  ></div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Review Areas */}\r\n              <div className=\"space-y-4\">\r\n                <h4 className=\"font-medium\">reas de Revisi贸n</h4>\r\n                \r\n                {reviewAreas?.map((area) => (\r\n                  <div key={area?.key} className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-start space-x-4\">\r\n                      {/* Area Icon and Info */}\r\n                      <div className=\"flex-shrink-0\">\r\n                        <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${\r\n                          reviewData?.areasRevision?.[area?.key]?.revisado \r\n                            ? 'bg-green-100 text-green-600' :'bg-muted text-muted-foreground'\r\n                        }`}>\r\n                          <Icon name={area?.icon} size={20} />\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Area Content */}\r\n                      <div className=\"flex-1 space-y-3\">\r\n                        <div>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <h5 className=\"font-medium\">{area?.name}</h5>\r\n                            {reviewData?.areasRevision?.[area?.key]?.revisado && (\r\n                              <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                            )}\r\n                          </div>\r\n                          <p className=\"text-sm text-muted-foreground\">{area?.description}</p>\r\n                        </div>\r\n\r\n                        {/* Reviewer Input */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                          <div>\r\n                            <label className=\"text-sm font-medium mb-1 block\">Revisor</label>\r\n                            <Input\r\n                              value={reviewData?.areasRevision?.[area?.key]?.revisor}\r\n                              onChange={(e) => handleAreaChange(area?.key, 'revisor', e?.target?.value)}\r\n                              placeholder=\"Nombre del revisor\"\r\n                              size=\"sm\"\r\n                            />\r\n                          </div>\r\n                          <div className=\"flex items-end\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                id={`reviewed-${area?.key}`}\r\n                                checked={reviewData?.areasRevision?.[area?.key]?.revisado}\r\n                                onChange={(e) => handleAreaChange(area?.key, 'revisado', e?.target?.checked)}\r\n                                className=\"rounded border-border\"\r\n                              />\r\n                              <label htmlFor={`reviewed-${area?.key}`} className=\"text-sm\">\r\n                                Revisado\r\n                              </label>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Comments */}\r\n                        <div>\r\n                          <label className=\"text-sm font-medium mb-1 block\">Comentarios</label>\r\n                          <textarea\r\n                            value={reviewData?.areasRevision?.[area?.key]?.comentarios}\r\n                            onChange={(e) => handleAreaChange(area?.key, 'comentarios', e?.target?.value)}\r\n                            placeholder=\"Comentarios y observaciones...\"\r\n                            rows={2}\r\n                            className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Overall Comments */}\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium\">Comentarios Generales</label>\r\n                <textarea\r\n                  value={overallComments}\r\n                  onChange={(e) => setOverallComments(e?.target?.value)}\r\n                  placeholder=\"Comentarios generales sobre la cotizaci贸n...\"\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                />\r\n              </div>\r\n\r\n              {/* Review Actions */}\r\n              <div className=\"flex items-center justify-between pt-4 border-t border-border\">\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {reviewData?.approvedDate && (\r\n                    <p>Aprobada el {reviewData?.approvedDate} por {reviewData?.approvedBy}</p>\r\n                  )}\r\n                  {reviewData?.submittedDate && reviewData?.status !== 'approved' && (\r\n                    <p>Enviada para revisi贸n el {reviewData?.submittedDate}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"flex space-x-2\">\r\n                  {reviewData?.status === 'pending' && (\r\n                    <Button\r\n                      onClick={handleSubmitForReview}\r\n                      iconName=\"Send\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Enviar para Revisi贸n\r\n                    </Button>\r\n                  )}\r\n                  \r\n                  {reviewData?.status === 'in-review' && (\r\n                    <>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => onSubmitReview?.({ ...reviewData, status: 'rejected' })}\r\n                        iconName=\"X\"\r\n                        iconPosition=\"left\"\r\n                      >\r\n                        Rechazar\r\n                      </Button>\r\n                      <Button\r\n                        onClick={handleApproveReview}\r\n                        iconName=\"CheckCircle\"\r\n                        iconPosition=\"left\"\r\n                      >\r\n                        Aprobar\r\n                      </Button>\r\n                    </>\r\n                  )}\r\n\r\n                  {reviewData?.status === 'approved' && (\r\n                    <div className=\"flex items-center space-x-2 text-green-600\">\r\n                      <Icon name=\"CheckCircle\" size={16} />\r\n                      <span className=\"text-sm font-medium\">Cotizaci贸n aprobada</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Review Guidelines */}\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                <div className=\"flex items-center space-x-2 mb-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-blue-600\" />\r\n                  <span className=\"font-medium text-blue-800\">Criterios de Revisi贸n</span>\r\n                </div>\r\n                <ul className=\"text-sm text-blue-700 space-y-1\">\r\n                  <li> Verificar competitividad de precios en el mercado</li>\r\n                  <li> Validar que el alcance est茅 completo y bien definido</li>\r\n                  <li> Confirmar que los tiempos de ejecuci贸n sean realistas</li>\r\n                  <li> Revisar viabilidad t茅cnica de la soluci贸n propuesta</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default InternalReview;","import { useNotifications } from '../../../context/NotificationContext';\r\nimport useQuotation from '../../../hooks/useQuotation';\r\nimport useClient from '../../../hooks/useClient';\r\nimport React, { useState } from 'react';\r\nimport { useOpportunity } from '../../../hooks/useOpportunity';\r\nimport { useEstados, useMunicipios } from '../../../hooks/useEstado';\r\nimport useProyecto from '../../../hooks/useProyect';\r\nimport usePerson from '../../../hooks/usePerson';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nimport Select from '../../../components/ui/Select';\r\n\r\n// Formatea el presupuesto solo con separadores de miles y decimales\r\nfunction formatearNumero(valor) {\r\n  if (valor === null || valor === undefined || isNaN(Number(valor))) return '';\r\n  // Si es n煤mero, convertir a string\r\n  let valorStr = typeof valor === 'string' ? valor : String(valor);\r\n  const partes = valorStr.split('.');\r\n  let entero = partes[0];\r\n  let decimal = partes[1] || '';\r\n  entero = Number(entero).toLocaleString('es-MX');\r\n  if (decimal.length > 0) {\r\n    return `${entero}.${decimal}`;\r\n  }\r\n  return entero;\r\n}\r\n\r\n// Formatea el presupuesto como dinero MXN\r\nfunction formatearDinero(valor) {\r\n  if (!valor || isNaN(Number(valor))) return '';\r\n  return Number(valor).toLocaleString('es-MX', { style: 'currency', currency: 'MXN' });\r\n}\r\n\r\nconst NewQuotationModal = ({ isOpen, onClose, onCreateQuotation }) => {\r\n  React.useEffect(() => {\r\n    const handler = () => {\r\n      setIsFromOpportunity(true);\r\n    };\r\n    window.addEventListener('setNewQuotationModalFromOpportunity', handler);\r\n    return () => window.removeEventListener('setNewQuotationModalFromOpportunity', handler);\r\n  }, []);\r\n  React.useEffect(() => {\r\n    const handler = () => {\r\n      resetModalState();\r\n    };\r\n    window.addEventListener('resetNewQuotationModal', handler);\r\n    return () => window.removeEventListener('resetNewQuotationModal', handler);\r\n  }, []);\r\n  // Obtener el ID de oportunidad de los par谩metros de URL\r\n  const [opportunityId] = useState(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    return params.get('opportunityId');\r\n  });\r\n\r\n  // Hooks para obtener oportunidades, clientes y proyectos\r\n  const { oportunidades } = useOpportunity();\r\n  // Solo una declaraci贸n de los hooks para evitar errores\r\n  const proyectoHook = useProyecto();\r\n  const clientHook = useClient();\r\n  const proyectos = proyectoHook.proyectos;\r\n  const getProyectos = proyectoHook.getProyectos;\r\n  const loadingProyectos = proyectoHook.loading;\r\n  const clients = clientHook.clients;\r\n  const getClients = clientHook.getClients;\r\n  const loadingClients = clientHook.loading;\r\n\r\n  // Buscar la oportunidad actual\r\n  const currentOpportunity = React.useMemo(() => {\r\n    return oportunidades?.find(o => String(o.id) === String(opportunityId));\r\n  }, [oportunidades, opportunityId]);\r\n\r\n  // Buscar cliente y proyecto por id\r\n  const currentClient = React.useMemo(() => {\r\n    if (!currentOpportunity?.clienteId) return null;\r\n    return clients?.find(c => String(c.id) === String(currentOpportunity.clienteId) || String(c._id) === String(currentOpportunity.clienteId));\r\n  }, [clients, currentOpportunity]);\r\n\r\n  const currentProject = React.useMemo(() => {\r\n    if (!currentOpportunity?.proyectoId) return null;\r\n    return proyectos?.find(p => String(p.id) === String(currentOpportunity.proyectoId) || String(p._id) === String(currentOpportunity.proyectoId));\r\n  }, [proyectos, currentOpportunity]);\r\n\r\n  // Precargar datos en el formulario solo como informaci贸n\r\n  // Estado inicial del formulario\r\n  const initialFormData = {\r\n    clienteId: '',\r\n    nombreCliente: '',\r\n    proyectoId: '',\r\n    nombreProyecto: '',\r\n    personalAsignadoId: '',\r\n    asignadoA: '',\r\n    personaContacto: '',\r\n    telefono: '',\r\n    email: '',\r\n    descripcionProyecto: '',\r\n    estado: '',\r\n    municipio: '',\r\n    direccion: '',\r\n    montoTotal: '',\r\n    cronograma: '',\r\n    prioridad: 'media',\r\n    tipoProyecto: 'hvac',\r\n    notas: '',\r\n    oportunidadVentaId: ''\r\n  };\r\n\r\n  const [formData, setFormData] = useState({ ...initialFormData, oportunidadVentaId: opportunityId || '' });\r\n  const [isFromOpportunity, setIsFromOpportunity] = useState(false);\r\n\r\n  // Funci贸n para resetear el estado del modal y formulario\r\n  const resetModalState = () => {\r\n    setFormData({ ...initialFormData, oportunidadVentaId: '' });\r\n    setIsFromOpportunity(false);\r\n  };\r\n\r\n  // Al cerrar el modal, limpiar estado\r\n  const handleClose = () => {\r\n    resetModalState();\r\n    if (onClose) onClose();\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    // Si el modal se abre y no viene de oportunidad, resetea el estado\r\n    if (isOpen && !isFromOpportunity) {\r\n      resetModalState();\r\n    }\r\n    // Si hay oportunidad y los IDs existen, simula la selecci贸n manual\r\n    if (currentOpportunity && currentOpportunity.clienteId && currentOpportunity.proyectoId) {\r\n      setIsFromOpportunity(true);\r\n      const selectedClient = clients?.find(c => String(c.id) === String(currentOpportunity.clienteId) || String(c._id) === String(currentOpportunity.clienteId));\r\n      const selectedProject = proyectos?.find(p => String(p.id) === String(currentOpportunity.proyectoId) || String(p._id) === String(currentOpportunity.proyectoId));\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        clienteId: selectedClient?.id || '',\r\n        nombreCliente: selectedClient?.empresa || selectedClient?.nombre || selectedClient?.razonSocial || selectedClient?.name || '',\r\n        proyectoId: selectedProject?.id || '',\r\n        nombreProyecto: selectedProject?.nombreProyecto || selectedProject?.nombre || selectedProject?.proyectoNombre || selectedProject?.codigo || '',\r\n        personaContacto: currentOpportunity?.contactInfo?.contactPerson || '',\r\n        telefono: currentOpportunity?.contactInfo?.phone || '',\r\n        email: currentOpportunity?.contactInfo?.email || '',\r\n        descripcionProyecto: currentOpportunity?.projectDetails?.description || '',\r\n        montoTotal: currentOpportunity?.projectDetails?.estimatedBudget?.toString() || '',\r\n        cronograma: currentOpportunity?.projectDetails?.timeline || '',\r\n        prioridad: currentOpportunity?.priority || 'media',\r\n        oportunidadVentaId: currentOpportunity?.id || ''\r\n      }));\r\n    }\r\n  }, [isOpen, currentOpportunity, clients, proyectos, isFromOpportunity]);\r\n\r\n  // ...eliminado, ahora el estado se inicializa arriba...\r\n\r\n  // Proyectos y clientes: ya declarados arriba, solo ejecuta la carga\r\n  React.useEffect(() => {\r\n    getProyectos();\r\n    getClients();\r\n  }, []);\r\n\r\n  // Estados y municipios (hooks llamados una sola vez)\r\n  const { estados, loading: loadingEstados, error: errorEstados } = useEstados();\r\n  const { municipios, loading: loadingMunicipios, error: errorMunicipios } = useMunicipios(formData.estado);\r\n\r\n  // Mostrar en consola c贸mo se obtienen los estados y municipios\r\n  React.useEffect(() => {\r\n  // console.log eliminado\r\n  }, [estados, municipios, formData.estado]);\r\n  // Opciones para el select de proyectos (con clientId)\r\n  const projectOptions = proyectos?.map(p => ({\r\n    value: p.id || p._id || p.codigo || p.nombreProyecto,\r\n    label: p.nombreProyecto || p.codigo,\r\n    clientId: p.cliente?.id || p.cliente?.id || p.cliente || ''\r\n  })) || [];\r\n\r\n  // Funci贸n para obtener el nombre del cliente por id\r\n  const getClientNameById = (id) => {\r\n    if (!id || !clients) return '';\r\n    // Buscar por id, _id, y tambi茅n comparar como string\r\n    const found = clients.find(c => String(c.id) === String(id) || String(c._id) === String(id));\r\n    // Mostrar empresa si existe, si no nombre, si no razonSocial, si no name\r\n  return found?.empresa || found?.nombre || found?.razonSocial || found?.name || id || '';\r\n  };\r\n\r\n  // Cuando cambia el proyecto seleccionado, actualizar el cliente\r\n  const handleProjectChange = (value) => {\r\n    const selected = projectOptions.find(opt => opt.value === value);\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      proyectoId: selected?.value || '',\r\n      nombreProyecto: selected?.label || value,\r\n      clienteId: selected?.clientId || '',\r\n      nombreCliente: getClientNameById(selected?.clientId)\r\n    }));\r\n    // Limpiar error si lo hay\r\n    if (errors?.projectName) setErrors(prev => ({ ...prev, projectName: '' }));\r\n  };\r\n\r\n  // Cuando cambia el proyecto seleccionado, actualizar el cliente\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n\r\n  // Hook para cargar empleados\r\n  const { persons, getPersons, loading: loadingEmployees } = usePerson();\r\n  React.useEffect(() => { getPersons(); /* solo una vez */ }, []);\r\n  const assignedToOptions = persons?.map((emp, idx) => {\r\n    const idValue = emp.empleadoId || emp.id || `${idx}`;\r\n    const uniqueValue = `${idValue}_${idx}`;\r\n    return {\r\n      value: uniqueValue,\r\n      label: emp.nombreCompleto || emp.nombre || emp.empleadoId || emp.id,\r\n      key: uniqueValue\r\n    };\r\n  }) || [];\r\n\r\n  const handleInputChange = (field, value) => {\r\n    // Formateo visual para el campo montoTotal (presupuesto)\r\n    if (field === 'montoTotal') {\r\n      let cleanValue = value.replace(/[^\\d.]/g, '');\r\n      if (cleanValue.includes('.')) {\r\n        const [intPart, decPart] = cleanValue.split('.');\r\n        cleanValue = intPart + '.' + decPart.slice(0,2);\r\n      }\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    } else if (field === 'telefono') {\r\n      let cleanValue = value.replace(/\\D/g, '').slice(0, 10);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    } else if (field === 'asignadoA') {\r\n      // Guardar id y nombre como antes\r\n      const selected = assignedToOptions.find(opt => opt.value === value);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        personalAsignadoId: selected?.value || '',\r\n        asignadoA: selected?.label || value\r\n      }));\r\n    } else {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: value\r\n      }));\r\n    }\r\n\r\n    // Clear error when user starts typing\r\n    if (errors?.[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData?.nombreCliente?.trim()) {\r\n      newErrors.nombreCliente = 'El nombre del cliente es requerido';\r\n    }\r\n\r\n    if (!formData?.nombreProyecto?.trim()) {\r\n      newErrors.nombreProyecto = 'El nombre del proyecto es requerido';\r\n    }\r\n\r\n    if (!formData?.personaContacto?.trim()) {\r\n      newErrors.personaContacto = 'La persona de contacto es requerida';\r\n    }\r\n\r\n    if (!formData?.telefono?.trim()) {\r\n      newErrors.telefono = 'El tel茅fono es requerido';\r\n    } else if (!/^\\d{10}$/.test(formData?.telefono)) {\r\n      newErrors.telefono = 'El tel茅fono debe tener exactamente 10 d铆gitos num茅ricos';\r\n    }\r\n\r\n    if (!formData?.email?.trim()) {\r\n      newErrors.email = 'El email es requerido';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/?.test(formData?.email)) {\r\n      newErrors.email = 'El formato del email no es v谩lido';\r\n    }\r\n\r\n    if (!formData?.descripcionProyecto?.trim()) {\r\n      newErrors.descripcionProyecto = 'La descripci贸n del proyecto es requerida';\r\n    }\r\n\r\n    if (!formData?.estado?.trim()) {\r\n      newErrors.estado = 'El estado es requerido';\r\n    }\r\n    if (!formData?.municipio?.trim()) {\r\n      newErrors.municipio = 'El municipio es requerido';\r\n    }\r\n    if (!formData?.direccion?.trim()) {\r\n      newErrors.direccion = 'La direcci贸n es requerida';\r\n    }\r\n\r\n    let montoTotalStr = typeof formData?.montoTotal === 'string' ? formData?.montoTotal : String(formData?.montoTotal ?? '');\r\n    if (!montoTotalStr.trim()) {\r\n      newErrors.montoTotal = 'El presupuesto estimado es requerido';\r\n    }\r\n\r\n    if (!formData?.cronograma?.trim()) {\r\n      newErrors.cronograma = 'El cronograma es requerido';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const generateQuotationId = () => {\r\n    const timestamp = Date.now();\r\n    const random = Math.floor(Math.random() * 1000);\r\n    return `COT-${new Date()?.getFullYear()}-${timestamp?.toString()?.slice(-3)}${random?.toString()?.padStart(3, '0')}`;\r\n  };\r\n\r\n  const { createQuotation, loading: loadingQuotation, error: errorQuotation } = useQuotation();\r\n  const { showOperationSuccess } = useNotifications();\r\n  const { actualizarOportunidad } = useOpportunity();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validateForm()) return;\r\n    setIsSubmitting(true);\r\n    try {\r\n      // Buscar el proyecto seleccionado para obtener los objetos completos\r\n      const proyectoSeleccionado = proyectos?.find(p => String(p.id) === String(formData?.proyectoId) || String(p._id) === String(formData?.proyectoId));\r\n  \r\n      let montoTotal = 0;\r\n      if (proyectoSeleccionado?.presupuesto && typeof proyectoSeleccionado?.presupuesto === 'object') {\r\n        montoTotal = Object.values(proyectoSeleccionado.presupuesto).reduce((acc, val) => acc + (typeof val === 'number' ? val : 0), 0);\r\n      } else if (typeof proyectoSeleccionado?.presupuesto === 'number') {\r\n        montoTotal = proyectoSeleccionado.presupuesto;\r\n      } else if (formData?.montoTotal && !isNaN(Number(formData.montoTotal))) {\r\n        montoTotal = Number(formData.montoTotal);\r\n      }\r\n      // Formatear tiempoEjecucion como string\r\n      let tiempoEjecucion = '';\r\n      const cronograma = proyectoSeleccionado?.cronograma || formData?.cronograma || null;\r\n      if (cronograma && typeof cronograma === 'object' && cronograma.fechaInicio && cronograma.fechaFin) {\r\n        tiempoEjecucion = `${cronograma.fechaInicio} a ${cronograma.fechaFin}`;\r\n      } else if (typeof cronograma === 'string') {\r\n        tiempoEjecucion = cronograma;\r\n      } else {\r\n        tiempoEjecucion = '';\r\n      }\r\n      // Payload adaptado a la estructura esperada por el backend\r\n      const ubicacionStr = [formData?.direccion, formData?.municipio, formData?.estado].filter(Boolean).join(', ');\r\n      // Normalizar prioridad\r\n      const PRIORIDADES_VALIDAS = ['urgente', 'alta', 'media', 'baja'];\r\n      let prioridadValue = (formData?.prioridad || '').toLowerCase();\r\n      if (!PRIORIDADES_VALIDAS.includes(prioridadValue)) {\r\n        prioridadValue = 'media';\r\n      }\r\n\r\n      const quotationPayload = {\r\n        // Campos requeridos en el nivel ra铆z\r\n        nombreCliente: formData?.nombreCliente?.trim(),\r\n        clienteId: formData?.clienteId,\r\n        proyectoId: formData?.proyectoId,\r\n        nombreProyecto: formData?.nombreProyecto?.trim(),\r\n        ubicacion: {\r\n          estado: formData?.estado?.trim() ? formData?.estado?.trim() : null,\r\n          municipio: formData?.municipio?.trim() ? formData?.municipio?.trim() : null,\r\n          direccion: formData?.direccion?.trim() ? formData?.direccion?.trim() : null\r\n        },\r\n        presupuestoEstimado: montoTotal,\r\n        tiempoEjecucion: tiempoEjecucion,\r\n        personaContacto: formData?.personaContacto?.trim(),\r\n        telefono: formData?.telefono?.trim(),\r\n        email: formData?.email?.trim(),\r\n        descripcionProyecto: formData?.descripcionProyecto?.trim(),\r\n        Responsable: formData?.asignadoA,\r\n        idResponsable: formData?.personalAsignadoId,\r\n        notas: formData?.notas?.trim() ? formData?.notas?.trim() : null,\r\n        prioridad: prioridadValue,\r\n        // Estructura anidada para compatibilidad\r\n        informacion_basica: {\r\n          cliente: [\r\n            { id_cliente: formData?.clienteId },\r\n            { nombre_cliente: formData?.nombreCliente?.trim() }\r\n          ],\r\n          proyecto: [\r\n            { id_proyecto: formData?.proyectoId },\r\n            { nombre_proyecto: formData?.nombreProyecto?.trim() }\r\n          ],\r\n          prioridad: prioridadValue,\r\n          tipo_proyecto: formData?.tipoProyecto\r\n        },\r\n        informacion_contacto: [\r\n          {\r\n            persona_contacto1: [\r\n              {\r\n                Persona_de_contacto_nombre: formData?.personaContacto?.trim(),\r\n                telefono: formData?.telefono?.trim(),\r\n                email: formData?.email?.trim()\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        detalles_proyecto: {\r\n          descripcion_proyecto: formData?.descripcionProyecto?.trim() || null,\r\n          ubicacion_proyecto: [\r\n            {\r\n              estado: formData?.estado?.trim() ? formData?.estado?.trim() : null,\r\n              municipio: formData?.municipio?.trim() ? formData?.municipio?.trim() : null,\r\n              direccion: formData?.direccion?.trim() ? formData?.direccion?.trim() : null\r\n            }\r\n          ],\r\n          presupuesto_estimado_mxn: montoTotal,\r\n          tiempo_ejecucion: tiempoEjecucion\r\n        },\r\n        asignacion: {\r\n          responsables: formData?.personalAsignadoId && formData?.asignadoA\r\n            ? [\r\n                {\r\n                  id: formData?.personalAsignadoId,\r\n                  nombre: formData?.asignadoA\r\n                }\r\n              ]\r\n            : [],\r\n          notas_adicionales: formData?.notas?.trim() ? formData?.notas?.trim() : null\r\n        },\r\n        oportunidadVentaId: formData?.oportunidadVentaId || opportunityId || ''\r\n      };\r\n  // console.log eliminado\r\n      const response = await createQuotation(quotationPayload);\r\n      const wasCreated = response?.success || response?.id || response?.data?.id;\r\n      if (wasCreated) {\r\n        showOperationSuccess('Cotizaci贸n creada exitosamente');\r\n        \r\n        // Si viene de una oportunidad, mantener el estado y redirigir\r\n        if (opportunityId) {\r\n          // Limpiar completamente el estado del modal\r\n          resetModalState();\r\n          // Redirigir a oportunidades con mensaje de 茅xito\r\n          window.location.href = '/oportunidades?cotizacionCreada=true';\r\n          return;\r\n        }\r\n        \r\n        // Flujo normal si no viene de oportunidad\r\n        onCreateQuotation?.(response.data || response);\r\n        handleClose();\r\n      } else {\r\n        showOperationSuccess('Error al crear la cotizaci贸n');\r\n      }\r\n    } catch (error) {\r\n      alert('Error al crear la cotizaci贸n');\r\n      if (error?.response?.data) {\r\n        console.error('Error detalle backend:', error.response.data);\r\n      } else {\r\n        console.error('Error creating quotation:', error);\r\n      }\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"fixed inset-0 bg-black/50 transition-opacity\" \r\n        onClick={handleClose}\r\n      />\r\n      {/* Modal */}\r\n      <div className=\"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Nueva Cotizaci贸n</h2>\r\n            <p className=\"text-sm text-muted-foreground mt-1\">\r\n              Crear una nueva cotizaci贸n de proyecto\r\n            </p>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            iconName=\"X\"\r\n            onClick={handleClose}\r\n            disabled={isSubmitting}\r\n          />\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"overflow-y-auto max-h-[calc(90vh-140px)]\">\r\n          <div className=\"p-6 space-y-6\">\r\n            {/* Basic Information */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"FileText\" size={18} className=\"mr-2\" />\r\n                Informaci贸n B谩sica\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {/* Cliente: select si no hay oportunidad, input deshabilitado si hay oportunidad */}\r\n                {opportunityId ? (\r\n                  <Input\r\n                    label=\"Nombre del Cliente\"\r\n                    required\r\n                    value={formData?.nombreCliente}\r\n                    disabled\r\n                    error={errors?.nombreCliente}\r\n                    placeholder=\"Cliente del proyecto seleccionado\"\r\n                  />\r\n                ) : (\r\n                  <Select\r\n                    label=\"Cliente\"\r\n                    required\r\n                    value={formData?.clienteId}\r\n                    onChange={value => {\r\n                      const selectedClient = clients?.find(c => String(c.id) === String(value) || String(c._id) === String(value));\r\n                      setFormData(prev => ({\r\n                        ...prev,\r\n                        clienteId: value,\r\n                        nombreCliente: getClientNameById(value),\r\n                        proyectoId: '',\r\n                        nombreProyecto: '',\r\n                        personaContacto: selectedClient?.contacto || '',\r\n                        telefono: selectedClient?.telefono || '',\r\n                        email: selectedClient?.email || ''\r\n                      }));\r\n                    }}\r\n                    options={clients?.map(c => ({ value: c.id || c._id, label: c.empresa || c.nombre || c.razonSocial || c.name }))}\r\n                    isLoading={loadingClients}\r\n                    error={errors?.nombreCliente}\r\n                    placeholder={loadingClients ? 'Cargando clientes...' : 'Selecciona un cliente'}\r\n                  />\r\n                )}\r\n\r\n                {/* Proyecto: select si no hay oportunidad, input deshabilitado si hay oportunidad */}\r\n                {opportunityId ? (\r\n                  <Input\r\n                    label=\"Nombre del Proyecto\"\r\n                    required\r\n                    value={formData?.nombreProyecto}\r\n                    disabled\r\n                    error={errors?.nombreProyecto}\r\n                    placeholder=\"Proyecto relacionado a la oportunidad\"\r\n                  />\r\n                ) : (\r\n                    <Select\r\n                      label=\"Proyecto\"\r\n                      required\r\n                      value={formData?.proyectoId}\r\n                      onChange={value => {\r\n                        const selected = proyectos?.find(p => String(p.id) === String(value) || String(p._id) === String(value));\r\n                        // Precargar presupuesto total usando el nombre exacto\r\n                        let montoTotal = '';\r\n                        if (selected?.presupuesto && typeof selected.presupuesto === 'object') {\r\n                          montoTotal = selected.presupuesto.total || '';\r\n                        }\r\n                        // Precargar cronograma como rango de fechas usando el nombre exacto\r\n                        let cronograma = '';\r\n                        if (selected?.cronograma && typeof selected.cronograma === 'object') {\r\n                          if (selected.cronograma.fechaInicio && selected.cronograma.fechaFin) {\r\n                            cronograma = `${selected.cronograma.fechaInicio} a ${selected.cronograma.fechaFin}`;\r\n                          } else {\r\n                            cronograma = selected.cronograma.fechaInicio || selected.cronograma.fechaFin || '';\r\n                          }\r\n                        }\r\n                        setFormData(prev => ({\r\n                          ...prev,\r\n                          proyectoId: value,\r\n                          nombreProyecto: selected?.nombre || selected?.nombreProyecto || selected?.proyectoNombre || '',\r\n                          descripcionProyecto: selected?.descripcion || selected?.descripcionProyecto || '',\r\n                          ubicacion: selected?.ubicacion || '',\r\n                          montoTotal: montoTotal,\r\n                          cronograma: cronograma\r\n                        }));\r\n                      }}\r\n                      options={proyectos?.filter(p => String(p.cliente?.id) === String(formData.clienteId)).map(p => ({ value: p.id || p._id, label: p.nombre || p.nombreProyecto || p.proyectoNombre }))}\r\n                      isLoading={loadingProyectos}\r\n                      error={errors?.nombreProyecto}\r\n                      placeholder={formData.clienteId ? (loadingProyectos ? 'Cargando proyectos...' : 'Selecciona un proyecto') : 'Selecciona primero un cliente'}\r\n                      disabled={!formData.clienteId}\r\n                    />\r\n                )}\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Prioridad <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.prioridad}\r\n                    onChange={(value) => handleInputChange('prioridad', value)}\r\n                    options={[\r\n                      { value: 'urgente', label: 'Urgente' },\r\n                      { value: 'alta', label: 'Alta' },\r\n                      { value: 'media', label: 'Media' },\r\n                      { value: 'baja', label: 'Baja' }\r\n                    ]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Tipo de Proyecto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.tipoProyecto}\r\n                    onChange={(value) => handleInputChange('tipoProyecto', value)}\r\n                    options={[\r\n                      { value: 'hvac', label: 'Sistema HVAC' },\r\n                      { value: 'instalacion', label: 'Instalaci贸n' },\r\n                      { value: 'mantenimiento', label: 'Mantenimiento' },\r\n                      { value: 'modernizacion', label: 'Modernizaci贸n' }\r\n                    ]}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Contact Information */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Users\" size={18} className=\"mr-2\" />\r\n                Informaci贸n de Contacto\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <Input\r\n                  label=\"Persona de Contacto\"\r\n                  required\r\n                  value={formData?.personaContacto}\r\n                  onChange={(e) => handleInputChange('personaContacto', e?.target?.value)}\r\n                  error={errors?.personaContacto}\r\n                  placeholder=\"Ej. Ing. Carlos Rodriguez\"\r\n                />\r\n\r\n                <Input\r\n                  label=\"Tel茅fono\"\r\n                  required\r\n                  value={formData?.telefono}\r\n                  onChange={(e) => handleInputChange('telefono', e?.target?.value)}\r\n                  error={errors?.telefono}\r\n                  placeholder=\"+52 55 1234 5678\"\r\n                />\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <Input\r\n                    label=\"Email\"\r\n                    type=\"email\"\r\n                    required\r\n                    value={formData?.email}\r\n                    onChange={(e) => handleInputChange('email', e?.target?.value)}\r\n                    error={errors?.email}\r\n                    placeholder=\"contacto@empresa.com\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Project Details */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Settings\" size={18} className=\"mr-2\" />\r\n                Detalles del Proyecto\r\n              </h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Descripci贸n del Proyecto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <textarea\r\n                    className=\"mt-2 flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[100px]\"\r\n                    value={formData?.descripcionProyecto}\r\n                    onChange={(e) => handleInputChange('descripcionProyecto', e?.target?.value)}\r\n                    placeholder=\"Describe el alcance y especificaciones del proyecto...\"\r\n                  />\r\n                  {errors?.projectDescription && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.projectDescription}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 items-center\">\r\n                  <div className=\"flex flex-col justify-end h-full\">\r\n                    <Select\r\n                      label={<>Estado <span className=\"text-destructive\">*</span></>}\r\n                      value={formData.estado}\r\n                      onChange={value => {\r\n                        handleInputChange('estado', value);\r\n                        handleInputChange('municipio', '');\r\n                      }}\r\n                      options={\r\n                        estados ? [{ value: '', label: 'Selecciona un estado' }, ...estados.map(e => ({ value: e.code, label: e.name }))] : []\r\n                      }\r\n                      loading={loadingEstados}\r\n                      error={errors?.estado}\r\n                      required\r\n                      disabled={loadingEstados || !!errorEstados}\r\n                      placeholder={loadingEstados ? 'Cargando estados...' : 'Selecciona un estado'}\r\n                      searchable\r\n                      className=\"h-12 md:h-14 w-full text-base\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex flex-col justify-end h-full\">\r\n                    <Select\r\n                      label={<>Municipio <span className=\"text-destructive\">*</span></>}\r\n                      value={formData.municipio}\r\n                      onChange={value => handleInputChange('municipio', value)}\r\n                      options={\r\n                        formData.estado === ''\r\n                          ? [{ value: '', label: 'Selecciona un estado primero' }]\r\n                          : loadingMunicipios\r\n                            ? [{ value: '', label: 'Cargando municipios...' }]\r\n                            : errorMunicipios\r\n                              ? [{ value: '', label: 'Error al cargar municipios' }]\r\n                              : [{ value: '', label: 'Selecciona un municipio' }, ...(municipios ? Object.values(municipios.municipios || {}).map((m, idx) => ({ value: m, label: m })) : [])]\r\n                      }\r\n                      loading={loadingMunicipios}\r\n                      error={errors?.municipio}\r\n                      required\r\n                      disabled={formData.estado === '' || loadingMunicipios || !!errorMunicipios}\r\n                      placeholder={formData.estado === '' ? 'Selecciona un estado primero' : loadingMunicipios ? 'Cargando municipios...' : 'Selecciona un municipio'}\r\n                      searchable\r\n                      className=\"h-12 md:h-14 w-full text-base\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-4\">\r\n                  <Input\r\n                    label=\"Direcci贸n\"\r\n                    required\r\n                    value={formData?.direccion}\r\n                    onChange={(e) => handleInputChange('direccion', e?.target?.value)}\r\n                    error={errors?.direccion}\r\n                    placeholder=\"Direcci贸n completa\"\r\n                    className=\"h-12 md:h-14 w-full text-base\"\r\n                  />\r\n                  <Input\r\n                    label=\"Presupuesto Estimado (MXN)\"\r\n                    type=\"text\"\r\n                    required\r\n                    value={formatearNumero(formData?.montoTotal)}\r\n                    onChange={(e) => handleInputChange('montoTotal', e?.target?.value)}\r\n                    error={errors?.montoTotal}\r\n                    placeholder=\"$0.00 MXN\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"h-12 md:h-14 w-full text-base\"\r\n                  />\r\n                </div>\r\n\r\n                <Input\r\n                  label=\"Tiempo de Ejecuci贸n\"\r\n                  required\r\n                  value={formData?.cronograma}\r\n                  onChange={(e) => handleInputChange('cronograma', e?.target?.value)}\r\n                  error={errors?.cronograma}\r\n                  placeholder=\"Ej. 16 semanas, 3 meses\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Assignment */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"UserCheck\" size={18} className=\"mr-2\" />\r\n                Asignaci贸n\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Responsable <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.personalAsignadoId}\r\n                    onChange={(value) => handleInputChange('asignadoA', value)}\r\n                    options={assignedToOptions}\r\n                    isLoading={loadingEmployees}\r\n                    placeholder={loadingEmployees ? 'Cargando empleados...' : 'Selecciona un responsable'}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground\">Notas Adicionales</label>\r\n                  <textarea\r\n                    className=\"mt-2 flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[80px]\"\r\n                    value={formData?.notas}\r\n                    onChange={(e) => handleInputChange('notas', e?.target?.value)}\r\n                    placeholder=\"Informaci贸n adicional relevante para la cotizaci贸n...\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"flex items-center justify-end space-x-4 p-6 border-t bg-gray-50 dark:bg-gray-800/50\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={handleClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              iconName={isSubmitting ? \"Loader2\" : \"Plus\"}\r\n              iconPosition=\"left\"\r\n              className={isSubmitting ? \"animate-spin\" : \"\"}\r\n            >\r\n              {isSubmitting ? 'Creando...' : 'Crear Cotizaci贸n'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewQuotationModal;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport QuotationBuilder from './components/QuotationBuilder';\r\nimport MaterialRiskChecklist from './components/MaterialRiskChecklist';\r\nimport QuotationPreview from './components/QuotationPreview';\r\nimport ClientCommunication from './components/ClientCommunication';\r\nimport RevisionHistory from './components/RevisionHistory';\r\nimport InternalReview from './components/InternalReview';\r\nimport NewQuotationModal from './components/NewQuotationModal';\r\nimport useQuotation from '../../hooks/useQuotation';\r\n\r\nconst QuotationDevelopmentCenter = () => {\r\n  const [quotations, setQuotations] = useState([]);\r\n  const [selectedQuotation, setSelectedQuotation] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState('builder');\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n  const [isNewQuotationModalOpen, setIsNewQuotationModalOpen] = useState(false);\r\n  \r\n  // Verificar par谩metros de URL al cargar\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const opportunityId = params.get('opportunityId');\r\n    const newQuotation = params.get('newQuotation');\r\n    if (opportunityId && newQuotation === 'true') {\r\n      window.dispatchEvent(new CustomEvent('setNewQuotationModalFromOpportunity'));\r\n      setIsNewQuotationModalOpen(true);\r\n    }\r\n  }, []);\r\n\r\n  const { getCotizaciones, getCotizacionById } = useQuotation();\r\n\r\n  useEffect(() => {\r\n    const fetchQuotations = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const response = await getCotizaciones();\r\n  // console.log eliminado\r\n        const cotizaciones = Array.isArray(response.data?.data) ? response.data.data : [];\r\n  // console.log eliminado\r\n        // Mapeo adaptado a la estructura real del backend\r\n        const mapped = cotizaciones.map(cotizacion => ({\r\n          id: cotizacion.id || '', // id de Cosmos\r\n          folio: cotizacion.folio || '', // folio\r\n          clientId: cotizacion.informacion_basica?.cliente?.find?.(c => 'id_cliente' in c)?.id_cliente || '',\r\n          clientName: cotizacion.informacion_basica?.cliente?.find?.(c => c?.nombre_cliente)?.nombre_cliente || '',\r\n          projectId: cotizacion.informacion_basica?.proyecto?.find?.(p => 'id_proyecto' in p)?.id_proyecto || '',\r\n          projectName: cotizacion.informacion_basica?.proyecto?.find?.(p => p?.nombre_proyecto)?.nombre_proyecto || '',\r\n          projectType: cotizacion.informacion_basica?.tipo_proyecto || '',\r\n          description: cotizacion.detalles_proyecto?.descripcion_proyecto || '',\r\n          location: cotizacion.detalles_proyecto?.ubicacion_proyecto?.[0] || {},\r\n          executionTime: cotizacion.detalles_proyecto?.tiempo_ejecucion || '',\r\n          contactInfo: cotizacion.informacion_contacto?.[0]?.persona_contacto1?.[0] || {},\r\n          additionalNotes: cotizacion.asignacion?.notas_adicionales || '',\r\n          status: 'development',\r\n          createdDate: cotizacion.fechaCreacion ? new Date(cotizacion.fechaCreacion).toLocaleDateString('es-MX') : '',\r\n          lastModified: cotizacion.fechaActualizacion ? new Date(cotizacion.fechaActualizacion).toLocaleDateString('es-MX') : '',\r\n          assignedTo: cotizacion.asignacion?.responsables?.[0]?.nombre_responsable || '',\r\n          assignedToId: cotizacion.asignacion?.responsables?.[0]?.id_responsable || '',\r\n          priority: cotizacion.informacion_basica?.prioridad || 'media',\r\n          quotationData: {\r\n            totalAmount: cotizacion.detalles_proyecto?.presupuesto_estimado_mxn || 0\r\n          }\r\n        }));\r\n        setQuotations(mapped);\r\n      } catch (err) {\r\n        setQuotations([]);\r\n        console.error('Error al obtener cotizaciones:', err);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchQuotations();\r\n  }, []);\r\n\r\n  const handleCreateQuotation = (newQuotation) => {\r\n    // Extraer datos relevantes seg煤n el formato recibido\r\n    const mappedQuotation = {\r\n      id: newQuotation?.folio || newQuotation?.id || '',\r\n      clientId: newQuotation?.informacion_basica?.cliente?.find?.(c => 'id_cliente' in c)?.id_cliente || '',\r\n      clientName: newQuotation?.informacion_basica?.cliente?.find?.(c => c?.nombre_cliente)?.nombre_cliente || '',\r\n      projectId: newQuotation?.informacion_basica?.proyecto?.find?.(p => 'id_proyecto' in p)?.id_proyecto || '',\r\n      projectName: newQuotation?.informacion_basica?.proyecto?.find?.(p => p?.nombre_proyecto)?.nombre_proyecto || '',\r\n      projectType: newQuotation?.informacion_basica?.tipo_proyecto || '',\r\n      description: newQuotation?.detalles_proyecto?.descripcion_proyecto || '',\r\n      location: newQuotation?.detalles_proyecto?.ubicacion_proyecto?.[0] || {},\r\n      executionTime: newQuotation?.detalles_proyecto?.tiempo_ejecucion || '',\r\n      contactInfo: newQuotation?.informacion_contacto?.[0]?.persona_contacto1?.[0] || {},\r\n      additionalNotes: newQuotation?.asignacion?.notas_adicionales || '',\r\n      status: 'development',\r\n      createdDate: newQuotation?.fechaCreacion ? new Date(newQuotation?.fechaCreacion).toLocaleDateString('es-MX') : new Date().toLocaleDateString('es-MX'),\r\n      lastModified: newQuotation?.fechaActualizacion ? new Date(newQuotation?.fechaActualizacion).toLocaleDateString('es-MX') : new Date().toLocaleDateString('es-MX'),\r\n      assignedTo: newQuotation?.asignacion?.responsables?.[0]?.nombre_responsable || '',\r\n      assignedToId: newQuotation?.asignacion?.responsables?.[0]?.id_responsable || '',\r\n      priority: newQuotation?.informacion_basica?.prioridad || 'media',\r\n      quotationData: {\r\n        totalAmount: newQuotation?.detalles_proyecto?.presupuesto_estimado_mxn || 0\r\n      }\r\n    };\r\n    setQuotations(prev => {\r\n      const updated = [mappedQuotation, ...prev];\r\n  // console.log eliminado\r\n      return updated;\r\n    });\r\n    setSelectedQuotation(mappedQuotation);\r\n    setActiveTab('builder');\r\n    setIsNewQuotationModalOpen(false);\r\n    // Limpiar el par谩metro newQuotation de la URL para evitar que se abra el modal tras recargar\r\n    const params = new URLSearchParams(window.location.search);\r\n    if (params.has('newQuotation')) {\r\n      params.delete('newQuotation');\r\n      window.history.replaceState({}, '', `${window.location.pathname}?${params.toString()}`);\r\n    }\r\n    // Recargar cotizaciones desde el backend para tener la lista actualizada\r\n    getCotizaciones().then(response => {\r\n      const cotizaciones = Array.isArray(response.data?.data) ? response.data.data : [];\r\n      const mapped = cotizaciones.map(cotizacion => ({\r\n        id: cotizacion.id || '',\r\n        folio: cotizacion.folio || '',\r\n        clientId: cotizacion.informacion_basica?.cliente?.find?.(c => 'id_cliente' in c)?.id_cliente || '',\r\n        clientName: cotizacion.informacion_basica?.cliente?.find?.(c => c?.nombre_cliente)?.nombre_cliente || '',\r\n        projectId: cotizacion.informacion_basica?.proyecto?.find?.(p => 'id_proyecto' in p)?.id_proyecto || '',\r\n        projectName: cotizacion.informacion_basica?.proyecto?.find?.(p => p?.nombre_proyecto)?.nombre_proyecto || '',\r\n        projectType: cotizacion.informacion_basica?.tipo_proyecto || '',\r\n        description: cotizacion.detalles_proyecto?.descripcion_proyecto || '',\r\n        location: cotizacion.detalles_proyecto?.ubicacion_proyecto?.[0] || {},\r\n        executionTime: cotizacion.detalles_proyecto?.tiempo_ejecucion || '',\r\n        contactInfo: cotizacion.informacion_contacto?.[0]?.persona_contacto1?.[0] || {},\r\n        additionalNotes: cotizacion.asignacion?.notas_adicionales || '',\r\n        status: 'development',\r\n        createdDate: cotizacion.fechaCreacion ? new Date(cotizacion.fechaCreacion).toLocaleDateString('es-MX') : '',\r\n        lastModified: cotizacion.fechaActualizacion ? new Date(cotizacion.fechaActualizacion).toLocaleDateString('es-MX') : '',\r\n        assignedTo: cotizacion.asignacion?.responsables?.[0]?.nombre_responsable || '',\r\n        assignedToId: cotizacion.asignacion?.responsables?.[0]?.id_responsable || '',\r\n        priority: cotizacion.informacion_basica?.prioridad || 'media',\r\n        quotationData: {\r\n          totalAmount: cotizacion.detalles_proyecto?.presupuesto_estimado_mxn || 0\r\n        }\r\n      }));\r\n      setQuotations(mapped);\r\n    });\r\n  };\r\n\r\n  const handleQuotationSelect = async (quotation) => {\r\n    setIsLoading(true);\r\n    try {\r\n      // Si el objeto ya tiene la estructura mapeada, 煤salo directamente\r\n      if (quotation.quotationData && quotation.projectName) {\r\n        setSelectedQuotation(quotation);\r\n      } else {\r\n        const quotationDetail = await getCotizacionById(quotation.id);\r\n        const mappedQuotation = {\r\n          id: quotationDetail.id || '', // id de Cosmos\r\n          folio: quotationDetail.folio || '', // folio\r\n          clientName: quotationDetail.informacion_basica?.cliente?.find?.(c => c?.nombre_cliente)?.nombre_cliente || '',\r\n          projectName: quotationDetail.informacion_basica?.proyecto?.find?.(p => p?.nombre_proyecto)?.nombre_proyecto || '',\r\n          status: 'development',\r\n          createdDate: quotationDetail.fechaCreacion ? new Date(quotationDetail.fechaCreacion).toLocaleDateString('es-MX') : '',\r\n          lastModified: quotationDetail.fechaActualizacion ? new Date(quotationDetail.fechaActualizacion).toLocaleDateString('es-MX') : '',\r\n          assignedTo: quotationDetail.asignacion?.responsables?.[0]?.nombre_responsable || '',\r\n          priority: quotationDetail.informacion_basica?.prioridad || 'media',\r\n          quotationData: {\r\n            totalAmount: quotationDetail.detalles_proyecto?.presupuesto_estimado_mxn || 0\r\n          }\r\n        };\r\n        setSelectedQuotation(mappedQuotation);\r\n      }\r\n    } catch (err) {\r\n      // Manejo de error si es necesario\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleQuotationUpdate = (quotationId, updates) => {\r\n    setQuotations(prev => prev?.map(quote => \r\n      quote?.id === quotationId \r\n        ? { ...quote, ...updates, lastModified: new Date()?.toISOString()?.split('T')?.[0] }\r\n        : quote\r\n    ));\r\n    \r\n    if (selectedQuotation?.id === quotationId) {\r\n      setSelectedQuotation(prev => ({ ...prev, ...updates }));\r\n    }\r\n  };\r\n\r\n  const handleAddRevision = (quotationId, revision) => {\r\n    const newRevision = {\r\n      ...revision,\r\n      version: `1.${Date.now()?.toString()?.slice(-1)}`,\r\n      date: new Date()?.toISOString()?.split('T')?.[0]\r\n    };\r\n\r\n    setQuotations(prev => prev?.map(quote => \r\n      quote?.id === quotationId \r\n        ? { \r\n            ...quote, \r\n            revisions: [...(quote?.revisions || []), newRevision],\r\n            lastModified: newRevision?.date\r\n          }\r\n        : quote\r\n    ));\r\n  };\r\n\r\n  const handleSubmitInternalReview = (quotationId, reviewData) => {\r\n    setQuotations(prev => prev?.map(quote => \r\n      quote?.id === quotationId \r\n        ? { ...quote, internalReview: reviewData }\r\n        : quote\r\n    ));\r\n  };\r\n\r\n  const handleClientCommunication = (quotationId, communication) => {\r\n    const newComm = {\r\n      ...communication,\r\n      id: `comm-${Date.now()}`,\r\n      date: new Date()?.toISOString()?.split('T')?.[0]\r\n    };\r\n\r\n    setQuotations(prev => prev?.map(quote => \r\n      quote?.id === quotationId \r\n        ? { \r\n            ...quote, \r\n            communications: [...(quote?.communications || []), newComm]\r\n          }\r\n        : quote\r\n    ));\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'development': return 'bg-blue-100 text-blue-800'; // Desarrollo\r\n      case 'review': return 'bg-yellow-100 text-yellow-800'; // Revisi贸n\r\n      case 'approved': return 'bg-green-100 text-green-800'; // Aprobada\r\n      case 'rejected': return 'bg-red-100 text-red-800'; // Rechazada\r\n      case 'sent': return 'bg-indigo-100 text-indigo-800'; // Enviada\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgente': return 'border-l-red-600';\r\n      case 'alta': return 'border-l-orange-500';\r\n      case 'media': return 'border-l-yellow-500';\r\n      case 'baja': return 'border-l-green-500';\r\n      default: return 'border-l-gray-400';\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Ya no selecciona autom谩ticamente la primera cotizaci贸n\r\n  }, [quotations, selectedQuotation]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando centro de desarrollo...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n      \r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n        \r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Centro de Desarrollo de Cotizaciones</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                  Creaci贸n y gesti贸n avanzada de cotizaciones con validaci贸n de costos y comunicaci贸n directa\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                {/* Bot贸n comentado: Exportar PDF (se dej贸 comentado para posible uso futuro)\r\n                <Button\r\n                  variant=\"outline\"\r\n                  iconName=\"Download\"\r\n                  iconPosition=\"left\"\r\n                >\r\n                  Exportar PDF\r\n                </Button>\r\n                */}\r\n                <Button\r\n                  iconName=\"Plus\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => {\r\n                    window.dispatchEvent(new CustomEvent('resetNewQuotationModal'));\r\n                    setIsNewQuotationModalOpen(true);\r\n                  }}\r\n                >\r\n                  Nueva Cotizaci贸n\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-6\">\r\n              {/* Quotations List */}\r\n              <div className=\"w-80\">\r\n                <div className=\"bg-card rounded-lg shadow-sm border\">\r\n                  <div className=\"p-4 border-b\">\r\n                    <h3 className=\"font-semibold\">Cotizaciones Activas</h3>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4 space-y-3 max-h-[calc(100vh-300px)] overflow-y-auto\">\r\n                    {quotations?.map((quotation) => (\r\n                      <div\r\n                        key={quotation?.id}\r\n                        onClick={() => handleQuotationSelect(quotation)}\r\n                        className={`p-3 rounded-lg border-l-4 cursor-pointer hover:shadow-md transition-all ${\r\n                          selectedQuotation?.id === quotation?.id ? 'bg-primary/10' : 'bg-card'\r\n                        } ${getPriorityColor(quotation?.priority)}`}\r\n                      >\r\n                        <div className=\"flex items-start justify-between mb-2\">\r\n                          <h4 className=\"font-medium text-sm text-foreground line-clamp-2\">\r\n                            {quotation?.projectName || 'Sin proyecto'}\r\n                          </h4>\r\n                          <span className={`text-xs px-2 py-1 rounded-full ${getStatusColor(quotation?.status)}`}>\r\n                            {quotation?.status === 'development' ? 'Desarrollo' :\r\n                             quotation?.status === 'review' ? 'Revisi贸n' :\r\n                             quotation?.status === 'approved' ? 'Aprobada' :\r\n                             quotation?.status === 'rejected' ? 'Rechazada' :\r\n                             quotation?.status === 'sent' ? 'Enviada' :\r\n                             quotation?.status || 'Sin estado'}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mb-2\">{quotation?.clientName || 'Sin cliente'}</p>\r\n                        <div className=\"flex items-center space-x-2 mb-2\">\r\n                          <Icon name=\"User\" size={12} className=\"text-muted-foreground\" />\r\n                          <span className=\"text-xs text-muted-foreground\">{quotation?.assignedTo || 'Sin responsable'}</span>\r\n                        </div>\r\n                          {/* Solo mostrar el folio, nunca el id de Cosmos */}\r\n                        <p className=\"text-xs text-muted-foreground mb-2\">{quotation?.folio || 'Sin folio'}</p>\r\n                        {/* El id de Cosmos no se muestra */}\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Icon name=\"Calendar\" size={12} className=\"text-muted-foreground\" />\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {quotation?.lastModified || quotation?.createdDate || ''}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"text-xs font-medium text-foreground\">\r\n                            ${quotation?.quotationData?.totalAmount?.toLocaleString('es-MX') || '0'}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Main Quotation Development Area */}\r\n              <div className=\"flex-1\">\r\n                {selectedQuotation ? (\r\n                  <div className=\"bg-card rounded-lg shadow-sm border\">\r\n                    {/* Tabs */}\r\n                    <div className=\"border-b\">\r\n                      <div className=\"flex space-x-1 p-1\">\r\n                        {[\r\n                          { id: 'builder', label: 'Constructor', icon: 'Settings' },\r\n                          { id: 'materials', label: 'Materiales', icon: 'Package' },\r\n                          { id: 'preview', label: 'Vista Previa', icon: 'Eye' },\r\n                          { id: 'communication', label: 'Comunicaci贸n', icon: 'MessageSquare' },\r\n                          { id: 'review', label: 'Revisi贸n', icon: 'Users' },\r\n                          { id: 'history', label: 'Historial', icon: 'Clock' }\r\n                        ]?.map((tab) => (\r\n                          <button\r\n                            key={tab?.id}\r\n                            onClick={() => setActiveTab(tab?.id)}\r\n                            className={`flex items-center space-x-2 px-4 py-2 text-sm rounded-lg transition-all ${\r\n                              activeTab === tab?.id\r\n                                ? 'bg-primary text-primary-foreground'\r\n                                : 'text-muted-foreground hover:text-foreground hover:bg-muted'\r\n                            }`}\r\n                          >\r\n                            <Icon name={tab?.icon} size={16} />\r\n                            <span>{tab?.label}</span>\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Tab Content */}\r\n                    <div className=\"p-6\">\r\n                      {activeTab === 'builder' && (\r\n                        <QuotationBuilder\r\n                          cotizacion={selectedQuotation}\r\n                          onUpdate={(updates) => handleQuotationUpdate(selectedQuotation?.id, updates)}\r\n                          onAddRevision={(revision) => handleAddRevision(selectedQuotation?.id, revision)}\r\n                        />\r\n                      )}\r\n\r\n                      {activeTab === 'materials' && (\r\n                        <MaterialRiskChecklist\r\n                          quotation={selectedQuotation}\r\n                          onUpdate={(updates) => handleQuotationUpdate(selectedQuotation?.id, updates)}\r\n                        />\r\n                      )}\r\n\r\n                      {activeTab === 'preview' && (\r\n                        <QuotationPreview\r\n                          quotation={selectedQuotation}\r\n                        />\r\n                      )}\r\n\r\n                      {activeTab === 'communication' && (\r\n                        <ClientCommunication\r\n                          quotation={selectedQuotation}\r\n                          onAddCommunication={(comm) => handleClientCommunication(selectedQuotation?.id, comm)}\r\n                        />\r\n                      )}\r\n\r\n                      {activeTab === 'review' && (\r\n                        <InternalReview\r\n                          quotation={selectedQuotation}\r\n                          onSubmitReview={(reviewData) => handleSubmitInternalReview(selectedQuotation?.id, reviewData)}\r\n                        />\r\n                      )}\r\n\r\n                      {activeTab === 'history' && (\r\n                        <RevisionHistory\r\n                          quotation={selectedQuotation}\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-card rounded-lg shadow-sm border h-96 flex items-center justify-center\">\r\n                    <div className=\"text-center\">\r\n                      <Icon name=\"FileText\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                      <h3 className=\"text-lg font-medium text-foreground mb-2\">Seleccionar Cotizaci贸n</h3>\r\n                      <p className=\"text-muted-foreground\">\r\n                        Selecciona una cotizaci贸n de la lista para comenzar a trabajar\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* New Quotation Modal */}\r\n      <NewQuotationModal\r\n        isOpen={isNewQuotationModalOpen}\r\n        onClose={() => setIsNewQuotationModalOpen(false)}\r\n        onCreateQuotation={handleCreateQuotation}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationDevelopmentCenter;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\nconst StartupTrackingPanel = ({ project, onConfirm }) => {\r\n  const [startupData, setStartupData] = useState({\r\n    confirmedDate: project?.startup?.confirmedDate || '',\r\n    preWorkMeeting: project?.startup?.preWorkMeeting || '',\r\n    accessPermits: project?.startup?.accessPermits || false,\r\n    safetyBriefing: project?.startup?.safetyBriefing || false,\r\n    materialsDelivery: project?.startup?.materialsDelivery || false,\r\n    fieldSupervisorAssigned: project?.startup?.fieldSupervisorAssigned || false\r\n  });\r\n  \r\n  const [notes, setNotes] = useState('');\r\n\r\n  const handleCheckboxChange = (field) => {\r\n    setStartupData(prev => ({\r\n      ...prev,\r\n      [field]: !prev?.[field]\r\n    }));\r\n  };\r\n\r\n  const handleConfirm = () => {\r\n    const confirmationData = {\r\n      ...startupData,\r\n      status: 'confirmed',\r\n      confirmationDate: new Date()?.toISOString()?.split('T')?.[0],\r\n      notes: notes\r\n    };\r\n    \r\n    onConfirm?.(confirmationData);\r\n  };\r\n\r\n  const isAllRequirementsMet = () => {\r\n    return startupData?.confirmedDate && \r\n           startupData?.preWorkMeeting && \r\n           startupData?.accessPermits && \r\n           startupData?.safetyBriefing && \r\n           startupData?.fieldSupervisorAssigned;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <h5 className=\"font-medium text-sm\">Seguimiento de Arranque</h5>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          Confirmar fechas y responsable en campo (Paso 19 del flujo)\r\n        </p>\r\n\r\n        {/* Field Supervisor Info */}\r\n        {project?.fieldSupervisor && (\r\n          <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n            <div className=\"flex items-center space-x-2 mb-2\">\r\n              <Icon name=\"HardHat\" size={16} className=\"text-blue-600\" />\r\n              <span className=\"font-medium text-sm\">Supervisor de Campo</span>\r\n            </div>\r\n            <div className=\"text-sm space-y-1\">\r\n              <p><strong>{project?.fieldSupervisor?.name}</strong></p>\r\n              <p className=\"text-muted-foreground\">{project?.fieldSupervisor?.phone}</p>\r\n              <p className=\"text-muted-foreground\">{project?.fieldSupervisor?.email}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Date Confirmations */}\r\n        <div className=\"space-y-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium block mb-1\">Fecha de Inicio Confirmada</label>\r\n            <Input\r\n              type=\"date\"\r\n              value={startupData?.confirmedDate}\r\n              onChange={(e) => setStartupData(prev => ({ ...prev, confirmedDate: e?.target?.value }))}\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm font-medium block mb-1\">Reuni贸n Pre-trabajo</label>\r\n            <Input\r\n              type=\"date\"\r\n              value={startupData?.preWorkMeeting}\r\n              onChange={(e) => setStartupData(prev => ({ ...prev, preWorkMeeting: e?.target?.value }))}\r\n              className=\"text-sm\"\r\n            />\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Reuni贸n inicial con cliente y equipo de campo\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Requirements Checklist */}\r\n        <div className=\"space-y-3\">\r\n          <h6 className=\"font-medium text-sm\">Lista de Verificaci贸n</h6>\r\n          \r\n          <div className=\"space-y-2\">\r\n            <label className=\"flex items-center space-x-3\">\r\n              <Checkbox\r\n                checked={startupData?.accessPermits}\r\n                onChange={() => handleCheckboxChange('accessPermits')}\r\n              />\r\n              <div className=\"flex-1\">\r\n                <span className=\"text-sm\">Permisos de acceso confirmados</span>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Acceso a todas las 谩reas de trabajo autorizado\r\n                </p>\r\n              </div>\r\n            </label>\r\n\r\n            <label className=\"flex items-center space-x-3\">\r\n              <Checkbox\r\n                checked={startupData?.safetyBriefing}\r\n                onChange={() => handleCheckboxChange('safetyBriefing')}\r\n              />\r\n              <div className=\"flex-1\">\r\n                <span className=\"text-sm\">Briefing de seguridad completado</span>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Equipo informado sobre protocolos de seguridad\r\n                </p>\r\n              </div>\r\n            </label>\r\n\r\n            <label className=\"flex items-center space-x-3\">\r\n              <Checkbox\r\n                checked={startupData?.materialsDelivery}\r\n                onChange={() => handleCheckboxChange('materialsDelivery')}\r\n              />\r\n              <div className=\"flex-1\">\r\n                <span className=\"text-sm\">Entrega de materiales coordinada</span>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Cronograma de entrega de materiales confirmado\r\n                </p>\r\n              </div>\r\n            </label>\r\n\r\n            <label className=\"flex items-center space-x-3\">\r\n              <Checkbox\r\n                checked={startupData?.fieldSupervisorAssigned}\r\n                onChange={() => handleCheckboxChange('fieldSupervisorAssigned')}\r\n              />\r\n              <div className=\"flex-1\">\r\n                <span className=\"text-sm\">Supervisor de campo asignado</span>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Responsable t茅cnico confirmado para el proyecto\r\n                </p>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Notes */}\r\n        <div>\r\n          <label className=\"text-sm font-medium block mb-1\">Notas Adicionales</label>\r\n          <textarea\r\n            value={notes}\r\n            onChange={(e) => setNotes(e?.target?.value)}\r\n            placeholder=\"Observaciones especiales, coordinaciones adicionales...\"\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n            rows={3}\r\n          />\r\n        </div>\r\n\r\n        {/* Confirmation Status */}\r\n        {project?.startup?.status === 'confirmed' && (\r\n          <div className=\"p-3 bg-green-50 rounded-lg\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n              <span className=\"font-medium text-sm text-green-800\">Arranque Confirmado</span>\r\n            </div>\r\n            <p className=\"text-sm text-green-700 mt-1\">\r\n              Confirmado el {new Date(project?.startup?.confirmationDate)?.toLocaleDateString()}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            onClick={handleConfirm}\r\n            disabled={!isAllRequirementsMet()}\r\n            iconName=\"CheckCircle\"\r\n            iconPosition=\"left\"\r\n            size=\"sm\"\r\n            className={`flex-1 ${!isAllRequirementsMet() ? 'opacity-50' : ''}`}\r\n          >\r\n            Confirmar Arranque\r\n          </Button>\r\n        </div>\r\n\r\n        {!isAllRequirementsMet() && (\r\n          <p className=\"text-xs text-orange-600 text-center\">\r\n            Complete todos los campos requeridos para confirmar el arranque\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StartupTrackingPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst ExecutionProgressPanel = ({ project, onUpdate }) => {\r\n  const [progressUpdate, setProgressUpdate] = useState({\r\n    overallProgress: project?.progress?.overallProgress || 0,\r\n    currentPhase: project?.progress?.currentPhase || '',\r\n    nextMilestone: project?.progress?.nextMilestone || '',\r\n    notes: ''\r\n  });\r\n\r\n  const [selectedMilestone, setSelectedMilestone] = useState(null);\r\n\r\n  const handleMilestoneUpdate = (milestoneId, updates) => {\r\n    const updatedMilestones = project?.milestones?.map(milestone =>\r\n      milestone?.id === milestoneId \r\n        ? { ...milestone, ...updates }\r\n        : milestone\r\n    );\r\n\r\n    // Calculate overall progress based on completed milestones\r\n    const completedMilestones = updatedMilestones?.filter(m => m?.status === 'completed')?.length || 0;\r\n    const totalMilestones = updatedMilestones?.length || 1;\r\n    const calculatedProgress = Math.round((completedMilestones / totalMilestones) * 100);\r\n\r\n    onUpdate?.({\r\n      milestones: updatedMilestones,\r\n      progress: {\r\n        ...project?.progress,\r\n        overallProgress: calculatedProgress\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleProgressUpdate = () => {\r\n    onUpdate?.(progressUpdate);\r\n    setProgressUpdate(prev => ({ ...prev, notes: '' }));\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'completed': return 'text-green-600 bg-green-100';\r\n      case 'in_progress': return 'text-blue-600 bg-blue-100';\r\n      case 'pending': return 'text-gray-600 bg-gray-100';\r\n      case 'delayed': return 'text-red-600 bg-red-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'completed': return 'CheckCircle';\r\n      case 'in_progress': return 'Clock';\r\n      case 'pending': return 'Circle';\r\n      case 'delayed': return 'AlertTriangle';\r\n      default: return 'Circle';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <h5 className=\"font-medium text-sm\">Monitoreo de Ejecuci贸n</h5>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          Punto de contacto del cliente durante la obra (Paso 20 del flujo)\r\n        </p>\r\n\r\n        {/* Overall Progress */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"font-medium text-sm\">Progreso General</span>\r\n            <span className=\"text-sm font-bold text-blue-600\">\r\n              {project?.progress?.overallProgress || 0}%\r\n            </span>\r\n          </div>\r\n          <div className=\"w-full bg-gray-200 rounded-full h-3 mb-2\">\r\n            <div \r\n              className=\"bg-blue-600 h-3 rounded-full transition-all\"\r\n              style={{ width: `${project?.progress?.overallProgress || 0}%` }}\r\n            ></div>\r\n          </div>\r\n          {project?.progress?.currentPhase && (\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              <strong>Fase actual:</strong> {project?.progress?.currentPhase}\r\n            </p>\r\n          )}\r\n          {project?.progress?.daysRemaining && (\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              <strong>D铆as restantes:</strong> {project?.progress?.daysRemaining}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Milestones */}\r\n        <div className=\"space-y-3\">\r\n          <h6 className=\"font-medium text-sm\">Hitos del Proyecto</h6>\r\n          \r\n          <div className=\"space-y-2\">\r\n            {project?.milestones?.map((milestone) => (\r\n              <div\r\n                key={milestone?.id}\r\n                className=\"p-3 border rounded-lg hover:bg-gray-50 cursor-pointer\"\r\n                onClick={() => setSelectedMilestone(selectedMilestone === milestone?.id ? null : milestone?.id)}\r\n              >\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon \r\n                        name={getStatusIcon(milestone?.status)} \r\n                        size={16} \r\n                        className={getStatusColor(milestone?.status)?.split(' ')?.[0]} \r\n                      />\r\n                      <span className=\"font-medium text-sm\">{milestone?.name}</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"mt-2 space-y-1\">\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        <strong>Meta:</strong> {new Date(milestone?.targetDate)?.toLocaleDateString()}\r\n                      </p>\r\n                      {milestone?.completedDate && (\r\n                        <p className=\"text-xs text-green-600\">\r\n                          <strong>Completado:</strong> {new Date(milestone?.completedDate)?.toLocaleDateString()}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex flex-col items-end space-y-1\">\r\n                    <span className={`text-xs px-2 py-1 rounded ${getStatusColor(milestone?.status)}`}>\r\n                      {milestone?.status === 'completed' ? 'Completado' :\r\n                       milestone?.status === 'in_progress' ? 'En Progreso' :\r\n                       milestone?.status === 'pending' ? 'Pendiente' : 'Retrasado'}\r\n                    </span>\r\n                    <span className=\"text-xs font-medium\">\r\n                      {milestone?.progress || 0}%\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Milestone Details */}\r\n                {selectedMilestone === milestone?.id && (\r\n                  <div className=\"mt-3 pt-3 border-t space-y-3\">\r\n                    <div>\r\n                      <label className=\"text-xs font-medium block mb-1\">Progreso (%)</label>\r\n                      <Input\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        max=\"100\"\r\n                        value={milestone?.progress || 0}\r\n                        onChange={(e) => handleMilestoneUpdate(milestone?.id, {\r\n                          progress: parseInt(e?.target?.value)\r\n                        })}\r\n                        className=\"text-sm\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"text-xs font-medium block mb-1\">Estado</label>\r\n                      <select\r\n                        value={milestone?.status}\r\n                        onChange={(e) => {\r\n                          const updates = { status: e?.target?.value };\r\n                          if (e?.target?.value === 'completed') {\r\n                            updates.completedDate = new Date()?.toISOString()?.split('T')?.[0];\r\n                            updates.progress = 100;\r\n                          }\r\n                          handleMilestoneUpdate(milestone?.id, updates);\r\n                        }}\r\n                        className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\r\n                      >\r\n                        <option value=\"pending\">Pendiente</option>\r\n                        <option value=\"in_progress\">En Progreso</option>\r\n                        <option value=\"completed\">Completado</option>\r\n                        <option value=\"delayed\">Retrasado</option>\r\n                      </select>\r\n                    </div>\r\n\r\n                    {milestone?.status === 'completed' && (\r\n                      <div>\r\n                        <label className=\"text-xs font-medium block mb-1\">Fecha de Completado</label>\r\n                        <Input\r\n                          type=\"date\"\r\n                          value={milestone?.completedDate || ''}\r\n                          onChange={(e) => handleMilestoneUpdate(milestone?.id, {\r\n                            completedDate: e?.target?.value\r\n                          })}\r\n                          className=\"text-sm\"\r\n                        />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Progress Update Form */}\r\n        <div className=\"space-y-3\">\r\n          <h6 className=\"font-medium text-sm\">Actualizaci贸n de Progreso</h6>\r\n          \r\n          <div>\r\n            <label className=\"text-sm font-medium block mb-1\">Fase Actual</label>\r\n            <Input\r\n              type=\"text\"\r\n              value={progressUpdate?.currentPhase}\r\n              onChange={(e) => setProgressUpdate(prev => ({ ...prev, currentPhase: e?.target?.value }))}\r\n              placeholder=\"Descripci贸n de la fase actual...\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm font-medium block mb-1\">Pr贸ximo Hito</label>\r\n            <Input\r\n              type=\"text\"\r\n              value={progressUpdate?.nextMilestone}\r\n              onChange={(e) => setProgressUpdate(prev => ({ ...prev, nextMilestone: e?.target?.value }))}\r\n              placeholder=\"Pr贸ximo hito o actividad...\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm font-medium block mb-1\">Notas de Progreso</label>\r\n            <textarea\r\n              value={progressUpdate?.notes}\r\n              onChange={(e) => setProgressUpdate(prev => ({ ...prev, notes: e?.target?.value }))}\r\n              placeholder=\"Observaciones, logros, obst谩culos encontrados...\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <Button\r\n            onClick={handleProgressUpdate}\r\n            iconName=\"Update\"\r\n            iconPosition=\"left\"\r\n            size=\"sm\"\r\n            className=\"w-full\"\r\n          >\r\n            Actualizar Progreso\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Key Metrics */}\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <div className=\"p-3 bg-gray-50 rounded-lg text-center\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Hitos Completados</p>\r\n            <p className=\"text-sm font-bold\">\r\n              {project?.milestones?.filter(m => m?.status === 'completed')?.length || 0}/\r\n              {project?.milestones?.length || 0}\r\n            </p>\r\n          </div>\r\n          <div className=\"p-3 bg-gray-50 rounded-lg text-center\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Progreso Promedio</p>\r\n            <p className=\"text-sm font-bold\">\r\n              {Math.round((project?.milestones?.reduce((acc, m) => acc + (m?.progress || 0), 0) || 0) / (project?.milestones?.length || 1))}%\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExecutionProgressPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst ClientCommunicationPanel = ({ project, onAddCommunication }) => {\r\n  const [newCommunication, setNewCommunication] = useState({\r\n    type: 'email',\r\n    content: '',\r\n    urgency: 'normal',\r\n    participants: []\r\n  });\r\n  \r\n  const [participantInput, setParticipantInput] = useState('');\r\n\r\n  const handleAddParticipant = () => {\r\n    if (participantInput?.trim() && !newCommunication?.participants?.includes(participantInput?.trim())) {\r\n      setNewCommunication(prev => ({\r\n        ...prev,\r\n        participants: [...prev?.participants, participantInput?.trim()]\r\n      }));\r\n      setParticipantInput('');\r\n    }\r\n  };\r\n\r\n  const handleRemoveParticipant = (participant) => {\r\n    setNewCommunication(prev => ({\r\n      ...prev,\r\n      participants: prev?.participants?.filter(p => p !== participant)\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!newCommunication?.content?.trim()) return;\r\n\r\n    const communication = {\r\n      id: `comm-${Date.now()}`,\r\n      type: newCommunication?.type,\r\n      date: new Date()?.toISOString()?.split('T')?.[0],\r\n      content: newCommunication?.content,\r\n      participants: newCommunication?.participants?.length > 0 ? newCommunication?.participants : [project?.clientContact?.name],\r\n      urgency: newCommunication?.urgency,\r\n      timestamp: new Date()?.toISOString()\r\n    };\r\n\r\n    onAddCommunication?.(communication);\r\n    \r\n    // Reset form\r\n    setNewCommunication({\r\n      type: 'email',\r\n      content: '',\r\n      urgency: 'normal',\r\n      participants: []\r\n    });\r\n  };\r\n\r\n  const getCommunicationIcon = (type) => {\r\n    switch (type) {\r\n      case 'whatsapp': return 'MessageCircle';\r\n      case 'email': return 'Mail';\r\n      case 'phone': return 'Phone';\r\n      case 'meeting': return 'Users';\r\n      default: return 'MessageCircle';\r\n    }\r\n  };\r\n\r\n  const getUrgencyColor = (urgency) => {\r\n    switch (urgency) {\r\n      case 'urgent': return 'text-red-600 bg-red-100';\r\n      case 'high': return 'text-orange-600 bg-orange-100';\r\n      case 'normal': return 'text-blue-600 bg-blue-100';\r\n      case 'low': return 'text-green-600 bg-green-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <h5 className=\"font-medium text-sm\">Comunicaci贸n con Cliente</h5>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          Punto de contacto principal durante la ejecuci贸n del proyecto\r\n        </p>\r\n\r\n        {/* Client Contact Info */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name=\"User\" size={16} className=\"text-blue-600\" />\r\n            <span className=\"font-medium text-sm\">Contacto Principal</span>\r\n          </div>\r\n          <div className=\"text-sm space-y-1\">\r\n            <p><strong>{project?.clientContact?.name}</strong></p>\r\n            <p className=\"text-muted-foreground\">{project?.clientContact?.phone}</p>\r\n            <p className=\"text-muted-foreground\">{project?.clientContact?.email}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recent Communications */}\r\n        <div className=\"space-y-3\">\r\n          <h6 className=\"font-medium text-sm\">Comunicaciones Recientes</h6>\r\n          \r\n          <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n            {project?.communications?.slice(-5)?.reverse()?.map((comm) => (\r\n              <div key={comm?.id} className=\"p-3 border rounded-lg\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon \r\n                      name={getCommunicationIcon(comm?.type)} \r\n                      size={14} \r\n                      className=\"text-muted-foreground\" \r\n                    />\r\n                    <span className=\"text-xs text-muted-foreground capitalize\">\r\n                      {comm?.type}\r\n                    </span>\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      {new Date(comm?.date)?.toLocaleDateString()}\r\n                    </span>\r\n                  </div>\r\n                  <span className={`text-xs px-2 py-1 rounded ${getUrgencyColor(comm?.urgency)}`}>\r\n                    {comm?.urgency === 'urgent' ? 'Urgente' :\r\n                     comm?.urgency === 'high' ? 'Alta' :\r\n                     comm?.urgency === 'normal' ? 'Normal' : 'Baja'}\r\n                  </span>\r\n                </div>\r\n                \r\n                <p className=\"text-sm text-foreground mb-2\">\r\n                  {comm?.content}\r\n                </p>\r\n                \r\n                {comm?.participants?.length > 0 && (\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Icon name=\"Users\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      {comm?.participants?.join(', ')}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            \r\n            {(!project?.communications || project?.communications?.length === 0) && (\r\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                No hay comunicaciones registradas\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* New Communication Form */}\r\n        <div className=\"space-y-3 p-3 border rounded-lg bg-gray-50\">\r\n          <h6 className=\"font-medium text-sm\">Nueva Comunicaci贸n</h6>\r\n          \r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <div>\r\n              <label className=\"text-xs font-medium block mb-1\">Tipo</label>\r\n              <select\r\n                value={newCommunication?.type}\r\n                onChange={(e) => setNewCommunication(prev => ({ ...prev, type: e?.target?.value }))}\r\n                className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\r\n              >\r\n                <option value=\"email\">Email</option>\r\n                <option value=\"whatsapp\">WhatsApp</option>\r\n                <option value=\"phone\">Tel茅fono</option>\r\n                <option value=\"meeting\">Reuni贸n</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"text-xs font-medium block mb-1\">Urgencia</label>\r\n              <select\r\n                value={newCommunication?.urgency}\r\n                onChange={(e) => setNewCommunication(prev => ({ ...prev, urgency: e?.target?.value }))}\r\n                className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\r\n              >\r\n                <option value=\"low\">Baja</option>\r\n                <option value=\"normal\">Normal</option>\r\n                <option value=\"high\">Alta</option>\r\n                <option value=\"urgent\">Urgente</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-xs font-medium block mb-1\">Contenido</label>\r\n            <textarea\r\n              value={newCommunication?.content}\r\n              onChange={(e) => setNewCommunication(prev => ({ ...prev, content: e?.target?.value }))}\r\n              placeholder=\"Descripci贸n de la comunicaci贸n, acuerdos, seguimientos...\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          {/* Participants */}\r\n          <div>\r\n            <label className=\"text-xs font-medium block mb-1\">Participantes</label>\r\n            <div className=\"flex items-center space-x-2 mb-2\">\r\n              <Input\r\n                type=\"text\"\r\n                value={participantInput}\r\n                onChange={(e) => setParticipantInput(e?.target?.value)}\r\n                placeholder=\"Nombre del participante...\"\r\n                className=\"text-sm flex-1\"\r\n                onKeyPress={(e) => e?.key === 'Enter' && handleAddParticipant()}\r\n              />\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"Plus\"\r\n                onClick={handleAddParticipant}\r\n              />\r\n            </div>\r\n            \r\n            {newCommunication?.participants?.length > 0 && (\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {newCommunication?.participants?.map((participant, index) => (\r\n                  <span\r\n                    key={index}\r\n                    className=\"inline-flex items-center space-x-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs\"\r\n                  >\r\n                    <span>{participant}</span>\r\n                    <button\r\n                      onClick={() => handleRemoveParticipant(participant)}\r\n                      className=\"hover:text-blue-600\"\r\n                    >\r\n                      <Icon name=\"X\" size={12} />\r\n                    </button>\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <Button\r\n            onClick={handleSubmit}\r\n            disabled={!newCommunication?.content?.trim()}\r\n            iconName=\"Send\"\r\n            iconPosition=\"left\"\r\n            size=\"sm\"\r\n            className=\"w-full\"\r\n          >\r\n            Registrar Comunicaci贸n\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Quick Communication Templates */}\r\n        <div className=\"space-y-2\">\r\n          <h6 className=\"font-medium text-sm\">Plantillas R谩pidas</h6>\r\n          <div className=\"grid grid-cols-1 gap-2\">\r\n            {[\r\n              'Actualizaci贸n semanal de progreso',\r\n              'Solicitud de acceso a nueva 谩rea',\r\n              'Confirmaci贸n de entrega de materiales',\r\n              'Programaci贸n de inspecci贸n',\r\n              'Notificaci贸n de hito completado'\r\n            ]?.map((template) => (\r\n              <button\r\n                key={template}\r\n                onClick={() => setNewCommunication(prev => ({ \r\n                  ...prev, \r\n                  content: template \r\n                }))}\r\n                className=\"text-left px-3 py-2 border rounded-lg hover:bg-gray-50 text-sm\"\r\n              >\r\n                {template}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientCommunicationPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst ChangeRequestPanel = ({ project, onRequestChange }) => {\r\n  const [newChangeRequest, setNewChangeRequest] = useState({\r\n    description: '',\r\n    reason: '',\r\n    commercialImpact: {\r\n      cost: '',\r\n      timeImpact: ''\r\n    },\r\n    urgency: 'normal'\r\n  });\r\n\r\n  const [showForm, setShowForm] = useState(false);\r\n\r\n  const handleSubmit = () => {\r\n    if (!newChangeRequest?.description?.trim()) return;\r\n\r\n    const changeRequest = {\r\n      id: `change-${Date.now()}`,\r\n      description: newChangeRequest?.description,\r\n      reason: newChangeRequest?.reason,\r\n      requestDate: new Date()?.toISOString()?.split('T')?.[0],\r\n      status: 'pending',\r\n      commercialImpact: {\r\n        cost: parseFloat(newChangeRequest?.commercialImpact?.cost) || 0,\r\n        timeImpact: newChangeRequest?.commercialImpact?.timeImpact\r\n      },\r\n      urgency: newChangeRequest?.urgency,\r\n      requestedBy: project?.salesRep\r\n    };\r\n\r\n    onRequestChange?.(changeRequest);\r\n    \r\n    // Reset form\r\n    setNewChangeRequest({\r\n      description: '',\r\n      reason: '',\r\n      commercialImpact: { cost: '', timeImpact: '' },\r\n      urgency: 'normal'\r\n    });\r\n    setShowForm(false);\r\n  };\r\n\r\n  const handleApproveChange = (changeId) => {\r\n    // This would update the change status to approved\r\n  // console.log eliminado\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'text-yellow-600 bg-yellow-100';\r\n      case 'approved': return 'text-green-600 bg-green-100';\r\n      case 'rejected': return 'text-red-600 bg-red-100';\r\n      case 'in_progress': return 'text-blue-600 bg-blue-100';\r\n      case 'completed': return 'text-green-600 bg-green-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getUrgencyColor = (urgency) => {\r\n    switch (urgency) {\r\n      case 'urgent': return 'text-red-600 bg-red-100';\r\n      case 'high': return 'text-orange-600 bg-orange-100';\r\n      case 'normal': return 'text-blue-600 bg-blue-100';\r\n      case 'low': return 'text-green-600 bg-green-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h5 className=\"font-medium text-sm\">Gesti贸n de Cambios</h5>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Cambios con impacto comercial durante la ejecuci贸n (Pasos 21-24)\r\n            </p>\r\n          </div>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Plus\"\r\n            onClick={() => setShowForm(!showForm)}\r\n          >\r\n            Nuevo Cambio\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Existing Change Requests */}\r\n        <div className=\"space-y-3\">\r\n          <h6 className=\"font-medium text-sm\">Solicitudes de Cambio</h6>\r\n          \r\n          <div className=\"space-y-3 max-h-80 overflow-y-auto\">\r\n            {project?.changeRequests?.map((change) => (\r\n              <div key={change?.id} className=\"p-3 border rounded-lg\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex-1\">\r\n                    <h4 className=\"font-medium text-sm mb-1\">\r\n                      {change?.description}\r\n                    </h4>\r\n                    <p className=\"text-xs text-muted-foreground mb-2\">\r\n                      Solicitado el {new Date(change?.requestDate)?.toLocaleDateString()}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex flex-col items-end space-y-1\">\r\n                    <span className={`text-xs px-2 py-1 rounded ${getStatusColor(change?.status)}`}>\r\n                      {change?.status === 'pending' ? 'Pendiente' :\r\n                       change?.status === 'approved' ? 'Aprobado' :\r\n                       change?.status === 'rejected' ? 'Rechazado' :\r\n                       change?.status === 'in_progress' ? 'En Proceso' : 'Completado'}\r\n                    </span>\r\n                    <span className={`text-xs px-2 py-1 rounded ${getUrgencyColor(change?.urgency)}`}>\r\n                      {change?.urgency === 'urgent' ? 'Urgente' :\r\n                       change?.urgency === 'high' ? 'Alta' :\r\n                       change?.urgency === 'normal' ? 'Normal' : 'Baja'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {change?.reason && (\r\n                  <p className=\"text-sm text-muted-foreground mb-2\">\r\n                    <strong>Raz贸n:</strong> {change?.reason}\r\n                  </p>\r\n                )}\r\n\r\n                {/* Commercial Impact */}\r\n                {change?.commercialImpact && (\r\n                  <div className=\"p-2 bg-gray-50 rounded mb-2\">\r\n                    <h6 className=\"text-xs font-medium mb-1\">Impacto Comercial</h6>\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                      {change?.commercialImpact?.cost > 0 && (\r\n                        <div>\r\n                          <span className=\"text-xs text-muted-foreground\">Costo:</span>\r\n                          <p className=\"text-sm font-medium\">\r\n                            ${change?.commercialImpact?.cost?.toLocaleString()}\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                      {change?.commercialImpact?.timeImpact && (\r\n                        <div>\r\n                          <span className=\"text-xs text-muted-foreground\">Tiempo:</span>\r\n                          <p className=\"text-sm font-medium\">\r\n                            {change?.commercialImpact?.timeImpact}\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {change?.approvalDate && (\r\n                  <p className=\"text-xs text-green-600\">\r\n                    <strong>Aprobado el:</strong> {new Date(change?.approvalDate)?.toLocaleDateString()}\r\n                  </p>\r\n                )}\r\n\r\n                {/* Actions for pending changes */}\r\n                {change?.status === 'pending' && (\r\n                  <div className=\"flex items-center space-x-2 mt-3 pt-2 border-t\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      iconName=\"Check\"\r\n                      onClick={() => handleApproveChange(change?.id)}\r\n                      className=\"text-green-600 border-green-600 hover:bg-green-50\"\r\n                    >\r\n                      Aprobar\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline\" \r\n                      size=\"sm\"\r\n                      iconName=\"X\"\r\n                      className=\"text-red-600 border-red-600 hover:bg-red-50\"\r\n                    >\r\n                      Rechazar\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Implementation status for approved changes */}\r\n                {change?.status === 'approved' && change?.implementation && (\r\n                  <div className=\"mt-2 p-2 bg-blue-50 rounded\">\r\n                    <p className=\"text-xs text-blue-600\">\r\n                      <strong>Implementaci贸n:</strong> {change?.implementation}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            \r\n            {(!project?.changeRequests || project?.changeRequests?.length === 0) && (\r\n              <div className=\"text-center py-8\">\r\n                <Icon name=\"FileEdit\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                <p className=\"text-sm text-muted-foreground\">No hay solicitudes de cambio</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* New Change Request Form */}\r\n        {showForm && (\r\n          <div className=\"space-y-3 p-3 border rounded-lg bg-gray-50\">\r\n            <h6 className=\"font-medium text-sm\">Nueva Solicitud de Cambio</h6>\r\n            \r\n            <div>\r\n              <label className=\"text-xs font-medium block mb-1\">Descripci贸n del Cambio</label>\r\n              <textarea\r\n                value={newChangeRequest?.description}\r\n                onChange={(e) => setNewChangeRequest(prev => ({ ...prev, description: e?.target?.value }))}\r\n                placeholder=\"Descripci贸n detallada del cambio solicitado...\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n                rows={3}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"text-xs font-medium block mb-1\">Raz贸n del Cambio</label>\r\n              <textarea\r\n                value={newChangeRequest?.reason}\r\n                onChange={(e) => setNewChangeRequest(prev => ({ ...prev, reason: e?.target?.value }))}\r\n                placeholder=\"Justificaci贸n del cambio solicitado...\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n                rows={2}\r\n              />\r\n            </div>\r\n\r\n            {/* Commercial Impact */}\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-xs font-medium\">Impacto Comercial</label>\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <div>\r\n                  <label className=\"text-xs text-muted-foreground block mb-1\">Costo Adicional</label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    value={newChangeRequest?.commercialImpact?.cost}\r\n                    onChange={(e) => setNewChangeRequest(prev => ({ \r\n                      ...prev, \r\n                      commercialImpact: { ...prev?.commercialImpact, cost: e?.target?.value }\r\n                    }))}\r\n                    placeholder=\"0\"\r\n                    className=\"text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs text-muted-foreground block mb-1\">Impacto en Tiempo</label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={newChangeRequest?.commercialImpact?.timeImpact}\r\n                    onChange={(e) => setNewChangeRequest(prev => ({ \r\n                      ...prev, \r\n                      commercialImpact: { ...prev?.commercialImpact, timeImpact: e?.target?.value }\r\n                    }))}\r\n                    placeholder=\"ej. 2 semanas adicionales\"\r\n                    className=\"text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"text-xs font-medium block mb-1\">Urgencia</label>\r\n              <select\r\n                value={newChangeRequest?.urgency}\r\n                onChange={(e) => setNewChangeRequest(prev => ({ ...prev, urgency: e?.target?.value }))}\r\n                className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\r\n              >\r\n                <option value=\"low\">Baja</option>\r\n                <option value=\"normal\">Normal</option>\r\n                <option value=\"high\">Alta</option>\r\n                <option value=\"urgent\">Urgente</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Button\r\n                onClick={handleSubmit}\r\n                disabled={!newChangeRequest?.description?.trim()}\r\n                iconName=\"FileEdit\"\r\n                iconPosition=\"left\"\r\n                size=\"sm\"\r\n                className=\"flex-1\"\r\n              >\r\n                Solicitar Cambio\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"X\"\r\n                onClick={() => setShowForm(false)}\r\n              >\r\n                Cancelar\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Change Management Guidelines */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name=\"Info\" size={16} className=\"text-blue-600\" />\r\n            <span className=\"font-medium text-sm text-blue-800\">Proceso de Cambios</span>\r\n          </div>\r\n          <ul className=\"text-xs text-blue-700 space-y-1\">\r\n            <li>1. Levantar cambio con impacto comercial</li>\r\n            <li>2. Comunicar ajuste y solicitar aprobaci贸n formal</li>\r\n            <li>3. Registrar adenda/condiciones del cambio</li>\r\n            <li>4. Notificar internamente para implementaci贸n</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangeRequestPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\nconst DeliveryManagementPanel = ({ project, onUpdate }) => {\r\n  const [deliveryUpdate, setDeliveryUpdate] = useState({\r\n    scheduledDate: project?.delivery?.scheduledDate || '',\r\n    status: project?.delivery?.status || 'scheduled',\r\n    notes: ''\r\n  });\r\n\r\n  const [acceptanceChecklist, setAcceptanceChecklist] = useState(\r\n    project?.delivery?.clientAcceptance?.checklist || []\r\n  );\r\n\r\n  const [correctionRequest, setCorrectionRequest] = useState({\r\n    description: '',\r\n    timeline: '',\r\n    evidence: ''\r\n  });\r\n\r\n  const handleChecklistUpdate = (index, checked) => {\r\n    const updatedChecklist = acceptanceChecklist?.map((item, i) => \r\n      i === index ? { ...item, checked } : item\r\n    );\r\n    setAcceptanceChecklist(updatedChecklist);\r\n    \r\n    onUpdate?.({\r\n      delivery: {\r\n        ...project?.delivery,\r\n        clientAcceptance: {\r\n          ...project?.delivery?.clientAcceptance,\r\n          checklist: updatedChecklist\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleDeliveryConfirmation = () => {\r\n    const allChecked = acceptanceChecklist?.every(item => item?.checked);\r\n    const deliveryData = {\r\n      ...project?.delivery,\r\n      status: allChecked ? 'accepted' : 'pending_corrections',\r\n      acceptanceDate: allChecked ? new Date()?.toISOString()?.split('T')?.[0] : null,\r\n      clientAcceptance: {\r\n        ...project?.delivery?.clientAcceptance,\r\n        status: allChecked ? 'accepted' : 'pending',\r\n        checklist: acceptanceChecklist\r\n      }\r\n    };\r\n\r\n    onUpdate?.({ delivery: deliveryData });\r\n  };\r\n\r\n  const handleCorrectionRequest = () => {\r\n    if (!correctionRequest?.description?.trim()) return;\r\n\r\n    const correctionData = {\r\n      id: `correction-${Date.now()}`,\r\n      description: correctionRequest?.description,\r\n      timeline: correctionRequest?.timeline,\r\n      evidence: correctionRequest?.evidence,\r\n      requestDate: new Date()?.toISOString()?.split('T')?.[0],\r\n      status: 'pending'\r\n    };\r\n\r\n    onUpdate?.({\r\n      delivery: {\r\n        ...project?.delivery,\r\n        corrections: [...(project?.delivery?.corrections || []), correctionData],\r\n        status: 'corrections_requested'\r\n      }\r\n    });\r\n\r\n    setCorrectionRequest({ description: '', timeline: '', evidence: '' });\r\n  };\r\n\r\n  const getDeliveryTypeIcon = (type) => {\r\n    switch (type) {\r\n      case 'construction': return 'Building';\r\n      case 'pieces': return 'Package';\r\n      default: return 'Truck';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'scheduled': return 'text-blue-600 bg-blue-100';\r\n      case 'in_progress': return 'text-yellow-600 bg-yellow-100';\r\n      case 'accepted': return 'text-green-600 bg-green-100';\r\n      case 'corrections_requested': return 'text-orange-600 bg-orange-100';\r\n      case 'pending_corrections': return 'text-red-600 bg-red-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <h5 className=\"font-medium text-sm\">Gesti贸n de Entrega</h5>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          Coordinaci贸n de entrega final y gesti贸n de conformidad (Pasos 27-32)\r\n        </p>\r\n\r\n        {/* Delivery Type */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name={getDeliveryTypeIcon(project?.delivery?.type)} size={16} className=\"text-blue-600\" />\r\n            <span className=\"font-medium text-sm\">Tipo de Entrega</span>\r\n          </div>\r\n          <p className=\"text-sm\">\r\n            {project?.delivery?.type === 'construction' ? 'Obra / Construcci贸n' : 'Piezas / Equipos'}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Delivery Status */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h6 className=\"font-medium text-sm\">Estado de Entrega</h6>\r\n            <span className={`text-xs px-2 py-1 rounded ${getStatusColor(project?.delivery?.status)}`}>\r\n              {project?.delivery?.status === 'scheduled' ? 'Programada' :\r\n               project?.delivery?.status === 'in_progress' ? 'En Progreso' :\r\n               project?.delivery?.status === 'accepted' ? 'Aceptada' :\r\n               project?.delivery?.status === 'corrections_requested' ? 'Correcciones Solicitadas' :\r\n               project?.delivery?.status === 'pending_corrections' ? 'Pendiente Correcciones' : 'Pendiente'}\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 gap-3\">\r\n            <div>\r\n              <label className=\"text-sm font-medium block mb-1\">Fecha Programada</label>\r\n              <Input\r\n                type=\"date\"\r\n                value={deliveryUpdate?.scheduledDate}\r\n                onChange={(e) => setDeliveryUpdate(prev => ({ ...prev, scheduledDate: e?.target?.value }))}\r\n                className=\"text-sm\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Deliverables */}\r\n        {project?.delivery?.deliverables && (\r\n          <div className=\"space-y-3\">\r\n            <h6 className=\"font-medium text-sm\">Entregables</h6>\r\n            <div className=\"space-y-2\">\r\n              {project?.delivery?.deliverables?.map((item, index) => (\r\n                <div key={index} className=\"flex items-center space-x-3 p-2 border rounded-lg\">\r\n                  <Icon name=\"Package\" size={16} className=\"text-muted-foreground\" />\r\n                  <span className=\"text-sm flex-1\">{item}</span>\r\n                  <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Client Acceptance Checklist */}\r\n        {project?.delivery?.clientAcceptance && (\r\n          <div className=\"space-y-3\">\r\n            <h6 className=\"font-medium text-sm\">Lista de Aceptaci贸n del Cliente</h6>\r\n            \r\n            <div className=\"space-y-2\">\r\n              {acceptanceChecklist?.map((item, index) => (\r\n                <label key={index} className=\"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50\">\r\n                  <Checkbox\r\n                    checked={item?.checked || false}\r\n                    onChange={(checked) => handleChecklistUpdate(index, checked)}\r\n                  />\r\n                  <span className=\"text-sm flex-1\">{item?.item}</span>\r\n                  {item?.checked && (\r\n                    <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                  )}\r\n                </label>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"p-3 bg-gray-50 rounded-lg\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"font-medium text-sm\">Progreso de Aceptaci贸n</span>\r\n                <span className=\"text-sm font-bold\">\r\n                  {acceptanceChecklist?.filter(item => item?.checked)?.length || 0}/\r\n                  {acceptanceChecklist?.length || 0}\r\n                </span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2 mt-2\">\r\n                <div \r\n                  className=\"bg-green-600 h-2 rounded-full transition-all\"\r\n                  style={{ \r\n                    width: `${((acceptanceChecklist?.filter(item => item?.checked)?.length || 0) / (acceptanceChecklist?.length || 1)) * 100}%` \r\n                  }}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n\r\n            <Button\r\n              onClick={handleDeliveryConfirmation}\r\n              disabled={!acceptanceChecklist?.every(item => item?.checked)}\r\n              iconName=\"CheckCircle\"\r\n              iconPosition=\"left\"\r\n              size=\"sm\"\r\n              className=\"w-full\"\r\n            >\r\n              Confirmar Entrega\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Correction Management */}\r\n        {project?.delivery?.status === 'corrections_requested' || project?.delivery?.corrections?.length > 0 && (\r\n          <div className=\"space-y-3\">\r\n            <h6 className=\"font-medium text-sm\">Gesti贸n de Correcciones</h6>\r\n            \r\n            {/* Existing Corrections */}\r\n            {project?.delivery?.corrections?.map((correction) => (\r\n              <div key={correction?.id} className=\"p-3 border rounded-lg bg-orange-50\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <h4 className=\"font-medium text-sm\">{correction?.description}</h4>\r\n                  <span className={`text-xs px-2 py-1 rounded ${getStatusColor(correction?.status)}`}>\r\n                    {correction?.status === 'pending' ? 'Pendiente' :\r\n                     correction?.status === 'in_progress' ? 'En Proceso' : 'Completada'}\r\n                  </span>\r\n                </div>\r\n                \r\n                {correction?.timeline && (\r\n                  <p className=\"text-sm text-muted-foreground mb-1\">\r\n                    <strong>Tiempo estimado:</strong> {correction?.timeline}\r\n                  </p>\r\n                )}\r\n                \r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Solicitado el {new Date(correction?.requestDate)?.toLocaleDateString()}\r\n                </p>\r\n              </div>\r\n            ))}\r\n\r\n            {/* New Correction Request */}\r\n            <div className=\"space-y-3 p-3 border rounded-lg bg-gray-50\">\r\n              <h6 className=\"font-medium text-sm\">Solicitar Correcci贸n</h6>\r\n              \r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Descripci贸n</label>\r\n                <textarea\r\n                  value={correctionRequest?.description}\r\n                  onChange={(e) => setCorrectionRequest(prev => ({ ...prev, description: e?.target?.value }))}\r\n                  placeholder=\"Descripci贸n detallada de la correcci贸n necesaria...\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n                  rows={2}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Tiempo Estimado</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={correctionRequest?.timeline}\r\n                  onChange={(e) => setCorrectionRequest(prev => ({ ...prev, timeline: e?.target?.value }))}\r\n                  placeholder=\"ej. 3-5 d铆as h谩biles\"\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Evidencia</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={correctionRequest?.evidence}\r\n                  onChange={(e) => setCorrectionRequest(prev => ({ ...prev, evidence: e?.target?.value }))}\r\n                  placeholder=\"Fotograf铆as, documentos de referencia...\"\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <Button\r\n                onClick={handleCorrectionRequest}\r\n                disabled={!correctionRequest?.description?.trim()}\r\n                iconName=\"AlertTriangle\"\r\n                iconPosition=\"left\"\r\n                size=\"sm\"\r\n                className=\"w-full\"\r\n              >\r\n                Solicitar Correcci贸n\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Delivery Completion */}\r\n        {project?.delivery?.status === 'accepted' && (\r\n          <div className=\"p-3 bg-green-50 rounded-lg\">\r\n            <div className=\"flex items-center space-x-2 mb-2\">\r\n              <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n              <span className=\"font-medium text-sm text-green-800\">Entrega Completada</span>\r\n            </div>\r\n            <p className=\"text-sm text-green-700\">\r\n              Aceptada el {new Date(project?.delivery?.acceptanceDate)?.toLocaleDateString()}\r\n            </p>\r\n            {project?.delivery?.clientFeedback && (\r\n              <p className=\"text-sm text-green-700 mt-1\">\r\n                <strong>Comentarios:</strong> {project?.delivery?.clientFeedback}\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Delivery Guidelines */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name=\"Info\" size={16} className=\"text-blue-600\" />\r\n            <span className=\"font-medium text-sm text-blue-800\">Proceso de Entrega</span>\r\n          </div>\r\n          <ul className=\"text-xs text-blue-700 space-y-1\">\r\n            <li>1. Verificar lista de aceptaci贸n del cliente</li>\r\n            <li>2. Coordinar entrega final y actas de conformidad</li>\r\n            <li>3. Gestionar correcciones si son necesarias</li>\r\n            <li>4. Obtener aceptaci贸n final del cliente</li>\r\n            <li>5. Proceder a facturaci贸n</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeliveryManagementPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst TraceabilityPanel = ({ project, onUpdate }) => {\r\n  const [newEvidence, setNewEvidence] = useState({\r\n    type: 'photo',\r\n    description: '',\r\n    date: new Date()?.toISOString()?.split('T')?.[0],\r\n    file: ''\r\n  });\r\n\r\n  const [newAgreement, setNewAgreement] = useState({\r\n    description: '',\r\n    date: new Date()?.toISOString()?.split('T')?.[0],\r\n    participants: []\r\n  });\r\n\r\n  const [showEvidenceForm, setShowEvidenceForm] = useState(false);\r\n  const [showAgreementForm, setShowAgreementForm] = useState(false);\r\n\r\n  const handleAddEvidence = () => {\r\n    if (!newEvidence?.description?.trim()) return;\r\n\r\n    const evidence = {\r\n      id: `evidence-${Date.now()}`,\r\n      type: newEvidence?.type,\r\n      description: newEvidence?.description,\r\n      date: newEvidence?.date,\r\n      file: newEvidence?.file,\r\n      addedBy: project?.salesRep,\r\n      timestamp: new Date()?.toISOString()\r\n    };\r\n\r\n    const updatedTraceability = {\r\n      ...project?.traceability,\r\n      evidence: [...(project?.traceability?.evidence || []), evidence]\r\n    };\r\n\r\n    onUpdate?.(updatedTraceability);\r\n    setNewEvidence({\r\n      type: 'photo',\r\n      description: '',\r\n      date: new Date()?.toISOString()?.split('T')?.[0],\r\n      file: ''\r\n    });\r\n    setShowEvidenceForm(false);\r\n  };\r\n\r\n  const handleAddAgreement = () => {\r\n    if (!newAgreement?.description?.trim()) return;\r\n\r\n    const agreement = {\r\n      id: `agreement-${Date.now()}`,\r\n      description: newAgreement?.description,\r\n      date: newAgreement?.date,\r\n      participants: newAgreement?.participants,\r\n      registeredBy: project?.salesRep,\r\n      timestamp: new Date()?.toISOString()\r\n    };\r\n\r\n    const updatedTraceability = {\r\n      ...project?.traceability,\r\n      agreements: [...(project?.traceability?.agreements || []), agreement]\r\n    };\r\n\r\n    onUpdate?.(updatedTraceability);\r\n    setNewAgreement({\r\n      description: '',\r\n      date: new Date()?.toISOString()?.split('T')?.[0],\r\n      participants: []\r\n    });\r\n    setShowAgreementForm(false);\r\n  };\r\n\r\n  const getEvidenceIcon = (type) => {\r\n    switch (type) {\r\n      case 'photo': return 'Camera';\r\n      case 'document': return 'FileText';\r\n      case 'video': return 'Video';\r\n      case 'certificate': return 'Award';\r\n      default: return 'File';\r\n    }\r\n  };\r\n\r\n  const getEvidenceColor = (type) => {\r\n    switch (type) {\r\n      case 'photo': return 'text-blue-600 bg-blue-100';\r\n      case 'document': return 'text-green-600 bg-green-100';\r\n      case 'video': return 'text-purple-600 bg-purple-100';\r\n      case 'certificate': return 'text-yellow-600 bg-yellow-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <h5 className=\"font-medium text-sm\">Trazabilidad del Proyecto</h5>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          Mantener trazabilidad completa de comunicaciones, acuerdos y evidencias (Paso 26)\r\n        </p>\r\n\r\n        {/* Communications History */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h6 className=\"font-medium text-sm\">Historial de Comunicaciones</h6>\r\n            <span className=\"text-xs text-muted-foreground\">\r\n              {project?.communications?.length || 0} registros\r\n            </span>\r\n          </div>\r\n          \r\n          <div className=\"space-y-2 max-h-40 overflow-y-auto\">\r\n            {project?.communications?.slice(-3)?.reverse()?.map((comm) => (\r\n              <div key={comm?.id} className=\"p-2 border rounded-lg\">\r\n                <div className=\"flex items-center space-x-2 mb-1\">\r\n                  <Icon \r\n                    name={comm?.type === 'whatsapp' ? 'MessageCircle' : \r\n                          comm?.type === 'email' ? 'Mail' : \r\n                          comm?.type === 'phone' ? 'Phone' : 'Users'} \r\n                    size={12} \r\n                    className=\"text-muted-foreground\" \r\n                  />\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    {new Date(comm?.date)?.toLocaleDateString()}\r\n                  </span>\r\n                  <span className=\"text-xs text-muted-foreground capitalize\">\r\n                    {comm?.type}\r\n                  </span>\r\n                </div>\r\n                <p className=\"text-xs text-foreground\">{comm?.content}</p>\r\n              </div>\r\n            ))}\r\n            \r\n            {(!project?.communications || project?.communications?.length === 0) && (\r\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                Sin comunicaciones registradas\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Agreements */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h6 className=\"font-medium text-sm\">Acuerdos y Compromisos</h6>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Plus\"\r\n              onClick={() => setShowAgreementForm(!showAgreementForm)}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"space-y-2\">\r\n            {project?.traceability?.agreements?.map((agreement) => (\r\n              <div key={agreement?.id} className=\"p-3 border rounded-lg bg-green-50\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium\">{agreement?.description}</p>\r\n                    <p className=\"text-xs text-muted-foreground mt-1\">\r\n                      {new Date(agreement?.date)?.toLocaleDateString()} - {agreement?.registeredBy}\r\n                    </p>\r\n                  </div>\r\n                  <Icon name=\"FileCheck\" size={16} className=\"text-green-600\" />\r\n                </div>\r\n                \r\n                {agreement?.participants?.length > 0 && (\r\n                  <div className=\"flex items-center space-x-1 mt-2\">\r\n                    <Icon name=\"Users\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      {agreement?.participants?.join(', ')}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            \r\n            {(!project?.traceability?.agreements || project?.traceability?.agreements?.length === 0) && (\r\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                Sin acuerdos registrados\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {showAgreementForm && (\r\n            <div className=\"space-y-3 p-3 border rounded-lg bg-gray-50\">\r\n              <h6 className=\"font-medium text-sm\">Nuevo Acuerdo</h6>\r\n              \r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Descripci贸n</label>\r\n                <textarea\r\n                  value={newAgreement?.description}\r\n                  onChange={(e) => setNewAgreement(prev => ({ ...prev, description: e?.target?.value }))}\r\n                  placeholder=\"Descripci贸n del acuerdo o compromiso...\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n                  rows={2}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Fecha</label>\r\n                <Input\r\n                  type=\"date\"\r\n                  value={newAgreement?.date}\r\n                  onChange={(e) => setNewAgreement(prev => ({ ...prev, date: e?.target?.value }))}\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Button\r\n                  onClick={handleAddAgreement}\r\n                  disabled={!newAgreement?.description?.trim()}\r\n                  iconName=\"FileCheck\"\r\n                  iconPosition=\"left\"\r\n                  size=\"sm\"\r\n                  className=\"flex-1\"\r\n                >\r\n                  Registrar Acuerdo\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  iconName=\"X\"\r\n                  onClick={() => setShowAgreementForm(false)}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Evidence Management */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h6 className=\"font-medium text-sm\">Evidencias y Documentaci贸n</h6>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Plus\"\r\n              onClick={() => setShowEvidenceForm(!showEvidenceForm)}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"space-y-2\">\r\n            {project?.traceability?.evidence?.map((evidence) => (\r\n              <div key={evidence?.id} className=\"p-3 border rounded-lg\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon \r\n                      name={getEvidenceIcon(evidence?.type)} \r\n                      size={16} \r\n                      className={getEvidenceColor(evidence?.type)?.split(' ')?.[0]}\r\n                    />\r\n                    <div>\r\n                      <p className=\"text-sm font-medium\">{evidence?.description}</p>\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        {new Date(evidence?.date)?.toLocaleDateString()} - {evidence?.addedBy}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <span className={`text-xs px-2 py-1 rounded ${getEvidenceColor(evidence?.type)}`}>\r\n                    {evidence?.type === 'photo' ? 'Foto' :\r\n                     evidence?.type === 'document' ? 'Documento' :\r\n                     evidence?.type === 'video' ? 'Video' : 'Certificado'}\r\n                  </span>\r\n                </div>\r\n                \r\n                {evidence?.file && (\r\n                  <div className=\"flex items-center space-x-2 mt-2\">\r\n                    <Icon name=\"Paperclip\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground\">{evidence?.file}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            \r\n            {(!project?.traceability?.evidence || project?.traceability?.evidence?.length === 0) && (\r\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                Sin evidencias registradas\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {showEvidenceForm && (\r\n            <div className=\"space-y-3 p-3 border rounded-lg bg-gray-50\">\r\n              <h6 className=\"font-medium text-sm\">Nueva Evidencia</h6>\r\n              \r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Tipo</label>\r\n                <select\r\n                  value={newEvidence?.type}\r\n                  onChange={(e) => setNewEvidence(prev => ({ ...prev, type: e?.target?.value }))}\r\n                  className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\r\n                >\r\n                  <option value=\"photo\">Fotograf铆a</option>\r\n                  <option value=\"document\">Documento</option>\r\n                  <option value=\"video\">Video</option>\r\n                  <option value=\"certificate\">Certificado</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Descripci贸n</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={newEvidence?.description}\r\n                  onChange={(e) => setNewEvidence(prev => ({ ...prev, description: e?.target?.value }))}\r\n                  placeholder=\"Descripci贸n de la evidencia...\"\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Fecha</label>\r\n                <Input\r\n                  type=\"date\"\r\n                  value={newEvidence?.date}\r\n                  onChange={(e) => setNewEvidence(prev => ({ ...prev, date: e?.target?.value }))}\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Archivo</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={newEvidence?.file}\r\n                  onChange={(e) => setNewEvidence(prev => ({ ...prev, file: e?.target?.value }))}\r\n                  placeholder=\"Nombre del archivo o referencia...\"\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Button\r\n                  onClick={handleAddEvidence}\r\n                  disabled={!newEvidence?.description?.trim()}\r\n                  iconName=\"Camera\"\r\n                  iconPosition=\"left\"\r\n                  size=\"sm\"\r\n                  className=\"flex-1\"\r\n                >\r\n                  Registrar Evidencia\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  iconName=\"X\"\r\n                  onClick={() => setShowEvidenceForm(false)}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Traceability Summary */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name=\"Search\" size={16} className=\"text-blue-600\" />\r\n            <span className=\"font-medium text-sm text-blue-800\">Resumen de Trazabilidad</span>\r\n          </div>\r\n          <div className=\"grid grid-cols-3 gap-3\">\r\n            <div className=\"text-center\">\r\n              <p className=\"text-sm font-bold text-blue-800\">\r\n                {project?.communications?.length || 0}\r\n              </p>\r\n              <p className=\"text-xs text-blue-600\">Comunicaciones</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <p className=\"text-sm font-bold text-blue-800\">\r\n                {project?.traceability?.agreements?.length || 0}\r\n              </p>\r\n              <p className=\"text-xs text-blue-600\">Acuerdos</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <p className=\"text-sm font-bold text-blue-800\">\r\n                {project?.traceability?.evidence?.length || 0}\r\n              </p>\r\n              <p className=\"text-xs text-blue-600\">Evidencias</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TraceabilityPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\n\r\nimport StartupTrackingPanel from './components/StartupTrackingPanel';\r\nimport ExecutionProgressPanel from './components/ExecutionProgressPanel';\r\nimport ClientCommunicationPanel from './components/ClientCommunicationPanel';\r\nimport ChangeRequestPanel from './components/ChangeRequestPanel';\r\nimport DeliveryManagementPanel from './components/DeliveryManagementPanel';\r\nimport TraceabilityPanel from './components/TraceabilityPanel';\r\n\r\nconst SalesExecutionMonitoring = () => {\r\n  const [projects, setProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showControls, setShowControls] = useState(false);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n  const [activePanel, setActivePanel] = useState('execution');\r\n\r\n  // Execution phases following the Spanish workflow diagram (steps 17-32)\r\n  const executionPhases = [\r\n    {\r\n      id: 'work-order-generated',\r\n      name: 'Orden Generada',\r\n      description: 'WorkOrder interno generado con alcances finales',\r\n      color: 'bg-blue-600',\r\n      icon: 'FileText',\r\n      step: 17\r\n    },\r\n    {\r\n      id: 'startup-tracking',\r\n      name: 'Seguimiento de Arranque',\r\n      description: 'Confirmar fechas y responsable en campo',\r\n      color: 'bg-indigo-600',\r\n      icon: 'PlayCircle',\r\n      step: 19\r\n    },\r\n    {\r\n      id: 'execution-monitoring',\r\n      name: 'Monitoreo de Ejecuci贸n',\r\n      description: 'Punto de contacto del cliente durante la obra',\r\n      color: 'bg-purple-600',\r\n      icon: 'Activity',\r\n      step: 20\r\n    },\r\n    {\r\n      id: 'delivery-coordination',\r\n      name: 'Coordinaci贸n de Entrega',\r\n      description: 'Entrega final y gesti贸n de conformidad',\r\n      color: 'bg-orange-600',\r\n      icon: 'Truck',\r\n      step: 27\r\n    },\r\n    {\r\n      id: 'billing-process',\r\n      name: 'Proceso de Facturaci贸n',\r\n      description: 'Facturaci贸n y generaci贸n de recibo',\r\n      color: 'bg-green-600',\r\n      icon: 'Receipt',\r\n      step: 32\r\n    }\r\n  ];\r\n\r\n  // Mock execution projects data following the workflow\r\n  const mockProjects = [\r\n    {\r\n      id: \"EXEC-001\",\r\n      workOrderRef: \"WO-2024-UDG-001\",\r\n      clientName: \"Urban Development Group\",\r\n      projectType: \"construction\",\r\n      salesRep: \"Alejandro Torres\",\r\n      phase: \"startup-tracking\",\r\n      priority: \"high\",\r\n      contractValue: 3750000,\r\n      startDate: \"2024-04-15\",\r\n      estimatedEndDate: \"2024-08-30\",\r\n      clientContact: {\r\n        name: \"Arq. Sofia Ram铆rez\",\r\n        phone: \"+52 55 6789 0123\",\r\n        email: \"desarrollo@urbandevelopment.mx\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Sistema HVAC para centro comercial\",\r\n        location: \"Tijuana, Baja California\",\r\n        scope: \"Instalaci贸n completa de climatizaci贸n con controles inteligentes\"\r\n      },\r\n      fieldSupervisor: {\r\n        name: \"Ing. Roberto Campos\",\r\n        phone: \"+52 55 1111 2222\",\r\n        email: \"roberto.campos@aireflowpro.com\"\r\n      },\r\n      startup: {\r\n        confirmedDate: \"2024-04-15\",\r\n        status: \"confirmed\",\r\n        preWorkMeeting: \"2024-04-12\",\r\n        accessPermits: true,\r\n        safetyBriefing: true\r\n      },\r\n      milestones: [\r\n        {\r\n          id: \"milestone-1\",\r\n          name: \"Equipos principales instalados\",\r\n          targetDate: \"2024-05-15\",\r\n          status: \"pending\",\r\n          progress: 0\r\n        },\r\n        {\r\n          id: \"milestone-2\", \r\n          name: \"Ductos y conexiones completadas\",\r\n          targetDate: \"2024-06-30\",\r\n          status: \"pending\",\r\n          progress: 0\r\n        },\r\n        {\r\n          id: \"milestone-3\",\r\n          name: \"Pruebas y puesta en marcha\",\r\n          targetDate: \"2024-07-15\",\r\n          status: \"pending\", \r\n          progress: 0\r\n        },\r\n        {\r\n          id: \"milestone-4\",\r\n          name: \"Entrega final y documentaci贸n\",\r\n          targetDate: \"2024-08-30\",\r\n          status: \"pending\",\r\n          progress: 0\r\n        }\r\n      ],\r\n      communications: [\r\n        {\r\n          id: \"comm-exec-1\",\r\n          type: \"email\",\r\n          date: \"2024-03-30\",\r\n          content: \"Confirmaci贸n de inicio de obra para el 15 de abril\",\r\n          participants: [\"Arq. Sofia Ram铆rez\", \"Ing. Roberto Campos\"],\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      changeRequests: [],\r\n      traceability: {\r\n        agreements: [],\r\n        evidence: [],\r\n        communications: []\r\n      }\r\n    },\r\n    {\r\n      id: \"EXEC-002\",\r\n      workOrderRef: \"WO-2024-ABC-002\",\r\n      clientName: \"Corporaci贸n ABC\",\r\n      projectType: \"construction\",\r\n      salesRep: \"Mar铆a Garc铆a\",\r\n      phase: \"execution-monitoring\", \r\n      priority: \"urgent\",\r\n      contractValue: 2500000,\r\n      startDate: \"2024-03-20\",\r\n      estimatedEndDate: \"2024-06-20\",\r\n      clientContact: {\r\n        name: \"Ing. Carlos Rodriguez\",\r\n        phone: \"+52 55 1234 5678\",\r\n        email: \"contacto@corporacionabc.com\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Instalaci贸n de sistema HVAC para edificio corporativo\",\r\n        location: \"Ciudad de M茅xico\",\r\n        scope: \"Sistema completo de climatizaci贸n para 12 pisos\"\r\n      },\r\n      fieldSupervisor: {\r\n        name: \"Ing. Ana Mart铆nez\",\r\n        phone: \"+52 55 3333 4444\",\r\n        email: \"ana.martinez@aireflowpro.com\"\r\n      },\r\n      startup: {\r\n        confirmedDate: \"2024-03-20\",\r\n        status: \"completed\",\r\n        actualStartDate: \"2024-03-20\"\r\n      },\r\n      progress: {\r\n        overallProgress: 65,\r\n        currentPhase: \"Instalaci贸n de ductos - Pisos 7-12\",\r\n        nextMilestone: \"Instalaci贸n equipos principales\",\r\n        daysRemaining: 45\r\n      },\r\n      milestones: [\r\n        {\r\n          id: \"milestone-1\",\r\n          name: \"Preparaci贸n y permisos\",\r\n          targetDate: \"2024-03-25\",\r\n          status: \"completed\",\r\n          progress: 100,\r\n          completedDate: \"2024-03-24\"\r\n        },\r\n        {\r\n          id: \"milestone-2\",\r\n          name: \"Instalaci贸n pisos 1-6\",\r\n          targetDate: \"2024-04-30\",\r\n          status: \"completed\", \r\n          progress: 100,\r\n          completedDate: \"2024-04-28\"\r\n        },\r\n        {\r\n          id: \"milestone-3\",\r\n          name: \"Instalaci贸n pisos 7-12\",\r\n          targetDate: \"2024-05-30\",\r\n          status: \"in_progress\",\r\n          progress: 75\r\n        },\r\n        {\r\n          id: \"milestone-4\",\r\n          name: \"Pruebas y entrega\",\r\n          targetDate: \"2024-06-20\",\r\n          status: \"pending\",\r\n          progress: 0\r\n        }\r\n      ],\r\n      communications: [\r\n        {\r\n          id: \"comm-exec-2\",\r\n          type: \"whatsapp\",\r\n          date: \"2024-04-28\",\r\n          content: \"Cliente reporta satisfacci贸n con progreso. Solicita actualizaci贸n semanal\",\r\n          participants: [\"Ing. Carlos Rodriguez\"],\r\n          urgency: \"normal\"\r\n        },\r\n        {\r\n          id: \"comm-exec-3\", \r\n          type: \"email\",\r\n          date: \"2024-04-25\",\r\n          content: \"Env铆o de fotos de progreso y actualizaci贸n de cronograma\",\r\n          participants: [\"Ing. Carlos Rodriguez\", \"Mar铆a Garc铆a\"],\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      changeRequests: [\r\n        {\r\n          id: \"change-1\",\r\n          description: \"Agregar control individual por piso en lugar de control centralizado\",\r\n          requestDate: \"2024-04-20\",\r\n          status: \"approved\",\r\n          commercialImpact: {\r\n            cost: 180000,\r\n            timeImpact: \"2 semanas adicionales\"\r\n          },\r\n          approvalDate: \"2024-04-22\",\r\n          implementation: \"in_progress\"\r\n        }\r\n      ],\r\n      traceability: {\r\n        agreements: [\r\n          \"Cambio aprobado por email el 2024-04-22\",\r\n          \"Confirmaci贸n de costo adicional firmado\"\r\n        ],\r\n        evidence: [\r\n          \"Fotos de progreso pisos 1-6 completos\",\r\n          \"Certificado de calidad de materiales\"\r\n        ],\r\n        communications: [\r\n          \"Reuni贸n semanal de seguimiento establecida\",\r\n          \"Canal WhatsApp para comunicaci贸n urgente\"\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      id: \"EXEC-003\",\r\n      workOrderRef: \"WO-2024-TEC-003\",\r\n      clientName: \"Tech Solutions SA\",\r\n      projectType: \"pieces\",\r\n      salesRep: \"Patricia Morales\",\r\n      phase: \"delivery-coordination\",\r\n      priority: \"medium\", \r\n      contractValue: 1950000,\r\n      startDate: \"2024-02-15\",\r\n      estimatedEndDate: \"2024-04-30\",\r\n      clientContact: {\r\n        name: \"Lic. Miguel Hern谩ndez\",\r\n        phone: \"+52 55 2345 6789\",\r\n        email: \"infraestructura@techsolutions.com\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Modernizaci贸n de sistema de climatizaci贸n para oficinas\",\r\n        location: \"Puebla, Puebla\", \r\n        scope: \"Reemplazo de equipos obsoletos y optimizaci贸n energ茅tica\"\r\n      },\r\n      fieldSupervisor: {\r\n        name: \"Ing. Carlos Vega\",\r\n        phone: \"+52 55 5555 6666\",\r\n        email: \"carlos.vega@aireflowpro.com\"\r\n      },\r\n      progress: {\r\n        overallProgress: 95,\r\n        currentPhase: \"Pruebas finales y documentaci贸n\",\r\n        nextMilestone: \"Entrega final\",\r\n        daysRemaining: 5\r\n      },\r\n      delivery: {\r\n        type: \"pieces\",\r\n        scheduledDate: \"2024-04-30\",\r\n        status: \"scheduled\",\r\n        deliverables: [\r\n          \"Equipos HVAC instalados y operando\",\r\n          \"Manual de operaci贸n y mantenimiento\",\r\n          \"Certificados de calidad\",\r\n          \"Garant铆as de equipos y mano de obra\"\r\n        ],\r\n        clientAcceptance: {\r\n          status: \"pending\",\r\n          checklist: [\r\n            { item: \"Funcionamiento de todos los equipos\", checked: true },\r\n            { item: \"Temperaturas seg煤n especificaciones\", checked: true },\r\n            { item: \"Documentaci贸n t茅cnica completa\", checked: false },\r\n            { item: \"Capacitaci贸n al personal\", checked: false }\r\n          ]\r\n        }\r\n      },\r\n      milestones: [\r\n        {\r\n          id: \"milestone-1\",\r\n          name: \"Desmontaje equipos obsoletos\",\r\n          status: \"completed\",\r\n          progress: 100,\r\n          completedDate: \"2024-03-05\"\r\n        },\r\n        {\r\n          id: \"milestone-2\", \r\n          name: \"Instalaci贸n nuevos equipos\",\r\n          status: \"completed\",\r\n          progress: 100, \r\n          completedDate: \"2024-04-10\"\r\n        },\r\n        {\r\n          id: \"milestone-3\",\r\n          name: \"Pruebas y optimizaci贸n\", \r\n          status: \"completed\",\r\n          progress: 100,\r\n          completedDate: \"2024-04-25\"\r\n        },\r\n        {\r\n          id: \"milestone-4\",\r\n          name: \"Documentaci贸n y entrega\",\r\n          status: \"in_progress\", \r\n          progress: 80\r\n        }\r\n      ],\r\n      communications: [\r\n        {\r\n          id: \"comm-exec-4\",\r\n          type: \"email\",\r\n          date: \"2024-04-26\",\r\n          content: \"Confirmaci贸n de fecha de entrega final para el 30 de abril\",\r\n          participants: [\"Lic. Miguel Hern谩ndez\"],\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      traceability: {\r\n        agreements: [\r\n          \"Cronograma de entrega confirmado por cliente\",\r\n          \"Especificaciones t茅cnicas validadas\"\r\n        ],\r\n        evidence: [\r\n          \"Fotos de instalaci贸n completada\",\r\n          \"Pruebas de rendimiento energ茅tico\",\r\n          \"Certificados de equipos\"\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      id: \"EXEC-004\",\r\n      workOrderRef: \"WO-2024-GRN-004\", \r\n      clientName: \"Green Energy M茅xico\",\r\n      projectType: \"construction\",\r\n      salesRep: \"Carmen D铆az\",\r\n      phase: \"billing-process\",\r\n      priority: \"low\",\r\n      contractValue: 4200000,\r\n      startDate: \"2024-01-15\",\r\n      estimatedEndDate: \"2024-03-31\", \r\n      clientContact: {\r\n        name: \"Ing. Fernando L贸pez\",\r\n        phone: \"+52 55 4567 8901\",\r\n        email: \"ventas@greenenergy.mx\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Sistema HVAC para complejo residencial sustentable\",\r\n        location: \"Monterrey, Nuevo Le贸n\",\r\n        scope: \"Instalaci贸n completa con controles inteligentes y eficiencia energ茅tica\"\r\n      },\r\n      progress: {\r\n        overallProgress: 100,\r\n        currentPhase: \"Proyecto completado\",\r\n        status: \"completed\",\r\n        completedDate: \"2024-03-28\"\r\n      },\r\n      delivery: {\r\n        type: \"construction\",\r\n        status: \"accepted\",\r\n        acceptanceDate: \"2024-03-30\",\r\n        clientFeedback: \"Excelente calidad y cumplimiento de cronograma\"\r\n      },\r\n      billing: {\r\n        status: \"in_progress\",\r\n        invoiceGenerated: true,\r\n        invoiceNumber: \"FACT-2024-0089\",\r\n        invoiceDate: \"2024-04-01\",\r\n        amount: 4200000,\r\n        paymentTerms: \"30 d铆as\",\r\n        billingData: {\r\n          businessName: \"Green Energy M茅xico S.A. de C.V.\",\r\n          rfc: \"GEM123456789\",\r\n          address: \"Av. Constituci贸n 2500, Monterrey, NL\"\r\n        }\r\n      },\r\n      traceability: {\r\n        agreements: [\r\n          \"Acta de entrega-recepci贸n firmada\",\r\n          \"Conformidad del cliente documentada\",\r\n          \"Garant铆as entregadas y explicadas\"\r\n        ],\r\n        evidence: [\r\n          \"Fotos de instalaci贸n final\",\r\n          \"Certificados de pruebas de funcionamiento\",\r\n          \"Manual de usuario entregado\"\r\n        ]\r\n      }\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadProjects = async () => {\r\n      setIsLoading(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      setProjects(mockProjects);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    loadProjects();\r\n  }, []);\r\n\r\n  const handleProjectSelect = (project) => {\r\n    setSelectedProject(project);\r\n    setShowControls(true);\r\n  };\r\n\r\n  const handlePhaseTransition = (projectId, newPhase) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { ...proj, phase: newPhase }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const handleStartupConfirmation = (projectId, startupData) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { ...proj, startup: { ...proj?.startup, ...startupData } }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const handleProgressUpdate = (projectId, progressData) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { ...proj, progress: { ...proj?.progress, ...progressData } }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const handleCommunicationAdd = (projectId, communication) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { \r\n            ...proj, \r\n            communications: [...(proj?.communications || []), communication]\r\n          }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const handleChangeRequest = (projectId, changeRequest) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { \r\n            ...proj, \r\n            changeRequests: [...(proj?.changeRequests || []), changeRequest]\r\n          }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const handleDeliveryUpdate = (projectId, deliveryData) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { ...proj, delivery: { ...proj?.delivery, ...deliveryData } }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const getProjectsByPhase = (phaseId) => {\r\n    return projects?.filter(proj => proj?.phase === phaseId) || [];\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'border-l-red-600 bg-red-50';\r\n      case 'high': return 'border-l-orange-500 bg-orange-50';\r\n      case 'medium': return 'border-l-yellow-500 bg-yellow-50';\r\n      case 'low': return 'border-l-green-500 bg-green-50';\r\n      default: return 'border-l-gray-400 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getProgressColor = (progress) => {\r\n    if (progress >= 90) return 'text-green-600 bg-green-100';\r\n    if (progress >= 70) return 'text-blue-600 bg-blue-100';\r\n    if (progress >= 50) return 'text-yellow-600 bg-yellow-100';\r\n    return 'text-red-600 bg-red-100';\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando proyectos en ejecuci贸n...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n      \r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n        \r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Monitoreo de Ejecuci贸n de Ventas</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                  Supervisi贸n integral de proyectos desde WorkOrder hasta facturaci贸n final\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  iconName=\"RefreshCw\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => window.location?.reload()}\r\n                >\r\n                  Actualizar\r\n                </Button>\r\n                <Button\r\n                  iconName=\"BarChart3\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => setActivePanel('dashboard')}\r\n                >\r\n                  Dashboard\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-6\">\r\n              {/* Main Execution Board */}\r\n              <div className=\"flex-1\">\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-6 mb-8\">\r\n                  {executionPhases?.map((phase) => (\r\n                    <div key={phase?.id} className=\"bg-card rounded-lg shadow-sm border\">\r\n                      <div className={`p-4 ${phase?.color} text-white rounded-t-lg`}>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <Icon name={phase?.icon} size={20} />\r\n                          <h3 className=\"font-semibold text-sm\">{phase?.name}</h3>\r\n                        </div>\r\n                        <p className=\"text-xs mt-1 opacity-90\">{phase?.description}</p>\r\n                        <div className=\"text-xs mt-2 bg-white/20 rounded px-2 py-1 inline-block\">\r\n                          {getProjectsByPhase(phase?.id)?.length} proyectos\r\n                        </div>\r\n                        <div className=\"text-xs mt-1 opacity-75\">\r\n                          Paso {phase?.step}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"p-4 space-y-3 min-h-[500px]\">\r\n                        {getProjectsByPhase(phase?.id)?.map((project) => (\r\n                          <div\r\n                            key={project?.id}\r\n                            onClick={() => handleProjectSelect(project)}\r\n                            className={`p-3 rounded-lg border-l-4 cursor-pointer hover:shadow-md transition-all ${getPriorityColor(project?.priority)}`}\r\n                          >\r\n                            <div className=\"flex items-start justify-between mb-2\">\r\n                              <h4 className=\"font-medium text-sm text-foreground line-clamp-2\">\r\n                                {project?.clientName}\r\n                              </h4>\r\n                              <span className={`text-xs px-2 py-1 rounded-full ${\r\n                                project?.priority === 'urgent' ? 'bg-red-100 text-red-800' :\r\n                                project?.priority === 'high' ? 'bg-orange-100 text-orange-800' :\r\n                                project?.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                              }`}>\r\n                                {project?.priority === 'urgent' ? 'Urgente' :\r\n                                 project?.priority === 'high' ? 'Alta' :\r\n                                 project?.priority === 'medium' ? 'Media' : 'Baja'}\r\n                              </span>\r\n                            </div>\r\n                            \r\n                            <div className=\"flex items-center space-x-2 mb-2\">\r\n                              <Icon name=\"FileText\" size={12} className=\"text-muted-foreground\" />\r\n                              <span className=\"text-xs text-muted-foreground\">{project?.workOrderRef}</span>\r\n                            </div>\r\n                            \r\n                            <div className=\"flex items-center space-x-2 mb-2\">\r\n                              <Icon name=\"User\" size={12} className=\"text-muted-foreground\" />\r\n                              <span className=\"text-xs text-muted-foreground\">{project?.salesRep}</span>\r\n                            </div>\r\n\r\n                            {project?.progress?.overallProgress && (\r\n                              <div className=\"mb-2\">\r\n                                <div className=\"flex items-center justify-between mb-1\">\r\n                                  <span className=\"text-xs text-muted-foreground\">Progreso</span>\r\n                                  <span className={`text-xs px-2 py-1 rounded ${getProgressColor(project?.progress?.overallProgress)}`}>\r\n                                    {project?.progress?.overallProgress}%\r\n                                  </span>\r\n                                </div>\r\n                                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                                  <div \r\n                                    className=\"bg-blue-600 h-2 rounded-full transition-all\"\r\n                                    style={{ width: `${project?.progress?.overallProgress}%` }}\r\n                                  ></div>\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                            \r\n                            <div className=\"flex items-center justify-between\">\r\n                              <div className=\"text-xs font-medium text-foreground\">\r\n                                ${project?.contractValue?.toLocaleString()}\r\n                              </div>\r\n                              <div className=\"flex items-center space-x-1\">\r\n                                <Icon \r\n                                  name={project?.projectType === 'construction' ? 'Building' : 'Package'} \r\n                                  size={12} \r\n                                  className=\"text-muted-foreground\" \r\n                                />\r\n                                <span className=\"text-xs text-muted-foreground capitalize\">\r\n                                  {project?.projectType === 'construction' ? 'Obra' : 'Piezas'}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n\r\n                            {project?.fieldSupervisor && (\r\n                              <div className=\"flex items-center space-x-1 mt-2\">\r\n                                <Icon name=\"HardHat\" size={12} className=\"text-blue-600\" />\r\n                                <span className=\"text-xs text-blue-600\">{project?.fieldSupervisor?.name}</span>\r\n                              </div>\r\n                            )}\r\n\r\n                            {project?.changeRequests?.length > 0 && (\r\n                              <div className=\"flex items-center space-x-1 mt-2\">\r\n                                <Icon name=\"AlertTriangle\" size={12} className=\"text-orange-600\" />\r\n                                <span className=\"text-xs text-orange-600\">\r\n                                  {project?.changeRequests?.length} cambio(s)\r\n                                </span>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        ))}\r\n                        \r\n                        {getProjectsByPhase(phase?.id)?.length === 0 && (\r\n                          <div className=\"text-center py-8\">\r\n                            <Icon name=\"Inbox\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                            <p className=\"text-sm text-muted-foreground\">Sin proyectos</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Controls Panel */}\r\n              {showControls && selectedProject && (\r\n                <div className=\"w-96 bg-card rounded-lg shadow-lg border h-fit\">\r\n                  <div className=\"p-4 border-b\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <h3 className=\"font-semibold\">Control de Ejecuci贸n</h3>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        iconName=\"X\"\r\n                        onClick={() => setShowControls(false)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {/* Panel Tabs */}\r\n                  <div className=\"border-b\">\r\n                    <div className=\"flex\">\r\n                      {[\r\n                        { id: 'execution', label: 'Ejecuci贸n', icon: 'Activity' },\r\n                        { id: 'communication', label: 'Comunicaci贸n', icon: 'MessageCircle' },\r\n                        { id: 'changes', label: 'Cambios', icon: 'Edit' },\r\n                        { id: 'delivery', label: 'Entrega', icon: 'Truck' },\r\n                        { id: 'traceability', label: 'Trazabilidad', icon: 'Search' }\r\n                      ]?.map((tab) => (\r\n                        <button\r\n                          key={tab?.id}\r\n                          onClick={() => setActivePanel(tab?.id)}\r\n                          className={`flex-1 px-3 py-2 text-xs border-b-2 flex items-center justify-center space-x-1 ${\r\n                            activePanel === tab?.id \r\n                              ? 'border-blue-600 text-blue-600 bg-blue-50' :'border-transparent text-muted-foreground hover:text-foreground'\r\n                          }`}\r\n                        >\r\n                          <Icon name={tab?.icon} size={14} />\r\n                          <span className=\"hidden sm:block\">{tab?.label}</span>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4 space-y-6\">\r\n                    {/* Project Info */}\r\n                    <div className=\"space-y-2\">\r\n                      <h4 className=\"font-medium\">{selectedProject?.clientName}</h4>\r\n                      <p className=\"text-sm text-muted-foreground\">{selectedProject?.workOrderRef}</p>\r\n                      <div className=\"flex items-center space-x-4 text-xs text-muted-foreground\">\r\n                        <span>${selectedProject?.contractValue?.toLocaleString()}</span>\r\n                        <span>{selectedProject?.projectDetails?.location}</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Dynamic Panel Content */}\r\n                    {activePanel === 'execution' && selectedProject?.phase === 'startup-tracking' && (\r\n                      <StartupTrackingPanel\r\n                        project={selectedProject}\r\n                        onConfirm={(startupData) => handleStartupConfirmation(selectedProject?.id, startupData)}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'execution' && selectedProject?.phase === 'execution-monitoring' && (\r\n                      <ExecutionProgressPanel\r\n                        project={selectedProject}\r\n                        onUpdate={(progressData) => handleProgressUpdate(selectedProject?.id, progressData)}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'communication' && (\r\n                      <ClientCommunicationPanel\r\n                        project={selectedProject}\r\n                        onAddCommunication={(communication) => handleCommunicationAdd(selectedProject?.id, communication)}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'changes' && (\r\n                      <ChangeRequestPanel\r\n                        project={selectedProject}\r\n                        onRequestChange={(changeRequest) => handleChangeRequest(selectedProject?.id, changeRequest)}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'delivery' && (selectedProject?.phase === 'delivery-coordination' || selectedProject?.delivery) && (\r\n                      <DeliveryManagementPanel\r\n                        project={selectedProject}\r\n                        onUpdate={(deliveryData) => handleDeliveryUpdate(selectedProject?.id, deliveryData)}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'traceability' && (\r\n                      <TraceabilityPanel\r\n                        project={selectedProject}\r\n                        // console.log eliminado\r\n                      />\r\n                    )}\r\n\r\n                    {/* Phase Transition Controls */}\r\n                    <div className=\"space-y-2\">\r\n                      <label className=\"text-sm font-medium\">Avanzar Fase</label>\r\n                      <div className=\"grid grid-cols-1 gap-2\">\r\n                        {executionPhases?.map((phase) => (\r\n                          <Button\r\n                            key={phase?.id}\r\n                            variant={selectedProject?.phase === phase?.id ? \"default\" : \"outline\"}\r\n                            size=\"sm\"\r\n                            onClick={() => handlePhaseTransition(selectedProject?.id, phase?.id)}\r\n                            disabled={selectedProject?.phase === phase?.id}\r\n                            className=\"text-xs justify-start\"\r\n                          >\r\n                            <Icon name={phase?.icon} size={14} className=\"mr-2\" />\r\n                            {phase?.name}\r\n                          </Button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesExecutionMonitoring;","import React, { useState } from 'react';\r\nimport { Search, X, ChevronUp, ChevronDown, Download } from 'lucide-react';\r\n\r\n/* =========================\r\n   UI b谩sicos (con mejoras)\r\n========================= */\r\nconst Button = ({\r\n  children,\r\n  variant = 'default',\r\n  size = 'default',\r\n  onClick,\r\n  iconName,\r\n  iconPosition,\r\n  className = '',\r\n  disabled = false,\r\n  type = 'button',\r\n  title,\r\n}) => {\r\n  const Icon =\r\n    iconName === 'X'\r\n      ? X\r\n      : iconName === 'ChevronUp'\r\n      ? ChevronUp\r\n      : iconName === 'ChevronDown'\r\n      ? ChevronDown\r\n      : iconName === 'Download'\r\n      ? Download\r\n      : null;\r\n\r\n  const baseClasses =\r\n    'inline-flex items-center justify-center font-medium rounded-md transition-colors';\r\n  const variantClasses = {\r\n    default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n    outline: 'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\r\n    ghost: 'hover:bg-accent hover:text-accent-foreground',\r\n  };\r\n  const sizeClasses = {\r\n    default: 'h-10 px-4 py-2',\r\n    sm: 'h-9 rounded-md px-3 text-sm',\r\n  };\r\n  const disabledClasses = disabled ? 'opacity-60 cursor-not-allowed' : '';\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n      title={title}\r\n      className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${disabledClasses} ${className}`}\r\n    >\r\n      {Icon && iconPosition === 'left' && <Icon size={16} className=\"mr-2\" />}\r\n      {children}\r\n      {Icon && iconPosition === 'right' && <Icon size={16} className=\"ml-2\" />}\r\n    </button>\r\n  );\r\n};\r\n\r\nconst Input = ({ label, type = 'text', placeholder, value, onChange, className = '' }) => {\r\n  return (\r\n    <div className=\"w-full\">\r\n      {label && <label className=\"block text-sm font-medium text-foreground mb-2\">{label}</label>}\r\n      <input\r\n        type={type}\r\n        placeholder={placeholder}\r\n        value={value}\r\n        onChange={onChange}\r\n        className={`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Select = ({ label, options, value, onChange, className = '' }) => {\r\n  return (\r\n    <div className={className}>\r\n      {label && <label className=\"block text-sm font-medium text-foreground mb-2\">{label}</label>}\r\n      <select\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n      >\r\n        {options.map((option) => (\r\n          <option key={option.value} value={option.value}>\r\n            {option.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\n/* =========================\r\n   ProjectFilters conectado\r\n========================= */\r\nconst ProjectFilters = ({\r\n  onFiltersChange,\r\n  totalProjects,\r\n  filteredProjects,\r\n  onExport, //  NUEVO: handler para exportar que viene del padre\r\n}) => {\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    paymentStatus: '', // Nuevo: 'pagado', 'en-proceso', '' (todos)\r\n    status: '',\r\n    minBudget: '',\r\n    maxBudget: '',\r\n    department: '',\r\n    priority: '',\r\n  });\r\n\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'planning', label: 'Planificaci贸n' },\r\n    { value: 'in-progress', label: 'En Progreso' },\r\n    { value: 'on-hold', label: 'En Pausa' },\r\n    { value: 'review', label: 'En Revisi贸n' },\r\n    { value: 'completed', label: 'Completado' },\r\n    { value: 'cancelled', label: 'Cancelado' },\r\n  ];\r\n\r\n  const departmentOptions = [\r\n    { value: '', label: 'Todos los Departamentos' },\r\n    { value: 'sales', label: 'Ventas' },\r\n    { value: 'engineering', label: 'Ingenier铆a' },\r\n    { value: 'installation', label: 'Instalaci贸n' },\r\n    { value: 'maintenance', label: 'Mantenimiento' },\r\n    { value: 'administration', label: 'Administraci贸n' },\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: '', label: 'Todas las Prioridades' },\r\n    { value: 'low', label: 'Baja' },\r\n    { value: 'medium', label: 'Media' },\r\n    { value: 'high', label: 'Alta' },\r\n    { value: 'urgent', label: 'Urgente' },\r\n  ];\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    const newFilters = { ...filters, [key]: value };\r\n    setFilters(newFilters);\r\n    onFiltersChange?.(newFilters);\r\n  };\r\n\r\n  const paymentStatusOptions = [\r\n    { value: '', label: 'Todos los Estados de Pago' },\r\n    { value: 'pagado', label: 'Proyectos Pagados' },\r\n    { value: 'en-proceso', label: 'En Proceso de Pago' },\r\n    { value: 'sin-pago', label: 'Sin Pagos' },\r\n  ];\r\n\r\n  const clearAllFilters = () => {\r\n    const cleared = {\r\n      search: '',\r\n      paymentStatus: '',\r\n      status: '',\r\n      minBudget: '',\r\n      maxBudget: '',\r\n      department: '',\r\n      priority: '',\r\n    };\r\n    setFilters(cleared);\r\n    onFiltersChange?.(cleared);\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters).some((v) => v !== '');\r\n\r\n  const handleExportClick = () => {\r\n    if (!onExport) return;\r\n    if (!filteredProjects || filteredProjects <= 0) {\r\n      alert('No hay proyectos para exportar con los filtros actuales.');\r\n      return;\r\n    }\r\n    onExport(); // el padre exporta lo que ya est谩 filtrado/visible\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 mb-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Filtros de Proyectos</h3>\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Mostrando {filteredProjects} de {totalProjects} proyectos\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          {hasActiveFilters && (\r\n            <Button variant=\"outline\" size=\"sm\" onClick={clearAllFilters} iconName=\"X\" iconPosition=\"left\">\r\n              Limpiar Filtros\r\n            </Button>\r\n          )}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n            iconName={isExpanded ? 'ChevronUp' : 'ChevronDown'}\r\n            iconPosition=\"right\"\r\n          >\r\n            {isExpanded ? 'Menos Filtros' : 'M谩s Filtros'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search Bar */}\r\n      <div className=\"mb-4\">\r\n        <div className=\"relative\">\r\n          <Input\r\n            type=\"search\"\r\n            placeholder=\"Buscar por nombre de proyecto, cliente, c贸digo...\"\r\n            value={filters.search}\r\n            onChange={(e) => handleFilterChange('search', e.target.value)}\r\n            className=\"pl-10\"\r\n          />\r\n          <Search size={16} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Filters */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4\">\r\n        <Select\r\n          label=\"Estado de Pago\"\r\n          options={paymentStatusOptions}\r\n          value={filters.paymentStatus}\r\n          onChange={(value) => handleFilterChange('paymentStatus', value)}\r\n          className=\"w-full\"\r\n        />\r\n        <Select\r\n          label=\"Estado del Proyecto\"\r\n          options={statusOptions}\r\n          value={filters.status}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n          className=\"w-full\"\r\n        />\r\n        <Select\r\n          label=\"Departamento\"\r\n          options={departmentOptions}\r\n          value={filters.department}\r\n          onChange={(value) => handleFilterChange('department', value)}\r\n          className=\"w-full\"\r\n        />\r\n        <div className=\"flex items-end\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"default\"\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n            className=\"w-full\"\r\n            onClick={handleExportClick}\r\n            disabled={!filteredProjects}\r\n            title={filteredProjects ? 'Exportar proyectos filtrados' : 'No hay resultados para exportar'}\r\n          >\r\n            Exportar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Advanced Filters */}\r\n      {isExpanded && (\r\n        <div className=\"border-t border-border pt-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            <Input\r\n              label=\"Presupuesto M铆nimo\"\r\n              type=\"number\"\r\n              placeholder=\"$0\"\r\n              value={filters.minBudget}\r\n              onChange={(e) => handleFilterChange('minBudget', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n            <Input\r\n              label=\"Presupuesto M谩ximo\"\r\n              type=\"number\"\r\n              placeholder=\"$999,999\"\r\n              value={filters.maxBudget}\r\n              onChange={(e) => handleFilterChange('maxBudget', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n            <Input\r\n              label=\"Fecha de Inicio\"\r\n              type=\"date\"\r\n              value={filters.startDate}\r\n              onChange={(e) => handleFilterChange('startDate', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n            <Input\r\n              label=\"Fecha de Finalizaci贸n\"\r\n              type=\"date\"\r\n              value={filters.endDate}\r\n              onChange={(e) => handleFilterChange('endDate', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Active Filters pills */}\r\n      {hasActiveFilters && (\r\n        <div className=\"flex flex-wrap gap-2 mt-4 pt-4 border-t border-border\">\r\n          <span className=\"text-sm text-muted-foreground\">Filtros activos:</span>\r\n          {Object.entries(filters).map(([key, value]) => {\r\n            if (!value) return null;\r\n\r\n            // etiquetas amigables\r\n            let displayValue = value;\r\n            if (key === 'paymentStatus')\r\n              displayValue = paymentStatusOptions.find((opt) => opt.value === value)?.label || value;\r\n            if (key === 'status')\r\n              displayValue = statusOptions.find((opt) => opt.value === value)?.label || value;\r\n            if (key === 'department')\r\n              displayValue = departmentOptions.find((opt) => opt.value === value)?.label || value;\r\n            if (key === 'priority')\r\n              displayValue = priorityOptions.find((opt) => opt.value === value)?.label || value;\r\n            if (key === 'minBudget' || key === 'maxBudget') displayValue = `$${value}`;\r\n\r\n            return (\r\n              <div\r\n                key={key}\r\n                className=\"flex items-center space-x-1 bg-primary/10 text-primary px-2 py-1 rounded-md text-sm\"\r\n              >\r\n                <span>{displayValue}</span>\r\n                <button\r\n                  onClick={() => handleFilterChange(key, '')}\r\n                  className=\"hover:bg-primary/20 rounded-full p-0.5\"\r\n                >\r\n                  <X size={12} />\r\n                </button>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectFilters;\r\n\r\n/* ==========================================\r\n   Funci贸n de filtrado para el componente padre\r\n========================================== */\r\nexport const applyProjectFilters = (projects, filters) => {\r\n  let filtered = [...projects];\r\n\r\n  // Search\r\n  if (filters?.search) {\r\n    const searchTerm = filters.search.toLowerCase();\r\n    filtered = filtered.filter(\r\n      (project) =>\r\n        project?.name?.toLowerCase()?.includes(searchTerm) ||\r\n        project?.code?.toLowerCase()?.includes(searchTerm) ||\r\n        project?.client?.name?.toLowerCase()?.includes(searchTerm)\r\n    );\r\n  }\r\n\r\n  // Status\r\n  if (filters?.status) {\r\n    filtered = filtered.filter((project) => project?.status === filters.status);\r\n  }\r\n\r\n  // Department\r\n  if (filters?.department) {\r\n    filtered = filtered.filter(\r\n      (project) => project?.department?.toLowerCase() === filters.department.toLowerCase()\r\n    );\r\n  }\r\n\r\n  // Priority\r\n  if (filters?.priority) {\r\n    filtered = filtered.filter((project) => project?.priority === filters.priority);\r\n  }\r\n\r\n  // Date range (sobre startDate)\r\n  if (filters?.dateRange) {\r\n    const now = new Date();\r\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n\r\n    filtered = filtered.filter((project) => {\r\n      const startDate = new Date(project?.startDate);\r\n      if (isNaN(startDate)) return false;\r\n\r\n      switch (filters.dateRange) {\r\n        case 'today':\r\n          return startDate.toDateString() === today.toDateString();\r\n        case 'week': {\r\n          const weekAgo = new Date(today);\r\n          weekAgo.setDate(weekAgo.getDate() - 7);\r\n          return startDate >= weekAgo && startDate <= now;\r\n        }\r\n        case 'month':\r\n          return (\r\n            startDate.getMonth() === now.getMonth() &&\r\n            startDate.getFullYear() === now.getFullYear()\r\n          );\r\n        case 'quarter': {\r\n          const quarter = Math.floor(now.getMonth() / 3);\r\n          const projectQuarter = Math.floor(startDate.getMonth() / 3);\r\n          return projectQuarter === quarter && startDate.getFullYear() === now.getFullYear();\r\n        }\r\n        case 'year':\r\n          return startDate.getFullYear() === now.getFullYear();\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Budget\r\n  if (filters?.minBudget) {\r\n    const minBudget = Number(filters.minBudget);\r\n    filtered = filtered.filter((project) => Number(project?.budget) >= minBudget);\r\n  }\r\n  if (filters?.maxBudget) {\r\n    const maxBudget = Number(filters.maxBudget);\r\n    filtered = filtered.filter((project) => Number(project?.budget) <= maxBudget);\r\n  }\r\n\r\n  // Start date exacta\r\n  if (filters?.startDate) {\r\n    const filterStartDate = new Date(filters.startDate);\r\n    filtered = filtered.filter((project) => {\r\n      const projectStartDate = new Date(project?.startDate);\r\n      return !isNaN(projectStartDate) && projectStartDate >= filterStartDate;\r\n    });\r\n  }\r\n\r\n  // End date exacta\r\n  if (filters?.endDate) {\r\n    const filterEndDate = new Date(filters.endDate);\r\n    filtered = filtered.filter((project) => {\r\n      const projectEndDate = new Date(project?.endDate);\r\n      return !isNaN(projectEndDate) && projectEndDate <= filterEndDate;\r\n    });\r\n  }\r\n\r\n  return filtered;\r\n};\r\n","import React, { useEffect, useMemo, useState, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\nimport useProyecto from '../../../hooks/useProyect'; // 猬锔 usa el hook\r\nimport useClient from '../../../hooks/useClient';\r\n\r\n/* === Config === */\r\nconst DEFAULT_USD_RATE = 18;\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\n/* === Utils === */\r\nconst parseISODate = (value) => {\r\n  if (!value) return null;\r\n  const d = new Date(value);\r\n  return isNaN(d.getTime()) ? null : d;\r\n};\r\nconst formatCurrency = (amount) => {\r\n  if (amount == null || isNaN(amount)) return '';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(amount);\r\n};\r\nconst formatUSD = (amount) => {\r\n  if (amount == null || isNaN(amount)) return '';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'USD' }).format(amount);\r\n};\r\nconst formatDate = (date) => {\r\n  const d = date instanceof Date ? date : parseISODate(date);\r\n  if (!d) return '';\r\n  return d.toLocaleDateString('es-MX', { day: '2-digit', month: '2-digit', year: 'numeric' });\r\n};\r\n\r\n// Normalizar estado para comparaci贸n\r\nconst normalizarEstado = (estado) => {\r\n  if (!estado) return '';\r\n  return String(estado).toLowerCase().trim().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\r\n};\r\n\r\n// Obtener el estado normalizado y su etiqueta\r\nconst obtenerEstadoNormalizado = (status, statusLabel) => {\r\n  const estado = statusLabel || status || '';\r\n  const normalizado = normalizarEstado(estado);\r\n  \r\n  // Mapear a estados can贸nicos\r\n  if (normalizado.includes('pausa') || normalizado.includes('pause') || normalizado.includes('hold')) {\r\n    return { canonico: 'en pausa', label: 'En Pausa' };\r\n  }\r\n  if (normalizado.includes('revision') || normalizado.includes('review')) {\r\n    return { canonico: 'en revision', label: 'En Revisi贸n' };\r\n  }\r\n  if (normalizado.includes('completado') || normalizado.includes('complet') || normalizado.includes('done') || normalizado.includes('closed')) {\r\n    return { canonico: 'completado', label: 'Completado' };\r\n  }\r\n  if (normalizado.includes('cancelado') || normalizado.includes('canceled') || normalizado.includes('cancelled') || normalizado.includes('cancel')) {\r\n    return { canonico: 'cancelado', label: 'Cancelado' };\r\n  }\r\n  if (normalizado.includes('proceso') || normalizado.includes('progress') || normalizado.includes('process')) {\r\n    return { canonico: 'en proceso', label: 'En Proceso' };\r\n  }\r\n  if (normalizado.includes('planific') || normalizado.includes('planning') || normalizado.includes('activo') || normalizado.includes('active')) {\r\n    return { canonico: 'planificacion', label: 'Planificaci贸n' };\r\n  }\r\n  \r\n  // Si hay un statusLabel, usarlo; si no, usar el status original\r\n  return { canonico: normalizado || 'planificacion', label: statusLabel || status || 'Planificaci贸n' };\r\n};\r\n\r\n// Obtener clases de color seg煤n el estado\r\nconst obtenerColorEstado = (estadoCanonico) => {\r\n  switch (estadoCanonico) {\r\n    case 'en proceso':\r\n      return 'bg-green-100 text-green-800 border-green-200';\r\n    case 'en pausa':\r\n      return 'bg-yellow-100 text-yellow-800 border-yellow-200';\r\n    case 'en revision':\r\n      return 'bg-purple-100 text-purple-800 border-purple-200';\r\n    case 'completado':\r\n      return 'bg-blue-100 text-blue-800 border-blue-200';\r\n    case 'cancelado':\r\n      return 'bg-red-100 text-red-800 border-red-200';\r\n    case 'planificacion':\r\n    default:\r\n      return 'bg-gray-100 text-gray-800 border-gray-200';\r\n  }\r\n};\r\n\r\n/* === Map NoSQL -> ViewModel (con USD derivado y resumen financiero del backend) === */\r\nconst mapProjectDocStrict = (doc, clientsMap = {}) => {\r\n  const rawId = doc.id ?? doc._id ?? null;\r\n  const code = doc.codigo ?? doc.code ?? '';\r\n  const id = rawId ?? `ui-${(code || 'sin-codigo')}`; // ID estable para React keys; no usar para backend si no hay rawId\r\n  const name = doc.nombreProyecto ?? doc.nombre ?? 'Proyecto sin nombre';\r\n  const type = doc.tipoProyecto ?? doc.type ?? '';\r\n\r\n  // Manejo flexible de cliente (string id u objeto)\r\n  const clienteNode = doc.cliente ?? doc.client ?? null;\r\n  let clienteId = null;\r\n  if (typeof clienteNode === 'string') {\r\n    clienteId = clienteNode;\r\n  } else if (clienteNode && typeof clienteNode === 'object') {\r\n    clienteId = clienteNode.id || clienteNode._id || null;\r\n  }\r\n  const clienteEncontrado = clienteId != null ? (clientsMap[String(clienteId)] || null) : null;\r\n\r\n  const client = {\r\n    id: clienteId || '',\r\n    name:\r\n      (clienteNode && typeof clienteNode === 'object' &&\r\n        (clienteNode.nombre || clienteNode.name || clienteNode.empresa || clienteNode.companyName))\r\n        ? (clienteNode.nombre || clienteNode.name || clienteNode.empresa || clienteNode.companyName)\r\n        : (clienteEncontrado?.nombre ?? clienteEncontrado?.name ?? clienteEncontrado?.empresa ?? clienteEncontrado?.companyName ?? ''),\r\n    contact:\r\n      (clienteNode && typeof clienteNode === 'object' && (clienteNode.contacto || clienteNode.contact))\r\n        ? (clienteNode.contacto || clienteNode.contact)\r\n        : (clienteEncontrado?.contacto ?? clienteEncontrado?.contact ?? ''),\r\n    email:\r\n      (clienteNode && typeof clienteNode === 'object' && clienteNode.email)\r\n        ? clienteNode.email\r\n        : (clienteEncontrado?.email ?? ''),\r\n  };\r\n\r\n  const startDate = doc.cronograma?.fechaInicio ?? doc.startDate ?? null;\r\n  const endDate   = doc.cronograma?.fechaFin    ?? doc.endDate   ?? null;\r\n\r\n  const status = doc.status ?? doc.estado ?? null;\r\n  const statusLabel = doc.statusLabel ?? null;\r\n  const priority = doc.prioridad ?? doc.prioridades ?? doc.priority ?? null;\r\n  const priorityLabel = doc.priorityLabel ?? null;\r\n\r\n  const p = doc.presupuesto || {};\r\n  const budget = doc.totalPresupuesto ?? doc.budget ?? p.total ?? null;\r\n\r\n  // Equipos USD: respeta USD si lo enviaron; si viene MXN convierte por tipoCambio o DEFAULT_USD_RATE\r\n  const equiposUSD = (() => {\r\n    if (p.equipoDolares != null && !isNaN(Number(p.equipoDolares))) {\r\n      return Number(p.equipoDolares) || 0;\r\n    }\r\n    if (p?._metaEquipos?.capturadoEn === 'USD' && p?._metaEquipos?.valorUSD != null) {\r\n      const v = Number(p._metaEquipos.valorUSD);\r\n      if (!isNaN(v)) return v;\r\n    }\r\n    const mxn = Number(p?.equipos || 0);\r\n    if (!(mxn > 0)) return 0;\r\n    const rate = Number(p?._metaEquipos?.tipoCambio);\r\n    const divisor = (rate && rate > 0) ? rate : DEFAULT_USD_RATE;\r\n    return mxn / divisor;\r\n  })();\r\n\r\n  const department = doc.departamento ?? doc.department ?? null;\r\n  const location   = doc.ubicacion ?? doc.location ?? null;\r\n  const description= doc.descripcion ?? doc.description ?? null;\r\n  const image      = doc.image ?? null;\r\n\r\n  let assignedPersonnel = null;\r\n  if (Array.isArray(doc.assignedPersonnel)) {\r\n    assignedPersonnel = doc.assignedPersonnel;\r\n  } else if (Array.isArray(doc.personalAsignado)) {\r\n    assignedPersonnel = doc.personalAsignado.map((s) => {\r\n      if (typeof s !== 'string') return { name: String(s ?? ''), role: '' };\r\n      // Soporta separadores \"\" o \"-\" (para robustez)\r\n      const parts = s.split(/| - /);\r\n      const n = (parts[0] || '').trim();\r\n      const r = (parts[1] || '').trim();\r\n      return { name: n || '', role: r || '' };\r\n    });\r\n  }\r\n\r\n  const workOrders = Array.isArray(doc.workOrders) ? doc.workOrders : undefined;\r\n\r\n  // --- Resumen financiero del backend (preferente) ---\r\n  const resumen = doc.resumenFinanciero || {};\r\n  const totalAbonadoDB = Number(\r\n    resumen.totalAbonado ?? resumen.total_abonado ?? 0\r\n  );\r\n  const totalRestanteDB = (() => {\r\n    const v =\r\n      resumen.totalRestante ?? // nombre preferente\r\n      resumen.saldoPendiente ?? // variante com煤n\r\n      resumen.saldo_pendiente;\r\n    return (v === null || v === undefined) ? null : Number(v);\r\n  })();\r\n  const porcentajePagadoDB = Number(\r\n    resumen.porcentajePagado ?? resumen.porcentaje_pagado ?? null\r\n  );\r\n\r\n  return {\r\n    id, rawId, code, name, type, image,\r\n    client,\r\n    status, statusLabel,\r\n    priority, priorityLabel,\r\n    budget, startDate, endDate,\r\n    department, location, description,\r\n    assignedPersonnel, workOrders,\r\n    equiposUSD,\r\n    financialSummary: {\r\n      totalAbonado: isNaN(totalAbonadoDB) ? null : totalAbonadoDB,\r\n      totalRestante: (totalRestanteDB != null && !isNaN(totalRestanteDB)) ? totalRestanteDB : null,\r\n      porcentajePagado: isNaN(porcentajePagadoDB) ? null : porcentajePagadoDB,\r\n    },\r\n    createdAt: doc.createdAt ?? null,\r\n    updatedAt: doc.updatedAt ?? null,\r\n    raw: doc,\r\n  };\r\n};\r\n\r\nconst ProjectTable = ({\r\n  projects,          // opcional: lista (array) o wrapper { success, data }\r\n  onBulkAction,\r\n  onRegisterAbono,\r\n  onViewAbonos,      // callback para ver abonos de un proyecto\r\n  getPaidAmount,     // fallback si el backend a煤n no env铆a totalRestante\r\n}) => {\r\n  const navigate = useNavigate();\r\n  console.log( \"navigate\", navigate);\r\n\r\n  // Hook de proyectos\r\n  const {\r\n    proyectos,            // puede ser array o wrapper { success, data }\r\n    loading: loadingAny,\r\n    error,\r\n    getProyectos,\r\n    deleteProyecto,\r\n  } = useProyecto();\r\n\r\n  // Hook de clientes\r\n  const { clients, getClients } = useClient();\r\n\r\n  const [sortConfig, setSortConfig] = useState({ key: 'startDate', direction: 'desc' });\r\n  const [selectedProjects, setSelectedProjects] = useState([]);\r\n  const [expandedRows, setExpandedRows] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  // Cargar clientes al montar\r\n  useEffect(() => {\r\n    if (!clients || clients.length === 0) {\r\n      getClients().catch((err) => console.error('Error al cargar clientes:', err));\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Mapa de clientes por ID (normalizado a string)\r\n  const clientsMap = useMemo(() => {\r\n    const map = {};\r\n    if (Array.isArray(clients)) {\r\n      clients.forEach((client) => {\r\n        const clientId = client.id ?? client._id;\r\n        if (clientId != null) map[String(clientId)] = client;\r\n      });\r\n    }\r\n    return map;\r\n  }, [clients]);\r\n\r\n  // Carga inicial de proyectos (si no vienen por props)\r\n  useEffect(() => {\r\n    if (projects && ((Array.isArray(projects)) || (projects?.data && Array.isArray(projects.data)))) {\r\n      return; // ya viene por props\r\n    }\r\n    const controller = new AbortController();\r\n    getProyectos({ force: false, signal: controller.signal }).catch((err) => {\r\n      if (err?.name !== 'AbortError') console.error('Fallo getProyectos en ProjectTable:', err);\r\n    });\r\n    return () => controller.abort();\r\n  }, [projects, getProyectos]);\r\n\r\n  // Fuente de datos: soporta array plano o wrapper { success, data }\r\n  const sourceDocs = useMemo(() => {\r\n    if (projects?.data && Array.isArray(projects.data)) return projects.data;\r\n    if (proyectos?.data && Array.isArray(proyectos.data)) return proyectos.data;\r\n    if (Array.isArray(projects)) return projects;\r\n    if (Array.isArray(proyectos)) return proyectos;\r\n    return [];\r\n  }, [projects, proyectos]);\r\n\r\n  const normalizedProjects = useMemo(() => {\r\n    if (!Array.isArray(sourceDocs)) return [];\r\n    return sourceDocs.map((doc) => mapProjectDocStrict(doc, clientsMap));\r\n  }, [sourceDocs, clientsMap]);\r\n\r\n  const handleSort = useCallback((key) => {\r\n    setSortConfig((prev) => {\r\n      const direction = (prev?.key === key && prev?.direction === 'asc') ? 'desc' : 'asc';\r\n      return { key, direction };\r\n    });\r\n    setCurrentPage(1);\r\n  }, []);\r\n\r\n  const sortedProjects = useMemo(() => {\r\n    const list = [...normalizedProjects];\r\n    const { key, direction } = sortConfig || {};\r\n    if (!key) return list;\r\n\r\n    return list.sort((a, b) => {\r\n      let aValue = a?.[key];\r\n      let bValue = b?.[key];\r\n\r\n      // Ordenar fechas solo cuando la columna es fecha\r\n      if (key === 'startDate' || key === 'endDate') {\r\n        const aDate = parseISODate(aValue);\r\n        const bDate = parseISODate(bValue);\r\n        const aTime = aDate ? aDate.getTime() : -Infinity;\r\n        const bTime = bDate ? bDate.getTime() : -Infinity;\r\n        return direction === 'asc' ? aTime - bTime : bTime - aTime;\r\n      }\r\n\r\n      // Ordenar por estado (usar la etiqueta del estado)\r\n      if (key === 'status') {\r\n        const estadoA = obtenerEstadoNormalizado(a?.status, a?.statusLabel);\r\n        const estadoB = obtenerEstadoNormalizado(b?.status, b?.statusLabel);\r\n        aValue = estadoA.label.toLowerCase();\r\n        bValue = estadoB.label.toLowerCase();\r\n        if (aValue < bValue) return direction === 'asc' ? -1 : 1;\r\n        if (aValue > bValue) return direction === 'asc' ? 1 : -1;\r\n        return 0;\r\n      }\r\n\r\n      if (typeof aValue === 'number' || typeof bValue === 'number') {\r\n        aValue = Number(aValue) || 0;\r\n        bValue = Number(bValue) || 0;\r\n        return direction === 'asc' ? aValue - bValue : bValue - aValue;\r\n      }\r\n\r\n      aValue = (aValue ?? '').toString().toLowerCase();\r\n      bValue = (bValue ?? '').toString().toLowerCase();\r\n      if (aValue < bValue) return direction === 'asc' ? -1 : 1;\r\n      if (aValue > bValue) return direction === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n  }, [normalizedProjects, sortConfig]);\r\n\r\n  // Paginaci贸n\r\n  const totalItems = sortedProjects.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const pageProjects = sortedProjects.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  const handleSelectProject = useCallback((projectId) => {\r\n    setSelectedProjects((prev) =>\r\n      prev?.includes(projectId) ? prev?.filter((id) => id !== projectId) : [...prev, projectId]\r\n    );\r\n  }, []);\r\n\r\n  const handleSelectAll = useCallback(() => {\r\n    const pageIds = pageProjects.map((p) => p?.id);\r\n    const allSelected = pageIds.every((id) => selectedProjects.includes(id));\r\n    if (allSelected) {\r\n      setSelectedProjects((prev) => prev.filter((id) => !pageIds.includes(id)));\r\n    } else {\r\n      setSelectedProjects((prev) => Array.from(new Set([...prev, ...pageIds])));\r\n    }\r\n  }, [selectedProjects, pageProjects]);\r\n\r\n  const toggleRowExpansion = useCallback((projectId) => {\r\n    setExpandedRows((prev) =>\r\n      prev?.includes(projectId) ? prev?.filter((id) => id !== projectId) : [...prev, projectId]\r\n    );\r\n  }, []);\r\n\r\n  /* =======================\r\n     Eliminar (fila y masivo)\r\n  ======================= */\r\n  const _handleDelete = useCallback(async (project) => {\r\n    if (!project?.rawId) {\r\n      alert('Este proyecto no tiene ID persistente. No se puede eliminar.');\r\n      return;\r\n    }\r\n    const ok = window.confirm(`驴Eliminar el proyecto \"${project?.name || project?.code}\"? Esta acci贸n no se puede deshacer.`);\r\n    if (!ok) return;\r\n    try {\r\n      await deleteProyecto(project.rawId); // usar rawId para backend\r\n      setSelectedProjects((prev) => prev.filter((id) => id !== project.id));\r\n      setExpandedRows((prev) => prev.filter((id) => id !== project.id));\r\n    } catch (err) {\r\n      if (err?.name !== 'AbortError') {\r\n        console.error('Error eliminando proyecto:', err);\r\n        alert('No se pudo eliminar el proyecto.');\r\n      }\r\n    }\r\n  }, [deleteProyecto]);\r\n\r\n  const handleBulkDelete = useCallback(async () => {\r\n    if (!selectedProjects?.length) return;\r\n    const ok = window.confirm(`驴Eliminar ${selectedProjects.length} proyecto(s)?`);\r\n    if (!ok) return;\r\n    try {\r\n      // si tu backend tolera paralelismo:\r\n      // await Promise.all(selectedProjects.map((rid) => deleteProyecto(rid)));\r\n      for (const id of selectedProjects) {\r\n        const p = normalizedProjects.find(x => x.id === id);\r\n        if (p?.rawId) {\r\n          // eslint-disable-next-line no-await-in-loop\r\n          await deleteProyecto(p.rawId);\r\n        }\r\n      }\r\n      setSelectedProjects([]);\r\n    } catch (e) {\r\n      if (e?.name !== 'AbortError') {\r\n        console.error(e);\r\n        alert('Ocurri贸 un error eliminando algunos proyectos.');\r\n      }\r\n    }\r\n  }, [selectedProjects, deleteProyecto, normalizedProjects]);\r\n\r\n  const _handleImageUpload = useCallback(async (project) => {\r\n    try {\r\n      const fileInput = document.createElement('input');\r\n      fileInput.type = 'file';\r\n      fileInput.accept = 'image/*';\r\n      fileInput.multiple = false;\r\n      fileInput.onchange = async (event) => {\r\n        const file = event?.target?.files?.[0];\r\n        if (file) {\r\n          if (!file?.type?.startsWith('image/')) return alert('Archivo de imagen inv谩lido');\r\n          const maxSize = 5 * 1024 * 1024;\r\n          if (file?.size > maxSize) return alert('M谩ximo 5MB');\r\n          alert(`Imagen \"${file?.name}\" cargada para \"${project?.name}\" (demo)`);\r\n        }\r\n      };\r\n      fileInput?.click();\r\n    } catch (error) {\r\n      console.error('Error al seleccionar imagen para proyecto:', project?.code, error);\r\n      alert('Error al seleccionar la imagen. Int茅ntelo de nuevo.');\r\n    }\r\n  }, []);\r\n\r\n  const loading = loadingAny;\r\n  const errorMsg = error ? (error.userMessage || error.message || 'Error') : '';\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n      {loading && <div className=\"p-4 border-b border-border text-sm text-muted-foreground\">Cargando proyectos</div>}\r\n      {!!errorMsg && <div className=\"p-4 border-b border-border text-sm text-red-600\">{errorMsg}</div>}\r\n\r\n      {selectedProjects?.length > 0 && (\r\n        <div className=\"bg-primary/5 border-b border-border p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-foreground\">{selectedProjects?.length} proyecto(s) seleccionado(s)</span>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Edit\" iconPosition=\"left\" onClick={() => onBulkAction?.('edit', selectedProjects)}>Editar Estado</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\" iconPosition=\"left\" onClick={() => onBulkAction?.('export', selectedProjects)}>Exportar</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Mail\" iconPosition=\"left\" onClick={() => onBulkAction?.('notify', selectedProjects)}>Notificar</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Trash2\" iconPosition=\"left\" onClick={handleBulkDelete}>Eliminar</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop */}\r\n      <div className=\"hidden lg:block overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-muted/50\">\r\n            <tr>\r\n              <th className=\"w-12 p-4\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={pageProjects.length > 0 && pageProjects.every((p) => selectedProjects.includes(p.id))}\r\n                  onChange={handleSelectAll}\r\n                  className=\"rounded border-border\"\r\n                  aria-label=\"Seleccionar todos\"\r\n                />\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('code')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>C贸digo</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('name')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Proyecto</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Cliente</th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('status')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Estado</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('budget')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Presupuesto</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Total restante</th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('startDate')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Fecha Inicio</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"w-28 p-4 font-medium text-foreground\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {pageProjects?.map((project) => (\r\n              <React.Fragment key={project?.id}>\r\n                <tr className=\"border-b border-border hover:bg-muted/30 transition-smooth\">\r\n                  <td className=\"p-4\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedProjects?.includes(project?.id)}\r\n                      onChange={() => handleSelectProject(project?.id)}\r\n                      className=\"rounded border-border\"\r\n                      aria-label={`Seleccionar ${project?.name}`}\r\n                    />\r\n                  </td>\r\n                  <td className=\"p-4\"><span className=\"font-mono text-sm text-primary\">{project?.code}</span></td>\r\n                  <td className=\"p-4\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <Image src={project?.image} alt={project?.name} className=\"w-10 h-10 rounded-lg object-cover\" />\r\n                      <div>\r\n                        <div className=\"font-medium text-foreground\">{project?.name}</div>\r\n                        <div className=\"text-sm text-muted-foreground\">{project?.type}</div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    <div>\r\n                      <div className=\"font-medium text-foreground\">{project?.client?.name}</div>\r\n                      <div className=\"text-sm text-muted-foreground\">{project?.client?.email}</div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    {(() => {\r\n                      const estadoInfo = obtenerEstadoNormalizado(project?.status, project?.statusLabel);\r\n                      const colorClasses = obtenerColorEstado(estadoInfo.canonico);\r\n                      return (\r\n                        <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${colorClasses}`}>\r\n                          {estadoInfo.label}\r\n                        </span>\r\n                      );\r\n                    })()}\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    <div className=\"text-foreground font-medium\">{formatCurrency(project?.budget)}</div>\r\n                    {Number(project?.equiposUSD) > 0 && (\r\n                      <div className=\"text-xs text-muted-foreground mt-1\">\r\n                        Equipos: <span className=\"font-medium\">{formatUSD(project?.equiposUSD)}</span>\r\n                      </div>\r\n                    )}\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    {(() => {\r\n                      // 1) valor directo desde backend si est谩 presente\r\n                      const fromDB = project?.financialSummary?.totalRestante;\r\n                      if (typeof fromDB === 'number' && !isNaN(fromDB)) {\r\n                        return <span className=\"text-foreground font-medium\">{formatCurrency(fromDB)}</span>;\r\n                      }\r\n                      // 2) fallback: calcula a partir de pagos locales si el backend a煤n no lo manda\r\n                      const paid = typeof getPaidAmount === 'function'\r\n                        ? Number(getPaidAmount({ id: project?.rawId || project?.id })) || 0\r\n                        : 0;\r\n                      const budget = Number(project?.budget) || 0;\r\n                      const remaining = Math.max(budget - paid, 0);\r\n                      return <span className=\"text-foreground font-medium\">{formatCurrency(remaining)}</span>;\r\n                    })()}\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    <div className=\"text-sm text-foreground\">{formatDate(project?.startDate)}</div>\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => onViewAbonos?.(project)}\r\n                        title=\"Ver abonos\"\r\n                        aria-label=\"Ver abonos\"\r\n                      >\r\n                        <Icon name=\"Eye\" size={16} />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => onRegisterAbono?.(project)}\r\n                        title=\"Registrar abono\"\r\n                        aria-label=\"Registrar abono\"\r\n                      >\r\n                        <Icon name=\"CreditCard\" size={16} />\r\n                      </Button>\r\n\r\n                      {/* Ejemplo de acci贸n de imagen si luego lo conectas */}\r\n                      {/* <Button variant=\"ghost\" size=\"icon\" onClick={() => _handleImageUpload(project)} title=\"Subir imagen\" aria-label=\"Subir imagen\"><Icon name=\"Image\" size={16} /></Button> */}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n\r\n              </React.Fragment>\r\n            ))}\r\n            {pageProjects?.length === 0 && !loading && (\r\n              <tr><td colSpan={9} className=\"p-8 text-center text-muted-foreground\">No hay proyectos para mostrar.</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* Paginaci贸n Desktop */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n            <span className=\"text-xs text-muted-foreground ml-3\">\r\n              Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n            <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* M贸vil */}\r\n      <div className=\"lg:hidden\">\r\n        {pageProjects?.map((project) => (\r\n          <div key={project?.id} className=\"border-b border-border p-4\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedProjects?.includes(project?.id)}\r\n                  onChange={() => handleSelectProject(project?.id)}\r\n                  className=\"rounded border-border\"\r\n                  aria-label={`Seleccionar ${project?.name}`}\r\n                />\r\n                <Image src={project?.image} alt={project?.name} className=\"w-12 h-12 rounded-lg object-cover\" />\r\n                <div>\r\n                  <div className=\"font-medium text-foreground\">{project?.name}</div>\r\n                  <div className=\"text-sm text-muted-foreground\">{project?.code}</div>\r\n                </div>\r\n              </div>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={() => toggleRowExpansion(project?.id)}\r\n                aria-label=\"Alternar detalles\"\r\n                title={expandedRows.includes(project.id) ? \"Ocultar detalles\" : \"Ver detalles\"}\r\n              >\r\n                <Icon name={expandedRows.includes(project.id) ? \"ChevronUp\" : \"ChevronDown\"} size={16} />\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4 mb-3\">\r\n              <div>\r\n                <div className=\"text-xs text-muted-foreground\">Cliente</div>\r\n                <div className=\"text-sm text-foreground font-medium\">{project?.client?.name}</div>\r\n                <div className=\"text-xs text-muted-foreground\">{project?.client?.email}</div>\r\n              </div>\r\n              <div>\r\n                <div className=\"text-xs text-muted-foreground\">Estado</div>\r\n                <div className=\"mt-1\">\r\n                  {(() => {\r\n                    const estadoInfo = obtenerEstadoNormalizado(project?.status, project?.statusLabel);\r\n                    const colorClasses = obtenerColorEstado(estadoInfo.canonico);\r\n                    return (\r\n                      <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${colorClasses}`}>\r\n                        {estadoInfo.label}\r\n                      </span>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4 mb-3\">\r\n              <div>\r\n                <div className=\"text-xs text-muted-foreground\">Presupuesto</div>\r\n                <div className=\"text-sm text-foreground font-medium\">{formatCurrency(project?.budget)}</div>\r\n                {Number(project?.equiposUSD) > 0 && (\r\n                  <div className=\"text-[11px] text-muted-foreground\">Equipos: {formatUSD(project?.equiposUSD)}</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4 mb-3\">\r\n              <div>\r\n                <div className=\"text-xs text-muted-foreground\">Total restante</div>\r\n                {(() => {\r\n                  const fromDB = project?.financialSummary?.totalRestante;\r\n                  if (typeof fromDB === 'number' && !isNaN(fromDB)) {\r\n                    return <div className=\"text-sm text-foreground font-medium\">{formatCurrency(fromDB)}</div>;\r\n                  }\r\n                  const paid = typeof getPaidAmount === 'function'\r\n                    ? Number(getPaidAmount({ id: project?.rawId || project?.id })) || 0\r\n                    : 0;\r\n                  const budget = Number(project?.budget) || 0;\r\n                  const remaining = Math.max(budget - paid, 0);\r\n                  return <div className=\"text-sm text-foreground font-medium\">{formatCurrency(remaining)}</div>;\r\n                })()}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Acciones m贸viles */}\r\n            <div className=\"flex items-center space-x-2 mt-3 pt-3 border-t border-border\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onViewAbonos?.(project)}\r\n                iconName=\"Eye\"\r\n                iconPosition=\"left\"\r\n                className=\"flex-1\"\r\n              >\r\n                Ver Abonos\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onRegisterAbono?.(project)}\r\n                iconName=\"CreditCard\"\r\n                iconPosition=\"left\"\r\n                className=\"flex-1\"\r\n              >\r\n                Registrar\r\n              </Button>\r\n            </div>\r\n\r\n            {expandedRows?.includes(project?.id) && (\r\n              <div className=\"mt-4 pt-4 border-t border-border\">\r\n                <div className=\"grid grid-cols-1 gap-4\">\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div><div className=\"text-xs text-muted-foreground\">Inicio</div><div className=\"text-sm text-foreground\">{formatDate(project?.startDate)}</div></div>\r\n                    <div><div className=\"text-xs text-muted-foreground\">Fin</div><div className=\"text-sm text-foreground\">{formatDate(project?.endDate)}</div></div>\r\n                    <div><div className=\"text-xs text-muted-foreground\">Departamento</div><div className=\"text-sm text-foreground\">{project?.department || ''}</div></div>\r\n                    <div><div className=\"text-xs text-muted-foreground\">Ubicaci贸n</div><div className=\"text-sm text-foreground\">{project?.location || ''}</div></div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-xs text-muted-foreground mb-2\">Personal Asignado</div>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {(project?.assignedPersonnel || [])?.map((person, index) => (\r\n                        <div key={index} className=\"flex items-center space-x-1 bg-muted px-2 py-1 rounded\">\r\n                          <Icon name=\"User\" size={12} />\r\n                          <span className=\"text-xs text-foreground\">{person?.name}</span>\r\n                          {person?.role && <span className=\"text-[10px] text-muted-foreground\">({person?.role})</span>}\r\n                        </div>\r\n                      ))}\r\n                      {(!project?.assignedPersonnel || project?.assignedPersonnel?.length === 0) && (\r\n                        <div className=\"text-xs text-muted-foreground\">Sin personal asignado</div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-xs text-muted-foreground mb-1\">Descripci贸n</div>\r\n                    <p className=\"text-sm text-muted-foreground whitespace-pre-line\">{project?.description || ''}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n        {pageProjects?.length === 0 && !loading && (\r\n          <div className=\"p-8 text-center text-muted-foreground\">No hay proyectos para mostrar.</div>\r\n        )}\r\n\r\n        {/* Paginaci贸n Mobile */}\r\n        <div className=\"flex flex-col gap-3 p-4 border-t border-border\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {totalItems === 0 ? '0 de 0' : `${startIndex + 1}-${endIndex} de ${totalItems}`}\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n              <span className=\"px-2 text-sm text-foreground\">{currentPage}/{totalPages}</span>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectTable;\r\n","// src/services/abonoService.js\r\nimport httpService from './httpService';\r\n\r\n// Ruta base para los endpoints de abonos (configurable)\r\nconst BASE_PATH = '/abonos';\r\n\r\n/**\r\n * Servicio centralizado para gestionar Abonos de pago\r\n * Usa el proxy /api configurado en httpService\r\n *\r\n * Convenciones de API asumidas (donde ${BASE_PATH} es configurable):\r\n *  - Crear:         POST   ${BASE_PATH}/crear\r\n *  - Listar:        GET    ${BASE_PATH}            (acepta ?page, ?limit, y filtros)\r\n *  - Obtener por ID GET    ${BASE_PATH}/:id\r\n *  - Actualizar:    PUT    ${BASE_PATH}/:id\r\n *  - Eliminar:      DELETE ${BASE_PATH}/:id\r\n *  - Por proyecto:  GET    ${BASE_PATH}/proyecto/:proyectoId\r\n *  - Por cliente:   GET    ${BASE_PATH}/cliente/:clienteId\r\n *  - Aprobar:       POST   ${BASE_PATH}/:id/aprobar\r\n *  - Rechazar:      POST   ${BASE_PATH}/:id/rechazar   (body: { motivo })\r\n */\r\nconst abonoService = {\r\n  /**\r\n   * Crea un nuevo abono\r\n   * @param {Object} data\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async createAbono(data) {\r\n    return await httpService.post(`${BASE_PATH}/crear`, data);\r\n  },\r\n\r\n  /**\r\n   * Lista abonos con filtros/paginaci贸n (opcional)\r\n   * @param {Object} [params]  e.g. { page, limit, proyectoId, clienteId, estado, desde, hasta, q }\r\n   * @returns {Promise<Object|Array>}\r\n   */\r\n  async getAbonos(params = {}) {\r\n    return await httpService.get(`${BASE_PATH}`, { params });\r\n  },\r\n\r\n  /**\r\n   * Obtiene un abono por ID\r\n   * @param {string} id\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async getAbonoById(id) {\r\n    return await httpService.get(`${BASE_PATH}/${id}`);\r\n  },\r\n\r\n  /**\r\n   * Actualiza un abono por ID\r\n   * @param {string} id\r\n   * @param {Object} data\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async updateAbono(id, data) {\r\n    return await httpService.patch(`${BASE_PATH}/editar/${id}`, data);\r\n  },\r\n\r\n  /**\r\n   * Elimina un abono por ID\r\n   * @param {string} id\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async deleteAbono(id) {\r\n    return await httpService.delete(`${BASE_PATH}/${id}`);\r\n  },\r\n\r\n  /**\r\n   * Lista abonos por proyecto\r\n   * @param {string} proyectoId\r\n   * @param {Object} [params]\r\n   * @returns {Promise<Object|Array>}\r\n   */\r\n  async getAbonosByProyecto(proyectoId, params = {}) {\r\n    return await httpService.get(`${BASE_PATH}/proyecto/${proyectoId}`, { params });\r\n  },\r\n\r\n  /**\r\n   * Lista abonos por cliente\r\n   * @param {string} clienteId\r\n   * @param {Object} [params]\r\n   * @returns {Promise<Object|Array>}\r\n   */\r\n  async getAbonosByCliente(clienteId, params = {}) {\r\n    return await httpService.get(`${BASE_PATH}/cliente/${clienteId}`, { params });\r\n  },\r\n    /**\r\n   * Lista abonos por cliente\r\n   * @param {string} clienteId\r\n   * @param {Object} [params]\r\n   * @returns {Promise<Object|Array>}\r\n   */\r\n    async obtenersumadortotaldeabonos(clienteId, params = {}) {\r\n      return await httpService.get(`${BASE_PATH}/suma`, { params });\r\n    },\r\n\r\n  /**\r\n   * Aprueba un abono\r\n   * @param {string} id\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async aprobarAbono(id) {\r\n    return await httpService.post(`${BASE_PATH}/${id}/aprobar`, {});\r\n  },\r\n\r\n  /**\r\n   * Rechaza un abono con motivo\r\n   * @param {string} id\r\n   * @param {string} motivo\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async rechazarAbono(id, motivo = '') {\r\n    return await httpService.post(`${BASE_PATH}/${id}/rechazar`, { motivo });\r\n  },\r\n};\r\n\r\nexport default abonoService;\r\n","import React, { useMemo, useEffect, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport abonoService from '../../../services/abonoService';\r\n\r\nconst AbonosStats = ({ projects = [], getTotalPagado, refreshTrigger }) => {\r\n  const [totalAbonosDesdeAPI, setTotalAbonosDesdeAPI] = useState(0);\r\n  const [cargandoTotalAbonos, setCargandoTotalAbonos] = useState(false);\r\n\r\n  // Obtener el total de abonos desde la API\r\n  // Se ejecuta al montar, cuando cambian los proyectos, o cuando se actualiza refreshTrigger\r\n  useEffect(() => {\r\n    const obtenerTotalAbonos = async () => {\r\n      setCargandoTotalAbonos(true);\r\n      try {\r\n        const respuesta = await abonoService.obtenersumadortotaldeabonos();\r\n        // La API puede devolver el total en diferentes formatos\r\n        const total = respuesta?.data?.total ?? respuesta?.data?.suma ?? respuesta?.total ?? respuesta?.suma ?? 0;\r\n        setTotalAbonosDesdeAPI(Number(total) || 0);\r\n      } catch (error) {\r\n        console.error('Error al obtener el total de abonos:', error);\r\n        setTotalAbonosDesdeAPI(0);\r\n      } finally {\r\n        setCargandoTotalAbonos(false);\r\n      }\r\n    };\r\n\r\n    obtenerTotalAbonos();\r\n  }, [refreshTrigger]); // Se ejecuta cuando cambia refreshTrigger o al montar\r\n\r\n  const stats = useMemo(() => {\r\n    if (!Array.isArray(projects) || projects.length === 0) {\r\n      return {\r\n        total: 0,\r\n        pagados: 0,\r\n        enProceso: 0,\r\n        enPausa: 0,\r\n        totalBudget: 0,\r\n        totalRecaudado: 0,\r\n        progresoGeneral: 0,\r\n      };\r\n    }\r\n\r\n    const getBudget = (p) => Number(p?.totalPresupuesto ?? p?.presupuesto?.total ?? p?.budget ?? 0);\r\n    \r\n    // Funci贸n para obtener el total restante (consistente con la l贸gica del filtro)\r\n    const obtenerTotalRestante = (p) => {\r\n      // 1) Valor directo desde backend si est谩 presente\r\n      const resumen = p?.resumenFinanciero || p?.financialSummary || {};\r\n      const fromDB = resumen?.totalRestante ?? resumen?.saldoPendiente ?? resumen?.saldo_pendiente;\r\n      if (typeof fromDB === 'number' && !isNaN(fromDB)) {\r\n        return fromDB;\r\n      }\r\n      // 2) Fallback: calcula a partir de presupuesto y pagado\r\n      const presupuesto = getBudget(p);\r\n      const pagado = typeof getTotalPagado === 'function' \r\n        ? Number(getTotalPagado(p) || 0) \r\n        : 0;\r\n      const restante = Math.max(presupuesto - pagado, 0);\r\n      return restante;\r\n    };\r\n    \r\n    let totalBudget = 0;\r\n    let totalRecaudado = 0;\r\n    let pagados = 0;\r\n    let enProceso = 0;\r\n    let enPausa = 0;\r\n\r\n    projects.forEach((project) => {\r\n      const budget = getBudget(project);\r\n      const paid = typeof getTotalPagado === 'function' \r\n        ? Number(getTotalPagado(project) || 0) \r\n        : 0;\r\n      const totalRestante = obtenerTotalRestante(project);\r\n      \r\n      totalBudget += budget;\r\n      // Calcular total recaudado localmente como respaldo (se usar谩 si la API no devuelve datos)\r\n      totalRecaudado += paid;\r\n\r\n      // Determinar estado de pago usando la misma l贸gica que el filtro\r\n      // Pagados: Total restante = 0\r\n      if (totalRestante === 0 && budget > 0) {\r\n        pagados++;\r\n      } \r\n      // En Proceso de Pago: Total restante > 0 y < Presupuesto\r\n      else if (totalRestante > 0 && totalRestante < budget) {\r\n        enProceso++;\r\n      }\r\n\r\n      // Contar proyectos en pausa\r\n      const estado = project?.estado ?? project?.status ?? project?.statusLabel ?? '';\r\n      const estadoLower = String(estado).toLowerCase();\r\n      if (estadoLower.includes('pausa') || estadoLower.includes('pause') || estadoLower.includes('on-hold') || estadoLower.includes('hold')) {\r\n        enPausa++;\r\n      }\r\n    });\r\n\r\n    // Usar el total de abonos desde la API si est谩 disponible, sino calcular desde proyectos\r\n    const totalRecaudadoFinal = totalAbonosDesdeAPI > 0 ? totalAbonosDesdeAPI : totalRecaudado;\r\n\r\n    // Calcular progreso general: (Total recaudado / Total presupuesto) * 100\r\n    // Sin redondear para mostrar el valor exacto\r\n    const progresoGeneral = totalBudget > 0 \r\n      ? (totalRecaudadoFinal / totalBudget) * 100 \r\n      : 0;\r\n\r\n    return {\r\n      total: projects.length,\r\n      pagados,\r\n      enProceso,\r\n      enPausa,\r\n      totalBudget,\r\n      totalRecaudado: totalRecaudadoFinal,\r\n      progresoGeneral: Math.min(progresoGeneral, 100), // Cap at 100% pero sin redondear\r\n      cargandoTotalAbonos,\r\n    };\r\n  }, [projects, getTotalPagado, totalAbonosDesdeAPI]);\r\n\r\n  const formatCurrency = (amount) => {\r\n    if (amount == null || isNaN(amount)) return '$0';\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN',\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0\r\n    }).format(amount);\r\n  };\r\n\r\n  const statCards = [\r\n    {\r\n      title: 'Total de Proyectos',\r\n      value: stats.total,\r\n      icon: 'FolderOpen',\r\n      color: 'bg-blue-500',\r\n      textColor: 'text-blue-600',\r\n      bgColor: 'bg-blue-50'\r\n    },\r\n    {\r\n      title: 'Proyectos Pagados',\r\n      value: stats.pagados,\r\n      icon: 'CheckCircle',\r\n      color: 'bg-emerald-500',\r\n      textColor: 'text-emerald-600',\r\n      bgColor: 'bg-emerald-50',\r\n      description: 'Proyectos completamente pagados'\r\n    },\r\n    {\r\n      title: 'En Proceso de Pago',\r\n      value: stats.enProceso,\r\n      icon: 'Clock',\r\n      color: 'bg-yellow-500',\r\n      textColor: 'text-yellow-600',\r\n      bgColor: 'bg-yellow-50',\r\n      description: 'Proyectos con pagos parciales'\r\n    },\r\n    {\r\n      title: 'Presupuesto Total',\r\n      value: formatCurrency(stats.totalBudget),\r\n      icon: 'DollarSign',\r\n      color: 'bg-purple-500',\r\n      textColor: 'text-purple-600',\r\n      bgColor: 'bg-purple-50',\r\n      description: 'Suma de todos los presupuestos'\r\n    },\r\n    {\r\n      title: 'Proyectos en Pausa',\r\n      value: stats.enPausa,\r\n      icon: 'Pause',\r\n      color: 'bg-orange-500',\r\n      textColor: 'text-orange-600',\r\n      bgColor: 'bg-orange-50',\r\n      description: 'Proyectos con estado en pausa'\r\n    },\r\n    {\r\n      title: 'Total Recaudado',\r\n      value: formatCurrency(stats.totalRecaudado),\r\n      icon: 'CreditCard',\r\n      color: 'bg-green-500',\r\n      textColor: 'text-green-600',\r\n      bgColor: 'bg-green-50',\r\n      description: 'Monto total de abonos registrados'\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6 mb-6\">\r\n      {/* Tarjetas de m茅tricas */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {statCards.map((stat, index) => (\r\n          <div key={index} className=\"bg-card border border-border rounded-lg p-6 hover:shadow-md transition-smooth\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-sm text-muted-foreground mb-1\">{stat.title}</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{stat.value}</p>\r\n                {stat.description && (\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">{stat.description}</p>\r\n                )}\r\n              </div>\r\n              <div className={`w-12 h-12 ${stat.bgColor} rounded-lg flex items-center justify-center flex-shrink-0`}>\r\n                <Icon name={stat.icon} size={24} className={stat.textColor} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Barra de progreso general */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-1\">Progreso General de Pagos</h3>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {formatCurrency(stats.totalRecaudado)} de {formatCurrency(stats.totalBudget)} recaudados\r\n            </p>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <p className=\"text-2xl font-bold text-primary\">\r\n              {stats.progresoGeneral.toFixed(2)}%\r\n            </p>\r\n            <p className=\"text-xs text-muted-foreground\">Completado</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"w-full bg-muted rounded-full h-4 overflow-hidden\">\r\n          <div \r\n            className=\"h-4 rounded-full bg-gradient-to-r from-primary to-primary/80 transition-all duration-500\"\r\n            style={{ \r\n              width: `${stats.progresoGeneral}%`,\r\n              minWidth: stats.progresoGeneral > 0 ? '2px' : '0'\r\n            }}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"flex justify-between items-center mt-4 pt-4 border-t border-border\">\r\n          <div className=\"text-center flex-1\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Total Recaudado</p>\r\n            <p className=\"text-lg font-semibold text-foreground\">{formatCurrency(stats.totalRecaudado)}</p>\r\n          </div>\r\n          <div className=\"text-center flex-1 border-x border-border\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Pendiente</p>\r\n            <p className=\"text-lg font-semibold text-foreground\">\r\n              {formatCurrency(Math.max(stats.totalBudget - stats.totalRecaudado, 0))}\r\n            </p>\r\n          </div>\r\n          <div className=\"text-center flex-1\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Presupuesto Total</p>\r\n            <p className=\"text-lg font-semibold text-foreground\">{formatCurrency(stats.totalBudget)}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AbonosStats;\r\n","import React, { useEffect, useMemo, useRef, useState, useCallback } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport proyectoService from 'services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport usePerson from 'hooks/usePerson';\r\n\r\n/* === Cat谩logos === */\r\nconst projectTypes = [\r\n  { value: 'Instalaci贸n', label: 'Instalaci贸n' },\r\n  { value: 'Mantenimiento Preventivo', label: 'Mantenimiento Preventivo' },\r\n  { value: 'Mantenimiento Correctivo', label: 'Mantenimiento Correctivo' },\r\n  { value: 'Inspecci贸n', label: 'Inspecci贸n' },\r\n];\r\n\r\nconst departmentOptions = [\r\n  { value: 'Ingenier铆a', label: 'Ingenier铆a' },\r\n  { value: 'Mantenimiento', label: 'Mantenimiento' },\r\n  { value: 'Operaciones', label: 'Operaciones' },\r\n];\r\n\r\nconst priorityOptions = [\r\n  { value: 'low', label: 'Baja' },\r\n  { value: 'medium', label: 'Media' },\r\n  { value: 'high', label: 'Alta' },\r\n  { value: 'urgent', label: 'Urgente' },\r\n];\r\n\r\nconst projectStatusOptions = [\r\n  { value: 'Planificaci贸n', label: 'Planificaci贸n' },\r\n  { value: 'En Progreso', label: 'En Progreso' },\r\n  { value: 'En Pausa', label: 'En Pausa' },\r\n  { value: 'En Revisi贸n', label: 'En Revisi贸n' },\r\n  { value: 'Completado', label: 'Completado' },\r\n  { value: 'Cancelado', label: 'Cancelado' },\r\n];\r\n\r\nconst personnelOptionsFallback = [\r\n  { value: 'Andr茅s Torres  T茅cnico HVAC', label: 'Andr茅s Torres  T茅cnico HVAC' },\r\n  { value: 'Laura G贸mez  Supervisora de Mantenimiento', label: 'Laura G贸mez  Supervisora de Mantenimiento' },\r\n  { value: 'Pedro Hern谩ndez  Ingeniero de Campo', label: 'Pedro Hern谩ndez  Ingeniero de Campo' },\r\n];\r\n\r\nconst mapPriorityToEs = (v) => {\r\n  const m = { low: 'Baja', medium: 'Media', high: 'Alta', urgent: 'Urgente' };\r\n  return m[(v || '').toString().toLowerCase()] || v || '';\r\n};\r\n\r\n// /** Tu backend de CREAR solo acepta: \"activo\" | \"en proceso\" */\r\n// const mapStatusForCreate = (uiStatus) => {\r\n//   const s = (uiStatus || '').toLowerCase();\r\n//   if (s === 'en progreso') return 'en proceso';\r\n//   return 'activo';\r\n// };\r\n\r\n/* ===================== Helpers ===================== */\r\nconst formatWithCommas = (v, decimals = 2) => {\r\n  if (v === '' || v == null) return '';\r\n  const num = Number(v);\r\n  if (!Number.isFinite(num)) return '';\r\n  const options = Number.isInteger(num)\r\n    ? { minimumFractionDigits: 0, maximumFractionDigits: 0 }\r\n    : { minimumFractionDigits: decimals, maximumFractionDigits: decimals };\r\n  return num.toLocaleString('es-MX', options);\r\n};\r\nconst unformatNumber = (raw) => {\r\n  if (raw === '' || raw == null) return 0;\r\n  const clean = String(raw).replace(/[^\\d.-]/g, '');\r\n  const n = parseFloat(clean);\r\n  return Number.isFinite(n) ? n : 0;\r\n};\r\nconst rateSafe = (rate) => (Number.isFinite(Number(rate)) ? Number(rate) : 0);\r\n/* =================================================== */\r\n\r\nconst CreateProjectModal = ({ isOpen, onClose, onSubmit }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const { persons, getPersons } = usePerson();\r\n\r\n  // Estado del formulario\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    code: '',\r\n    type: '',\r\n    client: '',\r\n    department: '',\r\n    priority: '',\r\n    status: '',\r\n    budgetBreakdown: {\r\n      labor: 0,\r\n      parts: 0,\r\n      equipment: 0, // siempre guardado en MXN\r\n      materials: 0,\r\n      transportation: 0,\r\n      other: 0,\r\n    },\r\n    location: '',\r\n    startDate: '',\r\n    endDate: '',\r\n    assignedPersonnel: [],\r\n    description: '',\r\n  });\r\n\r\n  // === Moneda / FX ===\r\n  const [isEquipmentInUSD, setIsEquipmentInUSD] = useState(false);\r\n  const [exchangeRate, setExchangeRate] = useState(18); // MXN por USD\r\n  const [uiEquipmentUSD, setUiEquipmentUSD] = useState(''); //  ahora SOLO display (read-only)\r\n  const [loadingFx, setLoadingFx] = useState(false);\r\n  const [fxError, setFxError] = useState(null);\r\n\r\n  // refs anti-bucle\r\n  const isUSDRef = useRef(isEquipmentInUSD);\r\n  useEffect(() => { isUSDRef.current = isEquipmentInUSD; }, [isEquipmentInUSD]);\r\n\r\n  // === Clientes ===\r\n  const [clientOptions, setClientOptions] = useState([]);\r\n  const [loadingClients, setLoadingClients] = useState(false);\r\n\r\n  // Clientes (una vez por apertura)\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        setLoadingClients(true);\r\n        const resp = await clientService.getClients();\r\n        const list = Array.isArray(resp?.data) ? resp.data : (Array.isArray(resp) ? resp : []);\r\n        const opts = list.map((c) => ({ value: c.id, label: c.empresa || c.contacto || '' }));\r\n        if (mounted) setClientOptions(opts);\r\n      } catch (e) {\r\n        console.error('Error cargando clientes:', e);\r\n      } finally {\r\n        if (mounted) setLoadingClients(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [isOpen]);\r\n\r\n  // Personas (una vez por apertura, sin depender de getPersons)\r\n  const fetchedPersonsRef = useRef(false);\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    if (fetchedPersonsRef.current) return;\r\n    fetchedPersonsRef.current = true;\r\n    const abort = new AbortController();\r\n    (async () => {\r\n      try {\r\n        await getPersons({ signal: abort.signal });\r\n      } catch (e) {\r\n        if (e?.name !== 'AbortError') console.error('Error cargando empleados:', e);\r\n      }\r\n    })();\r\n    return () => { abort.abort(); fetchedPersonsRef.current = false; };\r\n  }, [isOpen]); // intencionalmente sin getPersons\r\n\r\n  // Opciones de personal\r\n  const personnelOptionsFinal = useMemo(() => {\r\n    if (!Array.isArray(persons) || persons.length === 0) return personnelOptionsFallback;\r\n    const built = persons.map((p) => {\r\n      const nombre =\r\n        p?.nombreCompleto ||\r\n        [p?.nombre, p?.apellidoPaterno, p?.apellidoMaterno].filter(Boolean).join(' ') ||\r\n        p?.nombre || p?.name || '';\r\n      const puesto = p?.puesto || p?.rol || p?.cargo;\r\n      const etiqueta = puesto ? `${nombre}  ${puesto}` : nombre;\r\n      return etiqueta ? { value: etiqueta, label: etiqueta } : null;\r\n    }).filter(Boolean);\r\n\r\n    const seen = new Set(); const dedup = [];\r\n    for (const opt of built) { if (seen.has(opt.value)) continue; seen.add(opt.value); dedup.push(opt); }\r\n    return dedup.length ? dedup : personnelOptionsFallback;\r\n  }, [persons]);\r\n\r\n  const handleInputChange = (key, value) => {\r\n    setFormData((s) => ({ ...s, [key]: value }));\r\n    if (errors[key]) setErrors((e) => ({ ...e, [key]: undefined }));\r\n  };\r\n\r\n  const setEquipmentMXN = (mxnValue) => {\r\n    setFormData((s) => ({\r\n      ...s,\r\n      budgetBreakdown: { ...s.budgetBreakdown, equipment: Number(mxnValue) || 0 },\r\n    }));\r\n  };\r\n\r\n  /**  Cuando est谩 en USD, el USD mostrado se calcula SIEMPRE desde MXN/rate */\r\n  useEffect(() => {\r\n    if (!isEquipmentInUSD) return;\r\n    const mxn = Number(formData?.budgetBreakdown?.equipment || 0);\r\n    const rate = rateSafe(exchangeRate);\r\n    const usd = rate ? mxn / rate : 0;\r\n    setUiEquipmentUSD(usd ? formatWithCommas(usd, 2) : '0.00');\r\n  }, [isEquipmentInUSD, exchangeRate, formData?.budgetBreakdown?.equipment]);\r\n\r\n  const handleBudgetChange = (key, rawValue) => {\r\n    const cleanedNumber = unformatNumber(rawValue);\r\n    //  si est谩 en USD, NO permitimos editar; solo mostramos USD calculado.\r\n    if (key === 'equipment' && isEquipmentInUSD) return;\r\n    setFormData((s) => ({\r\n      ...s,\r\n      budgetBreakdown: { ...s.budgetBreakdown, [key]: cleanedNumber },\r\n    }));\r\n  };\r\n\r\n  // === FX: traer USDMXN estable\r\n  const fetchUsdMxnRate = useCallback(async () => {\r\n    try {\r\n      setFxError(null);\r\n      setLoadingFx(true);\r\n      const map = await proyectoService.getCurrencyRatesMap({ base: 'USD', currencies: ['MXN'] });\r\n      const rate = Number(map?.MXN || 0);\r\n      if (rate > 0) {\r\n        setExchangeRate(rate);\r\n        // USD de display se recalcula en el useEffect de arriba\r\n        return rate;\r\n      } else {\r\n        setFxError('No lleg贸 una tasa v谩lida.');\r\n        return null;\r\n      }\r\n    } catch (e) {\r\n      setFxError(e?.message || 'Error llamando currencyapi');\r\n      console.error('currencyapi error:', e);\r\n      return null;\r\n    } finally {\r\n      setLoadingFx(false);\r\n    }\r\n  }, []);\r\n\r\n  // Pre-cargar tasa al abrir\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    fetchUsdMxnRate();\r\n  }, [isOpen, fetchUsdMxnRate]);\r\n\r\n  const toggleEquipmentUSD = async (checked) => {\r\n    setIsEquipmentInUSD(checked);\r\n    if (checked) {\r\n      await fetchUsdMxnRate(); // tras traer tasa, el useEffect calcular谩 el USD mostrado\r\n    } else {\r\n      setUiEquipmentUSD('');\r\n    }\r\n  };\r\n\r\n  // En modo USD, el rate tambi茅n es solo lectura (no editable)\r\n  const handleExchangeRateChange = () => {};\r\n\r\n  const validate = () => {\r\n    const e = {};\r\n    if (!formData.name) e.name = 'Requerido';\r\n    if (!formData.type) e.type = 'Requerido';\r\n    if (!formData.client) e.client = 'Seleccione un cliente';\r\n    if (!formData.department) e.department = 'Requerido';\r\n    if (!formData.priority) e.priority = 'Requerido';\r\n    if (!formData.status) e.status = 'Requerido';\r\n    if (!formData.location) e.location = 'Requerido';\r\n    if (!formData.startDate) e.startDate = 'Requerido';\r\n    if (!formData.endDate) e.endDate = 'Requerido';\r\n    if (formData.startDate && formData.endDate && new Date(formData.endDate) < new Date(formData.startDate)) {\r\n      e.endDate = 'La fecha de fin no puede ser anterior al inicio';\r\n    }\r\n    if (isEquipmentInUSD && !(exchangeRate > 0)) e.exchangeRate = 'Indique un tipo de cambio v谩lido';\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  };\r\n \r\n  const buildPayloadForBackend = () => {\r\n    const b = formData.budgetBreakdown || {};\r\n    const equipoDolares = isEquipmentInUSD\r\n      ? unformatNumber(uiEquipmentUSD) // aunque sea read-only, lo mandamos como referencia\r\n      : undefined;\r\n\r\n    return {\r\n      codigo: formData.code || '',\r\n      nombre: formData.name || '',\r\n      tipoProyecto: formData.type || '',\r\n      cliente: { id: formData.client || '', nombre: formData.clientName || '' },\r\n      departamento: formData.department || '',\r\n      prioridad: mapPriorityToEs(formData.priority),\r\n      ubicacion: formData.location || '',\r\n      descripcion: formData.description || '',\r\n      personalAsignado: Array.isArray(formData.assignedPersonnel) ? formData.assignedPersonnel : [],\r\n      cronograma: { fechaInicio: formData.startDate || '', fechaFin: formData.endDate || '' },\r\n      presupuesto: {\r\n        manoObra: Number(b.labor) || 0,\r\n        piezas: Number(b.parts) || 0,\r\n        equipos: Number(b.equipment) || 0, // siempre MXN\r\n        ...(equipoDolares !== undefined ? { equipoDolares } : {}),\r\n        materiales: Number(b.materials) || 0,\r\n        transporte: Number(b.transportation) || 0,\r\n        otros: Number(b.other) || 0,\r\n        _metaEquipos: { capturadoEn: isEquipmentInUSD ? 'USD' : 'MXN' },\r\n      },\r\n      estado: formData.status,\r\n    };\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validate()) return;\r\n    setIsSubmitting(true);\r\n    try {\r\n      const payload = buildPayloadForBackend();\r\n      await proyectoService.createProyecto(payload);\r\n      onSubmit && onSubmit(payload);\r\n      onClose && onClose();\r\n    } catch (err) {\r\n      console.error('Error creando proyecto:', err);\r\n      alert(err?.data?.message || err?.userMessage || err?.message || 'Error al crear el proyecto.');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n  const b = formData.budgetBreakdown || {};\r\n  const totalMXN =\r\n    (Number(b?.labor) || 0) +\r\n    (Number(b?.parts) || 0) +\r\n    (Number(b?.equipment) || 0) +\r\n    (Number(b?.materials) || 0) +\r\n    (Number(b?.transportation) || 0) +\r\n    (Number(b?.other) || 0);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card border border-border rounded-lg w-full max-w-4xl max-height-[90vh] max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Crear Nuevo Proyecto</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Complete la informaci贸n del proyecto</p>\r\n          </div>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci贸n B谩sica */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Informaci贸n B谩sica</h3>\r\n            </div>\r\n\r\n            <Input label=\"Nombre del Proyecto\" type=\"text\" placeholder=\"Ej: Instalaci贸n HVAC Edificio Central\"\r\n              value={formData?.name} onChange={(e) => handleInputChange('name', e?.target?.value)}\r\n              error={errors?.name} required />\r\n\r\n            <Input label=\"C贸digo del Proyecto\" type=\"text\" placeholder=\"Ej: PROJ-2025-001\"\r\n              value={formData?.code} onChange={(e) => handleInputChange('code', e?.target?.value)}\r\n              error={errors?.code} description=\"Se generar谩 autom谩ticamente si se deja vac铆o\" />\r\n\r\n            <Select label=\"Tipo de Proyecto\" options={projectTypes} value={formData?.type}\r\n              onChange={(value) => handleInputChange('type', value)} error={errors?.type} required />\r\n\r\n            <Select label=\"Cliente\" options={clientOptions} value={formData?.client}\r\n              onChange={(value) => handleInputChange('client', value)} error={errors?.client}\r\n              searchable required loading={loadingClients} />\r\n\r\n            <Select label=\"Departamento Responsable\" options={departmentOptions} value={formData?.department}\r\n              onChange={(value) => handleInputChange('department', value)} error={errors?.department} required />\r\n\r\n            <Select label=\"Prioridad\" options={priorityOptions} value={formData?.priority}\r\n              onChange={(value) => handleInputChange('priority', value)} error={errors?.priority} required />\r\n\r\n            <Select label=\"Estado del Proyecto\" options={projectStatusOptions} value={formData?.status}\r\n              onChange={(value) => handleInputChange('status', value)} error={errors?.status} required />\r\n\r\n            <Input label=\"Ubicaci贸n\" type=\"text\" placeholder=\"Ej: Ciudad de M茅xico, CDMX\"\r\n              value={formData?.location} onChange={(e) => handleInputChange('location', e?.target?.value)}\r\n              error={errors?.location} required />\r\n\r\n            {/* Presupuesto */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Desglose de Presupuesto</h3>\r\n            </div>\r\n\r\n            <Input label=\"Mano de Obra (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.labor)} onChange={(e) => handleBudgetChange('labor', e?.target?.value)} />\r\n\r\n            <Input label=\"Piezas (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.parts)} onChange={(e) => handleBudgetChange('parts', e?.target?.value)} />\r\n\r\n            {/* Equipos con USD */}\r\n            <div className=\"flex flex-col gap-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                  {isEquipmentInUSD ? 'Equipos (USD se convierte a MXN)' : 'Equipos (MXN)'}\r\n                </label>\r\n                <label className=\"inline-flex items-center gap-2 text-sm text-foreground cursor-pointer select-none\">\r\n                  <input type=\"checkbox\" checked={isEquipmentInUSD}\r\n                    onChange={(e) => toggleEquipmentUSD(e.target.checked)}\r\n                    className=\"h-4 w-4 accent-primary cursor-pointer\" />\r\n                  Precio en d贸lares\r\n                </label>\r\n              </div>\r\n\r\n              {/* Campo Equipos */}\r\n              <input\r\n                type=\"text\"\r\n                inputMode=\"decimal\"\r\n                placeholder={isEquipmentInUSD ? '0.00 USD' : '0.00 MXN'}\r\n                value={isEquipmentInUSD ? uiEquipmentUSD : formatWithCommas(b?.equipment)}\r\n                onChange={(e) => handleBudgetChange('equipment', e?.target?.value)}\r\n                readOnly={isEquipmentInUSD} //  read-only en USD\r\n                disabled={false}\r\n                className={`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${isEquipmentInUSD ? 'bg-muted cursor-not-allowed' : ''}`}\r\n              />\r\n\r\n              {isEquipmentInUSD && (\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <div className=\"flex-1 min-w-[220px]\">\r\n                    <Input\r\n                      label=\"Tipo de cambio (MXN / USD)\"\r\n                      type=\"text\"\r\n                      inputMode=\"decimal\"\r\n                      value={formatWithCommas(exchangeRate, 4)}\r\n                      onChange={handleExchangeRateChange}\r\n                      readOnly\r\n                      disabled\r\n                    />\r\n                  </div>\r\n\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    onClick={fetchUsdMxnRate}\r\n                    loading={loadingFx}\r\n                    iconName=\"RefreshCcw\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    {loadingFx ? 'Actualizando' : 'Actualizar tipo de cambio'}\r\n                  </Button>\r\n\r\n                  <div className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                    Guardado en MXN:{' '}\r\n                    <span className=\"font-semibold\">\r\n                      ${formatWithCommas(b?.equipment, 2)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {fxError && <div className=\"text-xs text-destructive\">{fxError}</div>}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <Input label=\"Materiales (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.materials)} onChange={(e) => handleBudgetChange('materials', e?.target?.value)} />\r\n\r\n            <Input label=\"Transporte (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.transportation)} onChange={(e) => handleBudgetChange('transportation', e?.target?.value)} />\r\n\r\n            <Input label=\"Otros Gastos (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.other)} onChange={(e) => handleBudgetChange('other', e?.target?.value)} />\r\n\r\n            {/* Total */}\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"bg-muted p-4 rounded-lg\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm font-medium text-foreground\">Total del Presupuesto (MXN):</span>\r\n                  <span className=\"text-lg font-semibold text-primary\">\r\n                    ${formatWithCommas(totalMXN, 2)} MXN\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cronograma */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Cronograma</h3>\r\n            </div>\r\n\r\n            <Input label=\"Fecha de Inicio\" type=\"date\" value={formData?.startDate}\r\n              onChange={(e) => handleInputChange('startDate', e?.target?.value)} error={errors?.startDate} required />\r\n\r\n            <Input label=\"Fecha de Finalizaci贸n\" type=\"date\" value={formData?.endDate}\r\n              onChange={(e) => handleInputChange('endDate', e?.target?.value)} error={errors?.endDate} required />\r\n\r\n            {/* Personal */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Asignaci贸n de Personal</h3>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Select\r\n                label=\"Personal Asignado\"\r\n                options={personnelOptionsFinal}\r\n                value={formData?.assignedPersonnel}\r\n                onChange={(value) => handleInputChange('assignedPersonnel', value)}\r\n                multiple\r\n                searchable\r\n                description=\"Seleccione el personal que trabajar谩 en este proyecto\"\r\n              />\r\n            </div>\r\n\r\n            {/* Descripci贸n */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Descripci贸n del Proyecto</label>\r\n              <textarea\r\n                rows={4}\r\n                placeholder=\"Describa los objetivos, alcance y detalles importantes del proyecto...\"\r\n                value={formData?.description}\r\n                onChange={(e) => handleInputChange('description', e?.target?.value)}\r\n                className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Acciones */}\r\n          <div className=\"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-border\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} disabled={isSubmitting}>\r\n              Cancelar\r\n            </Button>\r\n            <Button type=\"submit\" loading={isSubmitting} iconName=\"Plus\" iconPosition=\"left\">\r\n              {isSubmitting ? 'Creando...' : 'Crear Proyecto'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateProjectModal;\r\n","import React, { useEffect, useMemo, useRef, useState, useCallback } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport proyectoService from 'services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport usePerson from 'hooks/usePerson';\r\n\r\n/* ===================== ESTADOS ===================== */\r\nconst estadoOptionsBackend = [\r\n  { value: 'planificaci贸n', label: 'Planificaci贸n' },\r\n  { value: 'en proceso',    label: 'En Progreso' },\r\n  { value: 'en pausa',      label: 'En Pausa' },\r\n  { value: 'en revisi贸n',   label: 'En Revisi贸n' },\r\n  { value: 'completado',    label: 'Completado' },\r\n  { value: 'cancelado',     label: 'Cancelado' },\r\n];\r\nconst ALLOWED_ESTADOS = estadoOptionsBackend.map(o => o.value);\r\n\r\n/* Mapeos de estado (API solo activo | en proceso) */\r\n// const backendToUiDefault = (apiEstado) => {\r\n//   const v = String(apiEstado || '').toLowerCase();\r\n//   if (v === 'en proceso') return 'en proceso';\r\n//   if (v === 'activo') return 'planificaci贸n';\r\n//   return 'planificaci贸n';\r\n// };\r\n// const mapUiToBackend = (uiEstado) => {\r\n//   const v = String(uiEstado || '').toLowerCase();\r\n//   return v === 'en proceso' ? 'en proceso' : 'activo';\r\n// };\r\n\r\n/* Cache local del estado UI por proyecto (no toca API) */\r\nconst UI_ESTADO_KEY = 'proyectos_ui_estado_v1';\r\nconst uiEstadoCache = {\r\n  _read() { try { return JSON.parse(localStorage.getItem(UI_ESTADO_KEY)) || {}; } catch { return {}; } },\r\n  get(id) { if (!id) return null; const m = this._read(); return m[id] || null; },\r\n  set(id, estado) {\r\n    if (!id) return;\r\n    const m = this._read();\r\n    if (estado) m[id] = estado; else delete m[id];\r\n    localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m));\r\n  }\r\n};\r\n\r\n/* ===================== CATLOGOS ===================== */\r\nconst departmentOptions = [\r\n  { value: 'Ingenier铆a', label: 'Ingenier铆a' },\r\n  { value: 'Mantenimiento', label: 'Mantenimiento' },\r\n  { value: 'Operaciones', label: 'Operaciones' },\r\n];\r\nconst priorityOptions = [\r\n  { value: 'Baja', label: 'Baja' },\r\n  { value: 'Media', label: 'Media' },\r\n  { value: 'Alta', label: 'Alta' },\r\n  { value: 'Urgente', label: 'Urgente' },\r\n];\r\n\r\n/* ===== Helpers ===== */\r\nconst toNumberOrUndef = (v) => {\r\n  if (v === '' || v == null) return undefined;\r\n  const n = typeof v === 'number' ? v : parseFloat(String(v).replace(/[^\\d.-]/g, ''));\r\n  return Number.isFinite(n) ? n : undefined;\r\n};\r\nconst formatWithCommas = (v, decimals = 2) => {\r\n  const n = toNumberOrUndef(v);\r\n  if (n == null) return '';\r\n  const opts = Number.isInteger(n)\r\n    ? { minimumFractionDigits: 0, maximumFractionDigits: 0 }\r\n    : { minimumFractionDigits: decimals, maximumFractionDigits: decimals };\r\n  return n.toLocaleString('es-MX', opts);\r\n};\r\nconst asStr = (v, fallback = '') => (v == null ? fallback : String(v));\r\nconst asArr = (v) => (Array.isArray(v) ? v : v == null ? [] : [String(v)]);\r\nconst rateSafe = (rate) => (Number.isFinite(Number(rate)) ? Number(rate) : 0);\r\n\r\n/* ===================== COMPONENTE ===================== */\r\nconst EditProjectModal = ({ isOpen = false, onClose, onSubmit, project }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [serverProject, setServerProject] = useState(null);\r\n\r\n  // Personas / Clientes\r\n  const { persons, getPersons } = usePerson();\r\n  const [clientOptions, setClientOptions] = useState([]);\r\n\r\n  // USD controls\r\n  const [isEquipmentInUSD, setIsEquipmentInUSD] = useState(false);\r\n  const [exchangeRate, setExchangeRate] = useState(18);     // MXN por USD\r\n  const [uiEquipmentUSD, setUiEquipmentUSD] = useState(''); // solo DISPLAY (read-only)\r\n  const [loadingFx, setLoadingFx] = useState(false);\r\n  const [fxError, setFxError] = useState(null);\r\n\r\n  /* ============= CARGAS ============= */\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const resp = await clientService.getClients();\r\n        const list = Array.isArray(resp?.data) ? resp.data : (Array.isArray(resp) ? resp : []);\r\n        const opts = list.map((c) => ({\r\n          value: c.id,\r\n          label: c.empresa || c.nombre || c.contacto || '',\r\n        }));\r\n        if (mounted) setClientOptions(opts);\r\n      } catch (e) {\r\n        console.error('Error cargando clientes:', e);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [isOpen]);\r\n\r\n  const fetchedPersonsRef = useRef(false);\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    if (fetchedPersonsRef.current) return;\r\n    fetchedPersonsRef.current = true;\r\n    (async () => {\r\n      try { await getPersons(); } catch (e) { console.error('Error cargando empleados:', e); }\r\n    })();\r\n    return () => { fetchedPersonsRef.current = false; };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isOpen]);\r\n\r\n  // Traer el proyecto completo al abrir\r\n  useEffect(() => {\r\n    if (!isOpen || !project?.id) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const resp = await proyectoService.getProyectoById(project.id);\r\n        const doc = resp?.data ?? resp;\r\n        if (mounted) setServerProject(doc || project);\r\n      } catch (e) {\r\n        console.error('Error cargando proyecto:', e);\r\n        if (mounted) setServerProject(project || null);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [isOpen, project?.id]);\r\n\r\n  // Normalizaci贸n (estado desde cache  si no, derivado desde API)\r\n  const normalized = useMemo(() => {\r\n    const doc = serverProject || project || {};\r\n    const p = doc.presupuesto || {};\r\n    const cron = doc.cronograma || {};\r\n    const id = doc.id || project?.id;\r\n    const estadoUi = uiEstadoCache.get(id) || doc.estado;\r\n\r\n    return {\r\n      id,\r\n      codigo: doc.codigo || '',\r\n      tipoProyecto: doc.tipoProyecto || '',\r\n      clienteId: doc?.cliente?.id ?? '',\r\n      clienteNombre: doc?.cliente?.nombre || doc?.cliente?.empresa || '',\r\n      nombre: doc.nombre || doc.nombreProyecto || '',\r\n      departamento: doc.departamento || '',\r\n      prioridad: doc.prioridad || '',\r\n      ubicacion: doc.ubicacion || '',\r\n      descripcion: doc.descripcion || '',\r\n      estado: estadoUi,\r\n      cronograma: {\r\n        fechaInicio: cron?.fechaInicio || '',\r\n        fechaFin: cron?.fechaFin || '',\r\n      },\r\n      personalAsignado: Array.isArray(doc?.personalAsignado) ? doc.personalAsignado : [],\r\n      presupuesto: {\r\n        manoObra: toNumberOrUndef(p.manoObra),\r\n        piezas: toNumberOrUndef(p.piezas),\r\n        equipos: toNumberOrUndef(p.equipos),\r\n        equipoDolares: toNumberOrUndef(p.equipoDolares),\r\n        materiales: toNumberOrUndef(p.materiales),\r\n        transporte: toNumberOrUndef(p.transporte),\r\n        otros: toNumberOrUndef(p.otros),\r\n        _metaEquipos: { capturadoEn: p?._metaEquipos?.capturadoEn || 'MXN' },\r\n      },\r\n    };\r\n  }, [serverProject, project]);\r\n\r\n  const [formData, setFormData] = useState(normalized);\r\n  useEffect(() => { if (isOpen) setFormData(normalized); }, [normalized, isOpen]);\r\n\r\n  // === Traer tasa de cambio: estable y reutilizable ===\r\n  const fetchUsdMxnRate = useCallback(async () => {\r\n    try {\r\n      setFxError(null);\r\n      setLoadingFx(true);\r\n      const map = await proyectoService.getCurrencyRatesMap({ base: 'USD', currencies: ['MXN'] });\r\n      const rate = Number(map?.MXN || 0);\r\n      if (rate > 0) {\r\n        setExchangeRate(rate);\r\n        return rate;\r\n      } else {\r\n        setFxError('No lleg贸 una tasa v谩lida.');\r\n        return null;\r\n      }\r\n    } catch (e) {\r\n      setFxError(e?.message || 'Error llamando currencyapi');\r\n      console.error('currencyapi error:', e);\r\n      return null;\r\n    } finally {\r\n      setLoadingFx(false);\r\n    }\r\n  }, []);\r\n\r\n  // Precargar tipo de cambio al abrir\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    fetchUsdMxnRate();\r\n  }, [isOpen, fetchUsdMxnRate]);\r\n\r\n  // Inicializar UI USD seg煤n _metaEquipos\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    const cap = formData?.presupuesto?._metaEquipos?.capturadoEn;\r\n    if (cap === 'USD') {\r\n      setIsEquipmentInUSD(true);\r\n    } else {\r\n      setIsEquipmentInUSD(false);\r\n      setUiEquipmentUSD('');\r\n    }\r\n  }, [isOpen, formData?.presupuesto?._metaEquipos?.capturadoEn]);\r\n\r\n  // Cuando estamos en USD: calcular SIEMPRE USD mostrado = MXN / rate (read-only)\r\n  useEffect(() => {\r\n    if (!isEquipmentInUSD) return;\r\n    const mxn = toNumberOrUndef(formData?.presupuesto?.equipos) ?? 0;\r\n    const rate = rateSafe(exchangeRate);\r\n    const usd = rate ? mxn / rate : 0;\r\n    setUiEquipmentUSD(usd ? formatWithCommas(usd, 2) : '0.00');\r\n  }, [isEquipmentInUSD, exchangeRate, formData?.presupuesto?.equipos]);\r\n\r\n  // Opciones de Personal\r\n  const personnelOptions = useMemo(() => {\r\n    const fromPersons = Array.isArray(persons) ? persons.map((p) => {\r\n      const nombre =\r\n        p?.nombreCompleto ||\r\n        [p?.nombre, p?.apellidoPaterno, p?.apellidoMaterno].filter(Boolean).join(' ') ||\r\n        p?.nombre || p?.name || '';\r\n      const puesto = p?.puesto || p?.rol || p?.cargo;\r\n      const etiqueta = puesto ? `${nombre}  ${puesto}` : nombre;\r\n      return { value: etiqueta, label: etiqueta };\r\n    }) : [];\r\n    const existing = Array.isArray(formData?.personalAsignado)\r\n      ? formData.personalAsignado.map((s) => ({ value: s, label: s })) : [];\r\n    const seen = new Set();\r\n    return [...existing, ...fromPersons].filter(o => (seen.has(o.value) ? false : (seen.add(o.value), true)));\r\n  }, [persons, formData?.personalAsignado]);\r\n\r\n  //  Total MXN (煤nica declaraci贸n)\r\n  const totalMXN = useMemo(() => {\r\n    const b = formData?.presupuesto || {};\r\n    const sum = (...vals) => vals.reduce((acc, v) => acc + (toNumberOrUndef(v) ?? 0), 0);\r\n    return sum(b.manoObra, b.piezas, b.equipos, b.materiales, b.transporte, b.otros);\r\n  }, [formData]);\r\n\r\n  // Handlers\r\n  const handle = (k, v) => {\r\n    setFormData((s) => ({ ...s, [k]: v }));\r\n    if (errors[k]) setErrors((e) => ({ ...e, [k]: undefined }));\r\n  };\r\n  const handleP = (k, raw) => {\r\n    const n = raw === '' || raw == null ? undefined : toNumberOrUndef(raw);\r\n    setFormData((s) => ({ ...s, presupuesto: { ...s.presupuesto, [k]: n } }));\r\n  };\r\n\r\n  // Toggle USD: calc display y bloquear edici贸n\r\n  const toggleUSD = async (checked) => {\r\n    setIsEquipmentInUSD(checked);\r\n    setFormData((s) => ({\r\n      ...s,\r\n      presupuesto: { ...s.presupuesto, _metaEquipos: { capturadoEn: checked ? 'USD' : 'MXN' } },\r\n    }));\r\n    if (checked) {\r\n      const rate = (await fetchUsdMxnRate()) ?? exchangeRate;\r\n      const mxn = toNumberOrUndef(formData?.presupuesto?.equipos) ?? 0;\r\n      const usd = rate ? mxn / rate : 0;\r\n      setUiEquipmentUSD(usd ? formatWithCommas(usd, 2) : '0.00');\r\n    } else {\r\n      setUiEquipmentUSD('');\r\n    }\r\n  };\r\n\r\n  const validate = () => {\r\n    const e = {};\r\n    if (!formData.nombre) e.nombre = 'Requerido';\r\n    if (!formData.departamento) e.departamento = 'Requerido';\r\n    if (!formData.ubicacion) e.ubicacion = 'Requerido';\r\n    if (!ALLOWED_ESTADOS.includes(formData.estado)) e.estado = 'Estado inv谩lido';\r\n    if (isEquipmentInUSD && !(exchangeRate > 0)) e.exchangeRate = 'Tipo de cambio inv谩lido';\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  };\r\n\r\n  // Payload: solo definidos + estado mapeado; equipoDolares calculado si USD activo\r\n  const buildPayloadForUpdate = () => {\r\n    const p = formData.presupuesto || {};\r\n    const pres = {};\r\n    ['manoObra','piezas','equipos','equipoDolares','materiales','transporte','otros'].forEach(k => {\r\n      const val = toNumberOrUndef(p[k]);\r\n      if (val != null) pres[k] = val;\r\n    });\r\n    pres._metaEquipos = { capturadoEn: isEquipmentInUSD ? 'USD' : 'MXN' };\r\n\r\n    if (isEquipmentInUSD) {\r\n      const mxn = toNumberOrUndef(p.equipos) ?? 0;\r\n      const rate = rateSafe(exchangeRate);\r\n      const usd = rate ? mxn / rate : undefined;\r\n      if (usd != null) pres.equipoDolares = usd;\r\n    }\r\n\r\n    return {\r\n      nombre: formData.nombre,\r\n      departamento: formData.departamento,\r\n      prioridad: formData.prioridad,\r\n      ubicacion: formData.ubicacion,\r\n      descripcion: formData.descripcion,\r\n      personalAsignado: Array.isArray(formData.personalAsignado) ? formData.personalAsignado : [],\r\n      estado: formData.estado,\r\n      presupuesto: pres,\r\n    };\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validate()) return;\r\n    setIsSubmitting(true);\r\n    try {\r\n      const payload = buildPayloadForUpdate();\r\n      await proyectoService.updateProyecto(formData.id, payload);\r\n      uiEstadoCache.set(formData.id, formData.estado);\r\n      onSubmit && onSubmit({ id: formData.id, ...payload, _uiEstado: formData.estado });\r\n      onClose && onClose();\r\n    } catch (err) {\r\n      console.error('Error actualizando proyecto:', err);\r\n      const detalle = err?.data?.error || err?.data?.message || err?.userMessage || err?.message;\r\n      alert(`No se pudo actualizar el proyecto.\\n${detalle || ''}`);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  /* Render */\r\n  const b = formData.presupuesto || {};\r\n  const clientLabel = useMemo(() => {\r\n    if (!formData.clienteId) return '';\r\n    const found = clientOptions.find((o) => o.value === formData.clienteId);\r\n    return found?.label || formData.clienteNombre || formData.clienteId;\r\n  }, [clientOptions, formData.clienteId, formData.clienteNombre]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card border border-border rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Editar Proyecto</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Actualice la informaci贸n permitida</p>\r\n          </div>\r\n        <Button variant=\"ghost\" size=\"icon\" onClick={onClose}><Icon name=\"X\" size={20} /></Button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci贸n B谩sica */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Informaci贸n B谩sica</h3>\r\n            </div>\r\n\r\n            <Input label=\"C贸digo (solo lectura)\" value={asStr(formData?.codigo, '')} onChange={() => {}} disabled />\r\n            <Input label=\"Tipo de Proyecto (solo lectura)\" value={asStr(formData?.tipoProyecto, '')} onChange={() => {}} disabled />\r\n            <Input label=\"Cliente (solo lectura)\" value={asStr(clientLabel, '')} onChange={() => {}} disabled />\r\n\r\n            <Input\r\n              label=\"Nombre\"\r\n              type=\"text\"\r\n              placeholder=\"Ej: Instalaci贸n HVAC Edificio Central\"\r\n              value={asStr(formData?.nombre)}\r\n              onChange={(e) => handle('nombre', e.target.value)}\r\n              error={errors?.nombre}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Departamento Responsable\"\r\n              options={departmentOptions}\r\n              value={asStr(formData?.departamento)}\r\n              onChange={(value) => handle('departamento', value)}\r\n              error={errors?.departamento}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={asStr(formData?.prioridad)}\r\n              onChange={(value) => handle('prioridad', value)}\r\n              error={errors?.prioridad}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Estado\"\r\n              options={estadoOptionsBackend}\r\n              value={asStr(formData?.estado)}\r\n              onChange={(value) => handle('estado', value)}\r\n              error={errors?.estado}\r\n              required\r\n            />\r\n\r\n            <Input\r\n              label=\"Ubicaci贸n\"\r\n              type=\"text\"\r\n              placeholder=\"Ej: Ciudad de M茅xico, CDMX\"\r\n              value={asStr(formData?.ubicacion)}\r\n              onChange={(e) => handle('ubicacion', e.target.value)}\r\n              error={errors?.ubicacion}\r\n              required\r\n            />\r\n\r\n            {/* Descripci贸n */}\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Descripci贸n del Proyecto</label>\r\n              <textarea\r\n                rows={4}\r\n                placeholder=\"Describa los objetivos, alcance y detalles importantes del proyecto...\"\r\n                value={asStr(formData?.descripcion)}\r\n                onChange={(e) => handle('descripcion', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\r\n              />\r\n            </div>\r\n\r\n            {/* Desglose de Presupuesto */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Desglose de Presupuesto</h3>\r\n            </div>\r\n\r\n            <Input label=\"Mano de Obra (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.manoObra)} onChange={(e) => handleP('manoObra', e?.target?.value)} />\r\n\r\n            <Input label=\"Piezas (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.piezas)} onChange={(e) => handleP('piezas', e?.target?.value)} />\r\n\r\n            {/* Equipos con toggle USD */}\r\n            <div className=\"flex flex-col gap-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                  {isEquipmentInUSD ? 'Equipos (USD se convierte a MXN)' : 'Equipos (MXN)'}\r\n                </label>\r\n                <label className=\"inline-flex items-center gap-2 text-sm text-foreground cursor-pointer select-none\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={isEquipmentInUSD}\r\n                    onChange={(e) => toggleUSD(e.target.checked)}\r\n                    className=\"h-4 w-4 accent-primary cursor-pointer\"\r\n                  />\r\n                  Precio en d贸lares\r\n                </label>\r\n              </div>\r\n\r\n              {/* Campo Equipos */}\r\n              <input\r\n                type=\"text\"\r\n                inputMode=\"decimal\"\r\n                placeholder={isEquipmentInUSD ? '0.00 USD' : '0.00 MXN'}\r\n                value={isEquipmentInUSD ? uiEquipmentUSD : formatWithCommas(b?.equipos)}\r\n                onChange={(e) => (isEquipmentInUSD ? undefined : handleP('equipos', e?.target?.value))}\r\n                readOnly={isEquipmentInUSD}\r\n                className={`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${isEquipmentInUSD ? 'bg-muted cursor-not-allowed' : ''}`}\r\n              />\r\n\r\n              {isEquipmentInUSD && (\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <div className=\"flex-1 min-w-[220px]\">\r\n                    <Input\r\n                      label=\"Tipo de cambio (MXN / USD)\"\r\n                      type=\"text\"\r\n                      inputMode=\"decimal\"\r\n                      value={formatWithCommas(exchangeRate, 4)}\r\n                      onChange={() => {}}\r\n                      readOnly\r\n                      disabled\r\n                    />\r\n                  </div>\r\n\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    onClick={fetchUsdMxnRate}\r\n                    loading={loadingFx}\r\n                    iconName=\"RefreshCcw\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    {loadingFx ? 'Actualizando' : 'Actualizar tipo de cambio'}\r\n                  </Button>\r\n\r\n                  <div className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                    Guardado en MXN:{' '}\r\n                    <span className=\"font-semibold\">${formatWithCommas(b?.equipos, 2)}</span>\r\n                  </div>\r\n\r\n                  {fxError && <div className=\"text-xs text-destructive\">{fxError}</div>}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <Input label=\"Materiales (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.materiales)} onChange={(e) => handleP('materiales', e?.target?.value)} />\r\n\r\n            <Input label=\"Transporte (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.transporte)} onChange={(e) => handleP('transporte', e?.target?.value)} />\r\n\r\n            <Input label=\"Otros Gastos (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.otros)} onChange={(e) => handleP('otros', e?.target?.value)} />\r\n\r\n            {/* Total */}\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"bg-muted p-4 rounded-lg\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm font-medium text-foreground\">Total del Presupuesto (MXN):</span>\r\n                  <span className=\"text-lg font-semibold text-primary\">\r\n                    ${formatWithCommas(totalMXN, 2)} MXN\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cronograma (read-only) */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Cronograma</h3>\r\n            </div>\r\n\r\n            <Input label=\"Fecha de Inicio (solo lectura)\" type=\"date\" value={asStr(formData?.cronograma?.fechaInicio, '')} onChange={() => {}} disabled />\r\n            <Input label=\"Fecha de Finalizaci贸n (solo lectura)\" type=\"date\" value={asStr(formData?.cronograma?.fechaFin, '')} onChange={() => {}} disabled />\r\n\r\n            {/* Asignaci贸n de Personal */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Asignaci贸n de Personal</h3>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Select\r\n                label=\"Personal Asignado\"\r\n                options={personnelOptions}\r\n                value={asArr(formData?.personalAsignado).map(String)}\r\n                onChange={(value) => handle('personalAsignado', asArr(value).map(String))}\r\n                multiple\r\n                searchable\r\n                description=\"Seleccione el personal que trabajar谩 en este proyecto\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Acciones */}\r\n          <div className=\"flex justify-end gap-3 mt-8 pt-6 border-t border-border\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>Cancelar</Button>\r\n            <Button type=\"submit\" loading={isSubmitting} iconName=\"Save\" iconPosition=\"left\">\r\n              {isSubmitting ? 'Guardando...' : 'Guardar Cambios'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProjectModal;\r\n","// src/hooks/useAbono.js\r\nimport { useState, useCallback, useRef } from 'react';\r\nimport { useNotifications } from '../context/NotificationContext';\r\nimport abonoService from '../services/abonoService';\r\n\r\n// З Helper: convierte fecha ISO a dd/mm/yyyy\r\nconst toDDMMYYYY = (isoDate) => {\r\n  if (!isoDate) return '';\r\n  const d = new Date(isoDate);\r\n  const dd = String(d.getUTCDate()).padStart(2, '0');\r\n  const mm = String(d.getUTCMonth() + 1).padStart(2, '0');\r\n  const yyyy = d.getUTCFullYear();\r\n  return `${dd}/${mm}/${yyyy}`;\r\n};\r\n\r\nconst useAbono = () => {\r\n  const { showOperationSuccess, showHttpError } = useNotifications();\r\n\r\n  const [abonos, setAbonos] = useState([]);\r\n  const [abonoSeleccionado, setAbonoSeleccionado] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  // Refs para cache y concurrencia\r\n  const loadingRef = useRef(false);\r\n  const hasLoadedRef = useRef(false);\r\n  const cacheParamsRef = useRef(null);\r\n  const abonosRef = useRef([]);\r\n  const createLock = useRef(false); // evita crear duplicados\r\n\r\n  /**\r\n   * Obtiene lista de abonos (con cache)\r\n   */\r\n  const getAbonos = useCallback(async (params = {}, force = false) => {\r\n    const sameParams = JSON.stringify(params) === JSON.stringify(cacheParamsRef.current);\r\n\r\n    if (!force && hasLoadedRef.current && sameParams && !loadingRef.current) {\r\n      return abonosRef.current;\r\n    }\r\n    if (loadingRef.current) return abonosRef.current;\r\n\r\n    loadingRef.current = true;\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await abonoService.getAbonos(params);\r\n      const data = Array.isArray(response) ? response : response?.data || [];\r\n      setAbonos(data);\r\n      abonosRef.current = data;\r\n      hasLoadedRef.current = true;\r\n      cacheParamsRef.current = params;\r\n      return data;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al obtener los abonos');\r\n      setAbonos([]);\r\n      return [];\r\n    } finally {\r\n      loadingRef.current = false;\r\n      setLoading(false);\r\n    }\r\n  }, [showHttpError]);\r\n\r\n  /**\r\n   * Obtiene un abono por ID\r\n   */\r\n  const getAbonoById = useCallback(async (id) => {\r\n    if (!id) return null;\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await abonoService.getAbonoById(id);\r\n      const data = response?.data || response;\r\n      setAbonoSeleccionado(data);\r\n      return data;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al obtener el abono');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showHttpError]);\r\n\r\n  /**\r\n   * Obtiene abonos por proyecto\r\n   */\r\n  const getAbonosByProyecto = useCallback(async (proyectoId, params = {}) => {\r\n    if (!proyectoId) return { items: [], total: 0 };\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await abonoService.getAbonosByProyecto(proyectoId, params);\r\n      // La API devuelve { success, data: { total, items }, message }\r\n      if (response?.success && response?.data) {\r\n        return {\r\n          items: Array.isArray(response.data.items) ? response.data.items : [],\r\n          total: Number(response.data.total) || 0\r\n        };\r\n      }\r\n      // Fallback para respuestas antiguas\r\n      if (Array.isArray(response)) {\r\n        return { items: response, total: response.length };\r\n      }\r\n      if (response?.data && Array.isArray(response.data)) {\r\n        return { items: response.data, total: response.data.length };\r\n      }\r\n      return { items: [], total: 0 };\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al obtener los abonos del proyecto');\r\n      return { items: [], total: 0 };\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showHttpError]);\r\n\r\n  /**\r\n   * Crea un abono (evita duplicados)\r\n   */\r\n  const createAbono = useCallback(async (payload) => {\r\n    if (createLock.current) return null; //  evita peticiones duplicadas\r\n    createLock.current = true;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      // Sanitiza y formatea el payload\r\n      // La fecha debe venir en formato ISO UTC desde el modal\r\n      let fechaISO = payload.fecha;\r\n      if (!fechaISO) {\r\n        fechaISO = new Date().toISOString();\r\n      } else if (typeof fechaISO === 'string' && !fechaISO.includes('T')) {\r\n        // Si viene en formato dd/mm/yyyy, convertir a ISO UTC\r\n        const [dia, mes, a帽o] = fechaISO.split('/');\r\n        if (dia && mes && a帽o) {\r\n          const fecha = new Date(`${a帽o}-${mes}-${dia}T00:00:00.000Z`);\r\n          fechaISO = fecha.toISOString();\r\n        }\r\n      }\r\n\r\n      const cleanPayload = {\r\n        idProyecto: payload.idProyecto?.trim(),\r\n        montoAbono: Number(payload.montoAbono),\r\n        fecha: fechaISO,\r\n        metodoPago: payload.metodoPago || 'Otro',\r\n        descripcion: payload.descripcion?.trim() || 'Abono registrado',\r\n        descripcionMetodo: payload.descripcionMetodo || '',\r\n        notas: payload.notas || '',\r\n      };\r\n\r\n      // Incluir referenciaPago solo si tiene valor\r\n      if (payload.referenciaPago?.trim()) {\r\n        cleanPayload.referenciaPago = payload.referenciaPago.trim();\r\n      }\r\n\r\n      const response = await abonoService.createAbono(cleanPayload);\r\n      const created = response?.data || response;\r\n\r\n      if (created) {\r\n        setAbonos((prev) => {\r\n          const next = [...prev, created];\r\n          abonosRef.current = next;\r\n          return next;\r\n        });\r\n      }\r\n\r\n      showOperationSuccess(' Abono creado exitosamente');\r\n      setSuccess(true);\r\n      return created;\r\n    } catch (err) {\r\n      console.error(' Error creando abono:', err);\r\n      setError(err);\r\n      showHttpError(err?.response?.data?.message || 'Error al crear el abono');\r\n      return null;\r\n    } finally {\r\n      createLock.current = false;\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  /**\r\n   * Edita un abono\r\n   */\r\n  const editAbono = useCallback(async (id, payload) => {\r\n    if (!id) return null;\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      // Sanitiza y formatea el payload\r\n      // La fecha debe venir en formato ISO UTC desde el modal\r\n      let fechaISO = payload.fecha;\r\n      if (!fechaISO) {\r\n        fechaISO = new Date().toISOString();\r\n      } else if (typeof fechaISO === 'string' && !fechaISO.includes('T')) {\r\n        // Si viene en formato dd/mm/yyyy, convertir a ISO UTC\r\n        const [dia, mes, a帽o] = fechaISO.split('/');\r\n        if (dia && mes && a帽o) {\r\n          const fecha = new Date(`${a帽o}-${mes}-${dia}T00:00:00.000Z`);\r\n          fechaISO = fecha.toISOString();\r\n        }\r\n      }\r\n\r\n      const cleanPayload = {\r\n        idProyecto: payload.idProyecto?.trim(),\r\n        montoAbono: Number(payload.montoAbono),\r\n        fecha: fechaISO,\r\n        metodoPago: payload.metodoPago || 'Otro',\r\n        descripcion: payload.descripcion?.trim() || 'Abono registrado',\r\n        descripcionMetodo: payload.descripcionMetodo || '',\r\n        notas: payload.notas || '',\r\n      };\r\n\r\n      // Incluir referenciaPago solo si tiene valor\r\n      if (payload.referenciaPago?.trim()) {\r\n        cleanPayload.referenciaPago = payload.referenciaPago.trim();\r\n      }\r\n\r\n      const response = await abonoService.updateAbono(id, cleanPayload);\r\n      const updated = response?.data || cleanPayload;\r\n\r\n      setAbonos((prev) => {\r\n        const next = prev.map((a) =>\r\n          (a.id === id || a._id === id) ? { ...a, ...updated } : a\r\n        );\r\n        abonosRef.current = next;\r\n        return next;\r\n      });\r\n\r\n      if (abonoSeleccionado && (abonoSeleccionado.id === id || abonoSeleccionado._id === id)) {\r\n        setAbonoSeleccionado((prev) => ({ ...prev, ...updated }));\r\n      }\r\n\r\n      showOperationSuccess('Abono actualizado');\r\n      setSuccess(true);\r\n      return updated;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al actualizar el abono');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [abonoSeleccionado, showOperationSuccess, showHttpError]);\r\n\r\n  /**\r\n   * Elimina un abono\r\n   */\r\n  const deleteAbono = useCallback(async (id) => {\r\n    if (!id) return null;\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      await abonoService.deleteAbono(id);\r\n      setAbonos((prev) => {\r\n        const next = prev.filter((a) => (a.id || a._id) !== id);\r\n        abonosRef.current = next;\r\n        return next;\r\n      });\r\n      if (abonoSeleccionado && (abonoSeleccionado.id === id || abonoSeleccionado._id === id)) {\r\n        setAbonoSeleccionado(null);\r\n      }\r\n      showOperationSuccess('Abono eliminado');\r\n      setSuccess(true);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al eliminar el abono');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [abonoSeleccionado, showOperationSuccess, showHttpError]);\r\n\r\n  /**\r\n   * Aprueba o rechaza\r\n   */\r\n  const aprobarAbono = useCallback(async (id) => {\r\n    if (!id) return null;\r\n    setLoading(true);\r\n    try {\r\n      const response = await abonoService.aprobarAbono(id);\r\n      const updated = response?.data || { estado: 'aprobado' };\r\n\r\n      setAbonos((prev) => prev.map((a) => (a.id === id ? { ...a, ...updated } : a)));\r\n      showOperationSuccess('Abono aprobado');\r\n      return updated;\r\n    } catch (err) {\r\n      showHttpError('Error al aprobar el abono');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  const rechazarAbono = useCallback(async (id, motivo = '') => {\r\n    if (!id) return null;\r\n    setLoading(true);\r\n    try {\r\n      const response = await abonoService.rechazarAbono(id, motivo);\r\n      const updated = response?.data || { estado: 'rechazado', motivoRechazo: motivo };\r\n      setAbonos((prev) => prev.map((a) => (a.id === id ? { ...a, ...updated } : a)));\r\n      showOperationSuccess('Abono rechazado');\r\n      return updated;\r\n    } catch (err) {\r\n      showHttpError('Error al rechazar el abono');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  return {\r\n    abonos,\r\n    abonoSeleccionado,\r\n    loading,\r\n    error,\r\n    success,\r\n    getAbonos,\r\n    getAbonoById,\r\n    getAbonosByProyecto,\r\n    createAbono,\r\n    editAbono,\r\n    deleteAbono,\r\n    aprobarAbono,\r\n    rechazarAbono,\r\n    setAbonos,\r\n    setAbonoSeleccionado,\r\n  };\r\n};\r\n\r\nexport default useAbono;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport useAbono from '../../../hooks/useAbono';\r\nimport useProyecto from '../../../hooks/useProyect';\r\n\r\n// Formatear monto en moneda MXN\r\nconst formatearMoneda = (cantidad) => {\r\n  if (cantidad == null || isNaN(cantidad)) return '';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(Number(cantidad) || 0);\r\n};\r\n\r\n// Limitar un valor dentro de un rango\r\nconst limitarRango = (valor, minimo, maximo) => Math.min(Math.max(valor, minimo), maximo);\r\n\r\n// Convierte fecha a formato dd/mm/yyyy para mostrar en UI\r\nconst formatearFechaParaApi = (fechaLocalStr) => {\r\n  if (!fechaLocalStr) return '';\r\n  const d = new Date(fechaLocalStr);\r\n  const rellenar = (n) => String(n).padStart(2, '0');\r\n  return `${rellenar(d.getDate())}/${rellenar(d.getMonth() + 1)}/${d.getFullYear()}`;\r\n};\r\n\r\n// Convierte fecha del input (YYYY-MM-DD) a formato ISO UTC\r\nconst formatearFechaISOUTC = (fechaLocalStr) => {\r\n  if (!fechaLocalStr) return '';\r\n  // La fecha viene en formato YYYY-MM-DD del input type=\"date\"\r\n  // Crear un objeto Date en UTC a medianoche\r\n  const fecha = new Date(fechaLocalStr + 'T00:00:00.000Z');\r\n  // Devolver en formato ISO UTC\r\n  return fecha.toISOString();\r\n};\r\n\r\n// Formatea un n煤mero con separadores de miles\r\nconst formatearNumeroConSeparadores = (valor) => {\r\n  if (!valor && valor !== 0) return '';\r\n  // Remover cualquier formato previo y obtener solo n煤meros y punto decimal\r\n  const numeroLimpio = String(valor).replace(/[^\\d.]/g, '');\r\n  if (!numeroLimpio) return '';\r\n  \r\n  // Separar parte entera y decimal\r\n  const partes = numeroLimpio.split('.');\r\n  const parteEntera = partes[0] || '0';\r\n  const parteDecimal = partes[1] ? `.${partes[1]}` : '';\r\n  \r\n  // Formatear parte entera con separadores de miles\r\n  const formateado = parteEntera.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n  \r\n  return formateado + parteDecimal;\r\n};\r\n\r\n// Limpia el formato y devuelve el valor num茅rico\r\nconst limpiarNumeroFormateado = (valor) => {\r\n  if (!valor) return '';\r\n  // Remover comas y espacios, mantener solo n煤meros y punto decimal\r\n  return String(valor).replace(/[^\\d.]/g, '');\r\n};\r\n\r\nconst ModalRegistroAbono = ({ isOpen, onClose, project, currentPaid = 0, onSave }) => {\r\n  const presupuestoProyecto = Number(project?.budget) || 0;\r\n  const saldoInicial = Math.max(presupuestoProyecto - Number(currentPaid || 0), 0);\r\n\r\n  // Hook de abonos\r\n  const { createAbono, loading } = useAbono();\r\n  \r\n  // Hook para obtener informaci贸n del proyecto\r\n  const { getProyectoById } = useProyecto();\r\n\r\n  // Campos requeridos\r\n  const [idProyecto, setIdProyecto] = useState('');\r\n  const [fechaLocal, setFechaLocal] = useState('');\r\n  const [monto, setMonto] = useState(''); // Valor num茅rico limpio para c谩lculos\r\n  const [montoFormateado, setMontoFormateado] = useState(''); // Valor formateado para mostrar\r\n  const [metodoPago, setMetodoPago] = useState('Transferencia');\r\n  const [descripcion, setDescripcion] = useState('');\r\n  const [descripcionMetodo, setDescripcionMetodo] = useState('');\r\n  const [referenciaPago, setReferenciaPago] = useState('');\r\n  const [notas, setNotas] = useState('');\r\n\r\n  // Informaci贸n del proyecto obtenida de la API\r\n  const [infoProyecto, setInfoProyecto] = useState({ id: '', nombre: '', presupuesto: 0, clienteId: '' });\r\n  const [totalAbonado, setTotalAbonado] = useState(0);\r\n\r\n  // Variables auxiliares\r\n  const [saldo, setSaldo] = useState(saldoInicial);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      const id = project?.id || project?._id || project?.idProyecto || '';\r\n      \r\n      // Establecer el ID del proyecto\r\n      setIdProyecto(id);\r\n\r\n      // Obtener informaci贸n del proyecto de la API si tenemos un ID\r\n      if (id) {\r\n        getProyectoById(id)\r\n          .then((respuesta) => {\r\n            const proyectoData = respuesta?.data || respuesta;\r\n            if (proyectoData) {\r\n            const presupuestoTotal = proyectoData.presupuesto?.total || proyectoData.totalPresupuesto || 0;\r\n              const totalAbonadoData = proyectoData.resumenFinanciero?.totalAbonado || 0;\r\n              \r\n              setInfoProyecto({\r\n                id: proyectoData.id || proyectoData._id || id,\r\n                nombre: proyectoData.nombre || proyectoData.name || 'Sin nombre',\r\n                presupuesto: Number(presupuestoTotal),\r\n                clienteId: proyectoData.cliente?.id || proyectoData.clienteId || proyectoData.cliente_id || ''\r\n              });\r\n              \r\n              // Establecer el total abonado desde la API\r\n              setTotalAbonado(totalAbonadoData);\r\n              \r\n              // Actualizar saldo basado en presupuesto obtenido de la API\r\n              const nuevoSaldo = Math.max(presupuestoTotal - totalAbonadoData, 0);\r\n              setSaldo(nuevoSaldo);\r\n            } else {\r\n              // Fallback si no se obtienen datos\r\n              setInfoProyecto({\r\n                id,\r\n                nombre: project?.name || project?.nombreProyecto || 'Sin nombre',\r\n                presupuesto: presupuestoProyecto,\r\n                clienteId: ''\r\n              });\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.warn('Error al obtener proyecto:', err);\r\n            // Usar datos del prop como fallback\r\n            setInfoProyecto({\r\n              id,\r\n              nombre: project?.name || project?.nombreProyecto || 'Sin nombre',\r\n              presupuesto: presupuestoProyecto,\r\n              clienteId: ''\r\n            });\r\n          });\r\n      } else {\r\n        setInfoProyecto({ id: '', nombre: 'Sin nombre', presupuesto: 0, clienteId: '' });\r\n      }\r\n\r\n      // Fecha actual por defecto\r\n      const hoy = new Date();\r\n      const yyyy = hoy.getFullYear();\r\n      const mm = String(hoy.getMonth() + 1).padStart(2, '0');\r\n      const dd = String(hoy.getDate()).padStart(2, '0');\r\n      setFechaLocal(`${yyyy}-${mm}-${dd}`);\r\n\r\n      setMonto('0');\r\n      setMontoFormateado('0');\r\n      setMetodoPago('Transferencia');\r\n      setDescripcion('');\r\n      setDescripcionMetodo('');\r\n      setReferenciaPago('');\r\n      setNotas('');\r\n\r\n      setSaldo(Math.max(presupuestoProyecto - Number(currentPaid || 0), 0));\r\n      setError('');\r\n    }\r\n  }, [isOpen, project, presupuestoProyecto, currentPaid, getProyectoById]);\r\n\r\n  // Vista previa del total pagado\r\n  const totalPagadoPrevio = useMemo(() => {\r\n    const m = Number(monto) || 0;\r\n    return Number(totalAbonado || 0) + (m > 0 ? m : 0);\r\n  }, [monto, totalAbonado]);\r\n\r\n  // Progreso del pago\r\n  const progreso = useMemo(() => {\r\n    if (!(infoProyecto?.presupuesto > 0)) return 0;\r\n    const p = (Number(totalPagadoPrevio) / infoProyecto.presupuesto) * 100;\r\n    return Math.round(limitarRango(p, 0, 100));\r\n  }, [totalPagadoPrevio, infoProyecto?.presupuesto]);\r\n\r\n  const manejarCambioMonto = (valor) => {\r\n    // Limpiar el valor ingresado (remover comas y caracteres no num茅ricos excepto punto decimal)\r\n    const valorLimpio = limpiarNumeroFormateado(valor);\r\n    \r\n    // Si el campo est谩 vac铆o, usar \"0\"\r\n    let valorFinal = valorLimpio === '' ? '0' : valorLimpio;\r\n    \r\n    // Si el valor actual es \"0\" y el usuario est谩 escribiendo algo nuevo\r\n    if (monto === '0' && valorLimpio !== '' && valorLimpio !== '0') {\r\n      // Si el usuario escribe un punto decimal, permitir \"0.\"\r\n      if (valorLimpio === '.' || valorLimpio === '0.') {\r\n        valorFinal = '0.';\r\n      }\r\n      // Si el usuario escribe un d铆gito, reemplazar el \"0\" con ese d铆gito\r\n      // Ejemplo: \"0\" + \"1\" = \"1\", \"0\" + \"12\" = \"12\"\r\n      else if (/^\\d+\\.?\\d*$/.test(valorLimpio)) {\r\n        // Si empieza con \"0\" seguido de d铆gitos (no decimal), quitar el \"0\" inicial\r\n        // Ejemplo: \"05\" -> \"5\", \"012\" -> \"12\"\r\n        if (valorLimpio.match(/^0+[1-9]/)) {\r\n          valorFinal = valorLimpio.replace(/^0+/, '');\r\n        } else {\r\n          valorFinal = valorLimpio;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Permitir solo un punto decimal: si hay m煤ltiples, mantener solo el primero\r\n    const partes = valorFinal.split('.');\r\n    if (partes.length > 2) {\r\n      valorFinal = partes[0] + '.' + partes.slice(1).join('');\r\n    }\r\n    \r\n    // Actualizar el valor num茅rico limpio para c谩lculos\r\n    setMonto(valorFinal);\r\n    \r\n    // Actualizar el valor formateado para mostrar\r\n    setMontoFormateado(formatearNumeroConSeparadores(valorFinal));\r\n    \r\n    // Calcular saldo si el valor es num茅rico v谩lido\r\n    const num = Number(valorFinal);\r\n    if (!isNaN(num)) {\r\n      const totalPagadoAcumulado = Number(totalAbonado || 0) + Math.max(num, 0);\r\n      const importeTotal = Number(infoProyecto.presupuesto || 0);\r\n      const nuevoSaldo = Math.max(importeTotal - totalPagadoAcumulado, 0);\r\n      setSaldo(nuevoSaldo);\r\n      \r\n      // Limpiar error si el monto es v谩lido\r\n      if (totalPagadoAcumulado <= importeTotal) {\r\n        setError('');\r\n      }\r\n    }\r\n  };\r\n\r\n  const manejarEnvio = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    const montoNum = Number(monto);\r\n\r\n    if (!idProyecto?.trim()) {\r\n      setError('El ID del proyecto es obligatorio.');\r\n      return;\r\n    }\r\n    if (!fechaLocal) {\r\n      setError('La fecha del abono es obligatoria.');\r\n      return;\r\n    }\r\n    if (!(montoNum > 0)) {\r\n      setError('El monto abonado debe ser mayor a 0.');\r\n      return;\r\n    }\r\n    if (!descripcion?.trim()) {\r\n      setError('La descripci贸n es obligatoria.');\r\n      return;\r\n    }\r\n    if (metodoPago === 'Otro' && !descripcionMetodo?.trim()) {\r\n      setError('La descripci贸n del m茅todo de pago es obligatoria cuando se selecciona \"Otro\".');\r\n      return;\r\n    }\r\n    if (['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) && !referenciaPago?.trim()) {\r\n      setError('La referencia de pago es obligatoria para este m茅todo de pago.');\r\n      return;\r\n    }\r\n    if (!['Efectivo', 'Transferencia', 'Tarjeta', 'Cheque', 'Otro'].includes(metodoPago)) {\r\n      setError('M茅todo de pago no v谩lido.');\r\n      return;\r\n    }\r\n    // Validar que el total pagado acumulado no exceda el importe total del proyecto\r\n    const totalPagadoAcumulado = Number(totalAbonado || 0) + montoNum;\r\n    const importeTotal = Number(infoProyecto.presupuesto || 0);\r\n    \r\n    if (totalPagadoAcumulado > importeTotal) {\r\n      const excedente = totalPagadoAcumulado - importeTotal;\r\n      setError(\r\n        `No se puede registrar el abono. El total pagado acumulado (${formatearMoneda(totalPagadoAcumulado)}) excede el importe total del proyecto (${formatearMoneda(importeTotal)}). Excedente: ${formatearMoneda(excedente)}.`\r\n      );\r\n      return;\r\n    }\r\n\r\n    const datos = {\r\n      idProyecto: idProyecto.trim(),\r\n      montoAbono: Number(monto),\r\n      fecha: formatearFechaISOUTC(fechaLocal),\r\n      metodoPago,\r\n      descripcion: descripcion.trim(),\r\n      descripcionMetodo: metodoPago === 'Otro' ? descripcionMetodo.trim() : undefined,\r\n      referenciaPago: ['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) ? referenciaPago.trim() : undefined,\r\n      notas: notas?.trim() || undefined\r\n    };\r\n\r\n    try {\r\n      const respuesta = await createAbono(datos);\r\n      const creado = respuesta?.data || respuesta;\r\n\r\n      if (creado) {\r\n        onSave?.(creado);\r\n        onClose?.();\r\n      }\r\n    } catch (err) {\r\n      if (err.response?.status === 409) {\r\n        setError('Ya existe un abono con estos datos.');\r\n      } else if (err.response?.status === 400) {\r\n        setError(err.response?.data?.message || 'Datos inv谩lidos. Por favor revise los campos.');\r\n      } else {\r\n        setError('Error al guardar el abono. Por favor intente nuevamente.');\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} />\r\n      <div className=\"relative bg-card border border-border rounded-lg shadow-xl w-1/3 mx-4 flex flex-col h-5/6\">\r\n        {/* Encabezado */}\r\n        <div className=\"p-4 border-b border-border flex items-center justify-between bg-card sticky top-0 z-10\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"CreditCard\" size={18} />\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Apartado de Abonos</h3>\r\n          </div>\r\n          <button\r\n            className=\"text-muted-foreground hover:text-foreground disabled:opacity-50\"\r\n            onClick={onClose}\r\n            title=\"Cerrar\"\r\n            disabled={loading}\r\n          >\r\n            <Icon name=\"X\" size={18} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Contenido */}\r\n        <div className=\"overflow-y-auto flex-1\">\r\n          <form onSubmit={manejarEnvio} className=\"p-4 space-y-6\">\r\n            {/* Resumen */}\r\n            <div className=\"bg-muted/40 rounded p-3 grid grid-cols-1 md:grid-cols-3 gap-2 text-sm\">\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Proyecto</span>\r\n                <span className=\"text-foreground font-medium block\">\r\n                  {infoProyecto?.nombre || ''}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Importe total</span>\r\n                <span className=\"text-foreground font-medium block\">{formatearMoneda(infoProyecto?.presupuesto || presupuestoProyecto)}</span>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Total pagado</span>\r\n                <span className=\"text-foreground font-medium block\">{formatearMoneda(totalAbonado)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progreso */}\r\n            <div>\r\n              <div className=\"flex justify-between text-xs text-muted-foreground mb-1\">\r\n                <span>Progreso de pago</span>\r\n                <span>{isNaN(progreso) ? 0 : progreso}%</span>\r\n              </div>\r\n              <div className=\"w-full bg-muted rounded-full h-2\">\r\n                <div className=\"h-2 rounded-full bg-primary\" style={{ width: `${isNaN(progreso) ? 0 : progreso}%` }} />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Campos principales */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {/* Fecha */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Fecha del abono</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={fechaLocal}\r\n                  onChange={(e) => setFechaLocal(e.target.value)}\r\n                  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  required\r\n                  disabled={loading}\r\n                />\r\n                <p className=\"text-[11px] text-muted-foreground mt-1\">\r\n                  Formato: {fechaLocal ? formatearFechaParaApi(fechaLocal) : ''}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Monto */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Monto abonado</label>\r\n                <input\r\n                  type=\"text\"\r\n                  inputMode=\"decimal\"\r\n                  placeholder=\"0.00\"\r\n                  value={montoFormateado}\r\n                  onChange={(e) => manejarCambioMonto(e.target.value)}\r\n                  className={`flex h-10 w-full rounded-md border px-3 py-2 text-sm bg-background ${\r\n                    Number(monto) > 0 && (Number(totalAbonado || 0) + Number(monto || 0)) > Number(infoProyecto.presupuesto || 0)\r\n                      ? 'border-red-500 focus:border-red-500 focus:ring-red-500'\r\n                      : 'border-input'\r\n                  }`}\r\n                  required\r\n                  disabled={loading}\r\n                />\r\n                {Number(monto) > 0 && (Number(totalAbonado || 0) + Number(monto || 0)) > Number(infoProyecto.presupuesto || 0) && (\r\n                  <p className=\"text-xs text-red-600 mt-1\">\r\n                    锔 El monto excede el l铆mite disponible. Saldo disponible: {formatearMoneda(saldo)}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Saldo */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-muted-foreground mb-2\">Saldo restante</label>\r\n                <div className=\"flex h-10 items-center px-3 py-2 text-sm font-medium text-foreground bg-muted/30 rounded-md border border-input/50\">\r\n                  {formatearMoneda(saldo)}\r\n                </div>\r\n              </div>\r\n\r\n              {/* M茅todo de pago */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">M茅todo de pago</label>\r\n                <select\r\n                  value={metodoPago}\r\n                  onChange={(e) => {\r\n                    setMetodoPago(e.target.value);\r\n                    if (e.target.value !== 'Otro') setDescripcionMetodo('');\r\n                    if (!['Transferencia', 'Tarjeta', 'Cheque'].includes(e.target.value)) setReferenciaPago('');\r\n                  }}\r\n                  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  disabled={loading}\r\n                >\r\n                  <option value=\"Efectivo\">Efectivo</option>\r\n                  <option value=\"Transferencia\">Transferencia</option>\r\n                  <option value=\"Tarjeta\">Tarjeta</option>\r\n                  <option value=\"Cheque\">Cheque</option>\r\n                  <option value=\"Otro\">Otro</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Referencia de pago (si es Transferencia, Tarjeta o Cheque) */}\r\n              {['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) && (\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Referencia de pago <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={referenciaPago}\r\n                    onChange={(e) => setReferenciaPago(e.target.value)}\r\n                    className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                    placeholder={\r\n                      metodoPago === 'Transferencia' \r\n                        ? 'N煤mero de transferencia o CLABE'\r\n                        : metodoPago === 'Tarjeta'\r\n                        ? 'ltimos 4 d铆gitos o n煤mero de autorizaci贸n'\r\n                        : 'N煤mero de cheque'\r\n                    }\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Descripci贸n m茅todo (si es Otro) */}\r\n              {metodoPago === 'Otro' && (\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Descripci贸n del m茅todo de pago\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={descripcionMetodo}\r\n                    onChange={(e) => setDescripcionMetodo(e.target.value)}\r\n                    className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                    placeholder=\"Especifique el m茅todo de pago\"\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Descripci贸n */}\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Descripci贸n</label>\r\n                <textarea\r\n                  rows={2}\r\n                  value={descripcion}\r\n                  onChange={(e) => setDescripcion(e.target.value)}\r\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  placeholder=\"Pago inicial del proyecto\"\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n\r\n              {/* Notas */}\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Notas</label>\r\n                <textarea\r\n                  rows={2}\r\n                  value={notas}\r\n                  onChange={(e) => setNotas(e.target.value)}\r\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  placeholder=\"Pago realizado por el cliente\"\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {error && <div className=\"text-sm text-red-600\">{error}</div>}\r\n\r\n            <div className=\"flex items-center justify-end gap-2 pt-2\">\r\n              <Button variant=\"outline\" onClick={onClose} disabled={loading}>Cancelar</Button>\r\n              <Button type=\"submit\" iconName=\"Check\" iconPosition=\"left\" disabled={loading}>\r\n                {loading ? 'Guardando' : 'Guardar'}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalRegistroAbono;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport useAbono from '../../../hooks/useAbono';\r\nimport useProyecto from '../../../hooks/useProyect';\r\n\r\n// Formatear monto en moneda MXN\r\nconst formatearMoneda = (cantidad) => {\r\n  if (cantidad == null || isNaN(cantidad)) return '';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(Number(cantidad) || 0);\r\n};\r\n\r\n// Limitar un valor dentro de un rango\r\nconst limitarRango = (valor, minimo, maximo) => Math.min(Math.max(valor, minimo), maximo);\r\n\r\n// Convierte fecha a formato dd/mm/yyyy para mostrar en UI\r\nconst formatearFechaParaApi = (fechaLocalStr) => {\r\n  if (!fechaLocalStr) return '';\r\n  const d = new Date(fechaLocalStr);\r\n  const rellenar = (n) => String(n).padStart(2, '0');\r\n  return `${rellenar(d.getDate())}/${rellenar(d.getMonth() + 1)}/${d.getFullYear()}`;\r\n};\r\n\r\n// Convierte fecha del input (YYYY-MM-DD) a formato ISO UTC\r\nconst formatearFechaISOUTC = (fechaLocalStr) => {\r\n  if (!fechaLocalStr) return '';\r\n  // La fecha viene en formato YYYY-MM-DD del input type=\"date\"\r\n  // Crear un objeto Date en UTC a medianoche\r\n  const fecha = new Date(fechaLocalStr + 'T00:00:00.000Z');\r\n  // Devolver en formato ISO UTC\r\n  return fecha.toISOString();\r\n};\r\n\r\n// Convierte fecha ISO o string a formato compatible con input date\r\nconst deFechaALocalInput = (fecha) => {\r\n  if (!fecha) return '';\r\n  let fechaObj;\r\n  if (typeof fecha === 'string') {\r\n    // Si viene en formato ISO\r\n    if (fecha.includes('T')) {\r\n      fechaObj = new Date(fecha);\r\n    } else if (fecha.includes('/')) {\r\n      // Si viene en formato dd/mm/yyyy\r\n      const [dia, mes, a帽o] = fecha.split('/');\r\n      fechaObj = new Date(Number(a帽o), Number(mes) - 1, Number(dia));\r\n    } else {\r\n      fechaObj = new Date(fecha);\r\n    }\r\n  } else {\r\n    fechaObj = fecha;\r\n  }\r\n  \r\n  if (isNaN(fechaObj.getTime())) return '';\r\n  const rellenar = (n) => String(n).padStart(2, '0');\r\n  return `${fechaObj.getFullYear()}-${rellenar(fechaObj.getMonth() + 1)}-${rellenar(fechaObj.getDate())}`;\r\n};\r\n\r\n// Formatea un n煤mero con separadores de miles\r\nconst formatearNumeroConSeparadores = (valor) => {\r\n  if (!valor && valor !== 0) return '';\r\n  // Remover cualquier formato previo y obtener solo n煤meros y punto decimal\r\n  const numeroLimpio = String(valor).replace(/[^\\d.]/g, '');\r\n  if (!numeroLimpio) return '';\r\n  \r\n  // Separar parte entera y decimal\r\n  const partes = numeroLimpio.split('.');\r\n  const parteEntera = partes[0] || '0';\r\n  const parteDecimal = partes[1] ? `.${partes[1]}` : '';\r\n  \r\n  // Formatear parte entera con separadores de miles\r\n  const formateado = parteEntera.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n  \r\n  return formateado + parteDecimal;\r\n};\r\n\r\n// Limpia el formato y devuelve el valor num茅rico\r\nconst limpiarNumeroFormateado = (valor) => {\r\n  if (!valor) return '';\r\n  // Remover comas y espacios, mantener solo n煤meros y punto decimal\r\n  return String(valor).replace(/[^\\d.]/g, '');\r\n};\r\n\r\nconst EditAbonoModal = ({ isOpen, onClose, abono, project, onSave }) => {\r\n  const presupuestoProyecto = Number(project?.budget ?? project?.presupuesto?.total ?? project?.totalPresupuesto ?? 0);\r\n\r\n  // Hook de abonos\r\n  const { editAbono, loading } = useAbono();\r\n  \r\n  // Hook para obtener informaci贸n del proyecto\r\n  const { getProyectoById } = useProyecto();\r\n\r\n  // Campos del formulario\r\n  const [idProyecto, setIdProyecto] = useState('');\r\n  const [fechaLocal, setFechaLocal] = useState('');\r\n  const [monto, setMonto] = useState(''); // Valor num茅rico limpio para c谩lculos\r\n  const [montoFormateado, setMontoFormateado] = useState(''); // Valor formateado para mostrar\r\n  const [metodoPago, setMetodoPago] = useState('Transferencia');\r\n  const [descripcion, setDescripcion] = useState('');\r\n  const [descripcionMetodo, setDescripcionMetodo] = useState('');\r\n  const [referenciaPago, setReferenciaPago] = useState('');\r\n  const [notas, setNotas] = useState('');\r\n\r\n  // Informaci贸n del proyecto obtenida de la API\r\n  const [infoProyecto, setInfoProyecto] = useState({ id: '', nombre: '', presupuesto: 0, clienteId: '' });\r\n  const [totalAbonado, setTotalAbonado] = useState(0);\r\n  const [montoOriginal, setMontoOriginal] = useState(0);\r\n\r\n  // Variables auxiliares\r\n  const [saldo, setSaldo] = useState(0);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (isOpen && abono) {\r\n      const id = project?.id || project?._id || project?.idProyecto || abono?.idProyecto || '';\r\n      \r\n      // Establecer el ID del proyecto\r\n      setIdProyecto(id);\r\n\r\n      // Cargar datos del abono en el formulario\r\n      const montoAbono = Number(abono?.montoAbono ?? abono?.monto ?? 0);\r\n      const fechaAbono = abono?.fecha ?? abono?.createdAt ?? '';\r\n      const metodoPagoAbono = abono?.metodoPago ?? 'Transferencia';\r\n      const descripcionAbono = abono?.descripcion ?? '';\r\n      const descripcionMetodoAbono = abono?.descripcionMetodo ?? '';\r\n      const referenciaPagoAbono = abono?.referenciaPago ?? abono?.referencia ?? '';\r\n      const notasAbono = abono?.notas ?? '';\r\n\r\n      // Asegurar que el monto siempre tenga un valor (m铆nimo 0)\r\n      const montoFinal = montoAbono > 0 ? montoAbono : 0;\r\n      setMonto(montoFinal.toString());\r\n      setMontoFormateado(formatearNumeroConSeparadores(montoFinal.toString()));\r\n      setMontoOriginal(montoAbono); // Guardar el valor original del abono para c谩lculos\r\n      setFechaLocal(deFechaALocalInput(fechaAbono));\r\n      setMetodoPago(metodoPagoAbono);\r\n      setDescripcion(descripcionAbono);\r\n      setDescripcionMetodo(descripcionMetodoAbono);\r\n      setReferenciaPago(referenciaPagoAbono);\r\n      setNotas(notasAbono);\r\n\r\n      // Obtener informaci贸n del proyecto de la API si tenemos un ID\r\n      if (id) {\r\n        getProyectoById(id)\r\n          .then((respuesta) => {\r\n            const proyectoData = respuesta?.data || respuesta;\r\n            if (proyectoData) {\r\n              const presupuestoTotal = proyectoData.presupuesto?.total || proyectoData.totalPresupuesto || 0;\r\n              const totalAbonadoData = proyectoData.resumenFinanciero?.totalAbonado || 0;\r\n              \r\n              setInfoProyecto({\r\n                id: proyectoData.id || proyectoData._id || id,\r\n                nombre: proyectoData.nombre || proyectoData.name || 'Sin nombre',\r\n                presupuesto: Number(presupuestoTotal),\r\n                clienteId: proyectoData.cliente?.id || proyectoData.clienteId || proyectoData.cliente_id || ''\r\n              });\r\n              \r\n              // Establecer el total abonado desde la API\r\n              setTotalAbonado(totalAbonadoData);\r\n              \r\n              // Calcular saldo: presupuesto - (total abonado - monto original + nuevo monto)\r\n              const nuevoSaldo = Math.max(presupuestoTotal - (totalAbonadoData - montoAbono + montoAbono), 0);\r\n              setSaldo(nuevoSaldo);\r\n            } else {\r\n              // Fallback si no se obtienen datos\r\n              setInfoProyecto({\r\n                id,\r\n                nombre: project?.name || project?.nombreProyecto || 'Sin nombre',\r\n                presupuesto: presupuestoProyecto,\r\n                clienteId: ''\r\n              });\r\n              setSaldo(Math.max(presupuestoProyecto - montoAbono, 0));\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.warn('Error al obtener proyecto:', err);\r\n            // Usar datos del prop como fallback\r\n            setInfoProyecto({\r\n              id,\r\n              nombre: project?.name || project?.nombreProyecto || 'Sin nombre',\r\n              presupuesto: presupuestoProyecto,\r\n              clienteId: ''\r\n            });\r\n            setSaldo(Math.max(presupuestoProyecto - montoAbono, 0));\r\n          });\r\n      } else {\r\n        setInfoProyecto({ id: '', nombre: 'Sin nombre', presupuesto: 0, clienteId: '' });\r\n      }\r\n\r\n      setError('');\r\n    }\r\n  }, [isOpen, abono, project, presupuestoProyecto, getProyectoById]);\r\n\r\n  // Vista previa del total pagado (considerando el cambio de monto)\r\n  const totalPagadoPrevio = useMemo(() => {\r\n    const m = Number(monto) || 0;\r\n    const diferencia = m - montoOriginal;\r\n    return Number(totalAbonado || 0) + diferencia;\r\n  }, [monto, totalAbonado, montoOriginal]);\r\n\r\n  // Progreso del pago\r\n  const progreso = useMemo(() => {\r\n    if (!(infoProyecto?.presupuesto > 0)) return 0;\r\n    const p = (Number(totalPagadoPrevio) / infoProyecto.presupuesto) * 100;\r\n    return Math.round(limitarRango(p, 0, 100));\r\n  }, [totalPagadoPrevio, infoProyecto?.presupuesto]);\r\n\r\n  const manejarCambioMonto = (valor) => {\r\n    // Limpiar el valor ingresado (remover comas y caracteres no num茅ricos excepto punto decimal)\r\n    const valorLimpio = limpiarNumeroFormateado(valor);\r\n    \r\n    // Si el campo est谩 vac铆o, usar \"0\"\r\n    let valorFinal = valorLimpio === '' ? '0' : valorLimpio;\r\n    \r\n    // Si el valor actual es \"0\" y el usuario est谩 escribiendo algo nuevo\r\n    if (monto === '0' && valorLimpio !== '' && valorLimpio !== '0') {\r\n      // Si el usuario escribe un punto decimal, permitir \"0.\"\r\n      if (valorLimpio === '.' || valorLimpio === '0.') {\r\n        valorFinal = '0.';\r\n      }\r\n      // Si el usuario escribe un d铆gito, reemplazar el \"0\" con ese d铆gito\r\n      // Ejemplo: \"0\" + \"1\" = \"1\", \"0\" + \"12\" = \"12\"\r\n      else if (/^\\d+\\.?\\d*$/.test(valorLimpio)) {\r\n        // Si empieza con \"0\" seguido de d铆gitos (no decimal), quitar el \"0\" inicial\r\n        // Ejemplo: \"05\" -> \"5\", \"012\" -> \"12\"\r\n        if (valorLimpio.match(/^0+[1-9]/)) {\r\n          valorFinal = valorLimpio.replace(/^0+/, '');\r\n        } else {\r\n          valorFinal = valorLimpio;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Permitir solo un punto decimal: si hay m煤ltiples, mantener solo el primero\r\n    const partes = valorFinal.split('.');\r\n    if (partes.length > 2) {\r\n      valorFinal = partes[0] + '.' + partes.slice(1).join('');\r\n    }\r\n    \r\n    // Actualizar el valor num茅rico limpio para c谩lculos\r\n    setMonto(valorFinal);\r\n    \r\n    // Actualizar el valor formateado para mostrar\r\n    setMontoFormateado(formatearNumeroConSeparadores(valorFinal));\r\n    \r\n    // Calcular saldo si el valor es num茅rico v谩lido\r\n    const num = Number(valorFinal);\r\n    if (!isNaN(num)) {\r\n      const diferencia = num - montoOriginal;\r\n      const totalPagadoAcumulado = Number(totalAbonado || 0) + diferencia;\r\n      const importeTotal = Number(infoProyecto.presupuesto || 0);\r\n      const nuevoSaldo = Math.max(importeTotal - totalPagadoAcumulado, 0);\r\n      setSaldo(nuevoSaldo);\r\n      \r\n      // Limpiar error si el monto es v谩lido\r\n      if (totalPagadoAcumulado <= importeTotal) {\r\n        setError('');\r\n      }\r\n    }\r\n  };\r\n\r\n  const manejarEnvio = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    const montoNum = Number(monto);\r\n\r\n    if (!abono?.id && !abono?._id) {\r\n      setError('El ID del abono es obligatorio.');\r\n      return;\r\n    }\r\n    if (!idProyecto?.trim()) {\r\n      setError('El ID del proyecto es obligatorio.');\r\n      return;\r\n    }\r\n    if (!fechaLocal) {\r\n      setError('La fecha del abono es obligatoria.');\r\n      return;\r\n    }\r\n    if (!(montoNum > 0)) {\r\n      setError('El monto abonado debe ser mayor a 0.');\r\n      return;\r\n    }\r\n    if (!descripcion?.trim()) {\r\n      setError('La descripci贸n es obligatoria.');\r\n      return;\r\n    }\r\n    if (metodoPago === 'Otro' && !descripcionMetodo?.trim()) {\r\n      setError('La descripci贸n del m茅todo de pago es obligatoria cuando se selecciona \"Otro\".');\r\n      return;\r\n    }\r\n    if (['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) && !referenciaPago?.trim()) {\r\n      setError('La referencia de pago es obligatoria para este m茅todo de pago.');\r\n      return;\r\n    }\r\n    if (!['Efectivo', 'Transferencia', 'Tarjeta', 'Cheque', 'Otro'].includes(metodoPago)) {\r\n      setError('M茅todo de pago no v谩lido.');\r\n      return;\r\n    }\r\n    // Validar que el total pagado acumulado no exceda el importe total del proyecto\r\n    const importeTotal = Number(infoProyecto.presupuesto || 0);\r\n    \r\n    if (totalPagadoPrevio > importeTotal) {\r\n      const excedente = totalPagadoPrevio - importeTotal;\r\n      setError(\r\n        `No se puede actualizar el abono. El total pagado acumulado (${formatearMoneda(totalPagadoPrevio)}) excede el importe total del proyecto (${formatearMoneda(importeTotal)}). Excedente: ${formatearMoneda(excedente)}.`\r\n      );\r\n      return;\r\n    }\r\n\r\n    const datos = {\r\n      idProyecto: idProyecto.trim(),\r\n      montoAbono: Number(monto),\r\n      fecha: formatearFechaISOUTC(fechaLocal),\r\n      metodoPago,\r\n      descripcion: descripcion.trim(),\r\n      descripcionMetodo: metodoPago === 'Otro' ? descripcionMetodo.trim() : undefined,\r\n      referenciaPago: ['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) ? referenciaPago.trim() : undefined,\r\n      notas: notas?.trim() || undefined\r\n    };\r\n\r\n    try {\r\n      const abonoId = abono?.id ?? abono?._id;\r\n      const respuesta = await editAbono(abonoId, datos);\r\n      const actualizado = respuesta?.data || respuesta;\r\n\r\n      if (actualizado) {\r\n        onSave?.(actualizado);\r\n        onClose?.();\r\n      }\r\n    } catch (err) {\r\n      if (err.response?.status === 409) {\r\n        setError('Ya existe un abono con estos datos.');\r\n      } else if (err.response?.status === 400) {\r\n        setError(err.response?.data?.message || 'Datos inv谩lidos. Por favor revise los campos.');\r\n      } else {\r\n        setError('Error al actualizar el abono. Por favor intente nuevamente.');\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} />\r\n      <div className=\"relative bg-card border border-border rounded-lg shadow-xl w-1/3 mx-4 flex flex-col h-5/6\">\r\n        {/* Encabezado */}\r\n        <div className=\"p-4 border-b border-border flex items-center justify-between bg-card sticky top-0 z-10\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Edit\" size={18} />\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Editar Abono</h3>\r\n          </div>\r\n          <button\r\n            className=\"text-muted-foreground hover:text-foreground disabled:opacity-50\"\r\n            onClick={onClose}\r\n            title=\"Cerrar\"\r\n            disabled={loading}\r\n          >\r\n            <Icon name=\"X\" size={18} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Contenido */}\r\n        <div className=\"overflow-y-auto flex-1\">\r\n          <form onSubmit={manejarEnvio} className=\"p-4 space-y-6\">\r\n            {/* Resumen */}\r\n            <div className=\"bg-muted/40 rounded p-3 grid grid-cols-1 md:grid-cols-3 gap-2 text-sm\">\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Proyecto</span>\r\n                <span className=\"text-foreground font-medium block\">\r\n                  {infoProyecto?.nombre || ''}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Importe total</span>\r\n                <span className=\"text-foreground font-medium block\">{formatearMoneda(infoProyecto?.presupuesto || presupuestoProyecto)}</span>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Total pagado</span>\r\n                <span className=\"text-foreground font-medium block\">{formatearMoneda(totalAbonado)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progreso */}\r\n            <div>\r\n              <div className=\"flex justify-between text-xs text-muted-foreground mb-1\">\r\n                <span>Progreso de pago</span>\r\n                <span>{isNaN(progreso) ? 0 : progreso}%</span>\r\n              </div>\r\n              <div className=\"w-full bg-muted rounded-full h-2\">\r\n                <div className=\"h-2 rounded-full bg-primary\" style={{ width: `${isNaN(progreso) ? 0 : progreso}%` }} />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci贸n del abono (solo lectura) */}\r\n            {(abono?.folio || abono?.referencia) && (\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded p-3 text-sm\">\r\n                <div className=\"text-blue-800 font-medium mb-1\">Informaci贸n del Abono</div>\r\n                <div className=\"text-blue-700\">\r\n                  <span className=\"font-mono\">{abono?.folio ?? abono?.referencia}</span>\r\n                  {abono?.numeroAbono && <span className=\"ml-2\">N掳 {abono.numeroAbono}</span>}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Campos principales */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {/* Fecha */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Fecha del abono</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={fechaLocal}\r\n                  onChange={(e) => setFechaLocal(e.target.value)}\r\n                  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  required\r\n                  disabled={loading}\r\n                />\r\n                <p className=\"text-[11px] text-muted-foreground mt-1\">\r\n                  Formato: {fechaLocal ? formatearFechaParaApi(fechaLocal) : ''}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Monto */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Monto abonado</label>\r\n                <input\r\n                  type=\"text\"\r\n                  inputMode=\"decimal\"\r\n                  placeholder=\"0.00\"\r\n                  value={montoFormateado}\r\n                  onChange={(e) => manejarCambioMonto(e.target.value) }\r\n                  className={`flex h-10 w-full rounded-md border px-3 py-2 text-sm bg-background ${\r\n                    Number(monto) > 0 && totalPagadoPrevio > Number(infoProyecto.presupuesto || 0)\r\n                      ? 'border-red-500 focus:border-red-500 focus:ring-red-500'\r\n                      : 'border-input'\r\n                  }`}\r\n                  required\r\n                  disabled={loading}\r\n                />\r\n                {Number(monto) > 0 && totalPagadoPrevio > Number(infoProyecto.presupuesto || 0) && (\r\n                  <p className=\"text-xs text-red-600 mt-1\">\r\n                    锔 El monto excede el l铆mite disponible. Saldo disponible: {formatearMoneda(saldo)}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Saldo */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-muted-foreground mb-2\">Saldo restante</label>\r\n                <div className=\"flex h-10 items-center px-3 py-2 text-sm font-medium text-foreground bg-muted/30 rounded-md border border-input/50\">\r\n                  {formatearMoneda(saldo)}\r\n                </div>\r\n              </div>\r\n\r\n              {/* M茅todo de pago */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">M茅todo de pago</label>\r\n                <select\r\n                  value={metodoPago}\r\n                  onChange={(e) => {\r\n                    setMetodoPago(e.target.value);\r\n                    if (e.target.value !== 'Otro') setDescripcionMetodo('');\r\n                    if (!['Transferencia', 'Tarjeta', 'Cheque'].includes(e.target.value)) setReferenciaPago('');\r\n                  }}\r\n                  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  disabled={loading}\r\n                >\r\n                  <option value=\"Efectivo\">Efectivo</option>\r\n                  <option value=\"Transferencia\">Transferencia</option>\r\n                  <option value=\"Tarjeta\">Tarjeta</option>\r\n                  <option value=\"Cheque\">Cheque</option>\r\n                  <option value=\"Otro\">Otro</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Referencia de pago (si es Transferencia, Tarjeta o Cheque) */}\r\n              {['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) && (\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Referencia de pago <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={referenciaPago}\r\n                    onChange={(e) => setReferenciaPago(e.target.value)}\r\n                    className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                    placeholder={\r\n                      metodoPago === 'Transferencia' \r\n                        ? 'N煤mero de transferencia o CLABE'\r\n                        : metodoPago === 'Tarjeta'\r\n                        ? 'ltimos 4 d铆gitos o n煤mero de autorizaci贸n'\r\n                        : 'N煤mero de cheque'\r\n                    }\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Descripci贸n m茅todo (si es Otro) */}\r\n              {metodoPago === 'Otro' && (\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Descripci贸n del m茅todo de pago\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={descripcionMetodo}\r\n                    onChange={(e) => setDescripcionMetodo(e.target.value)}\r\n                    className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                    placeholder=\"Especifique el m茅todo de pago\"\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Descripci贸n */}\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Descripci贸n</label>\r\n                <textarea\r\n                  rows={2}\r\n                  value={descripcion}\r\n                  onChange={(e) => setDescripcion(e.target.value)}\r\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  placeholder=\"Pago inicial del proyecto\"\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n\r\n              {/* Notas */}\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Notas</label>\r\n                <textarea\r\n                  rows={2}\r\n                  value={notas}\r\n                  onChange={(e) => setNotas(e.target.value)}\r\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  placeholder=\"Pago realizado por el cliente\"\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {error && <div className=\"text-sm text-red-600\">{error}</div>}\r\n\r\n            <div className=\"flex items-center justify-end gap-2 pt-2\">\r\n              <Button variant=\"outline\" onClick={onClose} disabled={loading}>Cancelar</Button>\r\n              <Button type=\"submit\" iconName=\"Check\" iconPosition=\"left\" disabled={loading}>\r\n                {loading ? 'Actualizando' : 'Actualizar'}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditAbonoModal;\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport useAbono from '../../../hooks/useAbono';\r\nimport EditAbonoModal from './EditAbonoModal';\r\n\r\n// Formatear monto en moneda MXN\r\nconst formatearMoneda = (cantidad) => {\r\n  if (cantidad == null || isNaN(cantidad)) return '';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(Number(cantidad) || 0);\r\n};\r\n\r\n// Formatear fecha\r\nconst formatearFecha = (fecha) => {\r\n  if (!fecha) return '';\r\n  try {\r\n    // Intentar parsear diferentes formatos de fecha\r\n    let fechaObj;\r\n    if (typeof fecha === 'string') {\r\n      // Si viene en formato dd/mm/yyyy\r\n      if (fecha.includes('/')) {\r\n        const [dia, mes, a帽o] = fecha.split('/');\r\n        fechaObj = new Date(Number(a帽o), Number(mes) - 1, Number(dia));\r\n      } else {\r\n        fechaObj = new Date(fecha);\r\n      }\r\n    } else {\r\n      fechaObj = fecha;\r\n    }\r\n    \r\n    if (isNaN(fechaObj.getTime())) return '';\r\n    return fechaObj.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric'\r\n    });\r\n  } catch {\r\n    return '';\r\n  }\r\n};\r\n\r\nconst ViewAbonosModal = ({ isOpen, onClose, project, onAbonoUpdated }) => {\r\n  const { getAbonosByProyecto, loading } = useAbono();\r\n  const [abonos, setAbonos] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [abonoAEditar, setAbonoAEditar] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const cargarAbonos = async () => {\r\n      if (!isOpen || !project) {\r\n        setAbonos([]);\r\n        setError('');\r\n        return;\r\n      }\r\n\r\n      const proyectoId = project?.id ?? project?._id ?? project?.rawId;\r\n      if (!proyectoId) {\r\n        setError('No se pudo identificar el proyecto');\r\n        setAbonos([]);\r\n        return;\r\n      }\r\n\r\n      setError('');\r\n\r\n      try {\r\n        const result = await getAbonosByProyecto(proyectoId);\r\n        setAbonos(result?.items || []);\r\n      } catch (err) {\r\n        console.error('Error al cargar abonos:', err);\r\n        setError('Error al cargar los abonos del proyecto');\r\n        setAbonos([]);\r\n      }\r\n    };\r\n\r\n    cargarAbonos();\r\n  }, [isOpen, project, getAbonosByProyecto]);\r\n\r\n  const manejarEditarAbono = (abono) => {\r\n    setAbonoAEditar(abono);\r\n  };\r\n\r\n  const manejarCerrarEdicion = () => {\r\n    setAbonoAEditar(null);\r\n  };\r\n\r\n  const manejarAbonoActualizado = async (abonoActualizado) => {\r\n    // Recargar la lista de abonos despu茅s de actualizar\r\n    if (project) {\r\n      const proyectoId = project?.id ?? project?._id ?? project?.rawId;\r\n      if (proyectoId) {\r\n        try {\r\n          const result = await getAbonosByProyecto(proyectoId);\r\n          setAbonos(result?.items || []);\r\n        } catch (err) {\r\n          console.error('Error al recargar abonos:', err);\r\n        }\r\n      }\r\n    }\r\n    setAbonoAEditar(null);\r\n    \r\n    // Notificar al componente padre que se actualiz贸 un abono, pasando el proyecto y el abono actualizado\r\n    if (typeof onAbonoUpdated === 'function') {\r\n      onAbonoUpdated(project, abonoActualizado);\r\n    }\r\n  };\r\n\r\n  // Calcular totales\r\n  const totalAbonado = abonos.reduce((sum, abono) => {\r\n    const monto = Number(abono?.montoAbono ?? abono?.monto ?? abono?.monto_abono ?? 0);\r\n    return sum + monto;\r\n  }, 0);\r\n\r\n  const presupuesto = Number(project?.budget ?? project?.presupuesto?.total ?? project?.totalPresupuesto ?? 0);\r\n  const saldoRestante = Math.max(presupuesto - totalAbonado, 0);\r\n  const porcentajePagado = presupuesto > 0 ? Math.round((totalAbonado / presupuesto) * 100) : 0;\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} />\r\n      <div className=\"relative bg-card border border-border rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] flex flex-col\">\r\n        {/* Encabezado */}\r\n        <div className=\"p-4 border-b border-border flex items-center justify-between bg-card sticky top-0 z-10\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Eye\" size={18} />\r\n            <h3 className=\"text-lg font-semibold text-foreground\">\r\n              Abonos del Proyecto: {project?.name ?? project?.nombreProyecto ?? ''}\r\n            </h3>\r\n          </div>\r\n          <button\r\n            className=\"text-muted-foreground hover:text-foreground\"\r\n            onClick={onClose}\r\n            title=\"Cerrar\"\r\n          >\r\n            <Icon name=\"X\" size={18} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Resumen */}\r\n        <div className=\"p-4 border-b border-border bg-muted/30\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm\">\r\n            <div>\r\n              <span className=\"text-muted-foreground block text-xs\">Presupuesto Total</span>\r\n              <span className=\"text-foreground font-medium text-base\">{formatearMoneda(presupuesto)}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-muted-foreground block text-xs\">Total Abonado</span>\r\n              <span className=\"text-foreground font-medium text-base\">{formatearMoneda(totalAbonado)}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-muted-foreground block text-xs\">Saldo Restante</span>\r\n              <span className=\"text-foreground font-medium text-base\">{formatearMoneda(saldoRestante)}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-muted-foreground block text-xs\">Progreso</span>\r\n              <span className=\"text-foreground font-medium text-base\">{porcentajePagado}%</span>\r\n            </div>\r\n          </div>\r\n          {/* Barra de progreso */}\r\n          <div className=\"mt-3\">\r\n            <div className=\"w-full bg-muted rounded-full h-2\">\r\n              <div\r\n                className=\"h-2 rounded-full bg-primary transition-all\"\r\n                style={{ width: `${Math.min(porcentajePagado, 100)}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contenido - Lista de abonos */}\r\n        <div className=\"overflow-y-auto flex-1 p-4\">\r\n          {loading && (\r\n            <div className=\"flex items-center justify-center py-8\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n              <span className=\"ml-3 text-muted-foreground\">Cargando abonos...</span>\r\n            </div>\r\n          )}\r\n\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 text-sm\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {!loading && !error && abonos.length === 0 && (\r\n            <div className=\"text-center py-12\">\r\n              <Icon name=\"CreditCard\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n              <p className=\"text-muted-foreground\">No hay abonos registrados para este proyecto</p>\r\n            </div>\r\n          )}\r\n\r\n          {!loading && !error && abonos.length > 0 && (\r\n            <div className=\"space-y-3\">\r\n              {/* Encabezado de tabla (solo desktop) */}\r\n              <div className=\"hidden md:grid md:grid-cols-8 gap-4 pb-2 border-b border-border text-xs font-medium text-muted-foreground\">\r\n                <div>Folio/Ref.</div>\r\n                <div>Fecha</div>\r\n                <div>Monto</div>\r\n                <div>M茅todo de Pago</div>\r\n                <div>Descripci贸n</div>\r\n                <div>N掳 Abono</div>\r\n                <div>Estado</div>\r\n                <div>Acciones</div>\r\n              </div>\r\n\r\n              {/* Lista de abonos */}\r\n              {abonos.map((abono, index) => {\r\n                const monto = Number(abono?.montoAbono ?? abono?.monto ?? abono?.monto_abono ?? 0);\r\n                const fecha = abono?.fecha ?? abono?.fechaAbono ?? abono?.fecha_creacion ?? abono?.createdAt;\r\n                const metodoPago = abono?.metodoPago ?? abono?.metodo_pago ?? abono?.metodo ?? '';\r\n                const descripcion = abono?.descripcion ?? abono?.descripcionAbono ?? '';\r\n                const folio = abono?.folio ?? abono?.referencia ?? '';\r\n                const numeroAbono = abono?.numeroAbono ?? null;\r\n                const activo = abono?.activo ?? true;\r\n                const estado = activo ? (abono?.estado ?? abono?.status ?? 'registrado') : 'inactivo';\r\n                const notas = abono?.notas ?? abono?.observaciones ?? '';\r\n\r\n                return (\r\n                  <div\r\n                    key={abono?.id ?? abono?._id ?? index}\r\n                    className=\"border border-border rounded-lg p-4 hover:bg-muted/30 transition-colors\"\r\n                  >\r\n                    {/* Vista Desktop */}\r\n                    <div className=\"hidden md:grid md:grid-cols-8 gap-4 items-center\">\r\n                      <div className=\"text-sm text-foreground font-mono\">{folio}</div>\r\n                      <div className=\"text-sm text-foreground\">{formatearFecha(fecha)}</div>\r\n                      <div className=\"text-sm font-medium text-foreground\">{formatearMoneda(monto)}</div>\r\n                      <div className=\"text-sm text-foreground\">{metodoPago}</div>\r\n                      <div className=\"text-sm text-muted-foreground truncate\" title={descripcion}>\r\n                        {descripcion}\r\n                      </div>\r\n                      <div className=\"text-sm text-foreground text-center\">\r\n                        {numeroAbono != null ? `#${numeroAbono}` : ''}\r\n                      </div>\r\n                      <div className=\"text-sm\">\r\n                        <span\r\n                          className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\r\n                            estado === 'aprobado' || (activo && estado === 'registrado')\r\n                              ? 'bg-green-100 text-green-800'\r\n                              : estado === 'rechazado' || estado === 'inactivo'\r\n                              ? 'bg-red-100 text-red-800'\r\n                              : 'bg-blue-100 text-blue-800'\r\n                          }`}\r\n                        >\r\n                          {activo ? estado : 'inactivo'}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex items-center justify-center\">\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => manejarEditarAbono(abono)}\r\n                          title=\"Editar abono\"\r\n                          aria-label=\"Editar abono\"\r\n                        >\r\n                          <Icon name=\"Edit\" size={16} />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Vista M贸vil */}\r\n                    <div className=\"md:hidden space-y-2\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <span className=\"text-sm font-medium text-foreground\">{formatearMoneda(monto)}</span>\r\n                          {folio && folio !== '' && (\r\n                            <span className=\"ml-2 text-xs text-muted-foreground font-mono\">({folio})</span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={() => manejarEditarAbono(abono)}\r\n                            title=\"Editar abono\"\r\n                            aria-label=\"Editar abono\"\r\n                          >\r\n                            <Icon name=\"Edit\" size={16} />\r\n                          </Button>\r\n                          <span\r\n                            className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\r\n                              estado === 'aprobado' || (activo && estado === 'registrado')\r\n                                ? 'bg-green-100 text-green-800'\r\n                                : estado === 'rechazado' || estado === 'inactivo'\r\n                                ? 'bg-red-100 text-red-800'\r\n                                : 'bg-blue-100 text-blue-800'\r\n                            }`}\r\n                          >\r\n                            {activo ? estado : 'inactivo'}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"grid grid-cols-2 gap-2 text-xs\">\r\n                        <div>\r\n                          <span className=\"text-muted-foreground\">Fecha:</span>\r\n                          <span className=\"ml-1 text-foreground\">{formatearFecha(fecha)}</span>\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"text-muted-foreground\">M茅todo:</span>\r\n                          <span className=\"ml-1 text-foreground\">{metodoPago}</span>\r\n                        </div>\r\n                        {numeroAbono != null && (\r\n                          <div>\r\n                            <span className=\"text-muted-foreground\">N掳 Abono:</span>\r\n                            <span className=\"ml-1 text-foreground\">#{numeroAbono}</span>\r\n                          </div>\r\n                        )}\r\n                        <div className=\"col-span-2\">\r\n                          <span className=\"text-muted-foreground\">Descripci贸n:</span>\r\n                          <span className=\"ml-1 text-foreground\">{descripcion}</span>\r\n                        </div>\r\n                        {notas && (\r\n                          <div className=\"col-span-2\">\r\n                            <span className=\"text-muted-foreground\">Notas:</span>\r\n                            <span className=\"ml-1 text-foreground text-xs\">{notas}</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Pie */}\r\n        <div className=\"p-4 border-t border-border flex items-center justify-end\">\r\n          <Button variant=\"outline\" onClick={onClose}>\r\n            Cerrar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal de edici贸n de abono */}\r\n      {abonoAEditar && (\r\n        <EditAbonoModal\r\n          isOpen={!!abonoAEditar}\r\n          abono={abonoAEditar}\r\n          project={project}\r\n          onClose={manejarCerrarEdicion}\r\n          onSave={manejarAbonoActualizado}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewAbonosModal;\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ProjectFilters from './components/ProjectFilters';\r\nimport ProjectTable from './components/ProjectTable';\r\nimport ProjectStats from './components/AbonosStats';\r\nimport CreateProjectModal from './components/CreateProjectModal';\r\nimport EditProjectModal from './components/EditProjectModal';\r\nimport RegisterAbonoModal from './components/RegisterAbonoModal';\r\nimport ViewAbonosModal from './components/ViewAbonosModal';\r\nimport useProyect from '../../hooks/useProyect';\r\n\r\n/* =========================================================================\r\n   Cache local para el estado visual (UI) de cada proyecto\r\n   - Persistimos en localStorage el \"estado UI\" (planificaci贸n / en proceso)\r\n   - Esto permite mantener el estado visible aunque el backend use otros labels\r\n   ========================================================================= */\r\nconst UI_ESTADO_KEY = 'proyectos_ui_estado_v1';\r\nconst uiEstadoCache = {\r\n  // Lee el mapa completo desde localStorage\r\n  _read() { try { return JSON.parse(localStorage.getItem(UI_ESTADO_KEY)) || {}; } catch { return {}; } },\r\n  // Obtiene el estado de un proyecto por id\r\n  get(id) { if (!id) return null; const m = this._read(); return m[id] || null; },\r\n  // Setea o elimina el estado para un id; vuelve a guardar en localStorage\r\n  set(id, estado) { if (!id) return; const m = this._read(); if (estado) m[id] = estado; else delete m[id]; localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m)); },\r\n  // Al recibir lista desde API, rellena los estados que falten con un default\r\n  bulkMergeFromApi(lista = []) {\r\n    const m = this._read(); let cambiado = false;\r\n    lista.forEach(p => {\r\n      const id = p?.id ?? p?._id; if (!id) return;\r\n      if (!m[id]) { const def = backendToUiDefault(p?.estado); if (def) { m[id] = def; cambiado = true; } }\r\n    });\r\n    if (cambiado) localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m));\r\n  }\r\n};\r\n\r\n// Traducci贸n de estados backend  estados UI (sin tildes para consistencia)\r\nconst backendToUiDefault = (estadoApi) => {\r\n  const v = String(estadoApi || '').toLowerCase().trim();\r\n  // Mapear estados del backend a estados UI (sin tildes)\r\n  if (v === 'en proceso' || v === 'en-proceso' || v === 'in-progress' || v === 'in progress') return 'en proceso';\r\n  if (v === 'en pausa' || v === 'en-pausa' || v === 'on-hold' || v === 'on hold' || v === 'pausa' || v === 'en pausa') return 'en pausa';\r\n  if (v === 'en revision' || v === 'en-revision' || v === 'en revisi贸n' || v === 'review') return 'en revision';\r\n  if (v === 'completado' || v === 'completed' || v === 'completado' || v === 'done') return 'completado';\r\n  if (v === 'cancelado' || v === 'cancelled' || v === 'canceled') return 'cancelado';\r\n  if (v === 'planificacion' || v === 'planificaci贸n' || v === 'planning') return 'planificacion';\r\n  if (v === 'activo' || v === 'active') return 'planificacion'; // Por defecto, activo = planificacion\r\n  return 'planificacion'; // Default\r\n};\r\n\r\n// Traducci贸n de estados UI  estados backend (para actualizar en servidor)\r\nconst mapUiToBackend = (estadoUi) => {\r\n  const v = String(estadoUi || '').toLowerCase();\r\n  return v === 'en proceso' ? 'en proceso' : 'activo';\r\n};\r\n\r\nconst ProjectManagement = () => {\r\n  /* =========================================================================\r\n     Hook de proyectos\r\n     - provee lista de proyectos y operaciones (get/update, etc.)\r\n     ========================================================================= */\r\n  const {\r\n    proyectos,\r\n    loading: cargando,\r\n    getProyectos,\r\n    // getProyectoById,\r\n    updateProyecto,\r\n    // deleteProyecto\r\n  } = useProyect();\r\n\r\n  /* =========================================================================\r\n     Estado local de la vista\r\n     ========================================================================= */\r\n  const [proyectosFiltrados, setProyectosFiltrados] = useState([]);\r\n  const [modalCrearAbierto, setModalCrearAbierto] = useState(false);\r\n  const [modalEditarAbierto, setModalEditarAbierto] = useState(false);\r\n  const [proyectoSeleccionado, setProyectoSeleccionado] = useState(null);\r\n  const [barraLateralColapsada, setBarraLateralColapsada] = useState(false);\r\n  const [menuEncabezadoAbierto, setMenuEncabezadoAbierto] = useState(false);\r\n\r\n  // Cache de abonos por proyecto (en local) para c谩lculos r谩pidos de \"pagado\"\r\n  const [abonosPorProyecto, setAbonosPorProyecto] = useState(() => {\r\n    try {\r\n      const bruto = localStorage.getItem('abonos_proyectos_v1');\r\n      return bruto ? JSON.parse(bruto) : {};\r\n    } catch { return {}; }\r\n  });\r\n\r\n  // Estado para abrir el modal de registro de abono asociado a un proyecto\r\n  const [registrarAbonoPara, setRegistrarAbonoPara] = useState(null);\r\n\r\n  // Estado para abrir el modal de visualizaci贸n de abonos\r\n  const [verAbonosPara, setVerAbonosPara] = useState(null);\r\n\r\n  // Control del selector de proyecto (cuando se quiere crear un abono sin abrir desde la tabla)\r\n  const [mostrarSelectorProyecto, setMostrarSelectorProyecto] = useState(false);\r\n\r\n  // Trigger para refrescar las estad铆sticas de abonos cuando se crea o actualiza un abono\r\n  const [refreshAbonosStats, setRefreshAbonosStats] = useState(0);\r\n\r\n  /* =========================================================================\r\n     Ciclo de vida\r\n     - Cargar proyectos al montar\r\n     - Sincronizar cache UI y lista filtrada cuando cambien los proyectos\r\n     ========================================================================= */\r\n  useEffect(() => { getProyectos(); }, []);\r\n  useEffect(() => {\r\n    const arr = Array.isArray(proyectos) ? proyectos : [];\r\n    uiEstadoCache.bulkMergeFromApi(arr);   // completa estados UI faltantes\r\n    // Actualizar la lista filtrada cuando cambian los proyectos\r\n    // Esto asegura que los cambios en abonos se reflejen en la tabla\r\n    if (!proyectosFiltrados || proyectosFiltrados.length === 0 || proyectosFiltrados.length === arr.length) {\r\n      setProyectosFiltrados(arr);            // por defecto, sin filtros o misma cantidad\r\n    }\r\n    // Nota: Si hay filtros aplicados y la cantidad cambi贸, los filtros se mantendr谩n\r\n    // pero los datos de los proyectos se actualizar谩n cuando se re-apliquen los filtros\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [proyectos]);\r\n\r\n  /* =========================================================================\r\n     Helpers (getters) para acceder a campos con posibles alias\r\n     - Manejan nombres alternos seg煤n venga del backend\r\n     ========================================================================= */\r\n  const obtenerNombre = (p) => p?.nombre ?? p?.nombreProyecto ?? p?.name ?? '';\r\n  const obtenerCodigo = (p) => p?.codigo ?? p?.code ?? '';\r\n  const obtenerEstadoUi = (p) => {\r\n    const id = p?.id ?? p?._id;\r\n    // 1. Primero intentar obtener del cache local\r\n    const estadoCache = uiEstadoCache.get(id);\r\n    if (estadoCache) return estadoCache;\r\n    \r\n    // 2. Si no hay en cache, obtener del backend (puede venir en diferentes campos)\r\n    const estadoBackend = p?.estado ?? p?.status ?? p?.estadoProyecto ?? p?.statusLabel ?? '';\r\n    if (estadoBackend) {\r\n      const estadoNormalizado = backendToUiDefault(estadoBackend);\r\n      // Guardar en cache para futuras consultas (incluso si es planificacion)\r\n      if (estadoNormalizado) {\r\n        uiEstadoCache.set(id, estadoNormalizado);\r\n      }\r\n      return estadoNormalizado;\r\n    }\r\n    \r\n    // 3. Default (sin tilde para consistencia)\r\n    return 'planificacion';\r\n  };\r\n  const obtenerDepartamento = (p) => p?.departamento ?? p?.department ?? '';\r\n  const obtenerPrioridad = (p) => p?.prioridad ?? p?.priority ?? '';\r\n  const obtenerInicio = (p) => p?.cronograma?.fechaInicio ?? p?.startDate ?? null;\r\n  const obtenerFin = (p) => p?.cronograma?.fechaFin ?? p?.endDate ?? null;\r\n  const obtenerPresupuesto = (p) => Number(p?.totalPresupuesto ?? p?.presupuesto?.total ?? p?.budget ?? 0);\r\n  const obtenerIdProyecto = (p) => p?.id ?? p?._id;\r\n\r\n  // Suma local de abonos guardados en cache para un proyecto\r\n  const obtenerTotalPagado = (p) => {\r\n    const pid = obtenerIdProyecto(p);\r\n    const lista = abonosPorProyecto?.[pid] || [];\r\n    return lista.reduce((acc, a) => acc + (Number(a?.monto) || 0), 0);\r\n  };\r\n\r\n  // Obtiene el total restante de un proyecto (igual que en ProjectTable)\r\n  const obtenerTotalRestante = (p) => {\r\n    // 1) Valor directo desde backend si est谩 presente\r\n    const resumen = p?.resumenFinanciero || {};\r\n    const fromDB = resumen?.totalRestante ?? resumen?.saldoPendiente ?? resumen?.saldo_pendiente;\r\n    if (typeof fromDB === 'number' && !isNaN(fromDB)) {\r\n      return fromDB;\r\n    }\r\n    // 2) Fallback: calcula a partir de presupuesto y pagado\r\n    const presupuesto = obtenerPresupuesto(p);\r\n    const pagado = obtenerTotalPagado(p);\r\n    const restante = Math.max(presupuesto - pagado, 0);\r\n    return restante;\r\n  };\r\n\r\n  /* =========================================================================\r\n     Normalizadores para filtros (eliminan acentos, bajan a min煤sculas, etc.)\r\n     ========================================================================= */\r\n  const normalizar = (s) => (s ?? '').toString()\r\n    .normalize('NFD').replace(/[\\u0300-\\u036f]/g, '')\r\n    .toLowerCase().trim().replace(/\\s+/g, ' ');\r\n\r\n  // Homologa distintos textos de estado a un \"canon\" para comparar\r\n  const estadoCanonico = (raw) => {\r\n    if (!raw) return 'planificacion';\r\n    const v = normalizar(String(raw));\r\n    \r\n    // Orden de verificaci贸n: de m谩s espec铆fico a m谩s general\r\n    // \"en pausa\" debe verificarse antes de \"en proceso\" para evitar conflictos\r\n    if (v.includes('pausa') || v.includes('pause') || v.includes('hold')) return 'en pausa';\r\n    if (v.includes('revision') || v.includes('review')) return 'en revision';\r\n    if (v.includes('completado') || v.includes('complet') || v.includes('done') || v.includes('closed')) return 'completado';\r\n    if (v.includes('cancelado') || v.includes('canceled') || v.includes('cancelled') || v.includes('cancel')) return 'cancelado';\r\n    if (v.includes('proceso') || v.includes('progress') || v.includes('process')) return 'en proceso';\r\n    if (v.includes('planific') || v.includes('planning') || v.includes('activo') || v.includes('active')) return 'planificacion';\r\n    \r\n    return v || 'planificacion';\r\n  };\r\n\r\n  /* =========================================================================\r\n     Manejo de filtros\r\n     - Recibe el objeto `filtros` desde <ProjectFilters/>\r\n     - Aplica b煤squeda, estado, departamento, prioridad, fechas, presupuesto y\r\n       un filtro adicional de \"estado de pago\" (pagado / en-proceso / sin-pago)\r\n     ========================================================================= */\r\n  const manejarCambioFiltros = (filtros) => {\r\n    let filtrados = Array.isArray(proyectos) ? [...proyectos] : [];\r\n\r\n    // B煤squeda por nombre, c贸digo o cliente\r\n    if (filtros?.search) {\r\n      const q = normalizar(filtros.search);\r\n      filtrados = filtrados.filter(proy => {\r\n        const nombre = normalizar(obtenerNombre(proy));\r\n        const codigo = normalizar(obtenerCodigo(proy));\r\n        const cliente = normalizar(proy?.cliente?.nombre || proy?.cliente || '');\r\n        return nombre.includes(q) || codigo.includes(q) || cliente.includes(q);\r\n      });\r\n    }\r\n\r\n    // Filtro por estado de pago (basado en Total restante)\r\n    if (filtros?.paymentStatus) {\r\n      filtrados = filtrados.filter(proy => {\r\n        const presupuesto = obtenerPresupuesto(proy);\r\n        const totalRestante = obtenerTotalRestante(proy);\r\n        \r\n        if (filtros.paymentStatus === 'pagado') {\r\n          // Pagados: Total restante = 0\r\n          return totalRestante === 0;\r\n        } else if (filtros.paymentStatus === 'en-proceso') {\r\n          // En Proceso de Pago: Total restante < Presupuesto (y > 0)\r\n          return totalRestante > 0 && totalRestante < presupuesto;\r\n        } else if (filtros.paymentStatus === 'sin-pago') {\r\n          // Sin Pagos: Total restante = Presupuesto\r\n          return presupuesto > 0 && totalRestante === presupuesto;\r\n        }\r\n        return true;\r\n      });\r\n    }\r\n\r\n    // Filtro por estado del proyecto (normalizado)\r\n    if (filtros?.status) {\r\n      // Mapear valores del selector a valores can贸nicos (sin acentos)\r\n      const mapaEstado = {\r\n        'planning': 'planificacion',\r\n        'in-progress': 'en proceso',\r\n        'on-hold': 'en pausa',\r\n        'review': 'en revision',\r\n        'completed': 'completado',\r\n        'cancelled': 'cancelado'\r\n      };\r\n      const estadoObjetivo = mapaEstado[filtros.status] || estadoCanonico(filtros.status);\r\n      const estadoObjetivoNormalizado = normalizar(estadoObjetivo);\r\n      \r\n      filtrados = filtrados.filter(proy => {\r\n        // Obtener estado del proyecto - intentar m煤ltiples fuentes\r\n        let estadoProyecto = null;\r\n        \r\n        // 1. Intentar desde el objeto raw (datos originales del backend)\r\n        const estadoRaw = proy?.raw?.estado ?? proy?.raw?.status ?? proy?.raw?.estadoProyecto ?? proy?.raw?.statusLabel;\r\n        if (estadoRaw) {\r\n          estadoProyecto = backendToUiDefault(estadoRaw);\r\n        }\r\n        \r\n        // 2. Si no hay raw, intentar desde los campos directos del proyecto\r\n        if (!estadoProyecto) {\r\n          const estadoDirecto = proy?.estado ?? proy?.status ?? proy?.estadoProyecto ?? proy?.statusLabel;\r\n          if (estadoDirecto) {\r\n            estadoProyecto = backendToUiDefault(estadoDirecto);\r\n          }\r\n        }\r\n        \r\n        // 3. Si a煤n no hay estado, usar la funci贸n obtenerEstadoUi (cache + backend)\r\n        if (!estadoProyecto) {\r\n          estadoProyecto = obtenerEstadoUi(proy);\r\n        }\r\n        \r\n        // Normalizar el estado del proyecto a formato can贸nico\r\n        const estadoProyectoCanonico = estadoCanonico(estadoProyecto);\r\n        \r\n        // Normalizar ambos para comparaci贸n (sin acentos, min煤sculas)\r\n        const estadoProyectoNormalizado = normalizar(estadoProyectoCanonico);\r\n        \r\n        // Comparar estados normalizados\r\n        const coincide = estadoProyectoNormalizado === estadoObjetivoNormalizado;\r\n        \r\n        return coincide;\r\n      });\r\n    }\r\n\r\n    // Filtro por departamento (mapea claves en ingl茅s a etiquetas en espa帽ol)\r\n    if (filtros?.department) {\r\n      const mapaDepto = { sales: 'Ventas', engineering: 'Ingenier铆a', installation: 'Instalaci贸n', maintenance: 'Mantenimiento', administration: 'Administraci贸n' };\r\n      const depto = mapaDepto[filtros.department] || filtros.department;\r\n      filtrados = filtrados.filter(proy => (obtenerDepartamento(proy) || '') === depto);\r\n    }\r\n\r\n    // Filtro por prioridad (mapea claves a etiquetas)\r\n    if (filtros?.priority) {\r\n      const mapaPrioridad = { low: 'Baja', medium: 'Media', high: 'Alta', urgent: 'Urgente' };\r\n      const prioridad = mapaPrioridad[filtros.priority] || filtros.priority;\r\n      filtrados = filtrados.filter(proy => {\r\n        const prioridadProy = obtenerPrioridad(proy);\r\n        const prioridadNormalizada = normalizar(prioridadProy);\r\n        const prioridadFiltroNormalizada = normalizar(prioridad);\r\n        return prioridadNormalizada === prioridadFiltroNormalizada;\r\n      });\r\n    }\r\n\r\n    // Filtros por presupuesto m铆nimo/m谩ximo\r\n    if (filtros?.minBudget) filtrados = filtrados.filter(proy => obtenerPresupuesto(proy) >= Number(filtros.minBudget));\r\n    if (filtros?.maxBudget) filtrados = filtrados.filter(proy => obtenerPresupuesto(proy) <= Number(filtros.maxBudget));\r\n\r\n    // Filtro por fecha de inicio  selected\r\n    if (filtros?.startDate) {\r\n      const filtroInicio = new Date(filtros.startDate);\r\n      filtrados = filtrados.filter(proy => {\r\n        const d = obtenerInicio(proy); if (!d) return false;\r\n        const sd = new Date(d); return sd >= filtroInicio;\r\n      });\r\n    }\r\n\r\n    // Filtro por fecha de fin  selected\r\n    if (filtros?.endDate) {\r\n      const filtroFin = new Date(filtros.endDate);\r\n      filtrados = filtrados.filter(proy => {\r\n        const d = obtenerFin(proy); if (!d) return false;\r\n        const ed = new Date(d); return ed <= filtroFin;\r\n      });\r\n    }\r\n\r\n    setProyectosFiltrados(filtrados);\r\n  };\r\n\r\n  /* =========================================================================\r\n     Acciones sobre proyectos\r\n     ========================================================================= */\r\n  // Abre modal de edici贸n con el proyecto seleccionado\r\n  const manejarEditarProyecto = (proyecto) => {\r\n    const id = proyecto?.id ?? proyecto?._id; if (!id) return;\r\n    setProyectoSeleccionado({ ...proyecto, id });\r\n    setModalEditarAbierto(true);\r\n  };\r\n\r\n  // Actualiza el estado del proyecto en backend y sincroniza cache UI\r\n  const _manejarActualizacionEstado = async (proyectoId, nuevoEstadoUi) => {\r\n    try {\r\n      const estadoBackend = mapUiToBackend(nuevoEstadoUi);\r\n      await updateProyecto(proyectoId, { estado: estadoBackend });\r\n      uiEstadoCache.set(proyectoId, nuevoEstadoUi);\r\n      await getProyectos({ force: true }).catch(() => {});\r\n    } catch (error) {\r\n      console.error('Error al actualizar estado del proyecto:', error);\r\n      alert('Error al actualizar el estado del proyecto');\r\n    }\r\n  };\r\n\r\n  // Placeholder para acciones masivas desde la tabla\r\n  const manejarAccionMasiva = (accion, idsSeleccionados) => { console.log(`Acci贸n masiva: ${accion}`, idsSeleccionados); };\r\n\r\n  /* =========================================================================\r\n     Flujo de registro de abonos\r\n     - abrir/cerrar modal\r\n     - seleccionar proyecto\r\n     - guardar abono en cache local (para mostrar progreso/pagado)\r\n     ========================================================================= */\r\n  const abrirRegistroAbono = (proyecto) => { setRegistrarAbonoPara(proyecto); };\r\n  const cerrarRegistroAbono = () => {\r\n    setRegistrarAbonoPara(null);\r\n    setMostrarSelectorProyecto(false);\r\n  };\r\n  const abrirVerAbonos = (proyecto) => { setVerAbonosPara(proyecto); };\r\n  const cerrarVerAbonos = () => { setVerAbonosPara(null); };\r\n  const _abrirNuevoAbono = () => {\r\n    if (proyectosFiltrados && proyectosFiltrados.length > 0) {\r\n      setMostrarSelectorProyecto(true);\r\n    } else {\r\n      alert('No hay proyectos disponibles para registrar un abono.');\r\n    }\r\n  };\r\n  const seleccionarProyectoParaAbono = (proyecto) => {\r\n    setMostrarSelectorProyecto(false);\r\n    setRegistrarAbonoPara(proyecto);\r\n  };\r\n  const manejarGuardarAbono = async (payload) => {\r\n    const projectId =\r\n      payload?.projectId ??\r\n      payload?.idProyecto ??\r\n      payload?.project_id ??\r\n      payload?.proyectoId ??\r\n      obtenerIdProyecto(registrarAbonoPara);\r\n\r\n    if (!projectId) {\r\n      console.warn('No se pudo determinar el ID del proyecto al registrar el abono.');\r\n      return;\r\n    }\r\n\r\n    const fecha =\r\n      payload?.fecha ??\r\n      payload?.fechaAbono ??\r\n      payload?.fechaPago ??\r\n      payload?.createdAt ??\r\n      payload?.fecha_creacion ??\r\n      new Date().toISOString();\r\n\r\n    const monto = Number(\r\n      payload?.monto ??\r\n      payload?.montoAbono ??\r\n      payload?.monto_abono ??\r\n      payload?.amount ?? 0\r\n    ) || 0;\r\n\r\n    const saldoRestante =\r\n      payload?.saldoRestante ??\r\n      payload?.saldo_restante ??\r\n      payload?.saldo ??\r\n      payload?.saldoRestanteDespues ??\r\n      null;\r\n\r\n    setAbonosPorProyecto((prev) => {\r\n      const siguiente = { ...prev };\r\n      const lista = Array.isArray(siguiente[projectId]) ? siguiente[projectId] : [];\r\n      siguiente[projectId] = [...lista, { fecha, monto, saldoRestante }];\r\n      try { localStorage.setItem('abonos_proyectos_v1', JSON.stringify(siguiente)); } catch {}\r\n      return siguiente;\r\n    });\r\n\r\n    cerrarRegistroAbono();\r\n\r\n    // Refrescar las estad铆sticas de abonos\r\n    setRefreshAbonosStats(prev => prev + 1);\r\n\r\n    try {\r\n      await getProyectos({ force: true });\r\n    } catch (errorRecarga) {\r\n      console.error('Error al recargar los proyectos despu茅s de registrar un abono:', errorRecarga);\r\n    }\r\n  };\r\n\r\n  // Tras editar un proyecto, recarga lista desde backend y cierra modal\r\n  const manejarActualizarProyecto = async () => {\r\n    try {\r\n      await getProyectos({ force: true });\r\n      alert('Proyecto actualizado exitosamente');\r\n      setProyectoSeleccionado(null); setModalEditarAbierto(false);\r\n    } catch {\r\n      setProyectoSeleccionado(null); setModalEditarAbierto(false);\r\n    }\r\n  };\r\n\r\n  /* =========================================================================\r\n     Exportaci贸n CSV desde el panel de filtros\r\n     - Toma la lista actualmente filtrada y la descarga como CSV\r\n     ========================================================================= */\r\n  const manejarExportarDesdeFiltros = () => {\r\n    const lista = proyectosFiltrados || [];\r\n    if (!lista.length) { alert('No hay proyectos para exportar.'); return; }\r\n    const encabezados = ['C贸digo','Nombre','Cliente','Estado','Prioridad','Presupuesto (MXN)','Inicio','Fin'];\r\n    const escapar = (s) => {\r\n      const v = String(s ?? '');\r\n      const necesita = /[\",\\n]/.test(v);\r\n      const e = v.replace(/\"/g,'\"\"');\r\n      return necesita ? `\"${e}\"` : e;\r\n    };\r\n    const filas = lista.map(p => {\r\n      const codigo = p?.codigo ?? p?.code ?? '';\r\n      const nombre = p?.nombre ?? p?.name ?? '';\r\n      const cliente = p?.cliente?.nombre || p?.cliente || '';\r\n      const estado = p?.statusLabel || p?.estado || p?.status || '';\r\n      const prioridad = p?.priority || p?.prioridad || '';\r\n      const presupuesto = Number(p?.totalPresupuesto ?? p?.presupuesto?.total ?? p?.budget ?? 0).toLocaleString('es-MX');\r\n      const ini = new Date(p?.cronograma?.fechaInicio ?? p?.startDate ?? '').toLocaleDateString('es-MX');\r\n      const fin = new Date(p?.cronograma?.fechaFin ?? p?.endDate ?? '').toLocaleDateString('es-MX');\r\n      return [codigo,nombre,cliente,estado,prioridad,presupuesto,ini,fin].map(escapar).join(',');\r\n    });\r\n    const csv = [encabezados.join(','), ...filas].join('\\n');\r\n    const blob = new Blob([csv], { type:'text/csv;charset=utf-8;' });\r\n    const a = document.createElement('a');\r\n    a.href = URL.createObjectURL(blob);\r\n    a.download = `proyectos_filtrados_${new Date().toISOString().slice(0,10)}.csv`;\r\n    document.body.appendChild(a); a.click();\r\n    document.body.removeChild(a);\r\n  };\r\n\r\n  /* =========================================================================\r\n     Vista de carga (skeleton)\r\n     ========================================================================= */\r\n  if (cargando) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={barraLateralColapsada} onToggle={() => setBarraLateralColapsada(!barraLateralColapsada)} />\r\n        <div className={`flex-1 transition-all duration-300 ${barraLateralColapsada ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setMenuEncabezadoAbierto(!menuEncabezadoAbierto)} isMenuOpen={menuEncabezadoAbierto} />\r\n          <div className=\"pt-16 flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando proyectos...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /* =========================================================================\r\n     Render principal\r\n     - Sidebar + Header fijos\r\n     - Stats, filtros, tabla, vac铆os, modales y selector de proyecto\r\n     ========================================================================= */\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={barraLateralColapsada} onToggle={() => setBarraLateralColapsada(!barraLateralColapsada)} />\r\n\r\n      <div className={`flex-1 transition-all duration-300 ${barraLateralColapsada ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setMenuEncabezadoAbierto(!menuEncabezadoAbierto)} isMenuOpen={menuEncabezadoAbierto} />\r\n\r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Encabezado de la p谩gina */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Gesti贸n de Proyectos</h1>\r\n                <p className=\"text-muted-foreground\">Administre el ciclo completo de proyectos HVAC desde la planificaci贸n hasta el cierre</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Resumen de estad铆sticas (usa proyectos filtrados y total pagado calculado localmente) */}\r\n            {proyectosFiltrados?.length > 0 && (\r\n              <ProjectStats \r\n                projects={proyectosFiltrados} \r\n                getTotalPagado={obtenerTotalPagado}\r\n                refreshTrigger={refreshAbonosStats}\r\n              />\r\n            )}\r\n\r\n            {/* Filtros (emitir谩 onFiltersChange  manejarCambioFiltros) */}\r\n            <ProjectFilters\r\n              onFiltersChange={manejarCambioFiltros}\r\n              totalProjects={proyectos?.length}\r\n              filteredProjects={proyectosFiltrados?.length}\r\n              onExport={manejarExportarDesdeFiltros}\r\n            />\r\n\r\n            {/* Tabla de proyectos o estado vac铆o */}\r\n            <div className=\"space-y-6\">\r\n              {proyectosFiltrados?.length > 0 && (\r\n                <ProjectTable\r\n                  projects={proyectosFiltrados}\r\n                  onProjectSelect={manejarEditarProyecto}\r\n                  onRegisterAbono={abrirRegistroAbono}\r\n                  onViewAbonos={abrirVerAbonos}\r\n                  getPaidAmount={obtenerTotalPagado}\r\n                  onBulkAction={manejarAccionMasiva}\r\n                />\r\n              )}\r\n\r\n              {/* Mensaje de vac铆o cuando no hay resultados */}\r\n              {proyectosFiltrados?.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <Icon name=\"Filter\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-medium text-foreground mb-2\">No se encontraron proyectos con tus filtros</h3>\r\n                  <p className=\"text-muted-foreground mb-6\">Intenta con otros filtros o par谩metros de b煤squeda</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Modal para crear proyecto (al cerrar, recarga lista) */}\r\n            <CreateProjectModal\r\n              isOpen={modalCrearAbierto}\r\n              onClose={() => setModalCrearAbierto(false)}\r\n              onSubmit={() => getProyectos({ force: true })}\r\n            />\r\n\r\n            {/* Modal para editar proyecto seleccionado */}\r\n            {modalEditarAbierto && (\r\n              <EditProjectModal\r\n                isOpen\r\n                onClose={() => { setModalEditarAbierto(false); setProyectoSeleccionado(null); }}\r\n                onSubmit={manejarActualizarProyecto}\r\n                project={proyectoSeleccionado}\r\n              />\r\n            )}\r\n\r\n            {/* Selector de proyecto para registrar un nuevo abono manualmente */}\r\n            {mostrarSelectorProyecto && (\r\n              <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n                <div className=\"absolute inset-0 bg-black/40\" onClick={() => setMostrarSelectorProyecto(false)} />\r\n                <div className=\"relative bg-card border border-border rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden flex flex-col\">\r\n                  <div className=\"p-4 border-b border-border flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"CreditCard\" size={18} />\r\n                      <h3 className=\"text-lg font-semibold text-foreground\">Seleccionar Proyecto para Nuevo Abono</h3>\r\n                    </div>\r\n                    <button className=\"text-muted-foreground hover:text-foreground\" onClick={() => setMostrarSelectorProyecto(false)} title=\"Cerrar\">\r\n                      <Icon name=\"X\" size={18} />\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"p-4 overflow-y-auto flex-1\">\r\n                    <div className=\"space-y-2\">\r\n                      {proyectosFiltrados && proyectosFiltrados.length > 0 ? (\r\n                        proyectosFiltrados.map((proy) => {\r\n                          const idProyecto = proy?.id ?? proy?._id;\r\n                          const presupuesto = obtenerPresupuesto(proy);\r\n                          const pagado = obtenerTotalPagado(proy);\r\n                          const restante = Math.max(presupuesto - pagado, 0);\r\n                          return (\r\n                            <button\r\n                              key={idProyecto}\r\n                              onClick={() => seleccionarProyectoParaAbono(proy)}\r\n                              className=\"w-full text-left p-4 border border-border rounded-lg hover:bg-muted/50 transition-smooth\"\r\n                            >\r\n                              <div className=\"flex items-center justify-between\">\r\n                                <div className=\"flex-1\">\r\n                                  <div className=\"font-medium text-foreground\">{obtenerNombre(proy)}</div>\r\n                                  <div className=\"text-sm text-muted-foreground mt-1\">\r\n                                    C贸digo: {obtenerCodigo(proy)}\r\n                                  </div>\r\n                                  <div className=\"text-xs text-muted-foreground mt-1\">\r\n                                    Presupuesto: {new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(presupuesto)} | \r\n                                    Pagado: {new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(pagado)} | \r\n                                    Restante: {new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(restante)}\r\n                                  </div>\r\n                                </div>\r\n                                <Icon name=\"ChevronRight\" size={20} className=\"text-muted-foreground\" />\r\n                              </div>\r\n                            </button>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <div className=\"text-center py-8 text-muted-foreground\">\r\n                          No hay proyectos disponibles\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Modal para registrar abono del proyecto seleccionado */}\r\n            {registrarAbonoPara && (\r\n              <RegisterAbonoModal\r\n                isOpen\r\n                project={registrarAbonoPara}\r\n                currentPaid={obtenerTotalPagado(registrarAbonoPara)}\r\n                onClose={cerrarRegistroAbono}\r\n                onSave={manejarGuardarAbono}\r\n              />\r\n            )}\r\n\r\n            {/* Modal para visualizar abonos del proyecto seleccionado */}\r\n            {verAbonosPara && (\r\n              <ViewAbonosModal\r\n                isOpen\r\n                project={verAbonosPara}\r\n                onClose={cerrarVerAbonos}\r\n                onAbonoUpdated={async (proyecto, abonoActualizado) => {\r\n                  // Refrescar las estad铆sticas de abonos\r\n                  setRefreshAbonosStats(prev => prev + 1);\r\n                  \r\n                  // Recargar los proyectos para actualizar la tabla\r\n                  try {\r\n                    await getProyectos({ force: true });\r\n                  } catch (errorRecarga) {\r\n                    console.error('Error al recargar los proyectos despu茅s de actualizar un abono:', errorRecarga);\r\n                  }\r\n                }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectManagement;\r\n","import httpService from \"./httpService\";\r\n\r\nconst userService = {\r\n  /**\r\n   * Obtiene la lista de usuarios\r\n   * @returns {Promise} Promise con la respuesta del servidor\r\n   */\r\n  getUsers: () => {\r\n    return httpService.get(\"/usuarios/obtenerUsuarios\");\r\n  },\r\n\r\n  /**\r\n   * Crea un nuevo usuario\r\n   * @param {Object} userData - Datos del usuario a crear\r\n   * @returns {Promise} Promise con la respuesta del servidor\r\n   */\r\n  createUser: (userData) => {\r\n    return httpService.post(\"/usuarios/crear\", userData);\r\n  },\r\n\r\n  /**\r\n   * Actualiza un usuario existente\r\n   * @param {string|number} id - ID del usuario a actualizar\r\n   * @param {Object} userData - Datos actualizados del usuario\r\n   * @returns {Promise} Promise con la respuesta del servidor\r\n   */\r\n  updateUser: (id, userData) => {\r\n    return httpService.put(`/usuarios/actualizar/${id}`, userData);\r\n  },\r\n\r\n  /**\r\n   * Obtiene un usuario por su ID\r\n   * @param {string|number} id - ID del usuario\r\n   * @returns {Promise} Promise con la respuesta del servidor\r\n   */\r\n  getUserById: (id) => {\r\n    return httpService.get(`/usuarios/${id}`);\r\n  },\r\n};\r\n\r\nexport default userService;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { useNotification } from '../context/NotificationContext';\r\nimport userService from '../services/userService';\r\n\r\nconst useUsers = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const { addNotification } = useNotification();\r\n\r\n  const fetchUsers = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await userService.getUsers();\r\n      setUsers(response.data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      addNotification('Error al cargar usuarios', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [addNotification]);\r\n\r\n  const createUser = async (userData) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await userService.createUser(userData);\r\n      setUsers(prev => [...prev, response.data]);\r\n      addNotification('Usuario creado exitosamente', 'success');\r\n      return response.data;\r\n    } catch (err) {\r\n      setError(err.message);\r\n      addNotification('Error al crear usuario', 'error');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateUser = async (id, userData) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await userService.updateUser(id, userData);\r\n      setUsers(prev => prev.map(user => \r\n        user.id === id ? { ...user, ...response.data } : user\r\n      ));\r\n      addNotification('Usuario actualizado exitosamente', 'success');\r\n      return response.data;\r\n    } catch (err) {\r\n      setError(err.message);\r\n      addNotification('Error al actualizar usuario', 'error');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, [fetchUsers]);\r\n\r\n  return {\r\n    users,\r\n    loading,\r\n    error,\r\n    fetchUsers,\r\n    createUser,\r\n    updateUser\r\n  };\r\n};\r\n\r\nexport default useUsers;","import React, { useState, useEffect } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Icon from '../../../components/AppIcon';\r\nimport { cn } from '../../../utils/cn';\r\nimport { useNotification } from '../../../context/NotificationContext';\r\n\r\nconst UserFormModal = ({ user, onClose, onSave }) => {\r\n  // Estado inicial completamente vac铆o\r\n  const initialFormState = {\r\n    nombre: '',\r\n    email: '',\r\n    password: '',\r\n    rol: '',\r\n    contacto: '',\r\n    direccion: '',\r\n    imagen: ''\r\n  };\r\n\r\n  const [formData, setFormData] = useState(initialFormState);\r\n  const [errors, setErrors] = useState({});\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Solo precargar datos si estamos editando un usuario existente\r\n    if (user) {\r\n      setFormData({\r\n        nombre: user.nombre || '',\r\n        email: user.email || '',\r\n        password: '', // Nunca precargar contrase帽a\r\n        rol: user.rol || '',\r\n        contacto: user.contacto || '',\r\n        direccion: user.direccion || '',\r\n        imagen: user.imagen || ''\r\n      });\r\n    } else {\r\n      // Asegurar que el formulario est茅 completamente vac铆o para creaci贸n\r\n      setFormData(initialFormState);\r\n      setErrors({});\r\n      setShowPassword(false);\r\n    }\r\n  }, [user]);\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    \r\n    // Validar nombre\r\n    if (!formData.nombre.trim()) {\r\n      newErrors.nombre = 'El nombre es requerido';\r\n    } else if (formData.nombre.trim().length < 3) {\r\n      newErrors.nombre = 'El nombre debe tener al menos 3 caracteres';\r\n    }\r\n    \r\n    // Validar email\r\n    if (!formData.email.trim()) {\r\n      newErrors.email = 'El correo es requerido';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\r\n      newErrors.email = 'Correo electr贸nico inv谩lido';\r\n    }\r\n    \r\n    // Validar contrase帽a\r\n    if (!user && !formData.password.trim()) {\r\n      newErrors.password = 'La contrase帽a es requerida';\r\n    } else if (formData.password && formData.password.length < 6) {\r\n      newErrors.password = 'La contrase帽a debe tener al menos 6 caracteres';\r\n    }\r\n    \r\n    // Validar rol\r\n    if (!formData.rol.trim()) {\r\n      newErrors.rol = 'El rol es requerido';\r\n    }\r\n    \r\n    // Validar contacto (si se proporciona)\r\n    if (formData.contacto.trim()) {\r\n      const contactoSinEspacios = formData.contacto.replace(/\\s/g, '');\r\n      if (!/^\\d{10}$/.test(contactoSinEspacios)) {\r\n        newErrors.contacto = 'El contacto debe tener 10 d铆gitos';\r\n      }\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      addNotification('Por favor, corrija los errores en el formulario', 'error');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      await onSave(formData);\r\n      addNotification(\r\n        user ? 'Usuario actualizado exitosamente' : 'Usuario creado exitosamente',\r\n        'success'\r\n      );\r\n    } catch (error) {\r\n      addNotification(\r\n        error.message || 'Error al guardar el usuario',\r\n        'error'\r\n      );\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    \r\n    // Validaci贸n espec铆fica para contacto (solo n煤meros, m谩ximo 10 d铆gitos)\r\n    if (name === 'contacto') {\r\n      const numericValue = value.replace(/\\D/g, '');\r\n      if (numericValue.length <= 10) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          [name]: numericValue\r\n        }));\r\n      }\r\n    } else {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [name]: value\r\n      }));\r\n    }\r\n    \r\n    // Limpiar error del campo cuando el usuario empieza a escribir\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-card rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl\">\r\n        {/* Header */}\r\n        <div className=\"sticky top-0 bg-card border-b border-border px-6 py-4 flex items-center justify-between z-10\">\r\n          <h2 className=\"text-xl font-semibold text-foreground\">\r\n            {user ? 'Editar Usuario' : 'Crear Nuevo Usuario'}\r\n          </h2>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n            aria-label=\"Cerrar modal\"\r\n          >\r\n            <Icon name=\"X\" className=\"w-5 h-5\" />\r\n          </Button>\r\n        </div>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Nombre\"\r\n                name=\"nombre\"\r\n                value={formData.nombre}\r\n                onChange={handleChange}\r\n                error={errors.nombre}\r\n                required\r\n                placeholder=\"Ingrese el nombre completo\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Correo Electr贸nico\"\r\n                type=\"email\"\r\n                name=\"email\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n                error={errors.email}\r\n                required\r\n                placeholder=\"correo@ejemplo.com\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"relative\">\r\n              <Input\r\n                label=\"Contrase帽a\"\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                name=\"password\"\r\n                value={formData.password}\r\n                onChange={handleChange}\r\n                error={errors.password}\r\n                required={!user}\r\n                placeholder={user ? \"Dejar vac铆o para mantener contrase帽a actual\" : \"Ingrese una contrase帽a segura\"}\r\n              />\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"absolute right-2 top-8\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                aria-label={showPassword ? \"Ocultar contrase帽a\" : \"Mostrar contrase帽a\"}\r\n              >\r\n                <Icon\r\n                  name={showPassword ? \"EyeOff\" : \"Eye\"}\r\n                  className=\"w-4 h-4\"\r\n                />\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium leading-none text-foreground\">\r\n                Rol <span className=\"text-destructive ml-1\">*</span>\r\n              </label>\r\n              <select\r\n                name=\"rol\"\r\n                value={formData.rol}\r\n                onChange={handleChange}\r\n                required\r\n                className={cn(\r\n                  \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n                  errors.rol && \"border-destructive focus-visible:ring-destructive\"\r\n                )}\r\n              >\r\n                <option value=\"\">Seleccionar rol</option>\r\n                <option value=\"admin\">Admin - Acceso Total</option>\r\n                <option value=\"administracion\">Administraci贸n - Negocio, Personal y Abonos</option>\r\n                <option value=\"proyectos\">Proyectos - Cotizaciones y Proyectos</option>\r\n                <option value=\"ventas\">Ventas - Oportunidades y Cotizaciones</option>\r\n                <option value=\"taller\">Taller - Operaciones, Operaciones de Taller e Inventario</option>\r\n              </select>\r\n              {errors.rol && (\r\n                <p className=\"text-sm text-destructive\">{errors.rol}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Contacto\"\r\n                name=\"contacto\"\r\n                value={formData.contacto}\r\n                onChange={handleChange}\r\n                error={errors.contacto}\r\n                placeholder=\"Tel茅fono de contacto (10 d铆gitos)\"\r\n                maxLength={10}\r\n              />\r\n              {formData.contacto && (\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {formData.contacto.length}/10 d铆gitos\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Direcci贸n\"\r\n                name=\"direccion\"\r\n                value={formData.direccion}\r\n                onChange={handleChange}\r\n                placeholder=\"Direcci贸n completa\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"URL de Imagen\"\r\n                name=\"imagen\"\r\n                value={formData.imagen}\r\n                onChange={handleChange}\r\n                placeholder=\"https://ejemplo.com/imagen.jpg\"\r\n              />\r\n              {formData.imagen && (\r\n                <div className=\"mt-2\">\r\n                  <img \r\n                    src={formData.imagen} \r\n                    alt=\"Preview\" \r\n                    className=\"w-16 h-16 rounded-full object-cover border-2 border-border\"\r\n                    onError={(e) => {\r\n                      e.target.style.display = 'none';\r\n                    }}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-3 pt-4 border-t border-border\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"default\"\r\n              disabled={isSubmitting}\r\n            >\r\n              {isSubmitting ? (\r\n                <>\r\n                  <Icon name=\"Loader2\" className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                  Guardando...\r\n                </>\r\n              ) : (\r\n                user ? 'Guardar Cambios' : 'Crear Usuario'\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserFormModal;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\nconst UserTable = ({ users, onEditUser }) => {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  // Paginaci贸n\r\n  const totalItems = users.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedUsers = users.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"min-w-full divide-y divide-border\">\r\n          <thead className=\"bg-gray-50 dark:bg-gray-900\">\r\n            <tr>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-normal\">Nombre</th>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Rol</th>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Correo</th>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Contacto</th>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Direcci贸n</th>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\r\n            {paginatedUsers.map((user) => (\r\n              <tr key={user.id} className=\"border-b border-border hover:bg-muted/30 transition-smooth\">\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div className=\"flex items-center\">\r\n                    {user.imagen && (\r\n                      <img className=\"h-10 w-10 rounded-full mr-3\" src={user.imagen} alt={user.nombre} />\r\n                    )}\r\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{user.nombre}</div>\r\n                  </div>\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-foreground\">{user.rol}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-foreground\">{user.email}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-foreground\">{user.contacto || '-'}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-foreground\">{user.direccion || '-'}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                  <button \r\n                    onClick={() => onEditUser(user)} \r\n                    className=\"text-primary hover:text-primary/80 transition-colors\"\r\n                    aria-label={`Editar usuario ${user.nombre}`}\r\n                    title=\"Editar usuario\"\r\n                  >\r\n                    <Icon name=\"Pencil\" className=\"w-4 h-4\" />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Paginaci贸n */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n          <select\r\n            value={pageSize}\r\n            onChange={handleChangePageSize}\r\n            className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n          >\r\n            {PAGE_SIZE_OPTIONS.map((opt) => (\r\n              <option key={opt} value={opt}>{opt}</option>\r\n            ))}\r\n          </select>\r\n          <span className=\"text-xs text-muted-foreground\">por p谩gina</span>\r\n          <span className=\"text-xs text-muted-foreground ml-3\">\r\n            Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n          <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n          <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserTable;\r\n","import React, { useState } from 'react';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport Button from '../../components/ui/Button';\r\nimport Icon from '../../components/AppIcon';\r\nimport { useAuth } from '../../hooks/useAuth';\r\nimport useUsers from '../../hooks/useUsers';\r\nimport UserFormModal from './components/UserFormModal';\r\nimport UserTable from './components/UserTable';\r\n\r\nconst UserManagement = () => {\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const { user } = useAuth();\r\n  const { users, loading, createUser, updateUser } = useUsers();\r\n\r\n  if (!user?.rol?.toLowerCase().includes('admin')) return null;\r\n\r\n  const handleCreateUser = () => {\r\n    setSelectedUser(null); // Asegurar que no hay usuario seleccionado\r\n    setIsModalOpen(true);\r\n  };\r\n  const handleEditUser = (user) => {\r\n    setSelectedUser(user);\r\n    setIsModalOpen(true);\r\n  };\r\n  const handleCloseModal = () => {\r\n    setSelectedUser(null); // Limpiar usuario seleccionado al cerrar\r\n    setIsModalOpen(false);\r\n  };\r\n  const handleSaveUser = async (userData) => {\r\n    try {\r\n      if (selectedUser) {\r\n        await updateUser(selectedUser.id, userData);\r\n      } else {\r\n        await createUser(userData);\r\n      }\r\n      handleCloseModal(); // Usar funci贸n de cierre que limpia\r\n    } catch (error) {\r\n      console.error('Error al guardar usuario:', error);\r\n    }\r\n  };\r\n\r\n  // Loading state with full layout\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar \r\n          isCollapsed={sidebarCollapsed} \r\n          onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n        />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header \r\n            onMenuToggle={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n            isMenuOpen={mobileMenuOpen}\r\n          />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando usuarios...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar \r\n        isCollapsed={sidebarCollapsed} \r\n        onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n      />\r\n\r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header \r\n          onMenuToggle={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n          isMenuOpen={mobileMenuOpen}\r\n        />\r\n\r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-foreground\">Gesti贸n de Usuarios</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                  Administra usuarios, roles y permisos del sistema\r\n                </p>\r\n              </div>\r\n              <Button\r\n                variant=\"default\"\r\n                onClick={handleCreateUser}\r\n                iconName=\"Plus\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Crear Usuario\r\n              </Button>\r\n            </div>\r\n\r\n            {/* User Table */}\r\n            <UserTable\r\n              users={users}\r\n              onEditUser={handleEditUser}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      {isModalOpen && (\r\n        <UserFormModal\r\n          user={selectedUser}\r\n          onClose={handleCloseModal}\r\n          onSave={handleSaveUser}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagement;\r\n","import React from \"react\";\r\nimport { BrowserRouter, Routes as RouterRoutes, Route, Navigate } from \"react-router-dom\";\r\nimport ScrollToTop from \"components/ScrollToTop\";\r\nimport ErrorBoundary from \"components/ErrorBoundary\";\r\nimport ProtectedRoute from \"components/ProtectedRoute\";\r\nimport { ButtonHandlersProvider } from \"./components/GlobalButtonHandlers\";\r\nimport { getDefaultPath } from \"./utils/auth\";\r\nimport NotFound from \"pages/NotFound\";\r\nimport ProjectManagement from './pages/project-management';\r\nimport ProjectDetailGallery from './pages/project-detail-gallery';\r\nimport ProjectGalleryViewer from './pages/project-gallery-viewer';\r\nimport ProjectDocumentationCenter from './pages/project-documentation-center';\r\nimport ProjectWorkflowManagement from './pages/project-workflow-management';\r\nimport QuotationBuilder from './pages/quotation-builder';\r\nimport MainDashboard from './pages/main-dashboard';\r\nimport InventoryManagement from './pages/inventory-management';\r\nimport LoginPage from './pages/login';\r\nimport FinancialManagement from './pages/financial-management';\r\nimport PersonnelManagement from './pages/personnel-management';\r\nimport ClientManagement from './pages/client-management';\r\nimport WorkOrderProcessing from './pages/work-order-processing';\r\nimport WorkshopOperationsManagement from './pages/workshop-operations-management';\r\nimport WorkshopOperationsCenter from './pages/workshop-operations-center';\r\nimport SalesOpportunityManagement from './pages/sales-opportunity-management';\r\nimport QuotationDevelopmentCenter from './pages/quotation-development-center';\r\nimport SalesExecutionMonitoring from './pages/sales-execution-monitoring';\r\nimport ProjectAbonosManagement from './pages/project-abonos-management';\r\nimport UserManagement from './pages/user-management';\r\n\r\nconst Routes = () => {\r\n  // Componente para redirigir dashboard al inicio del rol\r\n  const DashboardRedirect = () => {\r\n    const userRole = localStorage.getItem('userRole');\r\n    const defaultPath = getDefaultPath(userRole);\r\n    return <Navigate to={defaultPath} replace />;\r\n  };\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <ButtonHandlersProvider>\r\n        <ScrollToTop />\r\n        <RouterRoutes>\r\n          {/* Public Route: Login */}\r\n          <Route path=\"/login\" element={<LoginPage />} />\r\n\r\n          {/* Redirigir la ra铆z a login si no est谩 autenticado */}\r\n          <Route path=\"/\" element={<LoginPage />} />\r\n          \r\n          {/* Redirigir dashboard al inicio del rol actual */}\r\n          <Route path=\"/dashboard\" element={<DashboardRedirect />} />\r\n          \r\n            <Route \r\n              path=\"/proyectos\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/proyectos\">\r\n                  <ProjectManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/galeria-proyecto/:projectId\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/galeria-proyecto\">\r\n                  <ProjectDetailGallery />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/visor-galeria/:projectId\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/visor-galeria\">\r\n                  <ProjectGalleryViewer />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/documentacion-proyectos\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/documentacion-proyectos\">\r\n                  <ProjectDocumentationCenter />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/flujo-proyecto\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/flujo-proyecto\">\r\n                  <ProjectWorkflowManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/constructor-cotizaciones\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/constructor-cotizaciones\">\r\n                  <QuotationBuilder />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/inventario\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/inventario\">\r\n                  <InventoryManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/finanzas\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/finanzas\">\r\n                  <FinancialManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/personal\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/personal\">\r\n                  <PersonnelManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/clientes\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/clientes\">\r\n                  <ClientManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/operaciones\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/operaciones\">\r\n                  <WorkOrderProcessing />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/operaciones-taller\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/operaciones-taller\">\r\n                  <WorkshopOperationsManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/centro-operaciones-taller\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/centro-operaciones-taller\">\r\n                  <WorkshopOperationsCenter />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/oportunidades\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/oportunidades\">\r\n                  <SalesOpportunityManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/usuarios\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/usuarios\">\r\n                  <UserManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/cotizaciones\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/cotizaciones\">\r\n                  <QuotationDevelopmentCenter />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/abonos\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/abonos\">\r\n                  <ProjectAbonosManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/monitoreo-ventas\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/monitoreo-ventas\">\r\n                  <SalesExecutionMonitoring />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            \r\n            {/* Catch-all route for 404 */}\r\n            <Route path=\"*\" element={<NotFound />} />\r\n          </RouterRoutes>\r\n        </ButtonHandlersProvider>\r\n      </ErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default Routes;","import React from 'react';\r\nimport { X, CheckCircle, AlertCircle, AlertTriangle, Info } from 'lucide-react';\r\nimport { useNotifications, NotificationTypes } from '../context/NotificationContext.jsx';\r\nimport './NotificationContainer.css';\r\n\r\n/**\r\n * Componente individual de notificaci贸n\r\n */\r\nconst NotificationItem = ({ notification, onRemove }) => {\r\n  const getIcon = () => {\r\n    switch (notification.type) {\r\n      case NotificationTypes.SUCCESS:\r\n        return <CheckCircle className=\"notification-icon success\" />;\r\n      case NotificationTypes.ERROR:\r\n        return <AlertCircle className=\"notification-icon error\" />;\r\n      case NotificationTypes.WARNING:\r\n        return <AlertTriangle className=\"notification-icon warning\" />;\r\n      case NotificationTypes.INFO:\r\n      default:\r\n        return <Info className=\"notification-icon info\" />;\r\n    }\r\n  };\r\n\r\n  const getTypeClass = () => {\r\n    return `notification-item notification-${notification.type}`;\r\n  };\r\n\r\n  const handleClose = () => {\r\n    onRemove(notification.id);\r\n  };\r\n\r\n  const handleActionClick = () => {\r\n    if (notification.action && notification.action.onClick) {\r\n      notification.action.onClick();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={getTypeClass()}>\r\n      <div className=\"notification-content\">\r\n        <div className=\"notification-icon-container\">\r\n          {getIcon()}\r\n        </div>\r\n        \r\n        <div className=\"notification-message\">\r\n          <p>{notification.message}</p>\r\n          \r\n          {notification.action && (\r\n            <button \r\n              className=\"notification-action\"\r\n              onClick={handleActionClick}\r\n            >\r\n              {notification.action.label}\r\n            </button>\r\n          )}\r\n        </div>\r\n        \r\n        <button \r\n          className=\"notification-close\"\r\n          onClick={handleClose}\r\n          aria-label=\"Cerrar notificaci贸n\"\r\n        >\r\n          <X size={16} />\r\n        </button>\r\n      </div>\r\n      \r\n      {!notification.persistent && notification.duration > 0 && (\r\n        <div \r\n          className=\"notification-progress\"\r\n          style={{\r\n            animationDuration: `${notification.duration}ms`\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Contenedor principal de notificaciones\r\n */\r\nconst NotificationContainer = () => {\r\n  const { notifications, removeNotification } = useNotifications();\r\n\r\n  if (notifications.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"notification-container\">\r\n      {notifications.map((notification) => (\r\n        <NotificationItem\r\n          key={notification.id}\r\n          notification={notification}\r\n          onRemove={removeNotification}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationContainer;\r\n","\r\n\r\nimport React from \"react\";\r\nimport Routes from \"./Routes\";\r\nimport { AuthProvider } from \"./hooks/useAuth.jsx\";\r\n\r\nimport { NotificationProvider } from \"./context/NotificationContext.jsx\";\r\nimport NotificationContainer from \"./ui/NotificationContainer\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { ConfirmDialogProvider } from \"./ui/ConfirmDialogContext.jsx\";\r\nimport \"./styles/index.css\";\r\nimport \"./styles/tailwind.css\";\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <NotificationProvider>\r\n      <NotificationContainer />\r\n      <ConfirmDialogProvider>\r\n        <BrowserRouter>\r\n          <AuthProvider>\r\n            <Routes />\r\n          </AuthProvider>\r\n        </BrowserRouter>\r\n      </ConfirmDialogProvider>\r\n    </NotificationProvider>\r\n  );\r\n}\r\n\r\nexport default App;","import React from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\nimport App from \"./App\";\r\nimport \"./styles/tailwind.css\";\r\nimport \"./styles/index.css\";\r\n\r\n\r\n\r\nconst container = document.getElementById(\"root\");\r\nconst root = createRoot(container);\r\nroot.render(<App />);\r\n"],"names":["ScrollToTop","pathname","useLocation","useEffect","Icon","name","size","color","className","strokeWidth","props","IconComponent","_a","LucideIcons","jsx","HelpCircle","ErrorBoundary","React","error","errorInfo","jsxs","_b","NotificationContext","createContext","NotificationTypes","NotificationProvider","children","notifications","setNotifications","useState","addNotification","useCallback","message","type","options","notification","prev","n","removeNotification","id","clearNotifications","clearNotificationsByType","showSuccess","showError","showWarning","showInfo","showHttpError","context","showOperationSuccess","operation","resource","messages","showConfirm","onConfirm","onCancel","action","value","useNotifications","useContext","useErrorHandler","handleError","handleSuccess","useNotification","ConfirmDialog","open","title","confirmText","cancelText","ConfirmDialogContext","useConfirmDialog","ConfirmDialogProvider","dialog","setDialog","resolve","define_import_meta_env_default","useTokenExpiration","token","onTokenRenewed","timeoutRef","useRef","isRenewingRef","decoded","jwtDecode","logout","expMs","now","msBeforeExpiry","handleSessionExtension","notifyMs","totalDurationMs","newToken","renewToken","decodedNew","expDate","AuthService","email","password","response","httpService","userData","newPassword","currentPassword","profileData","authService","AuthContext","AuthProvider","user","setUser","isLoading","setIsLoading","isAuthenticated","setIsAuthenticated","navigate","useNavigate","expiresAt","userRole","userEmail","tokenExpired","tokenExpTime","login","result","tokenDurationMs","tokenDurationMin","prevUser","role","roles","useAuth","ProtectedRoute","requiredPath","location","hasPermission","defaultPath","getDefaultPath","ButtonHandlersContext","ButtonHandlersProvider","path","data","filename","headers","csvContent","rows","row","blob","url","link","_c","_d","_e","callback","item","onDelete","itemName","onEdit","promptText","newValue","onApprove","onReject","cn","inputs","twMerge","clsx","buttonVariants","cva","Button","variant","asChild","loading","iconName","iconPosition","iconSize","fullWidth","disabled","ref","Comp","Slot","iconSizeMap","calculatedIconSize","LoadingSpinner","renderIcon","renderFallbackButton","child","content","Fragment","clonedChild","NotFound","handleGoHome","Input","label","description","required","inputId","safeValue","baseInputClasses","Image","src","alt","e","Sidebar","isCollapsed","onToggle","searchQuery","setSearchQuery","searchResults","setSearchResults","showSearchResults","setShowSearchResults","navigationItems","setNavigationItems","allowedItems","getAllowedNavigationItems","expandedItems","setExpandedItems","toggleExpanded","handleNavigation","handleLogout","renderNavigationItem","level","isActive","hasChildren","isExpanded","handleItemClick","AppImage","Header","onMenuToggle","isMenuOpen","userMenuOpen","setUserMenuOpen","Breadcrumb","customItems","getDefaultPathForRole","ROLE_PERMISSIONS","pathMapping","breadcrumbs","segment","isOnDefaultPath","currentPath","currentPage","b","handleBack","index","onClick","X","ChevronUp","ChevronDown","Download","baseClasses","variantClasses","sizeClasses","disabledClasses","placeholder","onChange","Select","option","ProjectFilters","onFiltersChange","totalProjects","filteredProjects","onExport","filters","setFilters","setIsExpanded","statusOptions","departmentOptions","dateRangeOptions","clientTypeOptions","priorityOptions","handleFilterChange","key","newFilters","clearAllFilters","cleared","hasActiveFilters","v","handleExportClick","Search","displayValue","opt","applyProjectFilters","projects","filtered","searchTerm","project","_g","_f","raw","target","today","startDate","weekAgo","quarter","minBudget","maxBudget","filterStartDate","projectStartDate","filterEndDate","projectEndDate","clientService","DEFAULT_USD_RATE","PAGE_SIZE_OPTIONS","safeUUID","parseISODate","d","formatCurrency","formatUSD","formatDate","x","getPriorityColor","p","STATUS_OPTIONS","statusKeyFromAny","getStatusColorByKey","resolveProjectStatus","k1","lbl1","r","k2","found","o","rawTxt","txt","formatLocation","loc","direccion","municipio","estado","address","city","state","parts","mapProjectDocStrict","doc","code","clienteNode","client","budget","equiposUSD","mxn","rate","divisor","s","normalizeClientRecord","c","contact","ProjectTable","onProjectSelect","onStatusUpdate","onBulkAction","onImageUpload","isUploadingImage","localDocs","setLocalDocs","remoteDocs","setRemoteDocs","setLoading","errorMsg","setErrorMsg","sortConfig","setSortConfig","selectedProjects","setSelectedProjects","expandedRows","setExpandedRows","clientCache","setClientCache","clientsLoaded","setClientsLoaded","setCurrentPage","pageSize","setPageSize","mounted","res","proyectoService","list","map","baseSourceDocs","useMemo","normalizedProjects","handleSort","direction","sortedProjects","a","aValue","bValue","at","bt","totalItems","totalPages","startIndex","endIndex","pageItems","handleChangePageSize","goToPage","prevPage","nextPage","getPossibleClientId","resolveClientName","cid","resolveClientEmailOrContact","hit","handleSelectProject","handleSelectAll","pageIds","allSelected","toggleRowExpansion","usingLocalShadow","handleDelete","doRemove","nombre","prevLocal","prevRemote","newTotal","newTotalPages","cp","handleBulkDelete","toDelete","doRemoveBulk","ids","nameToShow","emailToShow","statusUI","person","idx","defaultValue","multiple","searchable","clearable","onOpenChange","isOpen","setIsOpen","setSearchTerm","selectId","filteredOptions","getSelectedDisplay","selectedOptions","selectedOption","handleToggle","newIsOpen","handleOptionSelect","updatedValue","handleClear","handleSearchChange","isSelected","optionValue","hasValue","k","Check","personService","payload","department","empleadoId","usePerson","persons","setPersons","departmentPersons","setDepartmentPersons","getPersonsByDepartment","setError","err","estadoService","useEstados","estados","setEstados","useMunicipios","municipios","setMunicipios","projectTypes","projectStatusOptions","personnelOptionsFallback","mapPriorityToEs","formatWithCommas","decimals","num","unformatNumber","clean","rateSafe","CreateProjectModal","onClose","onSubmit","isSubmitting","setIsSubmitting","errors","setErrors","getPersons","formData","setFormData","isEquipmentInUSD","setIsEquipmentInUSD","exchangeRate","setExchangeRate","uiEquipmentUSD","setUiEquipmentUSD","loadingFx","setLoadingFx","fxError","setFxError","clientOptions","setClientOptions","loadingClients","setLoadingClients","loadingEstados","errorEstados","loadingMunicipios","errorMunicipios","resp","opts","fetchedPersonsRef","controller","personnelOptionsFinal","built","puesto","etiqueta","seen","dedup","handleInputChange","usd","handleBudgetChange","rawValue","cleanedNumber","fetchUsdMxnRate","mxnInfo","msg","toggleEquipmentUSD","checked","validate","buildPayloadForBackend","equipoDolares","handleSubmit","totalMXN","m","fold","KW","toCanon","getCanonFromObject","obj","candidates","canon","safeDate","fmtDateHuman","fmtDateIso","startOfWeekMonday","out","diffToMon","startOfMonth","startOfNextMonth","startOfYear","y","startOfNextYear","startOfQuarter","q","startOfNextQuarter","inRange","date","ini","fin","getId","getCode","getName","buildClientsMapFromCatalog","catalog","arr","it","getClientDetails","clientsMap","byName","_h","_i","_j","byEmail","_k","_l","_m","_n","byContact","_p","_o","_r","_q","_s","_t","cli","byId","_u","getStart","getEnd","getProg","getCanon","getBudgetTotal","statusColor","statusPill","ProjectTimeline","onNewProject","clientsCatalog","setRows","setErr","setClientsMap","period","setPeriod","PERIODS","ALLOWED","showCreate","setShowCreate","fetchRows","forceRemote","range","filteredRows","aT","bT","startsIn","endsIn","assignedPeople","people","clientDet","proj","personName","entry","info","peoplePage","setPeoplePage","PEOPLE_PAGE_SIZE","peopleTotalPages","peopleSlice","start","canPrevPeople","canNextPeople","personModal","setPersonModal","openPersonModal","closePersonModal","openCreate","closeCreate","handleNewProjectClick","handleCreated","payloadSentOrCreated","created","optimistic","SEP","handleExportReport","rowsCsv","inicio","prior","prog","fileName","end","pr","i","ProjectQuotations","selectedProject","setSelectedProject","getStatusColor","norm","canonicalizeStatus","table","synonyms","w","canonicalizeDepartment","canonicalizeClientType","canonicalizePriority","generateProjectQuotations","mid","handleCreateQuotation","projectsForFilter","pick","filteredForFilter","tableKey","quotations","hasResults","handleExportVisible","escape","csv","toNumber","val","cleaned","formatCurrencyMXN","amount","safePercent","part","total","t","normalizeStatus","rawStatus","normalizePriority","rawPriority","extractBudgetMXN","rawProject","rawAmount","normalizeProject","ProjectStats","refreshKey","projectsNorm","setProjectsNorm","apiStats","setApiStats","errMsg","setErrMsg","warnMsg","setWarnMsg","statsResp","statsPayload","proyectosResp","proyectosRaw","normalized","fallbackLocalStats","completedList","inProgressList","onHoldList","planningList","urgentList","totalBudget","sum","completedBudget","mergedStats","totalProyectos","totalPresupuesto","byEstado","byPrioridad","safeCount","safeBudget","inProgressCount","completedCount","apiUrgentCount","finalUrgent","finalOnHold","statCards","_","stat","estadoOptionsBackend","ALLOWED_ESTADOS","UI_ESTADO_KEY","uiEstadoCache","toNumberOrUndef","asStr","fallback","asArr","EditProjectModal","serverProject","setServerProject","selectedEstadoCode","setSelectedEstadoCode","cron","rawUbicacion","trimmed","parsed","ubicacion","estadoUi","apiResp","personnelOptions","fromPersons","existing","vals","acc","handle","handleUbicacion","field","errorKey","handleP","toggleUSD","ub","buildPayloadForUpdate","pres","clientLabel","extractList","unwrap","useProyecto","proyectos","setProyectos","loadingList","setLoadingList","loadingSave","setLoadingSave","loadingDelete","setLoadingDelete","loadingCurrency","setLoadingCurrency","fetchedOnceRef","proyectosLenRef","getProyectos","force","signal","getProyectoById","createProyecto","refresh","updateProyecto","updated","deleteProyecto","getCachedStats","getCurrencyRates","base","currencies","getCurrencyRatesMap","changed","def","backendToUiDefault","apiEstado","mapUiToBackend","uiEstado","ProjectManagement","useProyect","setFilteredProjects","activeView","setActiveView","isCreateModalOpen","setIsCreateModalOpen","isEditModalOpen","setIsEditModalOpen","sidebarCollapsed","setSidebarCollapsed","headerMenuOpen","setHeaderMenuOpen","canonicalEstado","handleFiltersChange","handleEditProject","handleStatusUpdate","projectId","newStatusUi","estadoBackend","handleUpdateProject","handleExportFromFilters","ImageUploadPanel","onImagesUploaded","isUploading","dragActive","setDragActive","selectedFiles","setSelectedFiles","previewImages","setPreviewImages","fileInputRef","handleFileSelect","files","validFiles","file","validTypes","reader","handleDrag","handleDrop","handleFileInput","updateImageMetadata","imageId","img","removeImage","handleUpload","imagesToUpload","categoryOptions","ImageLightbox","image","images","onNavigate","onUpdate","currentIndex","setCurrentIndex","isEditing","setIsEditing","editForm","setEditForm","handleKeyPress","navigatePrevious","navigateNext","nextIndex","prevIndex","handleSaveEdit","timestamp","getCategoryLabel","category","ImageGallery","onDeleteImage","onUpdateImage","projectInfo","selectedCategory","setSelectedCategory","sortBy","setSortBy","lightboxImage","setLightboxImage","viewMode","setViewMode","sortOptions","viewModeOptions","filteredImages","matchesCategory","matchesSearch","getCategoryColor","colors","handleDeleteImage","exportGallery","galleryData","mode","ProjectInfoPanel","status","priority","order","ProjectDetailGallery","useParams","setProject","setImages","activeTab","setActiveTab","setIsUploading","mockProjects","mockImages","foundProject","projectImages","handleImagesUploaded","newImages","uploadedImages","handleUpdateImage","updates","tabs","breadcrumbItems","tab","selectedImages","onImageSelect","onImageClick","getPhaseColor","phase","dateString","tag","tagIndex","FilterToolbar","onFilterChange","totalImages","selectedCount","onSelectAll","clearFilters","emptyFilters","phaseOptions","currentImage","slideshowMode","onToggleSlideshow","zoomLevel","setZoomLevel","panOffset","setPanOffset","isDragging","setIsDragging","dragStart","setDragStart","showMetadata","setShowMetadata","slideshowInterval","setSlideshowInterval","interval","handleNext","handleKeyDown","handlePrevious","handleZoomIn","handleZoomOut","handleZoomReset","nextImage","resetZoom","prevImage","handleMouseDown","handleMouseMove","handleMouseUp","handleDownload","BulkActions","onBulkDownload","onBulkDelete","onClearSelection","newTag","ProjectInfo","imageCount","ProjectGalleryViewer","setFilteredImages","setSelectedImages","setCurrentImage","isLightboxOpen","setIsLightboxOpen","isUploadingImages","setIsUploadingImages","setSlideshowMode","handleImageSelect","handleImageClick","handleImageUpload","fileInput","event","newImage","handleBulkDownload","selectedImageData","startSlideshow","DocumentTree","onDocumentUpload","expandedFolders","setExpandedFolders","dragOver","setDragOver","documentFolders","toggleFolder","folderId","handleDragOver","handleDragLeave","document","getFileIcon","getFileTypeColor","folder","WorkflowStatus","workflowSteps","currentStep","onStepUpdate","showDecisionModal","setShowDecisionModal","decisionStep","setDecisionStep","decisionPoints","getStepStatus","stepId","step","stepIndex","handleStepClick","handleDecision","decision","nextStep","getDecisionLabels","getStepNotes","isDecisionPoint","QuotationWorkflow","quotationData","setQuotationData","handleQuotationUpdate","calculateTotal","installation","travel","personnel","saveQuotation","sendQuotation","ProgressTracking","onPhotoUpload","selectedPhoto","setSelectedPhoto","showUploadModal","setShowUploadModal","progressPhotos","pendingPayments","completedMilestones","milestones","handlePhotoUpload","handlePhotoCapture","newPhoto","photo","milestone","isCompleted","payment","DocumentValidation","onValidationComplete","checklist","setChecklist","validationItems","categories","handleChecklistChange","itemId","stats","completed","requiredCompleted","isProjectReady","generateFinalPackage","categoryItems","categoryCompleted","ProjectDocumentationCenter","setProjects","workflowStep","setWorkflowStep","viewOptions","handleProjectSelect","handleWorkflowStepUpdate","newStep","handleDocumentUpload","ProjectCard","onSelect","onStageTransition","getPriorityLabel","getPriorityBadgeColor","DocumentUploadPanel","onUpload","selectedFile","setSelectedFile","documentType","setDocumentType","documentTypes","QuotationPanel","quotation","setQuotation","isSaving","setIsSaving","handleSave","getAdvanceAmount","getProgressAmount","ValidationPanel","validationNotes","setValidationNotes","handleSubmitForValidation","validation","handleApprove","handleReject","_v","_w","_x","_y","_z","ProjectWorkflowManagement","activeStage","setActiveStage","showControls","setShowControls","workflowStages","handleStageTransition","newStage","handleValidationSubmit","validationData","getProjectsByStage","stageId","stage","QuotationForm","onCalculationUpdate","onValidationSubmit","calculations","setCalculations","isCalculating","setIsCalculating","handleCalculationChange","updatedCalculations","handleAutoCalculate","autoCalculations","QuotationPreview","onVersionCreate","currentDate","material","_A","_C","_B","MaterialIdentification","onMaterialUpdate","materials","setMaterials","newMaterial","setNewMaterial","isAnalyzing","setIsAnalyzing","handleAddMaterial","updatedMaterials","handleMaterialChange","updatedMaterial","handleRemoveMaterial","handleAutoIdentify","autoMaterials","getTotalValue","CommunicationPanel","onSend","isSending","communicationMethod","setCommunicationMethod","setMessage","adjustmentNotes","setAdjustmentNotes","showAdjustments","setShowAdjustments","handleSend","generateDefaultMessage","defaultMessages","VersionControl","onVersionSelect","versionHistory","getStatusLabel","version","QuotationBuilder","currentQuotation","setCurrentQuotation","setQuotations","activeStep","setActiveStep","mockQuotations","updatedData","handleMaterialUpdate","subtotal","handleCalculationUpdate","handleSaveQuotation","updatedQuotation","handleCommunicationSend","method","steps","OrderDetailsModal","handleDownloadPDF","jsPDF","getPaymentTermLabel","tableColumns","tableRows","autoTable","col","finalY","term","termLower","ordenCompraService","numeroOrden","InventoryTable","items","onViewDetails","onUpdateStock","onCreatePO","onAddItem","onGenerateReport","sortField","setSortField","sortDirection","setSortDirection","sortedItems","paginatedItems","getStockStatus","current","reorderPoint","SortIcon","stockStatus","InventoryFilters","onClearFilters","filteredItems","inventoryItems","supplierOptions","suppliers","supplier","locationOptions","locations","StockAlerts","alerts","onDismissAlert","getAlertIcon","getAlertColor","getAlertBgColor","alert","PurchaseOrderPanel","orders","onViewOrder","onApproveOrder","onCreateOrder","onDeleteOrder","orderToDelete","setOrderToDelete","handleDeleteClick","onDownloadOrder","gray","formatText","text","leftX","rightX","baseY","maxWidthNotas","notaTexto","notaLineas","notaAltura","pagoY","infoPagoY","metodoPagoFormateado","prioridadFormateada","maxWidthComentarios","comentarioTexto","comentarioLineas","comentarioAltura","tableY","tableHead","tableBody","approvalSectionY","lineY","leftXLine","rightXLine","filteredOrders","InventoryStats","formatNumber","number","getChangeColor","change","getChangeIcon","firstItem","articuloService","useInventory","articulos","setArticulos","getArticulos","possibleArrayKeys","foundArray","NewItemModal","createArticulo","units","validateForm","newErrors","nuevoArticulo","itemForTable","handleReset","handleClose","cat","unit","ItemDetailsModal","EditItemModal","onUpdateSuccess","updateArticulo","CreatePOModal","initialItem","lowStockItems","setStep","selectedItems","setSelectedItems","orderDetails","setOrderDetails","paymentTermsOptions","orderQty","handleNextStep","handlePreviousStep","handleItemSelectionChange","selected","handleQuantityChange","newQty","qty","handlePriceChange","newPrice","price","handleDetailChange","orderData","timer","selectedIds","itemsToAdd","selectedItem","TIMEOUT","requisiService","timeoutId","query","useRequisi","requisitions","setRequisitions","requisitionData","updatedRequisition","operacService","useOperac","oportunities","setOportunities","getOportunities","RequisitionModal","requisition","onSave","createRequisition","updateRequisition","newItem","setNewItem","newManualItem","setNewManualItem","unitOptions","urgencyOptions","handleNewItemChange","handleNewManualItemChange","handleAddItem","handleAddManualItem","handleRemoveItem","fecha","formattedDate","materiales","materialesManuales","op","art","useOrder","ordenes","setOrdenes","getOrdenes","day","month","year","InventoryManagement","inventoryLoading","orderLoading","createOrden","updateOrden","requisitionsLoading","getRequisitions","deleteRequisition","mobileMenuOpen","setMobileMenuOpen","showNewItemModal","setShowNewItemModal","showItemDetailsModal","setShowItemDetailsModal","showEditItemModal","setShowEditItemModal","showCreatePOModal","setShowCreatePOModal","setSelectedItem","isInitialLoading","setIsInitialLoading","showOrderDetailsModal","setShowOrderDetailsModal","selectedOrder","setSelectedOrder","isUpdating","setIsUpdating","showItemSelectorModal","setShowItemSelectorModal","articulo","stockAlerts","currentStock","itemCode","supplierName","inventoryStats","totalValue","unitCost","outOfStockItems","categoryGroups","handleClearFilters","handleViewDetails","handleUpdateStock","inventoryItem","invItem","handleCreatePO","handleCloseItemDetailsModal","handleCloseEditItemModal","handleClosePOModal","handleSubmitPO","handleUpdateSuccess","handleDismissAlert","alertId","selectedRequisition","setSelectedRequisition","showRequisitionModal","setShowRequisitionModal","handleEditRequisition","req","reqForEdit","handleSaveRequisition","editedReq","reqToUpdate","handleViewOrder","handleCloseOrderDetails","handleDownloadOrder","handleDeleteOrder","handleApproveOrder","handleCreateOrder","handleExport","escapeCSV","csvHeaders","csvRows","csvWithBOM","h","handleImportInventory","input","sampleItems","handleAddNewItem","handleOpenNewItemModal","handleCloseNewItemModal","viewTabs","isMounted","BOM","CompanyBranding","Checkbox","indeterminate","checkboxId","Minus","CheckboxGroup","LoginForm","redirect","CredentialsHelper","mockCredentials","cred","SecurityFeatures","securityFeatures","complianceItems","feature","LoginPage","FilterGastos","totalCount","filteredCount","FilterControls","onReset","showAdvanced","setShowAdvanced","projectOptions","next","resetFilters","getActiveFiltersCount","finanzasService","PaymentAuthorizationModal","expense","onAuthorize","authData","setAuthData","isDeleting","setIsDeleting","paymentMethods","useFinanzas","finanzas","setFinanzas","targetId","f","dd","mm","yyyy","HH","MM","getExpenseStatusColor","statusValue","normId","normCode","getDocKey","mapGastoDocWithProjects","projectById","projectByCode","hhmm","proyectoNode","projectIdRaw","projectCodeRaw","projectName","projectCode","pid","pcode","requestedBy","startOfToday","endOfToday","addDays","endOfMonth","endOfYear","getQuarterRange","ExpenseTable","externalFilters","remoteRows","setRemoteRows","setSelectedIds","showAuthModal","setShowAuthModal","selectedExpense","setSelectedExpense","deleteGasto","alive","handler","ev","keyNew","byCode","codigo","ncode","applyFilters","dep","sta","min","max","rangeStart","rangeEnd","dow","rowSta","pname","amt","sortedRows","aTime","bTime","an","bn","paginatedRows","toggleOne","toggleAll","handleOpenView","handleAuthorizePayment","authorizationLevel","approverComments","paymentMethod","scheduledDate","requiresAdditionalApproval","expenseId","_id","handleDeleteExpense","snapshot","FinancialSummaryWidget","summaryData","COLORS","getVarianceColor","variance","getVarianceIcon","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar","PieChart","Pie","Cell","ReceiptManagementPanel","receipts","onCategorize","selectedReceipt","setSelectedReceipt","uploadProgress","setUploadProgress","filterCategory","setFilterCategory","handleFileUpload","progress","newReceipt","handleCategorize","receiptId","formatFileSize","bytes","sizes","filteredReceipts","receipt","NewExpenseModal","createGasto","loadingFinanzas","loadingProyectos","priorities","departmentBudgets","handleProjectChange","handleAmountChange","amountNumber","newExpense","isBusy","ModalGestionCompra","onDownload","isViewMode","gastosService","useGastos","getGastos","updateGasto","approveGasto","matchesEstado","GastosTable","selectedOrden","setSelectedOrden","orden","adaptedExpense","filteredBySearch","search","proveedor","fechaDesde","fechaHasta","matchSearch","matchCodigo","matchProveedor","fechaOrden","matchFechaDesde","matchFechaHasta","handleAuthorize","isRejection","FinanzasManagement","expenses","setExpenses","showNewExpenseModal","setShowNewExpenseModal","handleResetFilters","handleViewExpense","handleAddNewExpense","createdExpense","ExpenseTrackingTable","PersonnelTable","onViewProfile","onEditPersonnel","onAssignPPE","dataSource","sortedPersonnel","sorted","aVal","bVal","paginatedPersonnel","getStatusBadge","config","getComplianceBadge","SortableHeader","sortKey","emp","onExportData","complianceOptions","positionOptions","ComplianceDashboard","complianceData","onScheduleTraining","getStatusBg","ComplianceCard","icon","PersonnelModal","employee","openedFromEPP","localError","setLocalError","createPerson","updatePersonByEmpleadoId","isEPPOnly","medicalStudies","ppe","emergencyContact","medicalStatusOptions","relationshipOptions","parent","handlePPEChange","PersonnelManagement","selectedEmployee","setSelectedEmployee","modalMode","setModalMode","isModalOpen","setIsModalOpen","initialStep","setInitialStep","setOpenedFromEPP","filteredPersonnel","matchDept","matchStatus","matchPosition","matchHireDateFrom","matchHireDateTo","handleViewProfile","handleEditPersonnel","handleCreatePersonnel","handleAssignPPE","handleSavePersonnel","personnelData","handleExportData","dataToExport","header","handleViewComplianceDetails","handleScheduleTraining","handleSidebarToggle","handleMobileMenuToggle","mockComplianceData","useClient","success","setSuccess","clients","setClients","loadingRef","hasLoadedRef","clientsRef","getClients","createClient","clientData","prevClients","newClients","editClient","communicationService","cotizacionId","clienteId","oportunidadId","useCommunication","getComunicacionByCotizacionId","commData","ClientCard","onEditClient","onViewProjects","onViewContracts","capitalize","str","getHealthColor","health","ClientTable","sortedClients","paginatedClients","ClientFilters","industryOptions","ClientCommunicationPanel","createCommunication","getComunicacionesByCliente","showNewCommForm","setShowNewCommForm","communicationHistory","setCommunicationHistory","loadingHistory","setLoadingHistory","clientId","handleAddCommunication","getUrgencyColor","urgency","getTypeIcon","getTypeIconBg","comm","DocumentStatus","documents","onUploadDocument","onViewDocument","onDownloadDocument","getDocumentIcon","isExpiringSoon","expirationDate","diffTime","diffDays","isExpired","ContractAlerts","contracts","onViewContract","onRenewContract","onScheduleRenewal","getAlertType","contract","getAlertMessage","alertContracts","alertType","NewClientModal","initialData","additionalContacts","setAdditionalContacts","municipiosEmpresa","loadingMunicipiosEmpresa","errorMunicipiosEmpresa","municipiosDireccion","loadingMunicipiosDireccion","errorMunicipiosDireccion","extraContacts","industries","relationshipHealthOptions","cleanValue","addAdditionalContact","removeAdditionalContact","newContacts","handleAdditionalContactChange","contactosCompletos","contactos","industry","ClientManagement","selectedClient","setSelectedClient","showSidebar","setShowSidebar","showNewClientModal","setShowNewClientModal","clientCommunications","setClientCommunications","mockDocuments","mockContracts","filteredClients","setFilteredClients","empresa","contacto","relacion","estadoEmpresa","municipioEmpresa","estadoDireccion","municipioDireccion","rfc","handleExportClients","contactosAdicionales","loadClientCommunications","mappedComms","editModalState","setEditModalState","handleEditClient","handleSubmitEditClient","updatedClient","handleViewProjects","handleViewContracts","handleAddClient","handleSubmitNewClient","handleUploadDocument","handleViewDocument","handleDownloadDocument","handleViewContract","handleRenewContract","handleScheduleRenewal","WorkOrderModal","workOrder","onSaveSuccess","createWorkOrder","updateWorkOrder","clientProjects","setClientProjects","errorClients","assignClient","setAssignClient","normalize","selectedProjectId","match","nombreProyecto","ppeOptions","proyectoNombreFinal","proyectoIdFinal","savedOrder","datos","WorkOrderTable","workOrders","onAssignTechnician","onEditOrder","localRequisitions","setLocalRequisitions","deletedOrderIds","setDeletedOrderIds","stored","sortedOrders","paginatedData","orderId","newExpanded","reqForOrder","reqIndex","materialesInventario","technicianOptions","clearedFilters","getNoResultsMessage","InventoryPanel","onCreatePurchaseOrder","onRequestMaterial","onCreateRequisition","loadingRequis","inventario","getInventario","loadingInventario","useInventario","displayedRequisitions","getStockStatusColor","getRequestStatusColor","request","updatedList","mappedReq","updatedReq","stock","puntoReorden","unidad","allMaterials","StatsCards","cards","card","WorkOrderProcessing","setWorkOrders","setFilteredOrders","setStats","isRequisitionModalOpen","setIsRequisitionModalOpen","mockWorkOrders","mockStats","dueDate","startOfWeek","endOfWeek","newStatus","updatedOrders","wo","handleSaveOrder","newOrder","handleCreateNewOrder","handleCreateNewRequisition","newRequisition","savedRequisition","newReq","fechaActual","startY","totalOrdenes","completadas","pendientes","enProceso","resumenTexto","prioridadOrden","prioridadA","prioridadB","tableColumn","tallerService","useOperacAlt","deleteWorkOrder","WorkflowBoard","onStatusChange","onOrderSelect","columns","getOrderKey","orderOrId","sourceOrders","normalizeOrder","ordenTrabajo","proyectoNombre","cliente","tecnicos","prioridad","maybeEstado","prioridadLabel","fechaLimite","_rawProg","estadoProgreso","statusRaw","normalizedOrders","getProgressColor","localProgress","setLocalProgress","localHidden","setLocalHidden","localCompleted","setLocalCompleted","localStatusOverrides","setLocalStatusOverrides","hasChanges","serverProgress","handleMoveOrder","orderKey","newProgress","column","priorityRank","visibleOrders","__idx","stableKey","reactKey","parentProgress","localProg","rawProgress","computedProgress","priorityKey","rawTech","tech","reception","totalReceived","totalRequired","totalPending","WorkflowControls","currentShift","totalOrders","workOrdersIds","onForceRemove","onRevertStatus","localMissingByOrder","isWorkingHours","resolvePriority","direct","low","formatProgress","percent","maybe","generateReport","receptionMaterials","computeDailyProgressDelta","entries","todays","en","before","cur","buildMaterials","received","margin","delta","techs","cursorY","normalizeNumericPercent","best","rawDate","fromSelected","techArray","names","MaterialReceptionPanel","onMaterialReception","propSelectedOrder","receptionData","setReceptionData","newIssue","setNewIssue","approvedMaterials","setApprovedMaterials","approvedSource","setApprovedSource","materialsReception","setMaterialsReception","orderMaterialsCache","setOrderMaterialsCache","TALLER_PREFIX","TALLER_RECEIVED_PREFIX","saveApprovedToTaller","source","loadApprovedFromTaller","saveReceptionToTaller","receptionPayload","loadReceptionFromTaller","normalizeMaterialsForCache","first","normalizeAndAggregate","initMaterialsReception","persisted","persistedEntry","setCacheAndPersist","initial","handleOrderSelect","computeApprovedMaterialsFromOrder","extractApprovedFromArray","updateCache","cached","approvedLocal","manualMapped","normalizeKey","onlyDigits","nor","nd","matchedReqs","nk","kd","mats","mapped","approvedFromReq","gresp","matches","po","articles","approvedFromGastos","loadMaterialsForAllOrders","incomingKey","currentKey","dbReception","localReception","existingReception","receivedValue","notesValue","issuesValue","handleAddIssue","handleMaterialReceivedChange","handleRemoveIssue","handleSubmitReception","dbPayload","cachedMaterials","issue","parseQuantity","normalizeItem","descripcion","exist","SafetyChecklistPanel","onSafetyComplete","onLocalMissingChange","missingPPE","setMissingPPE","customMissing","setCustomMissing","persistedState","setPersistedState","storageKeyFor","loadLocalState","saveLocalState","safetyItems","PPE_LABEL_MAP","getPPEValue","snake","missingList","possibles","lowerMissing","getRecordedMissing","PPE_FIELDS","initialChecklist","section","saved","mergedChecklist","mergedMissing","incomingId","currentId","itemKey","handleMarkAllVerified","sectionId","checklistUpdates","missingUpdates","applies","handleMissingToggle","handleAddCustomMissing","lastNotifiedRef","localMissingLabels","sec","uniqueLabels","labelsKey","getCompletionPercentage","requiredKeys","uniqueReq","checkedItems","isChecklistComplete","toSave","handleSubmitChecklist","recorded","localMissing","missing","completedFlag","primaryButtonLabel","requiredForSelected","recordedMissing","disabledForChecklist","ck","AttendancePanel","attendanceData","setAttendanceData","currentTime","setCurrentTime","mockPersonnel","formatTime","timeString","labels","handleCheckOut","personnelId","currentTimeStr","present","late","absent","QualityControlPanel","onQualityUpdate","qualityData","setQualityData","qualityChecks","initialChecks","handleCheckChange","checkKey","newPhotos","totalChecks","completedChecks","areAllChecksComplete","handleQualityDecision","handleSubmitQuality","ChangeOrderPanel","onChangeOrder","changeData","setChangeData","showHistory","setShowHistory","changeTypes","handleSubmitChange","getChangeTypeIcon","icons","getChangeTypeColor","WorkshopOperationsManagement","activePanel","setActivePanel","panelMissingByOrder","setPanelMissingByOrder","setCurrentShift","updateWorkOrderRemote","deleteWorkOrderRemote","handleOrderStatusChange","matched","backendId","doRemoteDelete","remotePayload","handleForceRemove","needle","statusLabels","mapToColumnId","getPreviousColumn","computeProgressForColumn","handleRevertStatus","orderRef","orderCandidates","refCandidates","oc","rc","prevCol","restoredProgress","handleMaterialReception","handleSafetyChecklist","handleQualityControl","qcData","handleChangeOrder","panelOptions","hasPPEFields","keys","safetyOrders","missingArray","totalActive","onStageUpdate","onSafetyChecklist","onManufacturingUpdate","onQualityControl","onEvidenceSubmission","onReportToProjects","onRequestToPurchases","stages","handleWorkOrderAction","renderWorkOrderCard","_D","_E","_F","_H","_G","_J","_I","_K","_L","_M","stageWorkOrders","materialPhotos","setMaterialPhotos","notes","setNotes","selectedMaterials","setSelectedMaterials","handleMaterialCheck","workOrderId","materialIndex","condition","updatedItems","allReceived","hasDefects","defectiveItems","missingItems","photoUrls","handleCompleteReception","completeItems","hasCompleteItems","onSafetyUpdate","checklistNotes","setChecklistNotes","handleChecklistUpdate","requiredItems","completedRequired","safetyItem","si","handleCompleteChecklist","checkedRequired","workOrderItem","isChecked","onAttendanceUpdate","attendanceList","setAttendanceList","handleCheckIn","technicianId","updateAttendanceStats","presentCount","getStatusIcon","getStatusText","presentTechnicians","absentTechnicians","lateTechnicians","technician","qualityPhotos","setQualityPhotos","inspectionNotes","setInspectionNotes","qualityCheckpoints","handleCheckpointUpdate","checkpointId","passed","updatedCheckpoints","checkpoint","qualityCheckpoint","qc","criticalCheckpoints","passedCritical","hasFailures","criticalComplete","failedCheckpoints","handleCompleteInspection","totalCritical","completedCritical","workOrderCheckpoint","EvidenceSubmissionPanel","evidencePhotos","setEvidencePhotos","setDocuments","submissionNotes","setSubmissionNotes","requiredDocuments","evidenceCategories","photoData","documentData","handleSubmitEvidence","requiredDocs","uploadedRequired","evidencePackage","removePhoto","photoId","removeDocument","docId","updatePhotoDescription","getPhotosByCategory","categoryPhotos","docType","uploadedDoc","changeType","setChangeType","changeDescription","setChangeDescription","changeReason","setChangeReason","impactAssessment","setImpactAssessment","setRequestedBy","handleSubmitChangeOrder","changeOrderData","getChangeTypeInfo","ct","allChangeOrders","allChanges","changeOrder","typeInfo","count","co","WorkshopStats","statsCards","ShiftManagementPanel","shiftStats","shiftTips","tip","WorkshopOperationsCenter","workshopStats","setWorkshopStats","handleStageUpdate","prevOrders","materialData","safetyData","handleManufacturingUpdate","manufacturingData","handleEvidenceSubmission","evidenceData","handleAttendanceUpdate","handleReportToProjects","reportType","reportData","handleRequestToPurchases","requestType","requestData","opportunity","onAddCommunication","getComunicacionesByOportunidad","newCommunication","setNewCommunication","localHistory","setLocalHistory","loadCommunications","formattedComms","NewOpportunityModal","onCreateOpportunity","errorProyectos","proyectosCliente","proyectoOptions","loadingSalesReps","errorSalesReps","prevClientIdRef","proyecto","ubicacionTexto","salesRepOptions","newOpportunity","API_BASE","opportunityService","useOpportunity","oportunidades","setOportunidades","fetchOportunidades","opp","crearOportunidad","actualizarOportunidad","SalesOpportunityManagement","opportunities","setOpportunities","selectedOpportunity","setSelectedOpportunity","showNewOpportunityModal","setShowNewOpportunityModal","salesStages","mockOpportunities","handleCreateOpportunity","handleNewOpportunityClick","opportunityId","handleOpportunitySelect","handleCommunicationAdd","communication","getOpportunitiesByStage","getDurationColor","days","quotationService","revisionData","idCotizacion","params","useQuotation","cotizacion","onAddRevision","crearConstructor","getConstructorByCotizacionId","fetchConstructor","newAssumption","setNewAssumption","setHasChanges","addAssumption","newAssumptions","removeAssumption","assumption","MaterialRiskChecklist","updateMaterialesYRiesgos","getCotizacionById","quotationLoading","riskAssessment","setRiskAssessment","newRiskFactor","setNewRiskFactor","showInventorySelector","setShowInventorySelector","inventorySearch","setInventorySearch","loadingMaterials","setLoadingMaterials","fetchMateriales","cotizacionCompleta","filteredInventoryItems","searchLower","handleSelectInventoryItem","addMaterial","removeMaterial","addRiskFactor","removeRiskFactor","dataToSave","calculateOverallRisk","highRiskMaterials","highRiskFactors","mediumRiskMaterials","mediumRiskFactors","getRiskColor","risk","totalCost","factor","getCurrentDate","quotationRef","setClientData","projectData","setProjectData","setCotizacionCompleta","proyectoData","setProyectoData","safeFindIdAndName","idFields","nameFields","cotizacionDetallada","dataContent","cotizacionConFechas","proyectoId","proyectoDetallado","normalizeList","clientsResp","proyectosList","clientsList","cotizacionData","infoBasica","clienteArr","proyectoArr","clientIdFromInfo","clientNameFromInfo","projectIdFromInfo","projectNameFromInfo","foundClient","contactoObj","resolvedCronograma","tiempo","fechaInicio","fechaFin","handleExportPDF","canvas","html2canvas","imgData","pdf","pdfWidth","pdfHeight","imgWidth","imgHeight","ratio","imgX","handlePrint","printStyles","style","styleElement","cost","ClientCommunication","createCotizacionCommunication","clientHistory","setClientHistory","historyRef","handleSendCommunication","idCliente","RevisionHistory","getRevision","setRevisionData","expandedAreas","setExpandedAreas","toggleArea","area","revisiones","revision","InternalReview","onSubmitReview","upsertRevision","areaTieneDatos","tieneComentarios","estaRevisado","tieneRevisor","filtrarAreasConDatos","areasRevision","areasFiltradas","sendRevisionToBackend","reviewData","fechaHoy","areaMap","tieneComentariosGenerales","overallComments","areaName","revisionPayload","setReviewData","setOverallComments","reviewAreas","handleAreaChange","handleSubmitForReview","updatedReview","handleApproveReview","approvedReview","totalAreas","reviewedAreas","formatearNumero","valor","partes","entero","decimal","NewQuotationModal","onCreateQuotation","setIsFromOpportunity","resetModalState","proyectoHook","clientHook","currentOpportunity","initialFormData","isFromOpportunity","getClientNameById","loadingEmployees","assignedToOptions","uniqueValue","intPart","decPart","createQuotation","proyectoSeleccionado","montoTotal","tiempoEjecucion","cronograma","ubicacionStr","PRIORIDADES_VALIDAS","prioridadValue","quotationPayload","QuotationDevelopmentCenter","selectedQuotation","setSelectedQuotation","isNewQuotationModalOpen","setIsNewQuotationModalOpen","newQuotation","getCotizaciones","mappedQuotation","handleQuotationSelect","quotationDetail","quotationId","quote","handleAddRevision","newRevision","handleSubmitInternalReview","handleClientCommunication","newComm","StartupTrackingPanel","startupData","setStartupData","handleCheckboxChange","handleConfirm","confirmationData","isAllRequirementsMet","ExecutionProgressPanel","progressUpdate","setProgressUpdate","selectedMilestone","setSelectedMilestone","handleMilestoneUpdate","milestoneId","updatedMilestones","totalMilestones","calculatedProgress","handleProgressUpdate","participantInput","setParticipantInput","handleAddParticipant","handleRemoveParticipant","participant","getCommunicationIcon","template","ChangeRequestPanel","onRequestChange","newChangeRequest","setNewChangeRequest","showForm","setShowForm","changeRequest","handleApproveChange","changeId","DeliveryManagementPanel","deliveryUpdate","setDeliveryUpdate","acceptanceChecklist","setAcceptanceChecklist","correctionRequest","setCorrectionRequest","updatedChecklist","handleDeliveryConfirmation","allChecked","deliveryData","handleCorrectionRequest","correctionData","getDeliveryTypeIcon","correction","TraceabilityPanel","newEvidence","setNewEvidence","newAgreement","setNewAgreement","showEvidenceForm","setShowEvidenceForm","showAgreementForm","setShowAgreementForm","handleAddEvidence","evidence","updatedTraceability","handleAddAgreement","agreement","getEvidenceIcon","getEvidenceColor","SalesExecutionMonitoring","executionPhases","handlePhaseTransition","newPhase","handleStartupConfirmation","progressData","handleChangeRequest","handleDeliveryUpdate","getProjectsByPhase","phaseId","paymentStatusOptions","normalizarEstado","obtenerEstadoNormalizado","statusLabel","normalizado","obtenerColorEstado","estadoCanonico","rawId","clienteEncontrado","endDate","priorityLabel","assignedPersonnel","resumen","totalAbonadoDB","totalRestanteDB","porcentajePagadoDB","onRegisterAbono","onViewAbonos","getPaidAmount","loadingAny","sourceDocs","aDate","bDate","estadoA","estadoB","pageProjects","maxSize","estadoInfo","colorClasses","fromDB","paid","remaining","BASE_PATH","abonoService","motivo","AbonosStats","getTotalPagado","refreshTrigger","totalAbonosDesdeAPI","setTotalAbonosDesdeAPI","cargandoTotalAbonos","setCargandoTotalAbonos","respuesta","getBudget","obtenerTotalRestante","presupuesto","pagado","totalRecaudado","pagados","enPausa","totalRestante","estadoLower","totalRecaudadoFinal","progresoGeneral","isUSDRef","abort","handleExchangeRateChange","detalle","useAbono","abonos","setAbonos","abonoSeleccionado","setAbonoSeleccionado","cacheParamsRef","abonosRef","createLock","getAbonos","sameParams","getAbonoById","getAbonosByProyecto","createAbono","fechaISO","dia","mes","a帽o","cleanPayload","editAbono","deleteAbono","aprobarAbono","rechazarAbono","formatearMoneda","cantidad","limitarRango","minimo","maximo","formatearFechaParaApi","fechaLocalStr","rellenar","formatearFechaISOUTC","formatearNumeroConSeparadores","numeroLimpio","parteEntera","parteDecimal","limpiarNumeroFormateado","ModalRegistroAbono","currentPaid","presupuestoProyecto","saldoInicial","idProyecto","setIdProyecto","fechaLocal","setFechaLocal","monto","setMonto","montoFormateado","setMontoFormateado","metodoPago","setMetodoPago","setDescripcion","descripcionMetodo","setDescripcionMetodo","referenciaPago","setReferenciaPago","notas","setNotas","infoProyecto","setInfoProyecto","totalAbonado","setTotalAbonado","saldo","setSaldo","presupuestoTotal","totalAbonadoData","nuevoSaldo","hoy","totalPagadoPrevio","progreso","manejarCambioMonto","valorLimpio","valorFinal","totalPagadoAcumulado","importeTotal","manejarEnvio","montoNum","excedente","creado","deFechaALocalInput","fechaObj","EditAbonoModal","abono","montoOriginal","setMontoOriginal","montoAbono","fechaAbono","metodoPagoAbono","descripcionAbono","descripcionMetodoAbono","referenciaPagoAbono","notasAbono","montoFinal","diferencia","abonoId","actualizado","formatearFecha","ViewAbonosModal","onAbonoUpdated","abonoAEditar","setAbonoAEditar","manejarEditarAbono","manejarCerrarEdicion","manejarAbonoActualizado","abonoActualizado","saldoRestante","porcentajePagado","folio","numeroAbono","activo","lista","cambiado","estadoApi","cargando","proyectosFiltrados","setProyectosFiltrados","modalCrearAbierto","setModalCrearAbierto","modalEditarAbierto","setModalEditarAbierto","setProyectoSeleccionado","barraLateralColapsada","setBarraLateralColapsada","menuEncabezadoAbierto","setMenuEncabezadoAbierto","abonosPorProyecto","setAbonosPorProyecto","bruto","registrarAbonoPara","setRegistrarAbonoPara","verAbonosPara","setVerAbonosPara","mostrarSelectorProyecto","setMostrarSelectorProyecto","refreshAbonosStats","setRefreshAbonosStats","obtenerNombre","obtenerCodigo","obtenerEstadoUi","estadoCache","estadoNormalizado","obtenerDepartamento","obtenerPrioridad","obtenerInicio","obtenerFin","obtenerPresupuesto","obtenerIdProyecto","obtenerTotalPagado","normalizar","manejarCambioFiltros","filtros","filtrados","proy","estadoObjetivo","estadoObjetivoNormalizado","estadoProyecto","estadoRaw","estadoDirecto","estadoProyectoCanonico","depto","prioridadProy","prioridadNormalizada","prioridadFiltroNormalizada","filtroInicio","filtroFin","manejarEditarProyecto","manejarAccionMasiva","accion","idsSeleccionados","abrirRegistroAbono","cerrarRegistroAbono","abrirVerAbonos","cerrarVerAbonos","seleccionarProyectoParaAbono","manejarGuardarAbono","siguiente","errorRecarga","manejarActualizarProyecto","manejarExportarDesdeFiltros","encabezados","escapar","necesita","filas","restante","RegisterAbonoModal","userService","useUsers","users","setUsers","fetchUsers","createUser","updateUser","UserFormModal","initialFormState","showPassword","setShowPassword","contactoSinEspacios","handleChange","numericValue","UserTable","onEditUser","paginatedUsers","UserManagement","selectedUser","setSelectedUser","handleCreateUser","handleEditUser","handleCloseModal","handleSaveUser","Routes","DashboardRedirect","Navigate","RouterRoutes","Route","FinancialManagement","ProjectAbonosManagement","NotificationItem","onRemove","getIcon","CheckCircle","AlertCircle","AlertTriangle","Info","getTypeClass","handleActionClick","NotificationContainer","App","BrowserRouter","container","root","createRoot"],"mappings":"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"}