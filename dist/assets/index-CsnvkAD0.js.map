{"version":3,"file":"index-CsnvkAD0.js","sources":["../../src/components/ScrollToTop.jsx","../../src/components/AppIcon.jsx","../../src/components/ErrorBoundary.jsx","../../src/context/NotificationContext.jsx","../../src/ui/ConfirmDialog.jsx","../../src/ui/ConfirmDialogContext.jsx","../../src/utils/auth.js","../../src/hooks/useTokenExpiration.js","../../src/utils/config.js","../../src/services/httpService.js","../../src/services/authService.js","../../src/hooks/useAuth.jsx","../../src/components/ProtectedRoute.jsx","../../src/components/GlobalButtonHandlers.jsx","../../src/utils/cn.js","../../src/components/ui/Button.jsx","../../src/pages/NotFound.jsx","../../src/components/ui/Input.jsx","../../src/components/AppImage.jsx","../../src/components/ui/Sidebar.jsx","../../src/components/ui/Header.jsx","../../src/components/ui/Breadcrumb.jsx","../../src/pages/project-management/components/ProjectFilters.jsx","../../src/services/proyectoService.js","../../src/services/clientService.js","../../src/pages/project-management/components/ProjectTable.jsx","../../src/components/ui/Select.jsx","../../src/services/personService.js","../../src/hooks/usePerson.js","../../src/services/estadoService.js","../../src/hooks/useEstado.js","../../src/pages/project-management/components/CreateProjectModal.jsx","../../src/pages/project-management/components/ProjectTimeline.jsx","../../src/pages/project-management/components/ProjectQuotations.jsx","../../src/pages/project-management/components/ProjectStats.jsx","../../src/pages/project-management/components/EditProjectModal.jsx","../../src/hooks/useProyect.js","../../src/pages/project-management/index.jsx","../../src/pages/project-detail-gallery/components/ImageUploadPanel.jsx","../../src/pages/project-detail-gallery/components/ImageLightbox.jsx","../../src/pages/project-detail-gallery/components/ImageGallery.jsx","../../src/pages/project-detail-gallery/components/ProjectInfoPanel.jsx","../../src/pages/project-detail-gallery/index.jsx","../../src/pages/project-gallery-viewer/components/ImageGallery.jsx","../../src/pages/project-gallery-viewer/components/FilterToolbar.jsx","../../src/pages/project-gallery-viewer/components/ImageLightbox.jsx","../../src/pages/project-gallery-viewer/components/BulkActions.jsx","../../src/pages/project-gallery-viewer/components/ProjectInfo.jsx","../../src/pages/project-gallery-viewer/index.jsx","../../src/pages/project-documentation-center/components/DocumentTree.jsx","../../src/pages/project-documentation-center/components/WorkflowStatus.jsx","../../src/pages/project-documentation-center/components/QuotationWorkflow.jsx","../../src/pages/project-documentation-center/components/ProgressTracking.jsx","../../src/pages/project-documentation-center/components/DocumentValidation.jsx","../../src/pages/project-documentation-center/index.jsx","../../src/pages/project-workflow-management/components/ProjectCard.jsx","../../src/pages/project-workflow-management/components/DocumentUploadPanel.jsx","../../src/pages/project-workflow-management/components/QuotationPanel.jsx","../../src/pages/project-workflow-management/components/ValidationPanel.jsx","../../src/pages/project-workflow-management/index.jsx","../../src/pages/quotation-builder/components/QuotationForm.jsx","../../src/pages/quotation-builder/components/QuotationPreview.jsx","../../src/pages/quotation-builder/components/MaterialIdentification.jsx","../../src/pages/quotation-builder/components/CommunicationPanel.jsx","../../src/pages/quotation-builder/components/VersionControl.jsx","../../src/pages/quotation-builder/index.jsx","../../src/pages/inventory-management/components/OrderDetailsModal.jsx","../../src/services/ordenCompraService.js","../../src/pages/inventory-management/components/InventoryTable.jsx","../../src/pages/inventory-management/components/InventoryFilters.jsx","../../src/pages/inventory-management/components/StockAlerts.jsx","../../src/pages/inventory-management/components/PurchaseOrderPanel.jsx","../../src/pages/inventory-management/components/InventoryStats.jsx","../../src/services/articuloService.js","../../src/hooks/useInventory.js","../../src/pages/inventory-management/components/NewItemModal.jsx","../../src/pages/inventory-management/components/ItemDetailsModal.jsx","../../src/pages/inventory-management/components/EditItemModal.jsx","../../src/pages/inventory-management/components/CreatePOModal.jsx","../../src/services/requisiService.js","../../src/hooks/useRequisi.js","../../src/services/operacService.js","../../src/hooks/useOperac.js","../../src/pages/work-order-processing/components/RequisitionModal.jsx","../../src/hooks/useOrder.js","../../src/pages/inventory-management/index.jsx","../../src/pages/login/components/CompanyBranding.jsx","../../src/components/ui/Checkbox.jsx","../../src/pages/login/components/LoginForm.jsx","../../src/pages/login/components/CredentialsHelper.jsx","../../src/pages/login/components/SecurityFeatures.jsx","../../src/pages/login/index.jsx","../../src/pages/financial-management/components/FilterGastos.jsx","../../src/pages/financial-management/components/FilterControls.jsx","../../src/services/finanzasService.js","../../src/pages/financial-management/components/PaymentAuthorizationModal.jsx","../../src/hooks/useFinanzas.js","../../src/pages/financial-management/components/ExpenseTrackingTable.jsx","../../src/pages/financial-management/components/FinancialSummaryWidget.jsx","../../src/pages/financial-management/components/ReceiptManagementPanel.jsx","../../src/pages/financial-management/components/NewExpenseModal.jsx","../../src/pages/financial-management/components/ModalGestionCompra.jsx","../../src/services/gastosService.js","../../src/hooks/useGastos.js","../../src/pages/financial-management/components/GastosTable.jsx","../../src/pages/financial-management/index.jsx","../../src/pages/personnel-management/components/PersonnelTable.jsx","../../src/pages/personnel-management/components/FilterToolbar.jsx","../../src/pages/personnel-management/components/ComplianceDashboard.jsx","../../src/pages/personnel-management/components/PersonnelModal.jsx","../../src/pages/personnel-management/index.jsx","../../src/hooks/useClient.js","../../src/services/communicationService.js","../../src/hooks/useCommunication.js","../../src/pages/client-management/components/ClientCard.jsx","../../src/pages/client-management/components/ClientTable.jsx","../../src/pages/client-management/components/ClientFilters.jsx","../../src/pages/client-management/components/ClientCommunicationPanel.jsx","../../src/pages/client-management/components/DocumentStatus.jsx","../../src/pages/client-management/components/ContractAlerts.jsx","../../src/pages/client-management/components/NewClientModal.jsx","../../src/pages/client-management/index.jsx","../../src/pages/work-order-processing/components/WorkOrderModal.jsx","../../src/pages/work-order-processing/components/WorkOrderTable.jsx","../../src/pages/work-order-processing/components/FilterToolbar.jsx","../../src/pages/work-order-processing/components/InventoryPanel.jsx","../../src/pages/work-order-processing/components/StatsCards.jsx","../../src/pages/work-order-processing/index.jsx","../../src/services/tallerService.js","../../src/hooks/useOperacAlt.js","../../src/pages/workshop-operations-management/components/WorkflowBoard.jsx","../../src/pages/workshop-operations-management/components/WorkflowControls.jsx","../../src/pages/workshop-operations-management/components/MaterialReceptionPanel.jsx","../../src/pages/workshop-operations-management/components/SafetyChecklistPanel.jsx","../../src/pages/workshop-operations-management/components/AttendancePanel.jsx","../../src/pages/workshop-operations-management/components/QualityControlPanel.jsx","../../src/pages/workshop-operations-management/components/ChangeOrderPanel.jsx","../../src/pages/workshop-operations-management/index.jsx","../../src/pages/workshop-operations-center/components/WorkflowBoard.jsx","../../src/pages/workshop-operations-center/components/MaterialReceptionPanel.jsx","../../src/pages/workshop-operations-center/components/SafetyChecklistPanel.jsx","../../src/pages/workshop-operations-center/components/AttendancePanel.jsx","../../src/pages/workshop-operations-center/components/QualityControlPanel.jsx","../../src/pages/workshop-operations-center/components/EvidenceSubmissionPanel.jsx","../../src/pages/workshop-operations-center/components/ChangeOrderPanel.jsx","../../src/pages/workshop-operations-center/components/WorkshopStats.jsx","../../src/pages/workshop-operations-center/components/ShiftManagementPanel.jsx","../../src/pages/workshop-operations-center/index.jsx","../../src/pages/sales-opportunity-management/components/CommunicationPanel.jsx","../../src/pages/sales-opportunity-management/components/NewOpportunityModal.jsx","../../src/services/opportunityService.js","../../src/hooks/useOpportunity.js","../../src/pages/sales-opportunity-management/index.jsx","../../src/services/quotationService.js","../../src/hooks/useQuotation.js","../../src/pages/quotation-development-center/components/QuotationBuilder.jsx","../../src/pages/quotation-development-center/components/MaterialRiskChecklist.jsx","../../src/pages/quotation-development-center/components/QuotationPreview.jsx","../../src/pages/quotation-development-center/components/ClientCommunication.jsx","../../src/pages/quotation-development-center/components/RevisionHistory.jsx","../../src/pages/quotation-development-center/components/InternalReview.jsx","../../src/pages/quotation-development-center/components/NewQuotationModal.jsx","../../src/pages/quotation-development-center/index.jsx","../../src/pages/sales-execution-monitoring/components/StartupTrackingPanel.jsx","../../src/pages/sales-execution-monitoring/components/ExecutionProgressPanel.jsx","../../src/pages/sales-execution-monitoring/components/ClientCommunicationPanel.jsx","../../src/pages/sales-execution-monitoring/components/ChangeRequestPanel.jsx","../../src/pages/sales-execution-monitoring/components/DeliveryManagementPanel.jsx","../../src/pages/sales-execution-monitoring/components/TraceabilityPanel.jsx","../../src/pages/sales-execution-monitoring/index.jsx","../../src/pages/project-abonos-management/components/ProjectFilters.jsx","../../src/pages/project-abonos-management/components/ProjectTable.jsx","../../src/services/abonoService.js","../../src/pages/project-abonos-management/components/AbonosStats.jsx","../../src/pages/project-abonos-management/components/CreateProjectModal.jsx","../../src/pages/project-abonos-management/components/EditProjectModal.jsx","../../src/hooks/useAbono.js","../../src/pages/project-abonos-management/components/RegisterAbonoModal.jsx","../../src/pages/project-abonos-management/components/EditAbonoModal.jsx","../../src/pages/project-abonos-management/components/ViewAbonosModal.jsx","../../src/pages/project-abonos-management/index.jsx","../../src/services/userService.js","../../src/hooks/useUsers.js","../../src/pages/user-management/components/UserFormModal.jsx","../../src/pages/user-management/components/UserTable.jsx","../../src/pages/user-management/index.jsx","../../src/Routes.jsx","../../src/ui/NotificationContainer.jsx","../../src/App.jsx","../../src/index.jsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst ScrollToTop = () => {\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n  }, [pathname]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default ScrollToTop;","import React from 'react';\r\nimport * as LucideIcons from 'lucide-react';\r\nimport { HelpCircle } from 'lucide-react';\r\n\r\nfunction Icon({\r\n    name,\r\n    size = 24,\r\n    color = \"currentColor\",\r\n    className = \"\",\r\n    strokeWidth = 2,\r\n    ...props\r\n}) {\r\n    const IconComponent = LucideIcons?.[name];\r\n\r\n    if (!IconComponent) {\r\n        return <HelpCircle size={size} color=\"gray\" strokeWidth={strokeWidth} className={className} {...props} />;\r\n    }\r\n\r\n    return <IconComponent\r\n        size={size}\r\n        color={color}\r\n        strokeWidth={strokeWidth}\r\n        className={className}\r\n        {...props}\r\n    />;\r\n}\r\nexport default Icon;","import React from \"react\";\r\nimport Icon from \"./AppIcon\";\r\n\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    error.__ErrorBoundary = true;\r\n    window.__COMPONENT_ERROR__?.(error, errorInfo);\r\n    // console.log(\"Error caught by ErrorBoundary:\", error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state?.hasError) {\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-neutral-50\">\r\n          <div className=\"text-center p-8 max-w-md\">\r\n            <div className=\"flex justify-center items-center mb-2\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"42px\" height=\"42px\" viewBox=\"0 0 32 33\" fill=\"none\">\r\n                <path d=\"M16 28.5C22.6274 28.5 28 23.1274 28 16.5C28 9.87258 22.6274 4.5 16 4.5C9.37258 4.5 4 9.87258 4 16.5C4 23.1274 9.37258 28.5 16 28.5Z\" stroke=\"#343330\" strokeWidth=\"2\" strokeMiterlimit=\"10\" />\r\n                <path d=\"M11.5 15.5C12.3284 15.5 13 14.8284 13 14C13 13.1716 12.3284 12.5 11.5 12.5C10.6716 12.5 10 13.1716 10 14C10 14.8284 10.6716 15.5 11.5 15.5Z\" fill=\"#343330\" />\r\n                <path d=\"M20.5 15.5C21.3284 15.5 22 14.8284 22 14C22 13.1716 21.3284 12.5 20.5 12.5C19.6716 12.5 19 13.1716 19 14C19 14.8284 19.6716 15.5 20.5 15.5Z\" fill=\"#343330\" />\r\n                <path d=\"M21 22.5C19.9625 20.7062 18.2213 19.5 16 19.5C13.7787 19.5 12.0375 20.7062 11 22.5\" stroke=\"#343330\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n              </svg>\r\n            </div>\r\n            <div className=\"flex flex-col gap-1 text-center\">\r\n              <h1 className=\"text-2xl font-medium text-neutral-800\">Something went wrong</h1>\r\n              <p className=\"text-neutral-600 text-base w w-8/12 mx-auto\">We encountered an unexpected error while processing your request.</p>\r\n            </div>\r\n            <div className=\"flex justify-center items-center mt-6\">\r\n              <button\r\n                onClick={() => {\r\n                  window.location.href = \"/\";\r\n                }}\r\n                className=\"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded flex items-center gap-2 transition-colors duration-200 shadow-sm\"\r\n              >\r\n                <Icon name=\"ArrowLeft\" size={18} color=\"#fff\" />\r\n                Back\r\n              </button>\r\n            </div>\r\n          </div >\r\n        </div >\r\n      );\r\n    }\r\n\r\n    return this.props?.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;","import { createContext, useContext, useState, useCallback } from 'react';\r\n\r\n/**\r\n * Contexto para el manejo de notificaciones\r\n */\r\nexport const NotificationContext = createContext();\r\n\r\n/**\r\n * Hook personalizado para usar el contexto de notificaciones\r\n */\r\n\r\n\r\n/**\r\n * Tipos de notificaci√≥n\r\n */\r\nexport const NotificationTypes = {\r\n  SUCCESS: 'success',\r\n  ERROR: 'error',\r\n  WARNING: 'warning',\r\n  INFO: 'info'\r\n};\r\n\r\n/**\r\n * Provider del contexto de notificaciones\r\n */\r\nexport const NotificationProvider = ({ children }) => {\r\n  const [notifications, setNotifications] = useState([]);\r\n\r\n  // Agregar una nueva notificaci√≥n\r\n  const addNotification = useCallback((message, type = NotificationTypes.INFO, options = {}) => {\r\n    const notification = {\r\n      id: Date.now() + Math.random(),\r\n      message,\r\n      type,\r\n      duration: options.duration || 5000,\r\n      persistent: options.persistent || false,\r\n      action: options.action || null,\r\n      createdAt: new Date().toISOString()\r\n    };\r\n\r\n    setNotifications(prev => [...prev, notification]);\r\n\r\n    // Auto-remover notificaci√≥n si no es persistente\r\n    if (!notification.persistent && notification.duration > 0) {\r\n      setTimeout(() => {\r\n        setNotifications(prev => prev.filter(n => n.id !== notification.id));\r\n      }, notification.duration);\r\n    }\r\n\r\n    return notification.id;\r\n  }, []);\r\n\r\n  // Remover notificaci√≥n espec√≠fica\r\n  const removeNotification = useCallback((id) => {\r\n    setNotifications(prev => prev.filter(notification => notification.id !== id));\r\n  }, []);\r\n\r\n  // Limpiar todas las notificaciones\r\n  const clearNotifications = useCallback(() => {\r\n    setNotifications([]);\r\n  }, []);\r\n\r\n  // Limpiar notificaciones por tipo\r\n  const clearNotificationsByType = useCallback((type) => {\r\n    setNotifications(prev => prev.filter(notification => notification.type !== type));\r\n  }, []);\r\n\r\n  // Helpers para diferentes tipos de notificaciones\r\n  const showSuccess = useCallback((message, options = {}) => {\r\n    return addNotification(message, NotificationTypes.SUCCESS, options);\r\n  }, [addNotification]);\r\n\r\n  const showError = useCallback((message, options = {}) => {\r\n    return addNotification(message, NotificationTypes.ERROR, { \r\n      duration: 7000, \r\n      ...options \r\n    });\r\n  }, [addNotification]);\r\n\r\n  const showWarning = useCallback((message, options = {}) => {\r\n    return addNotification(message, NotificationTypes.WARNING, options);\r\n  }, [addNotification]);\r\n\r\n  const showInfo = useCallback((message, options = {}) => {\r\n    return addNotification(message, NotificationTypes.INFO, options);\r\n  }, [addNotification]);\r\n\r\n  // Mostrar error HTTP con formato espec√≠fico\r\n  const showHttpError = useCallback((error, context = '') => {\r\n    let message = 'Ha ocurrido un error inesperado';\r\n\r\n    if (typeof error === 'string') {\r\n      message = error;\r\n    } else if (error?.userMessage) {\r\n      message = error.userMessage;\r\n    } else if (error?.message) {\r\n      message = error.message;\r\n    } else if (error?.response?.data?.message) {\r\n      message = error.response.data.message;\r\n    }\r\n\r\n    if (context) {\r\n      message = `${context}: ${message}`;\r\n    }\r\n\r\n    return showError(message, { duration: 8000 });\r\n  }, [showError]);\r\n\r\n  // Mostrar √©xito de operaci√≥n\r\n  const showOperationSuccess = useCallback((operation, resource = '') => {\r\n    const messages = {\r\n      create: `${resource} creado exitosamente`,\r\n      update: `${resource} actualizado exitosamente`,\r\n      delete: `${resource} Eliminada exitosamente`,\r\n      save: `${resource} guardado exitosamente`,\r\n      send: `${resource} enviado exitosamente`,\r\n      default: 'Operaci√≥n completada exitosamente'\r\n    };\r\n\r\n    const message = messages[operation] || messages.default;\r\n    return showSuccess(message);\r\n  }, [showSuccess]);\r\n    //  Mostrar notificaci√≥n tipo confirmaci√≥n con botones\r\n\r\nconst showConfirm = useCallback((message, { onConfirm, onCancel } = {}) => {\r\n  const id = Date.now() + Math.random();\r\n\r\n  const action = (\r\n    <div className=\"flex justify-end gap-3 mt-3\">\r\n      <button\r\n        onClick={() => {\r\n          if (onCancel) onCancel();\r\n          removeNotification(id);\r\n        }}\r\n        className=\"px-4 py-1.5 text-sm font-medium border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition\"\r\n      >\r\n        Cancelar\r\n      </button>\r\n\r\n      <button\r\n        onClick={() => {\r\n          if (onConfirm) onConfirm();\r\n          removeNotification(id);\r\n        }}\r\n        className=\"px-4 py-1.5 text-sm font-medium rounded-lg bg-red-600 text-white hover:bg-red-700 transition\"\r\n      >\r\n        Eliminar\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  setNotifications(prev => [\r\n    ...prev,\r\n    {\r\n      id,\r\n      message: (\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"text-sm text-gray-800\">{message}</span>\r\n          {action}\r\n        </div>\r\n      ),\r\n      type: NotificationTypes.WARNING,\r\n      duration: 0, // No se cierra autom√°ticamente\r\n      persistent: true,\r\n    }\r\n  ]);\r\n}, [removeNotification]);\r\n\r\n \r\n\r\n\r\n  const value = {\r\n    notifications,\r\n    addNotification,\r\n    removeNotification,\r\n    clearNotifications,\r\n    clearNotificationsByType,\r\n    showSuccess,\r\n    showError,\r\n    showWarning,\r\n    showInfo,\r\n    showHttpError,\r\n    showOperationSuccess,\r\n    showConfirm,\r\n  };\r\n\r\n  return (\r\n    <NotificationContext.Provider value={value}>\r\n      {children}\r\n    </NotificationContext.Provider>\r\n  );\r\n};\r\n\r\n/**\r\n * Hook para usar el contexto de notificaciones\r\n */\r\nexport const useNotifications = () => {\r\n  const context = useContext(NotificationContext);\r\n\r\n  if (!context) {\r\n    throw new Error('useNotifications debe ser usado dentro de un NotificationProvider');\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\n/**\r\n * Hook para manejo de errores HTTP\r\n */\r\nexport const useErrorHandler = () => {\r\n  const { showHttpError, showOperationSuccess } = useNotifications();\r\n\r\n  const handleError = useCallback((error, context = '') => {\r\n    console.error('HTTP Error:', error);\r\n    showHttpError(error, context);\r\n  }, [showHttpError]);\r\n\r\n  const handleSuccess = useCallback((operation, resource = '') => {\r\n    showOperationSuccess(operation, resource);\r\n  }, [showOperationSuccess]);\r\n\r\n  return {\r\n    handleError,\r\n    handleSuccess\r\n  };\r\n};\r\n\r\n// Alias para usar el contexto de notificaciones como useNotification\r\nexport const useNotification = useNotifications;\r\n\r\nexport default NotificationContext;\r\n","import React from 'react';\r\n\r\nconst ConfirmDialog = ({ open, title, message, confirmText = 'S√≠', cancelText = 'No', onConfirm, onCancel }) => {\r\n  if (!open) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"fixed inset-0 bg-black/50 transition-opacity\" onClick={onCancel} />\r\n      <div className=\"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm p-6\">\r\n        <h3 className=\"text-lg font-semibold text-foreground mb-2\">{title}</h3>\r\n        <p className=\"text-sm text-muted-foreground mb-6\">{message}</p>\r\n        <div className=\"flex justify-end space-x-2\">\r\n          <button\r\n            className=\"px-4 py-2 rounded bg-muted text-foreground hover:bg-gray-200 transition\"\r\n            onClick={onCancel}\r\n          >\r\n            {cancelText}\r\n          </button>\r\n          <button\r\n            className=\"px-4 py-2 rounded bg-primary text-white hover:bg-primary/80 transition\"\r\n            onClick={onConfirm}\r\n          >\r\n            {confirmText}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmDialog;\r\n","import React, { createContext, useContext, useState, useCallback } from 'react';\r\nimport ConfirmDialog from './ConfirmDialog';\r\n\r\nconst ConfirmDialogContext = createContext();\r\n\r\nexport const useConfirmDialog = () => useContext(ConfirmDialogContext);\r\n\r\nexport const ConfirmDialogProvider = ({ children }) => {\r\n  const [dialog, setDialog] = useState({ open: false });\r\n\r\n  const showConfirm = useCallback(({ title, message, confirmText, cancelText }) => {\r\n    return new Promise((resolve) => {\r\n      setDialog({\r\n        open: true,\r\n        title,\r\n        message,\r\n        confirmText,\r\n        cancelText,\r\n        onConfirm: () => {\r\n          setDialog({ open: false });\r\n          resolve(true);\r\n        },\r\n        onCancel: () => {\r\n          setDialog({ open: false });\r\n          resolve(false);\r\n        },\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <ConfirmDialogContext.Provider value={{ showConfirm }}>\r\n      {children}\r\n      <ConfirmDialog {...dialog} />\r\n    </ConfirmDialogContext.Provider>\r\n  );\r\n};\r\n","// Authentication and Authorization utilities\r\nexport const AUTH_ROLES = {\r\n  ADMIN: 'admin',\r\n  ADMINISTRACION: 'administracion',\r\n  PROYECTOS: 'proyectos',\r\n  VENTAS: 'ventas',\r\n  TALLER: 'taller'\r\n};\r\n\r\nexport const ROLE_PERMISSIONS = {\r\n  // Admin - Acceso total al sistema\r\n  [AUTH_ROLES?.ADMIN]: {\r\n    allowedPaths: [\r\n      // '/dashboard', // TODO: Habilitar cuando se implemente\r\n      '/oportunidades',\r\n      '/cotizaciones',\r\n      '/proyectos',\r\n      '/abonos',\r\n      '/operaciones',\r\n      '/personal',\r\n      '/inventario',\r\n      '/clientes',\r\n      '/finanzas',\r\n      '/usuarios',\r\n      '/visor-galeria',\r\n      '/galeria-proyecto',\r\n      '/documentacion-proyectos',\r\n      '/flujo-proyecto',\r\n      '/constructor-cotizaciones',\r\n      '/operaciones-taller',\r\n      '/centro-operaciones-taller',\r\n      '/monitoreo-ventas'\r\n    ],\r\n    defaultPath: '/oportunidades'\r\n  },\r\n  // Administraci√≥n - Negocio, Personal y Abonos\r\n  [AUTH_ROLES?.ADMINISTRACION]: {\r\n    allowedPaths: [\r\n      '/clientes',\r\n      '/finanzas',\r\n      '/personal',\r\n      '/abonos'\r\n    ],\r\n    defaultPath: '/clientes'\r\n  },\r\n  // Proyectos - Cotizaciones y Proyectos\r\n  [AUTH_ROLES?.PROYECTOS]: {\r\n    allowedPaths: [\r\n      '/cotizaciones',\r\n      '/proyectos',\r\n      '/visor-galeria',\r\n      '/galeria-proyecto',\r\n      '/documentacion-proyectos',\r\n      '/flujo-proyecto',\r\n      '/constructor-cotizaciones'\r\n    ],\r\n    defaultPath: '/cotizaciones'\r\n  },\r\n  // Ventas - Oportunidades, Cotizaciones, Clientes y Proyectos\r\n  [AUTH_ROLES?.VENTAS]: {\r\n    allowedPaths: [\r\n      '/oportunidades',\r\n      '/cotizaciones',\r\n      '/constructor-cotizaciones',\r\n      '/monitoreo-ventas',\r\n      '/clientes',\r\n      '/proyectos',\r\n      '/visor-galeria',\r\n      '/galeria-proyecto',\r\n      '/documentacion-proyectos',\r\n      '/flujo-proyecto'\r\n    ],\r\n    defaultPath: '/oportunidades'\r\n  },\r\n  // Taller - Operaciones, Operaciones de Taller e Inventario\r\n  [AUTH_ROLES?.TALLER]: {\r\n    allowedPaths: [\r\n      '/operaciones',\r\n      '/operaciones-taller',\r\n      '/centro-operaciones-taller',\r\n      '/inventario'\r\n    ],\r\n    defaultPath: '/operaciones'\r\n  }\r\n};\r\n\r\n// Get current user from localStorage\r\nexport const getCurrentUser = () => {\r\n  const authToken = localStorage.getItem('authToken');\r\n  const userRole = localStorage.getItem('userRole');\r\n  const userEmail = localStorage.getItem('userEmail');\r\n\r\n  if (!authToken || !userRole) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    token: authToken,\r\n    role: userRole,\r\n    email: userEmail\r\n  };\r\n};\r\n\r\n// Check if user is authenticated\r\nexport const isAuthenticated = () => {\r\n  const user = getCurrentUser();\r\n  const expiresAt = localStorage.getItem('tokenExpiresAt');\r\n  if (!user || !user.token || !expiresAt) return false;\r\n  // Verifica expiraci√≥n del token (24h)\r\n  if (Date.now() > Number(expiresAt)) {\r\n    logout();\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n// Check if user has permission to access a specific path\r\nexport const hasPermission = (path, userRole = null) => {\r\n  const currentUser = getCurrentUser();\r\n  // Normaliza el rol a min√∫sculas y sin espacios extra\r\n  const normalizeRole = r => r?.toLowerCase().trim();\r\n  const role = normalizeRole(userRole || currentUser?.role);\r\n\r\n  // Normaliza el path, quitando par√°metros (ejemplo: /project-detail-gallery/123 -> /project-detail-gallery)\r\n  const normalizePath = p => {\r\n    if (!p) return '';\r\n    // Solo toma la primera parte despu√©s de la barra inicial y antes de cualquier par√°metro\r\n    const parts = p.split('/').filter(Boolean);\r\n    return parts.length > 1 ? `/${parts[0]}-${parts[1]}` : `/${parts[0]}`;\r\n  };\r\n  // Si el path tiene formato /algo/algo, lo dejamos como /algo-algo para coincidir con allowedPaths\r\n  const basePath = normalizePath(path);\r\n\r\n  // Busca el rol en el objeto de permisos\r\n  const permissions = ROLE_PERMISSIONS?.[role] || ROLE_PERMISSIONS?.[userRole] || ROLE_PERMISSIONS?.[normalizeRole(userRole)];\r\n  if (!permissions) {\r\n    return false;\r\n  }\r\n\r\n  // Verifica si el path base est√° permitido\r\n  return permissions.allowedPaths?.includes(basePath);\r\n};\r\n\r\n// Get allowed navigation items for user role\r\nexport const getAllowedNavigationItems = (userRole) => {\r\n  if (!userRole || !ROLE_PERMISSIONS?.[userRole]) {\r\n    return [];\r\n  }\r\n\r\n  const allowedPaths = ROLE_PERMISSIONS?.[userRole]?.allowedPaths;\r\n\r\n  const allNavigationItems = [\r\n    // TODO: Habilitar cuando se implemente el dashboard\r\n    // {\r\n    //   label: 'Dashboard',\r\n    //   path: '/dashboard',\r\n    //   icon: 'LayoutDashboard',\r\n    //   tooltip: 'Resumen operacional y KPIs',\r\n    //   badge: null,\r\n    //   roles: [AUTH_ROLES?.ADMIN]\r\n    // },\r\n    {\r\n      label: 'Oportunidades',\r\n      path: '/oportunidades',\r\n      icon: 'Target',\r\n      tooltip: 'Gesti√≥n de oportunidades de venta',\r\n      // badge: 8,\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.VENTAS]\r\n    },\r\n    {\r\n      label: 'Cotizaciones',\r\n      path: '/cotizaciones',\r\n      icon: 'FileText',\r\n      tooltip: 'Desarrollo y gesti√≥n de cotizaciones',\r\n      badge: null,\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.VENTAS, AUTH_ROLES?.PROYECTOS]\r\n    },\r\n    {\r\n      label: 'Proyectos',\r\n      path: '/proyectos',\r\n      icon: 'FolderOpen',\r\n      tooltip: 'Gesti√≥n del ciclo de vida de proyectos',\r\n      // badge: 5,\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.PROYECTOS, AUTH_ROLES?.VENTAS]\r\n    },\r\n    {\r\n      label: 'Abonos',\r\n      path: '/abonos',\r\n      icon: 'CreditCard',\r\n      tooltip: 'Gesti√≥n de abonos de proyectos',\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.ADMINISTRACION]\r\n    },\r\n    {\r\n      label: 'Operaciones',\r\n      path: '/operaciones',\r\n      icon: 'ClipboardList',\r\n      tooltip: 'Procesamiento y seguimiento de √≥rdenes de trabajo',\r\n      // badge: 12,\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.TALLER]\r\n    },\r\n    {\r\n      label: 'Operaciones de Taller',\r\n      path: '/operaciones-taller',\r\n      icon: 'Tool',\r\n      tooltip: 'Gesti√≥n de operaciones de taller',\r\n      roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.TALLER]\r\n    },\r\n    // {\r\n    //   label: 'Centro de Operaciones de Taller',\r\n    //   path: '/workshop-operations-center',\r\n    //   icon: 'Home',\r\n    //   tooltip: 'Centro de operaciones de taller',\r\n    //   roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.WORKSHOP_SUPERVISOR]\r\n    // },\r\n    {\r\n      label: 'Recursos',\r\n      icon: 'Users',\r\n      tooltip: 'Gesti√≥n de personal e inventario',\r\n      children: [\r\n        {\r\n          label: 'Personal',\r\n          path: '/personal',\r\n          icon: 'UserCheck',\r\n          tooltip: 'Gesti√≥n de personal y horarios',\r\n          roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.ADMINISTRACION]\r\n        },\r\n        {\r\n          label: 'Inventario',\r\n          path: '/inventario',\r\n          icon: 'Package',\r\n          tooltip: 'Seguimiento de equipos y repuestos',\r\n          roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.TALLER]\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: 'Negocio',\r\n      icon: 'Building2',\r\n      tooltip: 'Gesti√≥n de clientes y finanzas',\r\n      // badge: 3,\r\n      children: [\r\n        {\r\n          label: 'Clientes',\r\n          path: '/clientes',\r\n          icon: 'Users',\r\n          tooltip: 'Gesti√≥n de relaciones con clientes',\r\n          roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.ADMINISTRACION, AUTH_ROLES?.VENTAS]\r\n        },\r\n        {\r\n          label: 'Finanzas',\r\n          path: '/finanzas',\r\n          icon: 'DollarSign',\r\n          tooltip: 'Supervisi√≥n y reportes financieros',\r\n          // badge: 3,\r\n          roles: [AUTH_ROLES?.ADMIN, AUTH_ROLES?.ADMINISTRACION]\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      label: 'Usuarios',\r\n      path: '/usuarios',\r\n      icon: 'UserCog',\r\n      tooltip: 'Gesti√≥n de usuarios del sistema',\r\n      badge: null,\r\n      roles: [AUTH_ROLES?.ADMIN]\r\n    }\r\n  ];\r\n\r\n  // Filter navigation items based on user role and allowed paths\r\n  const filterItems = (items) => {\r\n    return items?.filter(item => {\r\n      if (item?.children) {\r\n        const allowedChildren = item?.children?.filter(child =>\r\n          child?.roles?.includes(userRole) && allowedPaths?.includes(child?.path)\r\n        );\r\n        if (allowedChildren?.length > 0) {\r\n          item.children = allowedChildren;\r\n          return true;\r\n        }\r\n        return false;\r\n      } else {\r\n        return item?.roles?.includes(userRole) && allowedPaths?.includes(item?.path);\r\n      }\r\n    });\r\n  };\r\n\r\n  return filterItems(allNavigationItems);\r\n};\r\n\r\n// Get default redirect path for user role\r\nexport const getDefaultPath = (userRole) => {\r\n  if (!userRole || !ROLE_PERMISSIONS?.[userRole]) {\r\n    return '/login';\r\n  }\r\n\r\n  return ROLE_PERMISSIONS?.[userRole]?.defaultPath;\r\n};\r\n\r\n// Logout user\r\nexport const logoutUser = () => {\r\n  // Limpiar todos los elementos de autenticaci√≥n\r\n  localStorage.removeItem('authToken');\r\n  localStorage.removeItem('token'); \r\n  localStorage.removeItem('tokenExpiresAt');\r\n  localStorage.removeItem('userRole');\r\n  localStorage.removeItem('userEmail');\r\n  localStorage.removeItem('role');\r\n  localStorage.removeItem('rol');\r\n  localStorage.removeItem('rememberMe');\r\n  \r\n  // Forzar recarga completa para limpiar estado\r\n  window.location.replace('/login');\r\n}\r\n\r\nimport axios from \"axios\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nexport function logout() {\r\n  // Limpiar todos los elementos de autenticaci√≥n\r\n  localStorage.removeItem(\"authToken\");\r\n  localStorage.removeItem(\"token\");\r\n  localStorage.removeItem(\"tokenExpiresAt\");\r\n  localStorage.removeItem(\"userRole\");\r\n  localStorage.removeItem(\"userEmail\");\r\n  localStorage.removeItem(\"role\");\r\n  localStorage.removeItem(\"rol\");\r\n  localStorage.removeItem(\"rememberMe\");\r\n  \r\n  // Forzar recarga completa para limpiar estado\r\n  window.location.replace(\"/login\");\r\n}\r\n\r\nexport async function checkBackendTokenConfig() {\r\n  try {\r\n    const apiUrl = import.meta.env.VITE_API_URL || \"\";\r\n    \r\n    // Hacer una petici√≥n de login de prueba para ver la configuraci√≥n del token\r\n    console.log(\"=== VERIFICANDO CONFIGURACI√ìN DEL BACKEND ===\");\r\n    console.log(\"API URL:\", apiUrl);\r\n    console.log(\"============================================\");\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Error verificando configuraci√≥n del backend:\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function renewToken(currentToken) {\r\n  try {\r\n    const apiUrl = import.meta.env.VITE_API_URL || \"\";\r\n    const response = await axios.post(\r\n      `${apiUrl}/usuarios/extender-sesion`,\r\n      {}, // POST sin body\r\n      {\r\n        headers: { Authorization: `Bearer ${currentToken}` },\r\n      }\r\n    );\r\n    \r\n    if (response.data && response.data.success && response.data.data && response.data.data.token) {\r\n      const newToken = response.data.data.token;\r\n      localStorage.setItem(\"authToken\", newToken);\r\n      \r\n      // Debug info del token renovado\r\n      try {\r\n        const decoded = jwtDecode(newToken);\r\n        if (decoded) {\r\n          const tokenDurationMs = (decoded.exp - decoded.iat) * 1000;\r\n          const tokenDurationMin = Math.round(tokenDurationMs / 1000 / 60);\r\n          \r\n          console.log(\"=== TOKEN RENOVADO INFO ===\");\r\n          console.log(\"Nuevo token emitido en:\", new Date(decoded.iat * 1000).toLocaleString());\r\n          console.log(\"Nuevo token expira en:\", new Date(decoded.exp * 1000).toLocaleString());\r\n          console.log(\"Duraci√≥n configurada:\", tokenDurationMin, \"minutos\");\r\n          console.log(\"¬øFue extendido?\", decoded.extendedAt ? \"S√≠\" : \"No\");\r\n          console.log(\"========================\");\r\n        }\r\n      } catch (error) {\r\n        console.warn(\"Error al decodificar token renovado:\", error);\r\n      }\r\n      \r\n      return newToken;\r\n    } else {\r\n      throw new Error(\"No se recibi√≥ un token v√°lido del servidor\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error al renovar token:\", error);\r\n    // Si falla la renovaci√≥n, hacer logout\r\n    logout();\r\n    throw error;\r\n  }\r\n}\r\n// ...existing code...","import { useEffect, useRef } from \"react\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport { useConfirmDialog } from \"../ui/ConfirmDialogContext\";\r\nimport { renewToken, logout } from \"../utils/auth\";\r\n\r\n/**\r\n * Hook para manejar la expiraci√≥n y renovaci√≥n del token JWT.\r\n * @param {string} token - El token JWT actual.\r\n * @param {function} onTokenRenewed - Callback para actualizar el token en el estado global.\r\n */\r\n\r\nexport default function useTokenExpiration(token, onTokenRenewed) {\r\n  const { showInfo } = useNotifications();\r\n  const { showConfirm } = useConfirmDialog();\r\n  const timeoutRef = useRef();\r\n  const isRenewingRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    \r\n    let decoded;\r\n    try {\r\n      decoded = jwtDecode(token);\r\n    } catch {\r\n      logout();\r\n      return;\r\n    }\r\n    \r\n    if (!decoded.exp) return;\r\n    \r\n    const expMs = decoded.exp * 1000;\r\n    const now = Date.now();\r\n    const msBeforeExpiry = expMs - now;\r\n    \r\n    console.log(`Token actual expira en: ${Math.round(msBeforeExpiry / 1000)} segundos`);\r\n    \r\n    // Si el token ya expir√≥ o expira en menos de 30 segundos, renovar inmediatamente\r\n    if (msBeforeExpiry <= 30000) {\r\n      console.log(\"Token expira muy pronto, renovando inmediatamente\");\r\n      handleSessionExtension();\r\n      return;\r\n    }\r\n    \r\n    // Calcular cu√°ndo notificar:\r\n    // - Si el token dura m√°s de 5 minutos, notificar 2 minutos antes\r\n    // - Si el token dura entre 2-5 minutos, notificar cuando quede 1 minuto\r\n    // - Si el token dura menos de 2 minutos, notificar cuando quede 30 segundos\r\n    let notifyMs;\r\n    const totalDurationMs = msBeforeExpiry;\r\n    \r\n    if (totalDurationMs > 5 * 60 * 1000) { // M√°s de 5 minutos\r\n      notifyMs = msBeforeExpiry - 2 * 60 * 1000; // 2 minutos antes\r\n    } else if (totalDurationMs > 2 * 60 * 1000) { // Entre 2-5 minutos\r\n      notifyMs = msBeforeExpiry - 1 * 60 * 1000; // 1 minuto antes\r\n    } else { // Menos de 2 minutos\r\n      notifyMs = msBeforeExpiry - 30 * 1000; // 30 segundos antes\r\n    }\r\n    \r\n    // Asegurar que notifyMs no sea negativo\r\n    if (notifyMs <= 0) {\r\n      console.log(\"Tiempo de notificaci√≥n ya pas√≥, renovando inmediatamente\");\r\n      handleSessionExtension();\r\n      return;\r\n    }\r\n    \r\n    console.log(`Programando renovaci√≥n en: ${Math.round(notifyMs / 1000)} segundos`);\r\n    timeoutRef.current = setTimeout(handleSessionExtension, notifyMs);\r\n    \r\n    return () => {\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n      // Limpiar el flag de renovaci√≥n cuando el token cambie\r\n      isRenewingRef.current = false;\r\n    };\r\n    // eslint-disable-next-line\r\n  }, [token]);\r\n\r\n  async function handleSessionExtension() {\r\n    // Evitar m√∫ltiples renovaciones simult√°neas\r\n    if (isRenewingRef.current) {\r\n      console.log(\"Ya hay una renovaci√≥n en progreso, ignorando\");\r\n      return;\r\n    }\r\n    \r\n    isRenewingRef.current = true;\r\n    \r\n    try {\r\n      const confirmed = await showConfirm({\r\n        title: \"Extender sesi√≥n\",\r\n        message: \"Tu sesi√≥n est√° por expirar. ¬øDeseas extenderla?\",\r\n        confirmText: \"Extender sesi√≥n\",\r\n        cancelText: \"Cerrar sesi√≥n\",\r\n      });\r\n      \r\n      if (confirmed) {\r\n        try {\r\n          console.log(\"Renovando token... token actual:\", token);\r\n          const newToken = await renewToken(token);\r\n          console.log(\"Token renovado exitosamente:\", newToken ? \"‚úì\" : \"‚úó\");\r\n          \r\n          if (newToken) {\r\n            // Decodifica el nuevo token para mostrar la expiraci√≥n\r\n            let decodedNew;\r\n            try {\r\n              decodedNew = jwtDecode(newToken);\r\n            } catch {\r\n              decodedNew = null;\r\n            }\r\n            \r\n            if (decodedNew?.exp) {\r\n              const expDate = new Date(decodedNew.exp * 1000);\r\n              console.log(\"Nuevo token expira en:\", expDate.toLocaleString());\r\n              showInfo(`Sesi√≥n extendida hasta: ${expDate.toLocaleString()}`);\r\n            }\r\n            \r\n            if (onTokenRenewed) onTokenRenewed(newToken);\r\n            showInfo(\"Sesi√≥n extendida correctamente.\");\r\n          } else {\r\n            throw new Error(\"No se recibi√≥ un token v√°lido\");\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error al renovar el token:\", error);\r\n          showInfo(\"No se pudo extender la sesi√≥n. Cerrando sesi√≥n...\");\r\n          setTimeout(() => {\r\n            console.log(\"Ejecutando logout por error de renovaci√≥n\");\r\n            logout();\r\n          }, 2000);\r\n        }\r\n      } else {\r\n        console.log(\"Usuario eligi√≥ cerrar sesi√≥n\");\r\n        logout();\r\n      }\r\n    } finally {\r\n      isRenewingRef.current = false;\r\n    }\r\n  }\r\n}\r\n","\r\n// Configuraci√≥n centralizada de variables de entorno para Vite\r\n// Solo la URL del backend\r\n\r\nclass EnvConfig {\r\n  static get API_URL() {\r\n    return import.meta.env.VITE_API_URL || \"http://localhost:7071/api\";\r\n  }\r\n\r\n  // Validaci√≥n b√°sica\r\n  static validateRequiredEnvVars() {\r\n    const required = [\"VITE_API_URL\"];\r\n    const missing = required.filter((envVar) => !import.meta.env[envVar]);\r\n    if (missing.length > 0) {\r\n      console.warn(\"‚ö†Ô∏è Falta la variable de entorno requerida:\", missing);\r\n    }\r\n    return missing.length === 0;\r\n  }\r\n\r\n  // Debug helper\r\n  static logConfig() {\r\n    console.group(\"üîß Configuraci√≥n de entorno\");\r\n  // console.log eliminado\r\n    console.groupEnd();\r\n  }\r\n}\r\n\r\n// Validar al importar\r\nEnvConfig.validateRequiredEnvVars();\r\n\r\nexport default EnvConfig;\r\n","import axios from \"axios\";\r\n\r\n/**\r\n * Cliente HTTP centralizado con interceptors para manejo autom√°tico de tokens\r\n * Funciona como middleware para todas las peticiones de la aplicaci√≥n\r\n */\r\nclass HttpService {\r\n  constructor() {\r\n    // Usar el proxy de Vite ‚Äî no poner localhost ni IP\r\n    this.api = axios.create({\r\n      baseURL: \"/api\",\r\n      timeout: 30000,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n      },\r\n    });\r\n\r\n    this.setupInterceptors();\r\n  }\r\n\r\n  setupInterceptors() {\r\n    // REQUEST\r\n    this.api.interceptors.request.use(\r\n      (config) => {\r\n        const token = this.getToken();\r\n        if (token) config.headers.Authorization = `Bearer ${token}`;\r\n        return config;\r\n      },\r\n      (error) => Promise.reject(error)\r\n    );\r\n\r\n    // RESPONSE\r\n    this.api.interceptors.response.use(\r\n      (response) => response,\r\n      (error) => {\r\n        // Suprimir completamente 404 en comunicaciones (no es un error real)\r\n        if (\r\n          error.response?.status === 404 &&\r\n          error.config?.url?.includes(\"/comunicaciones/cliente/\")\r\n        ) {\r\n          // Retornar una respuesta exitosa vac√≠a en lugar de error\r\n          return { data: { data: { comunicaciones: [] } } };\r\n        }\r\n\r\n        if (error.response?.status === 401) this.handleUnauthorized();\r\n        return Promise.reject(this.normalizeError(error));\r\n      }\r\n    );\r\n  }\r\n\r\n  getToken() {\r\n    return localStorage.getItem(\"authToken\");\r\n  }\r\n\r\n  setToken(token) {\r\n    token\r\n      ? localStorage.setItem(\"authToken\", token)\r\n      : localStorage.removeItem(\"authToken\");\r\n  }\r\n\r\n  handleUnauthorized() {\r\n    this.setToken(null);\r\n    localStorage.removeItem(\"userRole\");\r\n    localStorage.removeItem(\"userEmail\");\r\n    if (window.location.pathname !== \"/login\") {\r\n      window.location.href = \"/login\";\r\n    }\r\n  }\r\n\r\n  normalizeError(error) {\r\n    return {\r\n      message: error.message || \"Error desconocido\",\r\n      status: error.response?.status,\r\n      data: error.response?.data,\r\n      isNetworkError: !error.response,\r\n      isServerError: error.response?.status >= 500,\r\n      isClientError:\r\n        error.response?.status >= 400 && error.response?.status < 500,\r\n      originalError: error,\r\n      userMessage:\r\n        error.response?.data?.message || error.message || \"Error desconocido\",\r\n    };\r\n  }\r\n\r\n  // M√©todos HTTP\r\n  async get(url, config = {}) {\r\n    const res = await this.api.get(url, config);\r\n    return res.data;\r\n  }\r\n\r\n  async post(url, data = {}, config = {}) {\r\n    const res = await this.api.post(url, data, config);\r\n    return res.data;\r\n  }\r\n\r\n  async put(url, data = {}, config = {}) {\r\n    const res = await this.api.put(url, data, config);\r\n    return res.data;\r\n  }\r\n\r\n  async patch(url, data = {}, config = {}) {\r\n    const res = await this.api.patch(url, data, config);\r\n    return res.data;\r\n  }\r\n\r\n  async delete(url, config = {}) {\r\n    const res = await this.api.delete(url, config);\r\n    return res.data;\r\n  }\r\n\r\n  async healthCheck() {\r\n    try {\r\n      const response = await this.get(\"/health\");\r\n      return { healthy: true, ...response };\r\n    } catch (error) {\r\n      return { healthy: false, error: error.userMessage };\r\n    }\r\n  }\r\n}\r\n\r\nconst httpService = new HttpService();\r\nexport default httpService;\r\n","import httpService from \"./httpService\";\r\n\r\n/**\r\n * Servicio de autenticaci√≥n\r\n * Maneja todas las operaciones relacionadas con login, logout, registro, etc.\r\n */\r\nclass AuthService {\r\n  /**\r\n   * Iniciar sesi√≥n\r\n   */\r\n  async login(email, password) {\r\n    try {\r\n      console.log(\"=== ENVIANDO LOGIN REQUEST ===\");\r\n      console.log(\"Email:\", email);\r\n      \r\n      const response = await httpService.post(\"/usuarios/login\", {\r\n        email,\r\n        password,\r\n      });\r\n      \r\n      console.log(\"=== RESPUESTA DEL SERVIDOR ===\");\r\n      console.log(\"Respuesta completa:\", response);\r\n      console.log(\"¬øTiene token?\", !!response.token);\r\n      console.log(\"Usuario:\", response.usuario);\r\n      console.log(\"=============================\");\r\n      \r\n      if (response.token) {\r\n        httpService.setToken(response.token);\r\n      }\r\n      return {\r\n        success: true,\r\n        data: response,\r\n        user: response.usuario,\r\n        token: response.token,\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Error en login:\", error);\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n        details: error,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cerrar sesi√≥n\r\n   */\r\n  async logout() {\r\n    try {\r\n      await httpService.post(\"/usuarios/logout\");\r\n      httpService.setToken(null);\r\n      return { success: true };\r\n    } catch (error) {\r\n      httpService.setToken(null);\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n        details: error,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Registrar nuevo usuario\r\n   */\r\n  async register(userData) {\r\n    try {\r\n      const response = await httpService.post(\"/auth/register\", userData);\r\n      return {\r\n        success: true,\r\n        data: response,\r\n        message: \"Usuario registrado exitosamente\",\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n        details: error,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Verificar token actual\r\n   */\r\n  async verifyToken() {\r\n    try {\r\n      const response = await httpService.get(\"/usuarios/token-info\");\r\n      return {\r\n        success: true,\r\n        valid: true,\r\n        user: response.tokenInfo?.usuario || response.usuario,\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        valid: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refrescar token\r\n   */\r\n  async refreshToken() {\r\n    try {\r\n      const response = await httpService.post(\"/usuarios/extender-sesion\");\r\n      if (response.token) {\r\n        httpService.setToken(response.token);\r\n      }\r\n      return {\r\n        success: true,\r\n        token: response.token,\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Solicitar recuperaci√≥n de contrase√±a\r\n   */\r\n  async requestPasswordReset(email) {\r\n    try {\r\n      const response = await httpService.post(\"/auth/forgot-password\", {\r\n        email,\r\n      });\r\n      return {\r\n        success: true,\r\n        message:\r\n          \"Se ha enviado un email con instrucciones para recuperar tu contrase√±a\",\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Restablecer contrase√±a\r\n   */\r\n  async resetPassword(token, newPassword) {\r\n    try {\r\n      const response = await httpService.post(\"/auth/reset-password\", {\r\n        token,\r\n        password: newPassword,\r\n      });\r\n      return {\r\n        success: true,\r\n        message: \"Contrase√±a restablecida exitosamente\",\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cambiar contrase√±a (usuario autenticado)\r\n   */\r\n  async changePassword(currentPassword, newPassword) {\r\n    try {\r\n      const response = await httpService.put(\"/auth/change-password\", {\r\n        currentPassword,\r\n        newPassword,\r\n      });\r\n      return {\r\n        success: true,\r\n        message: \"Contrase√±a cambiada exitosamente\",\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtener perfil del usuario actual\r\n   */\r\n  async getProfile() {\r\n    try {\r\n      const response = await httpService.get(\"/auth/profile\");\r\n      return {\r\n        success: true,\r\n        user: response,\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Actualizar perfil del usuario\r\n   */\r\n  async updateProfile(profileData) {\r\n    try {\r\n      const response = await httpService.put(\"/auth/profile\", profileData);\r\n      return {\r\n        success: true,\r\n        user: response,\r\n        message: \"Perfil actualizado exitosamente\",\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.userMessage,\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nconst authService = new AuthService();\r\nexport default authService;\r\n","import { useState, useEffect, createContext, useContext } from \"react\";\r\nimport useTokenExpiration from \"./useTokenExpiration\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport EnvConfig from \"../utils/config\";\r\nimport authService from \"../services/authService\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\n// Contexto de autenticaci√≥n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const loadUserFromStorage = async () => {\r\n      const token = localStorage.getItem(\"authToken\") || localStorage.getItem(\"token\");\r\n      const expiresAt = localStorage.getItem(\"tokenExpiresAt\");\r\n      const now = Date.now();\r\n      // Puede venir como 'userRole', 'role' o 'rol'\r\n      const userRole = localStorage.getItem(\"userRole\") || localStorage.getItem(\"role\") || localStorage.getItem(\"rol\");\r\n      const userEmail = localStorage.getItem(\"userEmail\");\r\n      \r\n      if (token) {\r\n        // Verificar si el token ha expirado\r\n        let tokenExpired = false;\r\n        try {\r\n          const decoded = jwtDecode(token);\r\n          const tokenExpTime = decoded.exp * 1000;\r\n          tokenExpired = now >= tokenExpTime;\r\n        } catch (error) {\r\n          console.warn(\"Error decodificando token:\", error);\r\n          tokenExpired = true;\r\n        }\r\n        \r\n        // Si el token no ha expirado o si no tenemos fecha de expiraci√≥n v√°lida\r\n        if (!tokenExpired && (!expiresAt || now < Number(expiresAt))) {\r\n          const userData = {\r\n            token,\r\n            rol: userRole,\r\n            email: userEmail || \"usuario@ejemplo.com\",\r\n          };\r\n          setUser(userData);\r\n          setIsAuthenticated(true);\r\n        } else {\r\n          // Token expirado, limpiar todo\r\n          console.log(\"Token expirado, limpiando localStorage\");\r\n          localStorage.removeItem(\"authToken\");\r\n          localStorage.removeItem(\"token\");\r\n          localStorage.removeItem(\"tokenExpiresAt\");\r\n          localStorage.removeItem(\"userRole\");\r\n          localStorage.removeItem(\"role\");\r\n          localStorage.removeItem(\"rol\");\r\n          localStorage.removeItem(\"userEmail\");\r\n          setUser(null);\r\n          setIsAuthenticated(false);\r\n        }\r\n      } else {\r\n        // No hay token\r\n        setUser(null);\r\n        setIsAuthenticated(false);\r\n      }\r\n      setIsLoading(false);\r\n    };\r\n    loadUserFromStorage();\r\n  }, []);\r\n\r\n  // Integrar el hook de expiraci√≥n de token\r\n  useTokenExpiration(user?.token, (newToken) => {\r\n    setUser((prev) => ({ ...prev, token: newToken }));\r\n    localStorage.setItem(\"authToken\", newToken);\r\n    try {\r\n      const decoded = jwtDecode(newToken);\r\n      localStorage.setItem(\"tokenExpiresAt\", decoded.exp * 1000);\r\n    } catch (error) {\r\n      console.warn(\"Error al decodificar nuevo token:\", error);\r\n    }\r\n  });\r\n\r\n  const login = async (email, password) => {\r\n    setIsLoading(true);\r\n    try {\r\n      // Verificar configuraci√≥n del backend\r\n      console.log(\"Iniciando login para:\", email);\r\n      \r\n      const result = await authService.login(email, password);\r\n      if (result.success) {\r\n        localStorage.setItem(\"authToken\", result.token);\r\n        localStorage.setItem(\"userRole\", result.user.rol);\r\n        localStorage.setItem(\"userEmail\", result.user.email);\r\n        \r\n        // Guardar fecha de expiraci√≥n del token y mostrar info de debugging\r\n        try {\r\n          const decoded = jwtDecode(result.token);\r\n          const tokenDurationMs = (decoded.exp - decoded.iat) * 1000;\r\n          const tokenDurationMin = Math.round(tokenDurationMs / 1000 / 60);\r\n          \r\n          console.log(\"=== TOKEN INFO ===\");\r\n          console.log(\"Token emitido en:\", new Date(decoded.iat * 1000).toLocaleString());\r\n          console.log(\"Token expira en:\", new Date(decoded.exp * 1000).toLocaleString());\r\n          console.log(\"Duraci√≥n configurada:\", tokenDurationMin, \"minutos\");\r\n          console.log(\"Token completo:\", result.token);\r\n          console.log(\"================\");\r\n          \r\n          localStorage.setItem(\"tokenExpiresAt\", decoded.exp * 1000);\r\n        } catch (error) {\r\n          console.warn(\"Error al decodificar token en login:\", error);\r\n        }\r\n        \r\n        setUser({ ...result.user, token: result.token });\r\n        setIsAuthenticated(true);\r\n        setIsLoading(false);\r\n        return { success: true, user: { ...result.user, token: result.token } };\r\n      } else {\r\n        setIsLoading(false);\r\n        return { success: false, error: result.error };\r\n      }\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      return { success: false, error: \"Error al iniciar sesi√≥n\" };\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await authService.logout();\r\n    } catch (error) {\r\n      console.warn(\"Error al llamar logout del backend:\", error);\r\n    }\r\n    finally {\r\n      // Limpiar completamente todo el localStorage de autenticaci√≥n\r\n      localStorage.removeItem(\"authToken\");\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"tokenExpiresAt\");\r\n      localStorage.removeItem(\"userRole\");\r\n      localStorage.removeItem(\"role\");\r\n      localStorage.removeItem(\"rol\");\r\n      localStorage.removeItem(\"userEmail\");\r\n      localStorage.removeItem(\"rememberMe\");\r\n      \r\n      setUser(null);\r\n      setIsAuthenticated(false);\r\n      \r\n      // Usar navigate para ir al login y luego forzar recarga\r\n      navigate(\"/login\", { replace: true });\r\n      \r\n      // Forzar recarga despu√©s de un peque√±o delay\r\n      setTimeout(() => {\r\n        window.location.replace(\"/login\");\r\n      }, 100);\r\n    }\r\n  };\r\n\r\n  const hasRole = (role) => user?.rol === role;\r\n  const hasAnyRole = (roles) => isAuthenticated && roles.includes(user?.rol);\r\n\r\n  const register = async (userData) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await authService.register(userData);\r\n      setIsLoading(false);\r\n      return result;\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      return { success: false, error: \"Error al registrar usuario\" };\r\n    }\r\n  };\r\n\r\n  const forgotPassword = async (email) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await authService.requestPasswordReset(email);\r\n      setIsLoading(false);\r\n      return result;\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      return { success: false, error: \"Error al solicitar recuperaci√≥n de contrase√±a\" };\r\n    }\r\n  };\r\n\r\n  const resetPassword = async (token, newPassword) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await authService.resetPassword(token, newPassword);\r\n      setIsLoading(false);\r\n      return result;\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      return { success: false, error: \"Error al restablecer contrase√±a\" };\r\n    }\r\n  };\r\n\r\n  const updateProfile = async (profileData) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await authService.updateProfile(profileData);\r\n      if (result.success) {\r\n        setUser((prevUser) => ({ ...prevUser, ...result.user }));\r\n      }\r\n      setIsLoading(false);\r\n      return result;\r\n    } catch (error) {\r\n      setIsLoading(false);\r\n      return { success: false, error: \"Error al actualizar perfil\" };\r\n    }\r\n  };\r\n\r\n  const refreshToken = async () => {\r\n    try {\r\n      const result = await authService.refreshToken();\r\n      if (result.success) {\r\n        localStorage.setItem(\"authToken\", result.token);\r\n        \r\n        // Guardar fecha de expiraci√≥n del nuevo token\r\n        try {\r\n          const decoded = jwtDecode(result.token);\r\n          localStorage.setItem(\"tokenExpiresAt\", decoded.exp * 1000);\r\n        } catch (error) {\r\n          console.warn(\"Error al decodificar token en refresh:\", error);\r\n        }\r\n        \r\n        setUser((prevUser) => ({ ...prevUser, token: result.token }));\r\n        return { success: true };\r\n      } else {\r\n        logout();\r\n        return { success: false };\r\n      }\r\n    } catch (error) {\r\n      logout();\r\n      return { success: false };\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    isLoading,\r\n    isAuthenticated,\r\n    login,\r\n    logout,\r\n    register,\r\n    forgotPassword,\r\n    resetPassword,\r\n    updateProfile,\r\n    refreshToken,\r\n    hasRole,\r\n    hasAnyRole,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error(\"useAuth debe ser usado dentro de un AuthProvider\");\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const useRequireAuth = (redirectTo = \"/login\") => {\r\n  const { isAuthenticated, isLoading } = useAuth();\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    if (!isLoading && !isAuthenticated) {\r\n      navigate(redirectTo);\r\n    }\r\n  }, [isAuthenticated, isLoading, navigate, redirectTo]);\r\n  return { isAuthenticated, isLoading };\r\n};\r\n\r\nexport const useRequireRole = (requiredRole, redirectTo = \"/\") => {\r\n  const { user, isAuthenticated, isLoading } = useAuth();\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      if (!isAuthenticated) {\r\n        navigate(\"/login\");\r\n      } else if (user?.rol !== requiredRole) {\r\n        navigate(redirectTo);\r\n      }\r\n    }\r\n  }, [user, isAuthenticated, isLoading, navigate, requiredRole, redirectTo]);\r\n  return {\r\n    hasAccess: isAuthenticated && user?.rol === requiredRole,\r\n    isLoading,\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n","import React, { useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport useAuth from '../hooks/useAuth';\r\nimport { hasPermission, getDefaultPath } from '../utils/auth';\r\n\r\nconst ProtectedRoute = ({ children, requiredPath }) => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const { user, isAuthenticated, isLoading } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && !isAuthenticated) {\r\n      navigate('/login', {\r\n        replace: true,\r\n        state: { from: location?.pathname }\r\n      });\r\n      return;\r\n    }\r\n    // Check permission with user role\r\n    if (!isLoading && requiredPath && (!user || !hasPermission(requiredPath, user.rol))) {\r\n      const defaultPath = getDefaultPath(user?.rol);\r\n      navigate(defaultPath, { replace: true });\r\n      return;\r\n    }\r\n  }, [isAuthenticated, isLoading, user, navigate, location?.pathname, requiredPath]);\r\n\r\n  // Show nothing while checking authentication/authorization\r\n  if (isLoading || !isAuthenticated) {\r\n    return null;\r\n  }\r\n  if (requiredPath && (!user || !hasPermission(requiredPath, user.rol))) {\r\n    return null;\r\n  }\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;","import React, { createContext, useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst ButtonHandlersContext = createContext();\r\n\r\nexport const useButtonHandlers = () => {\r\n  const context = useContext(ButtonHandlersContext);\r\n  if (!context) {\r\n    throw new Error('useButtonHandlers must be used within ButtonHandlersProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const ButtonHandlersProvider = ({ children }) => {\r\n  const navigate = useNavigate();\r\n\r\n  // Generic handlers for common button actions\r\n  const handleNavigate = (path) => {\r\n    try {\r\n      if (path) {\r\n        navigate(path);\r\n      }\r\n    } catch (error) {\r\n      console.error('Navigation error:', error);\r\n      // Fallback to window.location if navigate fails\r\n      if (path) {\r\n        window.location.href = path;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleExportData = async (data, filename, headers = []) => {\r\n    try {\r\n      let csvContent = '';\r\n      \r\n      if (headers?.length > 0) {\r\n        csvContent = headers?.join(',') + '\\n';\r\n      }\r\n      \r\n      if (data?.length > 0) {\r\n        const rows = data?.map(row => \r\n          Object.values(row)?.map(value => `\"${value || ''}\"`)?.join(',')\r\n        );\r\n        csvContent += rows?.join('\\n');\r\n      }\r\n\r\n      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = filename || `export-${new Date()?.toISOString()?.split('T')?.[0]}.csv`;\r\n      document.body?.appendChild(link);\r\n      link?.click();\r\n      document.body?.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n      \r\n      return { success: true, message: 'Datos exportados exitosamente' };\r\n    } catch (error) {\r\n      console.error('Error exporting data:', error);\r\n      return { success: false, message: 'Error al exportar datos' };\r\n    }\r\n  };\r\n\r\n  const handleRefresh = async (callback) => {\r\n    try {\r\n      if (callback && typeof callback === 'function') {\r\n        await callback();\r\n      }\r\n      return { success: true, message: 'Datos actualizados' };\r\n    } catch (error) {\r\n      console.error('Error refreshing data:', error);\r\n      return { success: false, message: 'Error al actualizar datos' };\r\n    }\r\n  };\r\n\r\n  const handleDelete = (item, onDelete, itemName = 'elemento') => {\r\n    if (window.confirm(`¬øEst√° seguro de que desea eliminar este ${itemName}?\\n\\nEsta acci√≥n no se puede deshacer.`)) {\r\n      if (onDelete && typeof onDelete === 'function') {\r\n        onDelete(item);\r\n        return { success: true, message: `${itemName} eliminado exitosamente` };\r\n      }\r\n    }\r\n    return { success: false, message: 'Eliminaci√≥n cancelada' };\r\n  };\r\n\r\n  const handleEdit = (item, onEdit, promptText = 'Nuevo valor:') => {\r\n    const newValue = prompt(promptText, item?.name || '');\r\n    if (newValue && newValue?.trim() && newValue !== item?.name) {\r\n      if (onEdit && typeof onEdit === 'function') {\r\n        onEdit({ ...item, name: newValue?.trim() });\r\n        return { success: true, message: 'Elemento actualizado exitosamente' };\r\n      }\r\n    }\r\n    return { success: false, message: 'Edici√≥n cancelada o sin cambios' };\r\n  };\r\n\r\n  const handleApprove = (item, onApprove, message = '¬øDesea aprobar este elemento?') => {\r\n    if (window.confirm(message)) {\r\n      if (onApprove && typeof onApprove === 'function') {\r\n        onApprove(item);\r\n        return { success: true, message: 'Elemento aprobado exitosamente' };\r\n      }\r\n    }\r\n    return { success: false, message: 'Aprobaci√≥n cancelada' };\r\n  };\r\n\r\n  const handleReject = (item, onReject, message = '¬øDesea rechazar este elemento?') => {\r\n    if (window.confirm(message)) {\r\n      if (onReject && typeof onReject === 'function') {\r\n        onReject(item);\r\n        return { success: true, message: 'Elemento rechazado' };\r\n      }\r\n    }\r\n    return { success: false, message: 'Rechazo cancelado' };\r\n  };\r\n\r\n  const value = {\r\n    handleNavigate,\r\n    handleExportData,\r\n    handleRefresh,\r\n    handleDelete,\r\n    handleEdit,\r\n    handleApprove,\r\n    handleReject\r\n  };\r\n\r\n  return (\r\n    <ButtonHandlersContext.Provider value={value}>\r\n      {children}\r\n    </ButtonHandlersContext.Provider>\r\n  );\r\n};\r\n\r\n// Create a wrapper component that doesn't use useNavigate at the top level\r\nexport const SafeButtonHandlersProvider = ({ children }) => {\r\n  return (\r\n    <ButtonHandlersContext.Provider value={null}>\r\n      {children}\r\n    </ButtonHandlersContext.Provider>\r\n  );\r\n};\r\n\r\nexport default ButtonHandlersProvider;","import { clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs) {\r\n    return twMerge(clsx(inputs));\r\n}","import React from 'react';\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva } from \"class-variance-authority\";\r\nimport { cn } from \"../../utils/cn\";\r\nimport Icon from '../AppIcon';\r\n\r\nconst buttonVariants = cva(\r\n    \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n    {\r\n        variants: {\r\n            variant: {\r\n                default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n                destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n                outline: \"border border-input hover:bg-accent hover:text-accent-foreground\",\r\n                secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n                ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n                link: \"text-primary underline-offset-4 hover:underline\",\r\n                success: \"bg-success text-success-foreground hover:bg-success/90\",\r\n                warning: \"bg-warning text-warning-foreground hover:bg-warning/90\",\r\n                danger: \"bg-error text-error-foreground hover:bg-error/90\",\r\n            },\r\n            size: {\r\n                default: \"h-10 px-4 py-2\",\r\n                sm: \"h-9 rounded-md px-3\",\r\n                lg: \"h-11 rounded-md px-8\",\r\n                icon: \"h-10 w-10\",\r\n                xs: \"h-8 rounded-md px-2 text-xs\",\r\n                xl: \"h-12 rounded-md px-10 text-base\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            variant: \"default\",\r\n            size: \"default\",\r\n        },\r\n    }\r\n);\r\n\r\nconst Button = React.forwardRef(({\r\n    className,\r\n    variant,\r\n    size,\r\n    asChild = false,\r\n    children,\r\n    loading = false,\r\n    iconName = null,\r\n    iconPosition = 'left',\r\n    iconSize = null,\r\n    fullWidth = false,\r\n    disabled = false,\r\n    ...props\r\n}, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n\r\n    // Icon size mapping based on button size\r\n    const iconSizeMap = {\r\n        xs: 12,\r\n        sm: 14,\r\n        default: 16,\r\n        lg: 18,\r\n        xl: 20,\r\n        icon: 16,\r\n    };\r\n\r\n    const calculatedIconSize = iconSize || iconSizeMap?.[size] || 16;\r\n\r\n    // Loading spinner\r\n    const LoadingSpinner = () => (\r\n        <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M12 2a10 10 0 1 1-10 10\" />\r\n        </svg>\r\n    );\r\n\r\n    const renderIcon = () => {\r\n        if (!iconName) return null;\r\n        try {\r\n            return (\r\n                <Icon\r\n                    name={iconName}\r\n                    size={calculatedIconSize}\r\n                    className={cn(\r\n                        children && iconPosition === 'left' && \"mr-2\",\r\n                        children && iconPosition === 'right' && \"ml-2\"\r\n                    )}\r\n                />\r\n            );\r\n        } catch {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const renderFallbackButton = () => (\r\n        <button\r\n            className={cn(\r\n                buttonVariants({ variant, size, className }),\r\n                fullWidth && \"w-full\"\r\n            )}\r\n            ref={ref}\r\n            disabled={disabled || loading}\r\n            {...props}\r\n        >\r\n            {loading && <LoadingSpinner />}\r\n            {iconName && iconPosition === 'left' && renderIcon()}\r\n            {children}\r\n            {iconName && iconPosition === 'right' && renderIcon()}\r\n        </button>\r\n    );\r\n\r\n    // When asChild is true, merge icons into the child element\r\n    if (asChild) {\r\n        try {\r\n            if (!children || React.Children?.count(children) !== 1) {\r\n                return renderFallbackButton();\r\n            }\r\n\r\n            const child = React.Children?.only(children);\r\n\r\n            if (!React.isValidElement(child)) {\r\n                return renderFallbackButton();\r\n            }\r\n            const content = (\r\n                <>\r\n                    {loading && <LoadingSpinner />}\r\n                    {iconName && iconPosition === 'left' && renderIcon()}\r\n                    {child?.props?.children}\r\n                    {iconName && iconPosition === 'right' && renderIcon()}\r\n                </>\r\n            );\r\n\r\n            const clonedChild = React.cloneElement(child, {\r\n                className: cn(\r\n                    buttonVariants({ variant, size, className }),\r\n                    fullWidth && \"w-full\",\r\n                    child?.props?.className\r\n                ),\r\n                disabled: disabled || loading || child?.props?.disabled,\r\n                children: content,\r\n            });\r\n\r\n            return <Comp ref={ref} {...props}>{clonedChild}</Comp>;\r\n        } catch {\r\n            return renderFallbackButton();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Comp\r\n            className={cn(\r\n                buttonVariants({ variant, size, className }),\r\n                fullWidth && \"w-full\"\r\n            )}\r\n            ref={ref}\r\n            disabled={disabled || loading}\r\n            {...props}\r\n        >\r\n            {loading && <LoadingSpinner />}\r\n            {iconName && iconPosition === 'left' && renderIcon()}\r\n            {children}\r\n            {iconName && iconPosition === 'right' && renderIcon()}\r\n        </Comp>\r\n    );\r\n});\r\n\r\nButton.displayName = \"Button\";\r\nexport default Button;","import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Button from 'components/ui/Button';\r\nimport Icon from 'components/AppIcon';\r\n\r\nconst NotFound = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const handleGoHome = () => {\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col items-center justify-center bg-background p-4\">\r\n      <div className=\"text-center max-w-md\">\r\n        <div className=\"flex justify-center mb-6\">\r\n          <div className=\"relative\">\r\n            <h1 className=\"text-9xl font-bold text-primary opacity-20\">404</h1>\r\n          </div>\r\n        </div>\r\n\r\n        <h2 className=\"text-2xl font-medium text-onBackground mb-2\">Page Not Found</h2>\r\n        <p className=\"text-onBackground/70 mb-8\">\r\n          The page you're looking for doesn't exist. Let's get you back!\r\n        </p>\r\n\r\n        <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n          <Button\r\n            variant=\"primary\"\r\n            icon={<Icon name=\"ArrowLeft\" />}\r\n            iconPosition=\"left\"\r\n            onClick={() => window.history?.back()}\r\n          >\r\n            Go Back\r\n          </Button>\r\n\r\n          <Button\r\n            variant=\"outline\"\r\n            icon={<Icon name=\"Home\" />}\r\n            iconPosition=\"left\"\r\n            onClick={handleGoHome}\r\n          >\r\n            Back to Home\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\nimport { cn } from \"../../utils/cn\";\r\n\r\nconst Input = React.forwardRef(({\r\n    className,\r\n    type = \"text\",\r\n    label,\r\n    description,\r\n    error,\r\n    required = false,\r\n    id,\r\n    value,\r\n    ...props\r\n}, ref) => {\r\n    // Generate unique ID if not provided\r\n    const inputId = id || `input-${Math.random()?.toString(36)?.substr(2, 9)}`;\r\n    \r\n    // Ensure value is always defined (never undefined)\r\n    const safeValue = value !== undefined ? value : '';\r\n\r\n    // Base input classes\r\n    const baseInputClasses = \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\";\r\n\r\n    // Checkbox-specific styles\r\n    if (type === \"checkbox\") {\r\n        return (\r\n            <input\r\n                type=\"checkbox\"\r\n                className={cn(\r\n                    \"h-4 w-4 rounded border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                id={inputId}\r\n                checked={!!value}\r\n                {...props}\r\n            />\r\n        );\r\n    }\r\n\r\n    // Radio button-specific styles\r\n    if (type === \"radio\") {\r\n        return (\r\n            <input\r\n                type=\"radio\"\r\n                className={cn(\r\n                    \"h-4 w-4 rounded-full border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                id={inputId}\r\n                checked={!!value}\r\n                {...props}\r\n            />\r\n        );\r\n    }\r\n\r\n    // For regular inputs with wrapper structure\r\n    return (\r\n        <div className=\"space-y-2\">\r\n            {label && (\r\n                <label\r\n                    htmlFor={inputId}\r\n                    className={cn(\r\n                        \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\",\r\n                        error ? \"text-destructive\" : \"text-foreground\"\r\n                    )}\r\n                >\r\n                    {label}\r\n                    {required && <span className=\"text-destructive ml-1\">*</span>}\r\n                </label>\r\n            )}\r\n\r\n            <input\r\n                type={type}\r\n                className={cn(\r\n                    baseInputClasses,\r\n                    error && \"border-destructive focus-visible:ring-destructive\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                id={inputId}\r\n                value={safeValue}\r\n                {...props}\r\n            />\r\n\r\n            {description && !error && (\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                    {description}\r\n                </p>\r\n            )}\r\n\r\n            {error && (\r\n                <p className=\"text-sm text-destructive\">\r\n                    {error}\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nInput.displayName = \"Input\";\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nfunction Image({\r\n  src,\r\n  alt = \"Image Name\",\r\n  className = \"\",\r\n  ...props\r\n}) {\r\n\r\n  return (\r\n    <img\r\n      src={src}\r\n      alt={alt}\r\n      className={className}\r\n      onError={(e) => {\r\n        e.target.src = \"/assets/images/no_image.png\"\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Image;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport Icon from '../AppIcon';\r\nimport Button from './Button';\r\nimport Input from './Input';\r\nimport AppImage from '../AppImage';\r\nimport { getAllowedNavigationItems } from '../../utils/auth';\r\nimport useAuth from '../../hooks/useAuth';\r\nimport { useNotifications } from '../../context/NotificationContext';\r\nimport { useConfirmDialog } from '../../ui/ConfirmDialogContext';\r\n\r\nconst Sidebar = ({ isCollapsed = false, onToggle }) => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [showSearchResults, setShowSearchResults] = useState(false);\r\n  const [navigationItems, setNavigationItems] = useState([]);\r\n  const { user, isAuthenticated, logout } = useAuth();\r\n  const { showSuccess } = useNotifications();\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated && user) {\r\n      const allowedItems = getAllowedNavigationItems(user?.rol);\r\n      setNavigationItems(allowedItems);\r\n    } else {\r\n      navigate('/login');\r\n    }\r\n  }, [isAuthenticated, user, navigate]);\r\n\r\n  const [expandedItems, setExpandedItems] = useState(['Recursos', 'Negocio']);\r\n\r\n  const handleSearch = (query) => {\r\n    setSearchQuery(query);\r\n    if (query?.length > 2) {\r\n      // Filter search results based on user's allowed paths\r\n      const allowedPaths = navigationItems?.flatMap(item => \r\n        item?.children ? item?.children?.map(child => child?.path) : [item?.path]\r\n      )?.filter(Boolean);\r\n\r\n      const mockResults = [\r\n        { type: 'project', title: 'Instalaci√≥n Aire Acondicionado - Edificio A', path: '/proyectos' },\r\n        { type: 'client', title: 'ABC Corporation', path: '/clientes' },\r\n        { type: 'work-order', title: 'WO-2024-001', path: '/operaciones' }\r\n      ]?.filter(item => \r\n        item?.title?.toLowerCase()?.includes(query?.toLowerCase()) &&\r\n        allowedPaths?.includes(item?.path)\r\n      );\r\n      \r\n      setSearchResults(mockResults);\r\n      setShowSearchResults(true);\r\n    } else {\r\n      setShowSearchResults(false);\r\n    }\r\n  };\r\n\r\n  const toggleExpanded = (label) => {\r\n    setExpandedItems(prev => \r\n      prev?.includes(label) \r\n        ? prev?.filter(item => item !== label)\r\n        : [...prev, label]\r\n    );\r\n  };\r\n\r\n  const handleNavigation = (path) => {\r\n    navigate(path);\r\n  };\r\n\r\n  const { showConfirm } = useConfirmDialog();\r\n  const handleLogout = async () => {\r\n    const confirmed = await showConfirm({\r\n      title: 'Cerrar sesi√≥n',\r\n      message: '¬øDeseas cerrar sesi√≥n?',\r\n      confirmText: 'S√≠',\r\n      cancelText: 'No'\r\n    });\r\n    if (confirmed) {\r\n      showSuccess('Sesi√≥n cerrada correctamente');\r\n      setTimeout(() => {\r\n        logout();\r\n      }, 1200);\r\n    }\r\n  };\r\n\r\n  const renderNavigationItem = (item, level = 0) => {\r\n    const isActive = location?.pathname === item?.path;\r\n    const hasChildren = item?.children && item?.children?.length > 0;\r\n    const isExpanded = expandedItems?.includes(item?.label);\r\n\r\n    const handleItemClick = (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      \r\n      if (hasChildren) {\r\n        toggleExpanded(item?.label);\r\n      } else if (item?.path) {\r\n        handleNavigation(item?.path);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div key={item?.label} className=\"relative\">\r\n        <div\r\n          className={`flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-smooth group ${\r\n            isActive\r\n              ? 'bg-primary text-primary-foreground'\r\n              : 'text-foreground hover:bg-muted'\r\n          } ${level > 0 ? 'ml-4' : ''}`}\r\n          onClick={handleItemClick}\r\n          title={isCollapsed ? item?.tooltip : ''}\r\n          role=\"button\"\r\n          tabIndex={0}\r\n          onKeyDown={(e) => {\r\n            if (e.key === 'Enter' || e.key === ' ') {\r\n              handleItemClick(e);\r\n            }\r\n          }}\r\n        >\r\n          <div className=\"flex items-center space-x-3 min-w-0 flex-1\">\r\n            <Icon \r\n              name={item?.icon} \r\n              size={20} \r\n              className={`flex-shrink-0 ${isActive ? 'text-primary-foreground' : 'text-muted-foreground group-hover:text-foreground'}`}\r\n            />\r\n            {!isCollapsed && (\r\n              <span className=\"font-medium text-sm truncate\">{item?.label}</span>\r\n            )}\r\n          </div>\r\n\r\n          {!isCollapsed && (\r\n            <div className=\"flex items-center space-x-2\">\r\n              {item?.badge && (\r\n                <span className={`px-2 py-1 text-xs rounded-full ${\r\n                  isActive \r\n                    ? 'bg-primary-foreground text-primary' \r\n                    : 'bg-accent text-accent-foreground'\r\n                }`}>\r\n                  {item?.badge}\r\n                </span>\r\n              )}\r\n              {hasChildren && (\r\n                <Icon \r\n                  name={isExpanded ? 'ChevronDown' : 'ChevronRight'} \r\n                  size={16}\r\n                  className={`transition-transform ${isActive ? 'text-primary-foreground' : 'text-muted-foreground'}`}\r\n                />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        {hasChildren && isExpanded && !isCollapsed && (\r\n          <div className=\"mt-1 space-y-1\">\r\n            {item?.children?.map(child => renderNavigationItem(child, level + 1))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Sidebar */}\r\n      <aside \r\n        className={`fixed left-0 top-0 h-full bg-card border-r border-border sidebar-shadow z-1000 transition-all duration-300 ${\r\n          isCollapsed ? 'w-16' : 'w-60'\r\n        }`}\r\n      >\r\n        <div className=\"flex flex-col h-full\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-4 border-b border-border\">\r\n            {!isCollapsed && (\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-8 h-8 flex items-center justify-center\">\r\n                  <AppImage\r\n                    src=\"assets/images/WhatsApp_Image_2025-09-24_at_8.13.50_PM-1759346787603.jpeg\"\r\n                    alt=\"CLIMAS H.M. Logo\"\r\n                    className=\"w-8 h-8 object-contain\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <h1 className=\"text-lg font-semibold text-foreground\">CLIMAS H.M.</h1>\r\n                  <p className=\"text-xs text-muted-foreground\">Gesti√≥n de Aire Acondicionado</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n            \r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              onClick={onToggle}\r\n              className=\"flex-shrink-0\"\r\n              title={isCollapsed ? 'Expandir barra lateral' : 'Contraer barra lateral'}\r\n            >\r\n              <Icon name={isCollapsed ? 'ChevronRight' : 'ChevronLeft'} size={20} />\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Search - Oculto temporalmente */}\r\n          {false && !isCollapsed && (\r\n            <div className=\"p-4 relative\">\r\n              <div className=\"relative\">\r\n                <Input\r\n                  type=\"search\"\r\n                  placeholder=\"Buscar proyectos, clientes...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => handleSearch(e?.target?.value)}\r\n                  className=\"pl-10\"\r\n                />\r\n                <Icon \r\n                  name=\"Search\" \r\n                  size={16} \r\n                  className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n                />\r\n              </div>\r\n\r\n              {/* Search Results */}\r\n              {showSearchResults && searchResults?.length > 0 && (\r\n                <div className=\"absolute top-full left-4 right-4 mt-1 bg-popover border border-border rounded-md shadow-lg z-1050\">\r\n                  <div className=\"py-2\">\r\n                    {searchResults?.map((result, index) => (\r\n                      <button\r\n                        key={index}\r\n                        onClick={() => {\r\n                          handleNavigation(result?.path);\r\n                          setShowSearchResults(false);\r\n                          setSearchQuery('');\r\n                        }}\r\n                        className=\"flex items-center space-x-3 w-full px-4 py-2 text-sm text-popover-foreground hover:bg-muted transition-smooth\"\r\n                      >\r\n                        <Icon \r\n                          name={result?.type === 'project' ? 'FolderOpen' : result?.type === 'client' ? 'Users' : 'ClipboardList'} \r\n                          size={16} \r\n                        />\r\n                        <div className=\"text-left\">\r\n                          <div className=\"font-medium\">{result?.title}</div>\r\n                          <div className=\"text-xs text-muted-foreground capitalize\">{result?.type}</div>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Navigation */}\r\n          <nav className=\"flex-1 px-4 py-2 space-y-1 overflow-y-auto\">\r\n            {navigationItems?.map(item => renderNavigationItem(item))}\r\n          </nav>\r\n\r\n          {/* User Profile */}\r\n          <div className=\"p-4 border-t border-border\">\r\n            <div className={`flex items-center justify-between p-3 rounded-lg bg-muted ${isCollapsed ? 'justify-center' : ''}`}>\r\n              <div className=\"flex items-center space-x-3 min-w-0 flex-1\">\r\n                <div className=\"w-8 h-8 bg-secondary rounded-full flex items-center justify-center flex-shrink-0\">\r\n                  <Icon name=\"User\" size={16} color=\"white\" />\r\n                </div>\r\n                {!isCollapsed && (\r\n                  <div className=\"min-w-0 flex-1\">\r\n                    <div className=\"text-sm font-medium text-foreground truncate\">\r\n                      {user?.email?.split('@')?.[0] || 'Usuario'}\r\n                    </div>\r\n                    <div className=\"text-xs text-muted-foreground truncate\">\r\n                      {user?.rol || 'Sin rol'}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {!isCollapsed && (\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  onClick={handleLogout}\r\n                  className=\"flex-shrink-0 hover:bg-destructive hover:text-destructive-foreground\"\r\n                  title=\"Cerrar sesi√≥n\"\r\n                >\r\n                  <Icon name=\"LogOut\" size={16} />\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </aside>\r\n      {/* Overlay for mobile */}\r\n      {!isCollapsed && (\r\n        <div \r\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-999 lg:hidden\"\r\n          onClick={onToggle}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Sidebar;","import React, { useState } from 'react';\r\nimport { useConfirmDialog } from '../../ui/ConfirmDialogContext';\r\nimport { useNotifications } from '../../context/NotificationContext';\r\nimport { useLocation } from 'react-router-dom';\r\nimport useAuth from '../../hooks/useAuth';\r\nimport Icon from '../AppIcon';\r\nimport Button from './Button';\r\nimport AppImage from '../AppImage';\r\n\r\nconst Header = ({ onMenuToggle, isMenuOpen = false }) => {\r\n  const location = useLocation();\r\n  const [userMenuOpen, setUserMenuOpen] = useState(false);\r\n\r\n  const navigationItems = [\r\n    // TODO: Habilitar cuando se implemente el dashboard\r\n    // { label: 'Dashboard', path: '/dashboard', icon: 'LayoutDashboard' },\r\n    { label: 'Projects', path: '/proyectos', icon: 'FolderOpen' },\r\n    { label: 'Work Orders', path: '/operaciones', icon: 'ClipboardList' },\r\n    { label: 'Clients', path: '/clientes', icon: 'Users' },\r\n    { label: 'Financial', path: '/finanzas', icon: 'DollarSign' }\r\n  ];\r\n\r\n  const secondaryItems = [\r\n    { label: 'Personnel', path: '/personal', icon: 'UserCheck' },\r\n    { label: 'Inventory', path: '/inventario', icon: 'Package' }\r\n  ];\r\n\r\n  const handleNavigation = (path) => {\r\n    window.location.href = path;\r\n  };\r\n\r\n  const handleUserMenuToggle = () => {\r\n    setUserMenuOpen(!userMenuOpen);\r\n  };\r\n\r\n  const { showSuccess } = useNotifications();\r\n  const { showConfirm } = useConfirmDialog();\r\n  const { logout } = useAuth();\r\n  const handleLogout = async () => {\r\n    const confirmed = await showConfirm({\r\n      title: 'Cerrar sesi√≥n',\r\n      message: '¬øDeseas cerrar sesi√≥n?',\r\n      confirmText: 'S√≠',\r\n      cancelText: 'No'\r\n    });\r\n    if (confirmed) {\r\n      showSuccess('Sesi√≥n cerrada correctamente');\r\n      setTimeout(() => {\r\n        logout();\r\n      }, 1200);\r\n    }\r\n  };\r\n\r\n  // Ocultar Header temporalmente\r\n  return null;\r\n\r\n  return (\r\n    <header className=\"fixed top-0 left-0 right-0 bg-card border-b border-border z-1000\">\r\n      <div className=\"flex items-center justify-between h-16 px-4 lg:px-6\">\r\n        {/* Left Section - Logo and Mobile Menu */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          {/* Mobile Menu Toggle */}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onMenuToggle}\r\n            className=\"lg:hidden\"\r\n            aria-label=\"Toggle navigation menu\"\r\n          >\r\n            <Icon name={isMenuOpen ? 'X' : 'Menu'} size={20} />\r\n          </Button>\r\n\r\n          {/* Logo */}\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-8 h-8 flex items-center justify-center\">\r\n              <AppImage\r\n                src=\"assets/images/WhatsApp_Image_2025-09-24_at_8.13.50_PM-1759346787603.jpeg\"\r\n                alt=\"CLIMAS H.M. Logo\"\r\n                className=\"w-8 h-8 object-contain\"\r\n              />\r\n            </div>\r\n            <div className=\"hidden sm:block\">\r\n              <h1 className=\"text-lg font-semibold text-foreground\">CLIMAS H.M.</h1>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Section - User Profile */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          {/* Notifications */}\r\n          <Button variant=\"ghost\" size=\"icon\" className=\"relative\">\r\n            <Icon name=\"Bell\" size={20} />\r\n            <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-accent text-accent-foreground text-xs rounded-full flex items-center justify-center\">\r\n              3\r\n            </span>\r\n          </Button>\r\n\r\n          {/* User Menu */}\r\n          <div className=\"relative\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              onClick={handleUserMenuToggle}\r\n              className=\"flex items-center space-x-2 px-3 py-2\"\r\n            >\r\n              <div className=\"w-8 h-8 bg-secondary rounded-full flex items-center justify-center\">\r\n                <Icon name=\"User\" size={16} color=\"white\" />\r\n              </div>\r\n              <div className=\"hidden md:block text-left\">\r\n                <div className=\"text-sm font-medium text-foreground\">John Smith</div>\r\n                <div className=\"text-xs text-muted-foreground\">Administrator</div>\r\n              </div>\r\n              <Icon name=\"ChevronDown\" size={16} />\r\n            </Button>\r\n\r\n            {userMenuOpen && (\r\n              <div className=\"absolute top-full right-0 mt-1 w-56 bg-popover border border-border rounded-md shadow-lg z-1050\">\r\n                <div className=\"py-1\">\r\n                  <div className=\"px-4 py-2 border-b border-border\">\r\n                    <div className=\"text-sm font-medium text-popover-foreground\">John Smith</div>\r\n                    <div className=\"text-xs text-muted-foreground\">john.smith@aireflowpro.com</div>\r\n                  </div>\r\n                  <button className=\"flex items-center space-x-3 w-full px-4 py-2 text-sm text-popover-foreground hover:bg-muted transition-smooth\">\r\n                    <Icon name=\"User\" size={16} />\r\n                    <span>Profile Settings</span>\r\n                  </button>\r\n                  <button className=\"flex items-center space-x-3 w-full px-4 py-2 text-sm text-popover-foreground hover:bg-muted transition-smooth\">\r\n                    <Icon name=\"Settings\" size={16} />\r\n                    <span>Preferences</span>\r\n                  </button>\r\n                  <button className=\"flex items-center space-x-3 w-full px-4 py-2 text-sm text-popover-foreground hover:bg-muted transition-smooth\">\r\n                    <Icon name=\"HelpCircle\" size={16} />\r\n                    <span>Help & Support</span>\r\n                  </button>\r\n                  <div className=\"border-t border-border mt-1 pt-1\">\r\n                    <button\r\n                      onClick={handleLogout}\r\n                      className=\"flex items-center space-x-3 w-full px-4 py-2 text-sm text-error hover:bg-muted transition-smooth\"\r\n                    >\r\n                      <Icon name=\"LogOut\" size={16} />\r\n                      <span>Sign Out</span>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport Icon from '../AppIcon';\r\nimport Button from './Button';\r\nimport { ROLE_PERMISSIONS } from '../../utils/auth';\r\n\r\nconst Breadcrumb = ({ customItems = null }) => {\r\n  const location = useLocation();\r\n\r\n  // Obtener el rol del usuario desde localStorage\r\n  const userRole = localStorage.getItem('userRole');\r\n  \r\n  // Obtener el defaultPath seg√∫n el rol del usuario\r\n  const getDefaultPathForRole = () => {\r\n    if (userRole && ROLE_PERMISSIONS[userRole]) {\r\n      return ROLE_PERMISSIONS[userRole].defaultPath;\r\n    }\r\n    return '/oportunidades'; // Fallback por defecto\r\n  };\r\n\r\n  const pathMapping = {\r\n    '/dashboard': { label: 'Panel', icon: 'LayoutDashboard' },\r\n    '/proyectos': { label: 'Gesti√≥n de proyectos', icon: 'FolderOpen' },\r\n    '/operaciones': { label: 'Procesamiento de √≥rdenes de trabajo', icon: 'ClipboardList' },\r\n    '/finanzas': { label: 'Gesti√≥n Financiera', icon: 'DollarSign' },\r\n    '/clientes': { label: 'Gesti√≥n de Clientes', icon: 'Users' },\r\n    '/personal': { label: 'Gesti√≥n de personal', icon: 'UserCheck' },\r\n    '/inventario': { label: 'Gesti√≥n de inventario', icon: 'Package' },\r\n    '/usuarios': { label: 'Gesti√≥n de Usuarios', icon: 'Users' },\r\n    '/oportunidades': { label: 'Oportunidades de Venta', icon: 'TrendingUp' },\r\n    '/constructor-cotizaciones': { label: 'Creaci√≥n de Cotizaciones', icon: 'FileText' },\r\n    '/cotizaciones': { label: 'Centro de Desarrollo de Cotizaciones', icon: 'FileEdit' },\r\n    '/monitoreo-ventas': { label: 'Monitoreo de Ejecuci√≥n de Ventas', icon: 'BarChart' },\r\n    '/centro-operaciones-taller': { label: 'Centro de Operaciones de Taller', icon: 'Wrench' },\r\n    '/operaciones-taller': { label: 'Gesti√≥n de Operaciones de Taller', icon: 'Settings' },\r\n    '/flujo-proyecto': { label: 'Gesti√≥n de Flujo de Trabajo', icon: 'GitBranch' },\r\n    '/documentacion-proyectos': { label: 'Centro de Documentaci√≥n', icon: 'FolderOpen' },\r\n    '/visor-galeria': { label: 'Galer√≠a de Proyectos', icon: 'Image' },\r\n    '/galeria-proyecto': { label: 'Detalles de Galer√≠a', icon: 'Images' },\r\n    '/abonos': { label: 'Gesti√≥n de Abonos', icon: 'CreditCard' }\r\n  };\r\n\r\n  const generateBreadcrumbs = () => {\r\n    if (customItems) return customItems;\r\n\r\n    const pathSegments = location?.pathname?.split('/')?.filter(segment => segment);\r\n    const defaultPath = getDefaultPathForRole();\r\n    const isOnDefaultPath = location?.pathname === defaultPath;\r\n    \r\n    // Breadcrumb ra\\u00edz din\\u00e1mico seg\\u00fan el rol\r\n    const breadcrumbs = [{ label: 'Inicio', path: defaultPath, icon: 'Home' }];\r\n\r\n    if (!isOnDefaultPath) {\r\n      const currentPath = location?.pathname;\r\n      const currentPage = pathMapping?.[currentPath];\r\n      \r\n      if (currentPage) {\r\n        breadcrumbs?.push({\r\n          label: currentPage?.label,\r\n          path: currentPath,\r\n          icon: currentPage?.icon,\r\n          current: true\r\n        });\r\n      }\r\n    } else {\r\n      breadcrumbs[0].current = true;\r\n    }\r\n\r\n    return breadcrumbs;\r\n  };\r\n\r\n  const breadcrumbs = generateBreadcrumbs();\r\n\r\n  const handleNavigation = (path) => {\r\n    if (path && !breadcrumbs?.find(b => b?.path === path)?.current) {\r\n      window.location.href = path;\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    window.history?.back();\r\n  };\r\n\r\n  return (\r\n    <nav className=\"flex items-center space-x-2 py-4\" aria-label=\"Breadcrumb\">\r\n      {/* Mobile Back Button */}\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"sm\"\r\n        onClick={handleBack}\r\n        className=\"md:hidden flex items-center space-x-2\"\r\n      >\r\n        <Icon name=\"ArrowLeft\" size={16} />\r\n        <span>Back</span>\r\n      </Button>\r\n      {/* Desktop Breadcrumbs */}\r\n      <ol className=\"hidden md:flex items-center space-x-2\">\r\n        {breadcrumbs?.map((item, index) => (\r\n          <li key={item?.path || index} className=\"flex items-center\">\r\n            {index > 0 && (\r\n              <Icon \r\n                name=\"ChevronRight\" \r\n                size={16} \r\n                className=\"text-muted-foreground mx-2\" \r\n              />\r\n            )}\r\n            \r\n            <div className=\"flex items-center space-x-2\">\r\n              {item?.current ? (\r\n                <div className=\"flex items-center space-x-2 text-foreground\">\r\n                  <Icon name={item?.icon} size={16} />\r\n                  <span className=\"font-medium text-sm\">{item?.label}</span>\r\n                </div>\r\n              ) : (\r\n                <button\r\n                  onClick={() => handleNavigation(item?.path)}\r\n                  className=\"flex items-center space-x-2 text-muted-foreground hover:text-foreground transition-smooth\"\r\n                >\r\n                  <Icon name={item?.icon} size={16} />\r\n                  <span className=\"text-sm\">{item?.label}</span>\r\n                </button>\r\n              )}\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ol>\r\n      {/* Mobile Current Page */}\r\n      <div className=\"md:hidden flex items-center space-x-2 text-foreground\">\r\n        <Icon name={breadcrumbs?.[breadcrumbs?.length - 1]?.icon} size={16} />\r\n        <span className=\"font-medium text-sm\">\r\n          {breadcrumbs?.[breadcrumbs?.length - 1]?.label}\r\n        </span>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Breadcrumb;","import React, { useState } from 'react';\r\nimport { Search, X, ChevronUp, ChevronDown, Download } from 'lucide-react';\r\n\r\n/* =========================\r\n   UI b√°sicos (con mejoras)\r\n========================= */\r\n\r\nconst Button = ({\r\n  children,\r\n  variant = 'default',\r\n  size = 'default',\r\n  onClick,\r\n  iconName,\r\n  iconPosition,\r\n  className = '',\r\n  disabled = false,\r\n  type = 'button',\r\n  title,\r\n}) => {\r\n  const Icon =\r\n    iconName === 'X'\r\n      ? X\r\n      : iconName === 'ChevronUp'\r\n      ? ChevronUp\r\n      : iconName === 'ChevronDown'\r\n      ? ChevronDown\r\n      : iconName === 'Download'\r\n      ? Download\r\n      : null;\r\n\r\n  const baseClasses =\r\n    'inline-flex items-center justify-center font-medium rounded-md transition-colors';\r\n  const variantClasses = {\r\n    default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n    outline:\r\n      'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\r\n    ghost: 'hover:bg-accent hover:text-accent-foreground',\r\n  };\r\n  const sizeClasses = {\r\n    default: 'h-10 px-4 py-2',\r\n    sm: 'h-9 rounded-md px-3 text-sm',\r\n  };\r\n  const disabledClasses = disabled ? 'opacity-60 cursor-not-allowed' : '';\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n      title={title}\r\n      className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${disabledClasses} ${className}`}\r\n    >\r\n      {Icon && iconPosition === 'left' && <Icon size={16} className=\"mr-2\" />}\r\n      {children}\r\n      {Icon && iconPosition === 'right' && <Icon size={16} className=\"ml-2\" />}\r\n    </button>\r\n  );\r\n};\r\n\r\nconst Input = ({\r\n  label,\r\n  type = 'text',\r\n  placeholder,\r\n  value,\r\n  onChange,\r\n  className = '',\r\n}) => {\r\n  return (\r\n    <div className=\"w-full\">\r\n      {label && (\r\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n          {label}\r\n        </label>\r\n      )}\r\n      <input\r\n        type={type}\r\n        placeholder={placeholder}\r\n        value={value}\r\n        onChange={onChange}\r\n        className={`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Select = ({ label, options, value, onChange, className = '' }) => {\r\n  return (\r\n    <div className={className}>\r\n      {label && (\r\n        <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n          {label}\r\n        </label>\r\n      )}\r\n      <select\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n      >\r\n        {options.map((option) => (\r\n          <option key={option.value} value={option.value}>\r\n            {option.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\n/* =========================\r\n   ProjectFilters principal\r\n========================= */\r\n\r\nconst ProjectFilters = ({\r\n  onFiltersChange,\r\n  totalProjects,\r\n  filteredProjects,\r\n  onExport, // callback que viene del padre para exportar\r\n}) => {\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    status: '',\r\n    department: '',\r\n    dateRange: '',\r\n    clientType: '',\r\n    priority: '',\r\n    minBudget: '',\r\n    maxBudget: '',\r\n    startDate: '',\r\n    endDate: '',\r\n  });\r\n\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'planning', label: 'Planificaci√≥n' },\r\n    { value: 'in-progress', label: 'En Progreso' },\r\n    { value: 'on-hold', label: 'En Pausa' }, // <- importante\r\n    { value: 'review', label: 'En Revisi√≥n' },\r\n    { value: 'completed', label: 'Completado' },\r\n    { value: 'cancelled', label: 'Cancelado' },\r\n  ];\r\n\r\n  const departmentOptions = [\r\n    { value: '', label: 'Todos los Departamentos' },\r\n    { value: 'sales', label: 'Ventas' },\r\n    { value: 'engineering', label: 'Ingenier√≠a' },\r\n    { value: 'installation', label: 'Instalaci√≥n' },\r\n    { value: 'maintenance', label: 'Mantenimiento' },\r\n    { value: 'administration', label: 'Administraci√≥n' },\r\n  ];\r\n\r\n  const dateRangeOptions = [\r\n    { value: '', label: 'Todas las Fechas' },\r\n    { value: 'today', label: 'Hoy' },\r\n    { value: 'week', label: 'Esta Semana' },\r\n    { value: 'month', label: 'Este Mes' },\r\n    { value: 'quarter', label: 'Este Trimestre' },\r\n    { value: 'year', label: 'Este A√±o' },\r\n  ];\r\n\r\n  const clientTypeOptions = [\r\n    { value: '', label: 'Todos los Clientes' },\r\n    { value: 'residential', label: 'Residencial' },\r\n    { value: 'commercial', label: 'Comercial' },\r\n    { value: 'industrial', label: 'Industrial' },\r\n    { value: 'government', label: 'Gubernamental' },\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: '', label: 'Todas las Prioridades' },\r\n    { value: 'low', label: 'Baja' },\r\n    { value: 'medium', label: 'Media' },\r\n    { value: 'high', label: 'Alta' },\r\n    { value: 'urgent', label: 'Urgente' },\r\n  ];\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    const newFilters = { ...filters, [key]: value };\r\n    setFilters(newFilters);\r\n    onFiltersChange?.(newFilters);\r\n  };\r\n\r\n  const clearAllFilters = () => {\r\n    const cleared = {\r\n      search: '',\r\n      status: '',\r\n      department: '',\r\n      dateRange: '',\r\n      clientType: '',\r\n      priority: '',\r\n      minBudget: '',\r\n      maxBudget: '',\r\n      startDate: '',\r\n      endDate: '',\r\n    };\r\n    setFilters(cleared);\r\n    onFiltersChange?.(cleared);\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters).some((v) => v !== '');\r\n\r\n  const handleExportClick = () => {\r\n    if (!onExport) return;\r\n    if (!filteredProjects || filteredProjects <= 0) {\r\n      alert('No hay proyectos para exportar con los filtros actuales.');\r\n      return;\r\n    }\r\n    onExport(); // el padre exporta lo que ya est√° filtrado/visible\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 mb-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">\r\n            Filtros de Proyectos\r\n          </h3>\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Mostrando {filteredProjects} de {totalProjects} proyectos\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2\">\r\n          {hasActiveFilters && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={clearAllFilters}\r\n              iconName=\"X\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Limpiar Filtros\r\n            </Button>\r\n          )}\r\n\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n            iconName={isExpanded ? 'ChevronUp' : 'ChevronDown'}\r\n            iconPosition=\"right\"\r\n          >\r\n            {isExpanded ? 'Menos Filtros' : 'M√°s Filtros'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search Bar */}\r\n      <div className=\"mb-4\">\r\n        <div className=\"relative\">\r\n          <Input\r\n            type=\"search\"\r\n            placeholder=\"Buscar por nombre de proyecto, cliente, c√≥digo...\"\r\n            value={filters.search}\r\n            onChange={(e) => handleFilterChange('search', e.target.value)}\r\n            className=\"pl-10\"\r\n          />\r\n          <Search\r\n            size={16}\r\n            className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Filters */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4\">\r\n        <Select\r\n          label=\"Estado\"\r\n          options={statusOptions}\r\n          value={filters.status}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Departamento\"\r\n          options={departmentOptions}\r\n          value={filters.department}\r\n          onChange={(value) => handleFilterChange('department', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Fecha\"\r\n          options={dateRangeOptions}\r\n          value={filters.dateRange}\r\n          onChange={(value) => handleFilterChange('dateRange', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Tipo de Cliente\"\r\n          options={clientTypeOptions}\r\n          value={filters.clientType}\r\n          onChange={(value) => handleFilterChange('clientType', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Prioridad\"\r\n          options={priorityOptions}\r\n          value={filters.priority}\r\n          onChange={(value) => handleFilterChange('priority', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <div className=\"flex items-end\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"default\"\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n            className=\"w-full\"\r\n            onClick={handleExportClick}\r\n            disabled={!filteredProjects}\r\n            title={\r\n              filteredProjects\r\n                ? 'Exportar proyectos filtrados'\r\n                : 'No hay resultados para exportar'\r\n            }\r\n          >\r\n            Exportar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Advanced Filters */}\r\n      {isExpanded && (\r\n        <div className=\"border-t border-border pt-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            <Input\r\n              label=\"Presupuesto M√≠nimo\"\r\n              type=\"number\"\r\n              placeholder=\"$0\"\r\n              value={filters.minBudget}\r\n              onChange={(e) => handleFilterChange('minBudget', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n\r\n            <Input\r\n              label=\"Presupuesto M√°ximo\"\r\n              type=\"number\"\r\n              placeholder=\"$999,999\"\r\n              value={filters.maxBudget}\r\n              onChange={(e) => handleFilterChange('maxBudget', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n\r\n            <Input\r\n              label=\"Fecha de Inicio\"\r\n              type=\"date\"\r\n              value={filters.startDate}\r\n              onChange={(e) => handleFilterChange('startDate', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n\r\n            <Input\r\n              label=\"Fecha de Finalizaci√≥n\"\r\n              type=\"date\"\r\n              value={filters.endDate}\r\n              onChange={(e) => handleFilterChange('endDate', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Active Filters pills */}\r\n      {hasActiveFilters && (\r\n        <div className=\"flex flex-wrap gap-2 mt-4 pt-4 border-t border-border\">\r\n          <span className=\"text-sm text-muted-foreground\">Filtros activos:</span>\r\n\r\n          {Object.entries(filters).map(([key, value]) => {\r\n            if (!value) return null;\r\n\r\n            // etiquetas amigables\r\n            let displayValue = value;\r\n            if (key === 'status')\r\n              displayValue =\r\n                statusOptions.find((opt) => opt.value === value)?.label ||\r\n                value;\r\n            if (key === 'department')\r\n              displayValue =\r\n                departmentOptions.find((opt) => opt.value === value)?.label ||\r\n                value;\r\n            if (key === 'dateRange')\r\n              displayValue =\r\n                dateRangeOptions.find((opt) => opt.value === value)?.label ||\r\n                value;\r\n            if (key === 'clientType')\r\n              displayValue =\r\n                clientTypeOptions.find((opt) => opt.value === value)?.label ||\r\n                value;\r\n            if (key === 'priority')\r\n              displayValue =\r\n                priorityOptions.find((opt) => opt.value === value)?.label ||\r\n                value;\r\n            if (key === 'minBudget' || key === 'maxBudget')\r\n              displayValue = `$${value}`;\r\n\r\n            return (\r\n              <div\r\n                key={key}\r\n                className=\"flex items-center space-x-1 bg-primary/10 text-primary px-2 py-1 rounded-md text-sm\"\r\n              >\r\n                <span>{displayValue}</span>\r\n                <button\r\n                  onClick={() => handleFilterChange(key, '')}\r\n                  className=\"hover:bg-primary/20 rounded-full p-0.5\"\r\n                >\r\n                  <X size={12} />\r\n                </button>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectFilters;\r\n\r\n/* ==========================================\r\n   Funci√≥n de filtrado para el componente padre\r\n   (YA CON OPCI√ìN A IMPLEMENTADA)\r\n========================================== */\r\n\r\nexport const applyProjectFilters = (projects, filters) => {\r\n  let filtered = [...projects];\r\n\r\n  // Search\r\n  if (filters?.search) {\r\n    const searchTerm = filters.search.toLowerCase();\r\n    filtered = filtered.filter(\r\n      (project) =>\r\n        project?.name?.toLowerCase()?.includes(searchTerm) ||\r\n        project?.code?.toLowerCase()?.includes(searchTerm) ||\r\n        project?.client?.name?.toLowerCase()?.includes(searchTerm)\r\n    );\r\n  }\r\n\r\n  // Status (incluye equivalentes cuando eliges \"En Pausa\")\r\n  if (filters?.status) {\r\n    filtered = filtered.filter((project) => {\r\n      const raw = (project?.status || '').toLowerCase().trim();\r\n      const target = filters.status.toLowerCase().trim();\r\n\r\n      // Coincidencia directa\r\n      if (raw === target) return true;\r\n\r\n      // Caso especial \"En Pausa\"\r\n      // target === 'on-hold'\r\n      // Queremos incluir estados equivalentes que el backend mete en \"pausa\"\r\n      if (target === 'on-hold') {\r\n        if (\r\n          raw.includes('pausa') ||     // \"en pausa\", \"pausado\", \"pausada\"\r\n          raw.includes('paus')  ||\r\n          raw.includes('hold')  ||     // \"on-hold\"\r\n          raw.includes('suspend') ||   // \"suspendido\", \"suspendida\"\r\n          raw.includes('detenid')      // \"detenido\", \"detenida\"\r\n        ) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    });\r\n  }\r\n\r\n  // Department\r\n  if (filters?.department) {\r\n    filtered = filtered.filter(\r\n      (project) =>\r\n        project?.department?.toLowerCase() ===\r\n        filters.department.toLowerCase()\r\n    );\r\n  }\r\n\r\n  // Client type\r\n  if (filters?.clientType) {\r\n    filtered = filtered.filter(\r\n      (project) => project?.client?.type === filters.clientType\r\n    );\r\n  }\r\n\r\n  // Priority\r\n  if (filters?.priority) {\r\n    filtered = filtered.filter(\r\n      (project) => project?.priority === filters.priority\r\n    );\r\n  }\r\n\r\n  // Date range (sobre startDate)\r\n  if (filters?.dateRange) {\r\n    const now = new Date();\r\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n\r\n    filtered = filtered.filter((project) => {\r\n      const startDate = new Date(project?.startDate);\r\n      if (isNaN(startDate)) return false;\r\n\r\n      switch (filters.dateRange) {\r\n        case 'today':\r\n          return startDate.toDateString() === today.toDateString();\r\n\r\n        case 'week': {\r\n          const weekAgo = new Date(today);\r\n          weekAgo.setDate(weekAgo.getDate() - 7);\r\n          return startDate >= weekAgo && startDate <= now;\r\n        }\r\n\r\n        case 'month':\r\n          return (\r\n            startDate.getMonth() === now.getMonth() &&\r\n            startDate.getFullYear() === now.getFullYear()\r\n          );\r\n\r\n        case 'quarter': {\r\n          const quarter = Math.floor(now.getMonth() / 3);\r\n          const projectQuarter = Math.floor(startDate.getMonth() / 3);\r\n          return (\r\n            projectQuarter === quarter &&\r\n            startDate.getFullYear() === now.getFullYear()\r\n          );\r\n        }\r\n\r\n        case 'year':\r\n          return startDate.getFullYear() === now.getFullYear();\r\n\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Budget range\r\n  if (filters?.minBudget) {\r\n    const minBudget = Number(filters.minBudget);\r\n    filtered = filtered.filter(\r\n      (project) => Number(project?.budget) >= minBudget\r\n    );\r\n  }\r\n\r\n  if (filters?.maxBudget) {\r\n    const maxBudget = Number(filters.maxBudget);\r\n    filtered = filtered.filter(\r\n      (project) => Number(project?.budget) <= maxBudget\r\n    );\r\n  }\r\n\r\n  // Exact start date (>=)\r\n  if (filters?.startDate) {\r\n    const filterStartDate = new Date(filters.startDate);\r\n    filtered = filtered.filter((project) => {\r\n      const projectStartDate = new Date(project?.startDate);\r\n      return !isNaN(projectStartDate) && projectStartDate >= filterStartDate;\r\n    });\r\n  }\r\n\r\n  // Exact end date (<=)\r\n  if (filters?.endDate) {\r\n    const filterEndDate = new Date(filters.endDate);\r\n    filtered = filtered.filter((project) => {\r\n      const projectEndDate = new Date(project?.endDate);\r\n      return !isNaN(projectEndDate) && projectEndDate <= filterEndDate;\r\n    });\r\n  }\r\n\r\n  return filtered;\r\n};\r\n","// services/proyectoService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst ROUTES = {\r\n  LIST: \"/proyectos/todos\",\r\n  GET_BY_ID: (id) => `/proyectos/obtener/${id}`,\r\n  CREATE: \"/proyectos/crear\",\r\n  UPDATE: (id) => `/proyectos/actualizar/${id}`,\r\n  DELETE: (id) => `/proyectos/eliminar/${id}`,\r\n\r\n  // ya no usamos GET_STATS viejo que daba 404\r\n  // GET_STATS: \"/proyectos/stats/get\",\r\n};\r\n\r\n// ‚ö†Ô∏è NUEVO: este endpoint vive en otro host/puerto (7071)\r\nconst EXTERNAL_ROUTES = {\r\n  STATS: \"http://localhost:7071/api/proyectos/estadisticas\",\r\n};\r\n\r\nconst EXTERNALS = {\r\n  CURRENCY_LATEST: \"https://api.currencyapi.com/v3/latest\",\r\n};\r\n\r\nfunction sanitizeCreatePayload(payload = {}) {\r\n  const out = { ...payload };\r\n\r\n  if (out?.presupuesto?._metaEquipos?.capturadoEn) {\r\n    out.presupuesto._metaEquipos.capturadoEn =\r\n      String(out.presupuesto._metaEquipos.capturadoEn)\r\n        .trim()\r\n        .toUpperCase();\r\n  }\r\n\r\n  if (out?.presupuesto && \"total\" in out.presupuesto) {\r\n    const { total, ...rest } = out.presupuesto;\r\n    out.presupuesto = rest;\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\nfunction getCurrencyApiKey() {\r\n  const env =\r\n    (typeof import.meta !== \"undefined\" && import.meta.env) ||\r\n    (typeof process !== \"undefined\" && process.env) ||\r\n    {};\r\n\r\n  return (\r\n    env.VITE_CURRENCY_API_KEY ||\r\n    env.REACT_APP_CURRENCY_API_KEY ||\r\n    \"fca_live_8tZwnMuA2xq5ExRpYPkQeZiVHGS2wXbFWnc1U7y3\"\r\n  );\r\n}\r\n\r\nconst proyectoService = {\r\n  async getProyectos(config = {}) {\r\n    const data = await httpService.get(ROUTES.LIST, config);\r\n    return data;\r\n  },\r\n\r\n  async getProyectoById(id, config = {}) {\r\n    const data = await httpService.get(ROUTES.GET_BY_ID(id), config);\r\n    return data;\r\n  },\r\n\r\n  async createProyecto(payload, config = {}) {\r\n    const body = sanitizeCreatePayload(payload);\r\n    const data = await httpService.post(ROUTES.CREATE, body, config);\r\n    return data;\r\n  },\r\n\r\n  async updateProyecto(id, payload, config = {}) {\r\n    const data = await httpService.put(ROUTES.UPDATE(id), payload, config);\r\n    return data;\r\n  },\r\n\r\n  async deleteProyecto(id, config = {}) {\r\n    const data = await httpService.delete(ROUTES.DELETE(id), config);\r\n    return data;\r\n  },\r\n\r\n  // üî• NUEVO: pide las estad√≠sticas ya calculadas al backend de puerto 7071\r\n  async getEstadisticas(config = {}) {\r\n    try {\r\n      const data = await httpService.get(EXTERNAL_ROUTES.STATS, {\r\n        // como es URL absoluta, httpService debe respetarla sin baseURL\r\n        timeout: 10000,\r\n        ...config,\r\n      });\r\n      return data;\r\n    } catch (err) {\r\n      console.warn(\r\n        \"[proyectoService.getEstadisticas] no pude obtener stats:\",\r\n        {\r\n          status: err?.status,\r\n          data: err?.data,\r\n          message: err?.userMessage || err?.message,\r\n        }\r\n      );\r\n      return null; // fallback\r\n    }\r\n  },\r\n\r\n  async getCurrencyRates({ base = \"USD\", currencies = [] } = {}, config = {}) {\r\n    const params = new URLSearchParams({\r\n      apikey: getCurrencyApiKey(),\r\n      base_currency: base,\r\n    });\r\n    if (Array.isArray(currencies) && currencies.length) {\r\n      params.set(\"currencies\", currencies.join(\",\"));\r\n    }\r\n\r\n    const url = `${EXTERNALS.CURRENCY_LATEST}?${params.toString()}`;\r\n\r\n    const data = await httpService.get(url, {\r\n      timeout: 15000,\r\n      ...config,\r\n    });\r\n\r\n    return data;\r\n  },\r\n};\r\n\r\nexport default proyectoService;\r\n","import httpService from './httpService';\r\n\r\n\r\nconst clientService = {\r\n  async createClient(data) {\r\n    // POST a la ruta relativa para crear cliente\r\n    const response = await httpService.post('/clientes/crear', data);\r\n    return response;\r\n  },\r\n\r\n  async getClients() {\r\n    // GET para obtener la lista de clientes\r\n    const response = await httpService.get('/clientes');\r\n    return response;\r\n  },\r\n\r\n  async updateClient(id, data) {\r\n    // PUT para editar cliente por id\r\n    const response = await httpService.put(`/clientes/${id}`, data);\r\n    return response;\r\n  },\r\n\r\n  async getClientById(id, data) {\r\n    // get para obtener cliente por id\r\n    const response = await httpService.get(`/clientes/${id}`, data);\r\n    return response;\r\n  },\r\n\r\n  async deleteClient(id) {\r\n    // delete para eliminar cliente por id\r\n    const response = await httpService.delete(`/clientes/${id}`);\r\n    return response;\r\n  }\r\n};\r\n\r\nexport default clientService;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\nimport proyectoService from 'services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport { useNotifications } from 'context/NotificationContext';\r\n\r\n/* === Config === */\r\nconst DEFAULT_USD_RATE = 18;\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\n/* === Helpers === */\r\nconst safeUUID = () => {\r\n  if (typeof crypto !== 'undefined' && crypto.randomUUID) return crypto.randomUUID();\r\n  return Math.random().toString(36).slice(2) + Date.now().toString(36);\r\n};\r\nconst parseISODate = (v) => {\r\n  if (!v) return null;\r\n  const d = new Date(v);\r\n  return isNaN(d.getTime()) ? null : d;\r\n};\r\nconst formatCurrency = (n) =>\r\n  n == null || isNaN(n)\r\n    ? '‚Äî'\r\n    : new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(n);\r\nconst formatUSD = (n) =>\r\n  n == null || isNaN(n)\r\n    ? '‚Äî'\r\n    : new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'USD' }).format(n);\r\nconst formatDate = (d) => {\r\n  const x = d instanceof Date ? d : parseISODate(d);\r\n  if (!x) return '‚Äî';\r\n  return x.toLocaleDateString('es-MX', { day: '2-digit', month: '2-digit', year: 'numeric' });\r\n};\r\nconst getPriorityColor = (p) => {\r\n  const v = (p || '').toString().toLowerCase().trim();\r\n  const map = {\r\n    baja: 'text-green-600',\r\n    media: 'text-yellow-600',\r\n    alta: 'text-orange-600',\r\n    urgente: 'text-red-600',\r\n    low: 'text-green-600',\r\n    medium: 'text-yellow-600',\r\n    high: 'text-orange-600',\r\n    urgent: 'text-red-600',\r\n  };\r\n  return map[v] || 'text-gray-600';\r\n};\r\n\r\nconst STATUS_OPTIONS = [\r\n  { key: 'planning', label: 'Planificaci√≥n' },\r\n  { key: 'in_progress', label: 'En Progreso' },\r\n  { key: 'on_hold', label: 'En Pausa' },\r\n  { key: 'review', label: 'En Revisi√≥n' },\r\n  { key: 'completed', label: 'Completado' },\r\n  { key: 'cancelled', label: 'Cancelado' },\r\n];\r\n\r\nconst statusKeyFromAny = (raw) => {\r\n  if (raw == null) return null;\r\n  const v = String(raw).toLowerCase().trim();\r\n\r\n  if (v === '0') return 'planning';\r\n  if (v === '1') return 'in_progress';\r\n  if (v === '2') return 'on_hold';\r\n  if (v === '3') return 'review';\r\n  if (v === '4') return 'completed';\r\n  if (v === '5') return 'cancelled';\r\n\r\n  const map = {\r\n    planificacion: 'planning',\r\n    planificaci√≥n: 'planning',\r\n    planning: 'planning',\r\n    'en progreso': 'in_progress',\r\n    'en-progreso': 'in_progress',\r\n    in_progress: 'in_progress',\r\n    'in-progress': 'in_progress',\r\n    progress: 'in_progress',\r\n    'en pausa': 'on_hold',\r\n    'en-pausa': 'on_hold',\r\n    on_hold: 'on_hold',\r\n    paused: 'on_hold',\r\n    pausa: 'on_hold',\r\n    revision: 'review',\r\n    revisi√≥n: 'review',\r\n    review: 'review',\r\n    completado: 'completed',\r\n    complete: 'completed',\r\n    completed: 'completed',\r\n    done: 'completed',\r\n    finalizado: 'completed',\r\n    cancelado: 'cancelled',\r\n    canceled: 'cancelled',\r\n    cancelled: 'cancelled',\r\n    anulado: 'cancelled',\r\n  };\r\n  return map[v] || null;\r\n};\r\n\r\nconst getStatusColorByKey = (key) => {\r\n  const map = {\r\n    planning: 'bg-blue-100 text-blue-800',\r\n    in_progress: 'bg-green-100 text-green-800',\r\n    on_hold: 'bg-yellow-100 text-yellow-800',\r\n    review: 'bg-purple-100 text-purple-800',\r\n    completed: 'bg-emerald-100 text-emerald-800',\r\n    cancelled: 'bg-red-100 text-red-800',\r\n  };\r\n  return map[key] || 'bg-gray-100 text-gray-800';\r\n};\r\n\r\nconst resolveProjectStatus = (project) => {\r\n  const k1 = statusKeyFromAny(project?.status);\r\n  const lbl1 = project?.statusLabel;\r\n\r\n  const r = project?.raw || {};\r\n  const k2 =\r\n    statusKeyFromAny(r.estado) ||\r\n    statusKeyFromAny(r.fase) ||\r\n    statusKeyFromAny(r.stage) ||\r\n    statusKeyFromAny(r.status);\r\n\r\n  const key = k1 || k2 || null;\r\n\r\n  if (lbl1) return { key: key || statusKeyFromAny(lbl1) || 'planning', label: lbl1 };\r\n\r\n  const found = STATUS_OPTIONS.find((o) => o.key === key);\r\n  if (found) return found;\r\n\r\n  const rawTxt = r.estado || r.fase || r.stage || r.status || project?.statusLabel || project?.status;\r\n  if (rawTxt) {\r\n    const txt = String(rawTxt);\r\n    return { key: key || 'planning', label: txt.charAt(0).toUpperCase() + txt.slice(1) };\r\n  }\r\n  return { key: 'planning', label: 'Planificaci√≥n' };\r\n};\r\n\r\n/*Convierte objeto ubicaci√≥n en string legible */\r\nconst formatLocation = (loc) => {\r\n  if (!loc) return '‚Äî';\r\n  if (typeof loc === 'string') return loc;\r\n  if (typeof loc === 'object') {\r\n    const { direccion, municipio, estado, address, city, state } = loc || {};\r\n    const parts = [direccion ?? address, municipio ?? city, estado ?? state].filter(Boolean);\r\n    return parts.length ? parts.join(', ') : JSON.stringify(loc);\r\n  }\r\n  return String(loc);\r\n};\r\n\r\n/* Normalizador Proyecto */\r\nconst mapProjectDocStrict = (doc) => {\r\n  const id = doc.id ?? doc._id ?? safeUUID();\r\n  const code = doc.codigo ?? doc.code ?? '‚Äî';\r\n  const name = doc.nombreProyecto ?? doc.nombre ?? 'Proyecto sin nombre';\r\n  const type = doc.tipoProyecto ?? doc.type ?? '‚Äî';\r\n\r\n  const clienteNode = doc.cliente ?? doc.client ?? doc.customer ?? doc.account ?? null;\r\n\r\n  const client = {\r\n    id:\r\n      (clienteNode && typeof clienteNode === 'object' && (clienteNode.id || clienteNode._id)) ||\r\n      doc.clienteId ||\r\n      doc.idCliente ||\r\n      doc.clientId ||\r\n      doc.customerId ||\r\n      null,\r\n    name:\r\n      (clienteNode &&\r\n        typeof clienteNode === 'object' &&\r\n        (clienteNode.nombre || clienteNode.name || clienteNode.empresa || clienteNode.razonSocial)) ||\r\n      (typeof clienteNode === 'string' ? clienteNode : null) ||\r\n      doc.clienteNombre ||\r\n      doc.clientName ||\r\n      null,\r\n    email:\r\n      (clienteNode && typeof clienteNode === 'object' && (clienteNode.email || clienteNode.correo)) ||\r\n      doc.clienteEmail ||\r\n      doc.emailCliente ||\r\n      null,\r\n    contact:\r\n      (clienteNode &&\r\n        typeof clienteNode === 'object' &&\r\n        (clienteNode.contacto?.nombre || clienteNode.telefono || clienteNode.phone)) ||\r\n      doc.contacto ||\r\n      doc.telefono ||\r\n      null,\r\n  };\r\n\r\n  const p = doc.presupuesto || {};\r\n  const budget = doc.totalPresupuesto ?? doc.budget ?? p.total ?? null;\r\n\r\n  const equiposUSD = (() => {\r\n    if (p.equipoDolares != null && !isNaN(Number(p.equipoDolares))) return Number(p.equipoDolares) || 0;\r\n    if (p?._metaEquipos?.capturadoEn === 'USD' && p?._metaEquipos?.valorUSD != null) {\r\n      const v = Number(p._metaEquipos.valorUSD);\r\n      if (!isNaN(v)) return v;\r\n    }\r\n    const mxn = Number(p?.equipos || 0);\r\n    if (!(mxn > 0)) return 0;\r\n    const rate = Number(p?._metaEquipos?.tipoCambio);\r\n    const divisor = rate && rate > 0 ? rate : DEFAULT_USD_RATE;\r\n    return mxn / divisor;\r\n  })();\r\n\r\n  const location = formatLocation(doc.ubicacion ?? doc.location ?? null);\r\n\r\n  return {\r\n    id,\r\n    code,\r\n    name,\r\n    type,\r\n    image: doc.image ?? null,\r\n    client,\r\n    status: doc.status ?? null,\r\n    statusLabel: doc.statusLabel ?? null,\r\n    priority: doc.prioridad ?? doc.prioridades ?? doc.priority ?? null,\r\n    priorityLabel: doc.priorityLabel ?? null,\r\n    budget,\r\n    startDate: doc.cronograma?.fechaInicio ?? doc.startDate ?? null,\r\n    endDate: doc.cronograma?.fechaFin ?? doc.endDate ?? null,\r\n    department: doc.departamento ?? doc.department ?? null,\r\n    location,\r\n    description: doc.descripcion ?? doc.description ?? null,\r\n    assignedPersonnel: Array.isArray(doc.assignedPersonnel)\r\n      ? doc.assignedPersonnel\r\n      : Array.isArray(doc.personalAsignado)\r\n        ? doc.personalAsignado.map((s) => {\r\n          if (typeof s !== 'string') return { name: String(s ?? '‚Äî'), role: '' };\r\n          const [n, r] = s.split(' - ');\r\n          return { name: n || '‚Äî', role: r || '' };\r\n        })\r\n        : null,\r\n    workOrders: Array.isArray(doc.workOrders) ? doc.workOrders : undefined,\r\n    equiposUSD,\r\n    // üîµ Abonos originales quedan en raw (el c√°lculo se comenta m√°s abajo)\r\n    abonos: Array.isArray(doc.abonos) ? doc.abonos : [],\r\n    createdAt: doc.createdAt ?? null,\r\n    updatedAt: doc.updatedAt ?? null,\r\n    raw: doc,\r\n  };\r\n};\r\n\r\n/*Hydration desde /clientes*/\r\nconst normalizeClientRecord = (c) => {\r\n  const id = c?.id ?? c?._id ?? c?.clienteId ?? c?.idCliente ?? null;\r\n  const name =\r\n    c?.nombre ??\r\n    c?.empresa ??\r\n    c?.razonSocial ??\r\n    c?.razon_social ??\r\n    c?.displayName ??\r\n    c?.name ??\r\n    null;\r\n  const email =\r\n    c?.email ??\r\n    c?.correo ??\r\n    c?.correoElectronico ??\r\n    c?.mail ??\r\n    c?.contacto?.email ??\r\n    c?.contacto?.correo ??\r\n    null;\r\n  const contact =\r\n    c?.contacto?.nombre ??\r\n    c?.contacto?.name ??\r\n    c?.telefono ??\r\n    c?.phone ??\r\n    null;\r\n  return { id, name, email, contact };\r\n};\r\n\r\nconst ProjectTable = ({\r\n  projects,\r\n  onProjectSelect,\r\n  onStatusUpdate,\r\n  onBulkAction,\r\n  onImageUpload,\r\n  isUploadingImage,\r\n}) => {\r\n  const navigate = useNavigate();\r\n\r\n  //Notificaciones\r\n  const { showConfirm, showSuccess, showError } = useNotifications();\r\n\r\n  //Shadow list para props y lista remota para fetch\r\n  const [localDocs, setLocalDocs] = useState(null);\r\n  const [remoteDocs, setRemoteDocs] = useState([]);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n  const [sortConfig, setSortConfig] = useState({ key: 'startDate', direction: 'desc' });\r\n  const [selectedProjects, setSelectedProjects] = useState([]);\r\n  const [expandedRows, setExpandedRows] = useState([]);\r\n  // üîµ Estado de borrador de abonos (COMENTADO)\r\n  // const [newAbonoDraft, setNewAbonoDraft] = useState({});\r\n  const [clientCache, setClientCache] = useState({});\r\n  const [clientsLoaded, setClientsLoaded] = useState(false);\r\n\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  /* Sincronizar shadow con props */\r\n  useEffect(() => {\r\n    if (Array.isArray(projects) && projects.length >= 0) {\r\n      setLocalDocs(projects);\r\n    } else {\r\n      setLocalDocs(null);\r\n    }\r\n  }, [projects]);\r\n\r\n  /* Cargar proyectos si NO vienen por props */\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        if (Array.isArray(projects)) return;\r\n        setLoading(true);\r\n        setErrorMsg('');\r\n        const res = await proyectoService.getProyectos().catch(() => []);\r\n        if (!mounted) return;\r\n        const data = Array.isArray(res) ? res : Array.isArray(res?.data) ? res.data : [];\r\n        setRemoteDocs(data);\r\n      } catch (e) {\r\n        console.error(e);\r\n        if (mounted) setErrorMsg('No se pudieron cargar los proyectos.');\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [projects]);\r\n\r\n  //Cargar TODOS los clientes\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const res = await clientService.getClients();\r\n        const list = Array.isArray(res) ? res : Array.isArray(res?.data) ? res.data : [];\r\n        const map = {};\r\n        list.forEach((raw) => {\r\n          const c = normalizeClientRecord(raw);\r\n          if (c.id) map[c.id] = { name: c.name || null, email: c.email || null, contact: c.contact || null };\r\n        });\r\n        if (mounted) {\r\n          setClientCache(map);\r\n          setClientsLoaded(true);\r\n        }\r\n      } catch (e) {\r\n        console.warn('No se pudieron cargar clientes, se usar√° s√≥lo lo que traiga el proyecto.');\r\n        if (mounted) setClientsLoaded(true);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  const baseSourceDocs = useMemo(() => {\r\n    return Array.isArray(localDocs) ? localDocs : remoteDocs;\r\n  }, [localDocs, remoteDocs]);\r\n\r\n  const normalizedProjects = useMemo(() => {\r\n    if (!Array.isArray(baseSourceDocs)) return [];\r\n    return baseSourceDocs.map(mapProjectDocStrict);\r\n  }, [baseSourceDocs]);\r\n\r\n  // üîµ Inicializaci√≥n de borradores de abono (COMENTADO)\r\n  /*\r\n  useEffect(() => {\r\n    setNewAbonoDraft((prev) => {\r\n      const clone = { ...prev };\r\n      normalizedProjects.forEach((p) => {\r\n        if (!clone[p.id]) clone[p.id] = { fecha: '', monto: '', nota: '' };\r\n      });\r\n      return clone;\r\n    });\r\n  }, [normalizedProjects]);\r\n  */\r\n\r\n  const handleSort = (key) => {\r\n    let direction = 'asc';\r\n    if (sortConfig?.key === key && sortConfig?.direction === 'asc') direction = 'desc';\r\n    setSortConfig({ key, direction });\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const sortedProjects = useMemo(() => {\r\n    const list = [...normalizedProjects];\r\n    const { key, direction } = sortConfig || {};\r\n    if (!key) return list;\r\n\r\n    return list.sort((a, b) => {\r\n      let aValue = a?.[key];\r\n      let bValue = b?.[key];\r\n\r\n      if (aValue instanceof Date || bValue instanceof Date) {\r\n        const at = aValue instanceof Date ? aValue.getTime() : -Infinity;\r\n        const bt = bValue instanceof Date ? bValue.getTime() : -Infinity;\r\n        return direction === 'asc' ? at - bt : bt - at;\r\n      }\r\n\r\n      if (typeof aValue === 'number' || typeof bValue === 'number') {\r\n        aValue = Number(aValue) || 0;\r\n        bValue = Number(bValue) || 0;\r\n        return direction === 'asc' ? aValue - bValue : bValue - aValue;\r\n      }\r\n\r\n      aValue = (aValue ?? '').toString().toLowerCase();\r\n      bValue = (bValue ?? '').toString().toLowerCase();\r\n      if (aValue < bValue) return direction === 'asc' ? -1 : 1;\r\n      if (aValue > bValue) return direction === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n  }, [normalizedProjects, sortConfig]);\r\n\r\n  const totalItems = sortedProjects.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const pageItems = sortedProjects.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  const getPossibleClientId = (p) => {\r\n    const r = p?.raw || {};\r\n    return (\r\n      p?.client?.id ||\r\n      p?.client?._id ||\r\n      r.clienteId ||\r\n      r.idCliente ||\r\n      r.clientId ||\r\n      r.customerId ||\r\n      (r.cliente && (r.cliente.id || r.cliente._id)) ||\r\n      (r.client && (r.client.id || r.client._id)) ||\r\n      null\r\n    );\r\n  };\r\n  const resolveClientName = (p) => {\r\n    if (p?.client?.name) return p.client.name;\r\n    const cid = getPossibleClientId(p);\r\n    if (cid && clientCache[cid]?.name) return clientCache[cid].name;\r\n    const r = p?.raw || {};\r\n    const c = r.cliente || r.client || r.customer || r.account || {};\r\n    return (\r\n      c.nombre ||\r\n      c.name ||\r\n      c.empresa ||\r\n      c.razonSocial ||\r\n      r.clienteNombre ||\r\n      r.clientName ||\r\n      r.empresa ||\r\n      'Sin cliente'\r\n    );\r\n  };\r\n  const resolveClientEmailOrContact = (p) => {\r\n    if (p?.client?.email) return p.client.email;\r\n    if (p?.client?.contact) return p.client.contact;\r\n    const cid = getPossibleClientId(p);\r\n    if (cid) {\r\n      const hit = clientCache[cid];\r\n      if (hit?.email) return hit.email;\r\n      if (hit?.contact) return hit.contact;\r\n    }\r\n    const r = p?.raw || {};\r\n    const c = r.cliente || r.client || r.customer || r.account || {};\r\n    return c.email || c.correo || c.contacto?.email || c.telefono || c.phone || 'Sin contacto';\r\n  };\r\n\r\n  const handleSelectProject = (id) =>\r\n    setSelectedProjects((prev) => (prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]));\r\n\r\n  const handleSelectAll = () => {\r\n    const pageIds = pageItems.map((p) => p?.id);\r\n    const allSelected = pageIds.every((id) => selectedProjects.includes(id));\r\n    if (allSelected) {\r\n      setSelectedProjects((prev) => prev.filter((id) => !pageIds.includes(id)));\r\n    } else {\r\n      setSelectedProjects((prev) => Array.from(new Set([...prev, ...pageIds])));\r\n    }\r\n  };\r\n\r\n  const toggleRowExpansion = (id) =>\r\n    setExpandedRows((prev) => (prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]));\r\n\r\n  const usingLocalShadow = Array.isArray(localDocs);\r\n\r\n  //Eliminar (optimista, sin refresh) ‚Äî>>> MENSAJE EDITADO\r\n  // üî¥ Eliminar (optimista, sin refresh)\r\n  const handleDelete = (project) => {\r\n    if (!project?.id) return;\r\n\r\n    const doRemove = (list, id) => list.filter((d) => (d.id || d._id) !== id);\r\n\r\n    const nombre = project?.name || project?.code || 'sin nombre';\r\n\r\n    showConfirm(`¬øDeseas eliminar este proyecto \"${nombre}\"?`, {\r\n      onConfirm: async () => {\r\n        const prevLocal = usingLocalShadow ? [...localDocs] : null;\r\n        const prevRemote = !usingLocalShadow ? [...remoteDocs] : null;\r\n\r\n        if (usingLocalShadow) {\r\n          setLocalDocs((prev) => doRemove(prev, project.id));\r\n        } else {\r\n          setRemoteDocs((prev) => doRemove(prev, project.id));\r\n        }\r\n        setSelectedProjects((prev) => prev.filter((x) => x !== project.id));\r\n        setExpandedRows((prev) => prev.filter((x) => x !== project.id));\r\n\r\n        setTimeout(() => {\r\n          const newTotal = (usingLocalShadow ? (prevLocal ? doRemove(prevLocal, project.id) : []) : (prevRemote ? doRemove(prevRemote, project.id) : [])).length;\r\n          const newTotalPages = Math.max(1, Math.ceil(newTotal / pageSize));\r\n          setCurrentPage((cp) => Math.min(cp, newTotalPages));\r\n        }, 0);\r\n\r\n        try {\r\n          await proyectoService.deleteProyecto(project.id);\r\n          showSuccess('Proyecto eliminado exitosamente');\r\n        } catch (e) {\r\n          console.error(e);\r\n          if (usingLocalShadow && prevLocal) setLocalDocs(prevLocal);\r\n          if (!usingLocalShadow && prevRemote) setRemoteDocs(prevRemote);\r\n          showError('No se pudo eliminar el proyecto');\r\n        }\r\n      },\r\n      onCancel: () => { },\r\n    });\r\n  };\r\n\r\n  //Eliminaci√≥n masiva (optimista)\r\n  const handleBulkDelete = () => {\r\n    if (!selectedProjects?.length) return;\r\n\r\n    const toDelete = [...selectedProjects];\r\n\r\n    showConfirm(`¬øEliminar ${toDelete.length} proyecto(s)?`, {\r\n      onConfirm: async () => {\r\n        const doRemoveBulk = (list, ids) => list.filter((d) => !ids.includes(d.id || d._id));\r\n\r\n        const prevLocal = usingLocalShadow ? [...localDocs] : null;\r\n        const prevRemote = !usingLocalShadow ? [...remoteDocs] : null;\r\n\r\n        if (usingLocalShadow) {\r\n          setLocalDocs((prev) => doRemoveBulk(prev, toDelete));\r\n        } else {\r\n          setRemoteDocs((prev) => doRemoveBulk(prev, toDelete));\r\n        }\r\n        setSelectedProjects([]);\r\n        setExpandedRows((prev) => prev.filter((x) => !toDelete.includes(x)));\r\n\r\n        setTimeout(() => {\r\n          const newTotal = (usingLocalShadow ? (prevLocal ? doRemoveBulk(prevLocal, toDelete) : []) : (prevRemote ? doRemoveBulk(prevRemote, toDelete) : [])).length;\r\n          const newTotalPages = Math.max(1, Math.ceil(newTotal / pageSize));\r\n          setCurrentPage((cp) => Math.min(cp, newTotalPages));\r\n        }, 0);\r\n\r\n        try {\r\n          await Promise.allSettled(toDelete.map((id) => proyectoService.deleteProyecto(id)));\r\n          showSuccess('Proyectos eliminados exitosamente');\r\n        } catch (e) {\r\n          console.error(e);\r\n          if (usingLocalShadow && prevLocal) setLocalDocs(prevLocal);\r\n          if (!usingLocalShadow && prevRemote) setRemoteDocs(prevRemote);\r\n          showError('Ocurri√≥ un error eliminando algunos proyectos');\r\n        }\r\n      },\r\n      onCancel: () => { },\r\n    });\r\n  };\r\n\r\n  /* Imagen demo */\r\n  const handleImageUpload = async (project) => {\r\n    try {\r\n      const input = document.createElement('input');\r\n      input.type = 'file';\r\n      input.accept = 'image/*';\r\n      input.onchange = (e) => {\r\n        const f = e?.target?.files?.[0];\r\n        if (!f) return;\r\n        if (!f.type?.startsWith('image/')) return alert('Archivo de imagen inv√°lido');\r\n        if (f.size > 5 * 1024 * 1024) return alert('M√°ximo 5MB');\r\n        alert(`Imagen \"${f.name}\" cargada para \"${project?.name}\" (demo)`);\r\n      };\r\n      input.click();\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert('Error al seleccionar la imagen.');\r\n    }\r\n  };\r\n\r\n  /* ====== ABONOS: helpers COMENTADOS ====== */\r\n  /*\r\n  const getProjectLiveSnapshot = (projectId) => {\r\n    const source = usingLocalShadow ? localDocs : remoteDocs;\r\n    const inSource = source?.find((d) => (d.id || d._id) === projectId);\r\n    if (inSource) return inSource;\r\n    if (Array.isArray(projects)) {\r\n      const inProps = projects.find((d) => (d.id || d._id) === projectId);\r\n      if (inProps) return inProps;\r\n    }\r\n    return undefined;\r\n  };\r\n  const getAbonosForProject = (id) => {\r\n    const snap = getProjectLiveSnapshot(id);\r\n    return Array.isArray(snap?.abonos) ? snap.abonos : [];\r\n  };\r\n  const getTotalsForProject = (project) => {\r\n    const snap = getProjectLiveSnapshot(project.id) || {};\r\n    const presupuestoTotal = Number(\r\n      snap.totalPresupuesto ?? snap.budget ?? snap.presupuesto?.total ?? project.budget ?? 0\r\n    );\r\n    const abonos = getAbonosForProject(project.id);\r\n    const totalAbonado = abonos.reduce((s, a) => s + (Number(a?.monto) || 0), 0);\r\n    const restante = presupuestoTotal - totalAbonado;\r\n    const percent = Math.min(Math.max(presupuestoTotal > 0 ? (totalAbonado / presupuestoTotal) * 100 : 0, 0), 100);\r\n    return { presupuestoTotal, abonosList: abonos, totalAbonado, restante, percent };\r\n  };\r\n  const handleDraftChange = (pid, f, v) =>\r\n    setNewAbonoDraft((prev) => ({ ...prev, [pid]: { ...(prev[pid] || {}), [f]: v } }));\r\n  const handleAddAbono = (project) => {\r\n    const { restante } = getTotalsForProject(project);\r\n    if (restante <= 0) return alert('Este proyecto ya est√° pagado en su totalidad.');\r\n    const draft = newAbonoDraft[project.id] || {};\r\n    const monto = Number(draft.monto);\r\n    if (!draft.fecha) return alert('Falta la fecha del abono');\r\n    if (!monto || monto <= 0) return alert('Monto inv√°lido');\r\n    if (monto > restante) return alert('El abono excede el restante pendiente.');\r\n    const nuevo = { fecha: draft.fecha, monto, nota: draft.nota?.trim() || '', _tmpId: safeUUID() };\r\n    const snap = getProjectLiveSnapshot(project.id);\r\n    const updated = { ...(snap || {}), id: snap?.id ?? project.id, abonos: [...(snap?.abonos || []), nuevo] };\r\n\r\n    if (usingLocalShadow) {\r\n      setLocalDocs((prev) => {\r\n        const exists = prev?.some((p) => (p.id || p._id) === project.id);\r\n        return exists ? prev.map((p) => ((p.id || p._id) === project.id ? updated : p)) : [...(prev || []), updated];\r\n      });\r\n    } else {\r\n      setRemoteDocs((prev) => {\r\n        const exists = prev.some((p) => (p.id || p._id) === project.id);\r\n        return exists ? prev.map((p) => ((p.id || p._id) === project.id ? updated : p)) : [...prev, updated];\r\n      });\r\n    }\r\n    setNewAbonoDraft((prev) => ({ ...prev, [project.id]: { fecha: '', monto: '', nota: '' } }));\r\n  };\r\n  */\r\n\r\n  /* ===== Render ===== */\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-visible\">\r\n      {loading && <div className=\"p-4 border-b border-border text-sm text-muted-foreground\">Cargando proyectos‚Ä¶</div>}\r\n      {!!errorMsg && <div className=\"p-4 border-b border-border text-sm text-red-600\">{errorMsg}</div>}\r\n\r\n      {selectedProjects?.length > 0 && (\r\n        <div className=\"bg-primary/5 border-b border-border p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-foreground\">{selectedProjects?.length} proyecto(s) seleccionado(s)</span>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Trash2\" iconPosition=\"left\" onClick={handleBulkDelete}>Eliminar</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop */}\r\n      <div className=\"hidden lg:block overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-muted/50\">\r\n            <tr>\r\n              <th className=\"w-12 p-4\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={\r\n                    pageItems.length > 0 &&\r\n                    pageItems.every((p) => selectedProjects.includes(p.id))\r\n                  }\r\n                  onChange={handleSelectAll}\r\n                  className=\"rounded border-border\"\r\n                />\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('code')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>C√≥digo</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('name')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Proyecto</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Cliente</th>\r\n\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('status')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Estado</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('priority')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Prioridad</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('budget')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Presupuesto</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('startDate')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Fecha Inicio</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"w-24 p-4 font-medium text-foreground\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {pageItems?.map((project) => {\r\n              // üîµ Totales de abonos por proyecto (COMENTADO)\r\n              // const { presupuestoTotal, abonosList, totalAbonado, restante, percent } = getTotalsForProject(project);\r\n              // const draft = newAbonoDraft[project.id] || { fecha: '', monto: '', nota: '' };\r\n              // const isPagado = restante <= 0;\r\n\r\n              const nameToShow = resolveClientName(project);\r\n              const emailToShow = resolveClientEmailOrContact(project);\r\n              const statusUI = resolveProjectStatus(project);\r\n\r\n              return (\r\n                <React.Fragment key={project?.id}>\r\n                  <tr className=\"border-b border-border hover:bg-muted/30 transition-smooth\">\r\n                    <td className=\"p-4\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedProjects?.includes(project?.id)}\r\n                        onChange={() => handleSelectProject(project?.id)}\r\n                        className=\"rounded border-border\"\r\n                      />\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <span className=\"font-mono text-sm text-primary\">{project?.code}</span>\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <Image src={project?.image} alt={project?.name} className=\"w-10 h-10 rounded-lg object-cover\" />\r\n                        <div>\r\n                          <div className=\"font-medium text-foreground\">{project?.name}</div>\r\n                          <div className=\"text-sm text-muted-foreground\">{project?.type}</div>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n\r\n                    {/* Cliente */}\r\n                    <td className=\"p-4\">\r\n                      <div className=\"min-w-[240px] max-w-[420px]\">\r\n                        <div className=\"font-medium text-foreground truncate\" title={nameToShow}>{nameToShow}</div>\r\n                        <div className=\"text-sm text-muted-foreground truncate\" title={emailToShow}>{emailToShow}</div>\r\n                        {!clientsLoaded && (\r\n                          <div className=\"text-xs text-muted-foreground mt-0.5\">cargando clientes‚Ä¶</div>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n\r\n                    {/* Estado: solo pill */}\r\n                    <td className=\"p-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColorByKey(statusUI.key)}`}>\r\n                          {statusUI.label}\r\n                        </span>\r\n                      </div>\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <div className=\"flex items-center space-x-1\">\r\n                        <Icon name=\"AlertCircle\" size={16} className={getPriorityColor(project?.priority)} />\r\n                        <span className=\"text-sm text-foreground\">\r\n                          {project?.priorityLabel || project?.priority || '‚Äî'}\r\n                        </span>\r\n                      </div>\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <div className=\"text-foreground font-medium\">{formatCurrency(project?.budget)}</div>\r\n                      {Number(project?.equiposUSD) > 0 && (\r\n                        <div className=\"text-xs text-muted-foreground mt-1\">\r\n                          Equipos: <span className=\"font-medium\">{formatUSD(project?.equiposUSD)}</span>\r\n                        </div>\r\n                      )}\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <div className=\"text-sm text-foreground\">{formatDate(project?.startDate)}</div>\r\n                    </td>\r\n\r\n                    <td className=\"p-4\">\r\n                      <div className=\"flex items-center space-x-1\">\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => toggleRowExpansion(project?.id)} title=\"Ver detalles\">\r\n                          <Icon name={expandedRows?.includes(project?.id) ? 'ChevronUp' : 'ChevronDown'} size={16} />\r\n                        </Button>\r\n                        {/* <Button variant=\"ghost\" size=\"icon\" onClick={() => navigate(`/project-detail-gallery/${project?.id}`)} title=\"Ver galer√≠a de im√°genes\">\r\n                          <Icon name=\"Image\" size={16} />\r\n                        </Button>\r\n\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleImageUpload(project)} title=\"Subir imagen\">\r\n                          <Icon name=\"Upload\" size={16} />\r\n                        </Button>\r\n */}\r\n\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => onProjectSelect?.(project)} title=\"Editar proyecto\">\r\n                          <Icon name=\"Edit\" size={16} />\r\n                        </Button>\r\n\r\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDelete(project)} title=\"Eliminar proyecto\">\r\n                          <Icon name=\"Trash2\" size={16} />\r\n                        </Button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n\r\n                  {expandedRows?.includes(project?.id) && (\r\n                    <tr className=\"bg-muted/20\">\r\n                      <td colSpan={9} className=\"p-4\">\r\n                        {/* Detalles + (ANTES ABONOS) */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n                          <div>\r\n                            <h4 className=\"font-medium text-foreground mb-2\">Detalles del Proyecto</h4>\r\n                            <div className=\"space-y-2 text-sm\">\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Departamento:</span>\r\n                                <span className=\"text-foreground\">{project?.department || '‚Äî'}</span>\r\n                              </div>\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Fecha Fin:</span>\r\n                                <span className=\"text-foreground\">{formatDate(project?.endDate)}</span>\r\n                              </div>\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-muted-foreground\">Ubicaci√≥n:</span>\r\n                                <span className=\"text-foreground\">{project?.location || '‚Äî'}</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <h4 className=\"font-medium text-foreground mb-2\">Personal Asignado</h4>\r\n                            <div className=\"space-y-2\">\r\n                              {(project?.assignedPersonnel || [])?.map((person, idx) => (\r\n                                <div key={idx} className=\"flex items-center space-x-2\">\r\n                                  <div className=\"w-6 h-6 bg-secondary rounded-full flex items-center justify-center\">\r\n                                    <Icon name=\"User\" size={12} color=\"white\" />\r\n                                  </div>\r\n                                  <span className=\"text-sm text-foreground\">{person?.name}</span>\r\n                                  {person?.role && <span className=\"text-xs text-muted-foreground\">({person?.role})</span>}\r\n                                </div>\r\n                              ))}\r\n                              {(!project?.assignedPersonnel || project?.assignedPersonnel?.length === 0) && (\r\n                                <div className=\"text-sm text-muted-foreground\">Sin personal asignado</div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <h4 className=\"font-medium text-foreground mb-2\">Descripci√≥n</h4>\r\n                            <p className=\"text-sm text-muted-foreground whitespace-pre-line\">\r\n                              {project?.description || '‚Äî'}\r\n                            </p>\r\n                          </div>\r\n                          {/*\r\n                          <div>\r\n                            <h4 className=\"font-medium text-foreground mb-2\">Acciones R√°pidas</h4>\r\n                            <div className=\"space-y-2\">\r\n                              <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                iconName=\"Image\"\r\n                                iconPosition=\"left\"\r\n                                onClick={() => navigate(`/project-gallery-viewer/${project?.id}`)}\r\n                                className=\"w-full justify-start\"\r\n                              >\r\n                                Ver Galer√≠a\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                iconName=\"Calendar\"\r\n                                iconPosition=\"left\"\r\n                                className=\"w-full justify-start\"\r\n                                onClick={() => navigate(`/project-timeline/${project?.id}`)}\r\n                              >\r\n                                Ver Cronograma\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                           */}\r\n                        </div>\r\n\r\n                        {/*\r\n                        <div className=\"mt-6 border-t border-border pt-4\">\r\n                          <div className=\"flex items-start justify-between mb-3\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <Icon name=\"DollarSign\" size={16} className=\"text-green-600\" />\r\n                              <h4 className=\"font-semibold text-foreground text-sm\">Abonos</h4>\r\n                            </div>\r\n                            <span className=\"text-[11px] text-muted-foreground\">Seguimiento de pagos del proyecto</span>\r\n                          </div>\r\n\r\n                          {abonosList.length > 0 ? (\r\n                            <div className=\"mb-3 rounded-md border border-border bg-white/40 dark:bg-muted/20 divide-y divide-border text-[12px]\">\r\n                              {abonosList.map((abono, idx) => (\r\n                                <div key={abono._tmpId || idx} className=\"flex flex-wrap justify-between items-center px-3 py-1.5\">\r\n                                  <div className=\"text-foreground flex items-center gap-1\">\r\n                                    <span className=\"text-muted-foreground\">üìÖ</span>\r\n                                    <span>{formatDate(abono.fecha)}</span>\r\n                                  </div>\r\n                                  <div className=\"font-medium text-green-700\">{formatCurrency(abono.monto)}</div>\r\n                                  <div className=\"text-muted-foreground italic truncate max-w-[200px]\">\r\n                                    {abono.nota || 'Sin nota'}\r\n                                  </div>\r\n                                </div>\r\n                              ))}\r\n                            </div>\r\n                          ) : (\r\n                            <p className=\"text-[12px] text-muted-foreground mb-3\">No hay abonos registrados</p>\r\n                          )}\r\n\r\n                          <div className=\"border border-border rounded-md bg-background/50 p-3 mb-3\">\r\n                            <div className=\"flex items-start justify-between mb-2\">\r\n                              <span className=\"text-[12px] font-medium text-foreground\">Agregar abono (modo prueba)</span>\r\n                              <button\r\n                                className={`flex items-center gap-1 text-[11px] ${\r\n                                  isPagado ? 'text-muted-foreground cursor-not-allowed' : 'text-primary hover:underline'\r\n                                }`}\r\n                                onClick={() => {\r\n                                  if (!isPagado) handleAddAbono(project);\r\n                                }}\r\n                                disabled={isPagado}\r\n                              >\r\n                                <Icon name=\"Plus\" size={12} />\r\n                                <span>{isPagado ? 'Pagado' : 'Agregar'}</span>\r\n                              </button>\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-wrap gap-2 text:[11px] text-[11px]\">\r\n                              <input\r\n                                type=\"date\"\r\n                                value={draft.fecha || ''}\r\n                                onChange={(e) => handleDraftChange(project.id, 'fecha', e.target.value)}\r\n                                className=\"border border-border rounded px-2 py-1 bg-background text-foreground min-w-[150px]\"\r\n                                disabled={isPagado}\r\n                              />\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"0\"\r\n                                step=\"0.01\"\r\n                                placeholder=\"0.00\"\r\n                                value={draft.monto || ''}\r\n                                onChange={(e) => handleDraftChange(project.id, 'monto', e.target.value)}\r\n                                className=\"border border-border rounded px-2 py-1 bg-background text-foreground w-[120px]\"\r\n                                disabled={isPagado}\r\n                              />\r\n                              <input\r\n                                type=\"text\"\r\n                                placeholder=\"ej. anticipo\"\r\n                                value={draft.nota || ''}\r\n                                onChange={(e) => handleDraftChange(project.id, 'nota', e.target.value)}\r\n                                className=\"border border-border rounded px-2 py-1 bg-background text-foreground flex-1 min-w-[200px]\"\r\n                                disabled={isPagado}\r\n                              />\r\n                            </div>\r\n\r\n                            {isPagado && (\r\n                              <div className=\"text-[11px] text-green-700 font-medium mt-2\">\r\n                                Proyecto pagado en su totalidad ‚úÖ\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n\r\n                          <div className=\"space-y-2\">\r\n                            <div className=\"flex flex-wrap gap-x-4 text-[12px] mb-2\">\r\n                              <span>\r\n                                <span className=\"text-muted-foreground\">Presupuesto total: </span>\r\n                                <span className=\"font-semibold\">{formatCurrency(presupuestoTotal)}</span>\r\n                              </span>\r\n                              <span>\r\n                                <span className=\"text-muted-foreground\">Total abonado: </span>\r\n                                <span className=\"font-semibold text-green-700\">{formatCurrency(totalAbonado)}</span>\r\n                              </span>\r\n                              <span>\r\n                                <span className=\"text-muted-foreground\">Restante: </span>\r\n                                <span className={`font-semibold ${restante < 0 ? 'text-red-600' : 'text-foreground'}`}>\r\n                                  {formatCurrency(restante)}\r\n                                </span>\r\n                              </span>\r\n                            </div>\r\n\r\n                            <div className=\"relative w-full h-3 bg-muted rounded overflow-hidden border border-border\">\r\n                              <div\r\n                                className={`h-full transition-all duration-500 ${\r\n                                  percent >= 100 ? 'bg-green-600' : 'bg-green-500'\r\n                                }`}\r\n                                style={{ width: `${percent}%` }}\r\n                              />\r\n                              <span className=\"absolute inset-0 flex items-center justify-center text-[10px] font-medium text-white\">\r\n                                {percent.toFixed(0)}%\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        */}\r\n                      </td>\r\n                    </tr>\r\n                  )}\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n\r\n            {pageItems?.length === 0 && !loading && (\r\n              <tr>\r\n                <td colSpan={9} className=\"p-8 text-center text-muted-foreground\">\r\n                  No hay proyectos para mostrar.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* Paginaci√≥n Desktop */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"relative z-20 text-sm px-2 py-1 border border-border rounded bg-background text-foreground min-w-[84px] pr-6 pointer-events-auto\"\r\n              style={{ appearance: 'auto' }}\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n            <span className=\"text-xs text-muted-foreground ml-3\">\r\n              Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>‚Äì<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n            <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile (resumen) */}\r\n      <div className=\"lg:hidden\">\r\n        {pageItems?.map((p) => {\r\n          const nameToShow = resolveClientName(p);\r\n          const emailToShow = resolveClientEmailOrContact(p);\r\n          const statusUI = resolveProjectStatus(p);\r\n          return (\r\n            <div key={p?.id} className=\"border-b border-border p-4\">\r\n              <div className=\"flex items-start justify-between mb-3\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedProjects?.includes(p?.id)}\r\n                    onChange={() => handleSelectProject(p?.id)}\r\n                    className=\"rounded border-border\"\r\n                  />\r\n                  <Image src={p?.image} alt={p?.name} className=\"w-12 h-12 rounded-lg object-cover\" />\r\n                  <div>\r\n                    <div className=\"font-medium text-foreground\">{p?.name}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">{p?.code}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4 mb-3\">\r\n                <div>\r\n                  <div className=\"text-xs text-muted-foreground\">Cliente</div>\r\n                  <div className=\"text-sm text-foreground\">{nameToShow}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">{emailToShow}</div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColorByKey(statusUI.key)}`}>\r\n                    {statusUI.label}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {/* Paginaci√≥n Mobile */}\r\n        <div className=\"flex flex-col gap-3 px-4 py-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"relative z-20 text-sm px-2 py-1 border border-border rounded bg-background text-foreground min-w-[84px] pr-6 pointer-events-auto\"\r\n              style={{ appearance: 'auto' }}\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {totalItems === 0 ? '0 de 0' : `${startIndex + 1}‚Äì${endIndex} de ${totalItems}`}\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n              <span className=\"px-2 text-sm text-foreground\">{currentPage}/{totalPages}</span>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectTable;\r\n","// components/ui/Select.jsx - Shadcn style Select\r\nimport React, { useState } from \"react\";\r\nimport { ChevronDown, Check, Search, X } from \"lucide-react\";\r\nimport { cn } from \"../../utils/cn\";\r\nimport Button from \"./Button\";\r\nimport Input from \"./Input\";\r\n\r\nconst Select = React.forwardRef(({\r\n    className,\r\n    options = [],\r\n    value,\r\n    defaultValue,\r\n    placeholder = \"Seleccionar una opci√≥n\",\r\n    multiple = false,\r\n    disabled = false,\r\n    required = false,\r\n    label,\r\n    description,\r\n    error,\r\n    searchable = false,\r\n    clearable = false,\r\n    loading = false,\r\n    id,\r\n    name,\r\n    onChange,\r\n    onOpenChange,\r\n    ...props\r\n}, ref) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    // Generate unique ID if not provided\r\n    const selectId = id || `select-${Math.random()?.toString(36)?.substr(2, 9)}`;\r\n\r\n    // Filter options based on search\r\n    const filteredOptions = searchable && searchTerm\r\n        ? options?.filter(option =>\r\n            option?.label?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||\r\n            (option?.value && option?.value?.toString()?.toLowerCase()?.includes(searchTerm?.toLowerCase()))\r\n        )\r\n        : options;\r\n\r\n    // Get selected option(s) for display\r\n    const getSelectedDisplay = () => {\r\n        if (!value) return placeholder;\r\n\r\n        if (multiple) {\r\n            const selectedOptions = options?.filter(opt => value?.includes(opt?.value));\r\n            if (selectedOptions?.length === 0) return placeholder;\r\n            if (selectedOptions?.length === 1) return selectedOptions?.[0]?.label;\r\n            return `${selectedOptions?.length} items selected`;\r\n        }\r\n\r\n        const selectedOption = options?.find(opt => opt?.value === value);\r\n        return selectedOption ? selectedOption?.label : placeholder;\r\n    };\r\n\r\n    const handleToggle = () => {\r\n        if (!disabled) {\r\n            const newIsOpen = !isOpen;\r\n            setIsOpen(newIsOpen);\r\n            onOpenChange?.(newIsOpen);\r\n            if (!newIsOpen) {\r\n                setSearchTerm(\"\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleOptionSelect = (option) => {\r\n        if (multiple) {\r\n            const newValue = value || [];\r\n            const updatedValue = newValue?.includes(option?.value)\r\n                ? newValue?.filter(v => v !== option?.value)\r\n                : [...newValue, option?.value];\r\n            onChange?.(updatedValue);\r\n        } else {\r\n            onChange?.(option?.value);\r\n            setIsOpen(false);\r\n            onOpenChange?.(false);\r\n        }\r\n    };\r\n\r\n    const handleClear = (e) => {\r\n        e?.stopPropagation();\r\n        onChange?.(multiple ? [] : '');\r\n    };\r\n\r\n    const handleSearchChange = (e) => {\r\n        setSearchTerm(e?.target?.value);\r\n    };\r\n\r\n    const isSelected = (optionValue) => {\r\n        if (multiple) {\r\n            return value?.includes(optionValue) || false;\r\n        }\r\n        return value === optionValue;\r\n    };\r\n\r\n    const hasValue = multiple ? value?.length > 0 : value !== undefined && value !== '';\r\n\r\n    return (\r\n        <div className={cn(\"relative\", className)}>\r\n            {label && (\r\n                <label\r\n                    htmlFor={selectId}\r\n                    className={cn(\r\n                        \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2 block\",\r\n                        error ? \"text-destructive\" : \"text-foreground\"\r\n                    )}\r\n                >\r\n                    {label}\r\n                    {required && <span className=\"text-destructive ml-1\">*</span>}\r\n                </label>\r\n            )}\r\n            <div className=\"relative\">\r\n                <button\r\n                    ref={ref}\r\n                    id={selectId}\r\n                    type=\"button\"\r\n                    className={cn(\r\n                        \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-white text-black px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n                        error && \"border-destructive focus:ring-destructive\",\r\n                        !hasValue && \"text-muted-foreground\"\r\n                    )}\r\n                    onClick={handleToggle}\r\n                    disabled={disabled}\r\n                    aria-expanded={isOpen}\r\n                    aria-haspopup=\"listbox\"\r\n                    {...Object.fromEntries(Object.entries(props).filter(([k]) => k !== 'loading' && k !== 'isLoading'))}\r\n                >\r\n                    <span className=\"truncate\">{getSelectedDisplay()}</span>\r\n\r\n                    <div className=\"flex items-center gap-1\">\r\n                        {loading && (\r\n                            <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\">\r\n                                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" />\r\n                                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n                            </svg>\r\n                        )}\r\n\r\n                        {clearable && hasValue && !loading && (\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"icon\"\r\n                                className=\"h-4 w-4\"\r\n                                onClick={handleClear}\r\n                            >\r\n                                <X className=\"h-3 w-3\" />\r\n                            </Button>\r\n                        )}\r\n\r\n                        <ChevronDown className={cn(\"h-4 w-4 transition-transform\", isOpen && \"rotate-180\")} />\r\n                    </div>\r\n                </button>\r\n\r\n                {/* Hidden native select for form submission */}\r\n                <select\r\n                    name={name}\r\n                    value={value || ''}\r\n                    onChange={() => { }} // Controlled by our custom logic\r\n                    className=\"sr-only\"\r\n                    tabIndex={-1}\r\n                    multiple={multiple}\r\n                    required={required}\r\n                >\r\n                    <option value=\"\">Select...</option>\r\n                    {options?.map((option, idx) => (\r\n                        <option key={option?.value ?? idx} value={option?.value}>\r\n                            {option?.label}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n\r\n                {/* Dropdown */}\r\n                {isOpen && (\r\n                    <div className=\"absolute z-50 w-full mt-1 bg-white text-black border border-border rounded-md shadow-md\">\r\n                        {searchable && (\r\n                            <div className=\"p-2 border-b\">\r\n                                <div className=\"relative\">\r\n                                    <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                                    <Input\r\n                                        placeholder=\"Buscar opciones...\"\r\n                                        value={searchTerm}\r\n                                        onChange={handleSearchChange}\r\n                                        className=\"pl-8\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"py-1 max-h-60 overflow-auto\">\r\n                            {filteredOptions?.length === 0 ? (\r\n                                <div className=\"px-3 py-2 text-sm text-muted-foreground\">\r\n                                    {searchTerm ? 'No se encontraron opciones' : 'No hay opciones disponibles'}\r\n                                </div>\r\n                            ) : (\r\n                                filteredOptions?.map((option, idx) => (\r\n                                    <div\r\n                                        key={option?.value ?? idx}\r\n                                        className={cn(\r\n                                            \"relative flex cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground\",\r\n                                            isSelected(option?.value) && \"bg-primary text-primary-foreground\",\r\n                                            option?.disabled && \"pointer-events-none opacity-50\"\r\n                                        )}\r\n                                        onClick={() => !option?.disabled && handleOptionSelect(option)}\r\n                                    >\r\n                                        <span className=\"flex-1\">{option?.label}</span>\r\n                                        {multiple && isSelected(option?.value) && (\r\n                                            <Check className=\"h-4 w-4\" />\r\n                                        )}\r\n                                        {option?.description && (\r\n                                            <span className=\"text-xs text-muted-foreground ml-2\">\r\n                                                {option?.description}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                ))\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            {description && !error && (\r\n                <p className=\"text-sm text-muted-foreground mt-1\">\r\n                    {description}\r\n                </p>\r\n            )}\r\n            {error && (\r\n                <p className=\"text-sm text-destructive mt-1\">\r\n                    {error}\r\n                </p>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nSelect.displayName = \"Select\";\r\n\r\nexport default Select;","import httpService from \"./httpService\";\r\n\r\nconst personService = {\r\n  async getPersons() {\r\n    try {\r\n      const response = await httpService.get(\"/empleados\");\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener empleados:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createPerson(payload) {\r\n    try {\r\n      const response = await httpService.post(\"/empleados/crear\", payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al crear empleado:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // üîπ NUEVA FUNCI√ìN PARA ACTUALIZAR EMPLEADO EXISTENTE\r\n  async getPersonsByDepartment(department) {\r\n    try {\r\n      const response = await httpService.get(\r\n        `/obtenerEmpleadosPorDepartamentos?departamentos=${encodeURIComponent(department)}`\r\n      );\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener empleados por departamento:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n  async updatePersonByEmpleadoId(empleadoId, payload) {\r\n    try {\r\n      const response = await httpService.put(\r\n        `/empleados/byEmpleadoId/${empleadoId}`,\r\n        payload\r\n      );\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al actualizar empleado:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default personService;\r\n","import { useState } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport personService from \"../services/personService\";\r\n\r\nconst usePerson = () => {\r\n  const { showOperationSuccess, showHttpError } = useNotifications();\r\n  const [persons, setPersons] = useState([]);\r\n  const [departmentPersons, setDepartmentPersons] = useState([]);\r\n  const getPersonsByDepartment = async (department) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await personService.getPersonsByDepartment(department);\r\n      if (response.success && Array.isArray(response.data)) {\r\n        setDepartmentPersons(response.data);\r\n      } else {\r\n        setDepartmentPersons([]);\r\n      }\r\n    } catch (err) {\r\n      setError(err);\r\n      // No mostrar notificaci√≥n, solo actualizar el estado de error\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getPersons = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await personService.getPersons();\r\n      if (response.success && Array.isArray(response.data)) {\r\n        setPersons(response.data);\r\n        console.log('Responsables/personas cargados:', response.data);\r\n      } else {\r\n        setPersons([]);\r\n        console.log('No se encontraron responsables/personas.');\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en usePerson.getPersons:\", err);\r\n      setError(err);\r\n      // No mostrar notificaci√≥n, solo actualizar el estado de error\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createPerson = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await personService.createPerson(payload);\r\n      if (response.success) {\r\n        setPersons((prev) => [...prev, response.data]);\r\n        showOperationSuccess(\"Empleado guardado exitosamente\");\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en usePerson.createPerson:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // üîπ NUEVA FUNCI√ìN PARA ACTUALIZAR EMPLEADO EXISTENTE\r\n  const updatePersonByEmpleadoId = async (empleadoId, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await personService.updatePersonByEmpleadoId(\r\n        empleadoId,\r\n        payload\r\n      );\r\n      if (response.success) {\r\n        setPersons((prev) =>\r\n          prev.map((p) =>\r\n            p.empleadoId === empleadoId ? { ...p, ...response.data } : p\r\n          )\r\n        );\r\n        showOperationSuccess(\"Empleado actualizado exitosamente\");\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en usePerson.updatePersonByEmpleadoId:\", err);\r\n      setError(err);\r\n      showHttpError(\"Error al actualizar empleado\");\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    persons,\r\n    departmentPersons,\r\n    loading,\r\n    error,\r\n    getPersons,\r\n    getPersonsByDepartment,\r\n    createPerson,\r\n    updatePersonByEmpleadoId,\r\n  };\r\n};\r\n\r\nexport default usePerson;\r\n","import httpService from './httpService';\r\n\r\nconst estadoService = {\r\n  getEstados: async () => {\r\n    // GET estadosMexico/codigos\r\n    const response = await httpService.get('/estadosMexico/codigos');\r\n    return response.data;\r\n  },\r\n  getMunicipios: async (estado) => {\r\n    // GET estadosMexico/{estado}\r\n    const response = await httpService.get(`/estadosMexico/${estado}`);\r\n    return response.data;\r\n  },\r\n};\r\n\r\nexport default estadoService;\r\n","import { useState, useEffect } from 'react';\r\nimport estadoService from '../services/estadoService';\r\n\r\nexport function useEstados() {\r\n  const [estados, setEstados] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    estadoService.getEstados()\r\n      .then(setEstados)\r\n      .catch(setError)\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  return { estados, loading, error };\r\n}\r\n\r\nexport function useMunicipios(estado) {\r\n  const [municipios, setMunicipios] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!estado) return;\r\n    setLoading(true);\r\n    estadoService.getMunicipios(estado)\r\n      .then(setMunicipios)\r\n      .catch(setError)\r\n      .finally(() => setLoading(false));\r\n  }, [estado]);\r\n\r\n  return { municipios, loading, error };\r\n}\r\n","import React, { useEffect, useMemo, useRef, useState, useCallback } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport proyectoService from 'services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport usePerson from 'hooks/usePerson';\r\nimport { useErrorHandler, useNotifications } from 'context/NotificationContext';\r\nimport { useEstados, useMunicipios } from '../../../hooks/useEstado';\r\n\r\nconst projectTypes = [\r\n  { value: 'Instalaci√≥n', label: 'Instalaci√≥n' },\r\n  { value: 'Mantenimiento Preventivo', label: 'Mantenimiento Preventivo' },\r\n  { value: 'Mantenimiento Correctivo', label: 'Mantenimiento Correctivo' },\r\n  { value: 'Inspecci√≥n', label: 'Inspecci√≥n' },\r\n];\r\n\r\nconst departmentOptions = [\r\n  { value: 'Ingenier√≠a', label: 'Ingenier√≠a' },\r\n  { value: 'Mantenimiento', label: 'Mantenimiento' },\r\n  { value: 'Operaciones', label: 'Operaciones' },\r\n];\r\n\r\nconst priorityOptions = [\r\n  { value: 'low', label: 'Baja' },\r\n  { value: 'medium', label: 'Media' },\r\n  { value: 'high', label: 'Alta' },\r\n  { value: 'urgent', label: 'Urgente' },\r\n];\r\n\r\nconst projectStatusOptions = [\r\n  { value: 'Planificaci√≥n', label: 'Planificaci√≥n' },\r\n  { value: 'En Progreso', label: 'En Progreso' },\r\n  { value: 'En Pausa', label: 'En Pausa' },\r\n  { value: 'En Revisi√≥n', label: 'En Revisi√≥n' },\r\n  { value: 'Completado', label: 'Completado' },\r\n  { value: 'Cancelado', label: 'Cancelado' },\r\n];\r\n\r\nconst personnelOptionsFallback = [\r\n  { value: 'Andr√©s Torres ‚Äî T√©cnico HVAC', label: 'Andr√©s Torres ‚Äî T√©cnico HVAC' },\r\n  { value: 'Laura G√≥mez ‚Äî Supervisora de Mantenimiento', label: 'Laura G√≥mez ‚Äî Supervisora de Mantenimiento' },\r\n  { value: 'Pedro Hern√°ndez ‚Äî Ingeniero de Campo', label: 'Pedro Hern√°ndez ‚Äî Ingeniero de Campo' },\r\n];\r\n\r\nconst mapPriorityToEs = (v) => {\r\n  const m = { low: 'Baja', medium: 'Media', high: 'Alta', urgent: 'Urgente' };\r\n  return m[(v || '').toString().toLowerCase()] || v || '';\r\n};\r\n\r\nconst formatWithCommas = (v, decimals = 2) => {\r\n  if (v === '' || v == null) return '';\r\n  const num = Number(v);\r\n  if (!Number.isFinite(num)) return '';\r\n  const options = Number.isInteger(num)\r\n    ? { minimumFractionDigits: 0, maximumFractionDigits: 0 }\r\n    : { minimumFractionDigits: decimals, maximumFractionDigits: decimals };\r\n  return num.toLocaleString('es-MX', options);\r\n};\r\n\r\nconst unformatNumber = (raw) => {\r\n  if (raw === '' || raw == null) return 0;\r\n  const clean = String(raw).replace(/[^\\d.-]/g, '');\r\n  const n = parseFloat(clean);\r\n  return Number.isFinite(n) ? n : 0;\r\n};\r\n\r\nconst rateSafe = (rate) => (Number.isFinite(Number(rate)) ? Number(rate) : 0);\r\n\r\nconst CreateProjectModal = ({ isOpen, onClose, onSubmit }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const { persons, getPersons } = usePerson();\r\n  const { handleError, handleSuccess } = useErrorHandler();\r\n  const { showWarning, showError } = useNotifications();\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    code: '',\r\n    type: '',\r\n    client: '',\r\n    department: '',\r\n    priority: '',\r\n    status: '',\r\n    budgetBreakdown: {\r\n      labor: 0,\r\n      parts: 0,\r\n      equipment: 0,\r\n      materials: 0,\r\n      transportation: 0,\r\n      other: 0,\r\n    },\r\n    estado: '',\r\n    municipio: '',\r\n    direccion: '',\r\n    startDate: '',\r\n    endDate: '',\r\n    assignedPersonnel: [],\r\n    description: '',\r\n  });\r\n\r\n  const [isEquipmentInUSD, setIsEquipmentInUSD] = useState(false);\r\n  const [exchangeRate, setExchangeRate] = useState(18);\r\n  const [uiEquipmentUSD, setUiEquipmentUSD] = useState('');\r\n  const [loadingFx, setLoadingFx] = useState(false);\r\n  const [fxError, setFxError] = useState(null);\r\n\r\n  const [clientOptions, setClientOptions] = useState([]);\r\n  const [loadingClients, setLoadingClients] = useState(false);\r\n\r\n  const { estados, loading: loadingEstados, error: errorEstados } = useEstados();\r\n  const { municipios, loading: loadingMunicipios, error: errorMunicipios } = useMunicipios(formData.estado);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        setLoadingClients(true);\r\n        const resp = await clientService.getClients();\r\n        const list = Array.isArray(resp?.data) ? resp.data : (Array.isArray(resp) ? resp : []);\r\n        const opts = list.map((c) => ({ value: c.id, label: c.empresa || c.contacto || '‚Äî' }));\r\n        if (mounted) setClientOptions(opts);\r\n      } catch (e) {\r\n        handleError(e, 'Error cargando clientes');\r\n      } finally {\r\n        if (mounted) setLoadingClients(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [isOpen, handleError]);\r\n\r\n  const fetchedPersonsRef = useRef(false);\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    if (fetchedPersonsRef.current) return;\r\n    fetchedPersonsRef.current = true;\r\n\r\n    const controller = new AbortController();\r\n    (async () => {\r\n      try {\r\n        await getPersons({ signal: controller.signal });\r\n      } catch (e) {\r\n        if (e?.name !== 'AbortError') handleError(e, 'Error cargando empleados');\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      controller.abort();\r\n    };\r\n  }, [isOpen, handleError, getPersons]);\r\n\r\n  const personnelOptionsFinal = useMemo(() => {\r\n    if (!Array.isArray(persons) || persons.length === 0) return personnelOptionsFallback;\r\n    const built = persons\r\n      .map((p) => {\r\n        const nombre =\r\n          p?.nombreCompleto ||\r\n          [p?.nombre, p?.apellidoPaterno, p?.apellidoMaterno].filter(Boolean).join(' ') ||\r\n          p?.nombre ||\r\n          p?.name ||\r\n          '‚Äî';\r\n        const puesto = p?.puesto || p?.rol || p?.cargo;\r\n        const etiqueta = puesto ? `${nombre} ‚Äî ${puesto}` : nombre;\r\n        return etiqueta ? { value: etiqueta, label: etiqueta } : null;\r\n      })\r\n      .filter(Boolean);\r\n\r\n    const seen = new Set();\r\n    const dedup = [];\r\n    for (const opt of built) {\r\n      if (seen.has(opt.value)) continue;\r\n      seen.add(opt.value);\r\n      dedup.push(opt);\r\n    }\r\n    return dedup.length ? dedup : personnelOptionsFallback;\r\n  }, [persons]);\r\n\r\n  const handleInputChange = (key, value) => {\r\n    setFormData((s) => ({ ...s, [key]: value }));\r\n    if (errors[key]) setErrors((e) => ({ ...e, [key]: undefined }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isEquipmentInUSD) return;\r\n    const mxn = Number(formData?.budgetBreakdown?.equipment || 0);\r\n    const rate = rateSafe(exchangeRate);\r\n    const usd = rate ? mxn / rate : 0;\r\n    setUiEquipmentUSD(usd ? formatWithCommas(usd, 2) : '0.00');\r\n  }, [isEquipmentInUSD, exchangeRate, formData?.budgetBreakdown?.equipment]);\r\n\r\n  const handleBudgetChange = (key, rawValue) => {\r\n    const cleanedNumber = unformatNumber(rawValue);\r\n    if (key === 'equipment' && isEquipmentInUSD) return;\r\n    setFormData((s) => ({\r\n      ...s,\r\n      budgetBreakdown: { ...s.budgetBreakdown, [key]: cleanedNumber },\r\n    }));\r\n  };\r\n\r\n  const fetchUsdMxnRate = useCallback(async () => {\r\n    try {\r\n      setFxError(null);\r\n      setLoadingFx(true);\r\n      const resp = await proyectoService.getCurrencyRates({ base: 'USD', currencies: ['MXN'] });\r\n      const mxnInfo = resp?.data?.MXN || resp?.MXN;\r\n      const rate = Number(mxnInfo?.value ?? mxnInfo ?? 0);\r\n      if (rate > 0) {\r\n        setExchangeRate(rate);\r\n        return rate;\r\n      } else {\r\n        const msg = 'No lleg√≥ una tasa v√°lida.';\r\n        setFxError(msg);\r\n        showError(msg);\r\n        return null;\r\n      }\r\n    } catch (e) {\r\n      const msg = e?.message || 'Error llamando currencyapi';\r\n      setFxError(msg);\r\n      handleError(e, 'Tipo de cambio');\r\n      return null;\r\n    } finally {\r\n      setLoadingFx(false);\r\n    }\r\n  }, [handleError, showError]);\r\n\r\n  const toggleEquipmentUSD = (checked) => {\r\n    setIsEquipmentInUSD(checked);\r\n    if (!checked) setUiEquipmentUSD('');\r\n  };\r\n\r\n  const validate = () => {\r\n    const e = {};\r\n    if (!formData.name) e.name = 'Requerido';\r\n    if (!formData.type) e.type = 'Requerido';\r\n    if (!formData.client) e.client = 'Seleccione un cliente';\r\n    if (!formData.department) e.department = 'Requerido';\r\n    if (!formData.priority) e.priority = 'Requerido';\r\n    if (!formData.status) e.status = 'Requerido';\r\n\r\n    if (!formData.estado) e.estado = 'Requerido';\r\n    if (!formData.municipio) e.municipio = 'Requerido';\r\n    if (!formData.direccion) e.direccion = 'Requerido';\r\n\r\n    if (!formData.startDate) e.startDate = 'Requerido';\r\n    if (!formData.endDate) e.endDate = 'Requerido';\r\n    if (\r\n      formData.startDate &&\r\n      formData.endDate &&\r\n      new Date(formData.endDate) < new Date(formData.startDate)\r\n    ) {\r\n      e.endDate = 'La fecha de fin no puede ser anterior al inicio';\r\n    }\r\n    if (isEquipmentInUSD && !(exchangeRate > 0)) {\r\n      e.exchangeRate = 'Indique un tipo de cambio v√°lido';\r\n    }\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  };\r\n\r\n  const buildPayloadForBackend = () => {\r\n    const b = formData.budgetBreakdown || {};\r\n    const equipoDolares = isEquipmentInUSD ? unformatNumber(uiEquipmentUSD) : undefined;\r\n\r\n    return {\r\n      codigo: formData.code || '',\r\n      nombre: formData.name || '',\r\n      tipoProyecto: formData.type || '',\r\n      cliente: { id: formData.client || '', nombre: formData.clientName || '' },\r\n      departamento: formData.department || '',\r\n      prioridad: mapPriorityToEs(formData.priority),\r\n      ubicacion: {\r\n        estado: formData.estado || '',\r\n        municipio: formData.municipio || '',\r\n        direccion: formData.direccion || '',\r\n      },\r\n      descripcion: formData.description || '',\r\n      personalAsignado: Array.isArray(formData.assignedPersonnel)\r\n        ? formData.assignedPersonnel\r\n        : [],\r\n      cronograma: {\r\n        fechaInicio: formData.startDate || '',\r\n        fechaFin: formData.endDate || '',\r\n      },\r\n      presupuesto: {\r\n        manoObra: Number(b.labor) || 0,\r\n        piezas: Number(b.parts) || 0,\r\n        equipos: Number(b.equipment) || 0,\r\n        ...(equipoDolares !== undefined ? { equipoDolares } : {}),\r\n        materiales: Number(b.materials) || 0,\r\n        transporte: Number(b.transportation) || 0,\r\n        otros: Number(b.other) || 0,\r\n        _metaEquipos: { capturadoEn: isEquipmentInUSD ? 'USD' : 'MXN' },\r\n      },\r\n      estado: formData.status,\r\n    };\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validate()) {\r\n      showWarning('Revisa los campos requeridos del formulario.');\r\n      return;\r\n    }\r\n    setIsSubmitting(true);\r\n    try {\r\n      const payload = buildPayloadForBackend();\r\n      await proyectoService.createProyecto(payload);\r\n      handleSuccess('create', 'Proyecto');\r\n      onSubmit && onSubmit(payload);\r\n      onClose && onClose();\r\n    } catch (err) {\r\n      console.error('Error creando proyecto:', err);\r\n      handleError(err, 'Error creando proyecto');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const b = formData.budgetBreakdown || {};\r\n  const totalMXN =\r\n    (Number(b?.labor) || 0) +\r\n    (Number(b?.parts) || 0) +\r\n    (Number(b?.equipment) || 0) +\r\n    (Number(b?.materials) || 0) +\r\n    (Number(b?.transportation) || 0) +\r\n    (Number(b?.other) || 0);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card border border-border rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Crear Nuevo Proyecto</h2>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Complete la informaci√≥n del proyecto\r\n            </p>\r\n          </div>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci√≥n b√°sica */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Informaci√≥n B√°sica\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Nombre del Proyecto\"\r\n              type=\"text\"\r\n              placeholder=\"Ej: Instalaci√≥n HVAC Edificio Central\"\r\n              value={formData?.name}\r\n              onChange={(e) => handleInputChange('name', e?.target?.value)}\r\n              error={errors?.name}\r\n              required\r\n            />\r\n\r\n            <Input\r\n              label=\"C√≥digo del Proyecto\"\r\n              type=\"text\"\r\n              placeholder=\"Ej: PROJ-2025-001\"\r\n              value={formData?.code}\r\n              onChange={(e) => handleInputChange('code', e?.target?.value)}\r\n              error={errors?.code}\r\n              description=\"Se generar√° autom√°ticamente si se deja vac√≠o\"\r\n            />\r\n\r\n            <Select\r\n              label=\"Tipo de Proyecto\"\r\n              options={projectTypes}\r\n              value={formData?.type}\r\n              onChange={(value) => handleInputChange('type', value)}\r\n              error={errors?.type}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Cliente\"\r\n              options={clientOptions}\r\n              value={formData?.client}\r\n              onChange={(value) => handleInputChange('client', value)}\r\n              error={errors?.client}\r\n              searchable\r\n              required\r\n              loading={loadingClients}\r\n            />\r\n\r\n            <Select\r\n              label=\"Departamento Responsable\"\r\n              options={departmentOptions}\r\n              value={formData?.department}\r\n              onChange={(value) => handleInputChange('department', value)}\r\n              error={errors?.department}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={formData?.priority}\r\n              onChange={(value) => handleInputChange('priority', value)}\r\n              error={errors?.priority}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Estado del Proyecto\"\r\n              options={projectStatusOptions}\r\n              value={formData?.status}\r\n              onChange={(value) => handleInputChange('status', value)}\r\n              error={errors?.status}\r\n              required\r\n            />\r\n\r\n            {/* Ubicaci√≥n */}\r\n            <div className=\"md:col-span-2 mt-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n                Ubicaci√≥n del Proyecto\r\n              </h3>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Seleccione estado y municipio, luego escriba la direcci√≥n completa del sitio.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 items-center\">\r\n              <div className=\"flex flex-col justify-end h-full\">\r\n                <Select\r\n                  label={\r\n                    <>\r\n                      Estado <span className=\"text-destructive\">*</span>\r\n                    </>\r\n                  }\r\n                  value={formData.estado}\r\n                  onChange={(value) => {\r\n                    handleInputChange('estado', value);\r\n                    handleInputChange('municipio', '');\r\n                  }}\r\n                  options={\r\n                    estados\r\n                      ? [\r\n                          { value: '', label: 'Selecciona un estado' },\r\n                          ...estados.map((e) => ({\r\n                            value: e.code,\r\n                            label: e.name,\r\n                          })),\r\n                        ]\r\n                      : []\r\n                  }\r\n                  loading={loadingEstados}\r\n                  error={errors?.estado}\r\n                  required\r\n                  disabled={loadingEstados || !!errorEstados}\r\n                  placeholder={\r\n                    loadingEstados ? 'Cargando estados...' : 'Selecciona un estado'\r\n                  }\r\n                  searchable\r\n                  className=\"h-12 md:h-14 w-full text-base\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex flex-col justify-end h-full\">\r\n                <Select\r\n                  label={\r\n                    <>\r\n                      Municipio <span className=\"text-destructive\">*</span>\r\n                    </>\r\n                  }\r\n                  value={formData.municipio}\r\n                  onChange={(value) => handleInputChange('municipio', value)}\r\n                  options={\r\n                    formData.estado === ''\r\n                      ? [{ value: '', label: 'Selecciona un estado primero' }]\r\n                      : loadingMunicipios\r\n                      ? [{ value: '', label: 'Cargando municipios...' }]\r\n                      : errorMunicipios\r\n                      ? [{ value: '', label: 'Error al cargar municipios' }]\r\n                      : [\r\n                          { value: '', label: 'Selecciona un municipio' },\r\n                          ...(municipios\r\n                            ? Object.values(municipios.municipios || {}).map((m) => ({\r\n                                value: m,\r\n                                label: m,\r\n                              }))\r\n                            : []),\r\n                        ]\r\n                  }\r\n                  loading={loadingMunicipios}\r\n                  error={errors?.municipio}\r\n                  required\r\n                  disabled={\r\n                    formData.estado === '' ||\r\n                    loadingMunicipios ||\r\n                    !!errorMunicipios\r\n                  }\r\n                  placeholder={\r\n                    formData.estado === ''\r\n                      ? 'Selecciona un estado primero'\r\n                      : loadingMunicipios\r\n                      ? 'Cargando municipios...'\r\n                      : 'Selecciona un municipio'\r\n                  }\r\n                  searchable\r\n                  className=\"h-12 md:h-14 w-full text-base\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Direcci√≥n\"\r\n                required\r\n                value={formData?.direccion}\r\n                onChange={(e) => handleInputChange('direccion', e?.target?.value)}\r\n                error={errors?.direccion}\r\n                placeholder=\"Direcci√≥n completa\"\r\n                className=\"h-12 md:h-14 w-full text-base\"\r\n              />\r\n            </div>\r\n\r\n            {/* Presupuesto */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Desglose de Presupuesto\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Mano de Obra (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.labor)}\r\n              onChange={(e) => handleBudgetChange('labor', e?.target?.value)}\r\n            />\r\n\r\n            <Input\r\n              label=\"Piezas (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.parts)}\r\n              onChange={(e) => handleBudgetChange('parts', e?.target?.value)}\r\n            />\r\n\r\n            <div className=\"flex flex-col gap-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                  {isEquipmentInUSD\r\n                    ? 'Equipos (USD se convierte a MXN)'\r\n                    : 'Equipos (MXN)'}\r\n                </label>\r\n                <label className=\"inline-flex items-center gap-2 text-sm text-foreground cursor-pointer select-none\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={isEquipmentInUSD}\r\n                    onChange={(e) => toggleEquipmentUSD(e.target.checked)}\r\n                    className=\"h-4 w-4 accent-primary cursor-pointer\"\r\n                  />\r\n                  Precio en d√≥lares\r\n                </label>\r\n              </div>\r\n\r\n              <input\r\n                type=\"text\"\r\n                inputMode=\"decimal\"\r\n                placeholder={isEquipmentInUSD ? '0.00 USD' : '0.00 MXN'}\r\n                value={\r\n                  isEquipmentInUSD\r\n                    ? uiEquipmentUSD\r\n                    : formatWithCommas(b?.equipment)\r\n                }\r\n                onChange={(e) => handleBudgetChange('equipment', e?.target?.value)}\r\n                readOnly={isEquipmentInUSD}\r\n                className={`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${\r\n                  isEquipmentInUSD ? 'bg-muted cursor-not-allowed' : ''\r\n                }`}\r\n              />\r\n\r\n              {isEquipmentInUSD && (\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <div className=\"flex-1 min-w-[220px]\">\r\n                    <Input\r\n                      label=\"Tipo de cambio (MXN / USD)\"\r\n                      type=\"text\"\r\n                      inputMode=\"decimal\"\r\n                      value={formatWithCommas(exchangeRate, 4)}\r\n                      onChange={() => {}}\r\n                      readOnly\r\n                      disabled\r\n                    />\r\n                  </div>\r\n\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    onClick={fetchUsdMxnRate}\r\n                    loading={loadingFx}\r\n                    iconName=\"RefreshCcw\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    {loadingFx ? 'Actualizando‚Ä¶' : 'Actualizar tipo de cambio'}\r\n                  </Button>\r\n\r\n                  <div className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                    Guardado en MXN:{' '}\r\n                    <span className=\"font-semibold\">\r\n                      ${formatWithCommas(b?.equipment, 2)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {fxError && (\r\n                    <div className=\"text-xs text-destructive\">{fxError}</div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Materiales (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.materials)}\r\n              onChange={(e) => handleBudgetChange('materials', e?.target?.value)}\r\n            />\r\n\r\n            <Input\r\n              label=\"Transporte (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.transportation)}\r\n              onChange={(e) =>\r\n                handleBudgetChange('transportation', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Input\r\n              label=\"Otros Gastos (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.other)}\r\n              onChange={(e) => handleBudgetChange('other', e?.target?.value)}\r\n            />\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"bg-muted p-4 rounded-lg\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm font-medium text-foreground\">\r\n                    Total del Presupuesto (MXN):\r\n                  </span>\r\n                  <span className=\"text-lg font-semibold text-primary\">\r\n                    ${formatWithCommas(totalMXN, 2)} MXN\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cronograma */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Cronograma\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Fecha de Inicio\"\r\n              type=\"date\"\r\n              value={formData?.startDate}\r\n              onChange={(e) => handleInputChange('startDate', e?.target?.value)}\r\n              error={errors?.startDate}\r\n              required\r\n            />\r\n\r\n            <Input\r\n              label=\"Fecha de Finalizaci√≥n\"\r\n              type=\"date\"\r\n              value={formData?.endDate}\r\n              onChange={(e) => handleInputChange('endDate', e?.target?.value)}\r\n              error={errors?.endDate}\r\n              required\r\n            />\r\n\r\n            {/* Asignaci√≥n */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Asignaci√≥n de Personal\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Select\r\n                label=\"Personal Asignado\"\r\n                options={personnelOptionsFinal}\r\n                value={formData?.assignedPersonnel}\r\n                onChange={(value) =>\r\n                  handleInputChange('assignedPersonnel', value)\r\n                }\r\n                multiple\r\n                searchable\r\n                description=\"Seleccione el personal que trabajar√° en este proyecto\"\r\n              />\r\n            </div>\r\n\r\n            {/* Descripci√≥n */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                Descripci√≥n del Proyecto\r\n              </label>\r\n              <textarea\r\n                rows={4}\r\n                placeholder=\"Describa los objetivos, alcance y detalles importantes del proyecto...\"\r\n                value={formData?.description}\r\n                onChange={(e) =>\r\n                  handleInputChange('description', e?.target?.value)\r\n                }\r\n                className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-border\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              loading={isSubmitting}\r\n              iconName=\"Plus\"\r\n              iconPosition=\"left\"\r\n            >\r\n              {isSubmitting ? 'Creando...' : 'Crear Proyecto'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateProjectModal;\r\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport proyectoService from '../../../services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport CreateProjectModal from './CreateProjectModal';\r\n\r\nconst fold = (v) =>\r\n  String(v ?? '')\r\n    .normalize('NFD')\r\n    .replace(/\\p{Diacritic}/gu, '')\r\n    .trim()\r\n    .toLowerCase();\r\n\r\nconst KW = {\r\n  planning: (s) =>\r\n    s.includes('planific') ||\r\n    s.includes('planeac') ||\r\n    s.includes('planning') ||\r\n    s.includes('backlog') ||\r\n    s.includes('kickoff') ||\r\n    s.includes('inicio') ||\r\n    s.includes('prepar') ||\r\n    s === 'activo' ||\r\n    s.includes('active') ||\r\n    s.includes('pendiente'),\r\n  progress: (s) =>\r\n    s.includes('progreso') ||\r\n    s.includes('proceso') ||\r\n    s.includes('ejec') ||\r\n    s.includes('en curso') ||\r\n    s.includes('trabaj') ||\r\n    s.includes('running') ||\r\n    s.includes('work in progress') ||\r\n    s.includes('in-progress') ||\r\n    s.includes('in progress'),\r\n  review: (s) =>\r\n    s.includes('revi') ||\r\n    s.includes('review') ||\r\n    s.includes('qa') ||\r\n    s.includes('calidad') ||\r\n    s.includes('validac') ||\r\n    s.includes('verific') ||\r\n    s.includes('aprobac') ||\r\n    s.includes('auditor'),\r\n  exclude: (s) =>\r\n    s.includes('pausa') ||\r\n    s.includes('pausado') ||\r\n    s.includes('on-hold') ||\r\n    s.includes('on hold') ||\r\n    s.includes('cancel') ||\r\n    s.includes('complet') ||\r\n    s.includes('terminado') ||\r\n    s.includes('fin'),\r\n};\r\n\r\nconst toCanon = (raw) => {\r\n  const s = fold(raw);\r\n  if (!s || KW.exclude(s)) return null;\r\n  if (KW.review(s)) return 'En Revisi√≥n';\r\n  if (KW.progress(s)) return 'En Progreso';\r\n  if (KW.planning(s)) return 'Planificaci√≥n';\r\n  return null;\r\n};\r\n\r\nconst getCanonFromObject = (obj) => {\r\n  const candidates = [\r\n    obj?.estado,\r\n    obj?.estatus,\r\n    obj?.status,\r\n    obj?.statusLabel,\r\n    obj?.fase,\r\n    obj?.etapa,\r\n    obj?.stage,\r\n    obj?.state,\r\n  ].filter(Boolean);\r\n  for (const c of candidates) {\r\n    const canon = toCanon(c);\r\n    if (canon) return canon;\r\n  }\r\n  return null;\r\n};\r\n\r\n// ======== fechas ========\r\n// ‚¨ÖÔ∏è Aqu√≠ el fix: null/undefined/'' devuelven null, no 1970 ni hoy\r\nconst safeDate = (v) => {\r\n  if (!v) return null;\r\n  const d = new Date(v);\r\n  return isNaN(d.getTime()) ? null : d;\r\n};\r\n\r\nconst fmtDateHuman = (v) => {\r\n  const d = safeDate(v);\r\n  return d\r\n    ? d.toLocaleDateString('es-MX', {\r\n        day: '2-digit',\r\n        month: 'short',\r\n        year: 'numeric',\r\n      })\r\n    : '‚Äî';\r\n};\r\n\r\nconst fmtDateIso = (v) => {\r\n  const d = safeDate(v);\r\n  return d ? d.toISOString().slice(0, 10) : '';\r\n};\r\n\r\n// rangos\r\nconst startOfWeekMonday = (d) => {\r\n  const out = new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n  const day = out.getDay();\r\n  const diffToMon = (day + 6) % 7;\r\n  out.setDate(out.getDate() - diffToMon);\r\n  out.setHours(0, 0, 0, 0);\r\n  return out;\r\n};\r\nconst startOfMonth = (d) => {\r\n  const x = new Date(d.getFullYear(), d.getMonth(), 1);\r\n  x.setHours(0, 0, 0, 0);\r\n  return x;\r\n};\r\nconst startOfNextMonth = (d) => new Date(d.getFullYear(), d.getMonth() + 1, 1);\r\nconst startOfYear = (y) => {\r\n  const x = new Date(y, 0, 1);\r\n  x.setHours(0, 0, 0, 0);\r\n  return x;\r\n};\r\nconst startOfNextYear = (y) => new Date(y + 1, 0, 1);\r\nconst startOfQuarter = (d) => {\r\n  const q = Math.floor(d.getMonth() / 3);\r\n  const x = new Date(d.getFullYear(), q * 3, 1);\r\n  x.setHours(0, 0, 0, 0);\r\n  return x;\r\n};\r\nconst startOfNextQuarter = (d) => {\r\n  const q = Math.floor(d.getMonth() / 3);\r\n  return new Date(d.getFullYear(), (q + 1) * 3, 1);\r\n};\r\nconst inRange = (date, ini, fin) =>\r\n  date && date.getTime() >= ini.getTime() && date.getTime() < fin.getTime();\r\n\r\nconst getId = (p) => p?.id ?? p?._id ?? p?.Id ?? p?.ID ?? null;\r\nconst getCode = (p) => {\r\n  const c = p?.codigo ?? p?.code ?? p?.Codigo ?? p?.Code;\r\n  if (typeof c === 'string' || typeof c === 'number') return String(c);\r\n  return String(c?.id ?? c?.value ?? '');\r\n};\r\nconst getName = (p) =>\r\n  p?.nombre ?? p?.name ?? p?.nombreProyecto ?? 'Proyecto sin nombre';\r\n\r\nconst buildClientsMapFromCatalog = (catalog) => {\r\n  const arr = Array.isArray(catalog) ? catalog : [];\r\n  const map = new Map();\r\n  for (const it of arr) {\r\n    const id =\r\n      it?.id ??\r\n      it?.Id ??\r\n      it?._id ??\r\n      it?.codigo ??\r\n      it?.code ??\r\n      it?.clave ??\r\n      it?.slug ??\r\n      it?.uuid;\r\n    const name =\r\n      it?.nombre ??\r\n      it?.name ??\r\n      it?.razonSocial ??\r\n      it?.razon_social ??\r\n      it?.displayName ??\r\n      it?.clientName ??\r\n      it?.empresa ??\r\n      it?.id;\r\n    const email =\r\n      it?.email ??\r\n      it?.correo ??\r\n      it?.correoElectronico ??\r\n      it?.mail ??\r\n      it?.contacto?.email ??\r\n      null;\r\n    const contact =\r\n      it?.contacto?.nombre ??\r\n      it?.contacto?.name ??\r\n      it?.telefono ??\r\n      it?.phone ??\r\n      null;\r\n    if (id)\r\n      map.set(String(id), {\r\n        name: String(name ?? id),\r\n        email: email ? String(email) : null,\r\n        contact: contact ? String(contact) : null,\r\n      });\r\n  }\r\n  return map;\r\n};\r\n\r\n/* Cliente ‚Äúbonito‚Äù (nombre + contacto/email) */\r\nconst getClientDetails = (p, clientsMap) => {\r\n  const byName =\r\n    p?.clientName ??\r\n    p?.client_name ??\r\n    p?.clienteNombre ??\r\n    p?.cliente_nombre ??\r\n    p?.cliente?.nombre ??\r\n    p?.cliente?.name ??\r\n    p?.cliente?.empresa ??\r\n    p?.cliente?.razonSocial ??\r\n    p?.cliente?.razon_social ??\r\n    p?.client?.nombre ??\r\n    p?.client?.name ??\r\n    p?.client?.empresa ??\r\n    p?.client?.razonSocial ??\r\n    p?.client?.razon_social;\r\n\r\n  const byEmail =\r\n    p?.cliente?.email ??\r\n    p?.cliente?.correo ??\r\n    p?.client?.email ??\r\n    p?.client?.correo ??\r\n    null;\r\n\r\n  const byContact =\r\n    p?.cliente?.contacto?.nombre ??\r\n    p?.client?.contacto?.nombre ??\r\n    p?.cliente?.telefono ??\r\n    p?.client?.telefono ??\r\n    null;\r\n\r\n  if (byName) {\r\n    return { name: String(byName), aux: byEmail || byContact || null };\r\n  }\r\n\r\n  const cli = p?.cliente ?? p?.client;\r\n  let byId =\r\n    typeof cli === 'object'\r\n      ? cli?.id ??\r\n        cli?._id ??\r\n        cli?.codigo ??\r\n        cli?.code ??\r\n        cli?.clave ??\r\n        cli?.slug ??\r\n        cli?.uuid\r\n      : undefined;\r\n\r\n  if (byId == null) {\r\n    if (typeof cli === 'string' || typeof cli === 'number') byId = cli;\r\n  }\r\n\r\n  byId =\r\n    byId ??\r\n    p?.clienteId ??\r\n    p?.idCliente ??\r\n    p?.clientId ??\r\n    p?.customerId ??\r\n    null;\r\n\r\n  if (byId != null && clientsMap?.has?.(String(byId))) {\r\n    const hit = clientsMap.get(String(byId));\r\n    return {\r\n      name: hit?.name || 'Sin cliente',\r\n      aux: hit?.email || hit?.contact || null,\r\n    };\r\n  }\r\n\r\n  return { name: 'Sin cliente', aux: null };\r\n};\r\n\r\nconst getStart = (p) =>\r\n  p?.cronograma?.fechaInicio ?? p?.startDate ?? p?.inicio ?? null;\r\nconst getEnd = (p) =>\r\n  p?.cronograma?.fechaFin ?? p?.endDate ?? p?.fin ?? null;\r\nconst getProg = (p) => Number(p?.progress ?? p?.avance ?? 0);\r\nconst getCanon = (p) => p?.__estadoCanon ?? getCanonFromObject(p);\r\nconst getRoleLabel = (role) => {\r\n  if (!role) return 'Sin rol';\r\n  if (typeof role === 'string') return role;\r\n  return role?.name ?? role?.nombre ?? role?.id ?? 'Sin rol';\r\n};\r\nconst getBudgetTotal = (p) => {\r\n  const b =\r\n    p?.presupuesto?.total ??\r\n    p?.totalPresupuesto ??\r\n    p?.budgetTotal ??\r\n    (Number(p?.presupuesto?.manoObra || 0) +\r\n      Number(p?.presupuesto?.piezas || 0) +\r\n      Number(p?.presupuesto?.equipos || 0) +\r\n      Number(p?.presupuesto?.materiales || 0) +\r\n      Number(p?.presupuesto?.transporte || 0) +\r\n      Number(p?.presupuesto?.otros || 0));\r\n  return Number(b) || 0;\r\n};\r\n\r\nconst statusColor = (canon) => {\r\n  switch (canon) {\r\n    case 'Planificaci√≥n':\r\n      return 'bg-blue-500';\r\n    case 'En Progreso':\r\n      return 'bg-green-500';\r\n    case 'En Revisi√≥n':\r\n      return 'bg-purple-500';\r\n    default:\r\n      return 'bg-gray-500';\r\n  }\r\n};\r\nconst statusPill = (canon) => {\r\n  switch (canon) {\r\n    case 'Planificaci√≥n':\r\n      return 'bg-blue-100 text-blue-800';\r\n    case 'En Progreso':\r\n      return 'bg-green-100 text-green-800';\r\n    case 'En Revisi√≥n':\r\n      return 'bg-purple-100 text-purple-800';\r\n    default:\r\n      return 'bg-gray-100 text-gray-800';\r\n  }\r\n};\r\n\r\nfunction ProjectTimeline({ projects, onNewProject, clientsCatalog }) {\r\n  const [rows, setRows] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [err, setErr] = useState(null);\r\n\r\n  const [clientsMap, setClientsMap] = useState(null);\r\n\r\n  const [period, setPeriod] = useState('month');\r\n  const PERIODS = [\r\n    { key: 'week', label: 'Esta Semana' },\r\n    { key: 'month', label: 'Este Mes' },\r\n    { key: 'q', label: 'Trimestre' },\r\n    { key: 'year', label: 'A√±o' },\r\n  ];\r\n\r\n  const ALLOWED = ['Planificaci√≥n', 'En Progreso', 'En Revisi√≥n'];\r\n\r\n  const [showCreate, setShowCreate] = useState(false);\r\n\r\n  // ====== Cargar clientes ======\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        if (Array.isArray(clientsCatalog) && clientsCatalog.length > 0) {\r\n          if (mounted)\r\n            setClientsMap(buildClientsMapFromCatalog(clientsCatalog));\r\n          return;\r\n        }\r\n        const res = await clientService.getClients();\r\n        const list = Array.isArray(res?.data)\r\n          ? res.data\r\n          : Array.isArray(res)\r\n          ? res\r\n          : [];\r\n        if (mounted)\r\n          setClientsMap(buildClientsMapFromCatalog(list));\r\n      } catch (e) {\r\n        if (mounted) setClientsMap(null);\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [clientsCatalog]);\r\n\r\n  /**\r\n   * fetchRows con \"forceRemote\".\r\n   */\r\n  const fetchRows = useCallback(\r\n    async ({ forceRemote = false } = {}) => {\r\n      if (Array.isArray(projects) && !forceRemote) {\r\n        const withCanon = projects.map((p) => ({\r\n          ...p,\r\n          __estadoCanon: getCanonFromObject(p),\r\n        }));\r\n        // ‚¨ÖÔ∏è Ajuste: si no hay canon, igual se muestra (no se filtra por completo)\r\n        const filtered = withCanon.filter((p) => {\r\n          const canon = getCanon(p);\r\n          if (!canon) return true;\r\n          return ALLOWED.includes(canon);\r\n        });\r\n        setRows(filtered);\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n      setErr(null);\r\n      try {\r\n        const res = await proyectoService.getProyectos();\r\n        const list = Array.isArray(res?.data)\r\n          ? res.data\r\n          : Array.isArray(res)\r\n          ? res\r\n          : [];\r\n        const withCanon = list.map((p) => ({\r\n          ...p,\r\n          __estadoCanon: getCanonFromObject(p),\r\n        }));\r\n        const filtered = withCanon.filter((p) => {\r\n          const canon = getCanon(p);\r\n          if (!canon) return true;\r\n          return ALLOWED.includes(canon);\r\n        });\r\n        setRows(filtered);\r\n      } catch (e) {\r\n        setErr(\r\n          e?.userMessage ||\r\n            e?.message ||\r\n            'Error al obtener proyectos'\r\n        );\r\n        setRows([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [projects]\r\n  );\r\n\r\n  useEffect(() => {\r\n    fetchRows();\r\n  }, [fetchRows]);\r\n\r\n  const range = useMemo(() => {\r\n    const now = new Date();\r\n    const today = new Date(\r\n      now.getFullYear(),\r\n      now.getMonth(),\r\n      now.getDate()\r\n    );\r\n    if (period === 'week') {\r\n      const ini = startOfWeekMonday(today);\r\n      const fin = new Date(ini);\r\n      fin.setDate(ini.getDate() + 7);\r\n      return { ini, fin };\r\n    }\r\n    if (period === 'month') {\r\n      const ini = startOfMonth(today);\r\n      const fin = startOfNextMonth(today);\r\n      return { ini, fin };\r\n    }\r\n    if (period === 'q') {\r\n      const ini = startOfQuarter(today);\r\n      const fin = startOfNextQuarter(today);\r\n      return { ini, fin };\r\n    }\r\n    if (period === 'year') {\r\n      const ini = startOfYear(today.getFullYear());\r\n      const fin = startOfNextYear(today.getFullYear());\r\n      return { ini, fin };\r\n    }\r\n    return null;\r\n  }, [period]);\r\n\r\n  const filteredRows = useMemo(() => {\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    if (!range) {\r\n      return rows\r\n        .filter((p) => {\r\n          const e = safeDate(getEnd(p));\r\n          if (!e) return true;\r\n          return e.getTime() >= today.getTime();\r\n        })\r\n        .sort((a, b) => {\r\n          const aT = safeDate(getStart(a))?.getTime?.() ?? 0;\r\n          const bT = safeDate(getStart(b))?.getTime?.() ?? 0;\r\n          return aT - bT;\r\n        });\r\n    }\r\n\r\n    const { ini, fin } = range;\r\n    return rows\r\n      .filter((p) => {\r\n        const s = safeDate(getStart(p));\r\n        const e = safeDate(getEnd(p));\r\n\r\n        if (e && e.getTime() < today.getTime()) return false;\r\n\r\n        const startsIn = s && inRange(s, ini, fin);\r\n        const endsIn = e && inRange(e, ini, fin);\r\n        return startsIn || endsIn;\r\n      })\r\n      .sort((a, b) => {\r\n        const aT = safeDate(getStart(a))?.getTime?.() ?? 0;\r\n        const bT = safeDate(getStart(b))?.getTime?.() ?? 0;\r\n        return aT - bT;\r\n      });\r\n  }, [rows, range]);\r\n\r\n  const assignedPeople = useMemo(() => {\r\n    const map = new Map();\r\n    for (const p of rows) {\r\n      const people = Array.isArray(p?.assignedPersonnel)\r\n        ? p.assignedPersonnel\r\n        : Array.isArray(p?.personalAsignado)\r\n        ? p.personalAsignado\r\n        : [];\r\n      const clientDet = getClientDetails(p, clientsMap);\r\n      const proj = {\r\n        code: String(getCode(p) || ''),\r\n        name: String(getName(p) || ''),\r\n        clientName: clientDet.name || 'Sin cliente',\r\n        clientAux: clientDet.aux || null,\r\n      };\r\n      const key = `${proj.code}__${proj.name}__${proj.clientName}`;\r\n\r\n      for (const raw of people) {\r\n        if (!raw) continue;\r\n        const personName =\r\n          typeof raw === 'string'\r\n            ? raw.trim()\r\n            : String(raw?.name ?? '').trim();\r\n        if (!personName) continue;\r\n\r\n        if (!map.has(personName))\r\n          map.set(personName, { projects: new Map() });\r\n        const entry = map.get(personName);\r\n        if (!entry.projects.has(key)) entry.projects.set(key, proj);\r\n      }\r\n    }\r\n\r\n    const arr = Array.from(map.entries()).map(([name, info]) => {\r\n      const projects = Array.from(info.projects.values());\r\n      return {\r\n        name,\r\n        count: projects.length,\r\n        projects,\r\n      };\r\n    });\r\n\r\n    arr.sort((a, b) => {\r\n      if (b.count !== a.count) return b.count - a.count;\r\n      return a.name.localeCompare('es', {\r\n        sensitivity: 'base',\r\n      });\r\n    });\r\n\r\n    return arr;\r\n  }, [rows, clientsMap]);\r\n\r\n  const [peoplePage, setPeoplePage] = useState(1);\r\n  const PEOPLE_PAGE_SIZE = 5;\r\n\r\n  useEffect(() => {\r\n    setPeoplePage(1);\r\n  }, [assignedPeople.length]);\r\n\r\n  const peopleTotalPages = Math.max(\r\n    1,\r\n    Math.ceil(assignedPeople.length / PEOPLE_PAGE_SIZE)\r\n  );\r\n  const peopleSlice = useMemo(() => {\r\n    const start = (peoplePage - 1) * PEOPLE_PAGE_SIZE;\r\n    return assignedPeople.slice(start, start + PEOPLE_PAGE_SIZE);\r\n  }, [assignedPeople, peoplePage]);\r\n\r\n  const canPrevPeople = peoplePage > 1;\r\n  const canNextPeople = peoplePage < peopleTotalPages;\r\n\r\n  const [personModal, setPersonModal] = useState({\r\n    open: false,\r\n    name: '',\r\n    projects: [],\r\n  });\r\n  const openPersonModal = (personName) => {\r\n    const found = assignedPeople.find((p) => p.name === personName);\r\n    setPersonModal({\r\n      open: true,\r\n      name: personName,\r\n      projects: found?.projects || [],\r\n    });\r\n    if (typeof document !== 'undefined') {\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n  };\r\n  const closePersonModal = () => {\r\n    setPersonModal({ open: false, name: '', projects: [] });\r\n    if (typeof document !== 'undefined') {\r\n      document.body.style.overflow = '';\r\n    }\r\n  };\r\n\r\n  const openCreate = () => setShowCreate(true);\r\n  const closeCreate = () => setShowCreate(false);\r\n  useEffect(() => {\r\n    if (typeof document === 'undefined') return;\r\n    if (showCreate) {\r\n      const prev = document.body.style.overflow;\r\n      document.body.style.overflow = 'hidden';\r\n      return () => {\r\n        document.body.style.overflow = prev;\r\n      };\r\n    }\r\n  }, [showCreate]);\r\n\r\n  const handleNewProjectClick = () => {\r\n    if (typeof onNewProject === 'function') onNewProject();\r\n    openCreate();\r\n  };\r\n\r\n  const handleCreated = async (payloadSentOrCreated) => {\r\n    const now = Date.now();\r\n    const created = payloadSentOrCreated || {};\r\n    const optimistic = {\r\n      id: created?.id || created?._id || `tmp_${now}`,\r\n      codigo: created?.codigo || created?.code || '',\r\n      nombre: created?.nombre || created?.name || 'Proyecto sin nombre',\r\n      cliente:\r\n        created?.cliente || {\r\n          id: created?.client || '',\r\n          nombre: created?.clientName || '',\r\n        },\r\n      cronograma: {\r\n        fechaInicio:\r\n          created?.cronograma?.fechaInicio ||\r\n          created?.startDate ||\r\n          '',\r\n        fechaFin:\r\n          created?.cronograma?.fechaFin ||\r\n          created?.endDate ||\r\n          '',\r\n      },\r\n      prioridad: created?.prioridad || created?.priority || '',\r\n      presupuesto:\r\n        created?.presupuesto || {\r\n          manoObra: Number(created?.budgetBreakdown?.labor || 0),\r\n          piezas: Number(created?.budgetBreakdown?.parts || 0),\r\n          equipos: Number(\r\n            created?.budgetBreakdown?.equipment || 0\r\n          ),\r\n          materiales: Number(\r\n            created?.budgetBreakdown?.materials || 0\r\n          ),\r\n          transporte: Number(\r\n            created?.budgetBreakdown?.transportation || 0\r\n          ),\r\n          otros: Number(created?.budgetBreakdown?.other || 0),\r\n        },\r\n      estado: created?.estado || created?.status || 'Planificaci√≥n',\r\n      __estadoCanon:\r\n        toCanon(created?.estado || created?.status) ||\r\n        'Planificaci√≥n',\r\n      personalAsignado:\r\n        created?.personalAsignado ||\r\n        created?.assignedPersonnel ||\r\n        [],\r\n    };\r\n\r\n    setRows((prev) => [optimistic, ...prev]);\r\n    await fetchRows({ forceRemote: true });\r\n    closeCreate();\r\n  };\r\n\r\n  const SEP = ';';\r\n  const q = (v) =>\r\n    `\"${String(v ?? '').replace(/\"/g, '\"\"')}\"`;\r\n\r\n  const handleExportReport = () => {\r\n    if (!filteredRows || filteredRows.length === 0) {\r\n      alert(\r\n        'No hay proyectos para exportar en el per√≠odo seleccionado.'\r\n      );\r\n      return;\r\n    }\r\n\r\n    const headers = [\r\n      'C√≥digo',\r\n      'Nombre',\r\n      'Cliente',\r\n      'Estado',\r\n      'Inicio',\r\n      'Fin',\r\n      'Prioridad',\r\n      'Presupuesto Total (MXN)',\r\n      'Progreso (%)',\r\n    ];\r\n\r\n    const rowsCsv = filteredRows.map((p) => {\r\n      const code = getCode(p);\r\n      const name = getName(p);\r\n      const client = getClientDetails(p, clientsMap).name;\r\n      const canon = getCanon(p) || '';\r\n      const inicio = fmtDateIso(getStart(p));\r\n      const fin = fmtDateIso(getEnd(p));\r\n      const prior = p?.prioridad ?? p?.priority ?? '';\r\n      const budget = Number(getBudgetTotal(p));\r\n      const prog = Math.max(\r\n        0,\r\n        Math.min(100, Number(getProg(p)))\r\n      );\r\n\r\n      return [\r\n        q(code),\r\n        q(name),\r\n        q(client),\r\n        q(canon),\r\n        q(inicio),\r\n        q(fin),\r\n        q(prior),\r\n        String(budget),\r\n        String(prog),\r\n      ].join(SEP);\r\n    });\r\n\r\n    const titleMap = {\r\n      week: 'semana',\r\n      month: 'mes',\r\n      q: 'trimestre',\r\n      year: 'anio',\r\n    };\r\n    const fileSuffix = titleMap[period] || 'periodo';\r\n    const fileName = `reporte_proyectos_${fileSuffix}_${new Date()\r\n      .toISOString()\r\n      .slice(0, 10)}.csv`;\r\n\r\n    const csvContent =\r\n      '\\uFEFF' +\r\n      [\r\n        'sep=' + SEP,\r\n        headers.map(q).join(SEP),\r\n        ...rowsCsv,\r\n      ].join('\\n');\r\n\r\n    const blob = new Blob([csvContent], {\r\n      type: 'text/csv;charset=utf-8',\r\n    });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = fileName;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* IZQUIERDA: Timeline */}\r\n        <div className=\"lg:col-span-2\">\r\n          <div className=\"bg-card border border-border rounded-lg p-6\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-foreground\">\r\n                Cronograma de Proyectos\r\n              </h3>\r\n\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"flex bg-muted rounded-lg p-1\">\r\n                  {PERIODS.map((p) => (\r\n                    <button\r\n                      key={p.key}\r\n                      onClick={() => setPeriod(p.key)}\r\n                      className={`px-3 py-1 text-sm rounded-md transition-smooth ${\r\n                        period === p.key\r\n                          ? 'bg-primary text-primary-foreground'\r\n                          : 'text-muted-foreground hover:text-foreground'\r\n                      }`}\r\n                    >\r\n                      {p.label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  iconName=\"RotateCw\"\r\n                  onClick={() => fetchRows({ forceRemote: true })}\r\n                  title=\"Actualizar\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {loading && (\r\n              <div className=\"text-center py-8\">\r\n                <Icon\r\n                  name=\"Loader2\"\r\n                  size={32}\r\n                  className=\"animate-spin text-muted-foreground mx-auto mb-4\"\r\n                />\r\n                <p className=\"text-muted-foreground\">\r\n                  Cargando proyectos...\r\n                </p>\r\n              </div>\r\n            )}\r\n            {!loading && err && (\r\n              <div className=\"text-center py-8 text-destructive\">\r\n                {String(err)}\r\n              </div>\r\n            )}\r\n            {!loading &&\r\n              !err &&\r\n              filteredRows.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <Icon\r\n                    name=\"Calendar\"\r\n                    size={48}\r\n                    className=\"text-muted-foreground mx-auto mb-4\"\r\n                  />\r\n                  <p className=\"text-muted-foreground\">\r\n                    No hay proyectos vigentes para el per√≠odo\r\n                    seleccionado.\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">\r\n                    (Los proyectos con fecha de finalizaci√≥n pasada\r\n                    no se muestran aqu√≠)\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n            {!loading &&\r\n              !err &&\r\n              filteredRows.length > 0 && (\r\n                <div className=\"space-y-4\">\r\n                  {filteredRows.map((p, idx) => {\r\n                    const id = getId(p);\r\n                    const code = String(getCode(p) || '');\r\n                    const name = String(getName(p) || '');\r\n                    const clientDet = getClientDetails(\r\n                      p,\r\n                      clientsMap\r\n                    );\r\n                    const start = getStart(p);\r\n                    const end = getEnd(p);\r\n                    const canon = getCanon(p) || '‚Äî';\r\n                    const prog = Math.max(\r\n                      0,\r\n                      Math.min(100, getProg(p))\r\n                    );\r\n\r\n                    return (\r\n                      <div\r\n                        key={id ?? code ?? `row_${idx}`}\r\n                        className=\"relative\"\r\n                        data-code={code}\r\n                      >\r\n                        {/* l√≠nea vertical */}\r\n                        {idx < filteredRows.length - 1 && (\r\n                          <div className=\"absolute left-6 top-12 w-0.5 h-16 bg-border\" />\r\n                        )}\r\n\r\n                        <div className=\"flex items-start space-x-4\">\r\n                          {/* punto */}\r\n                          <div\r\n                            className={`w-3 h-3 rounded-full ${statusColor(\r\n                              canon\r\n                            )} mt-2 flex-shrink-0`}\r\n                          />\r\n\r\n                          {/* contenido */}\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                              <h4\r\n                                className=\"font-medium text-foreground truncate\"\r\n                                title={name}\r\n                              >\r\n                                {name}\r\n                              </h4>\r\n                              <span\r\n                                className=\"text-sm text-muted-foreground\"\r\n                                title={code}\r\n                              >\r\n                                {code}\r\n                              </span>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm\">\r\n                              <div className=\"break-words\">\r\n                                <span className=\"text-muted-foreground block\">\r\n                                  Cliente\r\n                                </span>\r\n                                <div\r\n                                  className=\"text-foreground font-medium\"\r\n                                  title={clientDet.name}\r\n                                >\r\n                                  {clientDet.name || 'Sin cliente'}\r\n                                </div>\r\n                                {clientDet.aux && (\r\n                                  <div\r\n                                    className=\"text-xs text-muted-foreground truncate\"\r\n                                    title={clientDet.aux}\r\n                                  >\r\n                                    {clientDet.aux}\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                              <div>\r\n                                <span className=\"text-muted-foreground\">\r\n                                  Inicio:{' '}\r\n                                </span>\r\n                                <span className=\"text-foreground\">\r\n                                  {fmtDateHuman(start)}\r\n                                </span>\r\n                              </div>\r\n                              <div>\r\n                                <span className=\"text-muted-foreground\">\r\n                                  Fin:{' '}\r\n                                </span>\r\n                                <span className=\"text-foreground\">\r\n                                  {fmtDateHuman(end)}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center justify-between mt-3\">\r\n                              <div className=\"flex items-center space-x-4\">\r\n                                <span\r\n                                  className={`px-2 py-1 rounded-full text-xs font-medium ${statusPill(\r\n                                    canon\r\n                                  )}`}\r\n                                >\r\n                                  {canon}\r\n                                </span>\r\n                                <div className=\"flex items-center space-x-1\">\r\n                                  <Icon\r\n                                    name=\"Users\"\r\n                                    size={14}\r\n                                    className=\"text-muted-foreground\"\r\n                                  />\r\n                                  <span className=\"text-xs text-muted-foreground\">\r\n                                    {(\r\n                                      p?.assignedPersonnel ||\r\n                                      p?.personalAsignado ||\r\n                                      []\r\n                                    ).length}{' '}\r\n                                    personas\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n\r\n                              <div className=\"flex items-center space-x-2\">\r\n                                <div\r\n                                  className=\"w-24 bg-muted rounded-full h-2\"\r\n                                  title={`${prog}%`}\r\n                                >\r\n                                  <div\r\n                                    className={`h-2 rounded-full ${statusColor(\r\n                                      canon\r\n                                    )}`}\r\n                                    style={{\r\n                                      width: `${prog}%`,\r\n                                    }}\r\n                                  />\r\n                                </div>\r\n                                <span className=\"text-xs text-foreground font-medium\">\r\n                                  {prog}%\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* DERECHA: Paneles */}\r\n        <div className=\"space-y-6\">\r\n          {/* Personal Asignado */}\r\n          <div className=\"bg-card border border-border rounded-lg p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-foreground\">\r\n                Personal Asignado\r\n              </h3>\r\n              <div className=\"text-sm text-muted-foreground\">\r\n                {assignedPeople.length} persona\r\n                {assignedPeople.length === 1 ? '' : 's'}\r\n              </div>\r\n            </div>\r\n\r\n            {assignedPeople.length === 0 && (\r\n              <div className=\"text-sm text-muted-foreground\">\r\n                Sin personal asignado a proyectos vigentes.\r\n              </div>\r\n            )}\r\n\r\n            {assignedPeople.length > 0 && (\r\n              <>\r\n                <div className=\"space-y-3\">\r\n                  {peopleSlice.map((p) => (\r\n                    <div\r\n                      key={p.name}\r\n                      className=\"flex items-center justify-between\"\r\n                    >\r\n                      <div className=\"min-w-0\">\r\n                        <div\r\n                          className=\"font-medium text-foreground truncate\"\r\n                          title={p.name}\r\n                        >\r\n                          {p.name}\r\n                        </div>\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          {p.count} proyecto\r\n                          {p.count > 1 ? 's' : ''}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"w-8 h-8 rounded-full border border-border hover:bg-muted flex items-center justify-center\"\r\n                          title=\"Ver proyectos\"\r\n                          onClick={() => openPersonModal(p.name)}\r\n                        >\r\n                          <Icon name=\"Eye\" size={16} />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"flex items-center justify-between mt-4 pt-4 border-t border-border\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className={`px-3 py-1 rounded-md text-sm border border-border ${\r\n                      canPrevPeople\r\n                        ? 'hover:bg-muted'\r\n                        : 'opacity-50 cursor-not-allowed'\r\n                    }`}\r\n                    onClick={() =>\r\n                      canPrevPeople &&\r\n                      setPeoplePage((n) => Math.max(1, n - 1))\r\n                    }\r\n                    disabled={!canPrevPeople}\r\n                  >\r\n                    ‚Üê Anterior\r\n                  </button>\r\n                  <div className=\"text-sm text-muted-foreground\">\r\n                    P√°gina{' '}\r\n                    <span className=\"font-medium text-foreground\">\r\n                      {peoplePage}\r\n                    </span>{' '}\r\n                    de{' '}\r\n                    <span className=\"font-medium text-foreground\">\r\n                      {peopleTotalPages}\r\n                    </span>\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    className={`px-3 py-1 rounded-md text-sm border border-border ${\r\n                      canNextPeople\r\n                        ? 'hover:bg-muted'\r\n                        : 'opacity-50 cursor-not-allowed'\r\n                    }`}\r\n                    onClick={() =>\r\n                      canNextPeople &&\r\n                      setPeoplePage((n) =>\r\n                        Math.min(peopleTotalPages, n + 1)\r\n                      )\r\n                    }\r\n                    disabled={!canNextPeople}\r\n                  >\r\n                    Siguiente ‚Üí\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          {/* Acciones R√°pidas */}\r\n          <div className=\"bg-card border border-border rounded-lg p-6\">\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-4\">\r\n              Acciones R√°pidas\r\n            </h3>\r\n            <div className=\"space-y-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"Plus\"\r\n                iconPosition=\"left\"\r\n                className=\"w-full justify-start\"\r\n                onClick={handleNewProjectClick}\r\n              >\r\n                Nuevo Proyecto\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"FileText\"\r\n                iconPosition=\"left\"\r\n                className=\"w-full justify-start\"\r\n                onClick={handleExportReport}\r\n              >\r\n                Generar Reporte\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"Calendar\"\r\n                iconPosition=\"left\"\r\n                className=\"w-full justify-start\"\r\n              >\r\n                Programar Reuni√≥n\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <CreateProjectModal\r\n        isOpen={showCreate}\r\n        onClose={closeCreate}\r\n        onSubmit={handleCreated}\r\n      />\r\n\r\n      {personModal.open && (\r\n        <div className=\"fixed inset-0 z-[1050] flex items-center justify-center\">\r\n          <div\r\n            className=\"absolute inset-0 bg-black/50\"\r\n            onClick={closePersonModal}\r\n            aria-hidden=\"true\"\r\n          />\r\n          <div className=\"relative bg-card border border-border rounded-lg w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden shadow-xl\">\r\n            <div className=\"flex items-center justify-between p-5 border-b border-border\">\r\n              <div>\r\n                <h2 className=\"text-lg font-semibold text-foreground\">\r\n                  {personModal.name}\r\n                </h2>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  En {personModal.projects.length} proyecto\r\n                  {personModal.projects.length === 1 ? '' : 's'}\r\n                </p>\r\n              </div>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={closePersonModal}\r\n                title=\"Cerrar\"\r\n              >\r\n                <Icon name=\"X\" size={18} />\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"p-5 overflow-auto\">\r\n              {personModal.projects.length === 0 ? (\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  No hay proyectos para mostrar.\r\n                </div>\r\n              ) : (\r\n                <div className=\"border border-border rounded-lg overflow-hidden\">\r\n                  <table className=\"w-full text-sm\">\r\n                    <thead className=\"bg-muted\">\r\n                      <tr className=\"text-left\">\r\n                        <th className=\"px-4 py-2 text-foreground\">\r\n                          C√≥digo\r\n                        </th>\r\n                        <th className=\"px-4 py-2 text-foreground\">\r\n                          Proyecto\r\n                        </th>\r\n                        <th className=\"px-4 py-2 text-foreground\">\r\n                          Cliente\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {personModal.projects.map((pr, i) => (\r\n                        <tr\r\n                          key={`${pr.code}__${pr.name}__${i}`}\r\n                          className=\"border-t border-border align-top\"\r\n                        >\r\n                          <td className=\"px-4 py-2 text-foreground whitespace-nowrap\">\r\n                            {pr.code || '‚Äî'}\r\n                          </td>\r\n                          <td className=\"px-4 py-2 text-foreground\">\r\n                            {pr.name}\r\n                          </td>\r\n                          <td className=\"px-4 py-2\">\r\n                            <div\r\n                              className=\"text-foreground font-medium truncate\"\r\n                              title={pr.clientName}\r\n                            >\r\n                              {pr.clientName || 'Sin cliente'}\r\n                            </div>\r\n                            {pr.clientAux && (\r\n                              <div\r\n                                className=\"text-xs text-muted-foreground truncate\"\r\n                                title={pr.clientAux}\r\n                              >\r\n                                {pr.clientAux}\r\n                              </div>\r\n                            )}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"p-4 border-t border-border flex justify-end\">\r\n              <Button variant=\"outline\" onClick={closePersonModal}>\r\n                Cerrar\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProjectTimeline;\r\n","// ProjectQuotations.jsx\r\nimport React, { useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport ProjectTable from './ProjectTable';\r\nimport ProjectFilters, { applyProjectFilters } from './ProjectFilters';\r\n\r\nconst ProjectQuotations = ({ projects = [] }) => {\r\n  const navigate = useNavigate();\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n\r\n  // üì¶ Estado de filtros\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    status: '',\r\n    department: '',\r\n    dateRange: '',\r\n    clientType: '',\r\n    priority: '',\r\n    minBudget: '',\r\n    maxBudget: '',\r\n    startDate: '',\r\n    endDate: '',\r\n  });\r\n\r\n  // === Utilidades ===\r\n  const formatCurrency = (n) =>\r\n    new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN',\r\n    }).format(n ?? 0);\r\n\r\n  const formatDate = (d) =>\r\n    new Date(d).toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n    });\r\n\r\n  const getStatusColor = (s) =>\r\n    ({\r\n      pending: 'bg-yellow-100 text-yellow-800',\r\n      approved: 'bg-green-100 text-green-800',\r\n      rejected: 'bg-red-100 text-red-800',\r\n      expired: 'bg-gray-100 text-gray-800',\r\n      draft: 'bg-blue-100 text-blue-800',\r\n      planning: 'bg-blue-100 text-blue-800',\r\n      'in-progress': 'bg-emerald-100 text-emerald-800',\r\n      'on-hold': 'bg-yellow-100 text-yellow-800',\r\n      review: 'bg-purple-100 text-purple-800',\r\n      completed: 'bg-green-100 text-green-800',\r\n      cancelled: 'bg-red-100 text-red-800',\r\n    }[s] || 'bg-gray-100 text-gray-800');\r\n\r\n  // === Normalizadores ===\r\n  const norm = (v) =>\r\n    (v == null ? '' : String(v))\r\n      .toLowerCase()\r\n      .normalize('NFD')\r\n      .replace(/[\\u0300-\\u036f]/g, '')\r\n      .trim();\r\n\r\n  const canonicalizeStatus = (raw) => {\r\n    const n = norm(raw);\r\n    if (!n) return '';\r\n    const table = [\r\n      [\r\n        'planning',\r\n        ['planificacion', 'planificaci√≥n', 'planning', 'planeacion', 'planeaci√≥n'],\r\n      ],\r\n      [\r\n        'in-progress',\r\n        [\r\n          'en progreso',\r\n          'in-progress',\r\n          'progreso',\r\n          'ejecucion',\r\n          'ejecuci√≥n',\r\n          'proceso',\r\n        ],\r\n      ],\r\n      ['on-hold', ['en pausa', 'on-hold', 'pausa', 'pausado', 'detenido', 'hold']],\r\n      [\r\n        'review',\r\n        ['revision', 'revisi√≥n', 'review', 'en revision', 'por revisar', 'validacion'],\r\n      ],\r\n      ['completed', ['completado', 'finalizado', 'done', 'terminado', 'cerrado']],\r\n      ['cancelled', ['cancelado', 'cancelled', 'anulado']],\r\n    ];\r\n    for (const [canon, synonyms] of table) {\r\n      if (synonyms.some((w) => n === norm(w) || n.includes(norm(w)))) return canon;\r\n    }\r\n    return n;\r\n  };\r\n\r\n  const canonicalizeDepartment = (raw) => {\r\n    const n = norm(raw);\r\n    if (!n) return '';\r\n    const table = [\r\n      ['sales', ['ventas']],\r\n      ['engineering', ['ingenieria', 'ingenier√≠a', 'ing']],\r\n      ['installation', ['instalacion', 'instalaci√≥n', 'montaje']],\r\n      ['maintenance', ['mantenimiento', 'mtto']],\r\n      ['administration', ['administracion', 'administraci√≥n', 'admin']],\r\n    ];\r\n    for (const [canon, synonyms] of table) {\r\n      if (synonyms.some((w) => n === norm(w) || n.includes(norm(w)))) return canon;\r\n    }\r\n    return n;\r\n  };\r\n\r\n  const canonicalizeClientType = (raw) => {\r\n    const n = norm(raw);\r\n    if (!n) return '';\r\n    const table = [\r\n      ['residential', ['residencial', 'hogar']],\r\n      ['commercial', ['comercial', 'negocio']],\r\n      ['industrial', ['industrial', 'industria']],\r\n      ['government', ['gubernamental', 'gobierno', 'publico']],\r\n    ];\r\n    for (const [canon, synonyms] of table) {\r\n      if (synonyms.some((w) => n === norm(w) || n.includes(norm(w)))) return canon;\r\n    }\r\n    return n;\r\n  };\r\n\r\n  const canonicalizePriority = (raw) => {\r\n    const n = norm(raw);\r\n    if (!n) return '';\r\n    const table = [\r\n      ['low', ['baja']],\r\n      ['medium', ['media', 'normal']],\r\n      ['high', ['alta']],\r\n      ['urgent', ['urgente']],\r\n    ];\r\n    for (const [canon, synonyms] of table) {\r\n      if (synonyms.some((w) => n === norm(w) || n.includes(norm(w)))) return canon;\r\n    }\r\n    return n;\r\n  };\r\n\r\n  // === Cotizaciones simuladas (placeholder) ===\r\n  const generateProjectQuotations = (project) => {\r\n    if (!project) return [];\r\n    const b = Number(project?.budget) || 0;\r\n    const mid = (project?.code || '').split('-')?.[2] || '000';\r\n    return [\r\n      {\r\n        id: `${project?.id}-quote-1`,\r\n        code: `COT-${mid}-001`,\r\n        version: '1.0',\r\n        status: 'planning',\r\n        statusLabel: 'Planificaci√≥n',\r\n        amount: b * 0.9,\r\n        createdDate: '2024-01-10',\r\n        expiryDate: '2024-02-10',\r\n        description: 'Cotizaci√≥n inicial para el proyecto',\r\n      },\r\n      {\r\n        id: `${project?.id}-quote-2`,\r\n        code: `COT-${mid}-002`,\r\n        version: '1.1',\r\n        status: 'in-progress',\r\n        statusLabel: 'En Progreso',\r\n        amount: b,\r\n        createdDate: '2024-01-15',\r\n        expiryDate: '2024-03-15',\r\n        description: 'Cotizaci√≥n revisada con especificaciones actualizadas',\r\n      },\r\n    ];\r\n  };\r\n\r\n  // ‚¨áÔ∏è Ahora manda al m√≥dulo de /cotizaciones (que s√≠ tiene dashboard),\r\n  // pasando el projectId como query param\r\n  const handleCreateQuotation = (project) =>\r\n    navigate(`/cotizaciones?projectId=${project?.id ?? ''}`);\r\n\r\n  const handleViewQuotation = (project, quotation) =>\r\n    navigate(`/cotizaciones?quotationId=${quotation?.id ?? ''}`);\r\n\r\n  // === Normalizar proyectos ===\r\n  const projectsForFilter = useMemo(() => {\r\n    const pick = (...c) => c.find((v) => v !== undefined && v !== null);\r\n    return (Array.isArray(projects) ? projects : []).map((p) => ({\r\n      ...p,\r\n      name: pick(p.name, p.proyecto, p.titulo, p.nombre) ?? '',\r\n      code: pick(p.code, p.codigo, p.clave) ?? '',\r\n      client: {\r\n        ...(p.client || {}),\r\n        name: pick(p?.client?.name, p.cliente, p.clienteNombre) ?? '',\r\n        type: canonicalizeClientType(p.clientType || p.tipoCliente),\r\n        email: pick(p?.client?.email, p.clienteEmail, p.emailCliente) ?? '',\r\n      },\r\n      department: canonicalizeDepartment(p.department || p.depto),\r\n      priority: canonicalizePriority(p.priority || p.prioridad),\r\n      status: canonicalizeStatus(p.status || p.estado),\r\n      budget: Number(p.budget ?? p.presupuesto ?? 0),\r\n      startDate: pick(p.startDate, p.fechaInicio, p.inicio) ?? '',\r\n      endDate: pick(p.endDate, p.fechaFin, p.fin) ?? '',\r\n      __ref: p,\r\n    }));\r\n  }, [projects]);\r\n\r\n  // === Aplicar filtros ===\r\n  const filteredForFilter = useMemo(\r\n    () => applyProjectFilters(projectsForFilter, filters),\r\n    [projectsForFilter, filters]\r\n  );\r\n\r\n  const filteredProjects = useMemo(\r\n    () => filteredForFilter.map((p) => p.__ref || p),\r\n    [filteredForFilter]\r\n  );\r\n\r\n  const tableKey = useMemo(() => 'tbl-' + JSON.stringify(filters), [filters]);\r\n  const quotations = useMemo(\r\n    () => generateProjectQuotations(selectedProject),\r\n    [selectedProject]\r\n  );\r\n  const hasResults = filteredProjects?.length > 0;\r\n\r\n  const handleExportVisible = () => {\r\n    const rows = filteredForFilter || [];\r\n    if (!rows.length) {\r\n      alert('No hay proyectos para exportar con los filtros actuales.');\r\n      return;\r\n    }\r\n    const headers = [\r\n      'name',\r\n      'code',\r\n      'clientName',\r\n      'clientType',\r\n      'department',\r\n      'priority',\r\n      'status',\r\n      'budget',\r\n      'startDate',\r\n      'endDate',\r\n    ];\r\n    const escape = (v) => `\"${(v ?? '').toString().replace(/\"/g, '\"\"')}\"`;\r\n    const csv = [\r\n      headers.join(','),\r\n      ...rows.map((p) =>\r\n        [\r\n          escape(p.name),\r\n          escape(p.code),\r\n          escape(p.client.name),\r\n          escape(p.client.type),\r\n          escape(p.department),\r\n          escape(p.priority),\r\n          escape(p.status),\r\n          escape(p.budget),\r\n          escape(p.startDate),\r\n          escape(p.endDate),\r\n        ].join(',')\r\n      ),\r\n    ].join('\\n');\r\n\r\n    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'proyectos_filtrados.csv';\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Encabezado */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-foreground mb-1\">\r\n            Cotizaciones de Proyectos\r\n          </h2>\r\n          <p className=\"text-muted-foreground\">\r\n            Gestiona las cotizaciones asociadas a cada proyecto.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtros */}\r\n      <ProjectFilters\r\n        onFiltersChange={setFilters}\r\n        totalProjects={projects.length}\r\n        filteredProjects={filteredProjects.length}\r\n        onExport={handleExportVisible}\r\n      />\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Tabla */}\r\n        <div className=\"lg:col-span-2 pq--only-edit\">\r\n          {hasResults ? (\r\n            <>\r\n              <ProjectTable\r\n                key={tableKey}\r\n                projects={filteredProjects}\r\n                onProjectSelect={(p) => setSelectedProject(p)}\r\n              />\r\n              <style>{`\r\n                .pq--only-edit button[title=\"Ver detalles\"],\r\n                .pq--only-edit button[title=\"Ver galer√≠a de im√°genes\"],\r\n                .pq--only-edit button[title=\"Subir imagen\"],\r\n                .pq--only-edit button[title=\"Eliminar proyecto\"] {\r\n                  display: none !important;\r\n                }\r\n              `}</style>\r\n            </>\r\n          ) : (\r\n            <div className=\"flex items-center justify-center h-[320px] border border-dashed border-border rounded-lg bg-muted/20\">\r\n              <div className=\"text-center px-6\">\r\n                <Icon\r\n                  name=\"Filter\"\r\n                  size={48}\r\n                  className=\"text-muted-foreground mx-auto mb-4\"\r\n                />\r\n                <h3 className=\"text-lg font-medium text-foreground mb-1\">\r\n                  No se encontraron proyectos con tus filtros\r\n                </h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Intenta con otros filtros o par√°metros de b√∫squeda\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Panel cotizaciones */}\r\n        <div className=\"lg:col-span-1\">\r\n          <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n            <div className=\"bg-muted/30 p-4 border-b border-border flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Icon name=\"FileText\" size={18} className=\"text-primary\" />\r\n                <h3 className=\"text-base font-semibold text-foreground\">\r\n                  Cotizaciones\r\n                </h3>\r\n              </div>\r\n              {selectedProject && (\r\n                <Button\r\n                  size=\"sm\"\r\n                  onClick={() => handleCreateQuotation(selectedProject)}\r\n                >\r\n                  Ir a cotizaciones\r\n                </Button>\r\n              )}\r\n            </div>\r\n\r\n            {!selectedProject ? (\r\n              <div className=\"p-6 text-center\">\r\n                <Icon\r\n                  name=\"Info\"\r\n                  size={40}\r\n                  className=\"text-muted-foreground mx-auto mb-3\"\r\n                />\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Selecciona{' '}\r\n                  <span className=\"font-medium text-foreground\">un proyecto</span>{' '}\r\n                  en la tabla para ver sus cotizaciones aqu√≠.\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"p-4 space-y-3\">\r\n                <div className=\"mb-1\">\r\n                  <div className=\"text-sm text-muted-foreground\">Proyecto</div>\r\n                  <div className=\"text-sm font-medium text-foreground\">\r\n                    {selectedProject?.name}{' '}\r\n                    <span className=\"text-muted-foreground\">\r\n                      ({selectedProject?.code || '‚Äî'})\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {quotations.map((q) => (\r\n                  <div\r\n                    key={q.id}\r\n                    className=\"bg-background rounded-lg border border-border p-3\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between gap-2\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <span className=\"font-mono text-xs font-semibold text-primary\">\r\n                            {q.code}\r\n                          </span>\r\n                          <span className=\"text-[11px] bg-muted px-2 py-0.5 rounded-full text-muted-foreground\">\r\n                            v{q.version}\r\n                          </span>\r\n                          <span\r\n                            className={`px-2 py-0.5 rounded-full text-[11px] font-medium ${getStatusColor(\r\n                              q.status\r\n                            )}`}\r\n                          >\r\n                            {q.statusLabel}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mb-2\">\r\n                          {q.description}\r\n                        </p>\r\n                        <div className=\"grid grid-cols-2 gap-3\">\r\n                          <div>\r\n                            <div className=\"text-[11px] text-muted-foreground\">\r\n                              Monto\r\n                            </div>\r\n                            <div className=\"text-sm font-semibold text-foreground\">\r\n                              {formatCurrency(q.amount)}\r\n                            </div>\r\n                          </div>\r\n                          <div>\r\n                            <div className=\"text-[11px] text-muted-foreground\">\r\n                              Vence\r\n                            </div>\r\n                            <div className=\"text-sm text-foreground\">\r\n                              {formatDate(q.expiryDate)}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-1\">\r\n                        {/*\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          title=\"Ver\"\r\n                          onClick={() => handleViewQuotation(selectedProject, q)}\r\n                        >\r\n                          <Icon name=\"Eye\" size={16} />\r\n                        </Button>\r\n\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          title=\"Descargar PDF\"\r\n                          onClick={() => alert(`Descargando PDF de ${q.code}`)}\r\n                        >\r\n                          <Icon name=\"Download\" size={16} />\r\n                        </Button>\r\n                        */}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectQuotations;\r\n","import React, { useEffect, useState, useMemo } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport proyectoService from '../../../services/proyectoService';\r\n\r\n// ---------- Helpers ----------\r\nconst toNumber = (val) => {\r\n  if (val === null || val === undefined) return 0;\r\n  if (typeof val === 'number') return isNaN(val) ? 0 : val;\r\n  if (typeof val === 'string') {\r\n    const cleaned = val.replace(/[^0-9.-]+/g, '');\r\n    const n = parseFloat(cleaned);\r\n    return isNaN(n) ? 0 : n;\r\n  }\r\n  return 0;\r\n};\r\n\r\nconst formatCurrencyMXN = (amount) => {\r\n  return new Intl.NumberFormat('es-MX', {\r\n    style: 'currency',\r\n    currency: 'MXN',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n  }).format(amount || 0);\r\n};\r\n\r\nconst safePercent = (part, total) => {\r\n  const p = toNumber(part);\r\n  const t = toNumber(total);\r\n  if (t <= 0) return 0;\r\n  return Math.round((p / t) * 100);\r\n};\r\n\r\n// normalizar estado local (fallback local)\r\nconst normalizeStatus = (rawStatus) => {\r\n  const s = (rawStatus || '').toString().trim().toLowerCase();\r\n\r\n  if (\r\n    [\r\n      'completed',\r\n      'completado',\r\n      'completada',\r\n      'terminado',\r\n      'terminada',\r\n      'done',\r\n      'cerrado',\r\n      'cerrada',\r\n      'finalizado',\r\n      'finalizada',\r\n    ].includes(s)\r\n  ) {\r\n    return 'completed';\r\n  }\r\n\r\n  if (\r\n    [\r\n      'in-progress',\r\n      'in progress',\r\n      'inprogress',\r\n      'en-progreso',\r\n      'en progreso',\r\n      'en proceso',\r\n      'activo',\r\n      'activa',\r\n      'running',\r\n      'ejecucion',\r\n      'ejecuci√≥n',\r\n    ].includes(s)\r\n  ) {\r\n    return 'in-progress';\r\n  }\r\n\r\n  if (\r\n    [\r\n      'on-hold',\r\n      'hold',\r\n      'en pausa',\r\n      'pausa',\r\n      'paused',\r\n      'pausado',\r\n      'pausada',\r\n      'detenido',\r\n      'detenida',\r\n      'suspendido',\r\n      'suspendida',\r\n    ].includes(s)\r\n  ) {\r\n    return 'on-hold';\r\n  }\r\n\r\n  if (\r\n    [\r\n      'planning',\r\n      'plan',\r\n      'planificaci√≥n',\r\n      'planificacion',\r\n      'cotizando',\r\n      'cotizacion',\r\n      'cotizaci√≥n',\r\n      'borrador',\r\n      'draft',\r\n      'nuevo',\r\n      'nueva',\r\n    ].includes(s)\r\n  ) {\r\n    return 'planning';\r\n  }\r\n\r\n  return 'in-progress';\r\n};\r\n\r\n// normalizar prioridad local para fallback \"Proyectos Urgentes\"\r\nconst normalizePriority = (rawPriority) => {\r\n  const p = (rawPriority || '').toString().trim().toLowerCase();\r\n  if (\r\n    [\r\n      'urgent',\r\n      'urgente',\r\n      'alta',\r\n      'alta prioridad',\r\n      'cr√≠tica',\r\n      'critica',\r\n      'cr√≠tico',\r\n      'critico',\r\n      'urgency_high',\r\n    ].includes(p)\r\n  ) {\r\n    return 'urgent';\r\n  }\r\n  return 'normal';\r\n};\r\n\r\n// presupuesto local\r\nconst extractBudgetMXN = (rawProject) => {\r\n  const rawAmount =\r\n    rawProject?.budget ??\r\n    rawProject?.presupuestoTotal ??\r\n    rawProject?.presupuesto?.total ??\r\n    rawProject?.costoEstimado ??\r\n    rawProject?.montoEstimado ??\r\n    rawProject?.monto ??\r\n    rawProject?.totalProyecto ??\r\n    0;\r\n\r\n  return toNumber(rawAmount);\r\n};\r\n\r\n// normalizador de cada proyecto para c√°lculos locales\r\nconst normalizeProject = (rawProject) => {\r\n  return {\r\n    id:\r\n      rawProject?.id ||\r\n      rawProject?.idProyecto ||\r\n      rawProject?.uuid ||\r\n      rawProject?.codigo ||\r\n      null,\r\n\r\n    rawEstado:\r\n      rawProject?.estado ||\r\n      rawProject?.estatus ||\r\n      rawProject?.status ||\r\n      rawProject?.projectStatus ||\r\n      '',\r\n\r\n    status: normalizeStatus(\r\n      rawProject?.status ||\r\n        rawProject?.estado ||\r\n        rawProject?.estatus ||\r\n        rawProject?.projectStatus\r\n    ),\r\n\r\n    priority: normalizePriority(\r\n      rawProject?.priority ||\r\n        rawProject?.prioridad ||\r\n        rawProject?.urgencia\r\n    ),\r\n\r\n    budgetMXN: extractBudgetMXN(rawProject),\r\n  };\r\n};\r\n\r\n// ---------- Componente principal ----------\r\nconst ProjectStats = ({ refreshKey }) => {\r\n  const [projectsNorm, setProjectsNorm] = useState([]);\r\n  const [apiStats, setApiStats] = useState(null);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [errMsg, setErrMsg] = useState('');\r\n  const [warnMsg, setWarnMsg] = useState('');\r\n\r\n  // cargar info de backend\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      setLoading(true);\r\n      setErrMsg('');\r\n      setWarnMsg('');\r\n\r\n      try {\r\n        // 1. stats desde /proyectos/estadisticas\r\n        const statsResp = await proyectoService.getEstadisticas();\r\n        let statsPayload = null;\r\n        if (statsResp && typeof statsResp === 'object') {\r\n          if (\r\n            statsResp.data &&\r\n            typeof statsResp.data === 'object' &&\r\n            !Array.isArray(statsResp.data)\r\n          ) {\r\n            statsPayload = statsResp.data;\r\n          } else {\r\n            statsPayload = statsResp;\r\n          }\r\n        }\r\n\r\n        // 2. lista de proyectos completa\r\n        const proyectosResp = await proyectoService.getProyectos();\r\n        let proyectosRaw = [];\r\n        if (Array.isArray(proyectosResp)) {\r\n          proyectosRaw = proyectosResp;\r\n        } else if (Array.isArray(proyectosResp?.data)) {\r\n          proyectosRaw = proyectosResp.data;\r\n        } else if (Array.isArray(proyectosResp?.items)) {\r\n          proyectosRaw = proyectosResp.items;\r\n        } else {\r\n          proyectosRaw = [];\r\n        }\r\n\r\n        const normalized = proyectosRaw.map(normalizeProject);\r\n\r\n        setApiStats(statsPayload || null);\r\n        setProjectsNorm(normalized);\r\n\r\n        if (!proyectosRaw.length) {\r\n          setWarnMsg('No llegaron proyectos o no entend√≠ /proyectos/todos.');\r\n        } else if (normalized.some((p) => !p.status)) {\r\n          setWarnMsg('Algunos proyectos no traen estado reconocible.');\r\n        }\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setErrMsg(\r\n          err?.userMessage || err?.message || 'Error al cargar estad√≠sticas'\r\n        );\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadData();\r\n  }, [refreshKey]);\r\n\r\n  // fallback local si no hay apiStats o para corregir datos raros del back\r\n  const fallbackLocalStats = useMemo(() => {\r\n    const total = projectsNorm.length;\r\n\r\n    const completedList = projectsNorm.filter(\r\n      (p) => p.status === 'completed'\r\n    );\r\n    const inProgressList = projectsNorm.filter(\r\n      (p) => p.status === 'in-progress'\r\n    );\r\n    const onHoldList = projectsNorm.filter(\r\n      (p) => p.status === 'on-hold'\r\n    );\r\n    const planningList = projectsNorm.filter(\r\n      (p) => p.status === 'planning'\r\n    );\r\n    const urgentList = projectsNorm.filter(\r\n      (p) => p.priority === 'urgent'\r\n    );\r\n\r\n    const totalBudget = projectsNorm.reduce(\r\n      (sum, p) => sum + toNumber(p.budgetMXN),\r\n      0\r\n    );\r\n    const completedBudget = completedList.reduce(\r\n      (sum, p) => sum + toNumber(p.budgetMXN),\r\n      0\r\n    );\r\n\r\n    return {\r\n      total,\r\n      inProgress: inProgressList.length,\r\n      completed: completedList.length,\r\n      onHold: onHoldList.length,\r\n      planning: planningList.length,\r\n      urgentProjects: urgentList.length,\r\n      totalBudget,\r\n      completedBudget,\r\n    };\r\n  }, [projectsNorm]);\r\n\r\n  // merge stats backend + fallback\r\n  const mergedStats = useMemo(() => {\r\n    // si no hay apiStats, usamos todo local\r\n    if (!apiStats) {\r\n      return fallbackLocalStats;\r\n    }\r\n\r\n    const totalProyectos = toNumber(apiStats.totalProyectos);\r\n    const totalPresupuesto = toNumber(apiStats.totalPresupuesto);\r\n\r\n    const byEstado = apiStats.byEstado || {};\r\n    const byPrioridad = apiStats.byPrioridad || {};\r\n\r\n    const safeCount = (obj, key) =>\r\n      toNumber(\r\n        obj?.[key]?.count ?? obj?.[key]?.total ?? 0\r\n      );\r\n\r\n    const safeBudget = (obj, key) =>\r\n      toNumber(\r\n        obj?.[key]?.totalPresupuesto ??\r\n          obj?.[key]?.presupuesto ??\r\n          0\r\n      );\r\n\r\n    // En Progreso\r\n    const inProgressCount =\r\n      safeCount(byEstado, 'en proceso') ||\r\n      safeCount(byEstado, 'en_proceso') ||\r\n      safeCount(byEstado, 'en proceso ') ||\r\n      0;\r\n\r\n    // Completados\r\n    const completedCount =\r\n      safeCount(byEstado, 'completado') ||\r\n      safeCount(byEstado, 'completados') ||\r\n      safeCount(byEstado, 'finalizado') ||\r\n      safeCount(byEstado, 'finalizados') ||\r\n      0;\r\n\r\n    const completedBudget =\r\n      safeBudget(byEstado, 'completado') ||\r\n      safeBudget(byEstado, 'completados') ||\r\n      safeBudget(byEstado, 'finalizado') ||\r\n      safeBudget(byEstado, 'finalizados') ||\r\n      0;\r\n\r\n    // Urgentes (proyectos urgentes)\r\n    let apiUrgentCount =\r\n      safeCount(byPrioridad, 'urgente') ||\r\n      safeCount(byPrioridad, 'urgentes') ||\r\n      0;\r\n\r\n    if (!apiUrgentCount) {\r\n      apiUrgentCount =\r\n        safeCount(byEstado, 'urgente') ||\r\n        safeCount(byEstado, 'urgentes') ||\r\n        0;\r\n    }\r\n\r\n    const finalUrgent =\r\n      apiUrgentCount || fallbackLocalStats.urgentProjects;\r\n\r\n    // ‚ö†Ô∏è En Pausa ‚Üí FORZAMOS a usar el conteo local,\r\n    // ignorando el que venga de /estadisticas,\r\n    // porque /estadisticas est√° inflando (ej. dice 4 pero en realidad tienes 3).\r\n    const finalOnHold = fallbackLocalStats.onHold;\r\n\r\n    return {\r\n      total: totalProyectos || fallbackLocalStats.total,\r\n      inProgress: inProgressCount || fallbackLocalStats.inProgress,\r\n      completed: completedCount || fallbackLocalStats.completed,\r\n      onHold: finalOnHold, // <- importante\r\n      planning: fallbackLocalStats.planning,\r\n      urgentProjects: finalUrgent,\r\n      totalBudget:\r\n        totalPresupuesto || fallbackLocalStats.totalBudget,\r\n      completedBudget:\r\n        completedBudget || fallbackLocalStats.completedBudget,\r\n    };\r\n  }, [apiStats, fallbackLocalStats]);\r\n\r\n  const statCards = useMemo(\r\n    () => [\r\n      {\r\n        title: 'Total de Proyectos',\r\n        value: mergedStats.total,\r\n        icon: 'FolderOpen',\r\n        textColor: 'text-blue-600',\r\n        bgColor: 'bg-blue-50',\r\n        barColor: 'bg-blue-500',\r\n      },\r\n      {\r\n        title: 'En Progreso',\r\n        value: mergedStats.inProgress,\r\n        icon: 'Clock',\r\n        textColor: 'text-green-600',\r\n        bgColor: 'bg-green-50',\r\n        barColor: 'bg-green-500',\r\n      },\r\n      {\r\n        title: 'Completados',\r\n        value: mergedStats.completed,\r\n        icon: 'CheckCircle',\r\n        textColor: 'text-emerald-600',\r\n        bgColor: 'bg-emerald-50',\r\n        barColor: 'bg-emerald-500',\r\n      },\r\n      {\r\n        title: 'En Pausa',\r\n        value: mergedStats.onHold,\r\n        icon: 'Pause',\r\n        textColor: 'text-yellow-600',\r\n        bgColor: 'bg-yellow-50',\r\n        barColor: 'bg-yellow-500',\r\n      },\r\n      {\r\n        title: 'Presupuesto Total',\r\n        value: formatCurrencyMXN(mergedStats.totalBudget),\r\n        icon: 'DollarSign',\r\n        textColor: 'text-purple-600',\r\n        bgColor: 'bg-purple-50',\r\n        barColor: 'bg-purple-500',\r\n      },\r\n      {\r\n        title: 'Proyectos Urgentes',\r\n        value: mergedStats.urgentProjects,\r\n        icon: 'AlertTriangle',\r\n        textColor: 'text-red-600',\r\n        bgColor: 'bg-red-50',\r\n        barColor: 'bg-red-500',\r\n      },\r\n      {\r\n        title: 'Valor Completado',\r\n        value: formatCurrencyMXN(mergedStats.completedBudget),\r\n        icon: 'Target',\r\n        textColor: 'text-teal-600',\r\n        bgColor: 'bg-teal-50',\r\n        barColor: 'bg-teal-500',\r\n      },\r\n    ],\r\n    [mergedStats]\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6 animate-pulse\">\r\n        {[...Array(4)].map((_, i) => (\r\n          <div\r\n            key={i}\r\n            className=\"bg-card border border-border rounded-lg p-6\"\r\n          >\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"space-y-2\">\r\n                <div className=\"h-3 w-24 bg-muted rounded\" />\r\n                <div className=\"h-6 w-16 bg-muted rounded\" />\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-muted rounded-lg\" />\r\n            </div>\r\n            <div className=\"mt-4 h-2 w-full bg-muted rounded-full\" />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (errMsg) {\r\n    return (\r\n      <div className=\"mb-6 rounded-lg border border-red-300 bg-red-50 p-4 text-red-800 text-sm\">\r\n        <p className=\"font-semibold flex items-center gap-2\">\r\n          <Icon\r\n            name=\"AlertTriangle\"\r\n            className=\"text-red-600\"\r\n            size={18}\r\n          />\r\n          <span>Error cargando estad√≠sticas</span>\r\n        </p>\r\n        <p className=\"mt-1 text-red-700\">{errMsg}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {warnMsg && (\r\n        <div className=\"mb-4 rounded-lg border border-yellow-300 bg-yellow-50 p-3 text-yellow-800 text-xs flex items-start gap-2\">\r\n          <Icon\r\n            name=\"AlertTriangle\"\r\n            className=\"text-yellow-600 min-w-[16px]\"\r\n            size={16}\r\n          />\r\n          <div>\r\n            <div className=\"font-semibold\">Aviso</div>\r\n            <div>{warnMsg}</div>\r\n            <div className=\"mt-1 text-[10px] text-yellow-700\">\r\n              Mostrando datos locales para \"En Pausa\" porque la API\r\n              est√° mandando un conteo distinto.\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6\">\r\n        {statCards.map((stat, index) => (\r\n          <div\r\n            key={index}\r\n            className=\"bg-card border border-border rounded-lg p-6 hover:shadow-md transition-smooth\"\r\n          >\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground mb-1\">\r\n                  {stat.title}\r\n                </p>\r\n                <p className=\"text-2xl font-bold text-foreground\">\r\n                  {stat.value ?? 0}\r\n                </p>\r\n              </div>\r\n              <div\r\n                className={`w-12 h-12 ${stat.bgColor} rounded-lg flex items-center justify-center`}\r\n              >\r\n                <Icon\r\n                  name={stat.icon}\r\n                  size={24}\r\n                  className={stat.textColor}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {stat.title.includes('Completados') && (\r\n              <div className=\"mt-4\">\r\n                <div className=\"flex justify-between text-xs text-muted-foreground mb-1\">\r\n                  <span>Porcentaje</span>\r\n                  <span>\r\n                    {safePercent(\r\n                      statCards.find(\r\n                        (c) => c.title === 'Completados'\r\n                      )?.value,\r\n                      statCards.find(\r\n                        (c) =>\r\n                          c.title === 'Total de Proyectos'\r\n                      )?.value\r\n                    )}\r\n                    %\r\n                  </span>\r\n                </div>\r\n                <div className=\"w-full bg-muted rounded-full h-2\">\r\n                  <div\r\n                    className={`h-2 rounded-full ${stat.barColor}`}\r\n                    style={{\r\n                      width: `${safePercent(\r\n                        statCards.find(\r\n                          (c) => c.title === 'Completados'\r\n                        )?.value,\r\n                        statCards.find(\r\n                          (c) =>\r\n                            c.title ===\r\n                            'Total de Proyectos'\r\n                        )?.value\r\n                      )}%`,\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProjectStats;\r\n","import React, { useEffect, useMemo, useRef, useState, useCallback, } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport proyectoService from 'services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport usePerson from 'hooks/usePerson';\r\nimport { useErrorHandler, useNotifications } from 'context/NotificationContext';\r\nimport { useEstados, useMunicipios } from '../../../hooks/useEstado';\r\n\r\n/* ===================== ESTADOS (STATUS DEL PROYECTO) ===================== */\r\nconst estadoOptionsBackend = [\r\n  { value: 'planificaci√≥n', label: 'Planificaci√≥n' },\r\n  { value: 'en proceso',    label: 'En Progreso' },\r\n  { value: 'en pausa',      label: 'En Pausa' },\r\n  { value: 'en revisi√≥n',   label: 'En Revisi√≥n' },\r\n  { value: 'completado',    label: 'Completado' },\r\n  { value: 'cancelado',     label: 'Cancelado' },\r\n];\r\nconst ALLOWED_ESTADOS = estadoOptionsBackend.map((o) => o.value);\r\n\r\nconst UI_ESTADO_KEY = 'proyectos_ui_estado_v1';\r\nconst uiEstadoCache = {\r\n  _read() {\r\n    try {\r\n      return JSON.parse(localStorage.getItem(UI_ESTADO_KEY)) || {};\r\n    } catch {\r\n      return {};\r\n    }\r\n  },\r\n  get(id) {\r\n    if (!id) return null;\r\n    const m = this._read();\r\n    return m[id] || null;\r\n  },\r\n  set(id, estado) {\r\n    if (!id) return;\r\n    const m = this._read();\r\n    if (estado) m[id] = estado;\r\n    else delete m[id];\r\n    localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m));\r\n  },\r\n};\r\n\r\n/* ===================== CAT√ÅLOGOS ===================== */\r\nconst departmentOptions = [\r\n  { value: 'Ingenier√≠a', label: 'Ingenier√≠a' },\r\n  { value: 'Mantenimiento', label: 'Mantenimiento' },\r\n  { value: 'Operaciones', label: 'Operaciones' },\r\n];\r\nconst priorityOptions = [\r\n  { value: 'Baja', label: 'Baja' },\r\n  { value: 'Media', label: 'Media' },\r\n  { value: 'Alta', label: 'Alta' },\r\n  { value: 'Urgente', label: 'Urgente' },\r\n];\r\n\r\n/* ===== Helpers num√©ricos / formateo ===== */\r\nconst toNumberOrUndef = (v) => {\r\n  if (v === '' || v == null) return undefined;\r\n  const n =\r\n    typeof v === 'number'\r\n      ? v\r\n      : parseFloat(String(v).replace(/[^\\d.-]/g, ''));\r\n  return Number.isFinite(n) ? n : undefined;\r\n};\r\n\r\nconst formatWithCommas = (v, decimals = 2) => {\r\n  const n = toNumberOrUndef(v);\r\n  if (n == null) return '';\r\n  const opts = Number.isInteger(n)\r\n    ? { minimumFractionDigits: 0, maximumFractionDigits: 0 }\r\n    : { minimumFractionDigits: decimals, maximumFractionDigits: decimals };\r\n  return n.toLocaleString('es-MX', opts);\r\n};\r\n\r\nconst asStr = (v, fallback = '') => (v == null ? fallback : String(v));\r\nconst asArr = (v) =>\r\n  Array.isArray(v) ? v : v == null ? [] : [String(v)];\r\nconst rateSafe = (rate) =>\r\n  Number.isFinite(Number(rate)) ? Number(rate) : 0;\r\n\r\n/* ===================== COMPONENTE ===================== */\r\nconst EditProjectModal = ({ isOpen = false, onClose, onSubmit, project }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [serverProject, setServerProject] = useState(null);\r\n\r\n  const { persons, getPersons } = usePerson();\r\n  const [clientOptions, setClientOptions] = useState([]);\r\n\r\n  const { handleError, handleSuccess } = useErrorHandler();\r\n  const { showError } = useNotifications();\r\n\r\n  const [isEquipmentInUSD, setIsEquipmentInUSD] = useState(false);\r\n  const [exchangeRate, setExchangeRate] = useState(18);\r\n  const [uiEquipmentUSD, setUiEquipmentUSD] = useState('');\r\n  const [loadingFx, setLoadingFx] = useState(false);\r\n  const [fxError, setFxError] = useState(null);\r\n\r\n  /* ============= ESTADOS/MUNICIPIOS (UBICACI√ìN) ============= */\r\n  const { estados, loading: loadingEstados, error: errorEstados } = useEstados();\r\n  const [selectedEstadoCode, setSelectedEstadoCode] = useState('');\r\n  const {\r\n    municipios,\r\n    loading: loadingMunicipios,\r\n    error: errorMunicipios,\r\n  } = useMunicipios(selectedEstadoCode || '');\r\n\r\n  /* ============= CARGA DE CLIENTES ============= */\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const resp = await clientService.getClients();\r\n        const list = Array.isArray(resp?.data)\r\n          ? resp.data\r\n          : Array.isArray(resp)\r\n          ? resp\r\n          : [];\r\n        const opts = list.map((c) => ({\r\n          value: c.id,\r\n          label: c.empresa || c.nombre || c.contacto || '‚Äî',\r\n        }));\r\n        if (mounted) setClientOptions(opts);\r\n      } catch (e) {\r\n        handleError(e, 'Error cargando clientes');\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [isOpen, handleError]);\r\n\r\n  /* ============= CARGA DE PERSONAL (solo 1 vez) ============= */\r\n  const fetchedPersonsRef = useRef(false);\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    if (fetchedPersonsRef.current) return;\r\n    fetchedPersonsRef.current = true;\r\n    (async () => {\r\n      try {\r\n        await getPersons();\r\n      } catch (e) {\r\n        handleError(e, 'Error cargando empleados');\r\n      }\r\n    })();\r\n    return () => {\r\n      fetchedPersonsRef.current = false;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isOpen]);\r\n\r\n  /* ============= CARGA DEL PROYECTO COMPLETO ============= */\r\n  useEffect(() => {\r\n    if (!isOpen || !project?.id) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const resp = await proyectoService.getProyectoById(project.id);\r\n        const doc = resp?.data ?? resp;\r\n        if (mounted) setServerProject(doc || project);\r\n      } catch (e) {\r\n        handleError(e, 'Error cargando proyecto');\r\n        if (mounted) setServerProject(project || null);\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [isOpen, project?.id, handleError, project]);\r\n\r\n  /* ============= NORMALIZACI√ìN DEL PROYECTO PARA EL FORM ============= */\r\n  const normalized = useMemo(() => {\r\n    const doc = serverProject || project || {};\r\n    const p = doc.presupuesto || {};\r\n    const cron = doc.cronograma || {};\r\n    const id = doc.id || project?.id;\r\n\r\n    // ubicacion puede venir:\r\n    // 1) objeto { estado, municipio, direccion }\r\n    // 2) string simple\r\n    // 3) string JSON\r\n    let rawUbicacion = doc.ubicacion;\r\n    if (typeof rawUbicacion === 'string') {\r\n      const trimmed = rawUbicacion.trim();\r\n      if (trimmed.startsWith('{') && trimmed.endsWith('}')) {\r\n        try {\r\n          const parsed = JSON.parse(trimmed);\r\n          if (parsed && typeof parsed === 'object') {\r\n            rawUbicacion = parsed;\r\n          }\r\n        } catch {\r\n          // ignorar, se usa como string normal abajo\r\n        }\r\n      }\r\n    }\r\n\r\n    let ubicacion = {\r\n      estado: '',\r\n      municipio: '',\r\n      direccion: '',\r\n    };\r\n\r\n    if (rawUbicacion && typeof rawUbicacion === 'object') {\r\n      ubicacion = {\r\n        estado:\r\n          rawUbicacion.estado ||\r\n          rawUbicacion.estadoCode ||\r\n          '',\r\n        municipio:\r\n          rawUbicacion.municipio ||\r\n          rawUbicacion.municipioNombre ||\r\n          '',\r\n        direccion:\r\n          rawUbicacion.direccion ||\r\n          rawUbicacion.direcci√≥n ||\r\n          rawUbicacion.direccionCompleta ||\r\n          '',\r\n      };\r\n    } else if (typeof rawUbicacion === 'string') {\r\n      ubicacion = {\r\n        estado: '',\r\n        municipio: '',\r\n        direccion: rawUbicacion || '',\r\n      };\r\n    }\r\n\r\n    const cachedEstado = uiEstadoCache.get(id);\r\n    const estadoUi = cachedEstado || (doc.estado || 'planificaci√≥n');\r\n\r\n    return {\r\n      id,\r\n      codigo: doc.codigo || '',\r\n      tipoProyecto: doc.tipoProyecto || '',\r\n      clienteId: doc?.cliente?.id ?? '',\r\n      clienteNombre:\r\n        doc?.cliente?.nombre || doc?.cliente?.empresa || '',\r\n      nombre: doc.nombre || doc.nombreProyecto || '',\r\n      departamento: doc.departamento || '',\r\n      prioridad: doc.prioridad || '',\r\n      estado: estadoUi,\r\n      ubicacion,\r\n      descripcion: doc.descripcion || '',\r\n      cronograma: {\r\n        fechaInicio: cron?.fechaInicio || '',\r\n        fechaFin: cron?.fechaFin || '',\r\n      },\r\n      personalAsignado: Array.isArray(doc?.personalAsignado)\r\n        ? doc.personalAsignado\r\n        : [],\r\n      presupuesto: {\r\n        manoObra: toNumberOrUndef(p.manoObra),\r\n        piezas: toNumberOrUndef(p.piezas),\r\n        equipos: toNumberOrUndef(p.equipos),\r\n        equipoDolares: toNumberOrUndef(p.equipoDolares),\r\n        materiales: toNumberOrUndef(p.materiales),\r\n        transporte: toNumberOrUndef(p.transporte),\r\n        otros: toNumberOrUndef(p.otros),\r\n        _metaEquipos: {\r\n          capturadoEn: p?._metaEquipos?.capturadoEn || 'MXN',\r\n        },\r\n      },\r\n    };\r\n  }, [serverProject, project]);\r\n\r\n  /* ============= STATE DEL FORM (CONTROLADO) ============= */\r\n  const [formData, setFormData] = useState(normalized);\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setFormData(normalized);\r\n      setSelectedEstadoCode(normalized?.ubicacion?.estado || '');\r\n    }\r\n  }, [normalized, isOpen]);\r\n\r\n  /* ============= FX / TIPO DE CAMBIO USD‚ÜîMXN ============= */\r\n  const fetchUsdMxnRate = useCallback(async () => {\r\n    try {\r\n      setFxError(null);\r\n      setLoadingFx(true);\r\n\r\n      const apiResp = await proyectoService.getCurrencyRates({\r\n        base: 'USD',\r\n        currencies: ['MXN'],\r\n      });\r\n\r\n      const mxnInfo = apiResp?.data?.MXN;\r\n      const rate = Number(mxnInfo?.value || 0);\r\n\r\n      if (rate > 0) {\r\n        setExchangeRate(rate);\r\n        return rate;\r\n      } else {\r\n        const msg = 'No lleg√≥ una tasa v√°lida.';\r\n        setFxError(msg);\r\n        showError(msg);\r\n        return null;\r\n      }\r\n    } catch (e) {\r\n      const msg = e?.message || 'Error llamando currencyapi';\r\n      setFxError(msg);\r\n      handleError(e, 'Tipo de cambio');\r\n      return null;\r\n    } finally {\r\n      setLoadingFx(false);\r\n    }\r\n  }, [handleError, showError]);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    const cap = formData?.presupuesto?._metaEquipos?.capturadoEn;\r\n    if (cap === 'USD') {\r\n      setIsEquipmentInUSD(true);\r\n    } else {\r\n      setIsEquipmentInUSD(false);\r\n      setUiEquipmentUSD('');\r\n    }\r\n  }, [isOpen, formData?.presupuesto?._metaEquipos?.capturadoEn]);\r\n\r\n  useEffect(() => {\r\n    if (!isEquipmentInUSD) return;\r\n    const mxn = toNumberOrUndef(formData?.presupuesto?.equipos) ?? 0;\r\n    const rate = rateSafe(exchangeRate);\r\n    const usd = rate ? mxn / rate : 0;\r\n    setUiEquipmentUSD(usd ? formatWithCommas(usd, 2) : '0.00');\r\n  }, [isEquipmentInUSD, exchangeRate, formData?.presupuesto?.equipos]);\r\n\r\n  /* ============= OPTIONS DE PERSONAL PARA EL MULTISELECT ============= */\r\n  const personnelOptions = useMemo(() => {\r\n    const fromPersons = Array.isArray(persons)\r\n      ? persons.map((p) => {\r\n          const nombre =\r\n            p?.nombreCompleto ||\r\n            [p?.nombre, p?.apellidoPaterno, p?.apellidoMaterno]\r\n              .filter(Boolean)\r\n              .join(' ') ||\r\n            p?.nombre ||\r\n            p?.name ||\r\n            '‚Äî';\r\n          const puesto = p?.puesto || p?.rol || p?.cargo;\r\n          const etiqueta = puesto ? `${nombre} ‚Äî ${puesto}` : nombre;\r\n          return { value: etiqueta, label: etiqueta };\r\n        })\r\n      : [];\r\n\r\n    const existing = Array.isArray(formData?.personalAsignado)\r\n      ? formData.personalAsignado.map((s) => ({\r\n          value: s,\r\n          label: s,\r\n        }))\r\n      : [];\r\n\r\n    const seen = new Set();\r\n    return [...existing, ...fromPersons].filter((o) =>\r\n      seen.has(o.value) ? false : (seen.add(o.value), true)\r\n    );\r\n  }, [persons, formData?.personalAsignado]);\r\n\r\n  /* ============= TOTAL MXN DEL PRESUPUESTO MOSTRADO ============= */\r\n  const totalMXN = useMemo(() => {\r\n    const b = formData?.presupuesto || {};\r\n    const sum = (...vals) =>\r\n      vals.reduce(\r\n        (acc, v) => acc + (toNumberOrUndef(v) ?? 0),\r\n        0\r\n      );\r\n    return sum(\r\n      b.manoObra,\r\n      b.piezas,\r\n      b.equipos,\r\n      b.materiales,\r\n      b.transporte,\r\n      b.otros\r\n    );\r\n  }, [formData]);\r\n\r\n  /* ============= HANDLERS DEL FORM ============= */\r\n  const handle = (k, v) => {\r\n    setFormData((s) => ({ ...s, [k]: v }));\r\n    if (errors[k]) {\r\n      setErrors((e) => ({ ...e, [k]: undefined }));\r\n    }\r\n  };\r\n\r\n  const handleUbicacion = (field, value) => {\r\n    setFormData((s) => ({\r\n      ...s,\r\n      ubicacion: {\r\n        ...(s.ubicacion || { estado: '', municipio: '', direccion: '' }),\r\n        [field]: value,\r\n      },\r\n    }));\r\n    const errorKey =\r\n      field === 'estado'\r\n        ? 'ubicacionEstado'\r\n        : field === 'municipio'\r\n        ? 'ubicacionMunicipio'\r\n        : 'ubicacionDireccion';\r\n    if (errors[errorKey]) {\r\n      setErrors((e) => ({ ...e, [errorKey]: undefined }));\r\n    }\r\n  };\r\n\r\n  const handleP = (k, raw) => {\r\n    const n =\r\n      raw === '' || raw == null ? undefined : toNumberOrUndef(raw);\r\n    setFormData((s) => ({\r\n      ...s,\r\n      presupuesto: { ...s.presupuesto, [k]: n },\r\n    }));\r\n  };\r\n\r\n  const toggleUSD = (checked) => {\r\n    setIsEquipmentInUSD(checked);\r\n    setFormData((s) => ({\r\n      ...s,\r\n      presupuesto: {\r\n        ...s.presupuesto,\r\n        _metaEquipos: {\r\n          capturadoEn: checked ? 'USD' : 'MXN',\r\n        },\r\n      },\r\n    }));\r\n\r\n    if (!checked) {\r\n      setUiEquipmentUSD('');\r\n    }\r\n  };\r\n\r\n  /* ============= VALIDACI√ìN ============= */\r\n  const validate = () => {\r\n    const e = {};\r\n    if (!formData.nombre) e.nombre = 'Requerido';\r\n    if (!formData.departamento)\r\n      e.departamento = 'Requerido';\r\n\r\n    const ub = formData.ubicacion || {};\r\n    if (!ub.estado) e.ubicacionEstado = 'Requerido';\r\n    if (!ub.municipio) e.ubicacionMunicipio = 'Requerido';\r\n    if (!ub.direccion) e.ubicacionDireccion = 'Requerido';\r\n\r\n    if (!ALLOWED_ESTADOS.includes(formData.estado))\r\n      e.estado = 'Estado inv√°lido';\r\n    if (isEquipmentInUSD && !(exchangeRate > 0))\r\n      e.exchangeRate = 'Tipo de cambio inv√°lido';\r\n\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  };\r\n\r\n  /* ============= ARMAR PAYLOAD PARA updateProyecto ============= */\r\n  const buildPayloadForUpdate = () => {\r\n    const p = formData.presupuesto || {};\r\n    const pres = {};\r\n\r\n    [\r\n      'manoObra',\r\n      'piezas',\r\n      'equipos',\r\n      'equipoDolares',\r\n      'materiales',\r\n      'transporte',\r\n      'otros',\r\n    ].forEach((k) => {\r\n      const val = toNumberOrUndef(p[k]);\r\n      if (val != null) pres[k] = val;\r\n    });\r\n\r\n    pres._metaEquipos = {\r\n      capturadoEn: isEquipmentInUSD ? 'USD' : 'MXN',\r\n    };\r\n\r\n    if (isEquipmentInUSD) {\r\n      const mxn = toNumberOrUndef(p.equipos) ?? 0;\r\n      const rate = rateSafe(exchangeRate);\r\n      const usd = rate ? mxn / rate : undefined;\r\n      if (usd != null) pres.equipoDolares = usd;\r\n    }\r\n\r\n    const ub = formData.ubicacion || {};\r\n\r\n    return {\r\n      nombre: formData.nombre,\r\n      departamento: formData.departamento,\r\n      prioridad: formData.prioridad,\r\n      ubicacion: {\r\n        estado: ub.estado || '',\r\n        municipio: ub.municipio || '',\r\n        direccion: ub.direccion || '',\r\n      },\r\n      descripcion: formData.descripcion,\r\n      personalAsignado: Array.isArray(\r\n        formData.personalAsignado\r\n      )\r\n        ? formData.personalAsignado\r\n        : [],\r\n      estado: formData.estado,\r\n      presupuesto: pres,\r\n    };\r\n  };\r\n\r\n  /* ============= SUBMIT ============= */\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validate()) return;\r\n    setIsSubmitting(true);\r\n    try {\r\n      const payload = buildPayloadForUpdate();\r\n      await proyectoService.updateProyecto(\r\n        formData.id,\r\n        payload\r\n      );\r\n\r\n      uiEstadoCache.set(formData.id, formData.estado);\r\n\r\n      if (onSubmit) {\r\n        // Deja que el padre decida si muestra mensaje de √©xito\r\n        onSubmit({\r\n          id: formData.id,\r\n          ...payload,\r\n          _uiEstado: formData.estado,\r\n        });\r\n      } else {\r\n        // Solo mostramos el mensaje aqu√≠ si no hay onSubmit\r\n        handleSuccess('update', 'Proyecto');\r\n      }\r\n\r\n      onClose && onClose();\r\n    } catch (err) {\r\n      console.error('Error actualizando proyecto:', err);\r\n      handleError(err, 'Error actualizando proyecto');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  /* ============= LABEL DEL CLIENTE ============= */\r\n  const b = formData.presupuesto || {};\r\n  const clientLabel = useMemo(() => {\r\n    if (!formData.clienteId) return '‚Äî';\r\n    const found = clientOptions.find(\r\n      (o) => o.value === formData.clienteId\r\n    );\r\n    return (\r\n      found?.label ||\r\n      formData.clienteNombre ||\r\n      formData.clienteId\r\n    );\r\n  }, [clientOptions, formData.clienteId, formData.clienteNombre]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const ub = formData.ubicacion || {\r\n    estado: '',\r\n    municipio: '',\r\n    direccion: '',\r\n  };\r\n\r\n  /* ===================== RENDER ===================== */\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card border border-border rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">\r\n              Editar Proyecto\r\n            </h2>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Actualice la informaci√≥n permitida\r\n            </p>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n            disabled={isSubmitting}\r\n          >\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci√≥n B√°sica */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Informaci√≥n B√°sica\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"C√≥digo (solo lectura)\"\r\n              value={asStr(formData?.codigo, '‚Äî')}\r\n              onChange={() => {}}\r\n              disabled\r\n            />\r\n\r\n            <Input\r\n              label=\"Tipo de Proyecto (solo lectura)\"\r\n              value={asStr(formData?.tipoProyecto, '‚Äî')}\r\n              onChange={() => {}}\r\n              disabled\r\n            />\r\n\r\n            <Input\r\n              label=\"Cliente (solo lectura)\"\r\n              value={asStr(clientLabel, '‚Äî')}\r\n              onChange={() => {}}\r\n              disabled\r\n            />\r\n\r\n            <Input\r\n              label=\"Nombre\"\r\n              type=\"text\"\r\n              placeholder=\"Ej: Instalaci√≥n HVAC Edificio Central\"\r\n              value={asStr(formData?.nombre)}\r\n              onChange={(e) =>\r\n                handle('nombre', e.target.value)\r\n              }\r\n              error={errors?.nombre}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Departamento Responsable\"\r\n              options={departmentOptions}\r\n              value={asStr(formData?.departamento)}\r\n              onChange={(value) =>\r\n                handle('departamento', value)\r\n              }\r\n              error={errors?.departamento}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={asStr(formData?.prioridad)}\r\n              onChange={(value) =>\r\n                handle('prioridad', value)\r\n              }\r\n              error={errors?.prioridad}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Estado\"\r\n              options={estadoOptionsBackend}\r\n              value={asStr(formData?.estado)}\r\n              onChange={(value) =>\r\n                handle('estado', value)\r\n              }\r\n              error={errors?.estado}\r\n              required\r\n            />\r\n\r\n            {/* Ubicaci√≥n */}\r\n            <div className=\"md:col-span-2 mt-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n                Ubicaci√≥n del Proyecto\r\n              </h3>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Seleccione estado y municipio, luego escriba la direcci√≥n completa del sitio.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 items-center\">\r\n              <div className=\"flex flex-col justify-end h-full\">\r\n                <Select\r\n                  label={\r\n                    <>\r\n                      Estado <span className=\"text-destructive\">*</span>\r\n                    </>\r\n                  }\r\n                  value={ub.estado}\r\n                  onChange={(value) => {\r\n                    handleUbicacion('estado', value);\r\n                    handleUbicacion('municipio', '');\r\n                    setSelectedEstadoCode(value || '');\r\n                  }}\r\n                  options={\r\n                    estados\r\n                      ? [\r\n                          { value: '', label: 'Selecciona un estado' },\r\n                          ...estados.map((e) => ({\r\n                            value: e.code,\r\n                            label: e.name,\r\n                          })),\r\n                        ]\r\n                      : []\r\n                  }\r\n                  loading={loadingEstados}\r\n                  error={errors?.ubicacionEstado}\r\n                  required\r\n                  disabled={loadingEstados || !!errorEstados}\r\n                  placeholder={\r\n                    loadingEstados ? 'Cargando estados...' : 'Selecciona un estado'\r\n                  }\r\n                  searchable\r\n                  className=\"h-12 md:h-14 w-full text-base\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex flex-col justify-end h-full\">\r\n                <Select\r\n                  label={\r\n                    <>\r\n                      Municipio <span className=\"text-destructive\">*</span>\r\n                    </>\r\n                  }\r\n                  value={ub.municipio}\r\n                  onChange={(value) =>\r\n                    handleUbicacion('municipio', value)\r\n                  }\r\n                  options={\r\n                    ub.estado === ''\r\n                      ? [{ value: '', label: 'Selecciona un estado primero' }]\r\n                      : loadingMunicipios\r\n                      ? [{ value: '', label: 'Cargando municipios...' }]\r\n                      : errorMunicipios\r\n                      ? [{ value: '', label: 'Error al cargar municipios' }]\r\n                      : [\r\n                          { value: '', label: 'Selecciona un municipio' },\r\n                          ...(municipios\r\n                            ? Object.values(municipios.municipios || {}).map(\r\n                                (m) => ({\r\n                                  value: m,\r\n                                  label: m,\r\n                                })\r\n                              )\r\n                            : []),\r\n                        ]\r\n                  }\r\n                  loading={loadingMunicipios}\r\n                  error={errors?.ubicacionMunicipio}\r\n                  required\r\n                  disabled={\r\n                    ub.estado === '' ||\r\n                    loadingMunicipios ||\r\n                    !!errorMunicipios\r\n                  }\r\n                  placeholder={\r\n                    ub.estado === ''\r\n                      ? 'Selecciona un estado primero'\r\n                      : loadingMunicipios\r\n                      ? 'Cargando municipios...'\r\n                      : 'Selecciona un municipio'\r\n                  }\r\n                  searchable\r\n                  className=\"h-12 md:h-14 w-full text-base\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Direcci√≥n\"\r\n                required\r\n                value={ub.direccion}\r\n                onChange={(e) =>\r\n                  handleUbicacion('direccion', e?.target?.value)\r\n                }\r\n                error={errors?.ubicacionDireccion}\r\n                placeholder=\"Direcci√≥n completa\"\r\n                className=\"h-12 md:h-14 w-full text-base\"\r\n              />\r\n            </div>\r\n\r\n            {/* Descripci√≥n */}\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                Descripci√≥n del Proyecto\r\n              </label>\r\n              <textarea\r\n                rows={4}\r\n                placeholder=\"Describa los objetivos, alcance y detalles importantes del proyecto...\"\r\n                value={asStr(formData?.descripcion)}\r\n                onChange={(e) =>\r\n                  handle('descripcion', e.target.value)\r\n                }\r\n                className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\r\n              />\r\n            </div>\r\n\r\n            {/* Desglose de Presupuesto */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Desglose de Presupuesto\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Mano de Obra (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.manoObra)}\r\n              onChange={(e) =>\r\n                handleP('manoObra', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Input\r\n              label=\"Piezas (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.piezas)}\r\n              onChange={(e) =>\r\n                handleP('piezas', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            {/* Equipos con toggle USD */}\r\n            <div className=\"flex flex-col gap-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                  {isEquipmentInUSD\r\n                    ? 'Equipos (USD se convierte a MXN)'\r\n                    : 'Equipos (MXN)'}\r\n                </label>\r\n                <label className=\"inline-flex items-center gap-2 text-sm text-foreground cursor-pointer select-none\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={isEquipmentInUSD}\r\n                    onChange={(e) =>\r\n                      toggleUSD(e.target.checked)\r\n                    }\r\n                    className=\"h-4 w-4 accent-primary cursor-pointer\"\r\n                  />\r\n                  Precio en d√≥lares\r\n                </label>\r\n              </div>\r\n\r\n              <input\r\n                type=\"text\"\r\n                inputMode=\"decimal\"\r\n                placeholder={\r\n                  isEquipmentInUSD ? '0.00 USD' : '0.00 MXN'\r\n                }\r\n                value={\r\n                  isEquipmentInUSD\r\n                    ? uiEquipmentUSD\r\n                    : formatWithCommas(b?.equipos)\r\n                }\r\n                onChange={(e) =>\r\n                  isEquipmentInUSD\r\n                    ? undefined\r\n                    : handleP('equipos', e?.target?.value)\r\n                }\r\n                readOnly={isEquipmentInUSD}\r\n                className={`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${\r\n                  isEquipmentInUSD\r\n                    ? 'bg-muted cursor-not-allowed'\r\n                    : ''\r\n                }`}\r\n              />\r\n\r\n              {isEquipmentInUSD && (\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <div className=\"flex-1 min-w-[220px]\">\r\n                    <Input\r\n                      label=\"Tipo de cambio (MXN / USD)\"\r\n                      type=\"text\"\r\n                      inputMode=\"decimal\"\r\n                      value={formatWithCommas(exchangeRate, 4)}\r\n                      onChange={() => {}}\r\n                      readOnly\r\n                      disabled\r\n                    />\r\n                  </div>\r\n\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    onClick={fetchUsdMxnRate}\r\n                    loading={loadingFx}\r\n                    iconName=\"RefreshCcw\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    {loadingFx ? 'Actualizando‚Ä¶' : 'Actualizar tipo de cambio'}\r\n                  </Button>\r\n\r\n                  <div className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                    Guardado en MXN:{' '}\r\n                    <span className=\"font-semibold\">\r\n                      ${formatWithCommas(b?.equipos, 2)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {fxError && (\r\n                    <div className=\"text-xs text-destructive\">\r\n                      {fxError}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Materiales (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.materiales)}\r\n              onChange={(e) =>\r\n                handleP('materiales', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Input\r\n              label=\"Transporte (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.transporte)}\r\n              onChange={(e) =>\r\n                handleP('transporte', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Input\r\n              label=\"Otros Gastos (MXN)\"\r\n              type=\"text\"\r\n              inputMode=\"decimal\"\r\n              placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.otros)}\r\n              onChange={(e) =>\r\n                handleP('otros', e?.target?.value)\r\n              }\r\n            />\r\n\r\n            {/* Total */}\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"bg-muted p-4 rounded-lg\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm font-medium text-foreground\">\r\n                    Total del Presupuesto (MXN):\r\n                  </span>\r\n                  <span className=\"text-lg font-semibold text-primary\">\r\n                    ${formatWithCommas(totalMXN, 2)} MXN\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cronograma (solo lectura) */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Cronograma\r\n              </h3>\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Fecha de Inicio (solo lectura)\"\r\n              type=\"date\"\r\n              value={asStr(\r\n                formData?.cronograma?.fechaInicio,\r\n                ''\r\n              )}\r\n              onChange={() => {}}\r\n              disabled\r\n            />\r\n            <Input\r\n              label=\"Fecha de Finalizaci√≥n (solo lectura)\"\r\n              type=\"date\"\r\n              value={asStr(\r\n                formData?.cronograma?.fechaFin,\r\n                ''\r\n              )}\r\n              onChange={() => {}}\r\n              disabled\r\n            />\r\n\r\n            {/* Asignaci√≥n de Personal */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">\r\n                Asignaci√≥n de Personal\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Select\r\n                label=\"Personal Asignado\"\r\n                options={personnelOptions}\r\n                value={asArr(formData?.personalAsignado).map(String)}\r\n                onChange={(value) =>\r\n                  handle(\r\n                    'personalAsignado',\r\n                    asArr(value).map(String)\r\n                  )\r\n                }\r\n                multiple\r\n                searchable\r\n                description=\"Seleccione el personal que trabajar√° en este proyecto\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Acciones */}\r\n          <div className=\"flex justify-end gap-3 mt-8 pt-6 border-t border-border\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              loading={isSubmitting}\r\n              iconName=\"Save\"\r\n              iconPosition=\"left\"\r\n            >\r\n              {isSubmitting ? 'Guardando...' : 'Guardar Cambios'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProjectModal;\r\n","// hooks/useProyecto.js\r\nimport { useState, useCallback, useRef } from \"react\";\r\nimport proyectoService from \"../services/proyectoService\";\r\n\r\nconst extractList = (resp) => {\r\n  if (Array.isArray(resp)) return resp;\r\n  if (resp?.success && Array.isArray(resp?.data)) return resp.data;\r\n  if (Array.isArray(resp?.data?.items)) return resp.data.items;\r\n  if (Array.isArray(resp?.result)) return resp.result;\r\n  return [];\r\n};\r\n\r\nconst unwrap = (resp) =>\r\n  resp && typeof resp === \"object\" && \"data\" in resp ? resp.data : resp;\r\n\r\nconst useProyecto = () => {\r\n  const [proyectos, setProyectos] = useState([]);\r\n\r\n  // ‚¨áÔ∏è Estados separados\r\n  const [loadingList, setLoadingList] = useState(false);\r\n  const [loadingSave, setLoadingSave] = useState(false);\r\n  const [loadingDelete, setLoadingDelete] = useState(false);\r\n  const [loadingCurrency, setLoadingCurrency] = useState(false);\r\n\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchedOnceRef = useRef(false);\r\n  const proyectosLenRef = useRef(0); // para evitar dependencia del estado en callbacks\r\n\r\n  // Mantener sincronizado el len en un ref\r\n  proyectosLenRef.current = proyectos.length;\r\n\r\n  // ========= PROYECTOS (tu backend) =========\r\n  const getProyectos = useCallback(async ({ force = false, signal } = {}) => {\r\n    if (!force && fetchedOnceRef.current && proyectosLenRef.current > 0) {\r\n      return proyectos;\r\n    }\r\n\r\n    setLoadingList(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await proyectoService.getProyectos({ signal });\r\n      const list = extractList(resp);\r\n      setProyectos(list);\r\n      fetchedOnceRef.current = true;\r\n      return list;\r\n    } catch (err) {\r\n      if (err?.name !== \"AbortError\") {\r\n        console.error(\"Error en useProyecto.getProyectos:\", err);\r\n        setError(err);\r\n      }\r\n      throw err;\r\n    } finally {\r\n      setLoadingList(false);\r\n    }\r\n  }, []); // ‚¨ÖÔ∏è sin dependencia de `proyectos`\r\n\r\n  const getProyectoById = useCallback(async (id, { signal } = {}) => {\r\n    setError(null);\r\n    try {\r\n      const resp = await proyectoService.getProyectoById(id, { signal });\r\n      return unwrap(resp);\r\n    } catch (err) {\r\n      if (err?.name !== \"AbortError\") {\r\n        console.error(\"Error en useProyecto.getProyectoById:\", err);\r\n        setError(err);\r\n      }\r\n      throw err;\r\n    }\r\n  }, []);\r\n\r\n  const createProyecto = useCallback(\r\n    async (payload, { signal, refresh = false } = {}) => {\r\n      setLoadingSave(true);\r\n      setError(null);\r\n      try {\r\n        const resp = await proyectoService.createProyecto(payload, { signal });\r\n        const created = unwrap(resp);\r\n        if (created) {\r\n          setProyectos((prev) => [...prev, created]);\r\n          proyectosLenRef.current += 1;\r\n        }\r\n        if (refresh) {\r\n          // invalida cache y recarga lista desde backend\r\n          fetchedOnceRef.current = false;\r\n          await getProyectos({ force: true, signal });\r\n        }\r\n        return created;\r\n      } catch (err) {\r\n        if (err?.name !== \"AbortError\") {\r\n          console.error(\"Error en useProyecto.createProyecto:\", err);\r\n          setError(err);\r\n        }\r\n        throw err;\r\n      } finally {\r\n        setLoadingSave(false);\r\n      }\r\n    },\r\n    [getProyectos]\r\n  );\r\n\r\n  const updateProyecto = useCallback(\r\n    async (id, payload, { signal, refresh = false } = {}) => {\r\n      setLoadingSave(true);\r\n      setError(null);\r\n      try {\r\n        const resp = await proyectoService.updateProyecto(id, payload, {\r\n          signal,\r\n        });\r\n        const updated = unwrap(resp);\r\n\r\n        setProyectos((prev) =>\r\n          prev.map((p) =>\r\n            String(p.id ?? p._id) === String(id) ? { ...p, ...updated } : p\r\n          )\r\n        );\r\n\r\n        if (refresh) {\r\n          fetchedOnceRef.current = false;\r\n          await getProyectos({ force: true, signal });\r\n        }\r\n        return updated;\r\n      } catch (err) {\r\n        if (err?.name !== \"AbortError\") {\r\n          console.error(\"Error en useProyecto.updateProyecto:\", err);\r\n          setError(err);\r\n        }\r\n        throw err;\r\n      } finally {\r\n        setLoadingSave(false);\r\n      }\r\n    },\r\n    [getProyectos]\r\n  );\r\n\r\n  const deleteProyecto = useCallback(\r\n    async (id, { signal, refresh = false } = {}) => {\r\n      setLoadingDelete(true);\r\n      setError(null);\r\n      try {\r\n        const resp = await proyectoService.deleteProyecto(id, { signal });\r\n        setProyectos((prev) =>\r\n          prev.filter((p) => String(p.id ?? p._id) !== String(id))\r\n        );\r\n        proyectosLenRef.current = Math.max(0, proyectosLenRef.current - 1);\r\n\r\n        if (refresh) {\r\n          fetchedOnceRef.current = false;\r\n          await getProyectos({ force: true, signal });\r\n        }\r\n\r\n        return unwrap(resp) ?? true;\r\n      } catch (err) {\r\n        if (err?.name !== \"AbortError\") {\r\n          console.error(\"Error en useProyecto.deleteProyecto:\", err);\r\n          setError(err);\r\n        }\r\n        throw err;\r\n      } finally {\r\n        setLoadingDelete(false);\r\n      }\r\n    },\r\n    [getProyectos]\r\n  );\r\n\r\n  // ========= STATS CACHED (dashboard r√°pido) =========\r\n  // GET /proyectos/stats/get\r\n  const getCachedStats = useCallback(async ({ signal } = {}) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await proyectoService.getCachedStats({ signal });\r\n      // aqu√≠ NO tocamos proyectos, esto es data de m√©tricas.\r\n      // Puede venir como { data: {...} } o directo {...}\r\n      return unwrap(resp);\r\n    } catch (err) {\r\n      console.error(\"Error en useProyecto.getCachedStats:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // ========= (currencyapi.com) =========\r\n  const getCurrencyRates = useCallback(\r\n    async ({ base = \"USD\", currencies = [] } = {}, { signal } = {}) => {\r\n      setLoadingCurrency(true);\r\n      setError(null);\r\n      try {\r\n        const resp = await proyectoService.getCurrencyRates(\r\n          { base, currencies },\r\n          { signal }\r\n        );\r\n        return resp; // JSON completo\r\n      } catch (err) {\r\n        if (err?.name !== \"AbortError\") {\r\n          console.error(\"Error en useProyecto.getCurrencyRates:\", err);\r\n          setError(err);\r\n        }\r\n        throw err;\r\n      } finally {\r\n        setLoadingCurrency(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  /**\r\n   * Devuelve { MXN: 18.2, EUR: 0.92, ... }\r\n   */\r\n  const getCurrencyRatesMap = useCallback(\r\n    async ({ base = \"USD\", currencies = [] } = {}, { signal } = {}) => {\r\n      setLoadingCurrency(true);\r\n      setError(null);\r\n      try {\r\n        const map = await proyectoService.getCurrencyRatesMap(\r\n          { base, currencies },\r\n          { signal }\r\n        );\r\n        return map;\r\n      } catch (err) {\r\n        if (err?.name !== \"AbortError\") {\r\n          console.error(\"Error en useProyecto.getCurrencyRatesMap:\", err);\r\n          setError(err);\r\n        }\r\n        throw err;\r\n      } finally {\r\n        setLoadingCurrency(false);\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  return {\r\n    proyectos,\r\n    // estados de carga granulares\r\n    loadingList,\r\n    loadingSave,\r\n    loadingDelete,\r\n    loadingCurrency,\r\n    // compat: puedes exponer un `loading` general si quieres\r\n    loading: loadingList || loadingSave || loadingDelete || loadingCurrency,\r\n\r\n    error,\r\n\r\n    // acciones backend propio\r\n    getProyectos,\r\n    getProyectoById,\r\n    createProyecto,\r\n    updateProyecto,\r\n    deleteProyecto,\r\n\r\n    // dashboard / KPIs cacheados\r\n    getCachedStats,\r\n\r\n    // acciones API externa (currencyapi)\r\n    getCurrencyRates,\r\n    getCurrencyRatesMap,\r\n  };\r\n};\r\n\r\nexport default useProyecto;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ProjectFilters from './components/ProjectFilters';\r\nimport ProjectTable from './components/ProjectTable';\r\nimport ProjectTimeline from './components/ProjectTimeline';\r\nimport ProjectQuotations from './components/ProjectQuotations';\r\nimport ProjectStats from './components/ProjectStats';\r\nimport CreateProjectModal from './components/CreateProjectModal';\r\nimport EditProjectModal from './components/EditProjectModal';\r\nimport useProyect from '../../hooks/useProyect';\r\n\r\n// ‚¨áÔ∏è trae tus notificaciones\r\nimport { useErrorHandler, useNotifications } from 'context/NotificationContext';\r\n\r\n/* ====== Cache local para estado UI ====== */\r\nconst UI_ESTADO_KEY = 'proyectos_ui_estado_v1';\r\nconst uiEstadoCache = {\r\n  _read() { try { return JSON.parse(localStorage.getItem(UI_ESTADO_KEY)) || {}; } catch { return {}; } },\r\n  get(id) { if (!id) return null; const m = this._read(); return m[id] || null; },\r\n  set(id, estado) { if (!id) return; const m = this._read(); if (estado) m[id] = estado; else delete m[id]; localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m)); },\r\n  bulkMergeFromApi(list=[]) {\r\n    const m = this._read(); let changed = false;\r\n    list.forEach(p => {\r\n      const id = p?.id ?? p?._id; if (!id) return;\r\n      if (!m[id]) { const def = backendToUiDefault(p?.estado); if (def) { m[id] = def; changed = true; } }\r\n    });\r\n    if (changed) localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m));\r\n  }\r\n};\r\nconst backendToUiDefault = (apiEstado) => {\r\n  const v = String(apiEstado || '').toLowerCase();\r\n  if (v === 'en proceso') return 'en proceso';\r\n  if (v === 'activo') return 'planificaci√≥n';\r\n  return 'planificaci√≥n';\r\n};\r\nconst mapUiToBackend = (uiEstado) => {\r\n  const v = String(uiEstado || '').toLowerCase();\r\n  return v === 'en proceso' ? 'en proceso' : 'activo';\r\n};\r\n\r\nconst ProjectManagement = () => {\r\n  const {\r\n    proyectos: projects,\r\n    loading: isLoading,\r\n    getProyectos,\r\n    updateProyecto,\r\n  } = useProyect();\r\n\r\n  const { handleError, handleSuccess } = useErrorHandler();\r\n  const { showWarning } = useNotifications();\r\n\r\n  const [filteredProjects, setFilteredProjects] = useState([]);\r\n  const [activeView, setActiveView] = useState('table');\r\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n\r\n  useEffect(() => { getProyectos(); }, []);\r\n  useEffect(() => {\r\n    const arr = Array.isArray(projects) ? projects : [];\r\n    uiEstadoCache.bulkMergeFromApi(arr);\r\n    setFilteredProjects(arr);\r\n  }, [projects]);\r\n\r\n  /* ====== filtros */\r\n  const norm = (s) => (s ?? '').toString().normalize('NFD')\r\n    .replace(/[\\u0300-\\u036f]/g, '')\r\n    .toLowerCase()\r\n    .trim()\r\n    .replace(/\\s+/g, ' ');\r\n\r\n  const canonicalEstado = (raw) => {\r\n    const v = norm(raw);\r\n    if (v.includes('planific')) return 'planificacion';\r\n    if (v.includes('en proceso') || v.includes('progress')) return 'en proceso';\r\n    if (v.includes('pausa') || v.includes('hold')) return 'en pausa';\r\n    if (v.includes('revision') || v.includes('review')) return 'en revision';\r\n    if (v.includes('complet')) return 'completado';\r\n    if (v.includes('cancel')) return 'cancelado';\r\n    return v;\r\n  };\r\n\r\n  const handleFiltersChange = (filters) => {\r\n    let filtered = Array.isArray(projects) ? [...projects] : [];\r\n\r\n    if (filters?.search) {\r\n      const q = norm(filters.search);\r\n      filtered = filtered.filter(p =>\r\n        norm(p?.nombre)?.includes(q) ||\r\n        norm(p?.codigo)?.includes(q) ||\r\n        norm(p?.cliente?.nombre)?.includes(q)\r\n      );\r\n    }\r\n\r\n    if (filters?.status) {\r\n      filtered = filtered.filter(p =>\r\n        canonicalEstado(uiEstadoCache.get(p.id) || p.estado) === canonicalEstado(filters.status)\r\n      );\r\n    }\r\n\r\n    setFilteredProjects(filtered);\r\n  };\r\n\r\n  const handleEditProject = (project) => {\r\n    const id = project?.id ?? project?._id;\r\n    setSelectedProject({ ...project, id });\r\n    setIsEditModalOpen(true);\r\n  };\r\n\r\n  const handleStatusUpdate = async (projectId, newStatusUi) => {\r\n    try {\r\n      const estadoBackend = mapUiToBackend(newStatusUi);\r\n      await updateProyecto(projectId, { estado: estadoBackend });\r\n      uiEstadoCache.set(projectId, newStatusUi);\r\n      await getProyectos({ force: true });\r\n\r\n      handleSuccess('update', 'Proyecto');\r\n    } catch (error) {\r\n      handleError(error, 'Error al actualizar estado');\r\n    }\r\n  };\r\n\r\n  const handleUpdateProject = async () => {\r\n    try {\r\n      await getProyectos({ force: true });\r\n      handleSuccess('update', 'Proyecto');\r\n      setSelectedProject(null);\r\n      setIsEditModalOpen(false);\r\n    } catch (err) {\r\n      handleError(err, 'Error al actualizar');\r\n    }\r\n  };\r\n\r\n  /* ===== Exportar ===== */\r\n  const handleExportFromFilters = () => {\r\n    if (!filteredProjects?.length) {\r\n      showWarning('No hay proyectos para exportar');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const headers = ['C√≥digo','Nombre','Cliente','Estado','Prioridad','Presupuesto','Inicio','Fin'];\r\n\r\n      const rows = filteredProjects.map(p =>\r\n        [\r\n          p.codigo,\r\n          p.nombre,\r\n          p?.cliente?.nombre,\r\n          p.estado,\r\n          p.prioridad,\r\n          p.presupuesto?.total,\r\n          new Date(p?.cronograma?.fechaInicio)?.toLocaleDateString('es-MX'),\r\n          new Date(p?.cronograma?.fechaFin)?.toLocaleDateString('es-MX'),\r\n        ]\r\n          .map(v => `\"${String(v ?? '').replace(/\"/g, '\"\"')}\"`)\r\n          .join(',')\r\n      );\r\n\r\n      const csv = [headers.join(','), ...rows].join('\\n');\r\n      const blob = new Blob([csv], { type:'text/csv;charset=utf-8;' });\r\n      const a = document.createElement('a');\r\n      a.href = URL.createObjectURL(blob);\r\n      a.download = `proyectos_${new Date().toISOString().slice(0,10)}.csv`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n\r\n      handleSuccess('export', 'Proyectos');\r\n    } catch (e) {\r\n      handleError(e, 'Error al exportar proyectos');\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando proyectos...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n\r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n\r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Gesti√≥n de Proyectos</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                  Administre el ciclo completo de proyectos HVAC desde la planificaci√≥n hasta el cierre\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                <div className=\"flex bg-muted rounded-lg p-1\">\r\n                  {[ \r\n                    { value: 'table', label: 'Tabla', icon: 'Table' },\r\n                    { value: 'timeline', label: 'Cronograma', icon: 'Calendar' },\r\n                    { value: 'quotations', label: 'Cotizaciones', icon: 'FileText' },\r\n                  ].map(option => (\r\n                    <button\r\n                      key={option.value}\r\n                      onClick={() => setActiveView(option.value)}\r\n                      className={`flex items-center space-x-2 px-3 py-2 rounded-md transition-smooth\r\n                        ${activeView === option.value\r\n                          ? 'bg-primary text-primary-foreground'\r\n                          : 'text-muted-foreground hover:text-foreground'}`}\r\n                    >\r\n                      <Icon name={option.icon} size={16} />\r\n                      <span className=\"hidden sm:inline text-sm\">{option.label}</span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n\r\n                <Button onClick={() => setIsCreateModalOpen(true)} iconName=\"Plus\" iconPosition=\"left\">\r\n                  Nuevo Proyecto\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ‚úÖ ESTAD√çSTICAS SE MANTIENEN */}\r\n            {activeView !== 'stats' && filteredProjects?.length > 0 && (\r\n              <ProjectStats projects={filteredProjects} />\r\n            )}\r\n\r\n            {/* Filtros */}\r\n            {activeView === 'table' && (\r\n              <ProjectFilters\r\n                onFiltersChange={handleFiltersChange}\r\n                totalProjects={projects?.length}\r\n                filteredProjects={filteredProjects?.length}\r\n                onExport={handleExportFromFilters}\r\n              />\r\n            )}\r\n\r\n            <div className=\"space-y-6\">\r\n              {activeView === 'table' && filteredProjects?.length > 0 && (\r\n                <ProjectTable\r\n                  projects={filteredProjects}\r\n                  onProjectSelect={handleEditProject}\r\n                  onStatusUpdate={handleStatusUpdate}\r\n                />\r\n              )}\r\n\r\n              {activeView === 'timeline' && (\r\n                <ProjectTimeline\r\n                  projects={filteredProjects}\r\n                  onGenerateReport={() => {}}\r\n                />\r\n              )}\r\n\r\n              {activeView === 'quotations' && filteredProjects?.length > 0 && (\r\n                <ProjectQuotations projects={filteredProjects} />\r\n              )}\r\n\r\n              {filteredProjects?.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <Icon name=\"Filter\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n                    No se encontraron proyectos con tus filtros\r\n                  </h3>\r\n                  <p className=\"text-muted-foreground mb-6\">\r\n                    Intenta con otros filtros o par√°metros de b√∫squeda\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Modales */}\r\n            <CreateProjectModal\r\n              isOpen={isCreateModalOpen}\r\n              onClose={() => setIsCreateModalOpen(false)}\r\n              onSubmit={() => getProyectos({ force: true })}\r\n            />\r\n\r\n            {isEditModalOpen && (\r\n              <EditProjectModal\r\n                isOpen\r\n                onClose={() => { setIsEditModalOpen(false); setSelectedProject(null); }}\r\n                onSubmit={handleUpdateProject}\r\n                project={selectedProject}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectManagement;\r\n ","import React, { useState, useRef } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\n\r\nconst ImageUploadPanel = ({ onImagesUploaded, projectId, isUploading = false }) => {\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [previewImages, setPreviewImages] = useState([]);\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleFileSelect = (files) => {\r\n    const validFiles = Array.from(files)?.filter(file => {\r\n      const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\r\n      const maxSize = 5 * 1024 * 1024; // 5MB\r\n      \r\n      if (!validTypes?.includes(file?.type)) {\r\n        alert(`Archivo ${file?.name} no es un tipo de imagen v√°lido`);\r\n        return false;\r\n      }\r\n      \r\n      if (file?.size > maxSize) {\r\n        alert(`Archivo ${file?.name} es demasiado grande. M√°ximo 5MB`);\r\n        return false;\r\n      }\r\n      \r\n      return true;\r\n    });\r\n\r\n    if (validFiles?.length === 0) return;\r\n\r\n    setSelectedFiles(prev => [...prev, ...validFiles]);\r\n    \r\n    // Generate previews\r\n    validFiles?.forEach(file => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setPreviewImages(prev => [...prev, {\r\n          id: `${file?.name}-${Date.now()}`,\r\n          file,\r\n          src: e?.target?.result,\r\n          name: file?.name,\r\n          category: 'general',\r\n          description: ''\r\n        }]);\r\n      };\r\n      reader?.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  const handleDrag = (e) => {\r\n    e?.preventDefault();\r\n    e?.stopPropagation();\r\n    \r\n    if (e?.type === 'dragenter' || e?.type === 'dragover') {\r\n      setDragActive(true);\r\n    } else if (e?.type === 'dragleave') {\r\n      setDragActive(false);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e?.preventDefault();\r\n    e?.stopPropagation();\r\n    setDragActive(false);\r\n    \r\n    if (e?.dataTransfer?.files?.length) {\r\n      handleFileSelect(e?.dataTransfer?.files);\r\n    }\r\n  };\r\n\r\n  const handleFileInput = (e) => {\r\n    if (e?.target?.files?.length) {\r\n      handleFileSelect(e?.target?.files);\r\n    }\r\n  };\r\n\r\n  const updateImageMetadata = (imageId, field, value) => {\r\n    setPreviewImages(prev => prev?.map(img => \r\n      img?.id === imageId ? { ...img, [field]: value } : img\r\n    ));\r\n  };\r\n\r\n  const removeImage = (imageId) => {\r\n    setPreviewImages(prev => prev?.filter(img => img?.id !== imageId));\r\n    setSelectedFiles(prev => prev?.filter(file => \r\n      !previewImages?.some(img => img?.id === imageId && img?.file === file)\r\n    ));\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (previewImages?.length === 0) {\r\n      alert('Seleccione al menos una imagen para subir');\r\n      return;\r\n    }\r\n\r\n    // Prepare images with metadata\r\n    const imagesToUpload = previewImages?.map(img => ({\r\n      file: img?.file,\r\n      name: img?.name,\r\n      category: img?.category,\r\n      description: img?.description,\r\n      projectId,\r\n      timestamp: new Date()?.toISOString()\r\n    }));\r\n\r\n    try {\r\n      await onImagesUploaded(imagesToUpload);\r\n      \r\n      // Clear selections after successful upload\r\n      setSelectedFiles([]);\r\n      setPreviewImages([]);\r\n      \r\n      // Reset file input\r\n      if (fileInputRef?.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading images:', error);\r\n      alert('Error al subir las im√°genes. Por favor intente nuevamente.');\r\n    }\r\n  };\r\n\r\n  const categoryOptions = [\r\n    { value: 'general', label: 'General' },\r\n    { value: 'construction', label: 'Construcci√≥n' },\r\n    { value: 'installation', label: 'Instalaci√≥n' },\r\n    { value: 'testing', label: 'Pruebas' },\r\n    { value: 'completion', label: 'Finalizaci√≥n' },\r\n    { value: 'quality-control', label: 'Control de Calidad' },\r\n    { value: 'safety', label: 'Seguridad' },\r\n    { value: 'documentation', label: 'Documentaci√≥n' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Subir Im√°genes</h3>\r\n        <div className=\"text-sm text-muted-foreground\">\r\n          Formatos: JPG, PNG, GIF, WebP ‚Ä¢ M√°ximo: 5MB\r\n        </div>\r\n      </div>\r\n      {/* Drag & Drop Zone */}\r\n      <div\r\n        className={`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\r\n          dragActive \r\n            ? 'border-primary bg-primary/5' :'border-border hover:border-primary/50'\r\n        }`}\r\n        onDragEnter={handleDrag}\r\n        onDragLeave={handleDrag}\r\n        onDragOver={handleDrag}\r\n        onDrop={handleDrop}\r\n      >\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          multiple\r\n          accept=\"image/*\"\r\n          onChange={handleFileInput}\r\n          className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\r\n          disabled={isUploading}\r\n        />\r\n        \r\n        <div className=\"flex flex-col items-center space-y-4\">\r\n          <div className={`p-4 rounded-full ${dragActive ? 'bg-primary/10' : 'bg-muted'}`}>\r\n            <Icon name=\"Upload\" size={32} className={dragActive ? 'text-primary' : 'text-muted-foreground'} />\r\n          </div>\r\n          \r\n          <div>\r\n            <p className=\"text-lg font-medium text-foreground mb-1\">\r\n              {dragActive ? 'Suelte las im√°genes aqu√≠' : 'Arrastra im√°genes aqu√≠'}\r\n            </p>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              o haz clic para seleccionar archivos\r\n            </p>\r\n          </div>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            disabled={isUploading}\r\n            onClick={() => fileInputRef?.current?.click()}\r\n          >\r\n            Seleccionar Archivos\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Preview Images */}\r\n      {previewImages?.length > 0 && (\r\n        <div className=\"mt-6\">\r\n          <h4 className=\"text-md font-medium text-foreground mb-4\">\r\n            Im√°genes Seleccionadas ({previewImages?.length})\r\n          </h4>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {previewImages?.map((img) => (\r\n              <div key={img?.id} className=\"border border-border rounded-lg overflow-hidden\">\r\n                {/* Image Preview */}\r\n                <div className=\"relative h-48\">\r\n                  <Image\r\n                    src={img?.src}\r\n                    alt={img?.name}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                  <button\r\n                    onClick={() => removeImage(img?.id)}\r\n                    className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600\"\r\n                  >\r\n                    <Icon name=\"X\" size={16} />\r\n                  </button>\r\n                </div>\r\n                \r\n                {/* Metadata Form */}\r\n                <div className=\"p-4 space-y-3\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-1\">\r\n                      Nombre\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={img?.name}\r\n                      onChange={(e) => updateImageMetadata(img?.id, 'name', e?.target?.value)}\r\n                      className=\"w-full px-3 py-2 border border-border rounded-md text-sm\"\r\n                      placeholder=\"Nombre de la imagen\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-1\">\r\n                      Categor√≠a\r\n                    </label>\r\n                    <select\r\n                      value={img?.category}\r\n                      onChange={(e) => updateImageMetadata(img?.id, 'category', e?.target?.value)}\r\n                      className=\"w-full px-3 py-2 border border-border rounded-md text-sm\"\r\n                    >\r\n                      {categoryOptions?.map(option => (\r\n                        <option key={option?.value} value={option?.value}>\r\n                          {option?.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-1\">\r\n                      Descripci√≥n\r\n                    </label>\r\n                    <textarea\r\n                      value={img?.description}\r\n                      onChange={(e) => updateImageMetadata(img?.id, 'description', e?.target?.value)}\r\n                      className=\"w-full px-3 py-2 border border-border rounded-md text-sm resize-none\"\r\n                      rows=\"2\"\r\n                      placeholder=\"Descripci√≥n opcional...\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          \r\n          {/* Upload Button */}\r\n          <div className=\"flex justify-center mt-6\">\r\n            <Button\r\n              onClick={handleUpload}\r\n              disabled={isUploading || previewImages?.length === 0}\r\n              iconName=\"Upload\"\r\n              iconPosition=\"left\"\r\n              className=\"px-8\"\r\n            >\r\n              {isUploading ? 'Subiendo...' : `Subir ${previewImages?.length} Imagen(es)`}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUploadPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\n\r\nconst ImageLightbox = ({ image, images, onClose, onNavigate, onDelete, onUpdate }) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editForm, setEditForm] = useState({\r\n    name: '',\r\n    category: '',\r\n    description: ''\r\n  });\r\n\r\n  const categoryOptions = [\r\n    { value: 'general', label: 'General' },\r\n    { value: 'construction', label: 'Construcci√≥n' },\r\n    { value: 'installation', label: 'Instalaci√≥n' },\r\n    { value: 'testing', label: 'Pruebas' },\r\n    { value: 'completion', label: 'Finalizaci√≥n' },\r\n    { value: 'quality-control', label: 'Control de Calidad' },\r\n    { value: 'safety', label: 'Seguridad' },\r\n    { value: 'documentation', label: 'Documentaci√≥n' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const index = images?.findIndex(img => img?.id === image?.id);\r\n    setCurrentIndex(index >= 0 ? index : 0);\r\n  }, [image, images]);\r\n\r\n  useEffect(() => {\r\n    setEditForm({\r\n      name: image?.name || '',\r\n      category: image?.category || 'general',\r\n      description: image?.description || ''\r\n    });\r\n  }, [image]);\r\n\r\n  // Keyboard navigation\r\n  useEffect(() => {\r\n    const handleKeyPress = (e) => {\r\n      switch (e?.key) {\r\n        case 'Escape':\r\n          onClose();\r\n          break;\r\n        case 'ArrowLeft':\r\n          navigatePrevious();\r\n          break;\r\n        case 'ArrowRight':\r\n          navigateNext();\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyPress);\r\n    return () => window.removeEventListener('keydown', handleKeyPress);\r\n  }, [currentIndex]);\r\n\r\n  const navigateNext = () => {\r\n    if (images?.length && currentIndex < images?.length - 1) {\r\n      const nextIndex = currentIndex + 1;\r\n      setCurrentIndex(nextIndex);\r\n      onNavigate(images?.[nextIndex]);\r\n    }\r\n  };\r\n\r\n  const navigatePrevious = () => {\r\n    if (images?.length && currentIndex > 0) {\r\n      const prevIndex = currentIndex - 1;\r\n      setCurrentIndex(prevIndex);\r\n      onNavigate(images?.[prevIndex]);\r\n    }\r\n  };\r\n\r\n  const handleSaveEdit = async () => {\r\n    try {\r\n      await onUpdate(image?.id, editForm);\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      console.error('Error updating image:', error);\r\n      alert('Error al actualizar la imagen');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (window.confirm(`¬øEst√° seguro de que desea eliminar la imagen \"${image?.name}\"?`)) {\r\n      try {\r\n        await onDelete(image);\r\n        onClose();\r\n      } catch (error) {\r\n        console.error('Error deleting image:', error);\r\n        alert('Error al eliminar la imagen');\r\n      }\r\n    }\r\n  };\r\n\r\n  const formatDate = (timestamp) => {\r\n    return new Date(timestamp)?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getCategoryLabel = (category) => {\r\n    const option = categoryOptions?.find(opt => opt?.value === category);\r\n    return option?.label || category;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/90 z-50 flex items-center justify-center\">\r\n      {/* Overlay */}\r\n      <div \r\n        className=\"absolute inset-0\" \r\n        onClick={onClose}\r\n      />\r\n      {/* Content */}\r\n      <div className=\"relative max-w-7xl max-h-screen w-full h-full flex flex-col lg:flex-row\">\r\n        {/* Image Container */}\r\n        <div className=\"flex-1 flex items-center justify-center p-4 lg:p-8\">\r\n          <div className=\"relative\">\r\n            <Image\r\n              src={image?.src || image?.url}\r\n              alt={image?.name}\r\n              className=\"max-w-full max-h-[70vh] lg:max-h-[80vh] object-contain\"\r\n            />\r\n            \r\n            {/* Navigation Buttons */}\r\n            {images?.length > 1 && (\r\n              <>\r\n                <button\r\n                  onClick={navigatePrevious}\r\n                  disabled={currentIndex === 0}\r\n                  className=\"absolute left-4 top-1/2 transform -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  <Icon name=\"ChevronLeft\" size={24} />\r\n                </button>\r\n                \r\n                <button\r\n                  onClick={navigateNext}\r\n                  disabled={currentIndex === images?.length - 1}\r\n                  className=\"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  <Icon name=\"ChevronRight\" size={24} />\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Info Panel */}\r\n        <div className=\"w-full lg:w-96 bg-card border-l border-border flex flex-col\">\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-4 border-b border-border\">\r\n            <h3 className=\"text-lg font-semibold text-foreground\">\r\n              {isEditing ? 'Editar Imagen' : 'Detalles'}\r\n            </h3>\r\n            <div className=\"flex items-center space-x-2\">\r\n              {!isEditing && (\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"icon\"\r\n                  onClick={() => setIsEditing(true)}\r\n                >\r\n                  <Icon name=\"Edit\" size={18} />\r\n                </Button>\r\n              )}\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={onClose}\r\n              >\r\n                <Icon name=\"X\" size={18} />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Content */}\r\n          <div className=\"flex-1 overflow-y-auto p-4\">\r\n            {isEditing ? (\r\n              /* Edit Form */\r\n              (<div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Nombre\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editForm?.name}\r\n                    onChange={(e) => setEditForm(prev => ({ ...prev, name: e?.target?.value }))}\r\n                    className=\"w-full px-3 py-2 border border-border rounded-md\"\r\n                    placeholder=\"Nombre de la imagen\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Categor√≠a\r\n                  </label>\r\n                  <select\r\n                    value={editForm?.category}\r\n                    onChange={(e) => setEditForm(prev => ({ ...prev, category: e?.target?.value }))}\r\n                    className=\"w-full px-3 py-2 border border-border rounded-md\"\r\n                  >\r\n                    {categoryOptions?.map(option => (\r\n                      <option key={option?.value} value={option?.value}>\r\n                        {option?.label}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Descripci√≥n\r\n                  </label>\r\n                  <textarea\r\n                    value={editForm?.description}\r\n                    onChange={(e) => setEditForm(prev => ({ ...prev, description: e?.target?.value }))}\r\n                    className=\"w-full px-3 py-2 border border-border rounded-md resize-none\"\r\n                    rows=\"4\"\r\n                    placeholder=\"Descripci√≥n de la imagen...\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex space-x-2\">\r\n                  <Button\r\n                    onClick={handleSaveEdit}\r\n                    iconName=\"Save\"\r\n                    iconPosition=\"left\"\r\n                    className=\"flex-1\"\r\n                  >\r\n                    Guardar\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => setIsEditing(false)}\r\n                    className=\"flex-1\"\r\n                  >\r\n                    Cancelar\r\n                  </Button>\r\n                </div>\r\n              </div>)\r\n            ) : (\r\n              /* View Mode */\r\n              (<div className=\"space-y-6\">\r\n                <div>\r\n                  <h4 className=\"font-semibold text-foreground text-lg mb-2\">\r\n                    {image?.name}\r\n                  </h4>\r\n                  \r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"Tag\" size={16} className=\"text-muted-foreground\" />\r\n                      <span className=\"text-sm text-foreground\">\r\n                        {getCategoryLabel(image?.category)}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"Calendar\" size={16} className=\"text-muted-foreground\" />\r\n                      <span className=\"text-sm text-foreground\">\r\n                        {formatDate(image?.timestamp)}\r\n                      </span>\r\n                    </div>\r\n                    \r\n                    {images?.length > 1 && (\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon name=\"Image\" size={16} className=\"text-muted-foreground\" />\r\n                        <span className=\"text-sm text-foreground\">\r\n                          {currentIndex + 1} de {images?.length}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                {image?.description && (\r\n                  <div>\r\n                    <h5 className=\"font-medium text-foreground mb-2\">Descripci√≥n</h5>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      {image?.description}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n                {/* Actions */}\r\n                <div className=\"space-y-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    className=\"w-full\"\r\n                    iconName=\"Download\"\r\n                    iconPosition=\"left\"\r\n                    onClick={() => {\r\n                      // Create download link\r\n                      const link = document.createElement('a');\r\n                      link.href = image?.src || image?.url;\r\n                      link.download = image?.name || 'imagen';\r\n                      document.body?.appendChild(link);\r\n                      link?.click();\r\n                      document.body?.removeChild(link);\r\n                    }}\r\n                  >\r\n                    Descargar\r\n                  </Button>\r\n                  \r\n                  <Button\r\n                    variant=\"destructive\"\r\n                    className=\"w-full\"\r\n                    iconName=\"Trash2\"\r\n                    iconPosition=\"left\"\r\n                    onClick={handleDelete}\r\n                  >\r\n                    Eliminar\r\n                  </Button>\r\n                </div>\r\n              </div>)\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageLightbox;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\nimport ImageLightbox from './ImageLightbox';\r\n\r\nconst ImageGallery = ({ images = [], onDeleteImage, onUpdateImage, projectInfo }) => {\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n  const [sortBy, setSortBy] = useState('newest');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [lightboxImage, setLightboxImage] = useState(null);\r\n  const [viewMode, setViewMode] = useState('masonry'); // masonry, grid, list\r\n\r\n  const categoryOptions = [\r\n    { value: 'all', label: 'Todas las Categor√≠as' },\r\n    { value: 'general', label: 'General' },\r\n    { value: 'construction', label: 'Construcci√≥n' },\r\n    { value: 'installation', label: 'Instalaci√≥n' },\r\n    { value: 'testing', label: 'Pruebas' },\r\n    { value: 'completion', label: 'Finalizaci√≥n' },\r\n    { value: 'quality-control', label: 'Control de Calidad' },\r\n    { value: 'safety', label: 'Seguridad' },\r\n    { value: 'documentation', label: 'Documentaci√≥n' }\r\n  ];\r\n\r\n  const sortOptions = [\r\n    { value: 'newest', label: 'M√°s Recientes' },\r\n    { value: 'oldest', label: 'M√°s Antiguos' },\r\n    { value: 'name', label: 'Por Nombre' },\r\n    { value: 'category', label: 'Por Categor√≠a' }\r\n  ];\r\n\r\n  const viewModeOptions = [\r\n    { value: 'masonry', label: 'Mosaico', icon: 'Grid' },\r\n    { value: 'grid', label: 'Cuadr√≠cula', icon: 'Grid3X3' },\r\n    { value: 'list', label: 'Lista', icon: 'List' }\r\n  ];\r\n\r\n  // Filter and sort images\r\n  const filteredImages = images\r\n    ?.filter(image => {\r\n      const matchesCategory = selectedCategory === 'all' || image?.category === selectedCategory;\r\n      const matchesSearch = !searchTerm || \r\n        image?.name?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||\r\n        image?.description?.toLowerCase()?.includes(searchTerm?.toLowerCase());\r\n      return matchesCategory && matchesSearch;\r\n    })\r\n    ?.sort((a, b) => {\r\n      switch (sortBy) {\r\n        case 'newest':\r\n          return new Date(b?.timestamp || 0) - new Date(a?.timestamp || 0);\r\n        case 'oldest':\r\n          return new Date(a?.timestamp || 0) - new Date(b?.timestamp || 0);\r\n        case 'name':\r\n          return (a?.name || '')?.localeCompare(b?.name || '');\r\n        case 'category':\r\n          return (a?.category || '')?.localeCompare(b?.category || '');\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n\r\n  const getCategoryColor = (category) => {\r\n    const colors = {\r\n      'general': 'bg-gray-100 text-gray-800',\r\n      'construction': 'bg-blue-100 text-blue-800',\r\n      'installation': 'bg-green-100 text-green-800',\r\n      'testing': 'bg-yellow-100 text-yellow-800',\r\n      'completion': 'bg-purple-100 text-purple-800',\r\n      'quality-control': 'bg-red-100 text-red-800',\r\n      'safety': 'bg-orange-100 text-orange-800',\r\n      'documentation': 'bg-indigo-100 text-indigo-800'\r\n    };\r\n    return colors?.[category] || 'bg-gray-100 text-gray-800';\r\n  };\r\n\r\n  const getCategoryLabel = (category) => {\r\n    const option = categoryOptions?.find(opt => opt?.value === category);\r\n    return option?.label || category;\r\n  };\r\n\r\n  const formatDate = (timestamp) => {\r\n    return new Date(timestamp)?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const handleDeleteImage = async (image) => {\r\n    if (window.confirm(`¬øEst√° seguro de que desea eliminar la imagen \"${image?.name}\"?\\n\\nEsta acci√≥n no se puede deshacer.`)) {\r\n      try {\r\n        await onDeleteImage(image?.id);\r\n      } catch (error) {\r\n        console.error('Error deleting image:', error);\r\n        alert('Error al eliminar la imagen');\r\n      }\r\n    }\r\n  };\r\n\r\n  const exportGallery = () => {\r\n    const galleryData = {\r\n      project: projectInfo,\r\n      images: filteredImages,\r\n      exportDate: new Date()?.toISOString(),\r\n      totalImages: filteredImages?.length\r\n    };\r\n\r\n    const blob = new Blob([JSON.stringify(galleryData, null, 2)], { \r\n      type: 'application/json' \r\n    });\r\n    \r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `galeria-${projectInfo?.code || 'proyecto'}-${new Date()?.toISOString()?.split('T')?.[0]}.json`;\r\n    document.body?.appendChild(link);\r\n    link?.click();\r\n    document.body?.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  if (!images?.length) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <Icon name=\"Image\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n        <h3 className=\"text-lg font-medium text-foreground mb-2\">No hay im√°genes</h3>\r\n        <p className=\"text-muted-foreground\">\r\n          Las im√°genes subidas para este proyecto aparecer√°n aqu√≠\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Controls */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n        {/* Search and Filters */}\r\n        <div className=\"flex flex-col sm:flex-row gap-4 flex-1\">\r\n          <div className=\"relative flex-1 max-w-sm\">\r\n            <Icon name=\"Search\" size={20} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" />\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e?.target?.value)}\r\n              placeholder=\"Buscar im√°genes...\"\r\n              className=\"w-full pl-10 pr-4 py-2 border border-border rounded-md text-sm\"\r\n            />\r\n          </div>\r\n          \r\n          <select\r\n            value={selectedCategory}\r\n            onChange={(e) => setSelectedCategory(e?.target?.value)}\r\n            className=\"px-3 py-2 border border-border rounded-md text-sm min-w-48\"\r\n          >\r\n            {categoryOptions?.map(option => (\r\n              <option key={option?.value} value={option?.value}>\r\n                {option?.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          \r\n          <select\r\n            value={sortBy}\r\n            onChange={(e) => setSortBy(e?.target?.value)}\r\n            className=\"px-3 py-2 border border-border rounded-md text-sm min-w-40\"\r\n          >\r\n            {sortOptions?.map(option => (\r\n              <option key={option?.value} value={option?.value}>\r\n                {option?.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* View Mode and Actions */}\r\n        <div className=\"flex items-center space-x-4\">\r\n          <div className=\"flex bg-muted rounded-lg p-1\">\r\n            {viewModeOptions?.map(mode => (\r\n              <button\r\n                key={mode?.value}\r\n                onClick={() => setViewMode(mode?.value)}\r\n                className={`flex items-center space-x-2 px-3 py-2 rounded-md transition-smooth ${\r\n                  viewMode === mode?.value\r\n                    ? 'bg-primary text-primary-foreground'\r\n                    : 'text-muted-foreground hover:text-foreground'\r\n                }`}\r\n                title={mode?.label}\r\n              >\r\n                <Icon name={mode?.icon} size={16} />\r\n                <span className=\"hidden sm:inline text-sm\">{mode?.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n            onClick={exportGallery}\r\n          >\r\n            Exportar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Results Count */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <p className=\"text-sm text-muted-foreground\">\r\n          Mostrando {filteredImages?.length} de {images?.length} im√°genes\r\n        </p>\r\n        {searchTerm && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            iconName=\"X\"\r\n            iconPosition=\"left\"\r\n            onClick={() => setSearchTerm('')}\r\n          >\r\n            Limpiar b√∫squeda\r\n          </Button>\r\n        )}\r\n      </div>\r\n      {/* Image Gallery */}\r\n      {filteredImages?.length === 0 ? (\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"Search\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n          <p className=\"text-muted-foreground\">\r\n            No se encontraron im√°genes con los filtros seleccionados\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {/* Masonry View */}\r\n          {viewMode === 'masonry' && (\r\n            <div className=\"columns-1 md:columns-2 lg:columns-3 xl:columns-4 gap-6 space-y-6\">\r\n              {filteredImages?.map((image, index) => (\r\n                <div \r\n                  key={image?.id || index} \r\n                  className=\"break-inside-avoid bg-card border border-border rounded-lg overflow-hidden hover:shadow-md transition-shadow\"\r\n                >\r\n                  <div className=\"relative group\">\r\n                    <Image\r\n                      src={image?.src || image?.url}\r\n                      alt={image?.name}\r\n                      className=\"w-full h-auto cursor-pointer\"\r\n                      onClick={() => setLightboxImage(image)}\r\n                    />\r\n                    <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        iconName=\"Eye\"\r\n                        onClick={() => setLightboxImage(image)}\r\n                      >\r\n                        Ver\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4\">\r\n                    <div className=\"flex items-start justify-between mb-2\">\r\n                      <h4 className=\"font-medium text-foreground text-sm\">{image?.name}</h4>\r\n                      <button\r\n                        onClick={() => handleDeleteImage(image)}\r\n                        className=\"p-1 text-red-500 hover:bg-red-50 rounded\"\r\n                      >\r\n                        <Icon name=\"Trash2\" size={14} />\r\n                      </button>\r\n                    </div>\r\n                    \r\n                    <div className=\"space-y-2\">\r\n                      <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(image?.category)}`}>\r\n                        {getCategoryLabel(image?.category)}\r\n                      </span>\r\n                      \r\n                      {image?.description && (\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          {image?.description}\r\n                        </p>\r\n                      )}\r\n                      \r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        {formatDate(image?.timestamp)}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Grid View */}\r\n          {viewMode === 'grid' && (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\">\r\n              {filteredImages?.map((image, index) => (\r\n                <div \r\n                  key={image?.id || index}\r\n                  className=\"bg-card border border-border rounded-lg overflow-hidden hover:shadow-md transition-shadow\"\r\n                >\r\n                  <div className=\"relative aspect-square group\">\r\n                    <Image\r\n                      src={image?.src || image?.url}\r\n                      alt={image?.name}\r\n                      className=\"w-full h-full object-cover cursor-pointer\"\r\n                      onClick={() => setLightboxImage(image)}\r\n                    />\r\n                    <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        iconName=\"Eye\"\r\n                        onClick={() => setLightboxImage(image)}\r\n                      >\r\n                        Ver\r\n                      </Button>\r\n                    </div>\r\n                    <button\r\n                      onClick={() => handleDeleteImage(image)}\r\n                      className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                    >\r\n                      <Icon name=\"Trash2\" size={14} />\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-3\">\r\n                    <h4 className=\"font-medium text-foreground text-sm mb-1 truncate\">\r\n                      {image?.name}\r\n                    </h4>\r\n                    <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(image?.category)}`}>\r\n                      {getCategoryLabel(image?.category)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* List View */}\r\n          {viewMode === 'list' && (\r\n            <div className=\"space-y-4\">\r\n              {filteredImages?.map((image, index) => (\r\n                <div \r\n                  key={image?.id || index}\r\n                  className=\"bg-card border border-border rounded-lg p-4 hover:shadow-sm transition-shadow\"\r\n                >\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    <div className=\"relative w-16 h-16 flex-shrink-0\">\r\n                      <Image\r\n                        src={image?.src || image?.url}\r\n                        alt={image?.name}\r\n                        className=\"w-full h-full object-cover rounded cursor-pointer\"\r\n                        onClick={() => setLightboxImage(image)}\r\n                      />\r\n                    </div>\r\n                    \r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-start justify-between\">\r\n                        <div>\r\n                          <h4 className=\"font-medium text-foreground\">{image?.name}</h4>\r\n                          <div className=\"flex items-center space-x-2 mt-1\">\r\n                            <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(image?.category)}`}>\r\n                              {getCategoryLabel(image?.category)}\r\n                            </span>\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {formatDate(image?.timestamp)}\r\n                            </span>\r\n                          </div>\r\n                          {image?.description && (\r\n                            <p className=\"text-sm text-muted-foreground mt-2\">\r\n                              {image?.description}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            iconName=\"Eye\"\r\n                            onClick={() => setLightboxImage(image)}\r\n                          />\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            iconName=\"Trash2\"\r\n                            onClick={() => handleDeleteImage(image)}\r\n                            className=\"text-red-500 hover:text-red-600\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n      {/* Lightbox */}\r\n      {lightboxImage && (\r\n        <ImageLightbox\r\n          image={lightboxImage}\r\n          images={filteredImages}\r\n          onClose={() => setLightboxImage(null)}\r\n          onNavigate={setLightboxImage}\r\n          onDelete={handleDeleteImage}\r\n          onUpdate={onUpdateImage}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Image from '../../../components/AppImage';\r\n\r\nconst ProjectInfoPanel = ({ project }) => {\r\n  if (!project) return null;\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    })?.format(amount);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Date(date)?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    const colors = {\r\n      'planning': 'bg-blue-100 text-blue-800',\r\n      'in-progress': 'bg-green-100 text-green-800',\r\n      'on-hold': 'bg-yellow-100 text-yellow-800',\r\n      'review': 'bg-purple-100 text-purple-800',\r\n      'completed': 'bg-emerald-100 text-emerald-800',\r\n      'cancelled': 'bg-red-100 text-red-800'\r\n    };\r\n    return colors?.[status] || 'bg-gray-100 text-gray-800';\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    const colors = {\r\n      'low': 'text-green-600',\r\n      'medium': 'text-yellow-600',\r\n      'high': 'text-orange-600',\r\n      'urgent': 'text-red-600'\r\n    };\r\n    return colors?.[priority] || 'text-gray-600';\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center space-x-4 mb-6\">\r\n        {project?.image && (\r\n          <Image\r\n            src={project?.image}\r\n            alt={project?.name}\r\n            className=\"w-16 h-16 rounded-lg object-cover\"\r\n          />\r\n        )}\r\n        <div className=\"flex-1\">\r\n          <h2 className=\"text-xl font-semibold text-foreground mb-1\">\r\n            {project?.name}\r\n          </h2>\r\n          <div className=\"flex items-center space-x-3\">\r\n            <span className=\"font-mono text-sm text-primary\">\r\n              {project?.code}\r\n            </span>\r\n            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(project?.status)}`}>\r\n              {project?.statusLabel}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Project Details Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        {/* Basic Info */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"font-medium text-foreground border-b border-border pb-2\">\r\n            Informaci√≥n General\r\n          </h3>\r\n          \r\n          <div className=\"space-y-3 text-sm\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Tipo:</span>\r\n              <span className=\"text-foreground font-medium\">{project?.type}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Departamento:</span>\r\n              <span className=\"text-foreground\">{project?.department}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Prioridad:</span>\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Icon \r\n                  name=\"AlertCircle\" \r\n                  size={14} \r\n                  className={getPriorityColor(project?.priority)}\r\n                />\r\n                <span className=\"text-foreground\">{project?.priorityLabel}</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Ubicaci√≥n:</span>\r\n              <span className=\"text-foreground\">{project?.location}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Timeline & Budget */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"font-medium text-foreground border-b border-border pb-2\">\r\n            Cronograma y Presupuesto\r\n          </h3>\r\n          \r\n          <div className=\"space-y-3 text-sm\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Fecha Inicio:</span>\r\n              <span className=\"text-foreground\">{formatDate(project?.startDate)}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Fecha Fin:</span>\r\n              <span className=\"text-foreground\">{formatDate(project?.endDate)}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Presupuesto:</span>\r\n              <span className=\"text-foreground font-medium\">{formatCurrency(project?.budget)}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Progreso:</span>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <div className=\"w-16 bg-muted rounded-full h-2\">\r\n                  <div \r\n                    className=\"bg-primary h-2 rounded-full transition-all duration-300\"\r\n                    style={{ width: `${project?.progress}%` }}\r\n                  />\r\n                </div>\r\n                <span className=\"text-foreground font-medium\">{project?.progress}%</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Client Info */}\r\n      {project?.client && (\r\n        <div className=\"mt-6 pt-6 border-t border-border\">\r\n          <h3 className=\"font-medium text-foreground mb-3\">\r\n            Informaci√≥n del Cliente\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Nombre:</span>\r\n              <span className=\"text-foreground font-medium\">{project?.client?.name}</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-muted-foreground\">Contacto:</span>\r\n              <span className=\"text-foreground\">{project?.client?.contact}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Assigned Personnel */}\r\n      {project?.assignedPersonnel?.length > 0 && (\r\n        <div className=\"mt-6 pt-6 border-t border-border\">\r\n          <h3 className=\"font-medium text-foreground mb-3\">\r\n            Personal Asignado\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n            {project?.assignedPersonnel?.map((person, index) => (\r\n              <div key={index} className=\"flex items-center space-x-3 p-3 bg-muted/30 rounded-lg\">\r\n                <div className=\"w-8 h-8 bg-primary rounded-full flex items-center justify-center\">\r\n                  <Icon name=\"User\" size={16} className=\"text-primary-foreground\" />\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"text-sm font-medium text-foreground\">{person?.name}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">{person?.role}</div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Work Orders */}\r\n      {project?.workOrders?.length > 0 && (\r\n        <div className=\"mt-6 pt-6 border-t border-border\">\r\n          <h3 className=\"font-medium text-foreground mb-3\">\r\n            √ìrdenes de Trabajo\r\n          </h3>\r\n          \r\n          <div className=\"space-y-2\">\r\n            {project?.workOrders?.map((order, index) => (\r\n              <div key={index} className=\"flex items-center justify-between p-3 bg-muted/30 rounded-lg\">\r\n                <span className=\"text-sm font-medium text-foreground\">{order?.code}</span>\r\n                <span className={`px-2 py-1 rounded text-xs font-medium ${getStatusColor(order?.status)}`}>\r\n                  {order?.statusLabel}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectInfoPanel;","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ImageUploadPanel from './components/ImageUploadPanel';\r\nimport ImageGallery from './components/ImageGallery';\r\nimport ProjectInfoPanel from './components/ProjectInfoPanel';\r\n\r\nconst ProjectDetailGallery = () => {\r\n  const { projectId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [project, setProject] = useState(null);\r\n  const [images, setImages] = useState([]);\r\n  const [activeTab, setActiveTab] = useState('gallery');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n\r\n  // Mock project data - in a real app, this would come from an API\r\n  const mockProjects = [\r\n    {\r\n      id: \"1\",\r\n      code: \"PROJ-2024-001\",\r\n      name: \"Instalaci√≥n HVAC Torre Corporativa\",\r\n      type: \"Instalaci√≥n HVAC\",\r\n      client: {\r\n        name: \"ABC Corporation\",\r\n        contact: \"contacto@abccorp.com\",\r\n        type: \"commercial\"\r\n      },\r\n      status: \"in-progress\",\r\n      statusLabel: \"En Progreso\",\r\n      priority: \"high\",\r\n      priorityLabel: \"Alta\",\r\n      budget: 850000,\r\n      startDate: \"2024-01-15\",\r\n      endDate: \"2024-04-30\",\r\n      progress: 65,\r\n      department: \"Ingenier√≠a\",\r\n      location: \"Ciudad de M√©xico, CDMX\",\r\n      image: \"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=400\",\r\n      assignedPersonnel: [\r\n        { name: \"Carlos Mart√≠nez\", role: \"Ingeniero Jefe\" },\r\n        { name: \"Ana Rodr√≠guez\", role: \"T√©cnico Especialista\" },\r\n        { name: \"Luis Garc√≠a\", role: \"Supervisor de Obra\" }\r\n      ],\r\n      workOrders: [\r\n        { code: \"WO-2024-001\", status: \"completed\", statusLabel: \"Completada\" },\r\n        { code: \"WO-2024-002\", status: \"in-progress\", statusLabel: \"En Progreso\" },\r\n        { code: \"WO-2024-003\", status: \"planning\", statusLabel: \"Planificaci√≥n\" }\r\n      ]\r\n    },\r\n    {\r\n      id: \"2\",\r\n      code: \"PROJ-2024-002\",\r\n      name: \"Mantenimiento Sistema Industrial\",\r\n      type: \"Mantenimiento\",\r\n      client: {\r\n        name: \"XYZ Industries\",\r\n        contact: \"servicios@xyzind.com\",\r\n        type: \"industrial\"\r\n      },\r\n      status: \"completed\",\r\n      statusLabel: \"Completado\",\r\n      priority: \"medium\",\r\n      priorityLabel: \"Media\",\r\n      budget: 320000,\r\n      startDate: \"2024-02-01\",\r\n      endDate: \"2024-03-15\",\r\n      progress: 100,\r\n      department: \"Mantenimiento\",\r\n      location: \"Guadalajara, JAL\",\r\n      image: \"https://images.unsplash.com/photo-1581094794329-c8112a89af12?w=400\",\r\n      assignedPersonnel: [\r\n        { name: \"Mar√≠a L√≥pez\", role: \"Coordinadora\" },\r\n        { name: \"Jos√© Hern√°ndez\", role: \"T√©cnico\" }\r\n      ],\r\n      workOrders: [\r\n        { code: \"WO-2024-004\", status: \"completed\", statusLabel: \"Completada\" },\r\n        { code: \"WO-2024-005\", status: \"completed\", statusLabel: \"Completada\" }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  // Mock images data - in a real app, this would come from an API\r\n  const mockImages = [\r\n    {\r\n      id: 'img1',\r\n      projectId: '1',\r\n      name: 'Instalaci√≥n inicial del sistema',\r\n      src: 'https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800',\r\n      category: 'installation',\r\n      description: 'Vista general de la instalaci√≥n del sistema HVAC en la torre corporativa',\r\n      timestamp: '2024-01-20T10:30:00Z'\r\n    },\r\n    {\r\n      id: 'img2',\r\n      projectId: '1',\r\n      name: 'Pruebas de funcionamiento',\r\n      src: 'https://images.unsplash.com/photo-1581094794329-c8112a89af12?w=800',\r\n      category: 'testing',\r\n      description: 'Verificaci√≥n de las conexiones y funcionamiento del sistema',\r\n      timestamp: '2024-02-15T14:20:00Z'\r\n    },\r\n    {\r\n      id: 'img3',\r\n      projectId: '1',\r\n      name: 'Control de calidad',\r\n      src: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800',\r\n      category: 'quality-control',\r\n      description: 'Inspecci√≥n de calidad de los componentes instalados',\r\n      timestamp: '2024-03-01T09:15:00Z'\r\n    },\r\n    {\r\n      id: 'img4',\r\n      projectId: '2',\r\n      name: 'Mantenimiento preventivo',\r\n      src: 'https://images.unsplash.com/photo-1497366216548-37526070297c?w=800',\r\n      category: 'general',\r\n      description: 'Tareas de mantenimiento preventivo del sistema industrial',\r\n      timestamp: '2024-02-10T11:45:00Z'\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadProjectData = async () => {\r\n      setIsLoading(true);\r\n      \r\n      try {\r\n        // Simulate API call\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        \r\n        const foundProject = mockProjects?.find(p => p?.id === projectId);\r\n        if (!foundProject) {\r\n          navigate('/proyectos');\r\n          return;\r\n        }\r\n        \r\n        setProject(foundProject);\r\n        \r\n        // Load images for this project\r\n        const projectImages = mockImages?.filter(img => img?.projectId === projectId);\r\n        setImages(projectImages);\r\n        \r\n      } catch (error) {\r\n        console.error('Error loading project data:', error);\r\n        navigate('/proyectos');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    if (projectId) {\r\n      loadProjectData();\r\n    }\r\n  }, [projectId, navigate]);\r\n\r\n  const handleImagesUploaded = async (newImages) => {\r\n    setIsUploading(true);\r\n    \r\n    try {\r\n      // Simulate API upload\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n      \r\n      // Add new images to the gallery\r\n      const uploadedImages = newImages?.map((img, index) => ({\r\n        id: `uploaded-${Date.now()}-${index}`,\r\n        projectId,\r\n        name: img?.name,\r\n        src: img?.file ? URL.createObjectURL(img?.file) : img?.src,\r\n        category: img?.category,\r\n        description: img?.description,\r\n        timestamp: img?.timestamp\r\n      }));\r\n      \r\n      setImages(prev => [...uploadedImages, ...prev]);\r\n      \r\n      // Switch to gallery view after upload\r\n      setActiveTab('gallery');\r\n      \r\n      console.log(`${uploadedImages?.length} im√°genes subidas exitosamente para el proyecto ${project?.code}`);\r\n      \r\n    } catch (error) {\r\n      console.error('Error uploading images:', error);\r\n      throw error;\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteImage = async (imageId) => {\r\n    try {\r\n      // Simulate API delete\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      setImages(prev => prev?.filter(img => img?.id !== imageId));\r\n      console.log('Imagen eliminada exitosamente');\r\n      \r\n    } catch (error) {\r\n      console.error('Error deleting image:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleUpdateImage = async (imageId, updates) => {\r\n    try {\r\n      // Simulate API update\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      setImages(prev => prev?.map(img => \r\n        img?.id === imageId ? { ...img, ...updates } : img\r\n      ));\r\n      \r\n      console.log('Imagen actualizada exitosamente');\r\n      \r\n    } catch (error) {\r\n      console.error('Error updating image:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'gallery', label: 'Galer√≠a de Im√°genes', icon: 'Image', count: images?.length },\r\n    { id: 'upload', label: 'Subir Im√°genes', icon: 'Upload' },\r\n    { id: 'project', label: 'Info del Proyecto', icon: 'Info' }\r\n  ];\r\n\r\n  const breadcrumbItems = [\r\n    { label: 'Gesti√≥n de Proyectos', href: '/proyectos' },\r\n    { label: project?.name || 'Proyecto', href: '#' },\r\n    { label: 'Galer√≠a', href: '#' }\r\n  ];\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando proyecto...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n        \r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <Breadcrumb items={breadcrumbItems} />\r\n            \r\n            {/* Header */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <div className=\"flex items-center space-x-3 mb-2\">\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={() => navigate('/proyectos')}\r\n                  >\r\n                    <Icon name=\"ArrowLeft\" size={20} />\r\n                  </Button>\r\n                  <h1 className=\"text-3xl font-bold text-foreground\">\r\n                    {project?.name}\r\n                  </h1>\r\n                </div>\r\n                <p className=\"text-muted-foreground\">\r\n                  Documentaci√≥n visual y gesti√≥n de im√°genes del proyecto\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {images?.length} imagen{images?.length !== 1 ? 'es' : ''}\r\n                </div>\r\n                <Button\r\n                  onClick={() => setActiveTab('upload')}\r\n                  iconName=\"Plus\"\r\n                  iconPosition=\"left\"\r\n                  disabled={isUploading}\r\n                >\r\n                  {isUploading ? 'Subiendo...' : 'Agregar Im√°genes'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"border-b border-border mb-8\">\r\n              <div className=\"flex space-x-8\">\r\n                {tabs?.map((tab) => (\r\n                  <button\r\n                    key={tab?.id}\r\n                    onClick={() => setActiveTab(tab?.id)}\r\n                    className={`flex items-center space-x-2 pb-4 border-b-2 transition-colors ${\r\n                      activeTab === tab?.id\r\n                        ? 'border-primary text-primary' :'border-transparent text-muted-foreground hover:text-foreground'\r\n                    }`}\r\n                  >\r\n                    <Icon name={tab?.icon} size={18} />\r\n                    <span className=\"font-medium\">{tab?.label}</span>\r\n                    {tab?.count !== undefined && (\r\n                      <span className=\"bg-muted px-2 py-1 rounded-full text-xs\">\r\n                        {tab?.count}\r\n                      </span>\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Tab Content */}\r\n            <div className=\"space-y-8\">\r\n              {activeTab === 'gallery' && (\r\n                <ImageGallery\r\n                  images={images}\r\n                  projectInfo={project}\r\n                  onDeleteImage={handleDeleteImage}\r\n                  onUpdateImage={handleUpdateImage}\r\n                />\r\n              )}\r\n\r\n              {activeTab === 'upload' && (\r\n                <ImageUploadPanel\r\n                  projectId={projectId}\r\n                  onImagesUploaded={handleImagesUploaded}\r\n                  isUploading={isUploading}\r\n                />\r\n              )}\r\n\r\n              {activeTab === 'project' && (\r\n                <ProjectInfoPanel project={project} />\r\n              )}\r\n            </div>\r\n\r\n            {/* Quick Stats */}\r\n            {activeTab === 'gallery' && images?.length > 0 && (\r\n              <div className=\"mt-12 pt-8 border-t border-border\">\r\n                <h3 className=\"text-lg font-semibold text-foreground mb-4\">Estad√≠sticas de la Galer√≠a</h3>\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                  <div className=\"bg-card border border-border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"Image\" size={20} className=\"text-blue-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-foreground\">{images?.length}</div>\r\n                        <div className=\"text-sm text-muted-foreground\">Total de Im√°genes</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-card border border-border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"Tag\" size={20} className=\"text-green-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-foreground\">\r\n                          {[...new Set(images?.map(img => img?.category))]?.length}\r\n                        </div>\r\n                        <div className=\"text-sm text-muted-foreground\">Categor√≠as</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-card border border-border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"Calendar\" size={20} className=\"text-purple-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-foreground\">\r\n                          {images?.length > 0 \r\n                            ? Math.ceil((new Date() - new Date(Math.min(...images.map(img => new Date(img?.timestamp))))) / (1000 * 60 * 60 * 24))\r\n                            : 0\r\n                          }\r\n                        </div>\r\n                        <div className=\"text-sm text-muted-foreground\">D√≠as de Documentaci√≥n</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-card border border-border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"TrendingUp\" size={20} className=\"text-orange-600\" />\r\n                      <div>\r\n                        <div className=\"text-2xl font-bold text-foreground\">\r\n                          {images?.filter(img => \r\n                            new Date(img?.timestamp) > new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)\r\n                          )?.length}\r\n                        </div>\r\n                        <div className=\"text-sm text-muted-foreground\">Esta Semana</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectDetailGallery;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\n\r\nconst ImageGallery = ({ images, selectedImages, onImageSelect, onImageClick, viewMode }) => {\r\n  const getCategoryColor = (category) => {\r\n    const colors = {\r\n      'material-reception': 'bg-blue-100 text-blue-800',\r\n      'manufacturing': 'bg-orange-100 text-orange-800',\r\n      'quality-control': 'bg-purple-100 text-purple-800',\r\n      'documentation': 'bg-green-100 text-green-800',\r\n      'installation': 'bg-indigo-100 text-indigo-800',\r\n      'testing': 'bg-yellow-100 text-yellow-800',\r\n      'training': 'bg-pink-100 text-pink-800',\r\n      'completion': 'bg-emerald-100 text-emerald-800',\r\n      'new-upload': 'bg-gray-100 text-gray-800'\r\n    };\r\n    return colors?.[category] || 'bg-gray-100 text-gray-800';\r\n  };\r\n\r\n  const getPhaseColor = (phase) => {\r\n    const colors = {\r\n      'planning': 'text-blue-600',\r\n      'in-progress': 'text-orange-600',\r\n      'completed': 'text-green-600',\r\n      'on-hold': 'text-yellow-600',\r\n      'cancelled': 'text-red-600'\r\n    };\r\n    return colors?.[phase] || 'text-gray-600';\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString)?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (viewMode === 'list') {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {images?.map((image) => (\r\n          <div \r\n            key={image?.id} \r\n            className=\"bg-card border border-border rounded-lg p-4 hover:shadow-md transition-smooth\"\r\n          >\r\n            <div className=\"flex items-start space-x-4\">\r\n              {/* Selection Checkbox */}\r\n              <div className=\"flex-shrink-0 pt-1\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedImages?.includes(image?.id)}\r\n                  onChange={() => onImageSelect(image?.id)}\r\n                  className=\"rounded border-border focus:ring-primary\"\r\n                />\r\n              </div>\r\n              \r\n              {/* Thumbnail */}\r\n              <div \r\n                className=\"flex-shrink-0 cursor-pointer\"\r\n                onClick={() => onImageClick(image)}\r\n              >\r\n                <img\r\n                  src={image?.thumbnail}\r\n                  alt={image?.title}\r\n                  className=\"w-24 h-18 object-cover rounded-lg border hover:shadow-lg transition-smooth\"\r\n                />\r\n              </div>\r\n              \r\n              {/* Image Details */}\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <h3 \r\n                      className=\"text-lg font-medium text-foreground cursor-pointer hover:text-primary truncate\"\r\n                      onClick={() => onImageClick(image)}\r\n                    >\r\n                      {image?.title}\r\n                    </h3>\r\n                    <p className=\"text-sm text-muted-foreground mt-1 line-clamp-2\">\r\n                      {image?.description}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-2 ml-4\">\r\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${getCategoryColor(image?.category)}`}>\r\n                      {image?.categoryLabel}\r\n                    </span>\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <Icon \r\n                        name=\"Circle\" \r\n                        size={12} \r\n                        className={`fill-current ${getPhaseColor(image?.phase)}`}\r\n                      />\r\n                      <span className={`text-xs ${getPhaseColor(image?.phase)}`}>\r\n                        {image?.phaseLabel}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mt-3 text-sm text-muted-foreground\">\r\n                  <div>\r\n                    <span className=\"block text-xs\">Fecha de Subida</span>\r\n                    <span className=\"text-foreground\">{formatDate(image?.uploadDate)}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"block text-xs\">Subido por</span>\r\n                    <span className=\"text-foreground\">{image?.uploader}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"block text-xs\">Tama√±o</span>\r\n                    <span className=\"text-foreground\">{image?.fileSize}</span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"block text-xs\">Dimensiones</span>\r\n                    <span className=\"text-foreground\">{image?.dimensions}</span>\r\n                  </div>\r\n                </div>\r\n                \r\n                {image?.tags && image?.tags?.length > 0 && (\r\n                  <div className=\"mt-3\">\r\n                    <div className=\"flex flex-wrap gap-1\">\r\n                      {image?.tags?.slice(0, 4)?.map((tag, index) => (\r\n                        <span \r\n                          key={index}\r\n                          className=\"px-2 py-1 bg-muted text-muted-foreground rounded text-xs\"\r\n                        >\r\n                          #{tag}\r\n                        </span>\r\n                      ))}\r\n                      {image?.tags?.length > 4 && (\r\n                        <span className=\"px-2 py-1 bg-muted text-muted-foreground rounded text-xs\">\r\n                          +{image?.tags?.length - 4} m√°s\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Grid/Masonry View\r\n  return (\r\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\r\n      {images?.map((image, index) => (\r\n        <div \r\n          key={image?.id} \r\n          className={`bg-card border border-border rounded-lg overflow-hidden hover:shadow-lg transition-smooth group ${\r\n            index % 7 === 0 ? 'md:col-span-2 md:row-span-2' : \r\n            index % 5 === 0 ? 'lg:col-span-2' : ''\r\n          }`}\r\n        >\r\n          {/* Selection Checkbox */}\r\n          <div className=\"absolute top-2 left-2 z-10\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={selectedImages?.includes(image?.id)}\r\n              onChange={() => onImageSelect(image?.id)}\r\n              className=\"rounded border-border bg-white/90 backdrop-blur-sm focus:ring-primary\"\r\n            />\r\n          </div>\r\n          \r\n          {/* Category Badge */}\r\n          <div className=\"absolute top-2 right-2 z-10\">\r\n            <span className={`px-2 py-1 rounded-full text-xs font-medium backdrop-blur-sm ${getCategoryColor(image?.category)}`}>\r\n              {image?.categoryLabel}\r\n            </span>\r\n          </div>\r\n          \r\n          {/* Image */}\r\n          <div \r\n            className=\"relative cursor-pointer overflow-hidden\"\r\n            onClick={() => onImageClick(image)}\r\n          >\r\n            <img\r\n              src={image?.thumbnail}\r\n              alt={image?.title}\r\n              className={`w-full object-cover transition-smooth group-hover:scale-105 ${\r\n                index % 7 === 0 ? 'h-64 md:h-96' : 'h-48'\r\n              }`}\r\n              loading=\"lazy\"\r\n            />\r\n            \r\n            {/* Hover Overlay */}\r\n            <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-smooth flex items-center justify-center\">\r\n              <div className=\"flex items-center space-x-2 text-white\">\r\n                <Icon name=\"Eye\" size={20} />\r\n                <span className=\"text-sm\">Ver imagen</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Image Info */}\r\n          <div className=\"p-3\">\r\n            <h3 className=\"font-medium text-foreground text-sm line-clamp-2 mb-1\">\r\n              {image?.title}\r\n            </h3>\r\n            \r\n            <div className=\"flex items-center justify-between text-xs text-muted-foreground mb-2\">\r\n              <span>{formatDate(image?.uploadDate)}</span>\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Icon \r\n                  name=\"Circle\" \r\n                  size={8} \r\n                  className={`fill-current ${getPhaseColor(image?.phase)}`}\r\n                />\r\n                <span className={getPhaseColor(image?.phase)}>\r\n                  {image?.phaseLabel}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            \r\n            <p className=\"text-xs text-muted-foreground line-clamp-2\">\r\n              {image?.description}\r\n            </p>\r\n            \r\n            {/* Image Meta */}\r\n            <div className=\"flex items-center justify-between mt-2 text-xs text-muted-foreground\">\r\n              <span>{image?.fileSize}</span>\r\n              <span>por {image?.uploader}</span>\r\n            </div>\r\n            \r\n            {/* Tags Preview */}\r\n            {image?.tags && image?.tags?.length > 0 && (\r\n              <div className=\"mt-2\">\r\n                <div className=\"flex flex-wrap gap-1\">\r\n                  {image?.tags?.slice(0, 2)?.map((tag, tagIndex) => (\r\n                    <span \r\n                      key={tagIndex}\r\n                      className=\"px-1 py-0.5 bg-muted text-muted-foreground rounded text-xs\"\r\n                    >\r\n                      #{tag}\r\n                    </span>\r\n                  ))}\r\n                  {image?.tags?.length > 2 && (\r\n                    <span className=\"px-1 py-0.5 bg-muted text-muted-foreground rounded text-xs\">\r\n                      +{image?.tags?.length - 2}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst FilterToolbar = ({ onFilterChange, totalImages, filteredImages, selectedCount, onSelectAll }) => {\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    category: '',\r\n    phase: '',\r\n    dateFrom: '',\r\n    dateTo: ''\r\n  });\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    const newFilters = { ...filters, [key]: value };\r\n    setFilters(newFilters);\r\n    onFilterChange(newFilters);\r\n  };\r\n\r\n  const clearFilters = () => {\r\n    const emptyFilters = {\r\n      search: '',\r\n      category: '',\r\n      phase: '',\r\n      dateFrom: '',\r\n      dateTo: ''\r\n    };\r\n    setFilters(emptyFilters);\r\n    onFilterChange(emptyFilters);\r\n  };\r\n\r\n  const categoryOptions = [\r\n    { value: '', label: 'Todas las categor√≠as' },\r\n    { value: 'material-reception', label: 'Recepci√≥n de Material' },\r\n    { value: 'manufacturing', label: 'Fabricaci√≥n' },\r\n    { value: 'quality-control', label: 'Control de Calidad' },\r\n    { value: 'documentation', label: 'Documentaci√≥n' },\r\n    { value: 'installation', label: 'Instalaci√≥n' },\r\n    { value: 'testing', label: 'Pruebas' },\r\n    { value: 'training', label: 'Capacitaci√≥n' },\r\n    { value: 'completion', label: 'Finalizaci√≥n' },\r\n    { value: 'new-upload', label: 'Nueva Imagen' }\r\n  ];\r\n\r\n  const phaseOptions = [\r\n    { value: '', label: 'Todas las fases' },\r\n    { value: 'planning', label: 'Planificaci√≥n' },\r\n    { value: 'in-progress', label: 'En Progreso' },\r\n    { value: 'completed', label: 'Completado' },\r\n    { value: 'on-hold', label: 'En Pausa' },\r\n    { value: 'cancelled', label: 'Cancelado' }\r\n  ];\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some(value => value !== '');\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-4 mb-6\">\r\n      {/* Main Filter Row */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\r\n        <div className=\"flex-1 flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4\">\r\n          {/* Search */}\r\n          <div className=\"flex-1\">\r\n            <div className=\"relative\">\r\n              <Icon name=\"Search\" size={16} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" />\r\n              <Input\r\n                type=\"text\"\r\n                placeholder=\"Buscar por t√≠tulo, descripci√≥n o etiquetas...\"\r\n                value={filters?.search}\r\n                onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Category Filter */}\r\n          <div className=\"min-w-48\">\r\n            <Select\r\n              value={filters?.category}\r\n              onValueChange={(value) => handleFilterChange('category', value)}\r\n              options={categoryOptions}\r\n            />\r\n          </div>\r\n          \r\n          {/* Phase Filter */}\r\n          <div className=\"min-w-40\">\r\n            <Select\r\n              value={filters?.phase}\r\n              onValueChange={(value) => handleFilterChange('phase', value)}\r\n              options={phaseOptions}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Filter\"\r\n            iconPosition=\"left\"\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n          >\r\n            Filtros {hasActiveFilters && `(${Object.values(filters)?.filter(v => v !== '')?.length})`}\r\n          </Button>\r\n          \r\n          {hasActiveFilters && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"X\"\r\n              iconPosition=\"left\"\r\n              onClick={clearFilters}\r\n            >\r\n              Limpiar\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Expanded Filters */}\r\n      {isExpanded && (\r\n        <div className=\"mt-4 pt-4 border-t border-border\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                Fecha desde\r\n              </label>\r\n              <Input\r\n                type=\"date\"\r\n                value={filters?.dateFrom}\r\n                onChange={(e) => handleFilterChange('dateFrom', e?.target?.value)}\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                Fecha hasta\r\n              </label>\r\n              <Input\r\n                type=\"date\"\r\n                value={filters?.dateTo}\r\n                onChange={(e) => handleFilterChange('dateTo', e?.target?.value)}\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                Filtros r√°pidos\r\n              </label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleFilterChange('dateFrom', new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)?.toISOString()?.split('T')?.[0])}\r\n                >\r\n                  √öltima semana\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleFilterChange('category', 'quality-control')}\r\n                >\r\n                  Control de calidad\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleFilterChange('phase', 'completed')}\r\n                >\r\n                  Completados\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Results Summary */}\r\n      <div className=\"mt-4 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0 text-sm text-muted-foreground\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <span>\r\n            Mostrando {filteredImages} de {totalImages} im√°genes\r\n          </span>\r\n          {selectedCount > 0 && (\r\n            <>\r\n              <span>‚Ä¢</span>\r\n              <span className=\"text-primary font-medium\">\r\n                {selectedCount} seleccionada{selectedCount !== 1 ? 's' : ''}\r\n              </span>\r\n            </>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onSelectAll}\r\n            iconName={selectedCount === filteredImages ? \"Square\" : \"CheckSquare\"}\r\n            iconPosition=\"left\"\r\n          >\r\n            {selectedCount === filteredImages ? 'Deseleccionar todo' : 'Seleccionar todo'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterToolbar;","import React, { useState, useEffect, useCallback } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ImageLightbox = ({ \r\n  isOpen, \r\n  onClose, \r\n  currentImage, \r\n  images, \r\n  onNavigate, \r\n  slideshowMode, \r\n  onToggleSlideshow \r\n}) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [zoomLevel, setZoomLevel] = useState(1);\r\n  const [panOffset, setPanOffset] = useState({ x: 0, y: 0 });\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n  const [showMetadata, setShowMetadata] = useState(false);\r\n  const [slideshowInterval, setSlideshowInterval] = useState(null);\r\n\r\n  // Find current image index\r\n  useEffect(() => {\r\n    if (currentImage && images?.length > 0) {\r\n      const index = images?.findIndex(img => img?.id === currentImage?.id);\r\n      if (index !== -1) {\r\n        setCurrentIndex(index);\r\n      }\r\n    }\r\n  }, [currentImage, images]);\r\n\r\n  // Slideshow functionality\r\n  useEffect(() => {\r\n    if (slideshowMode && isOpen) {\r\n      const interval = setInterval(() => {\r\n        handleNext();\r\n      }, 3000); // 3 seconds per image\r\n      setSlideshowInterval(interval);\r\n      \r\n      return () => {\r\n        clearInterval(interval);\r\n        setSlideshowInterval(null);\r\n      };\r\n    } else {\r\n      if (slideshowInterval) {\r\n        clearInterval(slideshowInterval);\r\n        setSlideshowInterval(null);\r\n      }\r\n    }\r\n  }, [slideshowMode, isOpen, currentIndex]);\r\n\r\n  // Keyboard navigation\r\n  const handleKeyDown = useCallback((e) => {\r\n    if (!isOpen) return;\r\n    \r\n    switch (e?.key) {\r\n      case 'Escape':\r\n        onClose();\r\n        break;\r\n      case 'ArrowLeft':\r\n        handlePrevious();\r\n        break;\r\n      case 'ArrowRight':\r\n        handleNext();\r\n        break;\r\n      case ' ':\r\n        e?.preventDefault();\r\n        onToggleSlideshow();\r\n        break;\r\n      case 'i':\r\n        setShowMetadata(!showMetadata);\r\n        break;\r\n      case '=': case'+':\r\n        e?.preventDefault();\r\n        handleZoomIn();\r\n        break;\r\n      case '-':\r\n        e?.preventDefault();\r\n        handleZoomOut();\r\n        break;\r\n      case '0':\r\n        handleZoomReset();\r\n        break;\r\n    }\r\n  }, [isOpen, showMetadata, onToggleSlideshow]);\r\n\r\n  useEffect(() => {\r\n    window?.addEventListener('keydown', handleKeyDown);\r\n    return () => window?.removeEventListener('keydown', handleKeyDown);\r\n  }, [handleKeyDown]);\r\n\r\n  // Navigation functions\r\n  const handleNext = () => {\r\n    if (images?.length === 0) return;\r\n    const nextIndex = (currentIndex + 1) % images?.length;\r\n    const nextImage = images?.[nextIndex];\r\n    setCurrentIndex(nextIndex);\r\n    onNavigate(nextImage);\r\n    resetZoom();\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    if (images?.length === 0) return;\r\n    const prevIndex = currentIndex === 0 ? images?.length - 1 : currentIndex - 1;\r\n    const prevImage = images?.[prevIndex];\r\n    setCurrentIndex(prevIndex);\r\n    onNavigate(prevImage);\r\n    resetZoom();\r\n  };\r\n\r\n  // Zoom functions\r\n  const handleZoomIn = () => {\r\n    setZoomLevel(prev => Math.min(prev * 1.2, 5));\r\n  };\r\n\r\n  const handleZoomOut = () => {\r\n    setZoomLevel(prev => Math.max(prev / 1.2, 0.5));\r\n  };\r\n\r\n  const resetZoom = () => {\r\n    setZoomLevel(1);\r\n    setPanOffset({ x: 0, y: 0 });\r\n  };\r\n\r\n  const handleZoomReset = () => {\r\n    resetZoom();\r\n  };\r\n\r\n  // Pan functions\r\n  const handleMouseDown = (e) => {\r\n    if (zoomLevel > 1) {\r\n      setIsDragging(true);\r\n      setDragStart({ x: e?.clientX - panOffset?.x, y: e?.clientY - panOffset?.y });\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (isDragging && zoomLevel > 1) {\r\n      setPanOffset({\r\n        x: e?.clientX - dragStart?.x,\r\n        y: e?.clientY - dragStart?.y\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setIsDragging(false);\r\n  };\r\n\r\n  // Download function\r\n  const handleDownload = async () => {\r\n    if (!currentImage) return;\r\n    \r\n    try {\r\n      const link = document.createElement('a');\r\n      link.href = currentImage?.url;\r\n      link.download = `${currentImage?.title || 'image'}.jpg`;\r\n      document.body?.appendChild(link);\r\n      link?.click();\r\n      document.body?.removeChild(link);\r\n    } catch (error) {\r\n      console.error('Error downloading image:', error);\r\n    }\r\n  };\r\n\r\n  // Format date function\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString)?.toLocaleDateString('es-MX', {\r\n      weekday: 'long',\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (!isOpen || !currentImage) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 bg-black/95 backdrop-blur-sm\">\r\n      {/* Header Bar */}\r\n      <div className=\"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent\">\r\n        <div className=\"flex items-center justify-between p-4\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"X\"\r\n              onClick={onClose}\r\n              className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n            />\r\n            <div className=\"text-white\">\r\n              <h3 className=\"font-medium\">{currentImage?.title}</h3>\r\n              <p className=\"text-sm text-white/80\">\r\n                {currentIndex + 1} de {images?.length} im√°genes\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Info\"\r\n              onClick={() => setShowMetadata(!showMetadata)}\r\n              className={`bg-white/10 border-white/20 text-white hover:bg-white/20 ${\r\n                showMetadata ? 'bg-white/20' : ''\r\n              }`}\r\n            />\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName={slideshowMode ? \"Pause\" : \"Play\"}\r\n              onClick={onToggleSlideshow}\r\n              className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n            />\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Download\"\r\n              onClick={handleDownload}\r\n              className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Image Area */}\r\n      <div \r\n        className=\"flex items-center justify-center h-full p-20\"\r\n        onMouseDown={handleMouseDown}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        onMouseLeave={handleMouseUp}\r\n      >\r\n        <img\r\n          src={currentImage?.url}\r\n          alt={currentImage?.title}\r\n          className={`max-w-full max-h-full object-contain transition-transform duration-200 ${\r\n            zoomLevel > 1 ? 'cursor-grab' : 'cursor-zoom-in'\r\n          } ${isDragging ? 'cursor-grabbing' : ''}`}\r\n          style={{\r\n            transform: `scale(${zoomLevel}) translate(${panOffset?.x / zoomLevel}px, ${panOffset?.y / zoomLevel}px)`\r\n          }}\r\n          onClick={() => zoomLevel === 1 && setZoomLevel(2)}\r\n          draggable={false}\r\n        />\r\n      </div>\r\n\r\n      {/* Navigation Arrows */}\r\n      <button\r\n        onClick={handlePrevious}\r\n        className=\"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 rounded-full p-3 text-white transition-smooth\"\r\n        disabled={images?.length <= 1}\r\n      >\r\n        <Icon name=\"ChevronLeft\" size={24} />\r\n      </button>\r\n\r\n      <button\r\n        onClick={handleNext}\r\n        className=\"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 rounded-full p-3 text-white transition-smooth\"\r\n        disabled={images?.length <= 1}\r\n      >\r\n        <Icon name=\"ChevronRight\" size={24} />\r\n      </button>\r\n\r\n      {/* Zoom Controls */}\r\n      <div className=\"absolute bottom-4 left-4 flex items-center space-x-2\">\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          iconName=\"Minus\"\r\n          onClick={handleZoomOut}\r\n          className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n          disabled={zoomLevel <= 0.5}\r\n        />\r\n        <span className=\"text-white text-sm px-3 py-1 bg-white/10 rounded\">\r\n          {Math.round(zoomLevel * 100)}%\r\n        </span>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          iconName=\"Plus\"\r\n          onClick={handleZoomIn}\r\n          className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n          disabled={zoomLevel >= 5}\r\n        />\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          iconName=\"RotateCcw\"\r\n          onClick={handleZoomReset}\r\n          className=\"bg-white/10 border-white/20 text-white hover:bg-white/20\"\r\n        />\r\n      </div>\r\n\r\n      {/* Image Counter */}\r\n      <div className=\"absolute bottom-4 right-4 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg px-4 py-2\">\r\n        <div className=\"flex items-center space-x-2 text-white text-sm\">\r\n          <Icon name=\"Image\" size={16} />\r\n          <span>{currentIndex + 1} / {images?.length}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Metadata Panel */}\r\n      {showMetadata && (\r\n        <div className=\"absolute top-20 right-4 bottom-4 w-80 bg-white/95 backdrop-blur-sm border border-white/20 rounded-lg p-4 overflow-y-auto\">\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <h4 className=\"font-semibold text-foreground mb-2\">Informaci√≥n de la Imagen</h4>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">T√≠tulo:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.title}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Categor√≠a:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.categoryLabel}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Fase:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.phaseLabel}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Descripci√≥n:</span>\r\n                  <p className=\"mt-1 text-foreground\">{currentImage?.description}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <h4 className=\"font-semibold text-foreground mb-2\">Detalles del Archivo</h4>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Tama√±o:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.fileSize}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Tipo:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.fileType}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Dimensiones:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.dimensions}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Subido por:</span>\r\n                  <span className=\"ml-2 text-foreground\">{currentImage?.uploader}</span>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-muted-foreground\">Fecha:</span>\r\n                  <span className=\"ml-2 text-foreground\">{formatDate(currentImage?.uploadDate)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {currentImage?.tags && currentImage?.tags?.length > 0 && (\r\n              <div>\r\n                <h4 className=\"font-semibold text-foreground mb-2\">Etiquetas</h4>\r\n                <div className=\"flex flex-wrap gap-1\">\r\n                  {currentImage?.tags?.map((tag, index) => (\r\n                    <span \r\n                      key={index}\r\n                      className=\"px-2 py-1 bg-muted text-muted-foreground rounded text-xs\"\r\n                    >\r\n                      #{tag}\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Slideshow Progress */}\r\n      {slideshowMode && (\r\n        <div className=\"absolute bottom-0 left-0 right-0 h-1 bg-white/20\">\r\n          <div \r\n            className=\"h-full bg-primary transition-all duration-3000 ease-linear\"\r\n            style={{ width: `${((currentIndex + 1) / images?.length) * 100}%` }}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Keyboard Shortcuts Help */}\r\n      <div className=\"absolute top-4 left-1/2 transform -translate-x-1/2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg px-3 py-1 text-white text-xs opacity-60\">\r\n        ESC: Cerrar | ‚Üê‚Üí: Navegar | Espacio: Presentaci√≥n | I: Info | +/-: Zoom\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageLightbox;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst BulkActions = ({ selectedCount, onBulkDownload, onBulkDelete, onClearSelection }) => {\r\n  return (\r\n    <div className=\"bg-primary/10 border border-primary/20 rounded-lg p-4 mb-6\">\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center\">\r\n            <Icon name=\"CheckSquare\" size={16} className=\"text-primary\" />\r\n          </div>\r\n          <div>\r\n            <span className=\"text-foreground font-medium\">\r\n              {selectedCount} imagen{selectedCount !== 1 ? 'es' : ''} seleccionada{selectedCount !== 1 ? 's' : ''}\r\n            </span>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Elija una acci√≥n para aplicar a las im√°genes seleccionadas\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-3\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n            onClick={onBulkDownload}\r\n          >\r\n            Descargar ({selectedCount})\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Share\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              // Share functionality could be implemented here\r\n              alert('Funci√≥n de compartir pr√≥ximamente disponible');\r\n            }}\r\n          >\r\n            Compartir\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Archive\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              // Archive functionality could be implemented here\r\n              alert('Funci√≥n de archivar pr√≥ximamente disponible');\r\n            }}\r\n          >\r\n            Archivar\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Trash2\"\r\n            iconPosition=\"left\"\r\n            onClick={onBulkDelete}\r\n            className=\"text-red-600 border-red-200 hover:bg-red-50 hover:border-red-300\"\r\n          >\r\n            Eliminar\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            iconName=\"X\"\r\n            iconPosition=\"left\"\r\n            onClick={onClearSelection}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Additional Bulk Actions */}\r\n      <div className=\"mt-4 pt-4 border-t border-border\">\r\n        <div className=\"flex flex-wrap gap-2 text-sm\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Tag\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              const newTag = prompt('Ingrese una nueva etiqueta para las im√°genes seleccionadas:');\r\n              if (newTag) {\r\n                console.log(`Agregando etiqueta \"${newTag}\" a ${selectedCount} im√°genes`);\r\n                // Tag functionality could be implemented here\r\n              }\r\n            }}\r\n          >\r\n            Agregar Etiqueta\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"FolderPlus\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              // Move to category functionality could be implemented here\r\n              alert('Funci√≥n de mover a categor√≠a pr√≥ximamente disponible');\r\n            }}\r\n          >\r\n            Mover a Categor√≠a\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Edit\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              // Batch edit functionality could be implemented here  \r\n              alert('Funci√≥n de edici√≥n en lote pr√≥ximamente disponible');\r\n            }}\r\n          >\r\n            Editar en Lote\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"FileText\"\r\n            iconPosition=\"left\"\r\n            onClick={() => {\r\n              // Generate report functionality could be implemented here\r\n              console.log(`Generando reporte para ${selectedCount} im√°genes seleccionadas`);\r\n              alert('Generando reporte de im√°genes seleccionadas...');\r\n            }}\r\n          >\r\n            Generar Reporte\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BulkActions;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst ProjectInfo = ({ project, imageCount }) => {\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 mb-6\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n        {/* Project Details */}\r\n        <div className=\"md:col-span-2\">\r\n          <div className=\"flex items-start space-x-4\">\r\n            <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center\">\r\n              <Icon name=\"Folder\" size={24} className=\"text-primary\" />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <h2 className=\"text-xl font-semibold text-foreground mb-1\">\r\n                {project?.name}\r\n              </h2>\r\n              <div className=\"flex items-center space-x-4 text-sm text-muted-foreground\">\r\n                <span className=\"flex items-center space-x-1\">\r\n                  <Icon name=\"Hash\" size={14} />\r\n                  <span>{project?.code}</span>\r\n                </span>\r\n                <span className=\"flex items-center space-x-1\">\r\n                  <Icon name=\"Building\" size={14} />\r\n                  <span>{project?.client}</span>\r\n                </span>\r\n                <span className=\"flex items-center space-x-1\">\r\n                  <Icon name=\"MapPin\" size={14} />\r\n                  <span>{project?.location}</span>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Image Statistics */}\r\n        <div className=\"flex items-center space-x-6\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-2xl font-bold text-primary mb-1\">\r\n              {imageCount}\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              Im√°genes totales\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"text-center\">\r\n            <div className=\"text-2xl font-bold text-green-600 mb-1\">\r\n              {Math.round(imageCount * 0.65)}\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              Documentadas\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"text-center\">\r\n            <div className=\"text-2xl font-bold text-orange-600 mb-1\">\r\n              {Math.round(imageCount * 0.25)}\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              En revisi√≥n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Project Status */}\r\n        <div className=\"flex items-center justify-end space-x-3\">\r\n          <div className=\"text-right\">\r\n            <div className=\"text-sm text-muted-foreground mb-1\">Estado del proyecto</div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"Activity\" size={16} className=\"text-green-600\" />\r\n              <span className=\"text-sm font-medium text-green-600\">\r\n                {project?.status}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"w-2 h-16 bg-green-600/20 rounded-full overflow-hidden\">\r\n            <div \r\n              className=\"w-full bg-green-600 rounded-full transition-all duration-500\"\r\n              style={{ height: '75%' }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Info Cards */}\r\n      <div className=\"mt-6 grid grid-cols-2 lg:grid-cols-6 gap-4\">\r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Package\" size={16} className=\"text-blue-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Materiales</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.15)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Cog\" size={16} className=\"text-orange-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Fabricaci√≥n</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.20)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Shield\" size={16} className=\"text-purple-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Calidad</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.18)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Wrench\" size={16} className=\"text-indigo-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Instalaci√≥n</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.22)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Pruebas</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.15)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-muted/50 rounded-lg p-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"FileCheck\" size={16} className=\"text-emerald-600\" />\r\n            <div>\r\n              <div className=\"text-xs text-muted-foreground\">Entrega</div>\r\n              <div className=\"font-medium text-foreground text-sm\">\r\n                {Math.round(imageCount * 0.10)} fotos\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectInfo;","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ImageGallery from './components/ImageGallery';\r\nimport FilterToolbar from './components/FilterToolbar';\r\nimport ImageLightbox from './components/ImageLightbox';\r\nimport BulkActions from './components/BulkActions';\r\nimport ProjectInfo from './components/ProjectInfo';\r\n\r\nconst ProjectGalleryViewer = () => {\r\n  const { projectId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n  const [images, setImages] = useState([]);\r\n  const [filteredImages, setFilteredImages] = useState([]);\r\n  const [selectedImages, setSelectedImages] = useState([]);\r\n  const [currentImage, setCurrentImage] = useState(null);\r\n  const [isLightboxOpen, setIsLightboxOpen] = useState(false);\r\n  const [isUploadingImages, setIsUploadingImages] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [viewMode, setViewMode] = useState('grid');\r\n  const [slideshowMode, setSlideshowMode] = useState(false);\r\n\r\n  // Sample project data\r\n  const project = {\r\n    id: projectId,\r\n    code: \"PROJ-2024-001\",\r\n    name: \"Instalaci√≥n HVAC Torre Corporativa\",\r\n    client: \"ABC Corporation\",\r\n    status: \"En Progreso\",\r\n    location: \"Ciudad de M√©xico, CDMX\"\r\n  };\r\n\r\n  // Sample images with project phases\r\n  const mockImages = [\r\n    {\r\n      id: \"img-1\",\r\n      url: \"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=300&h=200&fit=crop\",\r\n      title: \"Recepci√≥n de Materiales - Ductos HVAC\",\r\n      category: \"material-reception\",\r\n      categoryLabel: \"Recepci√≥n de Material\",\r\n      phase: \"planning\",\r\n      phaseLabel: \"Planificaci√≥n\",\r\n      uploadDate: \"2024-10-01T10:30:00Z\",\r\n      fileSize: \"2.4 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Carlos Mart√≠nez\",\r\n      description: \"Llegada de ductos principales para sistema HVAC\",\r\n      tags: [\"hvac\", \"ductos\", \"materiales\", \"recepci√≥n\"]\r\n    },\r\n    {\r\n      id: \"img-2\",\r\n      url: \"https://images.unsplash.com/photo-1584464491033-06628f3a6b7b?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1584464491033-06628f3a6b7b?w=300&h=200&fit=crop\",\r\n      title: \"Instalaci√≥n de Unidades Enfriadoras\",\r\n      category: \"manufacturing\",\r\n      categoryLabel: \"Fabricaci√≥n\",\r\n      phase: \"in-progress\",\r\n      phaseLabel: \"En Progreso\",\r\n      uploadDate: \"2024-10-02T14:20:00Z\",\r\n      fileSize: \"3.1 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Ana Rodr√≠guez\",\r\n      description: \"Proceso de instalaci√≥n de unidades enfriadoras en azotea\",\r\n      tags: [\"instalaci√≥n\", \"enfriadores\", \"azotea\", \"hvac\"]\r\n    },\r\n    {\r\n      id: \"img-3\",\r\n      url: \"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=300&h=200&fit=crop\",\r\n      title: \"Control de Calidad - Soldaduras\",\r\n      category: \"quality-control\",\r\n      categoryLabel: \"Control de Calidad\",\r\n      phase: \"in-progress\",\r\n      phaseLabel: \"En Progreso\",\r\n      uploadDate: \"2024-10-02T16:45:00Z\",\r\n      fileSize: \"1.8 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Luis Garc√≠a\",\r\n      description: \"Inspecci√≥n de soldaduras en conexiones principales\",\r\n      tags: [\"control-calidad\", \"soldaduras\", \"inspecci√≥n\", \"conexiones\"]\r\n    },\r\n    {\r\n      id: \"img-4\",\r\n      url: \"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1497366216548-37526070297c?w=300&h=200&fit=crop\",\r\n      title: \"Documentaci√≥n T√©cnica\",\r\n      category: \"documentation\",\r\n      categoryLabel: \"Documentaci√≥n\",\r\n      phase: \"completed\",\r\n      phaseLabel: \"Completado\",\r\n      uploadDate: \"2024-10-03T09:10:00Z\",\r\n      fileSize: \"0.9 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Carlos Mart√≠nez\",\r\n      description: \"Planos y especificaciones t√©cnicas actualizadas\",\r\n      tags: [\"documentaci√≥n\", \"planos\", \"especificaciones\", \"t√©cnico\"]\r\n    },\r\n    {\r\n      id: \"img-5\",\r\n      url: \"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=300&h=200&fit=crop\",\r\n      title: \"Instalaci√≥n Final - Sala de M√°quinas\",\r\n      category: \"installation\",\r\n      categoryLabel: \"Instalaci√≥n\",\r\n      phase: \"completed\",\r\n      phaseLabel: \"Completado\",\r\n      uploadDate: \"2024-10-03T11:30:00Z\",\r\n      fileSize: \"2.7 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Ana Rodr√≠guez\",\r\n      description: \"Vista final de la sala de m√°quinas completamente instalada\",\r\n      tags: [\"instalaci√≥n\", \"sala-m√°quinas\", \"completado\", \"final\"]\r\n    },\r\n    {\r\n      id: \"img-6\",\r\n      url: \"https://images.unsplash.com/photo-1581094794329-c8112a89af12?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1581094794329-c8112a89af12?w=300&h=200&fit=crop\",\r\n      title: \"Pruebas de Sistema - Operaci√≥n\",\r\n      category: \"testing\",\r\n      categoryLabel: \"Pruebas\",\r\n      phase: \"in-progress\",\r\n      phaseLabel: \"En Progreso\",\r\n      uploadDate: \"2024-10-03T13:45:00Z\",\r\n      fileSize: \"2.1 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Luis Garc√≠a\",\r\n      description: \"Realizaci√≥n de pruebas operativas del sistema HVAC\",\r\n      tags: [\"pruebas\", \"operaci√≥n\", \"sistema\", \"funcionamiento\"]\r\n    },\r\n    {\r\n      id: \"img-7\",\r\n      url: \"https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=300&h=200&fit=crop\",\r\n      title: \"Capacitaci√≥n del Personal\",\r\n      category: \"training\",\r\n      categoryLabel: \"Capacitaci√≥n\",\r\n      phase: \"completed\",\r\n      phaseLabel: \"Completado\",\r\n      uploadDate: \"2024-10-03T15:20:00Z\",\r\n      fileSize: \"1.5 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Carlos Mart√≠nez\",\r\n      description: \"Sesi√≥n de capacitaci√≥n para personal de mantenimiento\",\r\n      tags: [\"capacitaci√≥n\", \"personal\", \"mantenimiento\", \"entrenamiento\"]\r\n    },\r\n    {\r\n      id: \"img-8\",\r\n      url: \"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=800&h=600&fit=crop\",\r\n      thumbnail: \"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=300&h=200&fit=crop\",\r\n      title: \"Entrega Final del Proyecto\",\r\n      category: \"completion\",\r\n      categoryLabel: \"Finalizaci√≥n\",\r\n      phase: \"completed\",\r\n      phaseLabel: \"Completado\",\r\n      uploadDate: \"2024-10-03T17:00:00Z\",\r\n      fileSize: \"3.3 MB\",\r\n      fileType: \"image/jpeg\",\r\n      dimensions: \"1920x1080\",\r\n      uploader: \"Ana Rodr√≠guez\",\r\n      description: \"Acta de entrega firmada y sistema funcionando\",\r\n      tags: [\"entrega\", \"finalizaci√≥n\", \"acta\", \"completado\"]\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadImages = async () => {\r\n      setIsLoading(true);\r\n      await new Promise(resolve => setTimeout(resolve, 800));\r\n      setImages(mockImages);\r\n      setFilteredImages(mockImages);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    loadImages();\r\n  }, [projectId]);\r\n\r\n  const handleFilterChange = (filters) => {\r\n    let filtered = [...images];\r\n\r\n    if (filters?.search) {\r\n      const searchTerm = filters?.search?.toLowerCase();\r\n      filtered = filtered?.filter(img => \r\n        img?.title?.toLowerCase()?.includes(searchTerm) ||\r\n        img?.description?.toLowerCase()?.includes(searchTerm) ||\r\n        img?.tags?.some(tag => tag?.toLowerCase()?.includes(searchTerm))\r\n      );\r\n    }\r\n\r\n    if (filters?.category) {\r\n      filtered = filtered?.filter(img => img?.category === filters?.category);\r\n    }\r\n\r\n    if (filters?.phase) {\r\n      filtered = filtered?.filter(img => img?.phase === filters?.phase);\r\n    }\r\n\r\n    if (filters?.dateFrom) {\r\n      filtered = filtered?.filter(img => \r\n        new Date(img?.uploadDate) >= new Date(filters?.dateFrom)\r\n      );\r\n    }\r\n\r\n    if (filters?.dateTo) {\r\n      filtered = filtered?.filter(img => \r\n        new Date(img?.uploadDate) <= new Date(filters?.dateTo)\r\n      );\r\n    }\r\n\r\n    setFilteredImages(filtered);\r\n  };\r\n\r\n  const handleImageSelect = (imageId) => {\r\n    setSelectedImages(prev => \r\n      prev?.includes(imageId)\r\n        ? prev?.filter(id => id !== imageId)\r\n        : [...prev, imageId]\r\n    );\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedImages?.length === filteredImages?.length) {\r\n      setSelectedImages([]);\r\n    } else {\r\n      setSelectedImages(filteredImages?.map(img => img?.id));\r\n    }\r\n  };\r\n\r\n  const handleImageClick = (image) => {\r\n    setCurrentImage(image);\r\n    setIsLightboxOpen(true);\r\n  };\r\n\r\n  const handleImageUpload = async () => {\r\n    try {\r\n      setIsUploadingImages(true);\r\n      \r\n      const fileInput = document.createElement('input');\r\n      fileInput.type = 'file';\r\n      fileInput.accept = 'image/*';\r\n      fileInput.multiple = true;\r\n      \r\n      fileInput.onchange = async (event) => {\r\n        const files = Array.from(event?.target?.files || []);\r\n        \r\n        if (files?.length > 0) {\r\n          const newImages = [];\r\n          \r\n          for (const file of files) {\r\n            if (!file?.type?.startsWith('image/')) continue;\r\n            if (file?.size > 10 * 1024 * 1024) continue; // 10MB limit\r\n            \r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n              const newImage = {\r\n                id: `img-${Date.now()}-${Math.random()?.toString(36)?.substr(2, 9)}`,\r\n                url: e?.target?.result,\r\n                thumbnail: e?.target?.result,\r\n                title: file?.name?.replace(/\\.[^/.]+$/, \"\"),\r\n                category: \"new-upload\",\r\n                categoryLabel: \"Nueva Imagen\",\r\n                phase: \"in-progress\",\r\n                phaseLabel: \"En Progreso\",\r\n                uploadDate: new Date()?.toISOString(),\r\n                fileSize: `${(file?.size / 1024 / 1024)?.toFixed(1)} MB`,\r\n                fileType: file?.type,\r\n                dimensions: \"Unknown\",\r\n                uploader: \"Usuario Actual\",\r\n                description: `Imagen subida: ${file?.name}`,\r\n                tags: [\"nueva\", \"upload\", \"reciente\"]\r\n              };\r\n              \r\n              newImages?.push(newImage);\r\n              \r\n              if (newImages?.length === files?.length) {\r\n                setImages(prev => [...newImages, ...prev]);\r\n                setFilteredImages(prev => [...newImages, ...prev]);\r\n                console.log(`${files?.length} im√°genes cargadas exitosamente`);\r\n              }\r\n            };\r\n            \r\n            reader?.readAsDataURL(file);\r\n          }\r\n        }\r\n        \r\n        setIsUploadingImages(false);\r\n      };\r\n      \r\n      fileInput?.click();\r\n      \r\n    } catch (error) {\r\n      console.error('Error al subir im√°genes:', error);\r\n      setIsUploadingImages(false);\r\n    }\r\n  };\r\n\r\n  const handleBulkDownload = async () => {\r\n    if (selectedImages?.length === 0) return;\r\n    \r\n    try {\r\n      const selectedImageData = images?.filter(img => selectedImages?.includes(img?.id));\r\n      \r\n      for (const image of selectedImageData) {\r\n        const link = document.createElement('a');\r\n        link.href = image?.url;\r\n        link.download = `${image?.title || 'image'}.jpg`;\r\n        document.body?.appendChild(link);\r\n        link?.click();\r\n        document.body?.removeChild(link);\r\n        \r\n        // Add delay between downloads\r\n        await new Promise(resolve => setTimeout(resolve, 200));\r\n      }\r\n      \r\n      console.log(`${selectedImages?.length} im√°genes descargadas`);\r\n    } catch (error) {\r\n      console.error('Error al descargar im√°genes:', error);\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = () => {\r\n    if (selectedImages?.length === 0) return;\r\n    \r\n    const confirmed = window.confirm(\r\n      `¬øEst√° seguro de que desea eliminar ${selectedImages?.length} imagen(es) seleccionada(s)?\\n\\nEsta acci√≥n no se puede deshacer.`\r\n    );\r\n    \r\n    if (confirmed) {\r\n      setImages(prev => prev?.filter(img => !selectedImages?.includes(img?.id)));\r\n      setFilteredImages(prev => prev?.filter(img => !selectedImages?.includes(img?.id)));\r\n      setSelectedImages([]);\r\n      console.log(`${selectedImages?.length} im√°genes eliminadas`);\r\n    }\r\n  };\r\n\r\n  const startSlideshow = () => {\r\n    if (filteredImages?.length > 0) {\r\n      setSlideshowMode(true);\r\n      setCurrentImage(filteredImages?.[0]);\r\n      setIsLightboxOpen(true);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando galer√≠a del proyecto...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n      \r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n        \r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Header with Navigation */}\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  iconName=\"ArrowLeft\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => navigate('/proyectos')}\r\n                >\r\n                  Volver a Proyectos\r\n                </Button>\r\n                <div>\r\n                  <h1 className=\"text-2xl font-bold text-foreground\">Galer√≠a del Proyecto</h1>\r\n                  <p className=\"text-muted-foreground\">{project?.name} - {project?.code}</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-3\">\r\n                {/* View Mode Toggle */}\r\n                <div className=\"flex bg-muted rounded-lg p-1\">\r\n                  <button\r\n                    onClick={() => setViewMode('grid')}\r\n                    className={`px-3 py-2 rounded-md transition-smooth ${\r\n                      viewMode === 'grid' ?'bg-primary text-primary-foreground' :'text-muted-foreground hover:text-foreground'\r\n                    }`}\r\n                  >\r\n                    <Icon name=\"Grid3X3\" size={16} />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setViewMode('list')}\r\n                    className={`px-3 py-2 rounded-md transition-smooth ${\r\n                      viewMode === 'list' ?'bg-primary text-primary-foreground' :'text-muted-foreground hover:text-foreground'\r\n                    }`}\r\n                  >\r\n                    <Icon name=\"List\" size={16} />\r\n                  </button>\r\n                </div>\r\n\r\n                <Button\r\n                  onClick={startSlideshow}\r\n                  variant=\"outline\"\r\n                  iconName=\"Play\"\r\n                  iconPosition=\"left\"\r\n                >\r\n                  Presentaci√≥n\r\n                </Button>\r\n\r\n                <Button\r\n                  onClick={handleImageUpload}\r\n                  disabled={isUploadingImages}\r\n                  iconName={isUploadingImages ? \"Loader2\" : \"Upload\"}\r\n                  iconPosition=\"left\"\r\n                  className={isUploadingImages ? \"animate-spin\" : \"\"}\r\n                >\r\n                  {isUploadingImages ? 'Subiendo...' : 'Subir Im√°genes'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Project Info Panel */}\r\n            <ProjectInfo project={project} imageCount={filteredImages?.length} />\r\n\r\n            {/* Filter Toolbar */}\r\n            <FilterToolbar \r\n              onFilterChange={handleFilterChange}\r\n              totalImages={images?.length}\r\n              filteredImages={filteredImages?.length}\r\n              selectedCount={selectedImages?.length}\r\n              onSelectAll={handleSelectAll}\r\n            />\r\n\r\n            {/* Bulk Actions */}\r\n            {selectedImages?.length > 0 && (\r\n              <BulkActions\r\n                selectedCount={selectedImages?.length}\r\n                onBulkDownload={handleBulkDownload}\r\n                onBulkDelete={handleBulkDelete}\r\n                onClearSelection={() => setSelectedImages([])}\r\n              />\r\n            )}\r\n\r\n            {/* Main Gallery */}\r\n            <ImageGallery\r\n              images={filteredImages}\r\n              selectedImages={selectedImages}\r\n              onImageSelect={handleImageSelect}\r\n              onImageClick={handleImageClick}\r\n              viewMode={viewMode}\r\n            />\r\n\r\n            {/* Empty State */}\r\n            {filteredImages?.length === 0 && !isLoading && (\r\n              <div className=\"text-center py-16\">\r\n                <Icon name=\"Image\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n                  {images?.length === 0 ? 'No hay im√°genes en este proyecto' : 'No se encontraron im√°genes'}\r\n                </h3>\r\n                <p className=\"text-muted-foreground mb-6\">\r\n                  {images?.length === 0 \r\n                    ? 'Comience subiendo las primeras im√°genes del proyecto'\r\n                    : 'Intente ajustar los filtros para encontrar las im√°genes deseadas'\r\n                  }\r\n                </p>\r\n                <Button\r\n                  onClick={handleImageUpload}\r\n                  iconName=\"Upload\"\r\n                  iconPosition=\"left\"\r\n                >\r\n                  Subir Primera Imagen\r\n                </Button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Lightbox */}\r\n            <ImageLightbox\r\n              isOpen={isLightboxOpen}\r\n              onClose={() => {\r\n                setIsLightboxOpen(false);\r\n                setSlideshowMode(false);\r\n              }}\r\n              currentImage={currentImage}\r\n              images={filteredImages}\r\n              onNavigate={setCurrentImage}\r\n              slideshowMode={slideshowMode}\r\n              onToggleSlideshow={() => setSlideshowMode(!slideshowMode)}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectGalleryViewer;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst DocumentTree = ({ project, onDocumentUpload }) => {\r\n  const [expandedFolders, setExpandedFolders] = useState(['clientInfo', 'quotations']);\r\n  const [dragOver, setDragOver] = useState(null);\r\n\r\n  const documentFolders = [\r\n    {\r\n      id: 'clientInfo',\r\n      name: 'Informaci√≥n del Cliente',\r\n      icon: 'User',\r\n      color: 'blue',\r\n      description: 'Cat√°logos, planos, ubicaci√≥n de obra y requerimientos',\r\n      documents: project?.documents?.clientInfo || []\r\n    },\r\n    {\r\n      id: 'quotations',\r\n      name: 'Cotizaciones',\r\n      icon: 'Calculator',\r\n      color: 'green',\r\n      description: 'Cotizaciones iniciales, ajustadas y aprobadas',\r\n      documents: project?.documents?.quotations || []\r\n    },\r\n    {\r\n      id: 'contracts',\r\n      name: 'Contratos',\r\n      icon: 'FileText',\r\n      color: 'purple',\r\n      description: 'Contratos, t√©rminos y condiciones',\r\n      documents: project?.documents?.contracts || []\r\n    },\r\n    {\r\n      id: 'progressPhotos',\r\n      name: 'Fotos de Avance',\r\n      icon: 'Camera',\r\n      color: 'orange',\r\n      description: 'Documentaci√≥n fotogr√°fica del progreso',\r\n      documents: project?.documents?.progressPhotos || []\r\n    },\r\n    {\r\n      id: 'certifications',\r\n      name: 'Certificaciones',\r\n      icon: 'Award',\r\n      color: 'yellow',\r\n      description: 'Certificaciones de materiales y conformidad',\r\n      documents: project?.documents?.certifications || []\r\n    },\r\n    {\r\n      id: 'finalDocs',\r\n      name: 'Documentaci√≥n Final',\r\n      icon: 'FileCheck',\r\n      color: 'indigo',\r\n      description: 'Facturas, comprobantes y documentos de cierre',\r\n      documents: project?.documents?.finalDocs || []\r\n    }\r\n  ];\r\n\r\n  const toggleFolder = (folderId) => {\r\n    setExpandedFolders(prev =>\r\n      prev?.includes(folderId)\r\n        ? prev?.filter(id => id !== folderId)\r\n        : [...prev, folderId]\r\n    );\r\n  };\r\n\r\n  const handleDragOver = (e, folderId) => {\r\n    e?.preventDefault();\r\n    setDragOver(folderId);\r\n  };\r\n\r\n  const handleDragLeave = () => {\r\n    setDragOver(null);\r\n  };\r\n\r\n  const handleDrop = (e, folderId) => {\r\n    e?.preventDefault();\r\n    setDragOver(null);\r\n    \r\n    const files = Array.from(e?.dataTransfer?.files);\r\n    files?.forEach(file => {\r\n      const document = {\r\n        name: file?.name,\r\n        type: file?.type?.includes('image') ? 'image' : \r\n              file?.type?.includes('pdf') ? 'pdf' : \r\n              file?.type?.includes('excel') || file?.type?.includes('sheet') ? 'excel' : 'file',\r\n        size: `${(file?.size / (1024 * 1024))?.toFixed(1)} MB`,\r\n        uploaded: true,\r\n        uploadDate: new Date()?.toISOString()\r\n      };\r\n      onDocumentUpload(project?.id, folderId, document);\r\n    });\r\n  };\r\n\r\n  const getFileIcon = (type) => {\r\n    switch (type) {\r\n      case 'pdf': return 'FileText';\r\n      case 'excel': return 'Sheet';\r\n      case 'image': return 'Image';\r\n      case 'dwg': return 'PenTool';\r\n      default: return 'File';\r\n    }\r\n  };\r\n\r\n  const getFileTypeColor = (type) => {\r\n    switch (type) {\r\n      case 'pdf': return 'text-red-600';\r\n      case 'excel': return 'text-green-600';\r\n      case 'image': return 'text-blue-600';\r\n      case 'dwg': return 'text-purple-600';\r\n      default: return 'text-gray-600';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-foreground\">√Årbol de Documentos</h3>\r\n          <p className=\"text-muted-foreground text-sm\">\r\n            Organizaci√≥n estructurada con carpetas digitales\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Search\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Buscar\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Filter\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Filtrar\r\n          </Button>\r\n          <Button\r\n            size=\"sm\"\r\n            iconName=\"FolderPlus\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Nueva Carpeta\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div className=\"space-y-4\">\r\n        {documentFolders?.map((folder) => (\r\n          <div key={folder?.id} className=\"border border-border rounded-lg\">\r\n            {/* Folder Header */}\r\n            <div\r\n              className={`flex items-center justify-between p-4 cursor-pointer hover:bg-muted/50 transition-colors ${\r\n                dragOver === folder?.id ? 'bg-primary/10 border-primary' : ''\r\n              }`}\r\n              onClick={() => toggleFolder(folder?.id)}\r\n              onDragOver={(e) => handleDragOver(e, folder?.id)}\r\n              onDragLeave={handleDragLeave}\r\n              onDrop={(e) => handleDrop(e, folder?.id)}\r\n            >\r\n              <div className=\"flex items-center space-x-3\">\r\n                <button className=\"p-1\">\r\n                  <Icon\r\n                    name={expandedFolders?.includes(folder?.id) ? 'ChevronDown' : 'ChevronRight'}\r\n                    size={16}\r\n                    className=\"text-muted-foreground\"\r\n                  />\r\n                </button>\r\n                <div className={`p-2 rounded-lg bg-${folder?.color}-100`}>\r\n                  <Icon\r\n                    name={folder?.icon}\r\n                    size={18}\r\n                    className={`text-${folder?.color}-600`}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div className=\"font-medium text-foreground\">{folder?.name}</div>\r\n                  <div className=\"text-sm text-muted-foreground\">{folder?.description}</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {folder?.documents?.length} {folder?.documents?.length === 1 ? 'archivo' : 'archivos'}\r\n                </div>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  iconName=\"Upload\"\r\n                  iconPosition=\"left\"\r\n                  onClick={(e) => {\r\n                    e?.stopPropagation();\r\n                    // Trigger file upload\r\n                  }}\r\n                >\r\n                  Subir\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Folder Contents */}\r\n            {expandedFolders?.includes(folder?.id) && (\r\n              <div className=\"border-t border-border bg-muted/20\">\r\n                {folder?.documents?.length > 0 ? (\r\n                  <div className=\"p-4 space-y-2\">\r\n                    {folder?.documents?.map((doc, index) => (\r\n                      <div\r\n                        key={index}\r\n                        className=\"flex items-center justify-between p-3 bg-background rounded-lg border border-border hover:shadow-sm transition-shadow\"\r\n                      >\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <Icon\r\n                            name={getFileIcon(doc?.type)}\r\n                            size={16}\r\n                            className={getFileTypeColor(doc?.type)}\r\n                          />\r\n                          <div>\r\n                            <div className=\"font-medium text-sm\">{doc?.name}</div>\r\n                            <div className=\"text-xs text-muted-foreground flex items-center space-x-2\">\r\n                              <span>{doc?.size}</span>\r\n                              {doc?.count && <span>‚Ä¢ {doc?.count} fotos</span>}\r\n                              {doc?.uploaded && (\r\n                                <span className=\"flex items-center space-x-1 text-green-600\">\r\n                                  <Icon name=\"CheckCircle\" size={12} />\r\n                                  <span>Subido</span>\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            iconName=\"Eye\"\r\n                          />\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            iconName=\"Download\"\r\n                          />\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            iconName=\"MoreVertical\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"p-8 text-center\">\r\n                    <Icon\r\n                      name=\"Upload\"\r\n                      size={32}\r\n                      className=\"text-muted-foreground mx-auto mb-2\"\r\n                    />\r\n                    <p className=\"text-muted-foreground text-sm mb-2\">\r\n                      No hay documentos en esta carpeta\r\n                    </p>\r\n                    <p className=\"text-xs text-muted-foreground mb-4\">\r\n                      Arrastra archivos aqu√≠ o haz clic en \"Subir\"\r\n                    </p>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      iconName=\"Upload\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Subir Archivos\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {/* Bulk Actions */}\r\n      <div className=\"flex items-center justify-between mt-6 pt-6 border-t border-border\">\r\n        <div className=\"flex items-center space-x-4 text-sm text-muted-foreground\">\r\n          <span>Acciones en lote:</span>\r\n          <Button variant=\"ghost\" size=\"sm\" iconName=\"Download\">\r\n            Descargar Todo\r\n          </Button>\r\n          <Button variant=\"ghost\" size=\"sm\" iconName=\"Archive\">\r\n            Archivar\r\n          </Button>\r\n          <Button variant=\"ghost\" size=\"sm\" iconName=\"Share\">\r\n            Compartir\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\r\n          <Icon name=\"HardDrive\" size={16} />\r\n          <span>\r\n            {documentFolders?.reduce((total, folder) => total + folder?.documents?.length, 0)} archivos totales\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentTree;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst WorkflowStatus = ({ project, workflowSteps, currentStep, onStepUpdate }) => {\r\n  const [showDecisionModal, setShowDecisionModal] = useState(false);\r\n  const [decisionStep, setDecisionStep] = useState(null);\r\n\r\n  const decisionPoints = [\r\n    'catalog-check',\r\n    'quotation-validation', \r\n    'client-approval',\r\n    'payment-confirmation'\r\n  ];\r\n\r\n  const getStepStatus = (stepId) => {\r\n    const currentIndex = workflowSteps?.findIndex(step => step?.id === currentStep);\r\n    const stepIndex = workflowSteps?.findIndex(step => step?.id === stepId);\r\n    \r\n    if (stepIndex < currentIndex) return 'completed';\r\n    if (stepIndex === currentIndex) return 'current';\r\n    return 'pending';\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'completed': return 'text-green-600 bg-green-100';\r\n      case 'current': return 'text-blue-600 bg-blue-100';\r\n      case 'pending': return 'text-gray-400 bg-gray-100';\r\n      default: return 'text-gray-400 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const handleStepClick = (stepId) => {\r\n    if (decisionPoints?.includes(stepId)) {\r\n      setDecisionStep(stepId);\r\n      setShowDecisionModal(true);\r\n    } else {\r\n      onStepUpdate(project?.id, stepId);\r\n    }\r\n  };\r\n\r\n  const handleDecision = (decision) => {\r\n    if (decisionStep === 'catalog-check') {\r\n      // Si el cliente proporciona cat√°logo, ir a cotizaci√≥n desde cat√°logo\r\n      // Si no, ir a identificaci√≥n de materiales\r\n      const nextStep = decision ? 'quotation-dev' : 'material-identification';\r\n      onStepUpdate(project?.id, nextStep);\r\n    } else if (decisionStep === 'quotation-validation') {\r\n      // Si es validada, continuar; si no, ajustar\r\n      const nextStep = decision ? 'client-proposal' : 'quotation-dev';\r\n      onStepUpdate(project?.id, nextStep);\r\n    } else if (decisionStep === 'client-approval') {\r\n      // Si aprueba, b√∫squeda proveedores; si no, ajustes\r\n      const nextStep = decision ? 'provider-search' : 'quotation-dev';\r\n      onStepUpdate(project?.id, nextStep);\r\n    }\r\n    setShowDecisionModal(false);\r\n    setDecisionStep(null);\r\n  };\r\n\r\n  const getDecisionLabels = (stepId) => {\r\n    switch (stepId) {\r\n      case 'catalog-check':\r\n        return { yes: 'S√≠, tiene cat√°logo', no: 'No, usar planos' };\r\n      case 'quotation-validation':\r\n        return { yes: 'Validada', no: 'Requiere ajustes' };\r\n      case 'client-approval':\r\n        return { yes: 'Aprobada', no: 'Requiere cambios' };\r\n      case 'payment-confirmation':\r\n        return { yes: 'Pagos al d√≠a', no: 'Pagos pendientes' };\r\n      default:\r\n        return { yes: 'S√≠', no: 'No' };\r\n    }\r\n  };\r\n\r\n  const getStepNotes = (stepId) => {\r\n    switch (stepId) {\r\n      case 'client-info':\r\n        return 'Recibir cat√°logos, planos, ubicaci√≥n de obra o requerimientos del cliente';\r\n      case 'document-org':\r\n        return 'Crear carpetas digitales y organizar archivos manualmente';\r\n      case 'catalog-check':\r\n        return 'Punto de decisi√≥n: ¬øEl cliente proporciona cat√°logo?';\r\n      case 'quotation-dev':\r\n        return 'Incluir % instalaci√≥n, piezas, vi√°ticos, personal. Condiciones: 30% anticipo, 70% avance';\r\n      case 'quotation-validation':\r\n        return 'Validaci√≥n por Ventas/Mart√≠n antes de env√≠o';\r\n      case 'client-proposal':\r\n        return 'Env√≠o por correo o WhatsApp al cliente';\r\n      case 'client-approval':\r\n        return 'Esperar aprobaci√≥n del cliente o negociar ajustes';\r\n      case 'provider-search':\r\n        return 'Buscar proveedores en zona de obra o contactos conocidos';\r\n      case 'progress-control':\r\n        return 'Control de avances mediante fotograf√≠as con metadatos';\r\n      case 'payment-confirmation':\r\n        return 'Confirmar que no existan pagos pendientes';\r\n      case 'final-documentation':\r\n        return 'Para obras peque√±as: contrato, facturas, comprobantes, certificaciones';\r\n      case 'warranty-continuity':\r\n        return 'Gesti√≥n de garant√≠a seg√∫n tipo de proyecto';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Workflow Diagram */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground\">\r\n              Flujo de Actividades - √Årea de Proyectos\r\n            </h3>\r\n            <p className=\"text-muted-foreground text-sm\">\r\n              Desde Inicio ‚Üí Desarrollo ‚Üí Cierre\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"RotateCcw\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Reiniciar\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Download\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Exportar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Workflow Steps Grid */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {workflowSteps?.map((step, index) => {\r\n            const status = getStepStatus(step?.id);\r\n            const isDecisionPoint = decisionPoints?.includes(step?.id);\r\n            \r\n            return (\r\n              <div\r\n                key={step?.id}\r\n                onClick={() => handleStepClick(step?.id)}\r\n                className={`relative p-4 rounded-lg border-2 cursor-pointer transition-all ${\r\n                  status === 'current' ?'border-primary bg-primary/5 shadow-md' \r\n                    : status === 'completed' ?'border-green-300 bg-green-50' :'border-border bg-background hover:border-primary/50'\r\n                } ${isDecisionPoint ? 'border-yellow-300 bg-yellow-50' : ''}`}\r\n              >\r\n                {/* Step Number */}\r\n                <div className=\"absolute -top-2 -left-2 w-6 h-6 rounded-full bg-background border-2 border-current flex items-center justify-center text-xs font-bold\">\r\n                  {index + 1}\r\n                </div>\r\n\r\n                {/* Decision Diamond Indicator */}\r\n                {isDecisionPoint && (\r\n                  <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rotate-45 border border-yellow-500\"></div>\r\n                )}\r\n\r\n                {/* Step Content */}\r\n                <div className=\"flex items-start space-x-3\">\r\n                  <div className={`p-2 rounded-lg ${getStatusColor(status)}`}>\r\n                    <Icon\r\n                      name={step?.icon}\r\n                      size={18}\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"font-medium text-sm text-foreground mb-1\">\r\n                      {step?.label}\r\n                    </div>\r\n                    <div className=\"text-xs text-muted-foreground line-clamp-2\">\r\n                      {getStepNotes(step?.id)}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Status Indicator */}\r\n                <div className=\"flex items-center justify-between mt-3\">\r\n                  <div className={`text-xs px-2 py-1 rounded-full ${getStatusColor(status)}`}>\r\n                    {status === 'completed' && 'Completado'}\r\n                    {status === 'current' && 'Actual'}\r\n                    {status === 'pending' && 'Pendiente'}\r\n                  </div>\r\n                  \r\n                  {status === 'completed' && (\r\n                    <Icon name=\"CheckCircle\" size={14} className=\"text-green-600\" />\r\n                  )}\r\n                  {status === 'current' && (\r\n                    <Icon name=\"Play\" size={14} className=\"text-blue-600\" />\r\n                  )}\r\n                  {isDecisionPoint && (\r\n                    <Icon name=\"HelpCircle\" size={14} className=\"text-yellow-600\" />\r\n                  )}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Legend */}\r\n        <div className=\"flex items-center justify-center space-x-6 mt-6 pt-6 border-t border-border\">\r\n          <div className=\"flex items-center space-x-2 text-sm\">\r\n            <div className=\"w-4 h-4 rounded bg-background border-2 border-gray-400\"></div>\r\n            <span className=\"text-muted-foreground\">Inicio/Fin</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2 text-sm\">\r\n            <div className=\"w-4 h-4 rounded bg-blue-100 border-2 border-blue-400\"></div>\r\n            <span className=\"text-muted-foreground\">Actividad/Tarea</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2 text-sm\">\r\n            <div className=\"w-3 h-3 bg-yellow-400 rotate-45 border border-yellow-500\"></div>\r\n            <span className=\"text-muted-foreground\">Decisi√≥n clave</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2 text-sm\">\r\n            <Icon name=\"FileText\" size={16} className=\"text-orange-600\" />\r\n            <span className=\"text-muted-foreground\">Aclaraci√≥n/Pol√≠tica</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Current Step Details */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-4\">\r\n          <div className=\"p-3 rounded-lg bg-primary/10\">\r\n            <Icon\r\n              name={workflowSteps?.find(step => step?.id === currentStep)?.icon || 'Circle'}\r\n              size={24}\r\n              className=\"text-primary\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <h4 className=\"text-lg font-semibold text-foreground\">\r\n              {workflowSteps?.find(step => step?.id === currentStep)?.label}\r\n            </h4>\r\n            <p className=\"text-muted-foreground\">\r\n              {getStepNotes(currentStep)}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Step Actions */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            {decisionPoints?.includes(currentStep) ? (\r\n              <>\r\n                <Button\r\n                  variant=\"success\"\r\n                  size=\"sm\"\r\n                  iconName=\"CheckCircle\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => handleDecision(true)}\r\n                >\r\n                  {getDecisionLabels(currentStep)?.yes}\r\n                </Button>\r\n                <Button\r\n                  variant=\"warning\"\r\n                  size=\"sm\"\r\n                  iconName=\"XCircle\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => handleDecision(false)}\r\n                >\r\n                  {getDecisionLabels(currentStep)?.no}\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <Button\r\n                variant=\"success\"\r\n                size=\"sm\"\r\n                iconName=\"ArrowRight\"\r\n                iconPosition=\"right\"\r\n                onClick={() => {\r\n                  const currentIndex = workflowSteps?.findIndex(step => step?.id === currentStep);\r\n                  const nextStep = workflowSteps?.[currentIndex + 1];\r\n                  if (nextStep) {\r\n                    onStepUpdate(project?.id, nextStep?.id);\r\n                  }\r\n                }}\r\n              >\r\n                Completar Paso\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Paso {workflowSteps?.findIndex(step => step?.id === currentStep) + 1} de {workflowSteps?.length}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Project Timeline */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <h4 className=\"font-semibold text-foreground mb-4\">Cronolog√≠a del Proyecto</h4>\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center space-x-3 text-sm\">\r\n            <Icon name=\"Calendar\" size={16} className=\"text-blue-600\" />\r\n            <span className=\"text-muted-foreground\">Creado:</span>\r\n            <span className=\"font-medium\">{project?.createdDate}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-3 text-sm\">\r\n            <Icon name=\"Clock\" size={16} className=\"text-orange-600\" />\r\n            <span className=\"text-muted-foreground\">√öltima actualizaci√≥n:</span>\r\n            <span className=\"font-medium\">{project?.lastUpdated}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-3 text-sm\">\r\n            <Icon name=\"User\" size={16} className=\"text-green-600\" />\r\n            <span className=\"text-muted-foreground\">Cliente:</span>\r\n            <span className=\"font-medium\">{project?.client?.name}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Decision Modal */}\r\n      {showDecisionModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-card border border-border rounded-lg p-6 max-w-md w-full mx-4\">\r\n            <div className=\"flex items-center space-x-3 mb-4\">\r\n              <div className=\"p-2 rounded-lg bg-yellow-100\">\r\n                <Icon name=\"HelpCircle\" size={20} className=\"text-yellow-600\" />\r\n              </div>\r\n              <div>\r\n                <h4 className=\"font-semibold text-foreground\">Punto de Decisi√≥n</h4>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {workflowSteps?.find(step => step?.id === decisionStep)?.label}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <p className=\"text-muted-foreground mb-6\">\r\n              {getStepNotes(decisionStep)}\r\n            </p>\r\n\r\n            <div className=\"flex space-x-3\">\r\n              <Button\r\n                variant=\"success\"\r\n                className=\"flex-1\"\r\n                onClick={() => handleDecision(true)}\r\n              >\r\n                {getDecisionLabels(decisionStep)?.yes}\r\n              </Button>\r\n              <Button\r\n                variant=\"warning\"\r\n                className=\"flex-1\"\r\n                onClick={() => handleDecision(false)}\r\n              >\r\n                {getDecisionLabels(decisionStep)?.no}\r\n              </Button>\r\n            </div>\r\n\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className=\"w-full mt-3\"\r\n              onClick={() => setShowDecisionModal(false)}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkflowStatus;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst QuotationWorkflow = ({ project, onUpdate }) => {\r\n  const [quotationData, setQuotationData] = useState(project?.quotationData || {});\r\n  const [isEditing, setIsEditing] = useState(false);\r\n\r\n  const handleQuotationUpdate = (field, value) => {\r\n    setQuotationData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    const base = parseFloat(quotationData?.baseAmount || 0);\r\n    const installation = (base * (quotationData?.installationPercentage || 0)) / 100;\r\n    const travel = parseFloat(quotationData?.travel || 0);\r\n    const personnel = parseFloat(quotationData?.personnelCost || 0);\r\n    return base + installation + travel + personnel;\r\n  };\r\n\r\n  const saveQuotation = () => {\r\n    setIsEditing(false);\r\n    // Update project with new quotation data\r\n    onUpdate(project?.id, 'quotation-validation');\r\n  };\r\n\r\n  const sendQuotation = () => {\r\n    onUpdate(project?.id, 'client-proposal');\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Quotation Builder */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Constructor de Cotizaci√≥n</h3>\r\n            <p className=\"text-muted-foreground text-sm\">\r\n              {quotationData?.hasClientCatalog \r\n                ? 'Cotizaci√≥n basada en cat√°logo del cliente' :'Cotizaci√≥n basada en planos e identificaci√≥n de materiales'\r\n              }\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            {!isEditing ? (\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"Edit\"\r\n                iconPosition=\"left\"\r\n                onClick={() => setIsEditing(true)}\r\n              >\r\n                Editar\r\n              </Button>\r\n            ) : (\r\n              <div className=\"flex space-x-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => {\r\n                    setIsEditing(false);\r\n                    setQuotationData(project?.quotationData);\r\n                  }}\r\n                >\r\n                  Cancelar\r\n                </Button>\r\n                <Button\r\n                  size=\"sm\"\r\n                  iconName=\"Save\"\r\n                  iconPosition=\"left\"\r\n                  onClick={saveQuotation}\r\n                >\r\n                  Guardar\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quotation Form */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          {/* Left Column - Main Items */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                Materiales y Equipos\r\n              </label>\r\n              {isEditing ? (\r\n                <textarea\r\n                  className=\"w-full p-3 border border-border rounded-lg resize-none\"\r\n                  rows=\"3\"\r\n                  value={quotationData?.parts || ''}\r\n                  onChange={(e) => handleQuotationUpdate('parts', e?.target?.value)}\r\n                  placeholder=\"Descripci√≥n detallada de materiales...\"\r\n                />\r\n              ) : (\r\n                <div className=\"p-3 bg-muted rounded-lg\">\r\n                  {quotationData?.parts || 'Sin especificar'}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                  Monto Base\r\n                </label>\r\n                {isEditing ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={quotationData?.baseAmount || ''}\r\n                    onChange={(e) => handleQuotationUpdate('baseAmount', e?.target?.value)}\r\n                    placeholder=\"$0\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"p-3 bg-muted rounded-lg font-mono\">\r\n                    ${quotationData?.baseAmount?.toLocaleString() || '0'}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                  % Instalaci√≥n\r\n                </label>\r\n                {isEditing ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    value={quotationData?.installationPercentage || ''}\r\n                    onChange={(e) => handleQuotationUpdate('installationPercentage', e?.target?.value)}\r\n                    placeholder=\"30\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"p-3 bg-muted rounded-lg\">\r\n                    {quotationData?.installationPercentage || 0}%\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                  Vi√°ticos\r\n                </label>\r\n                {isEditing ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={quotationData?.travel || ''}\r\n                    onChange={(e) => handleQuotationUpdate('travel', e?.target?.value)}\r\n                    placeholder=\"$5000\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"p-3 bg-muted rounded-lg font-mono\">\r\n                    ${quotationData?.travel?.toLocaleString() || '0'}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                  Personal Estimado\r\n                </label>\r\n                {isEditing ? (\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={quotationData?.estimatedPersonnel || ''}\r\n                    onChange={(e) => handleQuotationUpdate('estimatedPersonnel', e?.target?.value)}\r\n                    placeholder=\"8\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"p-3 bg-muted rounded-lg\">\r\n                    {quotationData?.estimatedPersonnel || 0} personas\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Column - Conditions & Total */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <h4 className=\"font-medium text-foreground mb-3\">Condiciones de Pago</h4>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                    Anticipo (%)\r\n                  </label>\r\n                  {isEditing ? (\r\n                    <Input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      value={quotationData?.advancePayment || ''}\r\n                      onChange={(e) => handleQuotationUpdate('advancePayment', e?.target?.value)}\r\n                      placeholder=\"30\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"p-3 bg-green-50 border border-green-200 rounded-lg\">\r\n                      {quotationData?.advancePayment || 30}%\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                    Avance (%)\r\n                  </label>\r\n                  {isEditing ? (\r\n                    <Input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                      value={quotationData?.progressPayment || ''}\r\n                      onChange={(e) => handleQuotationUpdate('progressPayment', e?.target?.value)}\r\n                      placeholder=\"70\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                      {quotationData?.progressPayment || 70}%\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"text-sm font-medium text-foreground mb-2 block\">\r\n                Garant√≠a\r\n              </label>\r\n              {isEditing ? (\r\n                <Input\r\n                  type=\"text\"\r\n                  value={quotationData?.warranty || ''}\r\n                  onChange={(e) => handleQuotationUpdate('warranty', e?.target?.value)}\r\n                  placeholder=\"12 meses\"\r\n                />\r\n              ) : (\r\n                <div className=\"p-3 bg-muted rounded-lg\">\r\n                  {quotationData?.warranty || 'Sin especificar'}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Total Calculation */}\r\n            <div className=\"p-4 bg-primary/5 border border-primary/20 rounded-lg\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className=\"font-medium text-foreground\">Total de la Cotizaci√≥n</span>\r\n                <Icon name=\"Calculator\" size={16} className=\"text-primary\" />\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-primary font-mono\">\r\n                ${calculateTotal()?.toLocaleString()}\r\n              </div>\r\n              <div className=\"text-xs text-muted-foreground mt-1\">\r\n                Incluye instalaci√≥n, vi√°ticos y personal\r\n              </div>\r\n            </div>\r\n\r\n            {/* Validation Status */}\r\n            <div className=\"p-4 border rounded-lg\">\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <span className=\"font-medium text-foreground\">Estado de Validaci√≥n</span>\r\n                {quotationData?.validatedBy ? (\r\n                  <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                ) : (\r\n                  <Icon name=\"Clock\" size={16} className=\"text-yellow-600\" />\r\n                )}\r\n              </div>\r\n              {quotationData?.validatedBy ? (\r\n                <div className=\"text-sm\">\r\n                  <div className=\"text-green-600\">Validada por {quotationData?.validatedBy}</div>\r\n                  <div className=\"text-muted-foreground\">Lista para env√≠o al cliente</div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  Pendiente validaci√≥n por Ventas/Mart√≠n\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex items-center justify-between mt-6 pt-6 border-t border-border\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"FileText\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Generar PDF\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Download\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Exportar Excel\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-2\">\r\n            {quotationData?.validatedBy ? (\r\n              <>\r\n                <Button\r\n                  variant=\"success\"\r\n                  size=\"sm\"\r\n                  iconName=\"Mail\"\r\n                  iconPosition=\"left\"\r\n                  onClick={sendQuotation}\r\n                >\r\n                  Enviar por Correo\r\n                </Button>\r\n                <Button\r\n                  variant=\"success\"\r\n                  size=\"sm\"\r\n                  iconName=\"MessageCircle\"\r\n                  iconPosition=\"left\"\r\n                  onClick={sendQuotation}\r\n                >\r\n                  Enviar por WhatsApp\r\n                </Button>\r\n              </>\r\n            ) : (\r\n              <Button\r\n                variant=\"warning\"\r\n                size=\"sm\"\r\n                iconName=\"AlertTriangle\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Requiere Validaci√≥n\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Quotation History */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <h4 className=\"font-semibold text-foreground mb-4\">Historial de Cotizaciones</h4>\r\n        \r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between p-3 bg-muted/50 rounded-lg\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Icon name=\"FileText\" size={16} className=\"text-blue-600\" />\r\n              <div>\r\n                <div className=\"font-medium text-sm\">Cotizaci√≥n Inicial v1.0</div>\r\n                <div className=\"text-xs text-muted-foreground\">Creada: 15 Ene 2024</div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-sm font-mono\">$850,000</span>\r\n              <Button variant=\"ghost\" size=\"sm\" iconName=\"Eye\" />\r\n              <Button variant=\"ghost\" size=\"sm\" iconName=\"Download\" />\r\n            </div>\r\n          </div>\r\n\r\n          {quotationData?.clientApproved && (\r\n            <div className=\"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                <div>\r\n                  <div className=\"font-medium text-sm text-green-800\">Cotizaci√≥n Aprobada</div>\r\n                  <div className=\"text-xs text-green-600\">Aprobada por el cliente</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <span className=\"text-sm font-mono text-green-800\">${quotationData?.totalAmount?.toLocaleString()}</span>\r\n                <Icon name=\"ThumbsUp\" size={14} className=\"text-green-600\" />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationWorkflow;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\n\r\nconst ProgressTracking = ({ project, onPhotoUpload }) => {\r\n  const [selectedPhoto, setSelectedPhoto] = useState(null);\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n\r\n  const progressPhotos = project?.progressTracking?.photos || [];\r\n  const pendingPayments = project?.progressTracking?.pendingPayments || [];\r\n  const completedMilestones = project?.progressTracking?.completedMilestones || [];\r\n\r\n  const milestones = [\r\n    { id: 'site-preparation', label: 'Preparaci√≥n del Sitio', icon: 'MapPin' },\r\n    { id: 'equipment-delivery', label: 'Entrega de Equipos', icon: 'Truck' },\r\n    { id: 'installation-start', label: 'Inicio Instalaci√≥n', icon: 'Play' },\r\n    { id: 'system-testing', label: 'Pruebas del Sistema', icon: 'TestTube' },\r\n    { id: 'client-approval', label: 'Aprobaci√≥n Cliente', icon: 'ThumbsUp' },\r\n    { id: 'project-completion', label: 'Finalizaci√≥n Proyecto', icon: 'CheckCircle' }\r\n  ];\r\n\r\n  const handlePhotoUpload = () => {\r\n    setShowUploadModal(true);\r\n  };\r\n\r\n  const handlePhotoCapture = () => {\r\n    // Simulate photo capture with metadata\r\n    const newPhoto = {\r\n      id: Date.now(),\r\n      url: \"https://images.unsplash.com/photo-1541888946425-d81bb19240f5\",\r\n      timestamp: new Date()?.toLocaleString(),\r\n      location: \"√Årea de trabajo - Piso 1\",\r\n      description: \"Avance de instalaci√≥n\",\r\n      metadata: {\r\n        gps: \"19.4326, -99.1332\",\r\n        temperature: \"23¬∞C\",\r\n        humidity: \"65%\"\r\n      }\r\n    };\r\n    \r\n    onPhotoUpload(project?.id, 'progressPhotos', newPhoto);\r\n    setShowUploadModal(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Progress Photos Section */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Control de Avances</h3>\r\n            <p className=\"text-muted-foreground text-sm\">\r\n              Documentaci√≥n fotogr√°fica con metadatos de ubicaci√≥n y tiempo\r\n            </p>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Camera\"\r\n              iconPosition=\"left\"\r\n              onClick={handlePhotoUpload}\r\n            >\r\n              Tomar Foto\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Upload\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Subir Fotos\r\n            </Button>\r\n            <Button\r\n              size=\"sm\"\r\n              iconName=\"Download\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Exportar Reporte\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Photo Grid */}\r\n        {progressPhotos?.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6\">\r\n            {progressPhotos?.map((photo) => (\r\n              <div\r\n                key={photo?.id}\r\n                className=\"relative group cursor-pointer\"\r\n                onClick={() => setSelectedPhoto(photo)}\r\n              >\r\n                <div className=\"aspect-square bg-muted rounded-lg overflow-hidden\">\r\n                  <img\r\n                    src={photo?.url}\r\n                    alt={photo?.description}\r\n                    className=\"w-full h-full object-cover group-hover:scale-105 transition-transform\"\r\n                  />\r\n                </div>\r\n                \r\n                {/* Photo Overlay */}\r\n                <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors rounded-lg flex items-center justify-center\">\r\n                  <Icon\r\n                    name=\"ZoomIn\"\r\n                    size={24}\r\n                    className=\"text-white opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Photo Info */}\r\n                <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3 rounded-b-lg\">\r\n                  <div className=\"text-white text-sm font-medium\">\r\n                    {photo?.description}\r\n                  </div>\r\n                  <div className=\"text-white/80 text-xs flex items-center space-x-2 mt-1\">\r\n                    <Icon name=\"Clock\" size={12} />\r\n                    <span>{photo?.timestamp}</span>\r\n                    <Icon name=\"MapPin\" size={12} />\r\n                    <span>{photo?.location}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-12\">\r\n            <Icon name=\"Camera\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n            <h4 className=\"text-lg font-medium text-foreground mb-2\">No hay fotos de avance</h4>\r\n            <p className=\"text-muted-foreground mb-4\">\r\n              Comience a documentar el progreso del proyecto con fotograf√≠as\r\n            </p>\r\n            <Button\r\n              iconName=\"Camera\"\r\n              iconPosition=\"left\"\r\n              onClick={handlePhotoUpload}\r\n            >\r\n              Tomar Primera Foto\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Photo Analytics */}\r\n        {progressPhotos?.length > 0 && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 pt-6 border-t border-border\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-primary\">{progressPhotos?.length}</div>\r\n              <div className=\"text-sm text-muted-foreground\">Fotos Totales</div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-blue-600\">\r\n                {new Set(progressPhotos?.map(p => p?.location))?.size}\r\n              </div>\r\n              <div className=\"text-sm text-muted-foreground\">Ubicaciones</div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl font-bold text-green-600\">\r\n                {Math.floor((Date.now() - new Date(project?.createdDate)) / (1000 * 60 * 60 * 24))}\r\n              </div>\r\n              <div className=\"text-sm text-muted-foreground\">D√≠as de Trabajo</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Milestones Progress */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <h4 className=\"font-semibold text-foreground mb-4\">Hitos del Proyecto</h4>\r\n        \r\n        <div className=\"space-y-3\">\r\n          {milestones?.map((milestone) => {\r\n            const isCompleted = completedMilestones?.includes(milestone?.id);\r\n            return (\r\n              <div\r\n                key={milestone?.id}\r\n                className={`flex items-center justify-between p-3 rounded-lg border ${\r\n                  isCompleted \r\n                    ? 'bg-green-50 border-green-200' :'bg-background border-border'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`p-2 rounded-lg ${\r\n                    isCompleted ? 'bg-green-100' : 'bg-muted'\r\n                  }`}>\r\n                    <Icon\r\n                      name={milestone?.icon}\r\n                      size={16}\r\n                      className={isCompleted ? 'text-green-600' : 'text-muted-foreground'}\r\n                    />\r\n                  </div>\r\n                  <span className={`font-medium ${\r\n                    isCompleted ? 'text-green-800' : 'text-foreground'\r\n                  }`}>\r\n                    {milestone?.label}\r\n                  </span>\r\n                </div>\r\n\r\n                {isCompleted ? (\r\n                  <Icon name=\"CheckCircle\" size={20} className=\"text-green-600\" />\r\n                ) : (\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    iconName=\"Check\"\r\n                  >\r\n                    Marcar Completo\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n      {/* Payment Status */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <h4 className=\"font-semibold text-foreground mb-4\">Estado de Pagos</h4>\r\n        \r\n        {pendingPayments?.length > 0 ? (\r\n          <div className=\"space-y-3\">\r\n            {pendingPayments?.map((payment, index) => (\r\n              <div\r\n                key={index}\r\n                className=\"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg\"\r\n              >\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <Icon name=\"AlertTriangle\" size={16} className=\"text-yellow-600\" />\r\n                  <div>\r\n                    <div className=\"font-medium text-yellow-800\">\r\n                      Pago Pendiente: {payment?.description}\r\n                    </div>\r\n                    <div className=\"text-sm text-yellow-600\">\r\n                      Vencimiento: {payment?.dueDate}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className=\"font-mono font-medium text-yellow-800\">\r\n                    ${payment?.amount?.toLocaleString()}\r\n                  </div>\r\n                  <Button\r\n                    variant=\"warning\"\r\n                    size=\"sm\"\r\n                    iconName=\"CreditCard\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Confirmar Pago\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex items-center justify-center py-8\">\r\n            <div className=\"text-center\">\r\n              <Icon name=\"CheckCircle\" size={48} className=\"text-green-600 mx-auto mb-3\" />\r\n              <h4 className=\"font-medium text-green-800 mb-2\">Pagos al D√≠a</h4>\r\n              <p className=\"text-green-600 text-sm\">\r\n                No hay pagos pendientes para este proyecto\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Photo Upload Modal */}\r\n      {showUploadModal && (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-card border border-border rounded-lg p-6 max-w-md w-full mx-4\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h4 className=\"font-semibold text-foreground\">Documentar Avance</h4>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                iconName=\"X\"\r\n                onClick={() => setShowUploadModal(false)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div className=\"text-center py-8 border-2 border-dashed border-border rounded-lg\">\r\n                <Icon name=\"Camera\" size={48} className=\"text-muted-foreground mx-auto mb-3\" />\r\n                <p className=\"text-muted-foreground mb-4\">\r\n                  Capture el progreso del trabajo\r\n                </p>\r\n                <Button\r\n                  iconName=\"Camera\"\r\n                  iconPosition=\"left\"\r\n                  onClick={handlePhotoCapture}\r\n                >\r\n                  Tomar Foto\r\n                </Button>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <Input\r\n                  label=\"Descripci√≥n\"\r\n                  placeholder=\"Descripci√≥n del avance...\"\r\n                />\r\n                <Input\r\n                  label=\"Ubicaci√≥n\"\r\n                  placeholder=\"√Årea espec√≠fica del trabajo...\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"text-xs text-muted-foreground\">\r\n                <div className=\"flex items-center space-x-2 mb-1\">\r\n                  <Icon name=\"MapPin\" size={12} />\r\n                  <span>GPS: Se capturar√° autom√°ticamente</span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"Clock\" size={12} />\r\n                  <span>Timestamp: {new Date()?.toLocaleString()}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Photo Detail Modal */}\r\n      {selectedPhoto && (\r\n        <div className=\"fixed inset-0 bg-black/90 flex items-center justify-center z-50\">\r\n          <div className=\"max-w-4xl max-h-full p-4\">\r\n            <div className=\"relative\">\r\n              <img\r\n                src={selectedPhoto?.url}\r\n                alt={selectedPhoto?.description}\r\n                className=\"max-w-full max-h-[80vh] rounded-lg\"\r\n              />\r\n              \r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                iconName=\"X\"\r\n                className=\"absolute top-2 right-2 bg-black/50 text-white hover:bg-black/70\"\r\n                onClick={() => setSelectedPhoto(null)}\r\n              />\r\n\r\n              {/* Photo Info */}\r\n              <div className=\"absolute bottom-0 left-0 right-0 bg-black/70 text-white p-4 rounded-b-lg\">\r\n                <div className=\"font-medium mb-2\">{selectedPhoto?.description}</div>\r\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                  <div>\r\n                    <Icon name=\"Clock\" size={14} className=\"inline mr-1\" />\r\n                    {selectedPhoto?.timestamp}\r\n                  </div>\r\n                  <div>\r\n                    <Icon name=\"MapPin\" size={14} className=\"inline mr-1\" />\r\n                    {selectedPhoto?.location}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressTracking;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst DocumentValidation = ({ project, onValidationComplete }) => {\r\n  const [checklist, setChecklist] = useState({\r\n    clientContract: false,\r\n    invoices: false,\r\n    receipts: false,\r\n    materialCertifications: false,\r\n    workPhotos: false,\r\n    clientApproval: false,\r\n    warrantyDocs: false,\r\n    finalPayment: false\r\n  });\r\n\r\n  const validationItems = [\r\n    {\r\n      id: 'clientContract',\r\n      label: 'Contrato con Cliente',\r\n      description: 'Contrato firmado y t√©rminos acordados',\r\n      category: 'legal',\r\n      required: true,\r\n      icon: 'FileText'\r\n    },\r\n    {\r\n      id: 'invoices',\r\n      label: 'Facturas Completas',\r\n      description: 'Todas las facturas emitidas y validadas',\r\n      category: 'financial',\r\n      required: true,\r\n      icon: 'Receipt'\r\n    },\r\n    {\r\n      id: 'receipts',\r\n      label: 'Comprobantes de Pago',\r\n      description: 'Evidencias de pagos recibidos',\r\n      category: 'financial',\r\n      required: true,\r\n      icon: 'CreditCard'\r\n    },\r\n    {\r\n      id: 'materialCertifications',\r\n      label: 'Certificaciones de Material',\r\n      description: 'Certificados de calidad y conformidad',\r\n      category: 'quality',\r\n      required: true,\r\n      icon: 'Award'\r\n    },\r\n    {\r\n      id: 'workPhotos',\r\n      label: 'Fotograf√≠as de Trabajo',\r\n      description: 'Documentaci√≥n fotogr√°fica completa',\r\n      category: 'documentation',\r\n      required: true,\r\n      icon: 'Camera'\r\n    },\r\n    {\r\n      id: 'clientApproval',\r\n      label: 'Aprobaci√≥n Final del Cliente',\r\n      description: 'Confirmaci√≥n escrita de satisfacci√≥n',\r\n      category: 'approval',\r\n      required: true,\r\n      icon: 'ThumbsUp'\r\n    },\r\n    {\r\n      id: 'warrantyDocs',\r\n      label: 'Documentos de Garant√≠a',\r\n      description: 'T√©rminos y condiciones de garant√≠a',\r\n      category: 'warranty',\r\n      required: false,\r\n      icon: 'Shield'\r\n    },\r\n    {\r\n      id: 'finalPayment',\r\n      label: 'Pago Final Confirmado',\r\n      description: 'Liquidaci√≥n completa del proyecto',\r\n      category: 'financial',\r\n      required: true,\r\n      icon: 'DollarSign'\r\n    }\r\n  ];\r\n\r\n  const categories = [\r\n    { id: 'legal', label: 'Documentos Legales', color: 'purple', icon: 'Scale' },\r\n    { id: 'financial', label: 'Documentos Financieros', color: 'green', icon: 'DollarSign' },\r\n    { id: 'quality', label: 'Control de Calidad', color: 'blue', icon: 'CheckCircle' },\r\n    { id: 'documentation', label: 'Documentaci√≥n', color: 'orange', icon: 'FileImage' },\r\n    { id: 'approval', label: 'Aprobaciones', color: 'yellow', icon: 'UserCheck' },\r\n    { id: 'warranty', label: 'Garant√≠as', color: 'indigo', icon: 'Shield' }\r\n  ];\r\n\r\n  const handleChecklistChange = (itemId, checked) => {\r\n    setChecklist(prev => ({ ...prev, [itemId]: checked }));\r\n  };\r\n\r\n  const getCompletionStats = () => {\r\n    const total = validationItems?.length;\r\n    const required = validationItems?.filter(item => item?.required)?.length;\r\n    const completed = Object.values(checklist)?.filter(Boolean)?.length;\r\n    const requiredCompleted = validationItems?.filter(item => \r\n      item?.required && checklist?.[item?.id]\r\n    )?.length;\r\n\r\n    return { total, required, completed, requiredCompleted };\r\n  };\r\n\r\n  const stats = getCompletionStats();\r\n  const isProjectReady = stats?.requiredCompleted === stats?.required;\r\n\r\n  const generateFinalPackage = () => {\r\n    // Simulate final documentation package generation\r\n    onValidationComplete(project?.id, 'warranty-continuity');\r\n  };\r\n\r\n  const getCategoryIcon = (categoryId) => {\r\n    return categories?.find(cat => cat?.id === categoryId)?.icon || 'File';\r\n  };\r\n\r\n  const getCategoryColor = (categoryId) => {\r\n    return categories?.find(cat => cat?.id === categoryId)?.color || 'gray';\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Validation Overview */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground\">\r\n              Validaci√≥n de Documentaci√≥n Final\r\n            </h3>\r\n            <p className=\"text-muted-foreground text-sm\">\r\n              Checklist para obras peque√±as - Verificaci√≥n antes del cierre\r\n            </p>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <div className=\"text-2xl font-bold text-primary\">\r\n              {Math.round((stats?.completed / stats?.total) * 100)}%\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\">Completado</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Progress Bar */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"text-sm font-medium\">Progreso de Validaci√≥n</span>\r\n            <span className=\"text-sm text-muted-foreground\">\r\n              {stats?.completed}/{stats?.total} elementos\r\n            </span>\r\n          </div>\r\n          <div className=\"w-full bg-muted rounded-full h-3\">\r\n            <div \r\n              className=\"bg-primary h-3 rounded-full transition-all duration-500\"\r\n              style={{ width: `${(stats?.completed / stats?.total) * 100}%` }}\r\n            />\r\n          </div>\r\n          <div className=\"flex items-center justify-between mt-2 text-xs text-muted-foreground\">\r\n            <span>Requeridos: {stats?.requiredCompleted}/{stats?.required}</span>\r\n            <span>Opcionales: {stats?.completed - stats?.requiredCompleted}/{stats?.total - stats?.required}</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status Alert */}\r\n        {isProjectReady ? (\r\n          <div className=\"flex items-center space-x-3 p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n            <Icon name=\"CheckCircle\" size={20} className=\"text-green-600\" />\r\n            <div className=\"flex-1\">\r\n              <div className=\"font-medium text-green-800\">Proyecto Listo para Cierre</div>\r\n              <div className=\"text-sm text-green-600\">\r\n                Todos los documentos requeridos est√°n completos\r\n              </div>\r\n            </div>\r\n            <Button\r\n              variant=\"success\"\r\n              iconName=\"Package\"\r\n              iconPosition=\"left\"\r\n              onClick={generateFinalPackage}\r\n            >\r\n              Generar Paquete Final\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex items-center space-x-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n            <Icon name=\"AlertTriangle\" size={20} className=\"text-yellow-600\" />\r\n            <div className=\"flex-1\">\r\n              <div className=\"font-medium text-yellow-800\">Documentos Pendientes</div>\r\n              <div className=\"text-sm text-yellow-600\">\r\n                {stats?.required - stats?.requiredCompleted} documentos requeridos faltantes\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Validation Checklist by Category */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        {categories?.map((category) => {\r\n          const categoryItems = validationItems?.filter(item => item?.category === category?.id);\r\n          const categoryCompleted = categoryItems?.filter(item => checklist?.[item?.id])?.length;\r\n          \r\n          return (\r\n            <div key={category?.id} className=\"bg-card border border-border rounded-lg p-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`p-2 rounded-lg bg-${category?.color}-100`}>\r\n                    <Icon\r\n                      name={category?.icon}\r\n                      size={18}\r\n                      className={`text-${category?.color}-600`}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <h4 className=\"font-medium text-foreground\">{category?.label}</h4>\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      {categoryCompleted}/{categoryItems?.length} completados\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className=\"text-sm font-medium\">\r\n                    {Math.round((categoryCompleted / categoryItems?.length) * 100)}%\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-3\">\r\n                {categoryItems?.map((item) => (\r\n                  <div\r\n                    key={item?.id}\r\n                    className={`flex items-center justify-between p-3 rounded-lg border ${\r\n                      checklist?.[item?.id] \r\n                        ? 'bg-green-50 border-green-200' :'bg-background border-border'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <button\r\n                        onClick={() => handleChecklistChange(item?.id, !checklist?.[item?.id])}\r\n                        className={`w-5 h-5 rounded border-2 flex items-center justify-center ${\r\n                          checklist?.[item?.id]\r\n                            ? 'bg-green-600 border-green-600' :'border-border hover:border-primary'\r\n                        }`}\r\n                      >\r\n                        {checklist?.[item?.id] && (\r\n                          <Icon name=\"Check\" size={12} className=\"text-white\" />\r\n                        )}\r\n                      </button>\r\n\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon\r\n                          name={item?.icon}\r\n                          size={14}\r\n                          className={checklist?.[item?.id] ? 'text-green-600' : 'text-muted-foreground'}\r\n                        />\r\n                        <div>\r\n                          <div className={`text-sm font-medium ${\r\n                            checklist?.[item?.id] ? 'text-green-800' : 'text-foreground'\r\n                          }`}>\r\n                            {item?.label}\r\n                            {item?.required && (\r\n                              <span className=\"text-red-500 ml-1\">*</span>\r\n                            )}\r\n                          </div>\r\n                          <div className={`text-xs ${\r\n                            checklist?.[item?.id] ? 'text-green-600' : 'text-muted-foreground'\r\n                          }`}>\r\n                            {item?.description}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      {checklist?.[item?.id] ? (\r\n                        <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                      ) : item?.required ? (\r\n                        <Icon name=\"AlertCircle\" size={16} className=\"text-red-500\" />\r\n                      ) : (\r\n                        <Icon name=\"Circle\" size={16} className=\"text-muted-foreground\" />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      {/* Missing Documents Alert */}\r\n      {!isProjectReady && (\r\n        <div className=\"bg-card border border-border rounded-lg p-6\">\r\n          <div className=\"flex items-center space-x-3 mb-4\">\r\n            <Icon name=\"AlertTriangle\" size={20} className=\"text-red-500\" />\r\n            <h4 className=\"font-semibold text-foreground\">Documentos Faltantes</h4>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            {validationItems\r\n              ?.filter(item => item?.required && !checklist?.[item?.id])\r\n              ?.map((item) => (\r\n                <div key={item?.id} className=\"flex items-center space-x-3 p-2 bg-red-50 rounded-lg\">\r\n                  <Icon name={item?.icon} size={14} className=\"text-red-500\" />\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"text-sm font-medium text-red-800\">{item?.label}</div>\r\n                    <div className=\"text-xs text-red-600\">{item?.description}</div>\r\n                  </div>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    iconName=\"Upload\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Subir\r\n                  </Button>\r\n                </div>\r\n              ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Final Documentation Package */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <h4 className=\"font-semibold text-foreground mb-4\">Paquete de Documentaci√≥n Final</h4>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div className=\"space-y-3\">\r\n            <h5 className=\"font-medium text-foreground\">Incluye:</h5>\r\n            <ul className=\"space-y-2 text-sm\">\r\n              <li className=\"flex items-center space-x-2\">\r\n                <Icon name=\"FileText\" size={14} className=\"text-blue-600\" />\r\n                <span>Contrato firmado</span>\r\n              </li>\r\n              <li className=\"flex items-center space-x-2\">\r\n                <Icon name=\"Receipt\" size={14} className=\"text-green-600\" />\r\n                <span>Facturas y comprobantes</span>\r\n              </li>\r\n              <li className=\"flex items-center space-x-2\">\r\n                <Icon name=\"Award\" size={14} className=\"text-purple-600\" />\r\n                <span>Certificaciones de material</span>\r\n              </li>\r\n              <li className=\"flex items-center space-x-2\">\r\n                <Icon name=\"Camera\" size={14} className=\"text-orange-600\" />\r\n                <span>Reporte fotogr√°fico</span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"space-y-3\">\r\n            <h5 className=\"font-medium text-foreground\">Formatos disponibles:</h5>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\">PDF</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Archive\">ZIP</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Mail\">Email</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Cloud\">Cloud</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {isProjectReady && (\r\n          <div className=\"mt-6 pt-6 border-t border-border\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"text-sm text-muted-foreground\">\r\n                El paquete final ser√° generado autom√°ticamente una vez que se complete la validaci√≥n.\r\n              </div>\r\n              <Button\r\n                variant=\"success\"\r\n                iconName=\"Download\"\r\n                iconPosition=\"left\"\r\n                onClick={generateFinalPackage}\r\n              >\r\n                Generar y Descargar\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentValidation;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport DocumentTree from './components/DocumentTree';\r\nimport WorkflowStatus from './components/WorkflowStatus';\r\nimport QuotationWorkflow from './components/QuotationWorkflow';\r\nimport ProgressTracking from './components/ProgressTracking';\r\nimport DocumentValidation from './components/DocumentValidation';\r\nimport Input from '../../components/ui/Input';\r\n\r\n\r\n\r\nconst ProjectDocumentationCenter = () => {\r\n  const [projects, setProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [activeView, setActiveView] = useState('workflow');\r\n  const [workflowStep, setWorkflowStep] = useState('client-info');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Mock project data following the workflow diagram\r\n  const mockProjects = [\r\n    {\r\n      id: \"1\",\r\n      code: \"PROJ-2024-001\",\r\n      name: \"Instalaci√≥n HVAC Torre Corporativa\",\r\n      client: {\r\n        name: \"ABC Corporation\",\r\n        contact: \"contacto@abccorp.com\",\r\n        phone: \"+52 55 1234 5678\",\r\n        address: \"Av. Reforma 123, Ciudad de M√©xico\"\r\n      },\r\n      workflowStep: \"quotation-validation\",\r\n      status: \"in-progress\",\r\n      statusLabel: \"En Proceso\",\r\n      createdDate: \"2024-01-15\",\r\n      lastUpdated: \"2024-01-20\",\r\n      documents: {\r\n        clientInfo: [\r\n          { name: \"Cat√°logo Cliente\", type: \"pdf\", size: \"2.5 MB\", uploaded: true },\r\n          { name: \"Planos de Obra\", type: \"dwg\", size: \"8.2 MB\", uploaded: true },\r\n          { name: \"Ubicaci√≥n\", type: \"pdf\", size: \"1.1 MB\", uploaded: true }\r\n        ],\r\n        quotations: [\r\n          { name: \"Cotizaci√≥n Inicial\", type: \"excel\", size: \"1.8 MB\", uploaded: true },\r\n          { name: \"Cotizaci√≥n Ajustada\", type: \"excel\", size: \"1.9 MB\", uploaded: false }\r\n        ],\r\n        contracts: [\r\n          { name: \"Contrato Principal\", type: \"pdf\", size: \"3.2 MB\", uploaded: false }\r\n        ],\r\n        progressPhotos: [\r\n          { name: \"Avance Semana 1\", type: \"image\", size: \"12.5 MB\", uploaded: true, count: 15 },\r\n          { name: \"Avance Semana 2\", type: \"image\", size: \"8.3 MB\", uploaded: true, count: 10 }\r\n        ],\r\n        certifications: [],\r\n        finalDocs: []\r\n      },\r\n      quotationData: {\r\n        hasClientCatalog: true,\r\n        installationPercentage: 30,\r\n        parts: \"Equipos HVAC industriales\",\r\n        travel: 5000,\r\n        estimatedPersonnel: 8,\r\n        advancePayment: 30,\r\n        progressPayment: 70,\r\n        warranty: \"12 meses\",\r\n        totalAmount: 850000,\r\n        validatedBy: null,\r\n        clientApproved: false\r\n      },\r\n      progressTracking: {\r\n        photos: [\r\n          { id: 1, url: \"https://images.unsplash.com/photo-1581094794329-c8112a89af12\", \r\n            timestamp: \"2024-01-18 14:30\", location: \"Planta Baja - √Årea Norte\", description: \"Instalaci√≥n ductos principales\" },\r\n          { id: 2, url: \"https://images.unsplash.com/photo-1541888946425-d81bb19240f5\", \r\n            timestamp: \"2024-01-19 10:15\", location: \"Piso 2 - Oficinas\", description: \"Montaje unidades manejadoras\" }\r\n        ],\r\n        pendingPayments: [],\r\n        completedMilestones: ['site-preparation', 'equipment-delivery']\r\n      }\r\n    },\r\n    {\r\n      id: \"2\",\r\n      code: \"PROJ-2024-002\",\r\n      name: \"Sistema Residencial Polanco\",\r\n      client: {\r\n        name: \"Residencial Los Pinos\",\r\n        contact: \"admin@lospinos.mx\",\r\n        phone: \"+52 55 9876 5432\",\r\n        address: \"Polanco, Ciudad de M√©xico\"\r\n      },\r\n      workflowStep: \"provider-search\",\r\n      status: \"quotation-approved\",\r\n      statusLabel: \"Cotizaci√≥n Aprobada\",\r\n      createdDate: \"2024-02-01\",\r\n      lastUpdated: \"2024-02-05\",\r\n      documents: {\r\n        clientInfo: [\r\n          { name: \"Requerimientos\", type: \"pdf\", size: \"1.2 MB\", uploaded: true }\r\n        ],\r\n        quotations: [\r\n          { name: \"Cotizaci√≥n Aprobada\", type: \"excel\", size: \"2.1 MB\", uploaded: true }\r\n        ],\r\n        contracts: [],\r\n        progressPhotos: [],\r\n        certifications: [],\r\n        finalDocs: []\r\n      },\r\n      quotationData: {\r\n        hasClientCatalog: false,\r\n        installationPercentage: 25,\r\n        parts: \"Sistemas residenciales centrales\",\r\n        travel: 2500,\r\n        estimatedPersonnel: 4,\r\n        advancePayment: 30,\r\n        progressPayment: 70,\r\n        warranty: \"24 meses\",\r\n        totalAmount: 320000,\r\n        validatedBy: \"Martin Rodriguez\",\r\n        clientApproved: true\r\n      },\r\n      progressTracking: {\r\n        photos: [],\r\n        pendingPayments: [],\r\n        completedMilestones: ['quotation-approved', 'client-approval']\r\n      }\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadProjects = async () => {\r\n      setIsLoading(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      setProjects(mockProjects);\r\n      setSelectedProject(mockProjects?.[0]);\r\n      setIsLoading(false);\r\n    };\r\n    loadProjects();\r\n  }, []);\r\n\r\n  const workflowSteps = [\r\n    { id: 'client-info', label: 'Recepci√≥n Informaci√≥n Cliente', icon: 'FileInput', color: 'blue' },\r\n    { id: 'document-org', label: 'Organizaci√≥n Documentos', icon: 'FolderOrganize', color: 'orange' },\r\n    { id: 'catalog-check', label: '¬øCliente da Cat√°logo?', icon: 'HelpCircle', color: 'yellow' },\r\n    { id: 'quotation-dev', label: 'Elaborar Cotizaci√≥n', icon: 'Calculator', color: 'green' },\r\n    { id: 'quotation-validation', label: 'Validaci√≥n Cotizaci√≥n', icon: 'CheckSquare', color: 'purple' },\r\n    { id: 'client-proposal', label: 'Env√≠o Propuesta', icon: 'Send', color: 'blue' },\r\n    { id: 'client-approval', label: 'Aprobaci√≥n Cliente', icon: 'ThumbsUp', color: 'green' },\r\n    { id: 'provider-search', label: 'B√∫squeda Proveedores', icon: 'Search', color: 'orange' },\r\n    { id: 'progress-control', label: 'Control de Avances', icon: 'Camera', color: 'blue' },\r\n    { id: 'payment-confirmation', label: 'Confirmaci√≥n Pagos', icon: 'CreditCard', color: 'green' },\r\n    { id: 'final-documentation', label: 'Documentaci√≥n Final', icon: 'FileCheck', color: 'purple' },\r\n    { id: 'warranty-continuity', label: 'Continuidad Garant√≠a', icon: 'Shield', color: 'blue' }\r\n  ];\r\n\r\n  const viewOptions = [\r\n    { value: 'workflow', label: 'Flujo de Trabajo', icon: 'GitBranch' },\r\n    { value: 'documents', label: 'Documentos', icon: 'FolderOpen' },\r\n    { value: 'quotation', label: 'Cotizaci√≥n', icon: 'Calculator' },\r\n    { value: 'progress', label: 'Avances', icon: 'Camera' },\r\n    { value: 'validation', label: 'Validaci√≥n', icon: 'CheckCircle' }\r\n  ];\r\n\r\n  const filteredProjects = projects?.filter(project =>\r\n    project?.name?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||\r\n    project?.code?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||\r\n    project?.client?.name?.toLowerCase()?.includes(searchTerm?.toLowerCase())\r\n  );\r\n\r\n  const handleProjectSelect = (project) => {\r\n    setSelectedProject(project);\r\n    setWorkflowStep(project?.workflowStep);\r\n  };\r\n\r\n  const handleWorkflowStepUpdate = (projectId, newStep) => {\r\n    setProjects(prev => prev?.map(project =>\r\n      project?.id === projectId\r\n        ? { ...project, workflowStep: newStep, lastUpdated: new Date()?.toISOString()?.split('T')?.[0] }\r\n        : project\r\n    ));\r\n    if (selectedProject?.id === projectId) {\r\n      setSelectedProject(prev => ({ ...prev, workflowStep: newStep }));\r\n      setWorkflowStep(newStep);\r\n    }\r\n  };\r\n\r\n  const handleDocumentUpload = (projectId, category, document) => {\r\n    setProjects(prev => prev?.map(project =>\r\n      project?.id === projectId\r\n        ? {\r\n            ...project,\r\n            documents: {\r\n              ...project?.documents,\r\n              [category]: [...(project?.documents?.[category] || []), document]\r\n            }\r\n          }\r\n        : project\r\n    ));\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <div className=\"flex items-center justify-center h-96\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n            <p className=\"text-muted-foreground\">Cargando centro de documentaci√≥n...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        {/* Breadcrumb */}\r\n        <div className=\"mb-6\">\r\n          <Breadcrumb />\r\n        </div>\r\n\r\n        {/* Header */}\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-foreground mb-2\">\r\n              Centro de Documentaci√≥n de Proyectos\r\n            </h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Gesti√≥n centralizada del flujo completo de documentaci√≥n seg√∫n diagrama de actividades\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n            {/* View Toggle */}\r\n            <div className=\"flex bg-muted rounded-lg p-1\">\r\n              {viewOptions?.map((option) => (\r\n                <button\r\n                  key={option?.value}\r\n                  onClick={() => setActiveView(option?.value)}\r\n                  className={`flex items-center space-x-2 px-3 py-2 rounded-md transition-colors ${\r\n                    activeView === option?.value\r\n                      ? 'bg-primary text-primary-foreground'\r\n                      : 'text-muted-foreground hover:text-foreground'\r\n                  }`}\r\n                >\r\n                  <Icon name={option?.icon} size={16} />\r\n                  <span className=\"hidden sm:inline text-sm\">{option?.label}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            <Button\r\n              iconName=\"Upload\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Subir Documentos\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n          {/* Project List Sidebar */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-card border border-border rounded-lg p-4\">\r\n              <div className=\"mb-4\">\r\n                <div className=\"relative\">\r\n                  <Input\r\n                    type=\"search\"\r\n                    placeholder=\"Buscar proyectos...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e?.target?.value)}\r\n                    className=\"pl-10\"\r\n                  />\r\n                  <Icon \r\n                    name=\"Search\" \r\n                    size={16} \r\n                    className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                {filteredProjects?.map((project) => (\r\n                  <div\r\n                    key={project?.id}\r\n                    onClick={() => handleProjectSelect(project)}\r\n                    className={`p-3 rounded-lg border cursor-pointer transition-colors ${\r\n                      selectedProject?.id === project?.id\r\n                        ? 'bg-primary/10 border-primary text-primary' :'bg-background border-border hover:bg-muted'\r\n                    }`}\r\n                  >\r\n                    <div className=\"font-medium text-sm mb-1\">{project?.name}</div>\r\n                    <div className=\"text-xs text-muted-foreground mb-2\">{project?.code}</div>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <span className={`text-xs px-2 py-1 rounded-full ${{\r\n                        'in-progress': 'bg-blue-100 text-blue-800',\r\n                        'quotation-approved': 'bg-green-100 text-green-800',\r\n                        'pending': 'bg-yellow-100 text-yellow-800',\r\n                        'completed': 'bg-gray-100 text-gray-800'\r\n                      }?.[project?.status] || 'bg-gray-100 text-gray-800'}`}>\r\n                        {project?.statusLabel}\r\n                      </span>\r\n                      <Icon name=\"ChevronRight\" size={12} />\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Content Area */}\r\n          <div className=\"lg:col-span-3\">\r\n            {selectedProject && (\r\n              <>\r\n                {/* Project Header */}\r\n                <div className=\"bg-card border border-border rounded-lg p-6 mb-6\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <div>\r\n                      <h2 className=\"text-xl font-semibold text-foreground\">{selectedProject?.name}</h2>\r\n                      <p className=\"text-muted-foreground\">{selectedProject?.code}</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <div className=\"text-sm text-muted-foreground\">Cliente</div>\r\n                      <div className=\"font-medium\">{selectedProject?.client?.name}</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Workflow Progress Bar */}\r\n                  <div className=\"mb-4\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <span className=\"text-sm font-medium\">Progreso del Flujo</span>\r\n                      <span className=\"text-sm text-muted-foreground\">\r\n                        {Math.round((workflowSteps?.findIndex(step => step?.id === workflowStep) + 1) / workflowSteps?.length * 100)}%\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"w-full bg-muted rounded-full h-2\">\r\n                      <div \r\n                        className=\"bg-primary h-2 rounded-full transition-all duration-500\"\r\n                        style={{ \r\n                          width: `${(workflowSteps?.findIndex(step => step?.id === workflowStep) + 1) / workflowSteps?.length * 100}%` \r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Current Step */}\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon \r\n                      name={workflowSteps?.find(step => step?.id === workflowStep)?.icon || 'Circle'} \r\n                      size={16} \r\n                      className=\"text-primary\" \r\n                    />\r\n                    <span className=\"font-medium\">\r\n                      Paso Actual: {workflowSteps?.find(step => step?.id === workflowStep)?.label}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Dynamic Content Based on Active View */}\r\n                {activeView === 'workflow' && (\r\n                  <WorkflowStatus\r\n                    project={selectedProject}\r\n                    workflowSteps={workflowSteps}\r\n                    currentStep={workflowStep}\r\n                    onStepUpdate={handleWorkflowStepUpdate}\r\n                  />\r\n                )}\r\n\r\n                {activeView === 'documents' && (\r\n                  <DocumentTree\r\n                    project={selectedProject}\r\n                    onDocumentUpload={handleDocumentUpload}\r\n                  />\r\n                )}\r\n\r\n                {activeView === 'quotation' && (\r\n                  <QuotationWorkflow\r\n                    project={selectedProject}\r\n                    onUpdate={handleWorkflowStepUpdate}\r\n                  />\r\n                )}\r\n\r\n                {activeView === 'progress' && (\r\n                  <ProgressTracking\r\n                    project={selectedProject}\r\n                    onPhotoUpload={handleDocumentUpload}\r\n                  />\r\n                )}\r\n\r\n                {activeView === 'validation' && (\r\n                  <DocumentValidation\r\n                    project={selectedProject}\r\n                    onValidationComplete={handleWorkflowStepUpdate}\r\n                  />\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {/* Empty State */}\r\n            {!selectedProject && (\r\n              <div className=\"text-center py-12\">\r\n                <Icon name=\"FolderOpen\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-foreground mb-2\">Selecciona un proyecto</h3>\r\n                <p className=\"text-muted-foreground\">\r\n                  Elige un proyecto de la lista para ver su documentaci√≥n y flujo de trabajo\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectDocumentationCenter;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\n\r\nconst ProjectCard = ({ project, onSelect, onStageTransition }) => {\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'border-l-red-600 bg-red-50';\r\n      case 'high': return 'border-l-orange-500 bg-orange-50';\r\n      case 'medium': return 'border-l-yellow-500 bg-yellow-50';\r\n      case 'low': return 'border-l-green-500 bg-green-50';\r\n      default: return 'border-l-gray-400 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getPriorityLabel = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'Urgente';\r\n      case 'high': return 'Alta';\r\n      case 'medium': return 'Media';\r\n      case 'low': return 'Baja';\r\n      default: return 'Normal';\r\n    }\r\n  };\r\n\r\n  const getPriorityBadgeColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'bg-red-100 text-red-800';\r\n      case 'high': return 'bg-orange-100 text-orange-800';\r\n      case 'medium': return 'bg-yellow-100 text-yellow-800';\r\n      case 'low': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`p-4 rounded-lg border-l-4 hover:shadow-md transition-all cursor-pointer ${getPriorityColor(project?.priority)}`}\r\n      onClick={() => onSelect?.(project)}\r\n    >\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <h4 className=\"font-medium text-foreground line-clamp-2 flex-1 mr-2\">\r\n          {project?.name}\r\n        </h4>\r\n        <span className={`text-xs px-2 py-1 rounded-full whitespace-nowrap ${getPriorityBadgeColor(project?.priority)}`}>\r\n          {getPriorityLabel(project?.priority)}\r\n        </span>\r\n      </div>\r\n      \r\n      <div className=\"space-y-2 mb-3\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Icon name=\"Building\" size={14} className=\"text-muted-foreground\" />\r\n          <span className=\"text-sm text-muted-foreground\">{project?.client}</span>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          <Icon name=\"Hash\" size={14} className=\"text-muted-foreground\" />\r\n          <span className=\"text-sm text-muted-foreground\">{project?.code}</span>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          <Icon name=\"Users\" size={14} className=\"text-muted-foreground\" />\r\n          <span className=\"text-sm text-muted-foreground\">\r\n            {project?.assignedPersonnel?.slice(0, 2)?.join(', ')}\r\n            {project?.assignedPersonnel?.length > 2 && ` +${project?.assignedPersonnel?.length - 2}`}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <div className=\"flex items-center space-x-1\">\r\n          <Icon name=\"Calendar\" size={14} className=\"text-muted-foreground\" />\r\n          <span className=\"text-sm text-muted-foreground\">\r\n            {new Date(project?.deadline)?.toLocaleDateString('es-MX')}\r\n          </span>\r\n        </div>\r\n        <div className=\"text-sm font-medium text-foreground\">\r\n          {project?.progress}%\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"w-full bg-gray-200 rounded-full h-2 mb-3\">\r\n        <div \r\n          className=\"bg-primary h-2 rounded-full transition-all\"\r\n          style={{ width: `${project?.progress}%` }}\r\n        ></div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        {project?.hasClientCatalog && (\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Icon name=\"FileCheck\" size={14} className=\"text-green-600\" />\r\n            <span className=\"text-xs text-green-600\">Cat√°logo cliente</span>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"flex items-center space-x-1\">\r\n          <Icon name=\"DollarSign\" size={14} className=\"text-muted-foreground\" />\r\n          <span className=\"text-sm text-muted-foreground\">\r\n            ${project?.budget?.toLocaleString('es-MX')}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {project?.notes && (\r\n        <div className=\"mt-3 p-2 bg-blue-50 rounded text-xs text-blue-800\">\r\n          <Icon name=\"Info\" size={12} className=\"inline mr-1\" />\r\n          {project?.notes}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectCard;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst DocumentUploadPanel = ({ project, onUpload }) => {\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [documentType, setDocumentType] = useState('');\r\n\r\n  const documentTypes = [\r\n    { value: 'catalog', label: 'Cat√°logo Cliente', icon: 'Book' },\r\n    { value: 'plan', label: 'Planos de Obra', icon: 'FileText' },\r\n    { value: 'requirement', label: 'Requerimientos', icon: 'CheckSquare' },\r\n    { value: 'location', label: 'Ubicaci√≥n de Obra', icon: 'MapPin' },\r\n    { value: 'contract', label: 'Contrato', icon: 'FileSignature' },\r\n    { value: 'certification', label: 'Certificaci√≥n', icon: 'Award' }\r\n  ];\r\n\r\n  const handleFileSelect = (event) => {\r\n    const file = event?.target?.files?.[0];\r\n    if (file) {\r\n      setSelectedFile(file);\r\n    }\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!selectedFile || !documentType) return;\r\n\r\n    setIsUploading(true);\r\n    \r\n    // Simulate upload\r\n    await new Promise(resolve => setTimeout(resolve, 2000));\r\n    \r\n    const document = {\r\n      id: Date.now()?.toString(),\r\n      name: selectedFile?.name,\r\n      type: documentType,\r\n      status: 'uploaded',\r\n      uploadedAt: new Date()?.toISOString(),\r\n      size: selectedFile?.size\r\n    };\r\n\r\n    onUpload?.(document);\r\n    \r\n    setSelectedFile(null);\r\n    setDocumentType('');\r\n    setIsUploading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Icon name=\"Upload\" size={16} className=\"text-primary\" />\r\n        <h4 className=\"font-medium\">Gesti√≥n de Documentos</h4>\r\n      </div>\r\n      {/* Existing Documents */}\r\n      {project?.documents?.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <h5 className=\"text-sm font-medium text-muted-foreground\">Documentos Existentes</h5>\r\n          <div className=\"space-y-2 max-h-32 overflow-y-auto\">\r\n            {project?.documents?.map((doc, index) => (\r\n              <div key={index} className=\"flex items-center space-x-2 p-2 bg-gray-50 rounded\">\r\n                <Icon \r\n                  name={\r\n                    doc?.type === 'catalog' ? 'Book' :\r\n                    doc?.type === 'plan' ? 'FileText' :\r\n                    doc?.type === 'requirement' ? 'CheckSquare' :\r\n                    doc?.type === 'location'? 'MapPin' : 'File'\r\n                  } \r\n                  size={14} \r\n                  className=\"text-primary\" \r\n                />\r\n                <span className=\"text-sm flex-1\">{doc?.name}</span>\r\n                <span className={`text-xs px-2 py-1 rounded-full ${\r\n                  doc?.status === 'uploaded' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\r\n                }`}>\r\n                  {doc?.status === 'uploaded' ? 'Subido' : 'Pendiente'}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Upload New Document */}\r\n      <div className=\"space-y-3\">\r\n        <h5 className=\"text-sm font-medium text-muted-foreground\">Subir Nuevo Documento</h5>\r\n        \r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium\">Tipo de Documento</label>\r\n          <select\r\n            value={documentType}\r\n            onChange={(e) => setDocumentType(e?.target?.value)}\r\n            className=\"w-full p-2 border rounded-md text-sm\"\r\n          >\r\n            <option value=\"\">Seleccionar tipo...</option>\r\n            {documentTypes?.map((type) => (\r\n              <option key={type?.value} value={type?.value}>{type?.label}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium\">Archivo</label>\r\n          <Input\r\n            type=\"file\"\r\n            onChange={handleFileSelect}\r\n            accept=\".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png\"\r\n            className=\"text-sm\"\r\n          />\r\n          {selectedFile && (\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Archivo seleccionado: {selectedFile?.name}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        <Button\r\n          onClick={handleUpload}\r\n          disabled={!selectedFile || !documentType || isUploading}\r\n          iconName={isUploading ? \"Loader2\" : \"Upload\"}\r\n          iconPosition=\"left\"\r\n          size=\"sm\"\r\n          className=\"w-full\"\r\n        >\r\n          {isUploading ? 'Subiendo...' : 'Subir Documento'}\r\n        </Button>\r\n      </div>\r\n      {/* Upload Guidelines */}\r\n      <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={14} className=\"text-blue-600 mt-0.5\" />\r\n          <div className=\"text-xs text-blue-800\">\r\n            <p className=\"font-medium mb-1\">Organizaci√≥n Manual de Documentos</p>\r\n            <p>Los documentos se organizan en carpetas digitales. Aseg√∫rese de seleccionar el tipo correcto para una mejor organizaci√≥n.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentUploadPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst QuotationPanel = ({ project, onUpdate }) => {\r\n  const [quotation, setQuotation] = useState({\r\n    installationPercentage: 25,\r\n    parts: 15,\r\n    travel: 8,\r\n    personnel: 12,\r\n    advance: 30,\r\n    progress: 70,\r\n    warranty: '12 meses',\r\n    ...project?.quotation\r\n  });\r\n\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setQuotation(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setIsSaving(true);\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    onUpdate?.(quotation);\r\n    setIsSaving(false);\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    const base = 100000; // Base amount for calculation\r\n    const installation = (quotation?.installationPercentage / 100) * base;\r\n    const parts = (quotation?.parts / 100) * base;\r\n    const travel = (quotation?.travel / 100) * base;\r\n    const personnel = (quotation?.personnel / 100) * base;\r\n    \r\n    return installation + parts + travel + personnel;\r\n  };\r\n\r\n  const getAdvanceAmount = () => {\r\n    return (quotation?.advance / 100) * calculateTotal();\r\n  };\r\n\r\n  const getProgressAmount = () => {\r\n    return (quotation?.progress / 100) * calculateTotal();\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Icon name=\"Calculator\" size={16} className=\"text-primary\" />\r\n        <h4 className=\"font-medium\">Constructor de Cotizaci√≥n</h4>\r\n      </div>\r\n      {/* Decision Point Indicator */}\r\n      {project?.hasClientCatalog ? (\r\n        <div className=\"p-3 bg-green-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"CheckCircle\" size={14} className=\"text-green-600\" />\r\n            <p className=\"text-sm text-green-800 font-medium\">Cliente proporcion√≥ cat√°logo</p>\r\n          </div>\r\n          <p className=\"text-xs text-green-700 mt-1\">Elaborar cotizaci√≥n inicial desde cat√°logo</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"p-3 bg-yellow-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"AlertTriangle\" size={14} className=\"text-yellow-600\" />\r\n            <p className=\"text-sm text-yellow-800 font-medium\">Sin cat√°logo del cliente</p>\r\n          </div>\r\n          <p className=\"text-xs text-yellow-700 mt-1\">Identificar materiales a partir de planos de obra</p>\r\n        </div>\r\n      )}\r\n      {/* Quotation Form */}\r\n      <div className=\"space-y-3\">\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Instalaci√≥n</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.installationPercentage}\r\n              onChange={(e) => handleInputChange('installationPercentage', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Piezas</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.parts}\r\n              onChange={(e) => handleInputChange('parts', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Vi√°ticos</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.travel}\r\n              onChange={(e) => handleInputChange('travel', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Personal</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.personnel}\r\n              onChange={(e) => handleInputChange('personnel', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Anticipo</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.advance}\r\n              onChange={(e) => handleInputChange('advance', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium\">% Avance</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={quotation?.progress}\r\n              onChange={(e) => handleInputChange('progress', parseFloat(e?.target?.value) || 0)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"text-sm font-medium\">Garant√≠a</label>\r\n          <select\r\n            value={quotation?.warranty}\r\n            onChange={(e) => handleInputChange('warranty', e?.target?.value)}\r\n            className=\"w-full p-2 border rounded-md text-sm\"\r\n          >\r\n            <option value=\"6 meses\">6 meses</option>\r\n            <option value=\"12 meses\">12 meses</option>\r\n            <option value=\"18 meses\">18 meses</option>\r\n            <option value=\"24 meses\">24 meses</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      {/* Calculation Summary */}\r\n      <div className=\"p-3 bg-gray-50 rounded-lg space-y-2\">\r\n        <h5 className=\"text-sm font-medium\">Resumen de C√°lculos</h5>\r\n        <div className=\"text-xs space-y-1\">\r\n          <div className=\"flex justify-between\">\r\n            <span>Total Estimado:</span>\r\n            <span className=\"font-medium\">${calculateTotal()?.toLocaleString('es-MX')}</span>\r\n          </div>\r\n          <div className=\"flex justify-between\">\r\n            <span>Anticipo ({quotation?.advance}%):</span>\r\n            <span>${getAdvanceAmount()?.toLocaleString('es-MX')}</span>\r\n          </div>\r\n          <div className=\"flex justify-between\">\r\n            <span>Avance ({quotation?.progress}%):</span>\r\n            <span>${getProgressAmount()?.toLocaleString('es-MX')}</span>\r\n          </div>\r\n          <div className=\"flex justify-between\">\r\n            <span>Garant√≠a:</span>\r\n            <span>{quotation?.warranty}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Conditions Note */}\r\n      <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={14} className=\"text-blue-600 mt-0.5\" />\r\n          <div className=\"text-xs text-blue-800\">\r\n            <p className=\"font-medium mb-1\">Condiciones Est√°ndar</p>\r\n            <p>30% anticipo, 70% avance. El documento de cotizaci√≥n engloba instalaci√≥n, piezas, vi√°ticos, personal estimado y notas sobre garant√≠as.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Button\r\n        onClick={handleSave}\r\n        disabled={isSaving}\r\n        iconName={isSaving ? \"Loader2\" : \"Save\"}\r\n        iconPosition=\"left\"\r\n        size=\"sm\"\r\n        className=\"w-full\"\r\n      >\r\n        {isSaving ? 'Guardando...' : 'Guardar Cotizaci√≥n'}\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ValidationPanel = ({ project, onSubmit }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [validationNotes, setValidationNotes] = useState('');\r\n\r\n  const handleSubmitForValidation = async () => {\r\n    setIsSubmitting(true);\r\n    \r\n    await new Promise(resolve => setTimeout(resolve, 1500));\r\n    \r\n    const validation = {\r\n      status: 'submitted',\r\n      reviewer: 'Ventas/Mart√≠n',\r\n      submittedAt: new Date()?.toISOString(),\r\n      notes: validationNotes\r\n    };\r\n    \r\n    onSubmit?.(validation);\r\n    setIsSubmitting(false);\r\n    setValidationNotes('');\r\n  };\r\n\r\n  const handleApprove = async () => {\r\n    setIsSubmitting(true);\r\n    \r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    \r\n    const validation = {\r\n      status: 'approved',\r\n      reviewer: 'Ventas/Mart√≠n',\r\n      approvedAt: new Date()?.toISOString(),\r\n      notes: validationNotes\r\n    };\r\n    \r\n    onSubmit?.(validation);\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  const handleReject = async () => {\r\n    setIsSubmitting(true);\r\n    \r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    \r\n    const validation = {\r\n      status: 'rejected',\r\n      reviewer: 'Ventas/Mart√≠n',\r\n      rejectedAt: new Date()?.toISOString(),\r\n      notes: validationNotes\r\n    };\r\n    \r\n    onSubmit?.(validation);\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Icon name=\"CheckCircle\" size={16} className=\"text-primary\" />\r\n        <h4 className=\"font-medium\">Validaci√≥n de Cotizaci√≥n</h4>\r\n      </div>\r\n      {/* Current Status */}\r\n      {project?.validation ? (\r\n        <div className={`p-3 rounded-lg ${\r\n          project?.validation?.status === 'approved' ? 'bg-green-50' :\r\n          project?.validation?.status === 'rejected'? 'bg-red-50' : 'bg-yellow-50'\r\n        }`}>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon \r\n              name={\r\n                project?.validation?.status === 'approved' ? 'CheckCircle' :\r\n                project?.validation?.status === 'rejected'? 'XCircle' : 'Clock'\r\n              } \r\n              size={14} \r\n              className={\r\n                project?.validation?.status === 'approved' ? 'text-green-600' :\r\n                project?.validation?.status === 'rejected'? 'text-red-600' : 'text-yellow-600'\r\n              } \r\n            />\r\n            <p className={`text-sm font-medium ${\r\n              project?.validation?.status === 'approved' ? 'text-green-800' :\r\n              project?.validation?.status === 'rejected'? 'text-red-800' : 'text-yellow-800'\r\n            }`}>\r\n              {project?.validation?.status === 'approved' ? 'Cotizaci√≥n Aprobada' :\r\n               project?.validation?.status === 'rejected'? 'Cotizaci√≥n Rechazada' : 'Validaci√≥n Pendiente'}\r\n            </p>\r\n          </div>\r\n          <p className={`text-xs mt-1 ${\r\n            project?.validation?.status === 'approved' ? 'text-green-700' :\r\n            project?.validation?.status === 'rejected'? 'text-red-700' : 'text-yellow-700'\r\n          }`}>\r\n            Revisor: {project?.validation?.reviewer}\r\n          </p>\r\n          {project?.validation?.notes && (\r\n            <p className={`text-xs mt-2 ${\r\n              project?.validation?.status === 'approved' ? 'text-green-700' :\r\n              project?.validation?.status === 'rejected'? 'text-red-700' : 'text-yellow-700'\r\n            }`}>\r\n              Notas: {project?.validation?.notes}\r\n            </p>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"AlertCircle\" size={14} className=\"text-blue-600\" />\r\n            <p className=\"text-sm text-blue-800 font-medium\">Cotizaci√≥n lista para validaci√≥n</p>\r\n          </div>\r\n          <p className=\"text-xs text-blue-700 mt-1\">La cotizaci√≥n debe ser validada por Ventas/Mart√≠n antes de enviar al cliente</p>\r\n        </div>\r\n      )}\r\n      {/* Quotation Summary */}\r\n      {project?.quotation && (\r\n        <div className=\"p-3 bg-gray-50 rounded-lg\">\r\n          <h5 className=\"text-sm font-medium mb-2\">Resumen de Cotizaci√≥n</h5>\r\n          <div className=\"text-xs space-y-1\">\r\n            <div className=\"flex justify-between\">\r\n              <span>Instalaci√≥n:</span>\r\n              <span>{project?.quotation?.installationPercentage}%</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Piezas:</span>\r\n              <span>{project?.quotation?.parts}%</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Vi√°ticos:</span>\r\n              <span>{project?.quotation?.travel}%</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Personal:</span>\r\n              <span>{project?.quotation?.personnel}%</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Condiciones:</span>\r\n              <span>{project?.quotation?.advance}% anticipo, {project?.quotation?.progress}% avance</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span>Garant√≠a:</span>\r\n              <span>{project?.quotation?.warranty}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Validation Notes */}\r\n      <div className=\"space-y-2\">\r\n        <label className=\"text-sm font-medium\">Notas de Validaci√≥n</label>\r\n        <textarea\r\n          value={validationNotes}\r\n          onChange={(e) => setValidationNotes(e?.target?.value)}\r\n          placeholder=\"Agregar comentarios sobre la validaci√≥n...\"\r\n          className=\"w-full p-2 border rounded-md text-sm resize-none\"\r\n          rows={3}\r\n        />\r\n      </div>\r\n      {/* Action Buttons */}\r\n      {!project?.validation || project?.validation?.status === 'rejected' ? (\r\n        <Button\r\n          onClick={handleSubmitForValidation}\r\n          disabled={isSubmitting}\r\n          iconName={isSubmitting ? \"Loader2\" : \"Send\"}\r\n          iconPosition=\"left\"\r\n          size=\"sm\"\r\n          className=\"w-full\"\r\n        >\r\n          {isSubmitting ? 'Enviando...' : 'Enviar para Validaci√≥n'}\r\n        </Button>\r\n      ) : project?.validation?.status === 'pending' ? (\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          <Button\r\n            onClick={handleApprove}\r\n            disabled={isSubmitting}\r\n            iconName=\"CheckCircle\"\r\n            iconPosition=\"left\"\r\n            size=\"sm\"\r\n            variant=\"default\"\r\n          >\r\n            Aprobar\r\n          </Button>\r\n          <Button\r\n            onClick={handleReject}\r\n            disabled={isSubmitting}\r\n            iconName=\"XCircle\"\r\n            iconPosition=\"left\"\r\n            size=\"sm\"\r\n            variant=\"destructive\"\r\n          >\r\n            Rechazar\r\n          </Button>\r\n        </div>\r\n      ) : null}\r\n      {/* Validation Process Info */}\r\n      <div className=\"p-3 bg-amber-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Diamond\" size={14} className=\"text-amber-600 mt-0.5\" />\r\n          <div className=\"text-xs text-amber-800\">\r\n            <p className=\"font-medium mb-1\">Punto de Decisi√≥n</p>\r\n            <p>La validaci√≥n por Ventas/Mart√≠n es un punto clave del proceso. Una vez aprobada, se puede proceder al env√≠o de propuesta al cliente.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ValidationPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\n\r\nimport ProjectCard from './components/ProjectCard';\r\nimport DocumentUploadPanel from './components/DocumentUploadPanel';\r\nimport QuotationPanel from './components/QuotationPanel';\r\nimport ValidationPanel from './components/ValidationPanel';\r\n\r\nconst ProjectWorkflowManagement = () => {\r\n  const [projects, setProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [activeStage, setActiveStage] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showControls, setShowControls] = useState(false);\r\n\r\n  // Workflow stages following the diagram\r\n  const workflowStages = [\r\n    {\r\n      id: 'information-reception',\r\n      name: 'Recepci√≥n de Informaci√≥n',\r\n      description: 'Cat√°logos, planos, ubicaci√≥n de obra o requerimientos',\r\n      color: 'bg-blue-500',\r\n      icon: 'FileText'\r\n    },\r\n    {\r\n      id: 'document-organization',\r\n      name: 'Organizaci√≥n de Documentos',\r\n      description: 'Creaci√≥n de carpetas digitales y organizaci√≥n de archivos',\r\n      color: 'bg-indigo-500',\r\n      icon: 'FolderOpen'\r\n    },\r\n    {\r\n      id: 'quotation-development',\r\n      name: 'Elaboraci√≥n de Cotizaci√≥n',\r\n      description: 'Desarrollo inicial de cotizaci√≥n con porcentajes y condiciones',\r\n      color: 'bg-purple-500',\r\n      icon: 'Calculator'\r\n    },\r\n    {\r\n      id: 'validation',\r\n      name: 'Validaci√≥n',\r\n      description: 'Validaci√≥n por Ventas/Mart√≠n',\r\n      color: 'bg-yellow-500',\r\n      icon: 'CheckCircle'\r\n    },\r\n    {\r\n      id: 'client-approval',\r\n      name: 'Aprobaci√≥n Cliente',\r\n      description: 'Env√≠o y aprobaci√≥n de propuesta por cliente',\r\n      color: 'bg-green-500',\r\n      icon: 'UserCheck'\r\n    },\r\n    {\r\n      id: 'provider-search',\r\n      name: 'B√∫squeda de Proveedores',\r\n      description: 'B√∫squeda en zona de obra y comunicaci√≥n a Administraci√≥n',\r\n      color: 'bg-orange-500',\r\n      icon: 'Users'\r\n    },\r\n    {\r\n      id: 'work-execution',\r\n      name: 'Ejecuci√≥n de Obra',\r\n      description: 'Seguimiento de trabajos y control de avances',\r\n      color: 'bg-red-500',\r\n      icon: 'Wrench'\r\n    },\r\n    {\r\n      id: 'project-closure',\r\n      name: 'Cierre de Proyecto',\r\n      description: 'Documentaci√≥n final y continuidad de garant√≠a',\r\n      color: 'bg-gray-500',\r\n      icon: 'Archive'\r\n    }\r\n  ];\r\n\r\n  // Mock project data following the workflow\r\n  const mockProjects = [\r\n    {\r\n      id: \"1\",\r\n      code: \"PROJ-WF-001\",\r\n      name: \"Instalaci√≥n HVAC Torre Corporativa\",\r\n      client: \"ABC Corporation\",\r\n      type: \"Instalaci√≥n HVAC\",\r\n      stage: \"information-reception\",\r\n      priority: \"high\",\r\n      assignedPersonnel: [\"Carlos Mart√≠nez\", \"Ana Rodr√≠guez\"],\r\n      deadline: \"2024-04-30\",\r\n      budget: 850000,\r\n      progress: 15,\r\n      hasClientCatalog: true,\r\n      documents: [\r\n        { name: \"Planos_Arquitectonicos.pdf\", type: \"plan\", status: \"uploaded\" },\r\n        { name: \"Catalogo_Cliente.pdf\", type: \"catalog\", status: \"uploaded\" }\r\n      ],\r\n      notes: \"Cliente proporcion√≥ cat√°logo completo y planos actualizados\"\r\n    },\r\n    {\r\n      id: \"2\",\r\n      code: \"PROJ-WF-002\",\r\n      name: \"Mantenimiento Sistema Industrial\",\r\n      client: \"XYZ Industries\",\r\n      type: \"Mantenimiento\",\r\n      stage: \"document-organization\",\r\n      priority: \"medium\",\r\n      assignedPersonnel: [\"Mar√≠a L√≥pez\"],\r\n      deadline: \"2024-03-15\",\r\n      budget: 320000,\r\n      progress: 35,\r\n      hasClientCatalog: false,\r\n      documents: [\r\n        { name: \"Requerimientos.pdf\", type: \"requirement\", status: \"uploaded\" },\r\n        { name: \"Ubicacion_Obra.pdf\", type: \"location\", status: \"uploaded\" }\r\n      ],\r\n      notes: \"Organizaci√≥n manual de documentos en proceso\"\r\n    },\r\n    {\r\n      id: \"3\",\r\n      code: \"PROJ-WF-003\",\r\n      name: \"Actualizaci√≥n Sistema Residencial\",\r\n      client: \"Green Energy M√©xico\",\r\n      type: \"Actualizaci√≥n\",\r\n      stage: \"quotation-development\",\r\n      priority: \"low\",\r\n      assignedPersonnel: [\"Roberto Silva\", \"Carmen D√≠az\"],\r\n      deadline: \"2024-05-30\",\r\n      budget: 180000,\r\n      progress: 50,\r\n      hasClientCatalog: false,\r\n      documents: [\r\n        { name: \"Planos_Obra.pdf\", type: \"plan\", status: \"uploaded\" }\r\n      ],\r\n      quotation: {\r\n        installationPercentage: 25,\r\n        parts: 15,\r\n        travel: 8,\r\n        personnel: 12,\r\n        advance: 30,\r\n        progress: 70,\r\n        warranty: \"12 meses\"\r\n      },\r\n      notes: \"Identificaci√≥n de materiales desde planos en desarrollo\"\r\n    },\r\n    {\r\n      id: \"4\",\r\n      code: \"PROJ-WF-004\",\r\n      name: \"Consultor√≠a Eficiencia Energ√©tica\",\r\n      client: \"Tech Solutions SA\",\r\n      type: \"Consultor√≠a\",\r\n      stage: \"validation\",\r\n      priority: \"urgent\",\r\n      assignedPersonnel: [\"Fernando Ruiz\", \"Patricia Morales\"],\r\n      deadline: \"2024-07-15\",\r\n      budget: 450000,\r\n      progress: 75,\r\n      hasClientCatalog: true,\r\n      quotation: {\r\n        installationPercentage: 30,\r\n        parts: 20,\r\n        travel: 10,\r\n        personnel: 15,\r\n        advance: 30,\r\n        progress: 70,\r\n        warranty: \"24 meses\"\r\n      },\r\n      validation: {\r\n        status: \"pending\",\r\n        reviewer: \"Ventas/Mart√≠n\",\r\n        submittedAt: \"2024-03-25\"\r\n      },\r\n      notes: \"Cotizaci√≥n lista para validaci√≥n de Ventas/Mart√≠n\"\r\n    },\r\n    {\r\n      id: \"5\",\r\n      code: \"PROJ-WF-005\",\r\n      name: \"Reparaci√≥n Sistema Comercial\",\r\n      client: \"Urban Development Group\",\r\n      type: \"Reparaci√≥n\",\r\n      stage: \"client-approval\",\r\n      priority: \"high\",\r\n      assignedPersonnel: [\"Alejandro Torres\", \"Sof√≠a Ram√≠rez\"],\r\n      deadline: \"2024-04-15\",\r\n      budget: 275000,\r\n      progress: 85,\r\n      hasClientCatalog: false,\r\n      quotation: {\r\n        installationPercentage: 20,\r\n        parts: 25,\r\n        travel: 5,\r\n        personnel: 10,\r\n        advance: 30,\r\n        progress: 70,\r\n        warranty: \"18 meses\"\r\n      },\r\n      approval: {\r\n        status: \"sent\",\r\n        method: \"email\",\r\n        sentAt: \"2024-03-20\",\r\n        adjustments: 2\r\n      },\r\n      notes: \"Propuesta enviada por correo, pendiente aprobaci√≥n cliente\"\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadProjects = async () => {\r\n      setIsLoading(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      setProjects(mockProjects);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    loadProjects();\r\n  }, []);\r\n\r\n  const handleStageTransition = (projectId, newStage) => {\r\n    setProjects(prev => prev?.map(project => \r\n      project?.id === projectId \r\n        ? { ...project, stage: newStage, progress: Math.min(project?.progress + 10, 100) }\r\n        : project\r\n    ));\r\n  };\r\n\r\n  const handleProjectSelect = (project) => {\r\n    setSelectedProject(project);\r\n    setShowControls(true);\r\n  };\r\n\r\n  const handleDocumentUpload = (projectId, document) => {\r\n    setProjects(prev => prev?.map(project => \r\n      project?.id === projectId \r\n        ? { \r\n            ...project, \r\n            documents: [...(project?.documents || []), document]\r\n          }\r\n        : project\r\n    ));\r\n  };\r\n\r\n  const handleQuotationUpdate = (projectId, quotationData) => {\r\n    setProjects(prev => prev?.map(project => \r\n      project?.id === projectId \r\n        ? { ...project, quotation: quotationData }\r\n        : project\r\n    ));\r\n  };\r\n\r\n  const handleValidationSubmit = (projectId, validationData) => {\r\n    setProjects(prev => prev?.map(project => \r\n      project?.id === projectId \r\n        ? { ...project, validation: validationData }\r\n        : project\r\n    ));\r\n  };\r\n\r\n  const getProjectsByStage = (stageId) => {\r\n    return projects?.filter(project => project?.stage === stageId) || [];\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'border-l-red-600 bg-red-50';\r\n      case 'high': return 'border-l-orange-500 bg-orange-50';\r\n      case 'medium': return 'border-l-yellow-500 bg-yellow-50';\r\n      case 'low': return 'border-l-green-500 bg-green-50';\r\n      default: return 'border-l-gray-400 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <div className=\"flex items-center justify-center h-96\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n            <p className=\"text-muted-foreground\">Cargando flujo de trabajo...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        {/* Breadcrumb */}\r\n        <div className=\"mb-6\">\r\n          <Breadcrumb />\r\n        </div>\r\n\r\n        {/* Header */}\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-foreground mb-2\">Flujo de Trabajo - √Årea de Proyectos</h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Gesti√≥n completa del ciclo de vida de proyectos desde recepci√≥n hasta cierre\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n            <Button\r\n              variant=\"outline\"\r\n              iconName=\"RefreshCw\"\r\n              iconPosition=\"left\"\r\n              onClick={() => window.location?.reload()}\r\n            >\r\n              Actualizar\r\n            </Button>\r\n            <Button\r\n              iconName=\"Plus\"\r\n              iconPosition=\"left\"\r\n              onClick={() => setShowControls(true)}\r\n            >\r\n              Nuevo Proyecto\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex gap-6\">\r\n          {/* Main Workflow Board */}\r\n          <div className=\"flex-1\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8\">\r\n              {workflowStages?.map((stage) => (\r\n                <div key={stage?.id} className=\"bg-card rounded-lg shadow-sm border\">\r\n                  <div className={`p-4 ${stage?.color} text-white rounded-t-lg`}>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name={stage?.icon} size={20} />\r\n                      <h3 className=\"font-semibold text-sm\">{stage?.name}</h3>\r\n                    </div>\r\n                    <p className=\"text-xs mt-1 opacity-90\">{stage?.description}</p>\r\n                    <div className=\"text-xs mt-2 bg-white/20 rounded px-2 py-1 inline-block\">\r\n                      {getProjectsByStage(stage?.id)?.length} proyectos\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4 space-y-3 min-h-[400px]\">\r\n                    {getProjectsByStage(stage?.id)?.map((project) => (\r\n                      <div\r\n                        key={project?.id}\r\n                        onClick={() => handleProjectSelect(project)}\r\n                        className={`p-3 rounded-lg border-l-4 cursor-pointer hover:shadow-md transition-all ${getPriorityColor(project?.priority)}`}\r\n                      >\r\n                        <div className=\"flex items-start justify-between mb-2\">\r\n                          <h4 className=\"font-medium text-sm text-foreground line-clamp-2\">\r\n                            {project?.name}\r\n                          </h4>\r\n                          <span className={`text-xs px-2 py-1 rounded-full ${\r\n                            project?.priority === 'urgent' ? 'bg-red-100 text-red-800' :\r\n                            project?.priority === 'high' ? 'bg-orange-100 text-orange-800' :\r\n                            project?.priority === 'medium'? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                          }`}>\r\n                            {project?.priority === 'urgent' ? 'Urgente' :\r\n                             project?.priority === 'high' ? 'Alta' :\r\n                             project?.priority === 'medium' ? 'Media' : 'Baja'}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <p className=\"text-xs text-muted-foreground mb-2\">{project?.client}</p>\r\n                        <p className=\"text-xs text-muted-foreground mb-2\">{project?.code}</p>\r\n                        \r\n                        <div className=\"flex items-center space-x-2 mb-2\">\r\n                          <Icon name=\"Users\" size={12} className=\"text-muted-foreground\" />\r\n                          <span className=\"text-xs text-muted-foreground\">\r\n                            {project?.assignedPersonnel?.slice(0, 2)?.join(', ')}\r\n                            {project?.assignedPersonnel?.length > 2 && ` +${project?.assignedPersonnel?.length - 2}`}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Icon name=\"Calendar\" size={12} className=\"text-muted-foreground\" />\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {new Date(project?.deadline)?.toLocaleDateString('es-MX')}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"text-xs font-medium text-foreground\">\r\n                            {project?.progress}%\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"w-full bg-gray-200 rounded-full h-1 mt-2\">\r\n                          <div \r\n                            className=\"bg-primary h-1 rounded-full transition-all\"\r\n                            style={{ width: `${project?.progress}%` }}\r\n                          ></div>\r\n                        </div>\r\n\r\n                        {project?.hasClientCatalog && (\r\n                          <div className=\"flex items-center space-x-1 mt-2\">\r\n                            <Icon name=\"FileCheck\" size={12} className=\"text-green-600\" />\r\n                            <span className=\"text-xs text-green-600\">Cat√°logo cliente</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                    \r\n                    {getProjectsByStage(stage?.id)?.length === 0 && (\r\n                      <div className=\"text-center py-8\">\r\n                        <Icon name=\"Inbox\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                        <p className=\"text-sm text-muted-foreground\">Sin proyectos</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Workflow Controls Panel */}\r\n          {showControls && (\r\n            <div className=\"w-96 bg-card rounded-lg shadow-lg border h-fit\">\r\n              <div className=\"p-4 border-b\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className=\"font-semibold\">Controles de Flujo</h3>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    iconName=\"X\"\r\n                    onClick={() => setShowControls(false)}\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"p-4 space-y-6\">\r\n                {selectedProject && (\r\n                  <div className=\"space-y-4\">\r\n                    <div>\r\n                      <h4 className=\"font-medium mb-2\">{selectedProject?.name}</h4>\r\n                      <p className=\"text-sm text-muted-foreground\">{selectedProject?.client}</p>\r\n                    </div>\r\n\r\n                    {/* Document Upload */}\r\n                    <DocumentUploadPanel\r\n                      project={selectedProject}\r\n                      onUpload={(document) => handleDocumentUpload(selectedProject?.id, document)}\r\n                    />\r\n\r\n                    {/* Quotation Builder */}\r\n                    {(selectedProject?.stage === 'quotation-development' || selectedProject?.quotation) && (\r\n                      <QuotationPanel\r\n                        project={selectedProject}\r\n                        onUpdate={(quotation) => handleQuotationUpdate(selectedProject?.id, quotation)}\r\n                      />\r\n                    )}\r\n\r\n                    {/* Validation */}\r\n                    {selectedProject?.stage === 'validation' && (\r\n                      <ValidationPanel\r\n                        project={selectedProject}\r\n                        onSubmit={(validation) => handleValidationSubmit(selectedProject?.id, validation)}\r\n                      />\r\n                    )}\r\n\r\n                    {/* Stage Transition */}\r\n                    <div className=\"space-y-2\">\r\n                      <label className=\"text-sm font-medium\">Avanzar Etapa</label>\r\n                      <div className=\"grid grid-cols-2 gap-2\">\r\n                        {workflowStages?.map((stage) => (\r\n                          <Button\r\n                            key={stage?.id}\r\n                            variant={selectedProject?.stage === stage?.id ? \"default\" : \"outline\"}\r\n                            size=\"sm\"\r\n                            onClick={() => handleStageTransition(selectedProject?.id, stage?.id)}\r\n                            disabled={selectedProject?.stage === stage?.id}\r\n                            className=\"text-xs\"\r\n                          >\r\n                            {stage?.name}\r\n                          </Button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Mobile View */}\r\n        <div className=\"lg:hidden\">\r\n          <div className=\"space-y-4\">\r\n            {workflowStages?.map((stage) => (\r\n              <div key={stage?.id} className=\"bg-card rounded-lg shadow-sm border\">\r\n                <div className={`p-4 ${stage?.color} text-white`}>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name={stage?.icon} size={20} />\r\n                    <h3 className=\"font-semibold\">{stage?.name}</h3>\r\n                    <span className=\"bg-white/20 rounded px-2 py-1 text-xs\">\r\n                      {getProjectsByStage(stage?.id)?.length}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"text-sm mt-1 opacity-90\">{stage?.description}</p>\r\n                </div>\r\n                \r\n                <div className=\"p-4\">\r\n                  {getProjectsByStage(stage?.id)?.map((project) => (\r\n                    <ProjectCard\r\n                      key={project?.id}\r\n                      project={project}\r\n                      onSelect={handleProjectSelect}\r\n                      onStageTransition={handleStageTransition}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectWorkflowManagement;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst QuotationForm = ({ quotation, onUpdate, onCalculationUpdate, onValidationSubmit, isSaving }) => {\r\n  const [calculations, setCalculations] = useState(quotation?.calculations || {});\r\n  const [isCalculating, setIsCalculating] = useState(false);\r\n\r\n  const handleCalculationChange = (field, value) => {\r\n    const updatedCalculations = {\r\n      ...calculations,\r\n      [field]: parseFloat(value) || 0\r\n    };\r\n\r\n    setCalculations(updatedCalculations);\r\n    onCalculationUpdate?.(updatedCalculations);\r\n  };\r\n\r\n  const handleAutoCalculate = async () => {\r\n    setIsCalculating(true);\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    \r\n    // Auto-calculate based on standard percentages\r\n    const autoCalculations = {\r\n      ...calculations,\r\n      installationPercentage: 25,\r\n      parts: 15,\r\n      travel: 8,\r\n      personnel: 12\r\n    };\r\n\r\n    setCalculations(autoCalculations);\r\n    onCalculationUpdate?.(autoCalculations);\r\n    setIsCalculating(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold\">Formulario de Cotizaci√≥n</h3>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          iconName=\"Calculator\"\r\n          iconPosition=\"left\"\r\n          onClick={handleAutoCalculate}\r\n          disabled={isCalculating}\r\n        >\r\n          {isCalculating ? 'Calculando...' : 'Auto-Calcular'}\r\n        </Button>\r\n      </div>\r\n      {/* Basic Information */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div>\r\n          <label className=\"text-sm font-medium mb-2 block\">Proyecto</label>\r\n          <Input\r\n            value={quotation?.projectName || ''}\r\n            readOnly\r\n            className=\"bg-muted\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"text-sm font-medium mb-2 block\">Cliente</label>\r\n          <Input\r\n            value={quotation?.client?.name || ''}\r\n            readOnly\r\n            className=\"bg-muted\"\r\n          />\r\n        </div>\r\n      </div>\r\n      {/* Calculation Engine */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"font-medium flex items-center space-x-2\">\r\n          <Icon name=\"Calculator\" size={16} />\r\n          <span>Motor de C√°lculos Automatizado</span>\r\n        </h4>\r\n\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Instalaci√≥n</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={calculations?.installationPercentage || 0}\r\n              onChange={(e) => handleCalculationChange('installationPercentage', e?.target?.value)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Piezas</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={calculations?.parts || 0}\r\n              onChange={(e) => handleCalculationChange('parts', e?.target?.value)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Vi√°ticos</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={calculations?.travel || 0}\r\n              onChange={(e) => handleCalculationChange('travel', e?.target?.value)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Personal</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={calculations?.personnel || 0}\r\n              onChange={(e) => handleCalculationChange('personnel', e?.target?.value)}\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Payment Terms */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">Garant√≠a</label>\r\n            <select\r\n              value={calculations?.warranty || '12 meses'}\r\n              onChange={(e) => handleCalculationChange('warranty', e?.target?.value)}\r\n              className=\"w-full p-2 border rounded-md text-sm\"\r\n            >\r\n              <option value=\"6 meses\">6 meses</option>\r\n              <option value=\"12 meses\">12 meses</option>\r\n              <option value=\"18 meses\">18 meses</option>\r\n              <option value=\"24 meses\">24 meses</option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Anticipo</label>\r\n            <Input\r\n              type=\"number\"\r\n              value=\"30\"\r\n              readOnly\r\n              className=\"bg-muted text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-2 block\">% Avance</label>\r\n            <Input\r\n              type=\"number\"\r\n              value=\"70\"\r\n              readOnly\r\n              className=\"bg-muted text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Calculation Results */}\r\n      <div className=\"p-4 bg-gray-50 rounded-lg\">\r\n        <h5 className=\"font-medium mb-3 flex items-center space-x-2\">\r\n          <Icon name=\"TrendingUp\" size={16} />\r\n          <span>Resumen de C√°lculos</span>\r\n        </h5>\r\n        \r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Subtotal Materiales</p>\r\n            <p className=\"font-medium\">${calculations?.subtotal?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Costo Instalaci√≥n</p>\r\n            <p className=\"font-medium\">${calculations?.installationCost?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Costo Piezas</p>\r\n            <p className=\"font-medium\">${calculations?.partsCost?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Vi√°ticos</p>\r\n            <p className=\"font-medium\">${calculations?.travelCost?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Personal</p>\r\n            <p className=\"font-medium\">${calculations?.personnelCost?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground font-semibold\">Total General</p>\r\n            <p className=\"font-bold text-lg text-primary\">${calculations?.total?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Anticipo (30%)</p>\r\n            <p className=\"font-medium text-green-600\">${calculations?.advance?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-muted-foreground\">Avance (70%)</p>\r\n            <p className=\"font-medium text-blue-600\">${calculations?.progress?.toLocaleString('es-MX') || '0'}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Payment Terms Information */}\r\n      <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={16} className=\"text-blue-600 mt-0.5\" />\r\n          <div className=\"text-sm text-blue-800\">\r\n            <p className=\"font-medium mb-1\">Estructura de Pagos Mexicana</p>\r\n            <p>30% anticipo, 70% contra avance de obra. Garant√≠a incluye notas sobre fianzas. El documento engloba instalaci√≥n, piezas, vi√°ticos y personal estimado con cumplimiento normativo mexicano.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Action Buttons */}\r\n      <div className=\"flex justify-end space-x-4\">\r\n        <Button\r\n          variant=\"outline\"\r\n          iconName=\"Save\"\r\n          iconPosition=\"left\"\r\n          disabled={isSaving}\r\n        >\r\n          Guardar Borrador\r\n        </Button>\r\n        <Button\r\n          onClick={onValidationSubmit}\r\n          disabled={isSaving}\r\n          iconName={isSaving ? \"Loader2\" : \"Send\"}\r\n          iconPosition=\"left\"\r\n        >\r\n          {isSaving ? 'Enviando...' : 'Enviar para Validaci√≥n'}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationForm;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst QuotationPreview = ({ quotation, onVersionCreate }) => {\r\n  const currentDate = new Date()?.toLocaleDateString('es-MX', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  });\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold\">Vista Previa de Cotizaci√≥n</h3>\r\n        <div className=\"flex space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Copy\"\r\n            iconPosition=\"left\"\r\n            onClick={onVersionCreate}\r\n          >\r\n            Crear Versi√≥n\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Exportar PDF\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Professional Quotation Preview */}\r\n      <div className=\"bg-white border rounded-lg p-8 shadow-sm\">\r\n        {/* Header */}\r\n        <div className=\"border-b pb-6 mb-6\">\r\n          <div className=\"flex justify-between items-start\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">AireFlow Pro</h1>\r\n              <p className=\"text-sm text-gray-600 mt-1\">Soluciones HVAC Profesionales</p>\r\n              <div className=\"text-xs text-gray-500 mt-2 space-y-1\">\r\n                <p>RFC: AFP123456ABC</p>\r\n                <p>Av. Tecnol√≥gico 123, Ciudad de M√©xico</p>\r\n                <p>Tel: (55) 1234-5678 | contacto@aireflowpro.com</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900\">COTIZACI√ìN</h2>\r\n              <p className=\"text-sm font-medium mt-1\">{quotation?.id}</p>\r\n              <p className=\"text-xs text-gray-500\">Versi√≥n {quotation?.version}</p>\r\n              <p className=\"text-xs text-gray-500 mt-2\">{currentDate}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Client Information */}\r\n        <div className=\"grid grid-cols-2 gap-8 mb-6\">\r\n          <div>\r\n            <h3 className=\"font-semibold text-gray-900 mb-2\">CLIENTE</h3>\r\n            <div className=\"text-sm space-y-1\">\r\n              <p className=\"font-medium\">{quotation?.client?.name}</p>\r\n              <p className=\"text-gray-600\">{quotation?.client?.contact}</p>\r\n              <p className=\"text-gray-600\">{quotation?.client?.address}</p>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h3 className=\"font-semibold text-gray-900 mb-2\">PROYECTO</h3>\r\n            <div className=\"text-sm space-y-1\">\r\n              <p className=\"font-medium\">{quotation?.projectName}</p>\r\n              <p className=\"text-gray-600\">ID: {quotation?.projectId}</p>\r\n              <p className=\"text-gray-600\">Garant√≠a: {quotation?.calculations?.warranty}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Source Indicator */}\r\n        <div className={`p-3 rounded-lg mb-6 ${\r\n          quotation?.hasCatalog ? 'bg-green-50 border-green-200' : 'bg-yellow-50 border-yellow-200'\r\n        }`}>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon \r\n              name={quotation?.hasCatalog ? \"CheckCircle\" : \"Search\"} \r\n              size={16} \r\n              className={quotation?.hasCatalog ? \"text-green-600\" : \"text-yellow-600\"} \r\n            />\r\n            <p className={`text-sm font-medium ${\r\n              quotation?.hasCatalog ? \"text-green-800\" : \"text-yellow-800\"\r\n            }`}>\r\n              {quotation?.hasCatalog \r\n                ? \"Cotizaci√≥n elaborada desde cat√°logo proporcionado por cliente\" \r\n                : \"Materiales identificados a partir de planos de obra\"\r\n              }\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Materials Table */}\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-3\">MATERIALES Y EQUIPOS</h3>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"text-left p-3 font-medium text-gray-900\">Descripci√≥n</th>\r\n                  <th className=\"text-center p-3 font-medium text-gray-900\">Cantidad</th>\r\n                  <th className=\"text-right p-3 font-medium text-gray-900\">Precio Unitario</th>\r\n                  <th className=\"text-right p-3 font-medium text-gray-900\">Total</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200\">\r\n                {quotation?.materials?.map((material, index) => (\r\n                  <tr key={index} className=\"hover:bg-gray-50\">\r\n                    <td className=\"p-3\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <span>{material?.name}</span>\r\n                        {material?.source === 'catalog' && (\r\n                          <Icon name=\"Book\" size={12} className=\"text-green-600\" title=\"Desde cat√°logo\" />\r\n                        )}\r\n                        {material?.source === 'plan_analysis' && (\r\n                          <Icon name=\"FileText\" size={12} className=\"text-blue-600\" title=\"Desde planos\" />\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"p-3 text-center\">{material?.quantity}</td>\r\n                    <td className=\"p-3 text-right\">${material?.unitPrice?.toLocaleString('es-MX')}</td>\r\n                    <td className=\"p-3 text-right font-medium\">${material?.total?.toLocaleString('es-MX')}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n              <tfoot className=\"bg-gray-50\">\r\n                <tr>\r\n                  <td colSpan=\"3\" className=\"p-3 text-right font-medium text-gray-900\">Subtotal Materiales:</td>\r\n                  <td className=\"p-3 text-right font-bold\">${quotation?.calculations?.subtotal?.toLocaleString('es-MX')}</td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cost Breakdown */}\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-3\">DESGLOSE DE COSTOS</h3>\r\n          <div className=\"bg-gray-50 rounded-lg p-4\">\r\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between\">\r\n                  <span>Instalaci√≥n ({quotation?.calculations?.installationPercentage}%)</span>\r\n                  <span>${quotation?.calculations?.installationCost?.toLocaleString('es-MX')}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span>Piezas ({quotation?.calculations?.parts}%)</span>\r\n                  <span>${quotation?.calculations?.partsCost?.toLocaleString('es-MX')}</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <div className=\"flex justify-between\">\r\n                  <span>Vi√°ticos ({quotation?.calculations?.travel}%)</span>\r\n                  <span>${quotation?.calculations?.travelCost?.toLocaleString('es-MX')}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span>Personal ({quotation?.calculations?.personnel}%)</span>\r\n                  <span>${quotation?.calculations?.personnelCost?.toLocaleString('es-MX')}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Payment Terms */}\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-3\">CONDICIONES DE PAGO</h3>\r\n          <div className=\"bg-blue-50 rounded-lg p-4\">\r\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n              <div>\r\n                <p className=\"font-medium text-blue-900\">Anticipo (30%)</p>\r\n                <p className=\"text-2xl font-bold text-blue-700\">${quotation?.calculations?.advance?.toLocaleString('es-MX')}</p>\r\n                <p className=\"text-xs text-blue-600 mt-1\">Requerido para inicio de obra</p>\r\n              </div>\r\n              <div>\r\n                <p className=\"font-medium text-blue-900\">Contra Avance (70%)</p>\r\n                <p className=\"text-2xl font-bold text-blue-700\">${quotation?.calculations?.progress?.toLocaleString('es-MX')}</p>\r\n                <p className=\"text-xs text-blue-600 mt-1\">Pagos contra avance de obra</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Total */}\r\n        <div className=\"border-t pt-4\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <p className=\"text-sm text-gray-600\">Total del Proyecto</p>\r\n              <p className=\"text-xs text-gray-500\">Incluye materiales, instalaci√≥n y garant√≠a</p>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <p className=\"text-3xl font-bold text-primary\">${quotation?.calculations?.total?.toLocaleString('es-MX')}</p>\r\n              <p className=\"text-xs text-gray-500\">MXN (Pesos Mexicanos)</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Terms and Conditions */}\r\n        <div className=\"mt-8 pt-6 border-t\">\r\n          <h3 className=\"font-semibold text-gray-900 mb-3\">T√âRMINOS Y CONDICIONES</h3>\r\n          <div className=\"text-xs text-gray-600 space-y-2\">\r\n            <p>‚Ä¢ Garant√≠a de {quotation?.calculations?.warranty} sobre equipos y mano de obra</p>\r\n            <p>‚Ä¢ Los precios incluyen IVA y est√°n sujetos a variaci√≥n sin previo aviso</p>\r\n            <p>‚Ä¢ Tiempo de entrega: Sujeto a disponibilidad de materiales</p>\r\n            <p>‚Ä¢ Cumplimiento con normativas mexicanas NOM-001-SEDE y NOM-008-ENER</p>\r\n            <p>‚Ä¢ P√≥liza de responsabilidad civil incluida durante la instalaci√≥n</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"mt-8 pt-6 border-t text-center\">\r\n          <p className=\"text-xs text-gray-500\">\r\n            Esta cotizaci√≥n tiene vigencia de 30 d√≠as a partir de la fecha de emisi√≥n\r\n          </p>\r\n          <p className=\"text-xs text-gray-500 mt-2\">\r\n            AireFlow Pro - Registro ante SEMARNAT: {quotation?.id?.split('-')?.[2]}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      {/* Notes */}\r\n      {quotation?.notes && (\r\n        <div className=\"p-4 bg-amber-50 rounded-lg\">\r\n          <h4 className=\"font-medium mb-2 flex items-center space-x-2\">\r\n            <Icon name=\"StickyNote\" size={16} className=\"text-amber-600\" />\r\n            <span>Notas Internas</span>\r\n          </h4>\r\n          <p className=\"text-sm text-amber-800\">{quotation?.notes}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationPreview;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst MaterialIdentification = ({ quotation, onMaterialUpdate }) => {\r\n  const [materials, setMaterials] = useState(quotation?.materials || []);\r\n  const [newMaterial, setNewMaterial] = useState({\r\n    name: '',\r\n    quantity: 1,\r\n    unitPrice: 0,\r\n    source: quotation?.hasCatalog ? 'catalog' : 'plan_analysis'\r\n  });\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n\r\n  const handleAddMaterial = () => {\r\n    if (!newMaterial?.name || !newMaterial?.quantity || !newMaterial?.unitPrice) return;\r\n\r\n    const material = {\r\n      id: Date.now(),\r\n      ...newMaterial,\r\n      total: newMaterial?.quantity * newMaterial?.unitPrice,\r\n      identified: true\r\n    };\r\n\r\n    const updatedMaterials = [...materials, material];\r\n    setMaterials(updatedMaterials);\r\n    onMaterialUpdate?.(updatedMaterials);\r\n\r\n    setNewMaterial({\r\n      name: '',\r\n      quantity: 1,\r\n      unitPrice: 0,\r\n      source: quotation?.hasCatalog ? 'catalog' : 'plan_analysis'\r\n    });\r\n  };\r\n\r\n  const handleMaterialChange = (id, field, value) => {\r\n    const updatedMaterials = materials?.map(material => {\r\n      if (material?.id === id) {\r\n        const updatedMaterial = { ...material, [field]: value };\r\n        if (field === 'quantity' || field === 'unitPrice') {\r\n          updatedMaterial.total = updatedMaterial?.quantity * updatedMaterial?.unitPrice;\r\n        }\r\n        return updatedMaterial;\r\n      }\r\n      return material;\r\n    });\r\n\r\n    setMaterials(updatedMaterials);\r\n    onMaterialUpdate?.(updatedMaterials);\r\n  };\r\n\r\n  const handleRemoveMaterial = (id) => {\r\n    const updatedMaterials = materials?.filter(material => material?.id !== id);\r\n    setMaterials(updatedMaterials);\r\n    onMaterialUpdate?.(updatedMaterials);\r\n  };\r\n\r\n  const handleAutoIdentify = async () => {\r\n    setIsAnalyzing(true);\r\n    await new Promise(resolve => setTimeout(resolve, 3000));\r\n\r\n    // Simulate automatic material identification\r\n    const autoMaterials = [\r\n      {\r\n        id: Date.now() + 1,\r\n        name: \"Diffusor Lineal 600mm\",\r\n        quantity: 12,\r\n        unitPrice: 850,\r\n        total: 10200,\r\n        source: \"plan_analysis\",\r\n        identified: true,\r\n        confidence: 95\r\n      },\r\n      {\r\n        id: Date.now() + 2,\r\n        name: \"Tuber√≠a Cobre 1/2\\\"\",\r\n        quantity: 25,\r\n        unitPrice: 320,\r\n        total: 8000,\r\n        source: \"plan_analysis\",\r\n        identified: true,\r\n        confidence: 88\r\n      }\r\n    ];\r\n\r\n    const updatedMaterials = [...materials, ...autoMaterials];\r\n    setMaterials(updatedMaterials);\r\n    onMaterialUpdate?.(updatedMaterials);\r\n    setIsAnalyzing(false);\r\n  };\r\n\r\n  const getTotalValue = () => {\r\n    return materials?.reduce((sum, material) => sum + (material?.total || 0), 0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold\">Identificaci√≥n de Materiales</h3>\r\n        <div className=\"flex space-x-2\">\r\n          {!quotation?.hasCatalog && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName={isAnalyzing ? \"Loader2\" : \"Search\"}\r\n              iconPosition=\"left\"\r\n              onClick={handleAutoIdentify}\r\n              disabled={isAnalyzing}\r\n            >\r\n              {isAnalyzing ? 'Analizando...' : 'Auto-Identificar'}\r\n            </Button>\r\n          )}\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Upload\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Importar desde Inventario\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Source Method */}\r\n      <div className={`p-4 rounded-lg ${\r\n        quotation?.hasCatalog ? 'bg-green-50 border-green-200' : 'bg-yellow-50 border-yellow-200'\r\n      }`}>\r\n        <div className=\"flex items-center space-x-2 mb-2\">\r\n          <Icon \r\n            name={quotation?.hasCatalog ? \"Book\" : \"FileText\"} \r\n            size={16} \r\n            className={quotation?.hasCatalog ? \"text-green-600\" : \"text-yellow-600\"} \r\n          />\r\n          <h4 className={`font-medium ${\r\n            quotation?.hasCatalog ? \"text-green-800\" : \"text-yellow-800\"\r\n          }`}>\r\n            {quotation?.hasCatalog ? \"Identificaci√≥n desde Cat√°logo\" : \"Identificaci√≥n desde Planos\"}\r\n          </h4>\r\n        </div>\r\n        <p className={`text-sm ${\r\n          quotation?.hasCatalog ? \"text-green-700\" : \"text-yellow-700\"\r\n        }`}>\r\n          {quotation?.hasCatalog \r\n            ? \"Materiales identificados autom√°ticamente desde el cat√°logo proporcionado por el cliente\"\r\n            : \"Materiales identificados mediante an√°lisis de planos de obra y especificaciones t√©cnicas\"\r\n          }\r\n        </p>\r\n      </div>\r\n      {/* Add New Material */}\r\n      <div className=\"bg-gray-50 rounded-lg p-4\">\r\n        <h4 className=\"font-medium mb-3\">Agregar Nuevo Material</h4>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-1 block\">Descripci√≥n</label>\r\n            <Input\r\n              value={newMaterial?.name}\r\n              onChange={(e) => setNewMaterial(prev => ({ ...prev, name: e?.target?.value }))}\r\n              placeholder=\"Nombre del material...\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-1 block\">Cantidad</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={newMaterial?.quantity}\r\n              onChange={(e) => setNewMaterial(prev => ({ ...prev, quantity: parseInt(e?.target?.value) || 1 }))}\r\n              min=\"1\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-medium mb-1 block\">Precio Unitario</label>\r\n            <Input\r\n              type=\"number\"\r\n              value={newMaterial?.unitPrice}\r\n              onChange={(e) => setNewMaterial(prev => ({ ...prev, unitPrice: parseFloat(e?.target?.value) || 0 }))}\r\n              min=\"0\"\r\n              step=\"0.01\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n          <div className=\"flex items-end\">\r\n            <Button\r\n              onClick={handleAddMaterial}\r\n              iconName=\"Plus\"\r\n              iconPosition=\"left\"\r\n              size=\"sm\"\r\n              className=\"w-full\"\r\n              disabled={!newMaterial?.name || !newMaterial?.quantity || !newMaterial?.unitPrice}\r\n            >\r\n              Agregar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Materials Table */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"font-medium\">Lista de Materiales Identificados</h4>\r\n        \r\n        {materials?.length > 0 ? (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-sm border rounded-lg\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"text-left p-3 font-medium\">Material</th>\r\n                  <th className=\"text-center p-3 font-medium\">Fuente</th>\r\n                  <th className=\"text-center p-3 font-medium\">Cantidad</th>\r\n                  <th className=\"text-right p-3 font-medium\">Precio Unit.</th>\r\n                  <th className=\"text-right p-3 font-medium\">Total</th>\r\n                  <th className=\"text-center p-3 font-medium\">Acciones</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"divide-y divide-gray-200\">\r\n                {materials?.map((material) => (\r\n                  <tr key={material?.id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"p-3\">\r\n                      <Input\r\n                        value={material?.name}\r\n                        onChange={(e) => handleMaterialChange(material?.id, 'name', e?.target?.value)}\r\n                        className=\"text-sm border-none bg-transparent\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"p-3 text-center\">\r\n                      <div className=\"flex items-center justify-center space-x-1\">\r\n                        <Icon \r\n                          name={material?.source === 'catalog' ? 'Book' : 'FileText'} \r\n                          size={14} \r\n                          className={material?.source === 'catalog' ? 'text-green-600' : 'text-blue-600'} \r\n                        />\r\n                        <span className=\"text-xs\">\r\n                          {material?.source === 'catalog' ? 'Cat√°logo' : 'Planos'}\r\n                        </span>\r\n                        {material?.confidence && (\r\n                          <span className=\"text-xs text-gray-500\">({material?.confidence}%)</span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"p-3\">\r\n                      <Input\r\n                        type=\"number\"\r\n                        value={material?.quantity}\r\n                        onChange={(e) => handleMaterialChange(material?.id, 'quantity', parseInt(e?.target?.value) || 1)}\r\n                        className=\"text-sm text-center w-20 mx-auto\"\r\n                        min=\"1\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"p-3\">\r\n                      <Input\r\n                        type=\"number\"\r\n                        value={material?.unitPrice}\r\n                        onChange={(e) => handleMaterialChange(material?.id, 'unitPrice', parseFloat(e?.target?.value) || 0)}\r\n                        className=\"text-sm text-right w-24 ml-auto\"\r\n                        min=\"0\"\r\n                        step=\"0.01\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"p-3 text-right font-medium\">\r\n                      ${material?.total?.toLocaleString('es-MX')}\r\n                    </td>\r\n                    <td className=\"p-3 text-center\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        iconName=\"Trash2\"\r\n                        onClick={() => handleRemoveMaterial(material?.id)}\r\n                        className=\"text-red-600 hover:text-red-800\"\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n              <tfoot className=\"bg-gray-50\">\r\n                <tr>\r\n                  <td colSpan=\"4\" className=\"p-3 text-right font-medium\">Total de Materiales:</td>\r\n                  <td className=\"p-3 text-right font-bold text-lg\">\r\n                    ${getTotalValue()?.toLocaleString('es-MX')}\r\n                  </td>\r\n                  <td className=\"p-3\"></td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-8 bg-gray-50 rounded-lg\">\r\n            <Icon name=\"Package\" size={48} className=\"text-gray-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No hay materiales identificados</h3>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              {quotation?.hasCatalog \r\n                ? \"Agregue materiales desde el cat√°logo del cliente\" :\"Use la identificaci√≥n autom√°tica o agregue materiales manualmente\"\r\n              }\r\n            </p>\r\n            {!quotation?.hasCatalog && (\r\n              <Button\r\n                onClick={handleAutoIdentify}\r\n                disabled={isAnalyzing}\r\n                iconName={isAnalyzing ? \"Loader2\" : \"Search\"}\r\n                iconPosition=\"left\"\r\n              >\r\n                {isAnalyzing ? 'Analizando planos...' : 'Iniciar Identificaci√≥n Autom√°tica'}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Integration with Inventory */}\r\n      <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Link\" size={16} className=\"text-blue-600 mt-0.5\" />\r\n          <div className=\"text-sm text-blue-800\">\r\n            <p className=\"font-medium mb-1\">Integraci√≥n con Sistema de Inventario</p>\r\n            <p>Los materiales identificados se pueden sincronizar autom√°ticamente con el inventario para verificar disponibilidad y actualizar precios en tiempo real.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaterialIdentification;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst CommunicationPanel = ({ quotation, onSend, isSending }) => {\r\n  const [communicationMethod, setCommunicationMethod] = useState('email');\r\n  const [message, setMessage] = useState('');\r\n  const [adjustmentNotes, setAdjustmentNotes] = useState('');\r\n  const [showAdjustments, setShowAdjustments] = useState(false);\r\n\r\n  const handleSend = () => {\r\n    onSend?.(communicationMethod, message);\r\n  };\r\n\r\n  const generateDefaultMessage = () => {\r\n    const defaultMessages = {\r\n      email: `Estimado ${quotation?.client?.name},\r\n\r\nAdjunto encontrar√° la cotizaci√≥n ${quotation?.id} para el proyecto \"${quotation?.projectName}\".\r\n\r\nResumen:\r\n- Total del proyecto: $${quotation?.calculations?.total?.toLocaleString('es-MX')} MXN\r\n- Anticipo requerido (30%): $${quotation?.calculations?.advance?.toLocaleString('es-MX')} MXN\r\n- Garant√≠a: ${quotation?.calculations?.warranty}\r\n\r\nEsta cotizaci√≥n tiene vigencia de 30 d√≠as. Quedamos a sus √≥rdenes para cualquier aclaraci√≥n.\r\n\r\nSaludos cordiales,\r\nEquipo AireFlow Pro`,\r\n      \r\n      whatsapp: `Hola ${quotation?.client?.name} üëã\r\n\r\nLe enviamos la cotizaci√≥n ${quotation?.id} para \"${quotation?.projectName}\":\r\n\r\nüí∞ Total: $${quotation?.calculations?.total?.toLocaleString('es-MX')} MXN\r\nüìã Anticipo: $${quotation?.calculations?.advance?.toLocaleString('es-MX')} (30%)\r\nüõ°Ô∏è Garant√≠a: ${quotation?.calculations?.warranty}\r\n\r\nVigencia: 30 d√≠as\r\n¬øTiene alguna pregunta? ü§î`\r\n    };\r\n\r\n    setMessage(defaultMessages?.[communicationMethod] || '');\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold\">Comunicaci√≥n con Cliente</h3>\r\n        {quotation?.communication?.sentAt && (\r\n          <div className=\"text-sm text-green-600 flex items-center space-x-1\">\r\n            <Icon name=\"CheckCircle\" size={16} />\r\n            <span>Enviado {new Date(quotation?.communication?.sentAt)?.toLocaleDateString('es-MX')}</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Previous Communications */}\r\n      {quotation?.communication?.adjustments > 0 && (\r\n        <div className=\"p-4 bg-amber-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name=\"RotateCcw\" size={16} className=\"text-amber-600\" />\r\n            <h4 className=\"font-medium text-amber-800\">Historial de Ajustes</h4>\r\n          </div>\r\n          <p className=\"text-sm text-amber-700\">\r\n            Esta cotizaci√≥n ha tenido {quotation?.communication?.adjustments} ajuste(s) basados en comentarios del cliente.\r\n          </p>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Eye\"\r\n            iconPosition=\"left\"\r\n            className=\"mt-2\"\r\n            onClick={() => setShowAdjustments(!showAdjustments)}\r\n          >\r\n            {showAdjustments ? 'Ocultar' : 'Ver'} Historial\r\n          </Button>\r\n        </div>\r\n      )}\r\n      {/* Communication Method Selection */}\r\n      <div className=\"space-y-4\">\r\n        <h4 className=\"font-medium\">M√©todo de Env√≠o</h4>\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <div\r\n            onClick={() => setCommunicationMethod('email')}\r\n            className={`p-4 rounded-lg border-2 cursor-pointer transition-all ${\r\n              communicationMethod === 'email' ?'border-primary bg-primary/10' :'border-gray-200 hover:border-gray-300'\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Icon name=\"Mail\" size={20} className={communicationMethod === 'email' ? 'text-primary' : 'text-gray-600'} />\r\n              <div>\r\n                <h5 className=\"font-medium\">Correo Electr√≥nico</h5>\r\n                <p className=\"text-sm text-gray-600\">Env√≠o formal con PDF adjunto</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            onClick={() => setCommunicationMethod('whatsapp')}\r\n            className={`p-4 rounded-lg border-2 cursor-pointer transition-all ${\r\n              communicationMethod === 'whatsapp' ?'border-primary bg-primary/10' :'border-gray-200 hover:border-gray-300'\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Icon name=\"MessageCircle\" size={20} className={communicationMethod === 'whatsapp' ? 'text-primary' : 'text-gray-600'} />\r\n              <div>\r\n                <h5 className=\"font-medium\">WhatsApp</h5>\r\n                <p className=\"text-sm text-gray-600\">Comunicaci√≥n r√°pida e informal</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Message Composition */}\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h4 className=\"font-medium\">Mensaje de Acompa√±amiento</h4>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"FileText\"\r\n            iconPosition=\"left\"\r\n            onClick={generateDefaultMessage}\r\n          >\r\n            Generar Mensaje\r\n          </Button>\r\n        </div>\r\n\r\n        <textarea\r\n          value={message}\r\n          onChange={(e) => setMessage(e?.target?.value)}\r\n          placeholder={`Escriba su mensaje ${communicationMethod === 'email' ? 'de correo' : 'de WhatsApp'}...`}\r\n          className=\"w-full p-3 border rounded-lg resize-none\"\r\n          rows={communicationMethod === 'email' ? 8 : 6}\r\n        />\r\n\r\n        <div className=\"text-xs text-gray-500\">\r\n          {communicationMethod === 'email' \r\n            ? \"Se adjuntar√° autom√°ticamente el PDF de la cotizaci√≥n\" :\"Se incluir√° un enlace para descargar la cotizaci√≥n\"\r\n          }\r\n        </div>\r\n      </div>\r\n      {/* Client Contact Information */}\r\n      <div className=\"p-4 bg-gray-50 rounded-lg\">\r\n        <h4 className=\"font-medium mb-2\">Informaci√≥n de Contacto</h4>\r\n        <div className=\"text-sm space-y-1\">\r\n          <p><span className=\"font-medium\">Cliente:</span> {quotation?.client?.name}</p>\r\n          <p><span className=\"font-medium\">Contacto:</span> {quotation?.client?.contact}</p>\r\n          <p><span className=\"font-medium\">Proyecto:</span> {quotation?.projectName}</p>\r\n        </div>\r\n      </div>\r\n      {/* Quotation Summary */}\r\n      <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n        <h4 className=\"font-medium mb-2 text-blue-900\">Resumen de Cotizaci√≥n</h4>\r\n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n          <div>\r\n            <p className=\"text-blue-700\">Total del Proyecto</p>\r\n            <p className=\"font-bold text-lg text-blue-900\">${quotation?.calculations?.total?.toLocaleString('es-MX')}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-blue-700\">Anticipo Requerido</p>\r\n            <p className=\"font-bold text-lg text-blue-900\">${quotation?.calculations?.advance?.toLocaleString('es-MX')}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-2 text-xs text-blue-600\">\r\n          Garant√≠a: {quotation?.calculations?.warranty} | Vigencia: 30 d√≠as\r\n        </div>\r\n      </div>\r\n      {/* Adjustment Notes (if needed) */}\r\n      {quotation?.communication?.adjustments > 0 && (\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium\">Notas sobre Ajustes Realizados</label>\r\n          <textarea\r\n            value={adjustmentNotes}\r\n            onChange={(e) => setAdjustmentNotes(e?.target?.value)}\r\n            placeholder=\"Describa los cambios realizados basados en comentarios del cliente...\"\r\n            className=\"w-full p-3 border rounded-lg resize-none\"\r\n            rows={3}\r\n          />\r\n        </div>\r\n      )}\r\n      {/* Send Actions */}\r\n      <div className=\"flex justify-end space-x-4\">\r\n        <Button\r\n          variant=\"outline\"\r\n          iconName=\"Save\"\r\n          iconPosition=\"left\"\r\n        >\r\n          Guardar Borrador\r\n        </Button>\r\n        <Button\r\n          onClick={handleSend}\r\n          disabled={isSending || !message?.trim()}\r\n          iconName={isSending ? \"Loader2\" : communicationMethod === 'email' ? \"Mail\" : \"MessageCircle\"}\r\n          iconPosition=\"left\"\r\n        >\r\n          {isSending \r\n            ? 'Enviando...' \r\n            : `Enviar por ${communicationMethod === 'email' ? 'Correo' : 'WhatsApp'}`\r\n          }\r\n        </Button>\r\n      </div>\r\n      {/* Process Information */}\r\n      <div className=\"p-4 bg-green-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={16} className=\"text-green-600 mt-0.5\" />\r\n          <div className=\"text-sm text-green-800\">\r\n            <p className=\"font-medium mb-1\">Siguiente Paso del Proceso</p>\r\n            <p>Una vez enviada la propuesta, se activar√° el seguimiento autom√°tico. Si el cliente requiere ajustes, estos se pueden gestionar desde el panel de comunicaci√≥n.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommunicationPanel;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst VersionControl = ({ quotation, onVersionSelect }) => {\r\n  // Mock version history\r\n  const versionHistory = [\r\n    {\r\n      version: 3,\r\n      createdAt: '2024-03-25T16:30:00Z',\r\n      createdBy: 'Ana Rodr√≠guez',\r\n      changes: 'Ajuste en precios de materiales seg√∫n comentarios del cliente',\r\n      status: 'current',\r\n      total: quotation?.calculations?.total\r\n    },\r\n    {\r\n      version: 2,\r\n      createdAt: '2024-03-24T10:15:00Z',\r\n      createdBy: 'Carlos Mart√≠nez',\r\n      changes: 'Reducci√≥n en porcentaje de vi√°ticos de 12% a 8%',\r\n      status: 'superseded',\r\n      total: (quotation?.calculations?.total || 0) + 15000\r\n    },\r\n    {\r\n      version: 1,\r\n      createdAt: '2024-03-20T14:45:00Z',\r\n      createdBy: 'Sistema',\r\n      changes: 'Versi√≥n inicial generada autom√°ticamente',\r\n      status: 'superseded',\r\n      total: (quotation?.calculations?.total || 0) + 25000\r\n    }\r\n  ];\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'current': return 'bg-green-100 text-green-800';\r\n      case 'superseded': return 'bg-gray-100 text-gray-800';\r\n      default: return 'bg-blue-100 text-blue-800';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'current': return 'Actual';\r\n      case 'superseded': return 'Anterior';\r\n      default: return 'Borrador';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg shadow-sm border p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold\">Control de Versiones</h3>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          iconName=\"GitBranch\"\r\n          iconPosition=\"left\"\r\n        >\r\n          Nueva Versi√≥n\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {versionHistory?.map((version) => (\r\n          <div\r\n            key={version?.version}\r\n            className={`p-4 rounded-lg border transition-all cursor-pointer hover:shadow-md ${\r\n              version?.status === 'current' ? 'border-primary bg-primary/5' : 'border-gray-200'\r\n            }`}\r\n            onClick={() => onVersionSelect?.(version)}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className={`text-xs px-2 py-1 rounded-full font-medium ${getStatusColor(version?.status)}`}>\r\n                  v{version?.version}\r\n                </div>\r\n                <span className={`text-xs px-2 py-1 rounded-full ${\r\n                  version?.status === 'current' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'\r\n                }`}>\r\n                  {getStatusLabel(version?.status)}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-sm font-medium\">${version?.total?.toLocaleString('es-MX')}</p>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  {new Date(version?.createdAt)?.toLocaleDateString('es-MX')}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-2\">\r\n              <p className=\"text-sm text-gray-900\">{version?.changes}</p>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Icon name=\"User\" size={14} className=\"text-gray-400\" />\r\n                <span className=\"text-xs text-gray-600\">{version?.createdBy}</span>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Icon name=\"Clock\" size={14} className=\"text-gray-400\" />\r\n                <span className=\"text-xs text-gray-600\">\r\n                  {new Date(version?.createdAt)?.toLocaleTimeString('es-MX', { \r\n                    hour: '2-digit', \r\n                    minute: '2-digit' \r\n                  })}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {version?.status === 'current' && (\r\n              <div className=\"mt-3 pt-3 border-t border-primary/20\">\r\n                <div className=\"flex items-center space-x-4 text-xs\">\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Icon name=\"CheckCircle\" size={12} className=\"text-green-600\" />\r\n                    <span className=\"text-green-600\">Versi√≥n activa</span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Icon name=\"Download\" size={12} className=\"text-blue-600\" />\r\n                    <span className=\"text-blue-600\">PDF disponible</span>\r\n                  </div>\r\n                  {quotation?.communication?.sentAt && (\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <Icon name=\"Send\" size={12} className=\"text-purple-600\" />\r\n                      <span className=\"text-purple-600\">Enviada al cliente</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Version Control Info */}\r\n      <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <Icon name=\"Info\" size={16} className=\"text-blue-600 mt-0.5\" />\r\n          <div className=\"text-sm text-blue-800\">\r\n            <p className=\"font-medium mb-1\">Control de Versiones Colaborativo</p>\r\n            <p>El sistema mantiene un historial completo de cambios para facilitar la colaboraci√≥n en tiempo real y el seguimiento de ajustes basados en feedback del cliente.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VersionControl;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport QuotationForm from './components/QuotationForm';\r\nimport QuotationPreview from './components/QuotationPreview';\r\nimport MaterialIdentification from './components/MaterialIdentification';\r\nimport CommunicationPanel from './components/CommunicationPanel';\r\nimport VersionControl from './components/VersionControl';\r\n\r\nconst QuotationBuilder = () => {\r\n  const [currentQuotation, setCurrentQuotation] = useState(null);\r\n  const [quotations, setQuotations] = useState([]);\r\n  const [activeStep, setActiveStep] = useState('form');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n\r\n  // Mock data for quotations\r\n  const mockQuotations = [\r\n    {\r\n      id: \"QUO-2024-001\",\r\n      projectId: \"PROJ-WF-001\",\r\n      projectName: \"Instalaci√≥n HVAC Torre Corporativa\",\r\n      client: {\r\n        name: \"ABC Corporation\",\r\n        contact: \"contacto@abccorp.com\",\r\n        address: \"Av. Reforma 123, Ciudad de M√©xico\"\r\n      },\r\n      status: \"draft\",\r\n      statusLabel: \"Borrador\",\r\n      createdAt: \"2024-03-20T10:00:00Z\",\r\n      updatedAt: \"2024-03-25T14:30:00Z\",\r\n      version: 1,\r\n      hasCatalog: true,\r\n      materials: [\r\n        { \r\n          id: 1, \r\n          name: \"Unidad Manejadora de Aire 10 TR\", \r\n          quantity: 2, \r\n          unitPrice: 45000, \r\n          total: 90000,\r\n          identified: true,\r\n          source: \"catalog\"\r\n        },\r\n        { \r\n          id: 2, \r\n          name: \"Ductos Galvanizados 24x18\", \r\n          quantity: 50, \r\n          unitPrice: 850, \r\n          total: 42500,\r\n          identified: true,\r\n          source: \"catalog\"\r\n        },\r\n        { \r\n          id: 3, \r\n          name: \"Rejillas de Retorno 24x24\", \r\n          quantity: 8, \r\n          unitPrice: 1200, \r\n          total: 9600,\r\n          identified: true,\r\n          source: \"plan_analysis\"\r\n        }\r\n      ],\r\n      calculations: {\r\n        installationPercentage: 25,\r\n        parts: 15,\r\n        travel: 8,\r\n        personnel: 12,\r\n        subtotal: 142100,\r\n        installationCost: 35525,\r\n        partsCost: 21315,\r\n        travelCost: 11368,\r\n        personnelCost: 17052,\r\n        total: 227360,\r\n        advance: 68208, // 30%\r\n        progress: 159152, // 70%\r\n        warranty: \"12 meses\"\r\n      },\r\n      communication: {\r\n        method: \"email\",\r\n        sentAt: null,\r\n        adjustments: 0\r\n      },\r\n      notes: \"Cotizaci√≥n basada en cat√°logo proporcionado por cliente\"\r\n    },\r\n    {\r\n      id: \"QUO-2024-002\",\r\n      projectId: \"PROJ-WF-003\",\r\n      projectName: \"Actualizaci√≥n Sistema Residencial\",\r\n      client: {\r\n        name: \"Green Energy M√©xico\",\r\n        contact: \"info@greenenergy.mx\",\r\n        address: \"Calle Innovaci√≥n 456, Monterrey\"\r\n      },\r\n      status: \"pending_validation\",\r\n      statusLabel: \"Pendiente Validaci√≥n\",\r\n      createdAt: \"2024-03-18T09:00:00Z\",\r\n      updatedAt: \"2024-03-24T16:45:00Z\",\r\n      version: 2,\r\n      hasCatalog: false,\r\n      materials: [\r\n        { \r\n          id: 1, \r\n          name: \"Bomba de Calor Residencial 3 TR\", \r\n          quantity: 1, \r\n          unitPrice: 28000, \r\n          total: 28000,\r\n          identified: true,\r\n          source: \"plan_analysis\"\r\n        },\r\n        { \r\n          id: 2, \r\n          name: \"Termostato Programable WiFi\", \r\n          quantity: 3, \r\n          unitPrice: 2500, \r\n          total: 7500,\r\n          identified: true,\r\n          source: \"plan_analysis\"\r\n        }\r\n      ],\r\n      calculations: {\r\n        installationPercentage: 20,\r\n        parts: 18,\r\n        travel: 12,\r\n        personnel: 15,\r\n        subtotal: 35500,\r\n        installationCost: 7100,\r\n        partsCost: 6390,\r\n        travelCost: 4260,\r\n        personnelCost: 5325,\r\n        total: 58575,\r\n        advance: 17572, // 30%\r\n        progress: 41003, // 70%\r\n        warranty: \"18 meses\"\r\n      },\r\n      communication: {\r\n        method: \"whatsapp\",\r\n        sentAt: null,\r\n        adjustments: 1\r\n      },\r\n      notes: \"Materiales identificados desde planos de obra. Requiere validaci√≥n.\"\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadQuotations = async () => {\r\n      setIsLoading(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      setQuotations(mockQuotations);\r\n      setCurrentQuotation(mockQuotations?.[0]);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    loadQuotations();\r\n  }, []);\r\n\r\n  const handleQuotationUpdate = (updatedData) => {\r\n    setCurrentQuotation(prev => ({\r\n      ...prev,\r\n      ...updatedData,\r\n      updatedAt: new Date()?.toISOString()\r\n    }));\r\n  };\r\n\r\n  const handleMaterialUpdate = (materials) => {\r\n    const subtotal = materials?.reduce((sum, item) => sum + (item?.total || 0), 0);\r\n    \r\n    const calculations = {\r\n      ...currentQuotation?.calculations,\r\n      subtotal,\r\n      installationCost: (currentQuotation?.calculations?.installationPercentage / 100) * subtotal,\r\n      partsCost: (currentQuotation?.calculations?.parts / 100) * subtotal,\r\n      travelCost: (currentQuotation?.calculations?.travel / 100) * subtotal,\r\n      personnelCost: (currentQuotation?.calculations?.personnel / 100) * subtotal\r\n    };\r\n    \r\n    calculations.total = calculations?.installationCost + calculations?.partsCost + calculations?.travelCost + calculations?.personnelCost + subtotal;\r\n    calculations.advance = (30 / 100) * calculations?.total;\r\n    calculations.progress = (70 / 100) * calculations?.total;\r\n\r\n    setCurrentQuotation(prev => ({\r\n      ...prev,\r\n      materials,\r\n      calculations,\r\n      updatedAt: new Date()?.toISOString()\r\n    }));\r\n  };\r\n\r\n  const handleCalculationUpdate = (calculations) => {\r\n    const updatedCalculations = {\r\n      ...calculations,\r\n      installationCost: (calculations?.installationPercentage / 100) * currentQuotation?.calculations?.subtotal,\r\n      partsCost: (calculations?.parts / 100) * currentQuotation?.calculations?.subtotal,\r\n      travelCost: (calculations?.travel / 100) * currentQuotation?.calculations?.subtotal,\r\n      personnelCost: (calculations?.personnel / 100) * currentQuotation?.calculations?.subtotal\r\n    };\r\n\r\n    updatedCalculations.total = updatedCalculations?.installationCost + updatedCalculations?.partsCost + \r\n                               updatedCalculations?.travelCost + updatedCalculations?.personnelCost + \r\n                               currentQuotation?.calculations?.subtotal;\r\n    updatedCalculations.advance = (30 / 100) * updatedCalculations?.total;\r\n    updatedCalculations.progress = (70 / 100) * updatedCalculations?.total;\r\n\r\n    setCurrentQuotation(prev => ({\r\n      ...prev,\r\n      calculations: updatedCalculations,\r\n      updatedAt: new Date()?.toISOString()\r\n    }));\r\n  };\r\n\r\n  const handleSaveQuotation = async () => {\r\n    setIsSaving(true);\r\n    await new Promise(resolve => setTimeout(resolve, 1500));\r\n    \r\n    setQuotations(prev => prev?.map(q => \r\n      q?.id === currentQuotation?.id ? currentQuotation : q\r\n    ));\r\n    \r\n    setIsSaving(false);\r\n  };\r\n\r\n  const handleValidationSubmit = async () => {\r\n    setIsSaving(true);\r\n    await new Promise(resolve => setTimeout(resolve, 2000));\r\n    \r\n    const updatedQuotation = {\r\n      ...currentQuotation,\r\n      status: \"pending_validation\",\r\n      statusLabel: \"Pendiente Validaci√≥n\",\r\n      validation: {\r\n        submittedAt: new Date()?.toISOString(),\r\n        reviewer: \"Ventas/Mart√≠n\"\r\n      }\r\n    };\r\n\r\n    setCurrentQuotation(updatedQuotation);\r\n    setQuotations(prev => prev?.map(q => \r\n      q?.id === currentQuotation?.id ? updatedQuotation : q\r\n    ));\r\n    \r\n    setIsSaving(false);\r\n  };\r\n\r\n  const handleCommunicationSend = async (method, message) => {\r\n    setIsSaving(true);\r\n    await new Promise(resolve => setTimeout(resolve, 1500));\r\n    \r\n    const updatedQuotation = {\r\n      ...currentQuotation,\r\n      communication: {\r\n        method,\r\n        sentAt: new Date()?.toISOString(),\r\n        message,\r\n        adjustments: currentQuotation?.communication?.adjustments || 0\r\n      },\r\n      status: \"sent\",\r\n      statusLabel: \"Enviada\"\r\n    };\r\n\r\n    setCurrentQuotation(updatedQuotation);\r\n    setQuotations(prev => prev?.map(q => \r\n      q?.id === currentQuotation?.id ? updatedQuotation : q\r\n    ));\r\n    \r\n    setIsSaving(false);\r\n  };\r\n\r\n  const steps = [\r\n    { id: 'form', label: 'Formulario', icon: 'Edit3' },\r\n    { id: 'materials', label: 'Materiales', icon: 'Package' },\r\n    { id: 'preview', label: 'Vista Previa', icon: 'Eye' },\r\n    { id: 'communication', label: 'Comunicaci√≥n', icon: 'Send' }\r\n  ];\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <div className=\"flex items-center justify-center h-96\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n            <p className=\"text-muted-foreground\">Cargando constructor de cotizaciones...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-foreground mb-2\">Constructor de Cotizaciones</h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Creaci√≥n y gesti√≥n integral de cotizaciones con c√°lculos automatizados\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n            <Button\r\n              variant=\"outline\"\r\n              iconName=\"Download\"\r\n              iconPosition=\"left\"\r\n              // console.log eliminado\r\n            >\r\n              Exportar PDF\r\n            </Button>\r\n            <Button\r\n              onClick={handleSaveQuotation}\r\n              disabled={isSaving}\r\n              iconName={isSaving ? \"Loader2\" : \"Save\"}\r\n              iconPosition=\"left\"\r\n            >\r\n              {isSaving ? 'Guardando...' : 'Guardar Cotizaci√≥n'}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n          {/* Sidebar - Quotation List */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-card rounded-lg shadow-sm border p-4\">\r\n              <h3 className=\"font-semibold mb-4\">Cotizaciones</h3>\r\n              <div className=\"space-y-2\">\r\n                {quotations?.map((quotation) => (\r\n                  <div\r\n                    key={quotation?.id}\r\n                    onClick={() => setCurrentQuotation(quotation)}\r\n                    className={`p-3 rounded-lg cursor-pointer transition-all border ${\r\n                      currentQuotation?.id === quotation?.id\r\n                        ? 'bg-primary/10 border-primary' :'hover:bg-muted border-transparent'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-start justify-between mb-2\">\r\n                      <h4 className=\"font-medium text-sm line-clamp-2\">{quotation?.projectName}</h4>\r\n                      <span className={`text-xs px-2 py-1 rounded-full ${\r\n                        quotation?.status === 'draft' ? 'bg-gray-100 text-gray-800' :\r\n                        quotation?.status === 'pending_validation' ? 'bg-yellow-100 text-yellow-800' :\r\n                        quotation?.status === 'approved'? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'\r\n                      }`}>\r\n                        {quotation?.statusLabel}\r\n                      </span>\r\n                    </div>\r\n                    <p className=\"text-xs text-muted-foreground mb-1\">{quotation?.client?.name}</p>\r\n                    <p className=\"text-xs text-muted-foreground\">{quotation?.id}</p>\r\n                    <div className=\"flex items-center justify-between mt-2\">\r\n                      <span className=\"text-xs text-muted-foreground\">v{quotation?.version}</span>\r\n                      <span className=\"text-xs font-medium\">\r\n                        ${quotation?.calculations?.total?.toLocaleString('es-MX')}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Content */}\r\n          <div className=\"lg:col-span-3\">\r\n            {currentQuotation && (\r\n              <div className=\"space-y-6\">\r\n                {/* Step Navigation */}\r\n                <div className=\"flex bg-muted rounded-lg p-1\">\r\n                  {steps?.map((step) => (\r\n                    <button\r\n                      key={step?.id}\r\n                      onClick={() => setActiveStep(step?.id)}\r\n                      className={`flex items-center space-x-2 px-4 py-2 rounded-md transition-smooth flex-1 justify-center ${\r\n                        activeStep === step?.id\r\n                          ? 'bg-primary text-primary-foreground'\r\n                          : 'text-muted-foreground hover:text-foreground'\r\n                      }`}\r\n                    >\r\n                      <Icon name={step?.icon} size={16} />\r\n                      <span className=\"hidden sm:inline text-sm\">{step?.label}</span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Current Quotation Info */}\r\n                <div className=\"bg-card rounded-lg shadow-sm border p-4\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <div>\r\n                      <h3 className=\"font-semibold\">{currentQuotation?.projectName}</h3>\r\n                      <p className=\"text-sm text-muted-foreground\">{currentQuotation?.client?.name}</p>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"text-sm font-medium\">{currentQuotation?.id}</p>\r\n                      <p className=\"text-xs text-muted-foreground\">Versi√≥n {currentQuotation?.version}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Catalog Status */}\r\n                  {currentQuotation?.hasCatalog ? (\r\n                    <div className=\"p-3 bg-green-50 rounded-lg\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                        <p className=\"text-sm text-green-800 font-medium\">Cotizaci√≥n desde cat√°logo cliente</p>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"p-3 bg-yellow-50 rounded-lg\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon name=\"Search\" size={16} className=\"text-yellow-600\" />\r\n                        <p className=\"text-sm text-yellow-800 font-medium\">Identificaci√≥n de materiales desde planos</p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Step Content */}\r\n                <div className=\"bg-card rounded-lg shadow-sm border\">\r\n                  {activeStep === 'form' && (\r\n                    <QuotationForm\r\n                      quotation={currentQuotation}\r\n                      onUpdate={handleQuotationUpdate}\r\n                      onCalculationUpdate={handleCalculationUpdate}\r\n                      onValidationSubmit={handleValidationSubmit}\r\n                      isSaving={isSaving}\r\n                    />\r\n                  )}\r\n\r\n                  {activeStep === 'materials' && (\r\n                    <MaterialIdentification\r\n                      quotation={currentQuotation}\r\n                      onMaterialUpdate={handleMaterialUpdate}\r\n                    />\r\n                  )}\r\n\r\n                  {activeStep === 'preview' && (\r\n                    <QuotationPreview\r\n                      quotation={currentQuotation}\r\n                      // console.log eliminado\r\n                    />\r\n                  )}\r\n\r\n                  {activeStep === 'communication' && (\r\n                    <CommunicationPanel\r\n                      quotation={currentQuotation}\r\n                      onSend={handleCommunicationSend}\r\n                      isSending={isSaving}\r\n                    />\r\n                  )}\r\n                </div>\r\n\r\n                {/* Version Control */}\r\n                <VersionControl\r\n                  quotation={currentQuotation}\r\n                  // console.log eliminado\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationBuilder;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\nconst OrderDetailsModal = ({ isOpen, onClose, order }) => {\r\n  if (!isOpen || !order) return null;\r\n\r\n  const handleDownloadPDF = () => {\r\n    const doc = new jsPDF();\r\n    \r\n    // Configuraci√≥n inicial\r\n    doc.setFontSize(20);\r\n    doc.text('Orden de Compra', 105, 15, { align: 'center' });\r\n    doc.setFontSize(12);\r\n\r\n    // Informaci√≥n del encabezado\r\n    doc.text(`N√∫mero: ${order.numeroOrden}`, 15, 30);\r\n    doc.text(`Fecha: ${formatDate(order.fechaCreacion)}`, 15, 40);\r\n    doc.text(`Estado: ${getStatusLabel(order.estado)}`, 15, 50);\r\n    doc.text(`Proveedor: ${order.proveedor?.nombre}`, 15, 60);\r\n    doc.text(`T√©rminos de Pago: ${getPaymentTermLabel(order.terminosPago)}`, 15, 70);\r\n    \r\n    if (order.fechaEntregaEsperada) {\r\n      doc.text(`Entrega Esperada: ${formatDate(order.fechaEntregaEsperada)}`, 15, 80);\r\n    }\r\n\r\n    // Tabla de art√≠culos\r\n    const tableColumns = [\r\n      { header: 'C√≥digo', dataKey: 'codigo' },\r\n      { header: 'Nombre', dataKey: 'nombre' },\r\n      { header: 'Descripci√≥n', dataKey: 'descripcion' },\r\n      { header: 'Cantidad', dataKey: 'cantidad' },\r\n      { header: 'Costo Unit.', dataKey: 'costoUnitario' },\r\n      { header: 'Subtotal', dataKey: 'subtotal' }\r\n    ];\r\n\r\n    const tableRows = order.articulos?.map(item => ({\r\n      codigo: item.codigoArticulo,\r\n      nombre: item.nombre || item.descripcion || item.codigoArticulo,\r\n      descripcion: item.descripcion,\r\n      cantidad: `${item.cantidadOrdenada} ${item.unidad}`,\r\n      costoUnitario: formatCurrency(item.costoUnitario),\r\n      subtotal: formatCurrency(item.subtotal)\r\n    }));\r\n\r\n    autoTable(doc, {\r\n      head: [tableColumns.map(col => col.header)],\r\n      body: tableRows.map(row => tableColumns.map(col => row[col.dataKey])),\r\n      startY: 90,\r\n      styles: { fontSize: 10 },\r\n      headStyles: { fillColor: [41, 128, 185] },\r\n    });\r\n\r\n    // Total\r\n    const finalY = doc.previousAutoTable ? doc.previousAutoTable.finalY : 90;\r\n    doc.text(`Total: ${formatCurrency(order.totalOrden)}`, 195, finalY + 10, { align: 'right' });\r\n\r\n    // Notas si existen\r\n    if (order.notas) {\r\n      doc.text('Notas:', 15, finalY + 20);\r\n      doc.setFontSize(10);\r\n      doc.text(order.notas, 15, finalY + 30);\r\n    }\r\n\r\n    // Descargar el PDF\r\n    doc.save(`orden-compra-${order.numeroOrden}.pdf`);\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    }).format(amount);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Intl.DateTimeFormat('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(new Date(date));\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'text-warning bg-warning/10';\r\n      case 'approved': return 'text-primary bg-primary/10';\r\n      case 'received': return 'text-success bg-success/10';\r\n      case 'cancelled': return 'text-error bg-error/10';\r\n      default: return 'text-muted-foreground bg-muted';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'Pendiente';\r\n      case 'approved': return 'Aprobada';\r\n      case 'received': return 'Recibida';\r\n      case 'cancelled': return 'Cancelada';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n  const getPaymentTermLabel = (term) => {\r\n    if (!term) return 'No especificado';\r\n    \r\n    // Convertir a min√∫sculas para hacer la comparaci√≥n insensible a may√∫sculas\r\n    const termLower = term.toLowerCase();\r\n    const terms = {\r\n      'immediate': 'Pago Inmediato',\r\n      'net15': '15 d√≠as',\r\n      'net30': '30 d√≠as',\r\n      'net60': '60 d√≠as',\r\n      'contado': 'Pago de Contado',\r\n      'credito': 'Cr√©dito',\r\n      'custom': 'Personalizado',\r\n      'prepaid': 'Pago por Adelantado',\r\n      'cod': 'Pago Contra Entrega',\r\n      'credit_card': 'Tarjeta de Cr√©dito',\r\n      'wire_transfer': 'Transferencia Bancaria',\r\n      'cash': 'Efectivo'\r\n    };\r\n    return terms[termLower] || 'Otros T√©rminos';\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n      <div className=\"flex min-h-full items-center justify-center p-4 text-center\">\r\n        <div className=\"fixed inset-0 bg-black/50 transition-opacity\" onClick={onClose}></div>\r\n        \r\n        <div className=\"w-full max-w-4xl transform overflow-hidden rounded-lg bg-card text-left align-middle shadow-xl transition-all\">\r\n          {/* Header */}\r\n          <div className=\"bg-muted px-6 py-4 flex items-center justify-between border-b border-border\">\r\n            <h3 className=\"text-lg font-medium text-foreground\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Icon name=\"FileText\" size={18} className=\"text-primary\" />\r\n                <span>Detalles de Orden de Compra</span>\r\n              </div>\r\n            </h3>\r\n            <button onClick={onClose} className=\"rounded-md bg-transparent text-muted-foreground hover:text-foreground\">\r\n              <Icon name=\"X\" size={18} />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"px-6 py-4\">\r\n            {/* Order Header */}\r\n            <div className=\"mb-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h4 className=\"text-xl font-medium mb-1\">{order.numeroOrden}</h4>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Creada el {formatDate(order.fechaCreacion)}\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(order.estado)}`}>\r\n                    {getStatusLabel(order.estado)}\r\n                  </span>\r\n                  {order.esUrgente && (\r\n                    <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-error/10 text-error\">\r\n                      <Icon name=\"AlertCircle\" size={14} className=\"mr-1\" />\r\n                      Urgente\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n                <div>\r\n                  <h5 className=\"text-sm font-medium text-muted-foreground mb-1\">Proveedor</h5>\r\n                  <p className=\"text-foreground\">{order.proveedor?.nombre}</p>\r\n                </div>\r\n                {order.fechaEntregaEsperada && (\r\n                  <div>\r\n                    <h5 className=\"text-sm font-medium text-muted-foreground mb-1\">Entrega Esperada</h5>\r\n                    <p className=\"text-foreground\">{formatDate(order.fechaEntregaEsperada)}</p>\r\n                  </div>\r\n                )}\r\n                <div>\r\n                  <h5 className=\"text-sm font-medium text-muted-foreground mb-1\">T√©rminos de Pago</h5>\r\n                  <p className=\"text-foreground\">{getPaymentTermLabel(order.terminosPago)}</p>\r\n                </div>\r\n              </div>\r\n\r\n              {order.notas && (\r\n                <div className=\"bg-muted p-4 rounded-md\">\r\n                  <h5 className=\"text-sm font-medium mb-2\">Notas</h5>\r\n                  <p className=\"text-sm text-muted-foreground\">{order.notas}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Items Table */}\r\n            <div className=\"border border-border rounded-md mb-6\">\r\n              <table className=\"w-full\">\r\n                <thead className=\"bg-muted\">\r\n                  <tr>\r\n                    <th className=\"px-4 py-3 text-left text-sm font-medium\">C√≥digo</th>\r\n                    <th className=\"px-4 py-3 text-left text-sm font-medium\">Nombre</th>\r\n                    <th className=\"px-4 py-3 text-left text-sm font-medium\">Descripci√≥n</th>\r\n                    <th className=\"px-4 py-3 text-right text-sm font-medium\">Cantidad</th>\r\n                    <th className=\"px-4 py-3 text-right text-sm font-medium\">Costo Unit.</th>\r\n                    <th className=\"px-4 py-3 text-right text-sm font-medium\">Subtotal</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-border\">\r\n                  {order.articulos?.map((item) => (\r\n                    <tr key={item.articuloId} className=\"hover:bg-muted/50\">\r\n                      <td className=\"px-4 py-3 text-sm font-mono\">{item.codigoArticulo}</td>\r\n                      <td className=\"px-4 py-3 text-sm\">{item.nombre}</td>\r\n                      <td className=\"px-4 py-3 text-sm\">{item.descripcion}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-right\">\r\n                        {item.cantidadOrdenada} {item.unidad}\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-sm text-right\">{formatCurrency(item.costoUnitario)}</td>\r\n                      <td className=\"px-4 py-3 text-sm text-right font-medium\">{formatCurrency(item.subtotal)}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n                <tfoot className=\"bg-muted\">\r\n                  <tr>\r\n                    <td colSpan=\"5\" className=\"px-4 py-3 text-right font-medium\">Total:</td>\r\n                    <td className=\"px-4 py-3 text-right text-lg font-bold\">{formatCurrency(order.totalOrden)}</td>\r\n                  </tr>\r\n                </tfoot>\r\n              </table>\r\n            </div>\r\n\r\n            {/* History */}\r\n            {order.historial && order.historial.length > 0 && (\r\n              <div>\r\n                <h5 className=\"font-medium mb-3\">Historial</h5>\r\n                <div className=\"space-y-2\">\r\n                  {order.historial.map((entry, index) => (\r\n                    <div key={index} className=\"flex items-start space-x-3 text-sm\">\r\n                      <div className=\"w-32 flex-shrink-0 text-muted-foreground\">\r\n                        {formatDate(entry.fecha)}\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <span className=\"font-medium\">{entry.usuario}</span>\r\n                        <span className=\"mx-1\">‚Ä¢</span>\r\n                        <span>{entry.accion}</span>\r\n                        {entry.comentarios && (\r\n                          <p className=\"text-muted-foreground mt-1\">{entry.comentarios}</p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"bg-muted px-6 py-4 flex justify-end space-x-2 border-t border-border\">\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"flex items-center space-x-2\"\r\n              onClick={handleDownloadPDF}\r\n            >\r\n              <Icon name=\"Download\" size={18} />\r\n              <span>Descargar PDF</span>\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n            >\r\n              Cerrar\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetailsModal;","// services/ordenCompraService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst ordenCompraService = {\r\n    async getOrdenes() {\r\n        try {\r\n            const data = await httpService.get(\"/ordenCompra/todas\");\r\n            return data;\r\n        } catch (error) {\r\n            console.error(\"Error al obtener √≥rdenes de compra:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async getOrdenById(id) {\r\n        try {\r\n            const data = await httpService.get(`/ordenCompra/detalle/${id}`);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al obtener la orden de compra con ID ${id}:`, error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async getOrdenByNumero(numeroOrden) {\r\n        try {\r\n            const data = await httpService.get(`/ordenCompra/numero/${numeroOrden}`);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al obtener la orden de compra n√∫mero ${numeroOrden}:`, error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async createOrden(payload) {\r\n        try {\r\n            const data = await httpService.post(\"/ordenCompra/crear\", payload);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(\"Error al crear orden de compra:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async updateOrden(id, payload) {\r\n        try {\r\n            const data = await httpService.put(`/ordenCompra/editar/${id}`, payload);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al actualizar la orden de compra con ID ${id}:`, error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async deleteOrden(id) {\r\n        try {\r\n            const data = await httpService.delete(`/ordenCompra/eliminar/${id}`);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al eliminar la orden de compra con ID ${id}:`, error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async hardDeleteOrden(id) {\r\n        try {\r\n            const data = await httpService.delete(`/ordenCompra/hardDelete/${id}`);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al eliminar permanentemente la orden de compra con ID ${id}:`, error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async getOrdenesEliminadas() {\r\n        try {\r\n            const data = await httpService.get(\"/ordenCompra/eliminadas\");\r\n            return data;\r\n        } catch (error) {\r\n            console.error(\"Error al obtener √≥rdenes de compra eliminadas:\", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async restaurarOrden(id) {\r\n        try {\r\n            const data = await httpService.put(`/ordenCompra/restaurar/${id}`);\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`Error al restaurar la orden de compra con ID ${id}:`, error);\r\n            throw error;\r\n        }\r\n    }\r\n};\r\n\r\nexport default ordenCompraService;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\nconst InventoryTable = ({ \r\n  items, \r\n  onViewDetails, \r\n  onUpdateStock, \r\n  onCreatePO,\r\n  onAddItem,\r\n  onGenerateReport\r\n}) => {\r\n  const [sortField, setSortField] = useState('itemCode');\r\n  const [sortDirection, setSortDirection] = useState('asc');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  const handleSort = (field) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection('asc');\r\n    }\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const sortedItems = [...items]?.sort((a, b) => {\r\n    const aValue = a?.[sortField];\r\n    const bValue = b?.[sortField];\r\n    \r\n    if (typeof aValue === 'string') {\r\n      return sortDirection === 'asc' \r\n        ? aValue?.localeCompare(bValue)\r\n        : bValue?.localeCompare(aValue);\r\n    }\r\n    \r\n    return sortDirection === 'asc' ? aValue - bValue : bValue - aValue;\r\n  });\r\n\r\n  // Paginaci√≥n\r\n  const totalItems = sortedItems.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedItems = sortedItems.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  const getStockStatus = (current, reorderPoint) => {\r\n    if (current === 0) return { status: 'out-of-stock', label: 'Agotado', color: 'text-error' };\r\n    if (current <= reorderPoint) return { status: 'low-stock', label: 'Stock Bajo', color: 'text-warning' };\r\n    return { status: 'in-stock', label: 'En Stock', color: 'text-success' };\r\n  };\r\n\r\n  const SortIcon = ({ field }) => {\r\n    if (sortField !== field) return <Icon name=\"ArrowUpDown\" size={16} className=\"text-muted-foreground\" />;\r\n    return <Icon name={sortDirection === 'asc' ? 'ArrowUp' : 'ArrowDown'} size={16} className=\"text-foreground\" />;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Quick Functions */}\r\n\r\n\r\n      <div className=\"bg-card rounded-lg border border-border overflow-hidden\">\r\n        {/* Desktop Table */}\r\n        <div className=\"hidden lg:block overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-muted border-b border-border\">\r\n            <tr>\r\n              <th className=\"text-left p-3 lg:p-4\">\r\n                <button\r\n                  onClick={() => handleSort('itemCode')}\r\n                  className=\"flex items-center space-x-2 font-medium text-sm text-foreground hover:text-primary transition-smooth\"\r\n                >\r\n                  <span>C√≥digo</span>\r\n                  <SortIcon field=\"itemCode\" />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4\">\r\n                <button\r\n                  onClick={() => handleSort('name')}\r\n                  className=\"flex items-center space-x-2 font-medium text-sm text-foreground hover:text-primary transition-smooth\"\r\n                >\r\n                  <span>Nombre</span>\r\n                  <SortIcon field=\"name\" />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4\">\r\n                <button\r\n                  onClick={() => handleSort('description')}\r\n                  className=\"flex items-center space-x-2 font-medium text-sm text-foreground hover:text-primary transition-smooth\"\r\n                >\r\n                  <span>Descripci√≥n</span>\r\n                  <SortIcon field=\"description\" />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4 hidden lg:table-cell\">\r\n                <button\r\n                  onClick={() => handleSort('category')}\r\n                  className=\"flex items-center space-x-2 font-medium text-sm text-foreground hover:text-primary transition-smooth\"\r\n                >\r\n                  <span>Categor√≠a</span>\r\n                  <SortIcon field=\"category\" />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4\">\r\n                <button\r\n                  onClick={() => handleSort('currentStock')}\r\n                  className=\"flex items-center space-x-2 font-medium text-sm text-foreground hover:text-primary transition-smooth\"\r\n                >\r\n                  <span>Stock</span>\r\n                  <SortIcon field=\"currentStock\" />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4 hidden xl:table-cell\">\r\n                <span className=\"font-medium text-sm text-foreground\">Proveedor</span>\r\n              </th>\r\n              <th className=\"text-left p-3 lg:p-4\">\r\n                <span className=\"font-medium text-sm text-foreground\">Estado</span>\r\n              </th>\r\n              <th className=\"text-right p-3 lg:p-4\">\r\n                <span className=\"font-medium text-sm text-foreground\">Acciones</span>\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {paginatedItems?.length === 0 ? (\r\n              <tr>\r\n                <td colSpan=\"7\" className=\"p-8 text-center text-muted-foreground\">\r\n                  <div className=\"flex flex-col items-center space-y-2\">\r\n                    <Icon name=\"Package\" size={48} className=\"text-muted-foreground/50\" />\r\n                    <p className=\"text-lg font-medium\">No hay art√≠culos disponibles</p>\r\n                    <p className=\"text-sm\">Los art√≠culos que agregues aparecer√°n aqu√≠</p>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              paginatedItems?.map((item) => {\r\n              const stockStatus = getStockStatus(item?.currentStock, item?.reorderPoint);\r\n              return (\r\n                <tr key={item?.id} className=\"border-b border-border hover:bg-muted/50 transition-smooth\">\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <span className=\"font-mono text-sm text-foreground\">{item?.itemCode}</span>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <div className=\"font-medium text-sm text-foreground\">{item?.name}</div>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <div className=\"font-medium text-sm text-foreground\">{item?.description}</div>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4 hidden lg:table-cell\">\r\n                    <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-secondary/10 text-secondary\">\r\n                      {item?.category}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <div>\r\n                      <div className=\"font-medium text-sm text-foreground\">{item?.currentStock} {item?.unit}</div>\r\n                      <div className=\"text-xs text-muted-foreground lg:hidden\">Punto: {item?.reorderPoint}</div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4 hidden xl:table-cell\">\r\n                    <div className=\"text-sm font-medium text-foreground truncate max-w-32\">{item?.supplier?.name}</div>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <span className={`inline-flex items-center space-x-1 text-xs font-medium ${stockStatus?.color}`}>\r\n                      <div className={`w-2 h-2 rounded-full ${\r\n                        stockStatus?.status === 'out-of-stock' ? 'bg-error' :\r\n                        stockStatus?.status === 'low-stock' ? 'bg-warning' : 'bg-success'\r\n                      }`} />\r\n                      <span className=\"hidden sm:inline\">{stockStatus?.label}</span>\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"p-3 lg:p-4\">\r\n                    <div className=\"flex items-center justify-end space-x-1\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => onViewDetails(item)}\r\n                        iconName=\"Eye\"\r\n                        iconSize={14}\r\n                        className=\"text-xs px-2 py-1\"\r\n                      >\r\n                        <span className=\"hidden sm:inline\">Ver</span>\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => onUpdateStock(item)}\r\n                        iconName=\"Edit\"\r\n                        iconSize={14}\r\n                        className=\"text-xs px-2 py-1\"\r\n                      >\r\n                        <span className=\"hidden sm:inline\">Editar</span>\r\n                      </Button>\r\n                      {stockStatus?.status !== 'in-stock' && (\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => onCreatePO(item)}\r\n                          iconName=\"ShoppingCart\"\r\n                          iconSize={14}\r\n                          className=\"text-xs px-2 py-1 hidden lg:inline-flex\"\r\n                        >\r\n                          <span className=\"hidden xl:inline\">Ordenar</span>\r\n                        </Button>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* Paginaci√≥n Desktop */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n            <span className=\"text-xs text-muted-foreground ml-3\">\r\n              Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n            <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Cards */}\r\n      <div className=\"lg:hidden space-y-3 p-3 sm:p-4 sm:space-y-4\">\r\n        {paginatedItems?.length === 0 ? (\r\n          <div className=\"flex flex-col items-center space-y-4 py-8\">\r\n            <Icon name=\"Package\" size={48} className=\"text-muted-foreground/50\" />\r\n            <div className=\"text-center\">\r\n              <p className=\"text-lg font-medium text-foreground mb-1\">No hay art√≠culos disponibles</p>\r\n              <p className=\"text-sm text-muted-foreground\">Los art√≠culos que agregues aparecer√°n aqu√≠</p>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          paginatedItems?.map((item) => {\r\n          const stockStatus = getStockStatus(item?.currentStock, item?.reorderPoint);\r\n          return (\r\n            <div key={item?.id} className=\"bg-background border border-border rounded-lg p-3 sm:p-4\">\r\n              <div className=\"flex items-start justify-between mb-3\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"font-mono text-sm text-muted-foreground mb-1\">{item?.itemCode}</div>\r\n                  <div className=\"font-medium text-foreground mb-1\">{item?.description}</div>\r\n                  <div className=\"text-xs text-muted-foreground\">{item?.specifications}</div>\r\n                </div>\r\n                <span className={`inline-flex items-center space-x-1 text-xs font-medium ${stockStatus?.color}`}>\r\n                  <div className={`w-2 h-2 rounded-full ${\r\n                    stockStatus?.status === 'out-of-stock' ? 'bg-error' :\r\n                    stockStatus?.status === 'low-stock' ? 'bg-warning' : 'bg-success'\r\n                  }`} />\r\n                  <span>{stockStatus?.label}</span>\r\n                </span>\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4\">\r\n                <div>\r\n                  <div className=\"text-xs text-muted-foreground\">Stock Actual</div>\r\n                  <div className=\"font-medium text-sm text-foreground\">{item?.currentStock} {item?.unit}</div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"text-xs text-muted-foreground\">Punto Reorden</div>\r\n                  <div className=\"text-sm text-foreground\">{item?.reorderPoint} {item?.unit}</div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"text-xs text-muted-foreground\">Categor√≠a</div>\r\n                  <div className=\"text-sm text-foreground\">{item?.category}</div>\r\n                </div>\r\n                <div>\r\n                  <div className=\"text-xs text-muted-foreground\">Proveedor</div>\r\n                  <div className=\"text-sm font-medium text-foreground truncate\">{item?.supplier?.name}</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onViewDetails(item)}\r\n                  iconName=\"Eye\"\r\n                  iconSize={16}\r\n                  className=\"flex-1 text-xs sm:text-sm\"\r\n                >\r\n                  Ver\r\n                </Button>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onUpdateStock(item)}\r\n                  iconName=\"Edit\"\r\n                  iconSize={16}\r\n                  className=\"flex-1 text-xs sm:text-sm\"\r\n                >\r\n                  Editar\r\n                </Button>\r\n                {stockStatus?.status !== 'in-stock' && (\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => onCreatePO(item)}\r\n                    iconName=\"ShoppingCart\"\r\n                    iconSize={16}\r\n                    className=\"flex-1 text-xs sm:text-sm\"\r\n                  >\r\n                    Ordenar\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })\r\n        )}\r\n\r\n        {/* Paginaci√≥n Mobile */}\r\n        <div className=\"flex flex-col gap-3 pt-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {totalItems === 0 ? '0 de 0' : `${startIndex + 1}-${endIndex} de ${totalItems}`}\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n              <span className=\"px-2 text-sm text-foreground\">{currentPage}/{totalPages}</span>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryTable;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst InventoryFilters = ({ \r\n  filters, \r\n  onFiltersChange, \r\n  onClearFilters, \r\n  onExport,\r\n  totalItems,\r\n  filteredItems,\r\n  inventoryItems = []\r\n}) => {\r\n  // Generar opciones de categor√≠as din√°micamente desde los datos reales\r\n  const categoryOptions = React.useMemo(() => {\r\n    const categories = [...new Set(inventoryItems.map(item => item.category).filter(Boolean))];\r\n    return [\r\n      { value: '', label: 'Todas las Categor√≠as' },\r\n      ...categories.map(category => ({ value: category, label: category }))\r\n    ];\r\n  }, [inventoryItems]);\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'in-stock', label: 'En Stock' },\r\n    { value: 'low-stock', label: 'Stock Bajo' },\r\n    { value: 'out-of-stock', label: 'Agotado' }\r\n  ];\r\n\r\n  // Generar opciones de proveedores din√°micamente desde los datos reales\r\n  const supplierOptions = React.useMemo(() => {\r\n    const suppliers = [...new Set(inventoryItems.map(item => item.supplier?.name).filter(Boolean))];\r\n    return [\r\n      { value: '', label: 'Todos los Proveedores' },\r\n      ...suppliers.map(supplier => ({ value: supplier, label: supplier }))\r\n    ];\r\n  }, [inventoryItems]);\r\n\r\n  // Generar opciones de ubicaciones din√°micamente desde los datos reales\r\n  const locationOptions = React.useMemo(() => {\r\n    const locations = [...new Set(inventoryItems.map(item => item.location).filter(Boolean))];\r\n    return [\r\n      { value: '', label: 'Todas las Ubicaciones' },\r\n      ...locations.map(location => ({ value: location, label: location }))\r\n    ];\r\n  }, [inventoryItems]);\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    onFiltersChange({\r\n      ...filters,\r\n      [key]: value\r\n    });\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some(value => value !== '');\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 mb-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Icon name=\"Filter\" size={20} className=\"text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Filtros de Inventario</h3>\r\n          {hasActiveFilters && (\r\n            <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary\">\r\n              Filtros Activos\r\n            </span>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Mostrando {filteredItems} de {totalItems} art√≠culos\r\n          </div>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExport}\r\n            iconName=\"Download\"\r\n            iconSize={16}\r\n          >\r\n            Exportar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Search Bar */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"relative\">\r\n          <Input\r\n            type=\"search\"\r\n            placeholder=\"Buscar por c√≥digo, descripci√≥n o especificaciones...\"\r\n            value={filters?.search}\r\n            onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n            className=\"pl-10\"\r\n          />\r\n          <Icon \r\n            name=\"Search\" \r\n            size={16} \r\n            className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n          />\r\n        </div>\r\n      </div>\r\n      {/* Filter Controls */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Categor√≠a\r\n          </label>\r\n          <select\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n            value={filters?.category || ''}\r\n            onChange={(e) => handleFilterChange('category', e.target.value)}\r\n          >\r\n            {categoryOptions.map(option => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Estado de Stock\r\n          </label>\r\n          <select\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n            value={filters?.status || ''}\r\n            onChange={(e) => handleFilterChange('status', e.target.value)}\r\n          >\r\n            {statusOptions.map(option => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Proveedor\r\n          </label>\r\n          <select\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n            value={filters?.supplier || ''}\r\n            onChange={(e) => handleFilterChange('supplier', e.target.value)}\r\n          >\r\n            {supplierOptions.map(option => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Ubicaci√≥n\r\n          </label>\r\n          <select\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n            value={filters?.location || ''}\r\n            onChange={(e) => handleFilterChange('location', e.target.value)}\r\n          >\r\n            {locationOptions.map(option => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n      {/* Stock Level Filters */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n        <div>\r\n          <Input\r\n            type=\"number\"\r\n            label=\"Stock M√≠nimo\"\r\n            placeholder=\"0\"\r\n            value={filters?.minStock}\r\n            onChange={(e) => handleFilterChange('minStock', e?.target?.value)}\r\n            min=\"0\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <Input\r\n            type=\"number\"\r\n            label=\"Stock M√°ximo\"\r\n            placeholder=\"1000\"\r\n            value={filters?.maxStock}\r\n            onChange={(e) => handleFilterChange('maxStock', e?.target?.value)}\r\n            min=\"0\"\r\n          />\r\n        </div>\r\n        <div className=\"flex items-end\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onClearFilters}\r\n            disabled={!hasActiveFilters}\r\n            iconName=\"X\"\r\n            iconSize={16}\r\n            className=\"w-full\"\r\n          >\r\n            Limpiar Filtros\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {/* Quick Filter Buttons */}\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        <Button\r\n          variant={filters?.quickFilter === 'low-stock' ? 'default' : 'ghost'}\r\n          size=\"sm\"\r\n          onClick={() => handleFilterChange('quickFilter', \r\n            filters?.quickFilter === 'low-stock' ? '' : 'low-stock'\r\n          )}\r\n          iconName=\"AlertTriangle\"\r\n          iconSize={16}\r\n        >\r\n          Stock Bajo\r\n        </Button>\r\n        \r\n        <Button\r\n          variant={filters?.quickFilter === 'out-of-stock' ? 'default' : 'ghost'}\r\n          size=\"sm\"\r\n          onClick={() => handleFilterChange('quickFilter', \r\n            filters?.quickFilter === 'out-of-stock' ? '' : 'out-of-stock'\r\n          )}\r\n          iconName=\"AlertCircle\"\r\n          iconSize={16}\r\n        >\r\n          Agotado\r\n        </Button>\r\n        \r\n        <Button\r\n          variant={filters?.quickFilter === 'recent' ? 'default' : 'ghost'}\r\n          size=\"sm\"\r\n          onClick={() => handleFilterChange('quickFilter', \r\n            filters?.quickFilter === 'recent' ? '' : 'recent'\r\n          )}\r\n          iconName=\"Clock\"\r\n          iconSize={16}\r\n        >\r\n          Reci√©n Agregados\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryFilters;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst StockAlerts = ({ alerts, onCreatePO, onUpdateStock, onDismissAlert }) => {\r\n  const getAlertIcon = (type) => {\r\n    switch (type) {\r\n      case 'out-of-stock': return 'AlertCircle';\r\n      case 'low-stock': return 'AlertTriangle';\r\n      case 'overstock': return 'TrendingUp';\r\n      case 'expired': return 'Clock';\r\n      default: return 'Info';\r\n    }\r\n  };\r\n\r\n  const getAlertColor = (type) => {\r\n    switch (type) {\r\n      case 'out-of-stock': return 'text-error';\r\n      case 'low-stock': return 'text-warning';\r\n      case 'overstock': return 'text-primary';\r\n      case 'expired': return 'text-muted-foreground';\r\n      default: return 'text-foreground';\r\n    }\r\n  };\r\n\r\n  const getAlertBgColor = (type) => {\r\n    switch (type) {\r\n      case 'out-of-stock': return 'bg-error/10 border-error/20';\r\n      case 'low-stock': return 'bg-warning/10 border-warning/20';\r\n      case 'overstock': return 'bg-primary/10 border-primary/20';\r\n      case 'expired': return 'bg-muted border-border';\r\n      default: return 'bg-background border-border';\r\n    }\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Intl.DateTimeFormat('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    })?.format(new Date(date));\r\n  };\r\n\r\n  if (alerts?.length === 0) {\r\n    return (\r\n      <div className=\"bg-card rounded-lg border border-border p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-4\">\r\n          <Icon name=\"CheckCircle\" size={20} className=\"text-success\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Alertas de Stock</h3>\r\n        </div>\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"CheckCircle\" size={48} className=\"text-success mx-auto mb-4\" />\r\n          <p className=\"text-muted-foreground\">No hay alertas de stock pendientes</p>\r\n          <p className=\"text-sm text-muted-foreground mt-2\">\r\n            Todos los art√≠culos est√°n dentro de los niveles normales\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Icon name=\"AlertTriangle\" size={20} className=\"text-warning\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Alertas de Stock</h3>\r\n          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-warning/10 text-warning\">\r\n            {alerts?.length} Alertas\r\n          </span>\r\n        </div>\r\n        \r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={() => alerts?.forEach(alert => onDismissAlert(alert?.id))}\r\n          iconName=\"X\"\r\n          iconSize={16}\r\n        >\r\n          Descartar Todas\r\n        </Button>\r\n      </div>\r\n      {/* Alerts List */}\r\n      <div className=\"divide-y divide-border\">\r\n        {alerts?.map((alert) => (\r\n          <div key={alert?.id} className={`p-4 ${getAlertBgColor(alert?.type)}`}>\r\n            <div className=\"flex items-start space-x-4\">\r\n              <Icon \r\n                name={getAlertIcon(alert?.type)} \r\n                size={20} \r\n                className={`flex-shrink-0 mt-0.5 ${getAlertColor(alert?.type)}`}\r\n              />\r\n              \r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <h4 className=\"font-medium text-foreground mb-1\">{alert?.title}</h4>\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">{alert?.message}</p>\r\n                    \r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs text-muted-foreground mb-3\">\r\n                      <div>\r\n                        <span className=\"font-medium\">C√≥digo:</span> {alert?.itemCode}\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"font-medium\">Stock Actual:</span> {alert?.currentStock} {alert?.unit}\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"font-medium\">Punto Reorden:</span> {alert?.reorderPoint} {alert?.unit}\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"font-medium\">Proveedor:</span> {alert?.supplier}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"text-xs text-muted-foreground\">\r\n                      Generada: {formatDate(alert?.createdAt)}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => onDismissAlert(alert?.id)}\r\n                    iconName=\"X\"\r\n                    iconSize={16}\r\n                    className=\"ml-2\"\r\n                  />\r\n                </div>\r\n                \r\n                {/* Action Buttons */}\r\n                <div className=\"flex items-center space-x-2 mt-3\">\r\n                  {(alert?.type === 'out-of-stock' || alert?.type === 'low-stock') && (\r\n                    <Button\r\n                      variant=\"default\"\r\n                      size=\"sm\"\r\n                      onClick={() => onCreatePO(alert)}\r\n                      iconName=\"ShoppingCart\"\r\n                      iconSize={16}\r\n                    >\r\n                      Crear Orden de Compra\r\n                    </Button>\r\n                  )}\r\n                  \r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => onUpdateStock(alert)}\r\n                    iconName=\"Edit\"\r\n                    iconSize={16}\r\n                  >\r\n                    Actualizar Stock\r\n                  </Button>\r\n                  \r\n                  {alert?.type === 'overstock' && (\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => console.log('Transfer stock:', alert)}\r\n                      iconName=\"ArrowRightLeft\"\r\n                      iconSize={16}\r\n                    >\r\n                      Transferir\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StockAlerts;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\n\r\nconst PurchaseOrderPanel = ({ orders, onViewOrder, onApproveOrder, onCreateOrder, onDeleteOrder }) => {\r\n  const [orderToDelete, setOrderToDelete] = useState(null);\r\n  \r\n  const handleDeleteClick = (order) => {\r\n    if (window.confirm(`¬øEst√°s seguro de que deseas eliminar la orden de compra ${order.numeroOrden}?`)) {\r\n      onDeleteOrder(order);\r\n    }\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    }).format(amount);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Intl.DateTimeFormat('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(new Date(date));\r\n  };\r\n\r\n//PDF \r\nconst onDownloadOrder = (order) => {\r\n  const doc = new jsPDF();\r\n  const gray = \"#333333\";\r\n\r\n  // Para que salga el texto bien en el apartado de Metodo de pago\r\n  const formatText = (text) => {\r\n    if (!text) return \"‚Äî\";\r\n    return text\r\n      .replace(/_/g, \" \")\r\n      .toLowerCase()\r\n      .replace(/\\b\\w/g, (c) => c.toUpperCase());\r\n  };\r\n\r\n  // ENCABEZADO\r\n  doc.setFillColor(10, 74, 139);\r\n  doc.rect(0, 0, 210, 25, \"F\");\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.setFontSize(16);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.text(\"ORDEN DE COMPRA\", 105, 15, { align: \"center\" });\r\n\r\n  //DATOS GENERALES\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setTextColor(gray);\r\n  doc.setFontSize(12);\r\n  doc.text(\"Datos Generales\", 105, 35, { align: \"center\" });\r\n\r\n  const leftX = 20;\r\n  const rightX = 120;\r\n  const baseY = 44;\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  doc.text(`N√∫mero: ${order.numeroOrden || \"‚Äî\"}`, leftX, baseY);\r\n  doc.text(`Fecha: ${formatDate(order.fechaCreacion)}`, leftX, baseY + 7);\r\n  doc.text(`Estado: ${getStatusLabel(order.estado)}`, leftX, baseY + 14);\r\n  doc.text(`Proveedor: ${order.proveedor?.nombre || \"‚Äî\"}`, rightX, baseY);\r\n  doc.text(`Creado por: ${order.creadoPor || \"‚Äî\"}`, rightX, baseY + 7);\r\n\r\n  const maxWidthNotas = 70;\r\n  const notaTexto = `Notas: ${order.notas || \"‚Äî\"}`;\r\n  const notaLineas = doc.splitTextToSize(notaTexto, maxWidthNotas);\r\n  const notaAltura = notaLineas.length * 5;\r\n\r\n  doc.text(notaLineas, rightX, baseY + 14);\r\n\r\n  if (order.fechaEntregaEsperada) {\r\n    doc.text(\r\n      `Entrega Esperada: ${formatDate(order.fechaEntregaEsperada)}`,\r\n      leftX,\r\n      baseY + 21\r\n    );\r\n  }\r\n\r\n  // DETALLES DE PAGO\r\n  const pagoY = Math.max(baseY + 28, baseY + 14 + notaAltura + 5);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.text(\"Detalles de Pago\", 105, pagoY, { align: \"center\" });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  const infoPagoY = pagoY + 8;\r\n  const metodoPagoFormateado = formatText(order.metodoPago);\r\n  const prioridadFormateada = formatText(order.prioridadAprobacion || \"Normal\");\r\n\r\n  doc.text(`M√©todo de Pago: ${metodoPagoFormateado}`, leftX, infoPagoY);\r\n  doc.text(`Prioridad: ${prioridadFormateada}`, leftX, infoPagoY + 7);\r\n  const maxWidthComentarios = 70;\r\n  const comentarioTexto = `Comentarios: ${order.comentariosAprobador || \"Sin comentarios\"}`;\r\n  const comentarioLineas = doc.splitTextToSize(comentarioTexto, maxWidthComentarios);\r\n  const comentarioAltura = comentarioLineas.length * 5;\r\n  doc.text(comentarioLineas, rightX, infoPagoY);\r\n\r\n  // TABLA DE ART√çCULOS\r\n  const tableY = infoPagoY + 9 + comentarioAltura;\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.text(\"Detalle de Productos\", 105, tableY, { align: \"center\" });\r\n\r\n  const tableHead = [\r\n    [\"C√≥digo\", \"Descripci√≥n\", \"Cantidad\", \"Costo Unit.\", \"Subtotal\"],\r\n  ];\r\n\r\n  const tableBody = order.articulos?.map((item) => [\r\n    item.codigoArticulo || \"‚Äî\",\r\n    item.descripcion || item.nombre || \"‚Äî\",\r\n    `${item.cantidadOrdenada || 0} ${item.unidad || \"\"}`.trim(),\r\n    formatCurrency(item.costoUnitario || 0),\r\n    formatCurrency(item.subtotal || 0),\r\n  ]);\r\n\r\n  doc.autoTable({\r\n    head: tableHead,\r\n    body: tableBody,\r\n    startY: tableY + 5,\r\n    theme: \"grid\",\r\n    styles: { fontSize: 9 },\r\n    headStyles: {\r\n      fillColor: [10, 74, 138],\r\n      textColor: 255,\r\n      halign: \"center\",\r\n      fontStyle: \"bold\",\r\n    },\r\n    bodyStyles: { halign: \"center\" },\r\n    margin: { left: 15, right: 15 },\r\n  });\r\n\r\n  // TOTAL\r\n  const finalY = doc.lastAutoTable.finalY || tableY + 10;\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(11);\r\n  doc.setTextColor(gray);\r\n  doc.text(`Total: ${formatCurrency(order.totalOrden)}`, 195, finalY + 10, {\r\n    align: \"right\",\r\n  });\r\n\r\n  // SECCI√ìN APROBACIONES\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  const approvalSectionY = pageHeight - 35;\r\n\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.text(\"Aprobaciones\", 105, approvalSectionY - 5, { align: \"center\" });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  const lineY = approvalSectionY + 10;\r\n  const leftXLine = 20;\r\n  const rightXLine = 135;\r\n\r\n  doc.text(\"_____________________________\", leftXLine, lineY);\r\n  doc.text(\"_____________________________\", rightXLine, lineY);\r\n  doc.text(\"Responsable de Aprobaci√≥n\", leftXLine + 10, lineY + 6);\r\n  doc.text(\"Departamento de Compras\", rightXLine + 7, lineY + 6);\r\n\r\n  // DESCARGAR PDF\r\n  doc.save(`orden-compra-${order.numeroOrden}.pdf`);\r\n};\r\n\r\n\r\n  const [activeTab, setActiveTab] = useState('pending');\r\n\r\n  console.log('√ìrdenes recibidas en PurchaseOrderPanel:', orders);\r\n  \r\n  const tabs = [\r\n    { id: 'pending', label: 'Pendientes', count: orders?.filter(o => o?.estado === 'pending')?.length },\r\n    { id: 'approved', label: 'Aprobadas', count: orders?.filter(o => o?.estado === 'approved')?.length },\r\n    { id: 'received', label: 'Recibidas', count: orders?.filter(o => o?.estado === 'received')?.length }\r\n  ];\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'text-warning bg-warning/10';\r\n      case 'approved': return 'text-primary bg-primary/10';\r\n      case 'received': return 'text-success bg-success/10';\r\n      case 'cancelled': return 'text-error bg-error/10';\r\n      default: return 'text-muted-foreground bg-muted';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'Pendiente';\r\n      case 'approved': return 'Aprobada';\r\n      case 'received': return 'Recibida';\r\n      case 'cancelled': return 'Cancelada';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n\r\n  const filteredOrders = orders?.filter(order => order?.estado === activeTab);\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Icon name=\"ShoppingCart\" size={20} className=\"text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">√ìrdenes de Compra</h3>\r\n        </div>\r\n        \r\n        <Button\r\n          variant=\"default\"\r\n          onClick={onCreateOrder}\r\n          iconName=\"Plus\"\r\n          iconSize={16}\r\n        >\r\n          Nueva Orden\r\n        </Button>\r\n      </div>\r\n      {/* Tabs */}\r\n      <div className=\"flex border-b border-border\">\r\n        {tabs?.map((tab) => (\r\n          <button\r\n            key={tab?.id}\r\n            onClick={() => setActiveTab(tab?.id)}\r\n            className={`flex items-center space-x-2 px-6 py-3 text-sm font-medium border-b-2 transition-smooth ${\r\n              activeTab === tab?.id\r\n                ? 'border-primary text-primary bg-primary/5' :'border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50'\r\n            }`}\r\n          >\r\n            <span>{tab?.label}</span>\r\n            {tab?.count > 0 && (\r\n              <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\r\n                activeTab === tab?.id ? 'bg-primary text-primary-foreground' : 'bg-muted text-muted-foreground'\r\n              }`}>\r\n                {tab?.count}\r\n              </span>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      {/* Orders List */}\r\n      <div className=\"divide-y divide-border max-h-96 overflow-y-auto\">\r\n        {filteredOrders?.length === 0 ? (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"ShoppingCart\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n            <p className=\"text-muted-foreground\">No hay √≥rdenes {getStatusLabel(activeTab)?.toLowerCase()}</p>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={onCreateOrder}\r\n              iconName=\"Plus\"\r\n              iconSize={16}\r\n              className=\"mt-4\"\r\n            >\r\n              Crear Primera Orden\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          filteredOrders?.map((order) => (\r\n            <div key={order?.id} className=\"p-4 hover:bg-muted/50 transition-smooth\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center space-x-3 mb-2\">\r\n                    <h4 className=\"font-medium text-foreground\">{order?.numeroOrden}</h4>\r\n                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(order?.estado)}`}>\r\n                      {getStatusLabel(order?.estado)}\r\n                    </span>\r\n                    {order?.esUrgente && (\r\n                      <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-error/10 text-error\">\r\n                        <Icon name=\"AlertCircle\" size={12} className=\"mr-1\" />\r\n                        Urgente\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground mb-3\">\r\n                    <div>\r\n                      <span className=\"font-medium\">Proveedor:</span>\r\n                      <div className=\"text-foreground\">{order?.proveedor?.nombre}</div>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Fecha:</span>\r\n                      <div className=\"text-foreground\">{formatDate(order?.fechaOrden)}</div>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Total:</span>\r\n                      <div className=\"text-foreground font-medium\">{formatCurrency(order?.totalOrden)}</div>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Art√≠culos:</span>\r\n                      <div className=\"text-foreground\">{order?.cantidadArticulos} art√≠culos</div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {order?.expectedDelivery && (\r\n                    <div className=\"text-xs text-muted-foreground mb-3\">\r\n                      Entrega esperada: {formatDate(order?.expectedDelivery)}\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onViewOrder(order)}\r\n                      iconName=\"Eye\"\r\n                      iconSize={16}\r\n                    >\r\n                      Ver Detalles\r\n                    </Button>\r\n                    \r\n                    {order?.status === 'pending' && (\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => onApproveOrder(order)}\r\n                        iconName=\"Check\"\r\n                        iconSize={16}\r\n                      >\r\n                        Aprobar\r\n                      </Button>\r\n                    )}\r\n                    \r\n                    {order?.status === 'approved' && (\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => console.log('Track order:', order)}\r\n                        iconName=\"Truck\"\r\n                        iconSize={16}\r\n                      >\r\n                        Rastrear\r\n                      </Button>\r\n                    )}\r\n                    \r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onDownloadOrder(order)}\r\n                      iconName=\"Download\"\r\n                      iconSize={16}\r\n                    >\r\n                      Descargar\r\n                    </Button>\r\n\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleDeleteClick(order)}\r\n                      iconName=\"Trash2\"\r\n                      iconSize={16}\r\n                      className=\"text-error hover:text-error\"\r\n                    >\r\n                      Eliminar\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PurchaseOrderPanel;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst InventoryStats = ({ stats, items, onAddItem, onUpdateStock, onGenerateReport }) => {\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN',\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0\r\n    })?.format(amount);\r\n  };\r\n\r\n  const formatNumber = (number) => {\r\n    return new Intl.NumberFormat('es-MX')?.format(number);\r\n  };\r\n\r\n  const statCards = [\r\n    {\r\n      title: 'Total de Art√≠culos',\r\n      value: formatNumber(stats?.totalItems),\r\n      change: stats?.itemsChange,\r\n      icon: 'Package',\r\n      color: 'text-primary',\r\n      bgColor: 'bg-primary/10'\r\n    },\r\n    {\r\n      title: 'Valor del Inventario',\r\n      value: formatCurrency(stats?.totalValue),\r\n      change: stats?.valueChange,\r\n      icon: 'DollarSign',\r\n      color: 'text-success',\r\n      bgColor: 'bg-success/10'\r\n    },\r\n    {\r\n      title: 'Stock Bajo',\r\n      value: formatNumber(stats?.lowStockItems),\r\n      change: stats?.lowStockChange,\r\n      icon: 'AlertTriangle',\r\n      color: 'text-warning',\r\n      bgColor: 'bg-warning/10'\r\n    },\r\n    {\r\n      title: 'Agotados',\r\n      value: formatNumber(stats?.outOfStockItems),\r\n      change: stats?.outOfStockChange,\r\n      icon: 'AlertCircle',\r\n      color: 'text-error',\r\n      bgColor: 'bg-error/10'\r\n    }\r\n  ];\r\n\r\n  const categoryStats = [\r\n    { name: 'Equipos HVAC', value: stats?.categories?.hvacEquipment, percentage: 35 },\r\n    { name: 'Refrigeraci√≥n', value: stats?.categories?.refrigeration, percentage: 25 },\r\n    { name: 'El√©ctricos', value: stats?.categories?.electrical, percentage: 20 },\r\n    { name: 'Herramientas', value: stats?.categories?.tools, percentage: 12 },\r\n    { name: 'Otros', value: stats?.categories?.others, percentage: 8 }\r\n  ];\r\n\r\n  const getChangeColor = (change) => {\r\n    if (change > 0) return 'text-success';\r\n    if (change < 0) return 'text-error';\r\n    return 'text-muted-foreground';\r\n  };\r\n\r\n  const getChangeIcon = (change) => {\r\n    if (change > 0) return 'TrendingUp';\r\n    if (change < 0) return 'TrendingDown';\r\n    return 'Minus';\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Main Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        {statCards?.map((stat, index) => (\r\n          <div key={index} className=\"bg-card rounded-lg border border-border p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-sm font-medium text-muted-foreground mb-1\">{stat?.title}</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{stat?.value}</p>\r\n                {stat?.change !== undefined && (\r\n                  <div className={`flex items-center space-x-1 mt-2 ${getChangeColor(stat?.change)}`}>\r\n                    <Icon name={getChangeIcon(stat?.change)} size={16} />\r\n                    <span className=\"text-sm font-medium\">\r\n                      {Math.abs(stat?.change)}% vs mes anterior\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className={`w-12 h-12 rounded-lg flex items-center justify-center ${stat?.bgColor}`}>\r\n                <Icon name={stat?.icon} size={24} className={stat?.color} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {/* Category Distribution */}\r\n      {/* TODO: Habilitar m√°s adelante cuando se implemente completamente */}\r\n      {/* <div className=\"bg-card rounded-lg border border-border p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-6\">\r\n          <Icon name=\"PieChart\" size={20} className=\"text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Distribuci√≥n por Categor√≠a</h3>\r\n        </div>\r\n        \r\n        <div className=\"space-y-4\">\r\n          {categoryStats?.map((category, index) => (\r\n            <div key={index} className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-3 flex-1\">\r\n                <div className=\"w-3 h-3 rounded-full bg-primary\" style={{\r\n                  backgroundColor: `hsl(${index * 60}, 70%, 50%)`\r\n                }} />\r\n                <span className=\"text-sm font-medium text-foreground\">{category?.name}</span>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className=\"w-32 bg-muted rounded-full h-2\">\r\n                  <div \r\n                    className=\"h-2 rounded-full bg-primary\"\r\n                    style={{\r\n                      width: `${category?.percentage}%`,\r\n                      backgroundColor: `hsl(${index * 60}, 70%, 50%)`\r\n                    }}\r\n                  />\r\n                </div>\r\n                <span className=\"text-sm font-medium text-foreground w-16 text-right\">\r\n                  {formatNumber(category?.value)}\r\n                </span>\r\n                <span className=\"text-sm text-muted-foreground w-12 text-right\">\r\n                  {category?.percentage}%\r\n                </span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div> */}\r\n      \r\n      {/* Quick Actions */}\r\n      <div className=\"bg-card rounded-lg border border-border p-6\">\r\n        <div className=\"flex items-center space-x-3 mb-6\">\r\n          <Icon name=\"Zap\" size={20} className=\"text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Acciones R√°pidas</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <Button\r\n            variant=\"default\"\r\n            onClick={onAddItem}\r\n            className=\"flex items-center space-x-3 p-4 bg-muted/50 rounded-lg w-full hover:bg-muted/80\"\r\n          >\r\n            <Icon name=\"Plus\" size={20} className=\"text-primary\" />\r\n            <div className=\"text-left\">\r\n              <div className=\"font-medium text-sm text-foreground\">Agregar Art√≠culo</div>\r\n              <div className=\"text-xs text-muted-foreground\">Registrar nuevo producto</div>\r\n            </div>\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"default\"\r\n            onClick={() => {\r\n              const firstItem = items?.[0];\r\n              if (firstItem && onUpdateStock) {\r\n                onUpdateStock(firstItem);\r\n              }\r\n            }}\r\n            disabled={!items || items.length === 0}\r\n            className=\"flex items-center space-x-3 p-4 bg-muted/50 rounded-lg w-full hover:bg-muted/80\"\r\n          >\r\n            <Icon name=\"RefreshCw\" size={20} className=\"text-success\" />\r\n            <div className=\"text-left\">\r\n              <div className=\"font-medium text-sm text-foreground\">Actualizar Stock</div>\r\n              <div className=\"text-xs text-muted-foreground\">Ajustar inventario</div>\r\n            </div>\r\n          </Button>\r\n          \r\n          <Button\r\n            variant=\"default\"\r\n            onClick={onGenerateReport}\r\n            disabled={!items || items.length === 0}\r\n            className=\"flex items-center space-x-3 p-4 bg-muted/50 rounded-lg w-full hover:bg-muted/80\"\r\n          >\r\n            <Icon name=\"FileText\" size={20} className=\"text-warning\" />\r\n            <div className=\"text-left\">\r\n              <div className=\"font-medium text-sm text-foreground\">Generar Reporte</div>\r\n              <div className=\"text-xs text-muted-foreground\">Exportar datos</div>\r\n            </div>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryStats;","// services/articuloService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst articuloService = {\r\n  async getArticulos() {\r\n    try {\r\n      const data = await httpService.get(\"/articulo/todos\");\r\n      return data;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener art√≠culos:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getArticuloById(id) {\r\n    try {\r\n      const data = await httpService.get(`/articulo/buscar/${id}`);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al obtener el art√≠culo con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createArticulo(payload) {\r\n    try {\r\n      const data = await httpService.post(\"/articulo/crear\", payload);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(\"Error al crear art√≠culo:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateArticulo(id, payload) {\r\n    try {\r\n      const data = await httpService.put(\r\n        `/articulo/editar/${id}`,\r\n        payload\r\n      );\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al actualizar el art√≠culo con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deleteArticulo(id) {\r\n    try {\r\n      const data = await httpService.delete(`/articulo/eliminar/${id}`);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al eliminar el art√≠culo con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default articuloService;\r\n","// hooks/useInventory.js\r\nimport { useState, useCallback } from 'react';\r\nimport articuloService from '../services/articuloService';\r\n\r\nconst useInventory = () => {\r\n  const [articulos, setArticulos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Obtener todos los art√≠culos\r\n  const getArticulos = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await articuloService.getArticulos();\r\n      \r\n      if (response.success) {\r\n        // Verificar si data es un array directamente\r\n        if (Array.isArray(response.data)) {\r\n\r\n          setArticulos(response.data);\r\n        } \r\n        // Verificar si data tiene una propiedad que contenga el array\r\n        else if (response.data && typeof response.data === 'object') {\r\n          // Buscar posibles propiedades que contengan el array\r\n          const possibleArrayKeys = ['datos', 'articulos', 'items', 'data', 'results', 'list'];\r\n          let foundArray = null;\r\n          \r\n          for (const key of possibleArrayKeys) {\r\n            if (response.data[key] && Array.isArray(response.data[key])) {\r\n              foundArray = response.data[key];\r\n\r\n              break;\r\n            }\r\n          }\r\n          \r\n          if (foundArray) {\r\n            setArticulos(foundArray);\r\n          } else {\r\n            console.log('No se encontr√≥ array de art√≠culos. Estructura de response.data:', Object.keys(response.data));\r\n            setArticulos([]);\r\n          }\r\n        } else {\r\n          console.log('response.data no es v√°lido:', response.data);\r\n          setArticulos([]);\r\n        }\r\n      } else {\r\n        console.log('Backend response.success es false:', response);\r\n        setArticulos([]);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useInventory.getArticulos:\", err);\r\n      setError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Obtener un art√≠culo por ID\r\n  const getArticuloById = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await articuloService.getArticuloById(id);\r\n      if (response.success) {\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useInventory.getArticuloById:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Crear un nuevo art√≠culo\r\n  const createArticulo = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await articuloService.createArticulo(payload);\r\n      if (response.success) {\r\n        // Agregar el nuevo art√≠culo al estado local\r\n        setArticulos((prev) => [...prev, response.data]);\r\n        \r\n        // Tambi√©n recargar todos los art√≠culos para asegurar sincronizaci√≥n\r\n        setTimeout(async () => {\r\n          try {\r\n            await getArticulos();\r\n          } catch (error) {\r\n            console.error('Error recargando art√≠culos despu√©s de crear:', error);\r\n          }\r\n        }, 100);\r\n        \r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useInventory.createArticulo:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Actualizar un art√≠culo existente\r\n  const updateArticulo = async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await articuloService.updateArticulo(id, payload);\r\n      if (response.success) {\r\n        setArticulos((prev) =>\r\n          prev.map((a) => (a.id === id ? { ...a, ...response.data } : a))\r\n        );\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useInventory.updateArticulo:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Eliminar un art√≠culo\r\n  const deleteArticulo = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await articuloService.deleteArticulo(id);\r\n      if (response.success) {\r\n        setArticulos((prev) => prev.filter((a) => a.id !== id));\r\n        return true;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useInventory.deleteArticulo:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    articulos,\r\n    loading,\r\n    error,\r\n    getArticulos,\r\n    getArticuloById,\r\n    createArticulo,\r\n    updateArticulo,\r\n    deleteArticulo,\r\n  };\r\n};\r\n\r\nexport default useInventory;\r\n","import React, { useState } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport Icon from '../../../components/AppIcon';\r\nimport useInventory from '../../../hooks/useInventory';\r\n\r\nconst NewItemModal = ({ isOpen, onClose, onAddItem }) => {\r\n  const { createArticulo, loading } = useInventory();\r\n  \r\n  const [formData, setFormData] = useState({\r\n    itemCode: '',\r\n    name: '',\r\n    description: '',\r\n    specifications: '',\r\n    category: '',\r\n    unit: 'pcs',\r\n    unitCost: '',\r\n    reorderPoint: '',\r\n    currentStock: '',\r\n    supplierName: '',\r\n    supplierContact: '',\r\n    notes: ''\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const categories = [\r\n    'Equipos HVAC',\r\n    'Refrigeraci√≥n',\r\n    'Componentes El√©ctricos',\r\n    'Plomer√≠a',\r\n    'Herramientas',\r\n    'Accesorios',\r\n    'Consumibles',\r\n    'Repuestos',\r\n    'Materiales de Instalaci√≥n'\r\n  ];\r\n\r\n  const units = [\r\n    'pcs',\r\n    'kg',\r\n    'lt',\r\n    'm',\r\n    'ft',\r\n    'gal√≥n',\r\n    'caja',\r\n    'rollo',\r\n    'juego'\r\n  ];\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n    // Clear error when user starts typing\r\n    if (errors?.[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData?.itemCode?.trim()) {\r\n      newErrors.itemCode = 'El c√≥digo de art√≠culo es requerido';\r\n    }\r\n    if (!formData?.name?.trim()) {\r\n      newErrors.name = 'El nombre del art√≠culo es requerido';\r\n    }\r\n    if (!formData?.description?.trim()) {\r\n      newErrors.description = 'La descripci√≥n es requerida';\r\n    }\r\n    if (!formData?.category) {\r\n      newErrors.category = 'La categor√≠a es requerida';\r\n    }\r\n    if (!formData?.unitCost || parseFloat(formData?.unitCost) <= 0) {\r\n      newErrors.unitCost = 'El costo unitario debe ser mayor a 0';\r\n    }\r\n    if (!formData?.reorderPoint || parseInt(formData?.reorderPoint) < 0) {\r\n      newErrors.reorderPoint = 'El punto de reorden debe ser 0 o mayor';\r\n    }\r\n    if (!formData?.currentStock || parseInt(formData?.currentStock) < 0) {\r\n      newErrors.currentStock = 'El stock actual debe ser 0 o mayor';\r\n    }\r\n    if (!formData?.supplierName?.trim()) {\r\n      newErrors.supplierName = 'El nombre del proveedor es requerido';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      // Crear el payload seg√∫n la estructura del backend\r\n      const payload = {\r\n        codigoArticulo: formData?.itemCode?.trim(),\r\n        nombre: formData?.name?.trim(),\r\n        descripcion: formData?.description?.trim(),\r\n        especificaciones: formData?.specifications?.trim() || '',\r\n        categoria: formData?.category,\r\n        unidad: formData?.unit,\r\n        costoUnitario: parseFloat(formData?.unitCost),\r\n        puntoReorden: parseInt(formData?.reorderPoint),\r\n        stockActual: parseInt(formData?.currentStock),\r\n        ubicacion: 'Almac√©n Principal', // Siempre ser√° Almac√©n Principal\r\n        nombreProveedor: formData?.supplierName?.trim(),\r\n        contactoProveedor: formData?.supplierContact?.trim() || '',\r\n        notas: formData?.notes?.trim() || ''\r\n      };\r\n\r\n      // Llamar al servicio para crear el art√≠culo\r\n      const nuevoArticulo = await createArticulo(payload);\r\n\r\n      // Transformar la respuesta del backend al formato esperado por el componente\r\n      const itemForTable = {\r\n        id: nuevoArticulo.id,\r\n        itemCode: nuevoArticulo.codigoArticulo,\r\n        name: nuevoArticulo.nombre || '',\r\n        description: nuevoArticulo.descripcion,\r\n        specifications: nuevoArticulo.especificaciones,\r\n        category: nuevoArticulo.categoria,\r\n        currentStock: nuevoArticulo.stockActual,\r\n        reservedStock: nuevoArticulo.stockReservado || 0,\r\n        reorderPoint: nuevoArticulo.puntoReorden,\r\n        unit: nuevoArticulo.unidad,\r\n        supplier: {\r\n          name: nuevoArticulo.proveedor?.nombre || nuevoArticulo.nombreProveedor,\r\n          contact: nuevoArticulo.proveedor?.contacto || nuevoArticulo.contactoProveedor\r\n        },\r\n        location: nuevoArticulo.ubicacion,\r\n        lastUpdated: new Date(nuevoArticulo.fechaActualizacion || nuevoArticulo.fechaCreacion),\r\n        unitCost: nuevoArticulo.costoUnitario,\r\n        notes: nuevoArticulo.notas\r\n      };\r\n\r\n      // Llamar a la funci√≥n del componente padre para actualizar la tabla\r\n      if (onAddItem) {\r\n        await onAddItem(itemForTable);\r\n      }\r\n      \r\n      // Reset form and close modal\r\n      handleReset();\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error creating article:', error);\r\n      setErrors({ submit: 'Error al crear el art√≠culo. Intente nuevamente.' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setFormData({\r\n      itemCode: '',\r\n      name: '',\r\n      description: '',\r\n      specifications: '',\r\n      category: '',\r\n      unit: 'pcs',\r\n      unitCost: '',\r\n      reorderPoint: '',\r\n      currentStock: '',\r\n      supplierName: '',\r\n      supplierContact: '',\r\n      notes: ''\r\n    });\r\n    setErrors({});\r\n  };\r\n\r\n  const handleClose = () => {\r\n    handleReset();\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-background rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col\">\r\n        {/* Modal Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border flex-shrink-0\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center\">\r\n              <Icon name=\"Package\" size={20} className=\"text-primary\" />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-foreground\">\r\n                Nuevo Art√≠culo\r\n              </h2>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Agregar nuevo art√≠culo al inventario\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"p-2 hover:bg-muted rounded-lg transition-colors\"\r\n            disabled={isSubmitting}\r\n          >\r\n            <Icon name=\"X\" size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Modal Body */}\r\n        <div className=\"p-6 overflow-y-auto flex-1 min-h-0\">\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            {/* Basic Information */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-medium text-foreground flex items-center\">\r\n                <Icon name=\"Info\" size={18} className=\"mr-2\" />\r\n                Informaci√≥n B√°sica\r\n              </h3>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    C√≥digo de Art√≠culo *\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.itemCode}\r\n                    onChange={(e) => handleInputChange('itemCode', e?.target?.value)}\r\n                    placeholder=\"Ej: HVAC-001\"\r\n                    error={errors?.itemCode}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.itemCode && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.itemCode}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Nombre *\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.name}\r\n                    onChange={(e) => handleInputChange('name', e?.target?.value)}\r\n                    placeholder=\"Nombre del art√≠culo\"\r\n                    error={errors?.name}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.name && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.name}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Categor√≠a *\r\n                  </label>\r\n                  <select\r\n                    value={formData?.category}\r\n                    onChange={(e) => handleInputChange('category', e.target.value)}\r\n                    disabled={isSubmitting}\r\n                    className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                  >\r\n                    <option value=\"\">Seleccionar categor√≠a</option>\r\n                    {categories?.map(cat => (\r\n                      <option key={cat} value={cat}>{cat}</option>\r\n                    ))}\r\n                  </select>\r\n                  {errors?.category && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.category}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Descripci√≥n *\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.description}\r\n                    onChange={(e) => handleInputChange('description', e?.target?.value)}\r\n                    placeholder=\"Descripci√≥n completa del art√≠culo\"\r\n                    error={errors?.description}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.description && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.description}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Especificaciones\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.specifications}\r\n                    onChange={(e) => handleInputChange('specifications', e?.target?.value)}\r\n                    placeholder=\"Especificaciones t√©cnicas del art√≠culo\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Stock and Cost Information */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-medium text-foreground flex items-center\">\r\n                <Icon name=\"BarChart\" size={18} className=\"mr-2\" />\r\n                Stock y Costos\r\n              </h3>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Stock Actual *\r\n                  </label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    value={formData?.currentStock}\r\n                    onChange={(e) => handleInputChange('currentStock', e?.target?.value)}\r\n                    placeholder=\"0\"\r\n                    error={errors?.currentStock}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.currentStock && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.currentStock}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Punto de Reorden *\r\n                  </label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    value={formData?.reorderPoint}\r\n                    onChange={(e) => handleInputChange('reorderPoint', e?.target?.value)}\r\n                    placeholder=\"0\"\r\n                    error={errors?.reorderPoint}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.reorderPoint && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.reorderPoint}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Unidad\r\n                  </label>\r\n                  <select\r\n                    value={formData?.unit}\r\n                    onChange={(e) => handleInputChange('unit', e.target.value)}\r\n                    disabled={isSubmitting}\r\n                    className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                  >\r\n                    {units?.map(unit => (\r\n                      <option key={unit} value={unit}>{unit}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Costo Unitario ($) *\r\n                  </label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    value={formData?.unitCost}\r\n                    onChange={(e) => handleInputChange('unitCost', e?.target?.value)}\r\n                    placeholder=\"0.00\"\r\n                    error={errors?.unitCost}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.unitCost && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.unitCost}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Ubicaci√≥n\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value=\"Almac√©n Principal\"\r\n                    disabled={true}\r\n                    className=\"bg-muted cursor-not-allowed\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Supplier Information */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-medium text-foreground flex items-center\">\r\n                <Icon name=\"Building\" size={18} className=\"mr-2\" />\r\n                Informaci√≥n del Proveedor\r\n              </h3>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Nombre del Proveedor *\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.supplierName}\r\n                    onChange={(e) => handleInputChange('supplierName', e?.target?.value)}\r\n                    placeholder=\"Nombre de la empresa proveedora\"\r\n                    error={errors?.supplierName}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {errors?.supplierName && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.supplierName}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Contacto del Proveedor\r\n                  </label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={formData?.supplierContact}\r\n                    onChange={(e) => handleInputChange('supplierContact', e?.target?.value)}\r\n                    placeholder=\"Email, tel√©fono o contacto\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Notes */}\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-medium text-foreground flex items-center\">\r\n                <Icon name=\"FileText\" size={18} className=\"mr-2\" />\r\n                Notas Adicionales\r\n              </h3>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                  Observaciones\r\n                </label>\r\n                <textarea\r\n                  value={formData?.notes}\r\n                  onChange={(e) => handleInputChange('notes', e?.target?.value)}\r\n                  placeholder=\"Notas adicionales sobre el art√≠culo...\"\r\n                  className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\r\n                  rows={3}\r\n                  disabled={isSubmitting}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Error Message */}\r\n            {errors?.submit && (\r\n              <div className=\"bg-destructive/10 border border-destructive/20 rounded-lg p-4\">\r\n                <div className=\"flex items-center\">\r\n                  <Icon name=\"AlertCircle\" size={16} className=\"text-destructive mr-2\" />\r\n                  <p className=\"text-sm text-destructive\">{errors?.submit}</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n\r\n        {/* Modal Footer */}\r\n        <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-border flex-shrink-0 bg-background\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={handleClose}\r\n            disabled={isSubmitting || loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            onClick={handleSubmit}\r\n            disabled={isSubmitting || loading}\r\n            iconName={(isSubmitting || loading) ? \"Loader\" : \"Plus\"}\r\n            iconSize={16}\r\n            className={(isSubmitting || loading) ? \"animate-spin\" : \"\"}\r\n          >\r\n            {(isSubmitting || loading) ? 'Creando Art√≠culo...' : 'Crear Art√≠culo'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewItemModal;","import React from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst ItemDetailsModal = ({ isOpen, onClose, item }) => {\r\n  if (!isOpen || !item) return null;\r\n\r\n  const getStockStatus = (current, reorderPoint) => {\r\n    if (current === 0) return { status: 'out-of-stock', label: 'Agotado', color: 'text-error', bgColor: 'bg-error/10' };\r\n    if (current <= reorderPoint) return { status: 'low-stock', label: 'Stock Bajo', color: 'text-warning', bgColor: 'bg-warning/10' };\r\n    return { status: 'in-stock', label: 'En Stock', color: 'text-success', bgColor: 'bg-success/10' };\r\n  };\r\n\r\n  const stockStatus = getStockStatus(item.currentStock, item.reorderPoint);\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    }).format(amount || 0);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    return new Intl.DateTimeFormat('es-MX', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(new Date(date));\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4\">\r\n      <div className=\"bg-background rounded-lg shadow-xl w-full max-w-6xl max-h-[95vh] sm:max-h-[90vh] flex flex-col overflow-hidden\">\r\n        {/* Modal Header */}\r\n        <div className=\"flex items-center justify-between p-4 sm:p-6 border-b border-border flex-shrink-0\">\r\n          <div className=\"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1\">\r\n            <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n              <Icon name=\"Package\" size={16} className=\"text-primary sm:w-5 sm:h-5\" />\r\n            </div>\r\n            <div className=\"min-w-0 flex-1\">\r\n              <h2 className=\"text-lg sm:text-xl font-semibold text-foreground truncate\">Detalles del Art√≠culo</h2>\r\n              <p className=\"text-xs sm:text-sm text-muted-foreground truncate\">{item.itemCode}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2 ml-2\">\r\n            <span className={`inline-flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium ${stockStatus.color} ${stockStatus.bgColor}`}>\r\n              <div className={`w-2 h-2 rounded-full ${\r\n                stockStatus.status === 'out-of-stock' ? 'bg-error' :\r\n                stockStatus.status === 'low-stock' ? 'bg-warning' : 'bg-success'\r\n              }`} />\r\n              <span>{stockStatus.label}</span>\r\n            </span>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={onClose}\r\n              iconName=\"X\"\r\n              iconSize={16}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modal Content */}\r\n        <div className=\"p-4 sm:p-6 overflow-y-auto flex-1 min-h-0\">\r\n          <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6\">\r\n            {/* Informaci√≥n B√°sica */}\r\n            <div className=\"space-y-3 sm:space-y-4\">\r\n              <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n                <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                  <span>Informaci√≥n B√°sica</span>\r\n                </h3>\r\n                \r\n                <div className=\"space-y-3\">\r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">C√≥digo</label>\r\n                    <p className=\"font-mono text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                      {item.itemCode}\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">Nombre</label>\r\n                    <p className=\"text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                      {item.name}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">Descripci√≥n</label>\r\n                    <p className=\"text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                      {item.description}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">Especificaciones</label>\r\n                    <p className=\"text-sm text-foreground bg-background rounded px-2 py-2 min-h-[60px]\">\r\n                      {item.specifications}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">Categor√≠a</label>\r\n                    <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-secondary/10 text-secondary\">\r\n                      {item.category}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-muted-foreground\">Ubicaci√≥n</label>\r\n                    <p className=\"text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                      {item.location}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci√≥n de Stock */}\r\n            <div className=\"space-y-3 sm:space-y-4\">\r\n              <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n                <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                  <Icon name=\"BarChart3\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                  <span>Stock e Inventario</span>\r\n                </h3>\r\n                \r\n                <div className=\"grid grid-cols-3 gap-2 sm:gap-4\">\r\n                  <div className=\"bg-background rounded-lg p-2 sm:p-3 text-center\">\r\n                    <div className=\"text-xl sm:text-2xl font-bold text-foreground\">{item.currentStock}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Stock Actual</div>\r\n                    <div className=\"text-xs text-muted-foreground\">{item.unit}</div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-background rounded-lg p-2 sm:p-3 text-center\">\r\n                    <div className=\"text-xl sm:text-2xl font-bold text-warning\">{item.reorderPoint}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Punto de Reorden</div>\r\n                    <div className=\"text-xs text-muted-foreground\">{item.unit}</div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-background rounded-lg p-2 sm:p-3 text-center\">\r\n                    <div className=\"text-base sm:text-lg font-bold text-primary break-all\">{formatCurrency(item.unitCost)}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Costo Unitario</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Valor Total */}\r\n                <div className=\"mt-3 bg-background rounded-lg p-3\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-sm font-medium text-foreground\">Valor Total en Stock:</span>\r\n                    <span className=\"text-lg font-bold text-primary\">\r\n                      {formatCurrency(item.unitCost * item.currentStock)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci√≥n del Proveedor */}\r\n            <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                <Icon name=\"Truck\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                <span>Proveedor</span>\r\n              </h3>\r\n              \r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">Nombre</label>\r\n                  <p className=\"text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                    {item.supplier?.name}\r\n                  </p>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">Contacto</label>\r\n                  <p className=\"text-sm text-foreground bg-background rounded px-2 py-2\">\r\n                    {item.supplier?.contact}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci√≥n Adicional */}\r\n            <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                <Icon name=\"FileText\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                <span>Informaci√≥n Adicional</span>\r\n              </h3>\r\n              \r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">Notas</label>\r\n                  <p className=\"text-sm text-foreground bg-background rounded px-2 py-2 min-h-[60px]\">\r\n                    {item.notes || 'Sin notas adicionales'}\r\n                  </p>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"text-sm font-medium text-muted-foreground\">√öltima Actualizaci√≥n</label>\r\n                  <p className=\"text-sm text-foreground bg-background rounded px-2 py-1\">\r\n                    {formatDate(item.lastUpdated)}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modal Footer */}\r\n        <div className=\"flex items-center justify-end space-x-3 p-4 sm:p-6 border-t border-border bg-background flex-shrink-0\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onClose}\r\n            className=\"w-full sm:w-auto\"\r\n          >\r\n            Cerrar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemDetailsModal;","import React, { useState, useEffect } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport Icon from '../../../components/AppIcon';\r\nimport useInventory from '../../../hooks/useInventory';\r\n\r\nconst EditItemModal = ({ isOpen, onClose, item, onUpdateSuccess }) => {\r\n  const { updateArticulo, loading } = useInventory();\r\n  \r\n  const [formData, setFormData] = useState({\r\n    itemCode: '',\r\n    name: '',\r\n    description: '',\r\n    specifications: '',\r\n    category: '',\r\n    unit: 'pcs',\r\n    unitCost: '',\r\n    reorderPoint: '',\r\n    currentStock: '',\r\n    location: 'Almac√©n Principal',\r\n    supplierName: '',\r\n    supplierContact: '',\r\n    notes: ''\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const categories = [\r\n    'Equipos HVAC',\r\n    'Refrigeraci√≥n',\r\n    'Componentes El√©ctricos',\r\n    'Plomer√≠a',\r\n    'Herramientas',\r\n    'Accesorios',\r\n    'Consumibles',\r\n    'Repuestos',\r\n    'Materiales de Instalaci√≥n'\r\n  ];\r\n\r\n  const units = [\r\n    'pcs',\r\n    'kg',\r\n    'lt',\r\n    'm',\r\n    'ft',\r\n    'gal√≥n',\r\n    'caja',\r\n    'rollo',\r\n    'juego'\r\n  ];\r\n\r\n  const locations = [\r\n    'Almac√©n Principal',\r\n    'Almac√©n Secundario',\r\n    'Taller',\r\n    'Oficina',\r\n    'Veh√≠culo 1',\r\n    'Veh√≠culo 2',\r\n    'Bodega Externa'\r\n  ];\r\n\r\n  // Cargar datos del item cuando se abre el modal\r\n  useEffect(() => {\r\n    if (isOpen && item) {\r\n      setFormData({\r\n        itemCode: String(item.itemCode || ''),\r\n        name: String(item.name || ''),\r\n        description: String(item.description || ''),\r\n        specifications: String(item.specifications || ''),\r\n        category: String(item.category || ''),\r\n        unit: String(item.unit || 'pcs'),\r\n        unitCost: item.unitCost !== undefined && item.unitCost !== null ? String(item.unitCost) : '',\r\n        reorderPoint: item.reorderPoint !== undefined && item.reorderPoint !== null ? String(item.reorderPoint) : '',\r\n        currentStock: item.currentStock !== undefined && item.currentStock !== null ? String(item.currentStock) : '',\r\n        location: String(item.location || 'Almac√©n Principal'),\r\n        supplierName: String(item.supplier?.name || ''),\r\n        supplierContact: String(item.supplier?.contact || ''),\r\n        notes: String(item.notes || '')\r\n      });\r\n      setErrors({});\r\n    }\r\n  }, [isOpen, item]);\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n    // Limpiar errores cuando el usuario escribe\r\n    if (errors?.[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData?.itemCode?.trim()) {\r\n      newErrors.itemCode = 'El c√≥digo de art√≠culo es requerido';\r\n    }\r\n    if (!formData?.name?.trim()) {\r\n      newErrors.name = 'El nombre del art√≠culo es requerido';\r\n    }\r\n    if (!formData?.description?.trim()) {\r\n      newErrors.description = 'La descripci√≥n es requerida';\r\n    }\r\n    if (!formData?.category) {\r\n      newErrors.category = 'La categor√≠a es requerida';\r\n    }\r\n    if (!formData?.unitCost || parseFloat(formData?.unitCost) <= 0) {\r\n      newErrors.unitCost = 'El costo unitario debe ser mayor a 0';\r\n    }\r\n    if (!formData?.reorderPoint || parseInt(formData?.reorderPoint) < 0) {\r\n      newErrors.reorderPoint = 'El punto de reorden debe ser 0 o mayor';\r\n    }\r\n    if (!formData?.currentStock || parseInt(formData?.currentStock) < 0) {\r\n      newErrors.currentStock = 'El stock actual debe ser 0 o mayor';\r\n    }\r\n    if (!formData?.supplierName?.trim()) {\r\n      newErrors.supplierName = 'El nombre del proveedor es requerido';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      const payload = {\r\n        codigoArticulo: formData?.itemCode?.trim(),\r\n        nombre: formData?.name?.trim(),\r\n        descripcion: formData?.description?.trim(),\r\n        especificaciones: formData?.specifications?.trim() || '',\r\n        categoria: formData?.category,\r\n        unidad: formData?.unit,\r\n        costoUnitario: parseFloat(formData?.unitCost),\r\n        puntoReorden: parseInt(formData?.reorderPoint),\r\n        stockActual: parseInt(formData?.currentStock),\r\n        ubicacion: formData?.location,\r\n        nombreProveedor: formData?.supplierName?.trim(),\r\n        contactoProveedor: formData?.supplierContact?.trim() || '',\r\n        notas: formData?.notes?.trim() || ''\r\n      };\r\n\r\n      await updateArticulo(item.id, payload);\r\n      \r\n      if (onUpdateSuccess) {\r\n        onUpdateSuccess();\r\n      }\r\n      \r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error updating article:', error);\r\n      setErrors({ submit: 'Error al actualizar el art√≠culo. Intente nuevamente.' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      itemCode: '',\r\n      name: '',\r\n      description: '',\r\n      specifications: '',\r\n      category: '',\r\n      unit: 'pcs',\r\n      unitCost: '',\r\n      reorderPoint: '',\r\n      currentStock: '',\r\n      location: 'Almac√©n Principal',\r\n      supplierName: '',\r\n      supplierContact: '',\r\n      notes: ''\r\n    });\r\n    setErrors({});\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4\">\r\n      <div className=\"bg-background rounded-lg shadow-xl w-full max-w-6xl max-h-[95vh] sm:max-h-[90vh] flex flex-col overflow-hidden\">\r\n        {/* Modal Header */}\r\n        <div className=\"flex items-center justify-between p-4 sm:p-6 border-b border-border flex-shrink-0\">\r\n          <div className=\"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1\">\r\n            <div className=\"w-8 h-8 sm:w-10 sm:h-10 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n              <Icon name=\"Edit\" size={16} className=\"text-primary sm:w-5 sm:h-5\" />\r\n            </div>\r\n            <div className=\"min-w-0 flex-1\">\r\n              <h2 className=\"text-lg sm:text-xl font-semibold text-foreground\">Actualizar Art√≠culo</h2>\r\n              <p className=\"text-xs sm:text-sm text-muted-foreground hidden sm:block\">Modificar informaci√≥n del art√≠culo</p>\r\n            </div>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={handleClose}\r\n            iconName=\"X\"\r\n            iconSize={16}\r\n          />\r\n        </div>\r\n\r\n        {/* Modal Content */}\r\n        <div className=\"flex-1 min-h-0 overflow-y-auto\">\r\n          <form onSubmit={handleSubmit} className=\"p-4 sm:p-6\">\r\n          <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6\">\r\n            {/* Informaci√≥n B√°sica */}\r\n            <div className=\"space-y-3 sm:space-y-4\">\r\n              <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n                <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                  <span>Informaci√≥n B√°sica</span>\r\n                </h3>\r\n                \r\n                <div className=\"space-y-4\">\r\n                  <Input\r\n                    label=\"C√≥digo del Art√≠culo\"\r\n                    value={formData.itemCode}\r\n                    onChange={(e) => handleInputChange('itemCode', e.target.value)}\r\n                    error={errors.itemCode}\r\n                    placeholder=\"Ej: HVAC-001\"\r\n                    disabled={isSubmitting || loading}\r\n                  />\r\n\r\n                  <Input\r\n                    label=\"Nombre\"\r\n                    value={formData.name}\r\n                    onChange={(e) => handleInputChange('name', e.target.value)}\r\n                    error={errors.name}\r\n                    placeholder=\"Nombre del art√≠culo\"\r\n                    disabled={isSubmitting || loading}\r\n                  />\r\n                  \r\n                  <Input\r\n                    label=\"Descripci√≥n\"\r\n                    value={formData.description}\r\n                    onChange={(e) => handleInputChange('description', e.target.value)}\r\n                    error={errors.description}\r\n                    placeholder=\"Descripci√≥n del art√≠culo\"\r\n                    disabled={isSubmitting || loading}\r\n                  />\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                      Especificaciones\r\n                    </label>\r\n                    <textarea\r\n                      value={formData.specifications || ''}\r\n                      onChange={(e) => handleInputChange('specifications', e.target.value)}\r\n                      placeholder=\"Especificaciones t√©cnicas detalladas...\"\r\n                      className=\"w-full min-h-[80px] px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-y\"\r\n                      disabled={isSubmitting || loading}\r\n                    />\r\n                    {errors.specifications && (\r\n                      <p className=\"text-error text-xs mt-1\">{errors.specifications}</p>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                      Categor√≠a {errors.category && <span className=\"text-error\">*</span>}\r\n                    </label>\r\n                    <select\r\n                      value={formData.category || ''}\r\n                      onChange={(e) => handleInputChange('category', e.target.value)}\r\n                      disabled={isSubmitting || loading}\r\n                      className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                    >\r\n                      <option value=\"\">Seleccionar categor√≠a</option>\r\n                      {categories.map(category => (\r\n                        <option key={category} value={category}>{category}</option>\r\n                      ))}\r\n                    </select>\r\n                    {errors.category && (\r\n                      <p className=\"text-error text-xs mt-1\">{errors.category}</p>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                      Ubicaci√≥n\r\n                    </label>\r\n                    <select\r\n                      value={formData.location || 'Almac√©n Principal'}\r\n                      onChange={(e) => handleInputChange('location', e.target.value)}\r\n                      disabled={isSubmitting || loading}\r\n                      className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                    >\r\n                      {locations.map(location => (\r\n                        <option key={location} value={location}>{location}</option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Stock e Inventario */}\r\n            <div className=\"space-y-3 sm:space-y-4\">\r\n              <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n                <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                  <Icon name=\"BarChart3\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                  <span>Stock e Inventario</span>\r\n                </h3>\r\n                \r\n                <div className=\"space-y-3 sm:space-y-4\">\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\r\n                    <Input\r\n                      label=\"Stock Actual\"\r\n                      type=\"number\"\r\n                      value={formData.currentStock}\r\n                      onChange={(e) => handleInputChange('currentStock', e.target.value)}\r\n                      error={errors.currentStock}\r\n                      placeholder=\"0\"\r\n                      min=\"0\"\r\n                      disabled={isSubmitting || loading}\r\n                    />\r\n                    \r\n                    <Input\r\n                      label=\"Punto de Reorden\"\r\n                      type=\"number\"\r\n                      value={formData.reorderPoint}\r\n                      onChange={(e) => handleInputChange('reorderPoint', e.target.value)}\r\n                      error={errors.reorderPoint}\r\n                      placeholder=\"0\"\r\n                      min=\"0\"\r\n                      disabled={isSubmitting || loading}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                        Unidad\r\n                      </label>\r\n                      <select\r\n                        value={formData.unit || 'pcs'}\r\n                        onChange={(e) => handleInputChange('unit', e.target.value)}\r\n                        disabled={isSubmitting || loading}\r\n                        className=\"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                      >\r\n                        {units.map(unit => (\r\n                          <option key={unit} value={unit}>{unit}</option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n                    \r\n                    <Input\r\n                      label=\"Costo Unitario\"\r\n                      type=\"number\"\r\n                      value={formData.unitCost}\r\n                      onChange={(e) => handleInputChange('unitCost', e.target.value)}\r\n                      error={errors.unitCost}\r\n                      placeholder=\"0.00\"\r\n                      min=\"0\"\r\n                      step=\"0.01\"\r\n                      disabled={isSubmitting || loading}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci√≥n del Proveedor */}\r\n            <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                <Icon name=\"Truck\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                <span>Proveedor</span>\r\n              </h3>\r\n              \r\n              <div className=\"space-y-4\">\r\n                <Input\r\n                  label=\"Nombre del Proveedor\"\r\n                  value={formData.supplierName}\r\n                  onChange={(e) => handleInputChange('supplierName', e.target.value)}\r\n                  error={errors.supplierName}\r\n                  placeholder=\"Nombre de la empresa proveedora\"\r\n                  disabled={isSubmitting || loading}\r\n                />\r\n                \r\n                <Input\r\n                  label=\"Contacto del Proveedor\"\r\n                  value={formData.supplierContact}\r\n                  onChange={(e) => handleInputChange('supplierContact', e.target.value)}\r\n                  error={errors.supplierContact}\r\n                  placeholder=\"Email, tel√©fono o persona de contacto\"\r\n                  disabled={isSubmitting || loading}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Notas Adicionales */}\r\n            <div className=\"bg-muted/50 rounded-lg p-3 sm:p-4\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-foreground mb-3 sm:mb-4 flex items-center space-x-2\">\r\n                <Icon name=\"FileText\" size={16} className=\"text-primary sm:w-[18px] sm:h-[18px]\" />\r\n                <span>Notas Adicionales</span>\r\n              </h3>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                  Notas y Observaciones\r\n                </label>\r\n                <textarea\r\n                  value={formData.notes || ''}\r\n                  onChange={(e) => handleInputChange('notes', e.target.value)}\r\n                  placeholder=\"Notas adicionales, instrucciones de uso, compatibilidad, etc...\"\r\n                  className=\"w-full min-h-[80px] px-3 py-2 border border-border rounded-md bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-y\"\r\n                  disabled={isSubmitting || loading}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n            {/* Error Message */}\r\n            {errors.submit && (\r\n              <div className=\"mt-4 p-3 bg-error/10 border border-error/20 rounded-md\">\r\n                <p className=\"text-error text-sm\">{errors.submit}</p>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n\r\n        {/* Modal Footer */}\r\n        <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center justify-end space-y-2 sm:space-y-0 sm:space-x-3 p-4 sm:p-6 border-t border-border bg-background flex-shrink-0\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={handleClose}\r\n            disabled={isSubmitting || loading}\r\n            className=\"w-full sm:w-auto order-2 sm:order-1\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            onClick={handleSubmit}\r\n            disabled={isSubmitting || loading}\r\n            iconName={(isSubmitting || loading) ? \"Loader\" : \"Save\"}\r\n            iconSize={16}\r\n            className={`w-full sm:w-auto order-1 sm:order-2 ${(isSubmitting || loading) ? \"animate-spin\" : \"\"}`}\r\n          >\r\n            {(isSubmitting || loading) ? 'Actualizando...' : 'Guardar Cambios'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditItemModal;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst CreatePOModal = ({ \r\n  isOpen, \r\n  onClose, \r\n  onSubmit, \r\n  initialItem = null, \r\n  lowStockItems = [] \r\n}) => {\r\n  const [step, setStep] = useState(1);\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [orderDetails, setOrderDetails] = useState({\r\n    supplier: '',\r\n    notes: '',\r\n    urgent: false,\r\n    reference: '',\r\n    paymentTerms: 'net30',\r\n    priority: 'normal'\r\n  });\r\n\r\n  const paymentTermsOptions = [\r\n    { value: 'immediate', label: 'Inmediato' },\r\n    { value: 'net15', label: '15 d√≠as' },\r\n    { value: 'net30', label: '30 d√≠as' },\r\n    { value: 'net60', label: '60 d√≠as' },\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: 'baja', label: 'Baja' },\r\n    { value: 'normal', label: 'Normal' },\r\n    { value: 'alta', label: 'Alta' },\r\n    { value: 'urgente', label: 'Urgente' },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (initialItem) {\r\n      // Si recibimos un item inicial, a√±adirlo a la lista de seleccionados\r\n      const orderQty = initialItem.reorderPoint - initialItem.currentStock + 5;\r\n      \r\n      // Limpiar selecci√≥n previa si venimos de una alerta espec√≠fica\r\n      if (initialItem.itemCode) {\r\n        setSelectedItems([{\r\n          id: initialItem.id,\r\n          itemCode: initialItem.itemCode,\r\n          name: initialItem.name || '',\r\n          description: initialItem.description,\r\n          supplier: initialItem.supplier?.name,\r\n          currentStock: initialItem.currentStock,\r\n          reorderPoint: initialItem.reorderPoint,\r\n          unit: initialItem.unit,\r\n          unitCost: initialItem.unitCost || 0,\r\n          orderQty: orderQty > 0 ? orderQty : 5,\r\n          subtotal: (initialItem.unitCost || 0) * (orderQty > 0 ? orderQty : 5)\r\n        }]);\r\n        \r\n        setOrderDetails({\r\n          ...orderDetails,\r\n          supplier: initialItem.supplier?.name\r\n        });\r\n        \r\n        // Si venimos de una alerta espec√≠fica, avanzamos directamente al paso 2\r\n        setStep(2);\r\n      }\r\n    } else {\r\n      // Si no hay item inicial, resetear al paso 1\r\n      setStep(1);\r\n      setSelectedItems([]);\r\n    }\r\n  }, [initialItem]);\r\n\r\n  const handleNextStep = () => {\r\n    setStep(step + 1);\r\n  };\r\n\r\n  const handlePreviousStep = () => {\r\n    setStep(step - 1);\r\n  };\r\n\r\n  const handleItemSelectionChange = (item, isSelected) => {\r\n    if (isSelected) {\r\n      // Verificar si el art√≠culo ya est√° en la lista\r\n      if (selectedItems.some(selected => selected.id === item.id)) {\r\n        return; // Evitar a√±adir duplicados\r\n      }\r\n      \r\n      // Calcular la cantidad recomendada\r\n      const orderQty = item.reorderPoint - item.currentStock + 5;\r\n      \r\n      setSelectedItems([...selectedItems, {\r\n        id: item.id,\r\n        itemCode: item.itemCode,\r\n        name: item.name || '',\r\n        description: item.description,\r\n        supplier: item.supplier?.name,\r\n        currentStock: item.currentStock,\r\n        reorderPoint: item.reorderPoint,\r\n        unit: item.unit,\r\n        unitCost: item.unitCost || 0,\r\n        orderQty: orderQty > 0 ? orderQty : 5,\r\n        subtotal: (item.unitCost || 0) * (orderQty > 0 ? orderQty : 5)\r\n      }]);\r\n    } else {\r\n      setSelectedItems(selectedItems.filter(selected => selected.id !== item.id));\r\n    }\r\n  };\r\n\r\n  const handleQuantityChange = (id, newQty) => {\r\n    setSelectedItems(selectedItems.map(item => {\r\n      if (item.id === id) {\r\n        const qty = Math.max(1, parseInt(newQty) || 1);\r\n        return {\r\n          ...item,\r\n          orderQty: qty,\r\n          subtotal: item.unitCost * qty\r\n        };\r\n      }\r\n      return item;\r\n    }));\r\n  };\r\n\r\n  const handlePriceChange = (id, newPrice) => {\r\n    setSelectedItems(selectedItems.map(item => {\r\n      if (item.id === id) {\r\n        const price = Math.max(0, parseFloat(newPrice) || 0);\r\n        return {\r\n          ...item,\r\n          unitCost: price,\r\n          subtotal: price * item.orderQty\r\n        };\r\n      }\r\n      return item;\r\n    }));\r\n  };\r\n\r\n  const handleDetailChange = (field, value) => {\r\n    setOrderDetails({\r\n      ...orderDetails,\r\n      [field]: value\r\n    });\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    return selectedItems.reduce((total, item) => total + item.subtotal, 0);\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    }).format(amount);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    // Crear la estructura de la orden\r\n    const orderData = {\r\n      supplier: orderDetails.supplier,\r\n      notes: orderDetails.notes,\r\n      urgent: orderDetails.urgent,\r\n      reference: orderDetails.reference,\r\n      paymentTerms: orderDetails.paymentTerms,\r\n      priority: orderDetails.priority,\r\n      items: selectedItems,\r\n      total: calculateTotal(),\r\n      status: 'pending',\r\n      orderDate: new Date(),\r\n      orderNumber: `PO-${Date.now().toString().slice(-6)}`,\r\n      itemCount: selectedItems.length\r\n    };\r\n    \r\n    onSubmit(orderData);\r\n  };\r\n\r\n  // Limpiar estado cuando el modal se cierra\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      // Esperamos un poco para resetear el estado para que no se vea el cambio durante la animaci√≥n de cierre\r\n      const timer = setTimeout(() => {\r\n        if (!initialItem) {\r\n          setSelectedItems([]);\r\n          setOrderDetails({\r\n            supplier: '',\r\n            notes: '',\r\n            urgent: false,\r\n            reference: '',\r\n            paymentTerms: 'net30',\r\n            priority: 'normal'\r\n          });\r\n        }\r\n      }, 300);\r\n      \r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isOpen]);\r\n  \r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n      <div className=\"flex min-h-full items-center justify-center p-4 text-center\">\r\n        <div className=\"fixed inset-0 bg-black/50 transition-opacity\" onClick={onClose}></div>\r\n        \r\n        <div className=\"w-full max-w-3xl transform overflow-hidden rounded-lg bg-card text-left align-middle shadow-xl transition-all\">\r\n          <div className=\"bg-muted px-6 py-4 flex items-center justify-between border-b border-border\">\r\n            <h3 className=\"text-lg font-medium text-foreground\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Icon name=\"ShoppingCart\" size={18} className=\"text-primary\" />\r\n                <span>Crear Orden de Compra</span>\r\n              </div>\r\n            </h3>\r\n            \r\n            <button \r\n              onClick={onClose}\r\n              className=\"rounded-md bg-transparent text-muted-foreground hover:text-foreground\"\r\n            >\r\n              <Icon name=\"X\" size={18} />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"px-6 py-4\">\r\n            {/* Progress Steps */}\r\n            <div className=\"flex items-center mb-6 w-full\">\r\n              <div className={`flex-1 h-1 ${step >= 1 ? 'bg-primary' : 'bg-muted'}`}></div>\r\n              <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\r\n                step >= 1 ? 'bg-primary text-primary-foreground' : 'bg-muted text-muted-foreground'\r\n              } mx-1`}>\r\n                1\r\n              </div>\r\n              <div className={`flex-1 h-1 ${step >= 2 ? 'bg-primary' : 'bg-muted'}`}></div>\r\n              <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\r\n                step >= 2 ? 'bg-primary text-primary-foreground' : 'bg-muted text-muted-foreground'\r\n              } mx-1`}>\r\n                2\r\n              </div>\r\n              <div className={`flex-1 h-1 ${step >= 3 ? 'bg-primary' : 'bg-muted'}`}></div>\r\n              <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\r\n                step >= 3 ? 'bg-primary text-primary-foreground' : 'bg-muted text-muted-foreground'\r\n              } mx-1`}>\r\n                3\r\n              </div>\r\n              <div className={`flex-1 h-1 ${step >= 3 ? 'bg-primary' : 'bg-muted'}`}></div>\r\n            </div>\r\n\r\n            {step === 1 && (\r\n              <>\r\n                <h4 className=\"text-md font-medium mb-4\">Selecciona los art√≠culos para ordenar</h4>\r\n                <div className=\"max-h-96 overflow-y-auto border border-border rounded-md mb-4\">\r\n                  <table className=\"w-full\">\r\n                    <thead className=\"bg-muted border-b border-border\">\r\n                      <tr>\r\n                        <th className=\"p-2 text-left w-12\">\r\n                          <input \r\n                            type=\"checkbox\" \r\n                            className=\"rounded border-border\"\r\n                            onChange={(e) => {\r\n                              if (e.target.checked) {\r\n                                // Crear un mapa de IDs ya seleccionados para buscar duplicados m√°s r√°pido\r\n                                const selectedIds = new Set(selectedItems.map(item => item.id));\r\n                                \r\n                                // Seleccionar todos los art√≠culos que no est√©n ya seleccionados\r\n                                const itemsToAdd = lowStockItems\r\n                                  .filter(item => !selectedIds.has(item.id))\r\n                                  .map(item => {\r\n                                    const orderQty = item.reorderPoint - item.currentStock + 5;\r\n                                    return {\r\n                                      id: item.id,\r\n                                      itemCode: item.itemCode,\r\n                                      name: item.name || '',\r\n                                      description: item.description,\r\n                                      supplier: item.supplier?.name,\r\n                                      currentStock: item.currentStock,\r\n                                      reorderPoint: item.reorderPoint,\r\n                                      unit: item.unit,\r\n                                      unitCost: item.unitCost || 0,\r\n                                      orderQty: orderQty > 0 ? orderQty : 5,\r\n                                      subtotal: (item.unitCost || 0) * (orderQty > 0 ? orderQty : 5)\r\n                                    };\r\n                                  });\r\n                                \r\n                                if (itemsToAdd.length > 0) {\r\n                                  setSelectedItems([...selectedItems, ...itemsToAdd]);\r\n                                }\r\n                              } else {\r\n                                setSelectedItems([]);\r\n                              }\r\n                            }}\r\n                            checked={selectedItems.length === lowStockItems.length && lowStockItems.length > 0}\r\n                          />\r\n                        </th>\r\n                        <th className=\"p-2 text-left\">C√≥digo</th>\r\n                        <th className=\"p-2 text-left\">Nombre</th>\r\n                        <th className=\"p-2 text-left\">Descripci√≥n</th>\r\n                        <th className=\"p-2 text-left\">Stock</th>\r\n                        <th className=\"p-2 text-left\">Proveedor</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {lowStockItems.length === 0 ? (\r\n                        <tr>\r\n                          <td colSpan=\"5\" className=\"p-4 text-center text-muted-foreground\">\r\n                            No hay art√≠culos con stock bajo disponibles\r\n                          </td>\r\n                        </tr>\r\n                      ) : (\r\n                        lowStockItems.map((item) => (\r\n                          <tr key={item.id} className=\"border-b border-border hover:bg-muted/50 transition-smooth\">\r\n                            <td className=\"p-2\">\r\n                              <input \r\n                                type=\"checkbox\" \r\n                                className=\"rounded border-border\"\r\n                                checked={selectedItems.some(selectedItem => selectedItem.id === item.id)} \r\n                                onChange={(e) => handleItemSelectionChange(item, e.target.checked)}\r\n                              />\r\n                            </td>\r\n                            <td className=\"p-2 font-mono text-sm\">{item.itemCode}</td>\r\n                            <td className=\"p-2\">{item.name}</td>\r\n                            <td className=\"p-2\">{item.description}</td>\r\n                            <td className=\"p-2\">\r\n                              <span className={\r\n                                item.currentStock === 0 ? \"text-error\" : \r\n                                item.currentStock <= item.reorderPoint ? \"text-warning\" : \"\"\r\n                              }>\r\n                                {item.currentStock} / {item.reorderPoint} {item.unit}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"p-2\">{item.supplier?.name}</td>\r\n                          </tr>\r\n                        ))\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n\r\n                {selectedItems.length > 0 && (\r\n                  <div className=\"text-sm text-muted-foreground mb-4\">\r\n                    {selectedItems.length} art√≠culo(s) seleccionado(s)\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {step === 2 && (\r\n              <>\r\n                <h4 className=\"text-md font-medium mb-4\">Detalles de los art√≠culos</h4>\r\n                <div className=\"max-h-96 overflow-y-auto border border-border rounded-md mb-4\">\r\n                  <table className=\"w-full\">\r\n                    <thead className=\"bg-muted border-b border-border\">\r\n                      <tr>\r\n                        <th className=\"p-2 text-left\">C√≥digo</th>\r\n                        <th className=\"p-2 text-left\">Nombre</th>\r\n                        <th className=\"p-2 text-left\">Descripci√≥n</th>\r\n                        <th className=\"p-2 text-left\">Precio</th>\r\n                        <th className=\"p-2 text-left\">Cantidad</th>\r\n                        <th className=\"p-2 text-left\">Subtotal</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {selectedItems.map((item) => (\r\n                        <tr key={item.id} className=\"border-b border-border hover:bg-muted/50 transition-smooth\">\r\n                          <td className=\"p-2 font-mono text-sm\">{item.itemCode}</td>\r\n                          <td className=\"p-2\">{item.name}</td>\r\n                          <td className=\"p-2\">{item.description}</td>\r\n                          <td className=\"p-2\">\r\n                            <div className=\"flex items-center\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                min=\"0\"\r\n                                step=\"0.01\"\r\n                                value={item.unitCost}\r\n                                onChange={(e) => handlePriceChange(item.id, e.target.value)}\r\n                                className=\"w-24 text-right\"\r\n                                placeholder=\"0.00\"\r\n                              />\r\n                              <span className=\"ml-1 text-xs text-muted-foreground\">MXN</span>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"p-2\">\r\n                            <div className=\"flex items-center\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                value={item.orderQty}\r\n                                onChange={(e) => handleQuantityChange(item.id, e.target.value)}\r\n                                className=\"w-20\"\r\n                              />\r\n                              <span className=\"ml-1\">{item.unit}</span>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"p-2 font-medium\">\r\n                            {formatCurrency(item.subtotal)}\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                \r\n                <div className=\"flex justify-end mb-4\">\r\n                  <div className=\"bg-muted p-3 rounded-md\">\r\n                    <div className=\"text-sm text-muted-foreground mb-1\">\r\n                      Total de la orden:\r\n                    </div>\r\n                    <div className=\"text-xl font-bold text-foreground\">\r\n                      {formatCurrency(calculateTotal())}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {step === 3 && (\r\n              <>\r\n                <h4 className=\"text-md font-medium mb-4\">Informaci√≥n de la orden</h4>\r\n                \r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Proveedor *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      placeholder=\"Nombre del proveedor\"\r\n                      value={orderDetails.supplier}\r\n                      onChange={(e) => handleDetailChange('supplier', e.target.value)}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Prioridad\r\n                    </label>\r\n                    <select\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      value={orderDetails.priority}\r\n                      onChange={(e) => handleDetailChange('priority', e.target.value)}\r\n                    >\r\n                      {priorityOptions.map(option => (\r\n                        <option key={option.value} value={option.value}>\r\n                          {option.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Referencia / No. de orden\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      placeholder=\"N√∫mero de referencia\"\r\n                      value={orderDetails.reference}\r\n                      onChange={(e) => handleDetailChange('reference', e.target.value)}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      T√©rminos de pago\r\n                    </label>\r\n                    <select\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      value={orderDetails.paymentTerms}\r\n                      onChange={(e) => handleDetailChange('paymentTerms', e.target.value)}\r\n                    >\r\n                      {paymentTermsOptions.map(option => (\r\n                        <option key={option.value} value={option.value}>\r\n                          {option.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"mb-4\">\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Notas\r\n                  </label>\r\n                  <textarea\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                    rows=\"3\"\r\n                    placeholder=\"Instrucciones o comentarios adicionales\"\r\n                    value={orderDetails.notes}\r\n                    onChange={(e) => handleDetailChange('notes', e.target.value)}\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"mb-4\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      className=\"rounded border-border mr-2\"\r\n                      checked={orderDetails.urgent}\r\n                      onChange={(e) => handleDetailChange('urgent', e.target.checked)}\r\n                    />\r\n                    <span className=\"text-sm font-medium\">Marcar como urgente</span>\r\n                  </label>\r\n                </div>\r\n                \r\n                <div className=\"bg-muted p-4 rounded-md mb-4\">\r\n                  <h5 className=\"font-medium mb-2\">Resumen</h5>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                    <div className=\"text-sm\">\r\n                      <span className=\"text-muted-foreground\">Art√≠culos:</span> {selectedItems.length}\r\n                    </div>\r\n                    <div className=\"text-sm\">\r\n                      <span className=\"text-muted-foreground\">Proveedor:</span> {orderDetails.supplier || 'No especificado'}\r\n                    </div>\r\n                    <div className=\"text-sm\">\r\n                      <span className=\"text-muted-foreground\">Prioridad:</span> {priorityOptions.find(p => p.value === orderDetails.priority)?.label || 'Normal'}\r\n                    </div>\r\n                    <div className=\"text-sm\">\r\n                      <span className=\"text-muted-foreground\">Total:</span> {formatCurrency(calculateTotal())}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"bg-muted px-6 py-4 flex justify-between border-t border-border\">\r\n            {step > 1 ? (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handlePreviousStep}\r\n                iconName=\"ArrowLeft\"\r\n                iconSize={16}\r\n              >\r\n                Anterior\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={onClose}\r\n              >\r\n                Cancelar\r\n              </Button>\r\n            )}\r\n            \r\n            {step < 3 ? (\r\n              <Button\r\n                variant=\"default\"\r\n                onClick={handleNextStep}\r\n                iconName=\"ArrowRight\"\r\n                iconSize={16}\r\n                disabled={step === 1 && selectedItems.length === 0}\r\n              >\r\n                Siguiente\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                variant=\"default\"\r\n                onClick={handleSubmit}\r\n                iconName=\"Check\"\r\n                iconSize={16}\r\n                disabled={!orderDetails.supplier}\r\n              >\r\n                Crear Orden\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreatePOModal;","import httpService from \"./httpService\";\r\n\r\nconst TIMEOUT = 10000; // 10 segundos\r\n\r\nconst requisiService = {\r\n  async getRequisitions(filters = {}) {\r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => controller.abort(), TIMEOUT);\r\n\r\n    try {\r\n      const query = new URLSearchParams(filters).toString();\r\n      const url = query ? `/requisiciones?${query}` : \"/requisiciones\";\r\n\r\n      const response = await httpService.get(url, {\r\n        signal: controller.signal,\r\n        headers: {\r\n          'Cache-Control': 'no-cache',\r\n          'Pragma': 'no-cache'\r\n        }\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      // Si la respuesta tiene una estructura similar a getOrdenes\r\n      // Loguear la respuesta para depuraci√≥n\r\n      console.log('Respuesta del servidor (requisiciones):', response);\r\n\r\n      if (response?.data?.items && Array.isArray(response.data.items)) {\r\n        return {\r\n          success: true,\r\n          data: response.data.items.map(item => ({\r\n            id: item.id,\r\n            numeroOrdenTrabajo: item.numeroOrdenTrabajo || item.orderNumber,\r\n            nombreProyecto: item.nombreProyecto || item.projectName,\r\n            solicitadoPor: item.solicitadoPor || item.requestedBy,\r\n            fechaSolicitud: item.fechaSolicitud || item.requestDate,\r\n            estado: item.estado || item.status,\r\n            prioridad: item.prioridad || item.priority,\r\n            descripcionSolicitud: item.descripcionSolicitud || item.description,\r\n            materiales: item.materiales || item.items || [],\r\n            materialesManuales: item.materialesManuales || item.manualItems || [], // ‚úÖ AGREGAR ESTO\r\n            justificacionSolicitud: item.justificacionSolicitud || item.justification,\r\n            notasAdicionales: item.notasAdicionales || item.notes\r\n          })),\r\n          message: `Se encontraron ${response.data.items.length} requisici√≥n(es)`\r\n        };\r\n      }\r\n\r\n      // Si la respuesta es un array directo\r\n      if (Array.isArray(response?.data)) {\r\n        return {\r\n          success: true,\r\n          data: response.data.map(item => ({\r\n            id: item.id,\r\n            numeroOrdenTrabajo: item.numeroOrdenTrabajo || item.orderNumber,\r\n            nombreProyecto: item.nombreProyecto || item.projectName,\r\n            solicitadoPor: item.solicitadoPor || item.requestedBy,\r\n            fechaSolicitud: item.fechaSolicitud || item.requestDate,\r\n            estado: item.estado || item.status,\r\n            prioridad: item.prioridad || item.priority,\r\n            descripcionSolicitud: item.descripcionSolicitud || item.description,\r\n            materiales: item.materiales || item.items || [],\r\n            materialesManuales: item.materialesManuales || item.manualItems || [], // ‚úÖ AGREGAR ESTO\r\n            justificacionSolicitud: item.justificacionSolicitud || item.justification,\r\n            notasAdicionales: item.notasAdicionales || item.notes\r\n          })),\r\n          message: `Se encontraron ${response.data.length} requisici√≥n(es)`\r\n        };\r\n      }\r\n\r\n      // Si no hay datos v√°lidos\r\n      return {\r\n        success: true,\r\n        data: [],\r\n        message: 'No se encontraron requisiciones'\r\n      };\r\n\r\n    } catch (error) {\r\n      clearTimeout(timeoutId);\r\n      \r\n      // Si la petici√≥n fue cancelada, retornamos un resultado vac√≠o v√°lido\r\n      if (error.name === 'CanceledError' || error.message === 'canceled') {\r\n        return {\r\n          success: true,\r\n          data: [],\r\n          message: 'La b√∫squeda de requisiciones fue cancelada'\r\n        };\r\n      }\r\n\r\n      console.error(\"Error al obtener requisiciones:\", error);\r\n      return {\r\n        success: true,\r\n        data: [],\r\n        message: 'Error al cargar requisiciones'\r\n      };\r\n    }\r\n  },\r\n\r\n  async createRequisition(payload) {\r\n    try {\r\n      const response = await httpService.post(\"/requisiciones/crear\", payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al crear requisici√≥n:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateRequisition(id, payload) {\r\n    try {\r\n      const response = await httpService.put(`/requisiciones/${id}`, payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al actualizar requisici√≥n:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deleteRequisition(id) {\r\n    try {\r\n      const response = await httpService.delete(`/requisiciones/${id}`);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al eliminar requisici√≥n:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getRequisitionById(id) {\r\n    try {\r\n      const response = await httpService.get(`/requisiciones/${id}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener requisici√≥n por ID:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\nexport default requisiService;\r\n","import { useState } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport requisiService from \"../services/requisiService\";\r\n\r\nconst useRequisi = () => {\r\n  const { showHttpError, showOperationSuccess } = useNotifications();\r\n  const [requisitions, setRequisitions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getRequisitions = async (filters = {}) => {\r\n    if (loading) return []; // Evitar m√∫ltiples llamadas simult√°neas\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const response = await requisiService.getRequisitions(filters);\r\n      \r\n      // Siempre deber√≠a ser un objeto con {success, data, message}\r\n      if (response?.success) {\r\n        const requisitionData = Array.isArray(response.data) ? response.data : [];\r\n        setRequisitions(requisitionData);\r\n        return requisitionData;\r\n      } else {\r\n        console.warn('Respuesta inesperada de requisiciones:', response);\r\n        setRequisitions([]);\r\n        return [];\r\n      }\r\n    } catch (err) {\r\n      console.error('Error en getRequisitions:', err);\r\n      setError(err);\r\n      \r\n      // No mostrar error si la petici√≥n fue cancelada\r\n      if (err.message !== 'canceled' && !err.isNetworkError) {\r\n        showHttpError(\"Error al cargar requisiciones\");\r\n      }\r\n      \r\n      setRequisitions([]);\r\n      return [];\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createRequisition = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await requisiService.createRequisition(payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Requisici√≥n creada\");\r\n        setRequisitions((prev) => [...prev, response.data]); // ‚Üê Agregamos sin recargar todo\r\n        return response.data;\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al crear requisici√≥n\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo crear la requisici√≥n\");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateRequisition = async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await requisiService.updateRequisition(id, payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Requisici√≥n actualizada\");\r\n        // ‚úÖ Usar la data de la respuesta del backend, no el payload\r\n        const updatedRequisition = response.data || { ...payload, id };\r\n        setRequisitions(prev => prev.map(r => r.id === id ? updatedRequisition : r));\r\n        return updatedRequisition;\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al actualizar requisici√≥n\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo actualizar la requisici√≥n\");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\nconst deleteRequisition = async (id) => {\r\n  setLoading(true);\r\n  setError(null);\r\n  try {\r\n    const response = await requisiService.deleteRequisition(id);\r\n    if (response.success) {\r\n      showOperationSuccess(response.message || \"Requisici√≥n eliminada\");\r\n      setRequisitions(prev => prev.filter(r => r.id !== id));\r\n      return true;\r\n    } else {\r\n      showHttpError(response.message || \"No se pudo eliminar\");\r\n      return false;\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    showHttpError(\"Error al eliminar la requisici√≥n\");\r\n    setError(err);\r\n    return false;\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n  const getRequisitionById = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await requisiService.getRequisitionById(id);\r\n      setLoading(false);\r\n      return data;\r\n    } catch (err) {\r\n      console.error('Error en getRequisitionById:', err);\r\n      setError(err);\r\n      showHttpError(\"Error al cargar la requisici√≥n\");\r\n      setLoading(false);\r\n      return null;\r\n    }\r\n  };\r\n\r\n\r\n\r\n  return { requisitions, loading, error, getRequisitions, createRequisition, updateRequisition, deleteRequisition, getRequisitionById };\r\n};\r\n\r\nexport default useRequisi;\r\n","import httpService from \"./httpService\";\r\n\r\nconst operacService = {\r\n  // Ahora acepta filtros din√°micos\r\n  async getWorkOrders(filters = {}) {\r\n    try {\r\n      const query = new URLSearchParams(filters).toString();\r\n      const url = query ? `/trabajos?${query}` : \"/trabajos\";\r\n\r\n      const response = await httpService.get(url);\r\n      return response; // { success, data, message }\r\n    } catch (error) {\r\n      console.error(\"Error al obtener trabajos:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createWorkOrder(payload) {\r\n    try {\r\n      const response = await httpService.post(\"/trabajos/crear\", payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al crear trabajo:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateWorkOrder(id, payload) {\r\n    try {\r\n      const response = await httpService.put(`/trabajos/${id}`, payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al actualizar trabajo:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deleteWorkOrder(id) {\r\n    try {\r\n      const response = await httpService.delete(`/trabajos/${id}`);\r\n      return response; // { success, data, message }\r\n    } catch (error) {\r\n      console.error(\"Error al eliminar trabajo:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default operacService;\r\n","import { useState } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport operacService from \"../services/operacService\";\r\n\r\nconst useOperac = () => {\r\n  const { showHttpError, showOperationSuccess } = useNotifications();\r\n  const [oportunities, setOportunities] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getOportunities = async (filters = {}) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await operacService.getWorkOrders(filters);\r\n      const data = response.success && Array.isArray(response.data) ? response.data : [];\r\n      setOportunities(data);\r\n      return data;\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err);\r\n      showHttpError(\"Error al cargar √≥rdenes\");\r\n      return [];\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createWorkOrder = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await operacService.createWorkOrder(payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Orden creada ‚úÖ\");\r\n        const newOrders = await getOportunities(); // Actualiza estado global\r\n        const savedOrder = newOrders.find(o => o.id === response.data.id) || response.data;\r\n        return savedOrder;\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al crear orden\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo crear la orden ‚ùå\");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateWorkOrder = async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await operacService.updateWorkOrder(id, payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Orden actualizada ‚úÖ\");\r\n        // Actualiza localmente sin recargar\r\n        setOportunities(prev => prev.map(o => o.id === id ? { ...o, ...payload } : o));\r\n        return { ...payload, id };\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al actualizar orden\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo actualizar la orden ‚ùå\");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const deleteWorkOrder = async (id) => {\r\n  setLoading(true);\r\n  setError(null);\r\n  try {\r\n    const response = await operacService.deleteWorkOrder(id);\r\n    if (response.success) {\r\n      showOperationSuccess(response.message || \"Orden eliminada ‚úÖ\");\r\n      setOportunities(prev => prev.filter(o => o.id !== id));\r\n      return true;\r\n    } else {\r\n      showHttpError(response.message || \"Error al eliminar la orden\");\r\n      return false;\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    showHttpError(\"No se pudo eliminar la orden ‚ùå\");\r\n    setError(err);\r\n    return false;\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  return { oportunities, loading, error, getOportunities, createWorkOrder, updateWorkOrder, deleteWorkOrder, };\r\n};\r\n\r\nexport default useOperac;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Icon from \"../../../components/AppIcon\";\r\nimport Button from \"../../../components/ui/Button\";\r\nimport Input from \"../../../components/ui/Input\";\r\nimport Select from \"../../../components/ui/Select\";\r\nimport useRequisi from \"../../../hooks/useRequisi\";\r\nimport useOperac from \"../../../hooks/useOperac\";\r\nimport useInventory from \"../../../hooks/useInventory\";\r\n\r\nconst RequisitionModal = ({ isOpen, onClose, requisition, onSave }) => {\r\n  const { createRequisition, updateRequisition } = useRequisi();\r\n  const { oportunities, getOportunities } = useOperac();\r\n  const { articulos, getArticulos } = useInventory();\r\n\r\n  const [formData, setFormData] = useState({\r\n    requestNumber: '',\r\n    orderNumber: '',\r\n    projectName: '',\r\n    requestedBy: '',\r\n    requestDate: '',\r\n    status: 'Pendiente',\r\n    priority: 'Media',\r\n    description: '',\r\n    items: [],\r\n    manualItems: [],\r\n    justification: \"\",\r\n    notes: \"\",\r\n  });\r\n\r\n  const [newItem, setNewItem] = useState({\r\n    idArticulo: \"\",\r\n    codigoArticulo: \"\",\r\n    name: \"\",\r\n    quantity: \"\",\r\n    unit: \"unidades\",\r\n    description: \"\",\r\n    urgency: \"Normal\",\r\n  });\r\n\r\n  const [newManualItem, setNewManualItem] = useState({\r\n    name: \"\",\r\n    quantity: \"\",\r\n    unit: \"unidades\",\r\n    description: \"\",\r\n    urgency: \"Normal\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (requisition) {\r\n      setFormData({\r\n        requestNumber: requisition?.requestNumber || \"\",\r\n        orderNumber: requisition?.orderNumber || \"\",\r\n        projectName: requisition?.projectName || \"\",\r\n        requestedBy: requisition?.requestedBy === \"Usuario Actual\" ? \"\" : requisition?.requestedBy || \"\",\r\n        requestDate:\r\n          requisition?.requestDate || new Date().toISOString().split(\"T\")[0],\r\n        status: requisition?.status || \"Pendiente\",\r\n        priority: requisition?.priority || \"Media\",\r\n        description: requisition?.description || \"\",\r\n        items: requisition?.items || [],\r\n        manualItems: requisition?.manualItems || [],\r\n        justification: requisition?.justification || \"\",\r\n        notes: requisition?.notes || \"\",\r\n      });\r\n    } else {\r\n      // Reset form for new requisition\r\n      const currentDate = new Date()?.toISOString()?.split('T')?.[0];\r\n      setFormData({\r\n        requestNumber: `REQ-${Date.now()}`,\r\n        orderNumber: \"\",\r\n        projectName: \"\",\r\n        requestedBy: \"\",\r\n        requestDate: currentDate,\r\n        status: 'Pendiente',\r\n        priority: 'Media',\r\n        description: '',\r\n        items: [],\r\n        manualItems: [],\r\n        justification: \"\",\r\n        notes: \"\",\r\n      });\r\n    }\r\n  }, [requisition, isOpen]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      getOportunities();\r\n      getArticulos();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const priorityOptions = [\r\n    { value: 'Cr√≠tica', label: 'Cr√≠tica' },\r\n    { value: 'Alta', label: 'Alta' },\r\n    { value: 'Media', label: 'Media' },\r\n    { value: 'Baja', label: 'Baja' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'Aprobada', label: 'Aprobada' },\r\n    { value: 'Rechazada', label: 'Rechazada' },\r\n    { value: 'En Proceso', label: 'En Proceso' },\r\n    { value: 'Completada', label: 'Completada' }\r\n  ];\r\n\r\n  const unitOptions = [\r\n    { value: 'unidades', label: 'Unidades' },\r\n    { value: 'metros', label: 'Metros' },\r\n    { value: 'litros', label: 'Litros' },\r\n    { value: 'kilogramos', label: 'Kilogramos' },\r\n    { value: 'cajas', label: 'Cajas' },\r\n    { value: 'paquetes', label: 'Paquetes' },\r\n    { value: 'cilindros', label: 'Cilindros' },\r\n    { value: 'rollos', label: 'Rollos' }\r\n  ];\r\n\r\n  const urgencyOptions = [\r\n    { value: 'Urgente', label: 'Urgente' },\r\n    { value: 'Normal', label: 'Normal' },\r\n    { value: 'Baja', label: 'Baja' }\r\n  ];\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleNewItemChange = (field, value) => {\r\n    setNewItem((prev) => ({\r\n      ...prev,\r\n      [field]: value,\r\n    }));\r\n  };\r\n\r\n  const handleNewManualItemChange = (field, value) => {\r\n    setNewManualItem((prev) => ({\r\n      ...prev,\r\n      [field]: value,\r\n    }));\r\n  };\r\n\r\n  const handleAddItem = () => {\r\n    if (newItem?.name && newItem?.quantity) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        items: [...prev.items, { ...newItem, id: Date.now() }],\r\n      }));\r\n      setNewItem({\r\n        idArticulo: \"\",\r\n        codigoArticulo: \"\",\r\n        name: \"\",\r\n        quantity: \"\",\r\n        unit: \"unidades\",\r\n        description: \"\",\r\n        urgency: \"Normal\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleAddManualItem = () => {\r\n    if (newManualItem?.name && newManualItem?.quantity) {\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        manualItems: [...prev.manualItems, { ...newManualItem, id: Date.now() }],\r\n      }));\r\n      setNewManualItem({\r\n        name: \"\",\r\n        quantity: \"\",\r\n        unit: \"unidades\",\r\n        description: \"\",\r\n        urgency: \"Normal\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRemoveItem = (itemId, type) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [type]: prev[type].filter((item) => item.id !== itemId),\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n  try {\r\n    // Formatear fecha a dd/MM/yyyy\r\n    const fecha = new Date(formData.requestDate);\r\n    const formattedDate = `${fecha.getDate().toString().padStart(2, \"0\")}/${(fecha.getMonth() + 1)\r\n      .toString()\r\n      .padStart(2, \"0\")}/${fecha.getFullYear()}`;\r\n\r\n    // Construir materiales de inventario\r\n    const materiales = formData.items.map((item) => ({\r\n      id: item.idArticulo || undefined, // para que el backend lo identifique como referencia\r\n      codigoArticulo: item.codigoArticulo || \"\",\r\n      nombreMaterial: item.name || \"\",\r\n      cantidad: Number(item.quantity) || 0,\r\n      unidad:\r\n        item.unit?.charAt(0).toUpperCase() + item.unit?.slice(1).toLowerCase() || \"Unidades\",\r\n      urgencia: item.urgency || \"Normal\",\r\n      descripcionEspecificaciones: item.description || \"\",\r\n    }));\r\n\r\n    // Construir materiales manuales\r\n    const materialesManuales = formData.manualItems.map((item) => ({\r\n      nombreMaterial: item.name || \"\",\r\n      cantidad: Number(item.quantity) || 0,\r\n      unidad:\r\n        item.unit?.charAt(0).toUpperCase() + item.unit?.slice(1).toLowerCase() || \"Unidades\",\r\n      urgencia: item.urgency || \"Normal\",\r\n      descripcionEspecificaciones: item.description || \"\",\r\n    }));\r\n\r\n    // Payload final\r\n    const payload = {\r\n      numeroOrdenTrabajo: formData.orderNumber,\r\n      nombreProyecto: formData.projectName,\r\n      solicitadoPor: formData.requestedBy,\r\n      fechaSolicitud: formattedDate,\r\n      prioridad: formData.priority,\r\n      estado: formData.status,\r\n      descripcionSolicitud: formData.description,\r\n      materiales, // <-- inventario\r\n      materialesManuales, // <-- manuales\r\n      justificacionSolicitud: formData.justification || \"\",\r\n      notasAdicionales: formData.notes || \"\",\r\n      proyectoNombre: formData.projectName,\r\n    };\r\n\r\n    // Enviar\r\n    let response;\r\n    if (requisition?.id) {\r\n      response = await updateRequisition(requisition.id, payload);\r\n    } else {\r\n      response = await createRequisition(payload);\r\n    }\r\n\r\n    if (response) {\r\n      onSave(response);\r\n      onClose();\r\n    }\r\n  } catch (error) {\r\n    console.error(\" Error al guardar la requisici√≥n:\", error);\r\n  }\r\n};\r\n\r\n\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card rounded-lg border border-border w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">\r\n              {requisition?.id ? 'Editar Requisici√≥n' : 'Nueva Requisici√≥n de Material'}\r\n            </h2>\r\n            {formData?.requestNumber && (\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                {formData?.requestNumber}\r\n              </p>\r\n            )}\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n          >\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Informaci√≥n b√°sica */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <Select\r\n  label=\"N√∫mero de Orden de Trabajo\"\r\n  options={\r\n    oportunities?.map((op) => ({\r\n      label: op.ordenTrabajo,\r\n      value: op.ordenTrabajo,\r\n    })) || []\r\n  }\r\n  value={formData?.orderNumber}\r\n  onChange={(value) => {\r\n    handleInputChange(\"orderNumber\", value);\r\n\r\n    // Buscar la oportunidad seleccionada\r\n    const selected = oportunities.find((op) => op.ordenTrabajo === value);\r\n    if (selected) {\r\n      // Llenar autom√°ticamente el nombre del proyecto\r\n      handleInputChange(\"projectName\", selected.proyectoNombre || \"\");\r\n    }\r\n  }}\r\n  required\r\n/>\r\n\r\n\r\n            <Input\r\n  label=\"Nombre del Proyecto\"\r\n  placeholder=\"Nombre del proyecto\"\r\n  value={formData?.projectName}\r\n  readOnly\r\n  className=\"bg-gray-100 cursor-not-allowed\"\r\n  required\r\n/>\r\n\r\n            <Input\r\n  label=\"Solicitado por\"\r\n  placeholder=\"Usuario Actual\"\r\n  value={formData?.requestedBy}\r\n  onChange={(e) => handleInputChange(\"requestedBy\", e?.target?.value)}\r\n  required\r\n/>\r\n\r\n            <Input\r\n              label=\"Fecha de Solicitud\"\r\n              type=\"date\"\r\n              value={formData?.requestDate}\r\n              onChange={(e) => handleInputChange(\"requestDate\", e?.target?.value)}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={formData?.priority}\r\n              onChange={(value) => handleInputChange(\"priority\", value)}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Estado\"\r\n              options={statusOptions}\r\n              value={formData?.status}\r\n              onChange={(value) => handleInputChange(\"status\", value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Descripci√≥n */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Descripci√≥n de la Solicitud\r\n            </label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground\"\r\n              rows={3}\r\n              placeholder=\"Describe el prop√≥sito de esta requisici√≥n...\"\r\n              value={formData?.description}\r\n              onChange={(e) => handleInputChange(\"description\", e?.target?.value)}\r\n            />\r\n          </div>\r\n\r\n          {/* Material por Inventario */}\r\n          <div className=\"bg-muted/30 rounded-lg p-4\">\r\n            <h4 className=\"text-sm font-medium text-foreground mb-3\">\r\n              Agregar Material por Inventario\r\n            </h4>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-3\">\r\n              <Select\r\n                label=\"Materiales\"\r\n                options={\r\n                  articulos?.map((art) => ({\r\n                    label: art.nombre,\r\n                    value: art.id,\r\n                  })) || []\r\n                }\r\n                value={newItem?.idArticulo}\r\n                onChange={(value) => {\r\n                  const selected = articulos.find((a) => a.id === value);\r\n                  handleNewItemChange(\"idArticulo\", value);\r\n                  handleNewItemChange(\"codigoArticulo\", selected?.codigoArticulo || \"\");\r\n                  handleNewItemChange(\"name\", selected?.nombre || \"\");\r\n                  handleNewItemChange(\"unit\", selected?.unidad || \"unidades\");\r\n                }}\r\n              />\r\n\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <Input\r\n  label=\"Cantidad\"\r\n  type=\"number\"\r\n  placeholder=\"1\"\r\n  value={newItem?.quantity}\r\n  onChange={(e) => {\r\n    const value = Number(e?.target?.value);\r\n    if (value > 0) handleNewItemChange(\"quantity\", value);\r\n  }}\r\n/>\r\n                <Select\r\n                  label=\"Unidad\"\r\n                  options={unitOptions}\r\n                  value={newItem?.unit}\r\n                  onChange={(value) => handleNewItemChange('unit', value)}\r\n                />\r\n              </div>\r\n\r\n              <Select\r\n                label=\"Urgencia\"\r\n                options={urgencyOptions}\r\n                value={newItem?.urgency}\r\n                onChange={(value) => handleNewItemChange('urgency', value)}\r\n              />\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Descripci√≥n/Especificaciones\"\r\n              placeholder=\"Especificaciones t√©cnicas...\"\r\n              value={newItem?.description}\r\n              onChange={(e) =>\r\n                handleNewItemChange(\"description\", e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={handleAddItem}\r\n              iconName=\"Plus\"\r\n              iconSize={16}\r\n              disabled={!newItem?.name || !newItem?.quantity}\r\n              className=\"mt-3\"\r\n            >\r\n              Agregar Material\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Material Manual */}\r\n          <div className=\"bg-muted/30 rounded-lg p-4 mt-6\">\r\n            <h4 className=\"text-sm font-medium text-foreground mb-3\">\r\n              Agregar Material Manualmente\r\n            </h4>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-3\">\r\n              <Input\r\n                label=\"Nombre del Material\"\r\n                placeholder=\"Ej. Tornillos, Pintura, etc.\"\r\n                value={newManualItem?.name}\r\n                onChange={(e) =>\r\n                  handleNewManualItemChange(\"name\", e?.target?.value)\r\n                }\r\n              />\r\n\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <Input\r\n  label=\"Cantidad\"\r\n  type=\"number\"\r\n  placeholder=\"1\"\r\n  value={newManualItem?.quantity}\r\n  onChange={(e) => {\r\n    const value = Number(e?.target?.value);\r\n    if (value > 0) handleNewManualItemChange(\"quantity\", value);\r\n  }}\r\n/>\r\n                <Select\r\n                  label=\"Unidad\"\r\n                  options={unitOptions}\r\n                  value={newManualItem?.unit}\r\n                  onChange={(value) =>\r\n                    handleNewManualItemChange(\"unit\", value)\r\n                  }\r\n                />\r\n              </div>\r\n\r\n              <Select\r\n                label=\"Urgencia\"\r\n                options={urgencyOptions}\r\n                value={newManualItem?.urgency}\r\n                onChange={(value) =>\r\n                  handleNewManualItemChange(\"urgency\", value)\r\n                }\r\n              />\r\n            </div>\r\n\r\n            <Input\r\n              label=\"Descripci√≥n/Especificaciones\"\r\n              placeholder=\"Detalles o especificaciones...\"\r\n              value={newManualItem?.description}\r\n              onChange={(e) =>\r\n                handleNewManualItemChange(\"description\", e?.target?.value)\r\n              }\r\n            />\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={handleAddManualItem}\r\n              iconName=\"Plus\"\r\n              iconSize={16}\r\n              disabled={!newManualItem?.name || !newManualItem?.quantity}\r\n              className=\"mt-3\"\r\n            >\r\n              Agregar Material\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Lista de materiales */}\r\n          {(formData.items.length > 0 || formData.manualItems.length > 0) && (\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-foreground mb-3\">Materiales Solicitados</h4>\r\n              <div className=\"space-y-2\">\r\n                {[...formData.items, ...formData.manualItems].map((item) => (\r\n                  <div\r\n                    key={item.id}\r\n                    className=\"border border-border rounded-lg p-3\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-2 mb-1\">\r\n                          <h5 className=\"text-sm font-medium text-foreground\">\r\n                            {item?.nombreMaterial || item?.name}\r\n                          </h5>\r\n                          <span\r\n                            className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                              item?.urgency === \"Urgente\"\r\n                                ? \"bg-red-100 text-red-800\"\r\n                                : item?.urgency === \"Normal\"\r\n                                ? \"bg-blue-100 text-blue-800\"\r\n                                : \"bg-gray-100 text-gray-800\"\r\n                            }`}\r\n                          >\r\n                            {item?.urgency}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                          Cantidad: {item?.quantity} {item?.unit}\r\n                        </p>\r\n                        {item?.description && (\r\n                          <p className=\"text-xs text-muted-foreground mt-1\">{item?.description}</p>\r\n                        )}\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() =>\r\n                          handleRemoveItem(\r\n                            item.id,\r\n                            formData.items.some((i) => i.id === item.id)\r\n                              ? \"items\"\r\n                              : \"manualItems\"\r\n                          )\r\n                        }\r\n                        iconName=\"Trash2\"\r\n                        iconSize={14}\r\n                      >\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Justification */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Justificaci√≥n de la Solicitud\r\n            </label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground\"\r\n              rows={3}\r\n              placeholder=\"Justifica por qu√© son necesarios estos materiales...\"\r\n              value={formData?.justification}\r\n              onChange={(e) => handleInputChange('justification', e?.target?.value)}\r\n            />\r\n          </div>\r\n\r\n          {/* Notes */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Notas Adicionales\r\n            </label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground\"\r\n              rows={2}\r\n              placeholder=\"Notas adicionales...\"\r\n              value={formData?.notes}\r\n              onChange={(e) => handleInputChange('notes', e?.target?.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-border\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onClose}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n  type=\"button\"\r\n  onClick={handleSave}\r\n  className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n  disabled={!formData?.projectName}\r\n>\r\n  {requisition?.id ? \"Guardar Cambios\" : \"Crear Requisici√≥n\"}\r\n</Button>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RequisitionModal;","// hooks/useOrder.js\r\nimport { useState, useCallback } from 'react';\r\nimport ordenCompraService from '../services/ordenCompraService';\r\n\r\nconst useOrder = () => {\r\n  const [ordenes, setOrdenes] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Obtener todas las √≥rdenes de compra\r\n  const getOrdenes = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.getOrdenes();\r\n      console.log('Respuesta de getOrdenes:', response);\r\n      \r\n      if (response.success) {\r\n        // Verificar si data es un array directamente\r\n        if (Array.isArray(response.data)) {\r\n          console.log('Data es un array:', response.data);\r\n          setOrdenes(response.data);\r\n        } \r\n        // Verificar si data tiene una propiedad que contenga el array\r\n        else if (response.data && typeof response.data === 'object') {\r\n          console.log('Data es un objeto:', response.data);\r\n          // Buscar posibles propiedades que contengan el array\r\n          const possibleArrayKeys = ['datos', 'ordenes', 'items', 'data', 'results', 'list'];\r\n          let foundArray = null;\r\n          \r\n          for (const key of possibleArrayKeys) {\r\n            if (response.data[key] && Array.isArray(response.data[key])) {\r\n              console.log(`Encontrado array en propiedad ${key}:`, response.data[key]);\r\n              foundArray = response.data[key];\r\n              break;\r\n            }\r\n          }\r\n          \r\n          if (foundArray) {\r\n            setOrdenes(foundArray);\r\n          } else {\r\n            console.log('No se encontr√≥ ning√∫n array en las propiedades conocidas');\r\n            setOrdenes([]);\r\n          }\r\n        } else {\r\n          console.log('response.data no es v√°lido:', response.data);\r\n          setOrdenes([]);\r\n        }\r\n      } else {\r\n        console.log('Backend response.success es false');\r\n        setOrdenes([]);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.getOrdenes:\", err);\r\n      setError(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // Obtener una orden por ID\r\n  const getOrdenById = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.getOrdenById(id);\r\n      if (response.success) {\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.getOrdenById:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Obtener una orden por n√∫mero\r\n  const getOrdenByNumero = async (numeroOrden) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.getOrdenByNumero(numeroOrden);\r\n      if (response.success) {\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.getOrdenByNumero:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Crear una nueva orden\r\n  const createOrden = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.createOrden(payload);\r\n      if (response.success) {\r\n        // Agregar la nueva orden al estado local\r\n        setOrdenes((prev) => [...prev, response.data]);\r\n        \r\n        // Tambi√©n recargar todas las √≥rdenes para asegurar sincronizaci√≥n\r\n        setTimeout(async () => {\r\n          try {\r\n            await getOrdenes();\r\n          } catch (error) {\r\n            console.error('Error recargando √≥rdenes despu√©s de crear:', error);\r\n          }\r\n        }, 100);\r\n        \r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.createOrden:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Actualizar una orden existente\r\n  const updateOrden = async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.updateOrden(id, payload);\r\n      if (response.success) {\r\n        setOrdenes((prev) =>\r\n          prev.map((o) => (o.id === id ? { ...o, ...response.data } : o))\r\n        );\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.updateOrden:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Eliminar una orden (soft delete)\r\n  const deleteOrden = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.deleteOrden(id);\r\n      if (response.success) {\r\n        setOrdenes((prev) => prev.filter((o) => o.id !== id));\r\n        return true;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.deleteOrden:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Eliminar una orden permanentemente\r\n  const hardDeleteOrden = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.hardDeleteOrden(id);\r\n      if (response.success) {\r\n        setOrdenes((prev) => prev.filter((o) => o.id !== id));\r\n        return true;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.hardDeleteOrden:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Obtener √≥rdenes eliminadas\r\n  const getOrdenesEliminadas = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.getOrdenesEliminadas();\r\n      if (response.success) {\r\n        return response.data;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.getOrdenesEliminadas:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Restaurar una orden eliminada\r\n  const restaurarOrden = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await ordenCompraService.restaurarOrden(id);\r\n      if (response.success) {\r\n        // Recargar las √≥rdenes despu√©s de restaurar\r\n        await getOrdenes();\r\n        return true;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error en useOrder.restaurarOrden:\", err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    ordenes,\r\n    loading,\r\n    error,\r\n    getOrdenes,\r\n    getOrdenById,\r\n    getOrdenByNumero,\r\n    createOrden,\r\n    updateOrden,\r\n    deleteOrden,\r\n    hardDeleteOrden,\r\n    getOrdenesEliminadas,\r\n    restaurarOrden,\r\n  };\r\n};\r\n\r\nexport default useOrder;\r\n","import React, { useState, useEffect } from 'react';\r\nimport OrderDetailsModal from './components/OrderDetailsModal';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ordenCompraService from '../../services/ordenCompraService';\r\nimport InventoryTable from './components/InventoryTable';\r\nimport InventoryFilters from './components/InventoryFilters';\r\nimport StockAlerts from './components/StockAlerts';\r\nimport PurchaseOrderPanel from './components/PurchaseOrderPanel';\r\nimport MaterialRequirements from './components/MaterialRequirements';\r\nimport InventoryStats from './components/InventoryStats';\r\nimport NewItemModal from './components/NewItemModal';\r\nimport ItemDetailsModal from './components/ItemDetailsModal';\r\nimport EditItemModal from './components/EditItemModal';\r\nimport CreatePOModal from './components/CreatePOModal';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport RequisitionModal from '../work-order-processing/components/RequisitionModal';\r\nimport useInventory from '../../hooks/useInventory';\r\nimport useOrder from '../../hooks/useOrder';\r\nimport useRequisi from '../../hooks/useRequisi';\r\nimport { useNotifications } from '../../context/NotificationContext';\r\n// Funci√≥n auxiliar para formatear fechas\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '';\r\n  \r\n  // Si ya est√° en formato YYYY-MM-DD, lo devolvemos tal cual\r\n  if (/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)) return dateString;\r\n  \r\n  // Si est√° en formato DD/MM/YYYY, lo convertimos\r\n  const parts = dateString.split('/');\r\n  if (parts.length === 3) {\r\n    const [day, month, year] = parts;\r\n    return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;\r\n  }\r\n  \r\n  // Si es una fecha v√°lida, la convertimos a YYYY-MM-DD\r\n  try {\r\n    const date = new Date(dateString);\r\n    if (isNaN(date.getTime())) return '';\r\n    return date.toISOString().split('T')[0];\r\n  } catch {\r\n    return '';\r\n  }\r\n};\r\n\r\nconst InventoryManagement = () => {\r\n  const { showSuccess, showError, showConfirm } = useNotifications();\r\n  const { articulos, getArticulos, loading: inventoryLoading, error: inventoryError } = useInventory();\r\n  const { \r\n    ordenes, \r\n    loading: orderLoading, \r\n    error: orderError,\r\n    createOrden,\r\n    getOrdenes,\r\n    updateOrden \r\n  } = useOrder();\r\n  const {\r\n    requisitions,\r\n    loading: requisitionsLoading,\r\n    error: requisitionsError,\r\n    getRequisitions,\r\n    updateRequisition,\r\n    deleteRequisition\r\n  } = useRequisi();\r\n  \r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [activeView, setActiveView] = useState('overview');\r\n  const [showNewItemModal, setShowNewItemModal] = useState(false);\r\n  const [showItemDetailsModal, setShowItemDetailsModal] = useState(false);\r\n  const [showEditItemModal, setShowEditItemModal] = useState(false);\r\n  const [showCreatePOModal, setShowCreatePOModal] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n  const [isInitialLoading, setIsInitialLoading] = useState(true);\r\n  const [showOrderDetailsModal, setShowOrderDetailsModal] = useState(false);\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [isUpdating, setIsUpdating] = useState(false);\r\n  const [showItemSelectorModal, setShowItemSelectorModal] = useState(false); // ‚úÖ Modal de selecci√≥n\r\n  const loading = inventoryLoading || orderLoading || requisitionsLoading || isUpdating;\r\n  const error = inventoryError || orderError;\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    category: '',\r\n    status: '',\r\n    supplier: '',\r\n    location: '',\r\n    minStock: '',\r\n    maxStock: '',\r\n    quickFilter: ''\r\n  });\r\n\r\n  // Transformar los art√≠culos del backend al formato esperado por los componentes\r\n  const inventoryItems = React.useMemo(() => {\r\n    return articulos.map(articulo => ({\r\n      id: articulo.id,\r\n      itemCode: articulo.codigoArticulo,\r\n      name: articulo.nombre || '',\r\n      description: articulo.descripcion,\r\n      specifications: articulo.especificaciones || 'Sin especificaciones',\r\n      category: articulo.categoria,\r\n      currentStock: articulo.stockActual,\r\n      reservedStock: articulo.stockReservado || 0,\r\n      reorderPoint: articulo.puntoReorden,\r\n      unit: articulo.unidad,\r\n      supplier: {\r\n        name: articulo.proveedor?.nombre || articulo.nombreProveedor || 'Sin proveedor',\r\n        contact: articulo.proveedor?.contacto || articulo.contactoProveedor || 'Sin contacto'\r\n      },\r\n      location: articulo.ubicacion,\r\n      lastUpdated: new Date(articulo.fechaActualizacion || articulo.fechaCreacion),\r\n      unitCost: articulo.costoUnitario,\r\n      notes: articulo.notas\r\n    }));\r\n  }, [articulos]);\r\n\r\n  // Generar alertas din√°micas basadas en los art√≠culos reales\r\n  const stockAlerts = React.useMemo(() => {\r\n    return inventoryItems\r\n      .filter(item => {\r\n        const currentStock = item.currentStock || 0;\r\n        const reorderPoint = item.reorderPoint || 0;\r\n        return currentStock === 0 || currentStock <= reorderPoint;\r\n      })\r\n      .map((item, index) => {\r\n        const currentStock = item.currentStock || 0;\r\n        const reorderPoint = item.reorderPoint || 0;\r\n        const description = item.description || 'Art√≠culo sin descripci√≥n';\r\n        const itemCode = item.itemCode || 'Sin c√≥digo';\r\n        const unit = item.unit || 'pcs';\r\n        const supplierName = item.supplier?.name || 'Sin proveedor';\r\n        \r\n        return {\r\n          id: index + 1,\r\n          type: currentStock === 0 ? 'out-of-stock' : 'low-stock',\r\n          title: currentStock === 0 \r\n            ? `${description} Agotado`\r\n            : `${description} en Stock Bajo`,\r\n          message: currentStock === 0\r\n            ? `El art√≠culo ${itemCode} est√° completamente agotado.`\r\n            : `Solo quedan ${currentStock} ${unit} disponibles, por debajo del punto de reorden de ${reorderPoint} ${unit}.`,\r\n          itemCode: itemCode,\r\n          currentStock: currentStock,\r\n          reorderPoint: reorderPoint,\r\n          unit: unit,\r\n          supplier: supplierName,\r\n          createdAt: new Date()\r\n        };\r\n      });\r\n  }, [inventoryItems]);\r\n\r\n  // Art√≠culos con stock bajo para √≥rdenes de compra\r\n  const lowStockItems = React.useMemo(() => {\r\n    return inventoryItems.filter(item => {\r\n      const currentStock = item.currentStock || 0;\r\n      const reorderPoint = item.reorderPoint || 0;\r\n      return currentStock === 0 || currentStock <= reorderPoint;\r\n    });\r\n  }, [inventoryItems]);\r\n\r\n  // Material requirements - to be implemented with backend\r\n  const materialRequirements = [];\r\n\r\n  // Calcular estad√≠sticas din√°micas basadas en los art√≠culos reales\r\n  const inventoryStats = React.useMemo(() => {\r\n    const totalItems = inventoryItems.length;\r\n    const totalValue = inventoryItems.reduce((sum, item) => {\r\n      const unitCost = item.unitCost || 0;\r\n      const currentStock = item.currentStock || 0;\r\n      return sum + (unitCost * currentStock);\r\n    }, 0);\r\n    const lowStockItems = inventoryItems.filter(item => {\r\n      const currentStock = item.currentStock || 0;\r\n      const reorderPoint = item.reorderPoint || 0;\r\n      return currentStock > 0 && currentStock <= reorderPoint;\r\n    }).length;\r\n    const outOfStockItems = inventoryItems.filter(item => (item.currentStock || 0) === 0).length;\r\n    \r\n    // Agrupar por categor√≠as\r\n    const categoryGroups = inventoryItems.reduce((acc, item) => {\r\n      if (item.category) {\r\n        const category = item.category.toLowerCase().replace(/\\s+/g, '');\r\n        acc[category] = (acc[category] || 0) + 1;\r\n      }\r\n      return acc;\r\n    }, {});\r\n\r\n    return {\r\n      totalItems,\r\n      totalValue,\r\n      lowStockItems,\r\n      outOfStockItems,\r\n      itemsChange: 0, // Podr√≠as implementar l√≥gica para calcular cambios\r\n      valueChange: 0,\r\n      lowStockChange: 0,\r\n      outOfStockChange: 0,\r\n      categories: categoryGroups\r\n    };\r\n  }, [inventoryItems]);\r\n\r\n  // Filter inventory items based on current filters\r\n  const filteredItems = inventoryItems?.filter(item => {\r\n    if (filters?.search && !item?.description?.toLowerCase()?.includes(filters?.search?.toLowerCase()) &&\r\n        !item?.itemCode?.toLowerCase()?.includes(filters?.search?.toLowerCase())) {\r\n      return false;\r\n    }\r\n    if (filters?.category && item?.category !== filters?.category) return false;\r\n    if (filters?.supplier && item?.supplier?.name !== filters?.supplier) return false;\r\n    if (filters?.location && item?.location !== filters?.location) return false;\r\n    if (filters?.minStock && item?.currentStock < parseInt(filters?.minStock)) return false;\r\n    if (filters?.maxStock && item?.currentStock > parseInt(filters?.maxStock)) return false;\r\n    \r\n    if (filters?.status) {\r\n      const stockStatus = item?.currentStock === 0 ? 'out-of-stock' :\r\n                         item?.currentStock <= item?.reorderPoint ? 'low-stock' : 'in-stock';\r\n      if (stockStatus !== filters?.status) return false;\r\n    }\r\n    \r\n    if (filters?.quickFilter) {\r\n      const stockStatus = item?.currentStock === 0 ? 'out-of-stock' :\r\n                         item?.currentStock <= item?.reorderPoint ? 'low-stock' : 'in-stock';\r\n      if (filters?.quickFilter !== stockStatus && filters?.quickFilter !== 'reserved') return false;\r\n    }\r\n    \r\n    return true;\r\n  });\r\n\r\n  const handleFiltersChange = (newFilters) => {\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  const handleClearFilters = () => {\r\n    setFilters({\r\n      search: '',\r\n      category: '',\r\n      status: '',\r\n      supplier: '',\r\n      location: '',\r\n      minStock: '',\r\n      maxStock: '',\r\n      quickFilter: ''\r\n    });\r\n  };\r\n\r\n  const handleViewDetails = (item) => {\r\n    console.log('View item details:', item);\r\n    setSelectedItem(item);\r\n    setShowItemDetailsModal(true);\r\n  };\r\n\r\n  const handleUpdateStock = (item) => {\r\n    console.log('Update stock for:', item);\r\n    \r\n    // Si el item viene de una alerta (tiene la propiedad 'type'), \r\n    // buscar el art√≠culo completo en el inventario por itemCode\r\n    if (item.type && (item.type === 'out-of-stock' || item.type === 'low-stock')) {\r\n      const inventoryItem = inventoryItems.find(invItem => invItem.itemCode === item.itemCode);\r\n      if (inventoryItem) {\r\n        setSelectedItem(inventoryItem);\r\n      } else {\r\n        console.error('No se encontr√≥ el art√≠culo en el inventario:', item.itemCode);\r\n        setSelectedItem(item); // Fallback al item original\r\n      }\r\n    } else {\r\n      // Es un item directo del inventario\r\n      setSelectedItem(item);\r\n    }\r\n    \r\n    setShowEditItemModal(true);\r\n  };\r\n\r\n  const handleCreatePO = (item) => {\r\n    // Si recibimos un objeto de alerta, necesitamos encontrar el art√≠culo real de inventario\r\n    if (item.type && (item.type === 'out-of-stock' || item.type === 'low-stock')) {\r\n      // Buscar el art√≠culo correspondiente por itemCode en el inventario\r\n      const inventoryItem = inventoryItems.find(invItem => invItem.itemCode === item.itemCode);\r\n      if (inventoryItem) {\r\n        setSelectedItem(inventoryItem);\r\n      } else {\r\n        setSelectedItem(item); // Fallback si no se encuentra\r\n      }\r\n    } else {\r\n      // Es un √≠tem directo del inventario\r\n      setSelectedItem(item);\r\n    }\r\n    setShowCreatePOModal(true);\r\n  };\r\n\r\n  // Handlers para cerrar modales\r\n  const handleCloseItemDetailsModal = () => {\r\n    setShowItemDetailsModal(false);\r\n    setSelectedItem(null);\r\n  };\r\n\r\n  const handleCloseEditItemModal = () => {\r\n    setShowEditItemModal(false);\r\n    setSelectedItem(null);\r\n  };\r\n\r\n  const handleClosePOModal = () => {\r\n    setShowCreatePOModal(false);\r\n    setSelectedItem(null);\r\n    // No necesitamos resetear el estado del modal aqu√≠,\r\n    // ya que useEffect en el modal se encarga de eso cuando cambia initialItem\r\n  };\r\n\r\n  const handleSubmitPO = async (orderData) => {\r\n    try {\r\n      // Crear la orden en el backend\r\n      await createOrden({\r\n        ...orderData,\r\n        createdAt: new Date().toISOString(),\r\n        updatedAt: new Date().toISOString(),\r\n        estado: 'pending'  // Cambiado de status a estado para coincidir con el backend\r\n      });\r\n\r\n      // Recargar las √≥rdenes para obtener la lista actualizada\r\n      await getOrdenes();\r\n      \r\n      // Cerrar el modal y cambiar a la vista de √≥rdenes\r\n      setShowCreatePOModal(false);\r\n      setSelectedItem(null);\r\n      setActiveView('orders');\r\n    } catch (error) {\r\n      console.error('Error al crear la orden de compra:', error);\r\n    }\r\n  };\r\n\r\n  // Handler para actualizaci√≥n exitosa\r\n  const handleUpdateSuccess = async () => {\r\n    try {\r\n      await getArticulos(); // Recargar la lista de art√≠culos\r\n    } catch (error) {\r\n      console.error('Error recargando art√≠culos despu√©s de actualizar:', error);\r\n    }\r\n  };\r\n\r\n  const handleApproveRequirement = (requirement) => {\r\n    console.log('Approve requirement:', requirement);\r\n  };\r\n\r\n  const handleRejectRequirement = (requirement) => {\r\n    console.log('Reject requirement:', requirement);\r\n  };\r\n\r\n  const handleDismissAlert = (alertId) => {\r\n    console.log('Dismiss alert:', alertId);\r\n  };\r\n\r\n  // Manejadores para requisiciones\r\n  const [selectedRequisition, setSelectedRequisition] = useState(null);\r\n  const [showRequisitionModal, setShowRequisitionModal] = useState(false);\r\n\r\n  const openRequisitionModal = (req) => {\r\n  setSelectedRequisition(req);\r\n  setIsRequisitionModalOpen(true);\r\n};\r\n\r\n\r\nconst handleViewRequisition = (req) => {\r\n  const reqForView = {\r\n    id: req.id,\r\n    orderNumber: req.numeroOrdenTrabajo,\r\n    projectName: req.nombreProyecto,\r\n    requestedBy: req.solicitadoPor,\r\n    requestDate: req.fechaSolicitud,\r\n    status: req.estado || 'Pendiente',\r\n    priority: req.prioridad || 'Normal',\r\n    description: req.descripcionSolicitud,\r\n    items: req.materiales?.map(m => ({\r\n      id: m.id || Date.now(),\r\n      name: m.nombreMaterial,\r\n      quantity: m.cantidad,\r\n      unit: m.unidad,\r\n      description: m.descripcionEspecificaciones,\r\n      urgency: m.urgencia,\r\n    })) || [],\r\n    manualItems: req.materialesManuales?.map(m => ({\r\n      id: m.id || Date.now(),\r\n      name: m.nombreMaterial,\r\n      quantity: m.cantidad,\r\n      unit: m.unidad,\r\n      description: m.descripcionEspecificaciones,\r\n      urgency: m.urgencia,\r\n    })) || [],\r\n    justification: req.justificacionSolicitud,\r\n    notes: req.notasAdicionales\r\n  };\r\n\r\n  setSelectedRequisition(reqForView);\r\n  setViewOnly(true);   // üëà MUY IMPORTANTE\r\n  setShowRequisitionModal(true);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n  const handleEditRequisition = (req) => {\r\n    const reqForEdit = {\r\n      id: req.id,\r\n      orderNumber: req.numeroOrdenTrabajo,\r\n      projectName: req.nombreProyecto,\r\n      requestedBy: req.solicitadoPor,\r\n      requestDate: req.fechaSolicitud,\r\n      status: req.estado || 'Pendiente',\r\n      priority: req.prioridad || 'Normal',\r\n      description: req.descripcionSolicitud,\r\n      items: req.materiales?.map(m => ({\r\n        id: m.id || Date.now(),\r\n        name: m.nombreMaterial,\r\n        quantity: m.cantidad,\r\n        unit: m.unidad,\r\n        description: m.descripcionEspecificaciones\r\n      })) || [],\r\n      justification: req.justificacionSolicitud,\r\n      notes: req.notasAdicionales\r\n    };\r\n\r\n    setSelectedRequisition(reqForEdit);\r\n    setShowRequisitionModal(true);\r\n    setViewOnly(false); \r\n  };\r\n\r\n  \r\n\r\n  const handleSaveRequisition = async (editedReq) => {\r\n    try {\r\n      setIsUpdating(true);\r\n      // Convertir de nuevo al formato espa√±ol para el backend\r\n      const reqToUpdate = {\r\n        id: editedReq.id,\r\n        numeroOrdenTrabajo: editedReq.orderNumber,\r\n        nombreProyecto: editedReq.projectName,\r\n        solicitadoPor: editedReq.requestedBy,\r\n        fechaSolicitud: formatDate(editedReq.requestDate),\r\n        estado: editedReq.status,\r\n        prioridad: editedReq.priority,\r\n        descripcionSolicitud: editedReq.description,\r\n        materiales: editedReq.items?.map(item => ({\r\n          id: item.id,\r\n          nombreMaterial: item.name,\r\n          cantidad: item.quantity,\r\n          unidad: item.unit,\r\n          descripcionEspecificaciones: item.description\r\n        })),\r\n        justificacionSolicitud: editedReq.justification,\r\n        notasAdicionales: editedReq.notes\r\n      };\r\n\r\n      const success = await updateRequisition(reqToUpdate.id, reqToUpdate);\r\n      if (success) {\r\n        showSuccess('Requisici√≥n actualizada correctamente');\r\n        await getRequisitions();\r\n        setShowRequisitionModal(false);\r\n        setSelectedRequisition(null);\r\n      } else {\r\n        showError('No se pudo actualizar la requisici√≥n');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al actualizar requisici√≥n:', error);\r\n      showError('Error al actualizar la requisici√≥n');\r\n    } finally {\r\n      setIsUpdating(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (req) => {\r\n    showConfirm(\r\n      `¬øEst√° seguro que desea eliminar la requisici√≥n ${req.numeroOrdenTrabajo || 'seleccionada'}?`,\r\n      {\r\n        onConfirm: async () => {\r\n          try {\r\n            setIsUpdating(true);\r\n            const success = await deleteRequisition(req.id);\r\n            if (success) {\r\n              showSuccess('Requisici√≥n eliminada correctamente');\r\n              await getRequisitions();\r\n            } else {\r\n              showError('No se pudo eliminar la requisici√≥n');\r\n            }\r\n          } catch (error) {\r\n            console.error('Error al eliminar requisici√≥n:', error);\r\n            showError('Error al eliminar la requisici√≥n');\r\n          } finally {\r\n            setIsUpdating(false);\r\n          }\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const handleViewOrder = (order) => {\r\n    setSelectedOrder(order);\r\n    setShowOrderDetailsModal(true);\r\n  };\r\n\r\n  const handleCloseOrderDetails = () => {\r\n    setShowOrderDetailsModal(false);\r\n    setSelectedOrder(null);\r\n  };\r\n\r\n  const handleDownloadOrder = async (order) => {\r\n    try {\r\n      // Crear el contenido del PDF-like\r\n      const content = `\r\nORDEN DE COMPRA ${order.numeroOrden}\r\n=============================\r\nFecha: ${new Date(order.fechaCreacion).toLocaleDateString()}\r\nProveedor: ${order.proveedor.nombre}\r\nEstado: ${order.estado}\r\n${order.esUrgente ? 'URGENTE\\n' : ''}\r\n\r\nART√çCULOS:\r\n${order.articulos.map(item => `\r\n${item.codigoArticulo} - ${item.descripcion}\r\nCantidad: ${item.cantidadOrdenada} ${item.unidad}\r\nPrecio unitario: ${item.costoUnitario.toLocaleString('es-MX', { style: 'currency', currency: 'MXN' })}\r\nSubtotal: ${item.subtotal.toLocaleString('es-MX', { style: 'currency', currency: 'MXN' })}\r\n`).join('\\n')}\r\n\r\nTOTAL: ${order.totalOrden.toLocaleString('es-MX', { style: 'currency', currency: 'MXN' })}\r\n\r\nNotas:\r\n${order.notas || 'Sin notas adicionales'}\r\n`;\r\n\r\n      // Crear y descargar el archivo\r\n      const blob = new Blob([content], { type: 'text/plain' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `orden-compra-${order.numeroOrden}.txt`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n    } catch (error) {\r\n      console.error('Error al descargar la orden:', error);\r\n    }\r\n  };\r\n\r\n  const handleDeleteOrder = async (order) => {\r\n    try {\r\n      await ordenCompraService.deleteOrden(order.id);\r\n      await getOrdenes(); // Recargar la lista\r\n    } catch (error) {\r\n      console.error('Error al eliminar la orden:', error);\r\n    }\r\n  };\r\n\r\n  const handleApproveOrder = async (order) => {\r\n    try {\r\n      await updateOrden(order.id, {\r\n        ...order,\r\n        status: 'approved',\r\n        updatedAt: new Date().toISOString()\r\n      });\r\n      await getOrdenes(); // Recargar la lista de √≥rdenes\r\n    } catch (error) {\r\n      console.error('Error al aprobar la orden:', error);\r\n    }\r\n  };\r\n\r\n  const handleCreateOrder = () => {\r\n    setSelectedItem(null);\r\n    setShowCreatePOModal(true);\r\n  };\r\n\r\n  const handleExport = async () => {\r\n    try {\r\n      // Funci√≥n auxiliar para escapar valores CSV correctamente\r\n      const escapeCSV = (value) => {\r\n        if (value === null || value === undefined) return '\"\"';\r\n        const stringValue = String(value);\r\n        // Escapar comillas dobles duplic√°ndolas\r\n        const escapedValue = stringValue.replace(/\"/g, '\"\"');\r\n        // SIEMPRE encerrar en comillas para evitar problemas con comas y caracteres especiales\r\n        return `\"${escapedValue}\"`;\r\n      };\r\n\r\n      // Create CSV content\r\n      const csvHeaders = [\r\n        'C√≥digo',\r\n        'Nombre',\r\n        'Descripci√≥n',\r\n        'Categor√≠a',\r\n        'Stock Actual',\r\n        'Stock Reservado',\r\n        'Punto de Reorden',\r\n        'Unidad',\r\n        'Ubicaci√≥n',\r\n        'Proveedor',\r\n        'Contacto Proveedor',\r\n        'Costo Unitario',\r\n        'Valor Total',\r\n        '√öltima Actualizaci√≥n'\r\n      ];\r\n      \r\n      const csvRows = inventoryItems?.map(item => [\r\n        escapeCSV(item?.itemCode),\r\n        escapeCSV(item?.name),\r\n        escapeCSV(item?.description),\r\n        escapeCSV(item?.category),\r\n        escapeCSV(item?.currentStock),\r\n        escapeCSV(item?.reservedStock || 0),\r\n        escapeCSV(item?.reorderPoint),\r\n        escapeCSV(item?.unit),\r\n        escapeCSV(item?.location),\r\n        escapeCSV(item?.supplier?.name),\r\n        escapeCSV(item?.supplier?.contact),\r\n        escapeCSV(item?.unitCost),\r\n        escapeCSV(item?.currentStock * item?.unitCost),\r\n        escapeCSV(new Date(item?.lastUpdated).toLocaleDateString('es-MX'))\r\n      ]);\r\n\r\n      const csvContent = [\r\n        csvHeaders.map(h => escapeCSV(h)).join(','),\r\n        ...csvRows.map(row => row.join(','))\r\n      ].join('\\n');\r\n\r\n      // Agregar BOM (Byte Order Mark) UTF-8 para que Excel reconozca la codificaci√≥n\r\n      const BOM = '\\uFEFF';\r\n      const csvWithBOM = BOM + csvContent;\r\n\r\n      // Download CSV file con codificaci√≥n UTF-8\r\n      const blob = new Blob([csvWithBOM], { type: 'text/csv;charset=utf-8;' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `inventario-${new Date()?.toISOString()?.split('T')?.[0]}.csv`;\r\n      document.body?.appendChild(link);\r\n      link?.click();\r\n      document.body?.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n\r\n      console.log('Inventario exportado exitosamente');\r\n    } catch (error) {\r\n      console.error('Error al exportar inventario:', error);\r\n    }\r\n  };\r\n\r\n  const handleImportInventory = () => {\r\n    // Create file input\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = '.csv,.xlsx,.xls';\r\n    \r\n    input.onchange = (e) => {\r\n      const file = e?.target?.files?.[0];\r\n      if (file) {\r\n        console.log('Importando archivo:', file?.name);\r\n        // In a real app, you would parse the file and add items\r\n        // For now, simulate adding some sample items\r\n        const sampleItems = [\r\n          {\r\n            id: Date.now() + 1,\r\n            itemCode: 'IMP-001',\r\n            description: 'Art√≠culo Importado 1',\r\n            specifications: 'Importado desde archivo CSV',\r\n            category: 'Importados',\r\n            currentStock: 10,\r\n            reservedStock: 0,\r\n            reorderPoint: 5,\r\n            unit: 'pcs',\r\n            supplier: { name: 'Proveedor Importado', contact: 'import@proveedor.com' },\r\n            location: 'Almac√©n Principal',\r\n            lastUpdated: new Date(),\r\n            unitCost: 1000\r\n          }\r\n        ];\r\n        setInventoryItems(prev => [...prev, ...sampleItems]);\r\n        console.log('Archivo importado exitosamente');\r\n      }\r\n    };\r\n    \r\n    input?.click();\r\n  };\r\n\r\n  const handleAddNewItem = async (newItem) => {\r\n    try {\r\n      // El art√≠culo ya fue creado en el backend por el NewItemModal\r\n      // Solo necesitamos refrescar la lista de art√≠culos\r\n      await getArticulos();\r\n      \r\n      // If we're not on the inventory view, switch to it to show the new item\r\n      if (activeView !== 'inventory') {\r\n        setActiveView('inventory');\r\n      }\r\n      \r\n      return Promise.resolve();\r\n    } catch (error) {\r\n      console.error('Error refreshing inventory after adding new item:', error);\r\n      return Promise.reject(error);\r\n    }\r\n  };\r\n\r\n  const handleOpenNewItemModal = () => {\r\n    setShowNewItemModal(true);\r\n  };\r\n\r\n  const handleCloseNewItemModal = () => {\r\n    setShowNewItemModal(false);\r\n  };\r\n\r\n\r\n  const viewTabs = [\r\n    { id: 'overview', label: 'Resumen', icon: 'LayoutDashboard' },\r\n    { id: 'inventory', label: 'Inventario', icon: 'Package' },\r\n    { id: 'alerts', label: 'Alertas', icon: 'AlertTriangle' },\r\n    { id: 'orders', label: '√ìrdenes', icon: 'ShoppingCart' },\r\n    { id: 'requirements', label: 'Requisiciones', icon: 'ClipboardList' }\r\n  ];\r\n\r\n  // Cargar datos al montar el componente\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const fetchData = async () => {\r\n      if (!isInitialLoading) return;\r\n\r\n      try {\r\n        // Cargar √≥rdenes primero ya que parece funcionar correctamente\r\n        await getOrdenes();\r\n\r\n        if (isMounted) {\r\n          // Luego intentar cargar art√≠culos y requisiciones en paralelo\r\n          await Promise.allSettled([\r\n            getArticulos().catch(err => {\r\n              console.warn('Error al cargar art√≠culos:', err);\r\n              return [];\r\n            }),\r\n            getRequisitions().catch(err => {\r\n              console.warn('Error al cargar requisiciones:', err);\r\n              return [];\r\n            })\r\n          ]);\r\n        }\r\n      } catch (error) {\r\n        console.warn('Error en la carga inicial:', error);\r\n      } finally {\r\n        if (isMounted) {\r\n          setIsInitialLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  // Recargar datos solo cuando se cambia a la pesta√±a de requisiciones\r\n  useEffect(() => {\r\n    if (activeView === 'requirements' && !loading) {\r\n      getRequisitions();\r\n    }\r\n  }, [activeView]);\r\n\r\n  useEffect(() => {\r\n    document.title = 'Gesti√≥n de Inventario - AireFlow Pro';\r\n  }, []);\r\n\r\n  \r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Header \r\n        onMenuToggle={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n        isMenuOpen={mobileMenuOpen}\r\n      />\r\n      <Sidebar \r\n        isCollapsed={sidebarCollapsed}\r\n        onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n      />\r\n      <main className={`transition-all duration-300 ${\r\n        sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n      }`}>\r\n        <div className=\"p-6\">\r\n          <Breadcrumb />\r\n          \r\n          {/* Page Header */}\r\n          <div className=\"flex flex-col sm:flex-row sm:items-center justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0\">\r\n            <div className=\"min-w-0 flex-1\">\r\n              <h1 className=\"text-2xl sm:text-3xl font-bold text-foreground mb-2\">\r\n                Gesti√≥n de Inventario\r\n              </h1>\r\n              <p className=\"text-sm sm:text-base text-muted-foreground\">\r\n                Control integral de partes, materiales y recursos para proyectos de Aire Acondicionado\r\n              </p>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center space-x-2 sm:space-x-3 flex-shrink-0\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={handleImportInventory}\r\n                iconName=\"Upload\"\r\n                iconSize={16}\r\n                className=\"text-sm\"\r\n              >\r\n                <span className=\"hidden sm:inline\">Importar</span>\r\n                <span className=\"sm:hidden\">Import</span>\r\n              </Button>\r\n              <Button\r\n                variant=\"default\"\r\n                onClick={handleOpenNewItemModal}\r\n                iconName=\"Plus\"\r\n                iconSize={16}\r\n                className=\"text-sm\"\r\n              >\r\n                <span className=\"hidden sm:inline\">Nuevo Art√≠culo</span>\r\n                <span className=\"sm:hidden\">Nuevo</span>\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* View Tabs */}\r\n          <div className=\"flex flex-wrap space-x-1 mb-4 sm:mb-6 bg-muted p-1 rounded-lg w-fit max-w-full overflow-x-auto\">\r\n            {viewTabs?.map((tab) => (\r\n              <button\r\n                key={tab?.id}\r\n                onClick={() => setActiveView(tab?.id)}\r\n                className={`flex items-center space-x-1 sm:space-x-2 px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-smooth whitespace-nowrap ${\r\n                  activeView === tab?.id\r\n                    ? 'bg-background text-foreground shadow-sm'\r\n                    : 'text-muted-foreground hover:text-foreground'\r\n                }`}\r\n              >\r\n                <Icon name={tab?.icon} size={14} className=\"sm:w-4 sm:h-4\" />\r\n                <span className=\"hidden xs:inline sm:inline\">{tab?.label}</span>\r\n                {tab?.id === 'alerts' && stockAlerts?.length > 0 && (\r\n                  <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-warning text-warning-foreground\">\r\n                    {stockAlerts?.length}\r\n                  </span>\r\n                )}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Content based on active view */}\r\n          {activeView === 'overview' && (\r\n            <InventoryStats \r\n              stats={inventoryStats}\r\n              items={filteredItems}\r\n              onAddItem={() => setShowNewItemModal(true)}\r\n              onUpdateStock={() => {\r\n                // ‚úÖ Abrir modal de selecci√≥n de art√≠culo\r\n                setShowItemSelectorModal(true);\r\n              }}\r\n              onGenerateReport={() => {\r\n                // Funci√≥n auxiliar para escapar valores CSV correctamente\r\n                const escapeCSV = (value) => {\r\n                  if (value === null || value === undefined) return '\"\"';\r\n                  const stringValue = String(value);\r\n                  // Escapar comillas dobles duplic√°ndolas\r\n                  const escapedValue = stringValue.replace(/\"/g, '\"\"');\r\n                  // SIEMPRE encerrar en comillas para evitar problemas con comas y caracteres especiales\r\n                  return `\"${escapedValue}\"`;\r\n                };\r\n\r\n                // Crear el contenido del CSV\r\n                const headers = [\r\n                  'C√≥digo',\r\n                  'Nombre',\r\n                  'Descripci√≥n',\r\n                  'Categor√≠a',\r\n                  'Stock Actual',\r\n                  'Stock Reservado',\r\n                  'Punto de Reorden',\r\n                  'Unidad',\r\n                  'Proveedor',\r\n                  'Ubicaci√≥n',\r\n                  'Costo Unitario',\r\n                  'Valor Total',\r\n                  '√öltima Actualizaci√≥n'\r\n                ];\r\n\r\n                const csvRows = filteredItems.map(item => [\r\n                  escapeCSV(item.itemCode || ''),\r\n                  escapeCSV(item.name || ''),\r\n                  escapeCSV(item.description || ''),\r\n                  escapeCSV(item.category || ''),\r\n                  escapeCSV(item.currentStock || 0),\r\n                  escapeCSV(item.reservedStock || 0),\r\n                  escapeCSV(item.reorderPoint || 0),\r\n                  escapeCSV(item.unit || ''),\r\n                  escapeCSV(item.supplier?.name || ''),\r\n                  escapeCSV(item.location || ''),\r\n                  escapeCSV(item.unitCost || 0),\r\n                  escapeCSV((item.currentStock || 0) * (item.unitCost || 0)),\r\n                  escapeCSV(item.lastUpdated ? new Date(item.lastUpdated).toLocaleString('es-MX') : ''),\r\n                ].join(','));\r\n\r\n                const csvContent = [\r\n                  headers.map(h => escapeCSV(h)).join(','),\r\n                  ...csvRows\r\n                ].join('\\n');\r\n\r\n                // Crear el blob con BOM UTF-8 y descargar\r\n                const BOM = '\\uFEFF';\r\n                const blob = new Blob([BOM + csvContent], { type: 'text/csv;charset=utf-8;' });\r\n                const link = document.createElement('a');\r\n                const url = URL.createObjectURL(blob);\r\n                \r\n                link.setAttribute('href', url);\r\n                link.setAttribute('download', `inventario_${new Date().toISOString().split('T')[0]}.csv`);\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n                URL.revokeObjectURL(url);\r\n              }}\r\n            />\r\n          )}\r\n\r\n          {activeView === 'inventory' && (\r\n            <div className=\"space-y-6\">\r\n              <InventoryFilters\r\n                filters={filters}\r\n                onFiltersChange={handleFiltersChange}\r\n                onClearFilters={handleClearFilters}\r\n                onExport={handleExport}\r\n                totalItems={inventoryItems?.length}\r\n                filteredItems={filteredItems?.length}\r\n                inventoryItems={inventoryItems}\r\n              />\r\n              <InventoryTable\r\n                items={filteredItems}\r\n                onViewDetails={handleViewDetails}\r\n                onUpdateStock={handleUpdateStock}\r\n                onCreatePO={handleCreatePO}\r\n                onAddItem={() => {\r\n                  setShowNewItemModal(true);\r\n                }}\r\n                onGenerateReport={handleExport}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {activeView === 'alerts' && (\r\n            <StockAlerts\r\n              alerts={stockAlerts}\r\n              onCreatePO={handleCreatePO}\r\n              onUpdateStock={handleUpdateStock}\r\n              onDismissAlert={handleDismissAlert}\r\n            />\r\n          )}\r\n\r\n          {activeView === 'orders' && (\r\n            <PurchaseOrderPanel\r\n              orders={ordenes}\r\n              onViewOrder={handleViewOrder}\r\n              onApproveOrder={handleApproveOrder}\r\n              onCreateOrder={handleCreateOrder}\r\n              onDownloadOrder={handleDownloadOrder}\r\n              onDeleteOrder={handleDeleteOrder}\r\n            />\r\n          )}\r\n{activeView === 'requirements' && (\r\n  <div className=\"bg-card rounded-lg border border-border shadow-sm\">\r\n\r\n    {/* Header */}\r\n    <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n      <div className=\"flex items-center space-x-3\">\r\n        <Icon name=\"ClipboardList\" size={20} className=\"text-primary\" />\r\n        <h3 className=\"text-lg font-semibold text-foreground\">\r\n          Requisiciones de Material\r\n        </h3>\r\n      </div>\r\n\r\n      <Button\r\n        variant=\"default\"\r\n        iconName=\"Plus\"\r\n        onClick={() => setShowCreatePOModal(true)}\r\n      >\r\n        Nueva Requisici√≥n\r\n      </Button>\r\n    </div>\r\n\r\n    {/* Contenido */}\r\n    <div className=\"divide-y divide-border max-h-96 overflow-y-auto\">\r\n\r\n      {requisitionsLoading ? (\r\n        <div className=\"text-center py-8 text-muted-foreground\">\r\n          Cargando requisiciones...\r\n        </div>\r\n      ) : requisitions?.length > 0 ? (\r\n        requisitions.map((req) => (\r\n          <div\r\n            key={req.id}\r\n            className=\"p-5 hover:bg-muted/50 transition-colors\"\r\n          >\r\n            <div className=\"flex items-start justify-between\">\r\n\r\n              {/* Info principal */}\r\n              <div className=\"flex-1\">\r\n\r\n                {/* Encabezado */}\r\n                <div className=\"flex items-center space-x-3 mb-2\">\r\n                  <h4 className=\"text-base font-semibold text-foreground\">\r\n                    {req.numeroOrdenTrabajo || 'Sin n√∫mero'}\r\n                  </h4>\r\n\r\n                  <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary\">\r\n                    {req.estado || 'Pendiente'}\r\n                  </span>\r\n                </div>\r\n\r\n                {/* Grid */}\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground mb-3\">\r\n\r\n                  <div>\r\n                    <span className=\"font-medium\">Proyecto:</span>\r\n                    <div className=\"text-foreground\">{req.nombreProyecto || 'Sin proyecto'}</div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <span className=\"font-medium\">Solicitado por:</span>\r\n                    <div className=\"text-foreground\">{req.solicitadoPor || 'No especificado'}</div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <span className=\"font-medium\">Fecha:</span>\r\n                    <div className=\"text-foreground\">\r\n                      {req.fechaSolicitud\r\n                        ? new Date(req.fechaSolicitud).toLocaleDateString('es-MX')\r\n                        : 'No especificada'}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <span className=\"font-medium\">Prioridad:</span>\r\n                    <div className=\"text-foreground\">{req.prioridad || 'Normal'}</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Descripci√≥n */}\r\n                {req.descripcionSolicitud && (\r\n                  <div className=\"text-sm text-muted-foreground mb-3\">\r\n                    <span className=\"font-medium text-foreground\">Descripci√≥n:</span>\r\n                    <p className=\"text-foreground\">{req.descripcionSolicitud}</p>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Materiales */}\r\n                {req.materiales?.length > 0 && (\r\n                  <div className=\"mb-3\">\r\n                    <span className=\"font-medium\">Materiales solicitados:</span>\r\n                    <ul className=\"mt-2 space-y-1 text-sm\">\r\n                      {req.materiales.map((item, index) => (\r\n                        <li key={index} className=\"text-foreground\">\r\n                          {item.cantidad || item.quantity} {item.unidad || item.unit || 'unidades'} - {item.nombreMaterial || item.name}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Acciones */}\r\n                <div className=\"flex items-center space-x-3 mt-3\">\r\n\r\n                  {/* VER DETALLES */}\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    iconName=\"Edit\"\r\n                    onClick={() => handleEditRequisition(req)}\r\n                  >\r\n                    Ver\r\n                  </Button>\r\n\r\n                  {/* EDITAR */}\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    iconName=\"Edit\"\r\n                    onClick={() => handleEditRequisition(req)}\r\n                  >\r\n                    Editar\r\n                  </Button>\r\n\r\n                  {/* ELIMINAR */}\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"text-error hover:text-error\"\r\n                    iconName=\"Trash2\"\r\n                    onClick={() => handleDelete(req)}\r\n                  >\r\n                    Eliminar\r\n                  </Button>\r\n\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <div className=\"text-center py-8 text-muted-foreground\">\r\n          No hay requisiciones disponibles.\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  </div>\r\n)}\r\n\r\n\r\n          {/* New Item Modal */}\r\n          <NewItemModal\r\n            isOpen={showNewItemModal}\r\n            onClose={handleCloseNewItemModal}\r\n            onAddItem={handleAddNewItem}\r\n          />\r\n\r\n          {/* Item Details Modal */}\r\n          <ItemDetailsModal\r\n            isOpen={showItemDetailsModal}\r\n            onClose={handleCloseItemDetailsModal}\r\n            item={selectedItem}\r\n          />\r\n\r\n          {/* Edit Item Modal */}\r\n          <EditItemModal\r\n            isOpen={showEditItemModal}\r\n            onClose={handleCloseEditItemModal}\r\n            item={selectedItem}\r\n            onUpdateSuccess={handleUpdateSuccess}\r\n          />\r\n\r\n          {/* Modal de Requisici√≥n */}\r\n          <RequisitionModal\r\n            isOpen={showRequisitionModal}\r\n            onClose={() => {\r\n              setShowRequisitionModal(false);\r\n              setSelectedRequisition(null);\r\n            }}\r\n            requisition={selectedRequisition}\r\n            onSave={handleSaveRequisition}\r\n          />\r\n\r\n          {/* Create Purchase Order Modal */}\r\n          <CreatePOModal\r\n            isOpen={showCreatePOModal}\r\n            onClose={handleClosePOModal}\r\n            onSubmit={handleSubmitPO}\r\n            initialItem={selectedItem}\r\n            lowStockItems={lowStockItems}\r\n          />\r\n\r\n          {/* Order Details Modal */}\r\n          <OrderDetailsModal\r\n            isOpen={showOrderDetailsModal}\r\n            onClose={handleCloseOrderDetails}\r\n            order={selectedOrder}\r\n          />\r\n\r\n          {/* Item Selector Modal - Para \"Actualizar Stock\" */}\r\n          {showItemSelectorModal && (\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[1000] p-4\">\r\n              <div className=\"bg-card rounded-lg border border-border w-full max-w-2xl max-h-[80vh] overflow-hidden flex flex-col\">\r\n                <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n                  <h2 className=\"text-xl font-semibold text-foreground\">\r\n                    Seleccionar Art√≠culo para Actualizar\r\n                  </h2>\r\n                  <button\r\n                    onClick={() => setShowItemSelectorModal(false)}\r\n                    className=\"text-muted-foreground hover:text-foreground\"\r\n                  >\r\n                    <Icon name=\"X\" size={20} />\r\n                  </button>\r\n                </div>\r\n                \r\n                <div className=\"p-6 overflow-y-auto flex-1\">\r\n                  <div className=\"mb-4\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Buscar art√≠culo...\"\r\n                      className=\"w-full px-4 py-2 border border-border rounded-md\"\r\n                      onChange={(e) => setFilters({ ...filters, search: e.target.value })}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"space-y-2\">\r\n                    {filteredItems?.slice(0, 50).map((item) => (\r\n                      <button\r\n                        key={item.id}\r\n                        onClick={() => {\r\n                          handleUpdateStock(item);\r\n                          setShowItemSelectorModal(false);\r\n                        }}\r\n                        className=\"w-full text-left p-4 border border-border rounded-lg hover:bg-muted transition-colors\"\r\n                      >\r\n                        <div className=\"flex justify-between items-start\">\r\n                          <div>\r\n                            <p className=\"font-medium text-foreground\">{item.description}</p>\r\n                            <p className=\"text-sm text-muted-foreground\">C√≥digo: {item.itemCode}</p>\r\n                          </div>\r\n                          <div className=\"text-right\">\r\n                            <p className=\"text-sm font-medium\">Stock: {item.currentStock} {item.unit}</p>\r\n                            <p className={`text-xs ${\r\n                              item.currentStock === 0 ? 'text-red-500' :\r\n                              item.currentStock <= item.reorderPoint ? 'text-yellow-500' :\r\n                              'text-green-500'\r\n                            }`}>\r\n                              {item.currentStock === 0 ? 'Agotado' :\r\n                               item.currentStock <= item.reorderPoint ? 'Stock bajo' :\r\n                               'Disponible'}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                  \r\n                  {filteredItems?.length === 0 && (\r\n                    <p className=\"text-center text-muted-foreground py-8\">\r\n                      No se encontraron art√≠culos\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryManagement;","import React from 'react';\r\nimport AppImage from '../../../components/AppImage';\r\n\r\nconst CompanyBranding = () => {\r\n  return (\r\n    <div className=\"text-center mb-8\">\r\n      {/* Company Logo */}\r\n      <div className=\"flex justify-center mb-6\">\r\n        <div className=\"w-20 h-20 flex items-center justify-center\">\r\n          <AppImage\r\n            src=\"assets/images/WhatsApp_Image_2025-09-24_at_8.13.50_PM-1759346787603.jpeg\"\r\n            alt=\"CLIMAS H.M. Logo\"\r\n            className=\"w-full h-full object-contain\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Company Name and Tagline */}\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-3xl font-bold text-foreground mb-2\">CLIMAS H.M.</h1>\r\n        <p className=\"text-lg text-muted-foreground mb-1\">Sistema de Gesti√≥n de Aire Acondicionado</p>\r\n        <p className=\"text-sm text-muted-foreground\">Plataforma Empresarial Integral</p>\r\n      </div>\r\n\r\n      {/* Trust Signals */}\r\n      <div className=\"flex flex-col items-center space-y-3\">\r\n        {/* Security Badge */}\r\n        <div className=\"flex items-center space-x-2 px-4 py-2 bg-success/10 border border-success/20 rounded-full\">\r\n          <div className=\"w-4 h-4 bg-success rounded-full flex items-center justify-center\">\r\n            <span className=\"text-success text-xs\">‚úì</span>\r\n          </div>\r\n          <span className=\"text-sm font-medium text-success\">Conexi√≥n Segura SSL</span>\r\n        </div>\r\n\r\n        {/* Compliance Indicators */}\r\n        <div className=\"flex items-center space-x-4 text-xs text-muted-foreground\">\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-success rounded-full flex items-center justify-center\">\r\n              <span className=\"text-white text-xs\">‚úì</span>\r\n            </div>\r\n            <span>Cumplimiento SAT</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-success rounded-full flex items-center justify-center\">\r\n              <span className=\"text-white text-xs\">‚úì</span>\r\n            </div>\r\n            <span>ISO 27001</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-success rounded-full flex items-center justify-center\">\r\n              <span className=\"text-white text-xs\">‚úì</span>\r\n            </div>\r\n            <span>CFDI 4.0</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CompanyBranding;","import React from \"react\";\r\nimport { Check, Minus } from \"lucide-react\";\r\nimport { cn } from \"../../utils/cn\";\r\n\r\nconst Checkbox = React.forwardRef(({\r\n    className,\r\n    id,\r\n    checked,\r\n    indeterminate = false,\r\n    disabled = false,\r\n    required = false,\r\n    label,\r\n    description,\r\n    error,\r\n    size = \"default\",\r\n    ...props\r\n}, ref) => {\r\n    // Generate unique ID if not provided\r\n    const checkboxId = id || `checkbox-${Math.random()?.toString(36)?.substr(2, 9)}`;\r\n\r\n    // Size variants\r\n    const sizeClasses = {\r\n        sm: \"h-4 w-4\",\r\n        default: \"h-4 w-4\",\r\n        lg: \"h-5 w-5\"\r\n    };\r\n\r\n    return (\r\n        <div className={cn(\"flex items-start space-x-2\", className)}>\r\n            <div className=\"relative flex items-center\">\r\n                <input\r\n                    type=\"checkbox\"\r\n                    ref={ref}\r\n                    id={checkboxId}\r\n                    checked={checked}\r\n                    disabled={disabled}\r\n                    required={required}\r\n                    className=\"sr-only\"\r\n                    {...props}\r\n                />\r\n\r\n                <label\r\n                    htmlFor={checkboxId}\r\n                    className={cn(\r\n                        \"peer shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground cursor-pointer transition-colors\",\r\n                        sizeClasses?.[size],\r\n                        checked && \"bg-primary text-primary-foreground border-primary\",\r\n                        indeterminate && \"bg-primary text-primary-foreground border-primary\",\r\n                        error && \"border-destructive\",\r\n                        disabled && \"cursor-not-allowed opacity-50\"\r\n                    )}\r\n                >\r\n                    {checked && !indeterminate && (\r\n                        <Check className=\"h-3 w-3 text-current flex items-center justify-center\" />\r\n                    )}\r\n                    {indeterminate && (\r\n                        <Minus className=\"h-3 w-3 text-current flex items-center justify-center\" />\r\n                    )}\r\n                </label>\r\n            </div>\r\n            {(label || description || error) && (\r\n                <div className=\"flex-1 space-y-1\">\r\n                    {label && (\r\n                        <label\r\n                            htmlFor={checkboxId}\r\n                            className={cn(\r\n                                \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer\",\r\n                                error ? \"text-destructive\" : \"text-foreground\"\r\n                            )}\r\n                        >\r\n                            {label}\r\n                            {required && <span className=\"text-destructive ml-1\">*</span>}\r\n                        </label>\r\n                    )}\r\n\r\n                    {description && !error && (\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                            {description}\r\n                        </p>\r\n                    )}\r\n\r\n                    {error && (\r\n                        <p className=\"text-sm text-destructive\">\r\n                            {error}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nCheckbox.displayName = \"Checkbox\";\r\n\r\n// Checkbox Group component\r\nconst CheckboxGroup = React.forwardRef(({\r\n    className,\r\n    children,\r\n    label,\r\n    description,\r\n    error,\r\n    required = false,\r\n    disabled = false,\r\n    ...props\r\n}, ref) => {\r\n    return (\r\n        <fieldset\r\n            ref={ref}\r\n            disabled={disabled}\r\n            className={cn(\"space-y-3\", className)}\r\n            {...props}\r\n        >\r\n            {label && (\r\n                <legend className={cn(\r\n                    \"text-sm font-medium\",\r\n                    error ? \"text-destructive\" : \"text-foreground\"\r\n                )}>\r\n                    {label}\r\n                    {required && <span className=\"text-destructive ml-1\">*</span>}\r\n                </legend>\r\n            )}\r\n\r\n            {description && !error && (\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                    {description}\r\n                </p>\r\n            )}\r\n\r\n            <div className=\"space-y-2\">\r\n                {children}\r\n            </div>\r\n\r\n            {error && (\r\n                <p className=\"text-sm text-destructive\">\r\n                    {error}\r\n                </p>\r\n            )}\r\n        </fieldset>\r\n    );\r\n});\r\n\r\nCheckboxGroup.displayName = \"CheckboxGroup\";\r\n\r\nexport { Checkbox, CheckboxGroup };","import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getDefaultPath } from '../../../utils/auth';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\nconst LoginForm = () => {\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n    rememberMe: false\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // El backend maneja credenciales y roles\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData?.email) {\r\n      newErrors.email = 'El correo electr√≥nico es requerido';\r\n    } else if (!/\\S+@\\S+\\.\\S+/?.test(formData?.email)) {\r\n      newErrors.email = 'Formato de correo electr√≥nico inv√°lido';\r\n    }\r\n\r\n    if (!formData?.password) {\r\n      newErrors.password = 'La contrase√±a es requerida';\r\n    } else if (formData?.password?.length < 6) {\r\n      newErrors.password = 'La contrase√±a debe tener al menos 6 caracteres';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value, type, checked } = e?.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value\r\n    }));\r\n\r\n    // Clear error when user starts typing\r\n    if (errors?.[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    \r\n    if (!validateForm()) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch('/api/usuarios/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          email: formData.email,\r\n          password: formData.password\r\n        })\r\n      });\r\n      const data = await response.json();\r\n      console.log('Login response status:', response.status);\r\n      console.log('Login response body:', data);\r\n      if (response.ok && data?.data?.token && data?.data?.usuario?.rol) {\r\n        // Guardar token y expiraci√≥n (24h)\r\n  localStorage.setItem('authToken', data.data.token);\r\n        localStorage.setItem('tokenExpiresAt', String(Date.now() + 24 * 60 * 60 * 1000));\r\n        localStorage.setItem('userRole', data.data.usuario.rol);\r\n        localStorage.setItem('userEmail', data.data.usuario.email);\r\n        if (formData?.rememberMe) {\r\n          localStorage.setItem('rememberMe', 'true');\r\n        }\r\n        // Mostrar el valor exacto del rol recibido\r\n        console.log('Rol recibido:', data.data.usuario.rol);\r\n        \r\n        // Obtener la ruta por defecto seg√∫n el rol del usuario\r\n        const role = String(data.data.usuario.rol).toLowerCase();\r\n        const redirect = getDefaultPath(role);\r\n        \r\n        console.log('Redirigiendo a:', redirect);\r\n        navigate(redirect);\r\n        window.location.reload();\r\n      } else {\r\n        setErrors({\r\n          general: data?.message || 'Credenciales incorrectas. Por favor, verifique su correo y contrase√±a.'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setErrors({\r\n        general: 'Error de conexi√≥n. Por favor, intente nuevamente.'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full max-w-md mx-auto\">\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* Email Input */}\r\n        <Input\r\n          label=\"Correo Electr√≥nico\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"usuario@aireflowpro.com\"\r\n          value={formData?.email}\r\n          onChange={handleInputChange}\r\n          error={errors?.email}\r\n          required\r\n          disabled={isLoading}\r\n        />\r\n\r\n        {/* Password Input */}\r\n        <Input\r\n          label=\"Contrase√±a\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Ingrese su contrase√±a\"\r\n          value={formData?.password}\r\n          onChange={handleInputChange}\r\n          error={errors?.password}\r\n          required\r\n          disabled={isLoading}\r\n          autoComplete=\"current-password\"\r\n        />\r\n\r\n        {/* Remember Me Checkbox */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <Checkbox\r\n            label=\"Recordarme\"\r\n            name=\"rememberMe\"\r\n            checked={formData?.rememberMe}\r\n            onChange={handleInputChange}\r\n            disabled={isLoading}\r\n          />\r\n          \r\n          <button\r\n            type=\"button\"\r\n            className=\"text-sm text-primary hover:text-primary/80 transition-smooth\"\r\n            disabled={isLoading}\r\n          >\r\n            ¬øOlvid√≥ su contrase√±a?\r\n          </button>\r\n        </div>\r\n\r\n        {/* General Error Message */}\r\n        {errors?.general && (\r\n          <div className=\"p-3 bg-error/10 border border-error/20 rounded-lg\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"AlertCircle\" size={16} className=\"text-error flex-shrink-0\" />\r\n              <p className=\"text-sm text-error\">{errors?.general}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Submit Button */}\r\n        <Button\r\n          type=\"submit\"\r\n          variant=\"default\"\r\n          fullWidth\r\n          loading={isLoading}\r\n          disabled={isLoading}\r\n          iconName=\"LogIn\"\r\n          iconPosition=\"right\"\r\n        >\r\n          {isLoading ? 'Iniciando Sesi√≥n...' : 'Iniciar Sesi√≥n'}\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginForm;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst CredentialsHelper = () => {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const mockCredentials = [\r\n    { role: 'Administrador', email: 'admin@aireflowpro.com', password: 'Admin123!' },\r\n    { role: 'Gerente de Proyecto', email: 'proyecto@aireflowpro.com', password: 'Proyecto123!' },\r\n    { role: 'Representante de Ventas', email: 'ventas@aireflowpro.com', password: 'Ventas123!' },\r\n    { role: 'Supervisor de Taller', email: 'taller@aireflowpro.com', password: 'Taller123!' },\r\n    { role: 'Controlador Financiero', email: 'finanzas@aireflowpro.com', password: 'Finanzas123!' },\r\n    { role: 'Gerente de RH', email: 'personal@aireflowpro.com', password: 'Personal123!' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"mt-8 p-4 bg-muted/50 border border-border rounded-lg\">\r\n      <Button\r\n        variant=\"ghost\"\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n        className=\"w-full flex items-center justify-between p-0 h-auto\"\r\n      >\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Icon name=\"Info\" size={16} className=\"text-primary\" />\r\n          <span className=\"text-sm font-medium text-foreground\">Credenciales de Demostraci√≥n</span>\r\n        </div>\r\n        <Icon \r\n          name={isExpanded ? 'ChevronUp' : 'ChevronDown'} \r\n          size={16} \r\n          className=\"text-muted-foreground\"\r\n        />\r\n      </Button>\r\n      {isExpanded && (\r\n        <div className=\"mt-4 space-y-3\">\r\n          <p className=\"text-xs text-muted-foreground mb-3\">\r\n            Use estas credenciales para acceder a diferentes m√≥dulos del sistema:\r\n          </p>\r\n          \r\n          <div className=\"grid gap-2\">\r\n            {mockCredentials?.map((cred, index) => (\r\n              <div key={index} className=\"p-3 bg-card border border-border rounded-md\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"text-xs font-medium text-foreground\">{cred?.role}</span>\r\n                  <Icon name=\"User\" size={12} className=\"text-muted-foreground\" />\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name=\"Mail\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground font-mono\">{cred?.email}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name=\"Key\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground font-mono\">{cred?.password}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"mt-3 p-2 bg-warning/10 border border-warning/20 rounded-md\">\r\n            <div className=\"flex items-start space-x-2\">\r\n              <Icon name=\"AlertTriangle\" size={14} className=\"text-warning flex-shrink-0 mt-0.5\" />\r\n              <p className=\"text-xs text-warning\">\r\n                Estas son credenciales de demostraci√≥n. En producci√≥n, use sus credenciales reales.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CredentialsHelper;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst SecurityFeatures = () => {\r\n  const securityFeatures = [\r\n    {\r\n      icon: 'Lock',\r\n      title: 'Encriptaci√≥n de Extremo a Extremo',\r\n      description: 'Todos los datos se transmiten de forma segura'\r\n    },\r\n    {\r\n      icon: 'Shield',\r\n      title: 'Autenticaci√≥n Multifactor',\r\n      description: 'Protecci√≥n adicional para cuentas administrativas'\r\n    },\r\n    {\r\n      icon: 'Eye',\r\n      title: 'Monitoreo de Actividad',\r\n      description: 'Registro completo de accesos y actividades'\r\n    },\r\n    {\r\n      icon: 'Clock',\r\n      title: 'Sesiones Seguras',\r\n      description: 'Cierre autom√°tico por inactividad'\r\n    }\r\n  ];\r\n\r\n  const complianceItems = [\r\n    { name: 'LGPD M√©xico', status: 'Certificado' },\r\n    { name: 'NOM-151-SCFI', status: 'Cumple' },\r\n    { name: 'Facturaci√≥n CFDI 4.0', status: 'Integrado' },\r\n    { name: 'Backup Diario', status: 'Activo' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"mt-8 space-y-6\">\r\n      {/* Security Features */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center space-x-2 mb-4\">\r\n          <Icon name=\"ShieldCheck\" size={20} className=\"text-success\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Caracter√≠sticas de Seguridad</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {securityFeatures?.map((feature, index) => (\r\n            <div key={index} className=\"flex items-start space-x-3 p-3 bg-muted/30 rounded-md\">\r\n              <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                <Icon name={feature?.icon} size={16} className=\"text-primary\" />\r\n              </div>\r\n              <div>\r\n                <h4 className=\"text-sm font-medium text-foreground mb-1\">{feature?.title}</h4>\r\n                <p className=\"text-xs text-muted-foreground\">{feature?.description}</p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {/* Compliance Information */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center space-x-2 mb-4\">\r\n          <Icon name=\"FileCheck\" size={20} className=\"text-success\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Cumplimiento Normativo</h3>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n          {complianceItems?.map((item, index) => (\r\n            <div key={index} className=\"flex items-center justify-between p-3 bg-success/5 border border-success/20 rounded-md\">\r\n              <span className=\"text-sm font-medium text-foreground\">{item?.name}</span>\r\n              <div className=\"flex items-center space-x-1\">\r\n                <Icon name=\"CheckCircle\" size={14} className=\"text-success\" />\r\n                <span className=\"text-xs text-success font-medium\">{item?.status}</span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"mt-4 p-3 bg-primary/5 border border-primary/20 rounded-md\">\r\n          <div className=\"flex items-start space-x-2\">\r\n            <Icon name=\"Info\" size={16} className=\"text-primary flex-shrink-0 mt-0.5\" />\r\n            <div>\r\n              <p className=\"text-sm font-medium text-primary mb-1\">Certificaci√≥n ISO 27001</p>\r\n              <p className=\"text-xs text-primary/80\">\r\n                Sistema de gesti√≥n de seguridad de la informaci√≥n certificado internacionalmente.\r\n                √öltima auditor√≠a: Septiembre {new Date()?.getFullYear()}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Support Information */}\r\n      <div className=\"text-center text-xs text-muted-foreground\">\r\n        <p>¬øNecesita ayuda? Contacte a soporte t√©cnico:</p>\r\n        <div className=\"flex items-center justify-center space-x-4 mt-2\">\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Icon name=\"Phone\" size={12} />\r\n            <span>+52 (55) 1234-5678</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Icon name=\"Mail\" size={12} />\r\n            <span>soporte@aireflowpro.com</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SecurityFeatures;","import React, { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getDefaultPath } from '../../utils/auth';\r\nimport useAuth from '../../hooks/useAuth';\r\nimport CompanyBranding from './components/CompanyBranding';\r\nimport LoginForm from './components/LoginForm';\r\nimport CredentialsHelper from './components/CredentialsHelper';\r\nimport SecurityFeatures from './components/SecurityFeatures';\r\n\r\nconst LoginPage = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const { user, isAuthenticated } = useAuth();\r\n  useEffect(() => {\r\n    if (isAuthenticated && user?.rol) {\r\n      const defaultPath = getDefaultPath(user.rol);\r\n      navigate(defaultPath, { replace: true });\r\n    }\r\n    document.title = 'Iniciar Sesi√≥n - AireFlow Pro';\r\n  }, [isAuthenticated, user, navigate]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100\">\r\n      <div className=\"flex flex-col lg:flex-row min-h-screen\">\r\n        {/* Left Panel - Login Form */}\r\n        <div className=\"flex-1 flex items-center justify-center p-6 lg:p-12\">\r\n          <div className=\"w-full max-w-md\">\r\n            {/* Company Branding */}\r\n            <CompanyBranding />\r\n            \r\n            {/* Login Form */}\r\n            <div className=\"bg-card border border-border rounded-xl shadow-lg p-8\">\r\n              <div className=\"mb-6\">\r\n                <h2 className=\"text-2xl font-bold text-foreground mb-2\">Bienvenido de Nuevo</h2>\r\n                <p className=\"text-muted-foreground\">\r\n                  Ingrese sus credenciales para acceder al sistema\r\n                </p>\r\n              </div>\r\n              \r\n              <LoginForm />\r\n            </div>\r\n\r\n            {/* Demo Credentials Helper */}\r\n            <CredentialsHelper />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Panel - Security Features */}\r\n        <div className=\"lg:w-1/2 bg-card border-l border-border p-6 lg:p-12 overflow-y-auto\">\r\n          <div className=\"max-w-lg mx-auto\">\r\n            <div className=\"mb-8\">\r\n              <h2 className=\"text-2xl font-bold text-foreground mb-4\">\r\n                Plataforma Empresarial Segura\r\n              </h2>\r\n              <p className=\"text-muted-foreground leading-relaxed\">\r\n                AireFlow Pro es la soluci√≥n integral para la gesti√≥n de empresas HVAC, \r\n                dise√±ada espec√≠ficamente para el mercado mexicano con cumplimiento \r\n                normativo completo y caracter√≠sticas de seguridad empresarial.\r\n              </p>\r\n            </div>\r\n\r\n            <SecurityFeatures />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Footer */}\r\n      <footer className=\"fixed bottom-0 left-0 right-0 bg-card/95 backdrop-blur-sm border-t border-border p-4\">\r\n        <div className=\"max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between text-xs text-muted-foreground\">\r\n          <div className=\"flex items-center space-x-4 mb-2 sm:mb-0\">\r\n            <span>¬© {new Date()?.getFullYear()} AireFlow Pro. Todos los derechos reservados.</span>\r\n            <span className=\"hidden sm:inline\">|</span>\r\n            <span>Versi√≥n 2.1.4</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <button className=\"hover:text-foreground transition-smooth\">\r\n              Pol√≠tica de Privacidad\r\n            </button>\r\n            <span>|</span>\r\n            <button className=\"hover:text-foreground transition-smooth\">\r\n              T√©rminos de Uso\r\n            </button>\r\n            <span>|</span>\r\n            <button className=\"hover:text-foreground transition-smooth\">\r\n              Soporte T√©cnico\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;","import React from \"react\";\r\nimport Select from \"../../../components/ui/Select\";\r\nimport Input from \"../../../components/ui/Input\";\r\nimport Button from \"../../../components/ui/Button\";\r\n\r\nconst FilterGastos = ({ filters, onFilterChange, onClearFilters, totalCount, filteredCount }) => {\r\n  const handleFilterChange = (key, value) => {\r\n    onFilterChange({ ...filters, [key]: value });\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters || {}).some(v => v !== \"\");\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 mb-6\">\r\n      {/* Buscador principal */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6\">\r\n        <div className=\"flex-1 max-w-md\">\r\n          <Input\r\n            type=\"search\"\r\n            placeholder=\"Buscar por proveedor..\"\r\n            value={filters?.search || \"\"}\r\n            onChange={(e) => handleFilterChange(\"search\", e.target.value)}\r\n            className=\"w-full\"\r\n          />\r\n        </div>\r\n\r\n        {hasActiveFilters && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            onClick={onClearFilters}\r\n            iconName=\"X\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Limpiar filtros\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Filtros adicionales */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\r\n        {/* C√≥digo */}\r\n        <Input\r\n          type=\"text\"\r\n          label=\"C√≥digo\"\r\n          placeholder=\"Ej. OC-2025-001\"\r\n          value={filters?.codigo || \"\"}\r\n          onChange={(e) => handleFilterChange(\"codigo\", e.target.value)}\r\n        />\r\n\r\n        {/* Fecha desde */}\r\n        <Input\r\n          type=\"date\"\r\n          label=\"Fecha desde\"\r\n          value={filters?.fechaDesde || \"\"}\r\n          onChange={(e) => handleFilterChange(\"fechaDesde\", e.target.value)}\r\n        />\r\n\r\n        {/* Fecha hasta */}\r\n        <Input\r\n          type=\"date\"\r\n          label=\"Fecha hasta\"\r\n          value={filters?.fechaHasta || \"\"}\r\n          onChange={(e) => handleFilterChange(\"fechaHasta\", e.target.value)}\r\n        />\r\n      </div>\r\n      <div className=\"text-sm text-muted-foreground mt-2\">\r\n        Mostrando <strong>{filteredCount}</strong> de <strong>{totalCount}</strong> resultados\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterGastos;\r\n","import React, { useEffect, useState, useMemo } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport useProyect from '../../../hooks/useProyect';\r\nconst FilterControls = ({ onFiltersChange, onExport, onReset }) => {\r\n  const [filters, setFilters] = useState({\r\n    dateRange: 'all',\r\n    startDate: '',\r\n    endDate: '',\r\n    category: '',\r\n    department: '',\r\n    status: '',\r\n    project: '',\r\n    amountMin: '',\r\n    amountMax: '',\r\n    searchTerm: ''\r\n  });\r\n\r\n  const [showAdvanced, setShowAdvanced] = useState(false);\r\n  const { getProyectos, proyectos } = useProyect();\r\n\r\n  // Cargar proyectos desde el hook\r\n  useEffect(() => {\r\n    getProyectos().catch(() => {});\r\n  }, [getProyectos]);\r\n\r\n  // Notificar filtros iniciales al padre\r\n  useEffect(() => {\r\n    onFiltersChange?.(filters);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  /* ==============================\r\n     OPCIONES DE SELECT\r\n  ============================== */\r\n  const dateRangeOptions = [\r\n    { value: 'all', label: 'Sin filtro' },\r\n    { value: 'today', label: 'Hoy' },\r\n    { value: 'thisWeek', label: 'Esta Semana' },\r\n    { value: 'thisMonth', label: 'Este Mes' },\r\n    { value: 'lastMonth', label: 'Mes Anterior' },\r\n    { value: 'thisQuarter', label: 'Este Trimestre' },\r\n    { value: 'thisYear', label: 'Este A√±o' },\r\n    { value: 'custom', label: 'Rango Personalizado' }\r\n  ];\r\n\r\n  const categoryOptions = [\r\n    { value: '', label: 'Todas las Categor√≠as' },\r\n    { value: 'Viajes', label: 'Viajes' },\r\n    { value: 'Materiales', label: 'Materiales' },\r\n    { value: 'N√≥mina', label: 'N√≥mina' },\r\n    { value: 'Proveedores', label: 'Proveedores' },\r\n    { value: 'Equipos', label: 'Equipos' },\r\n    { value: 'Servicios', label: 'Servicios' }\r\n  ];\r\n\r\n  const departmentOptions = [\r\n    { value: '', label: 'Todos los Departamentos' },\r\n    { value: 'Administraci√≥n', label: 'Administraci√≥n' },\r\n    { value: 'Proyectos', label: 'Proyectos' },\r\n    { value: 'Ventas', label: 'Ventas' },\r\n    { value: 'Taller', label: 'Taller' },\r\n    { value: 'Operaciones', label: 'Operaciones' }\r\n  ];\r\n\r\n  // üîπ Estado: solo Pendiente y Autorizado\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'Autorizado', label: 'Autorizado' }\r\n  ];\r\n\r\n  // üîπ Proyectos cargados din√°micamente\r\n  const projectOptions = useMemo(() => {\r\n    const base = [{ value: '', label: 'Todos los Proyectos' }];\r\n    const seen = new Set();\r\n\r\n    const list = Array.isArray(proyectos) ? proyectos : [];\r\n    const opts = list\r\n      .map((p) => {\r\n        const id =\r\n          p?.id ?? p?._id ?? p?.proyectoId ?? p?.codigo ?? p?.code ?? null;\r\n\r\n        const nombre =\r\n          p?.nombreProyecto ??\r\n          p?.nombre ??\r\n          p?.name ??\r\n          p?.titulo ??\r\n          p?.descripcion ??\r\n          '';\r\n\r\n        const codigo =\r\n          p?.codigo ?? p?.code ?? p?.clave ?? p?.projectCode ?? '';\r\n\r\n        const value = codigo || id;\r\n        if (!value) return null;\r\n        if (seen.has(value)) return null;\r\n        seen.add(value);\r\n\r\n        // üëá solo muestra el nombre del proyecto, sin c√≥digo\r\n        return { value, label: nombre || value };\r\n      })\r\n      .filter(Boolean);\r\n\r\n    return base.concat(opts);\r\n  }, [proyectos]);\r\n\r\n  /* ==============================\r\n     MANEJADORES\r\n  ============================== */\r\n  const handleFilterChange = (key, value) => {\r\n    let next = { ...filters, [key]: value };\r\n\r\n    if (key === 'dateRange' && value !== 'custom') {\r\n      next.startDate = '';\r\n      next.endDate = '';\r\n    }\r\n\r\n    if (key === 'amountMin' || key === 'amountMax') {\r\n      const raw = String(value ?? '');\r\n      next[key] = raw === '' ? '' : isNaN(Number(raw)) ? '' : raw;\r\n    }\r\n\r\n    setFilters(next);\r\n    onFiltersChange?.(next);\r\n  };\r\n\r\n  const handleReset = () => {\r\n    const resetFilters = {\r\n      dateRange: 'all',\r\n      startDate: '',\r\n      endDate: '',\r\n      category: '',\r\n      department: '',\r\n      status: '',\r\n      project: '',\r\n      amountMin: '',\r\n      amountMax: '',\r\n      searchTerm: ''\r\n    };\r\n    setFilters(resetFilters);\r\n    onReset?.(resetFilters);\r\n    onFiltersChange?.(resetFilters);\r\n  };\r\n\r\n  const getActiveFiltersCount = () => {\r\n    return Object.entries(filters).filter(([key, value]) => {\r\n      if (key === 'dateRange') return value !== 'all';\r\n      return value !== '';\r\n    }).length;\r\n  };\r\n\r\n  /* ==============================\r\n     RENDER\r\n  ============================== */\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 space-y-4\">\r\n      {/* üîç Buscador y bot√≥n de filtros */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\r\n        <div className=\"flex-1 max-w-md\">\r\n          <div className=\"relative\">\r\n            <Input\r\n              type=\"search\"\r\n              placeholder=\"Buscar gastos, proveedores, proyectos...\"\r\n              value={filters.searchTerm}\r\n              onChange={(e) => handleFilterChange('searchTerm', e?.target?.value)}\r\n              className=\"pl-10\"\r\n            />\r\n            <Icon\r\n              name=\"Search\"\r\n              size={16}\r\n              className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={() => setShowAdvanced(!showAdvanced)}\r\n            iconName={showAdvanced ? 'ChevronUp' : 'ChevronDown'}\r\n            iconPosition=\"right\"\r\n          >\r\n            Filtros Avanzados\r\n            {getActiveFiltersCount() > 0 && (\r\n              <span className=\"ml-2 px-2 py-1 bg-primary text-primary-foreground text-xs rounded-full\">\r\n                {getActiveFiltersCount()}\r\n              </span>\r\n            )}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtros b√°sicos */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Select\r\n          label=\"Rango de Fechas\"\r\n          options={dateRangeOptions}\r\n          value={filters.dateRange}\r\n          onChange={(value) => handleFilterChange('dateRange', value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Categor√≠a\"\r\n          options={categoryOptions}\r\n          value={filters.category}\r\n          onChange={(value) => handleFilterChange('category', value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Estado\"\r\n          options={statusOptions}\r\n          value={filters.status}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Proyecto\"\r\n          options={projectOptions}\r\n          value={filters.project}\r\n          onChange={(value) => handleFilterChange('project', value)}\r\n          searchable\r\n        />\r\n      </div>\r\n\r\n      {/* Filtro de fechas personalizadas */}\r\n      {filters.dateRange === 'custom' && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-muted rounded-lg\">\r\n          <Input\r\n            type=\"date\"\r\n            label=\"Fecha Inicio\"\r\n            value={filters.startDate}\r\n            onChange={(e) => handleFilterChange('startDate', e?.target?.value)}\r\n          />\r\n          <Input\r\n            type=\"date\"\r\n            label=\"Fecha Fin\"\r\n            value={filters.endDate}\r\n            onChange={(e) => handleFilterChange('endDate', e?.target?.value)}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Filtros avanzados */}\r\n      {showAdvanced && (\r\n        <div className=\"border-t border-border pt-4 space-y-4\">\r\n          <h4 className=\"text-sm font-medium text-foreground\">Filtros Avanzados</h4>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            <Select\r\n              label=\"Departamento\"\r\n              options={departmentOptions}\r\n              value={filters.department}\r\n              onChange={(value) => handleFilterChange('department', value)}\r\n            />\r\n\r\n            <Input\r\n              type=\"number\"\r\n              label=\"Monto M√≠nimo (MXN)\"\r\n              placeholder=\"0.00\"\r\n              value={filters.amountMin}\r\n              onChange={(e) => handleFilterChange('amountMin', e?.target?.value)}\r\n            />\r\n\r\n            <Input\r\n              type=\"number\"\r\n              label=\"Monto M√°ximo (MXN)\"\r\n              placeholder=\"999999.99\"\r\n              value={filters.amountMax}\r\n              onChange={(e) => handleFilterChange('amountMax', e?.target?.value)}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between pt-4 border-t border-border\">\r\n            <div className=\"text-sm text-muted-foreground\">\r\n              {getActiveFiltersCount()} filtro{getActiveFiltersCount() !== 1 ? 's' : ''} activo{getActiveFiltersCount() !== 1 ? 's' : ''}\r\n            </div>\r\n            <Button\r\n              variant=\"ghost\"\r\n              onClick={handleReset}\r\n              iconName=\"RotateCcw\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Limpiar Filtros\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterControls;\r\n","// services/finanzasService.js\r\nimport httpService from './httpService';\r\n\r\nconst finanzasService = {\r\n  async getGastos() {\r\n    try {\r\n      const data = await httpService.get('/gastos');\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error al obtener gastos:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getGastoById(id) {\r\n    try {\r\n      const data = await httpService.get(`/gastos/${id}`);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al obtener el gasto con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createGasto(payload) {\r\n    try {\r\n      const data = await httpService.post('/gastos/crear', payload);\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error al crear gasto:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateGasto(id, payload) {\r\n    try {\r\n      const data = await httpService.put(`/gastos/${id}`, payload);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al actualizar el gasto con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deleteGasto(id) {\r\n    try {\r\n      const data = await httpService.delete(`/gastos/${id}`);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al eliminar el gasto con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default finanzasService;\r\n","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport { useNotifications } from 'context/NotificationContext';\r\n\r\nconst PaymentAuthorizationModal = ({ isOpen, onClose, expense, onAuthorize, onDelete }) => {\r\n  const {\r\n    showHttpError,\r\n    showOperationSuccess,\r\n    showConfirm,\r\n  } = useNotifications();\r\n\r\n  const [authData, setAuthData] = useState({\r\n    authorizationLevel: '',\r\n    approverComments: '',\r\n    paymentMethod: '',\r\n    scheduledDate: '',\r\n    priority: 'normal',\r\n    requiresAdditionalApproval: false\r\n  });\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  const authorizationLevels = [\r\n    { value: 'supervisor', label: 'Supervisor de Departamento' },\r\n    { value: 'manager', label: 'Gerente de √Årea' },\r\n    { value: 'director', label: 'Director Financiero' },\r\n    { value: 'executive', label: 'Direcci√≥n Ejecutiva' }\r\n  ];\r\n\r\n  const paymentMethods = [\r\n    { value: 'transfer', label: 'Transferencia Bancaria' },\r\n    { value: 'check', label: 'Cheque' },\r\n    { value: 'cash', label: 'Efectivo' },\r\n    { value: 'card', label: 'Tarjeta Corporativa' }\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: 'low', label: 'Baja' },\r\n    { value: 'normal', label: 'Normal' },\r\n    { value: 'high', label: 'Alta' },\r\n    { value: 'urgent', label: 'Urgente' }\r\n  ];\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setAuthData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!expense) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      await onAuthorize?.({\r\n        id: expense?.id,\r\n        status: 'approved', // ingl√©s, como tu API\r\n        ...authData,\r\n        amount: parseFloat(expense?.amount?.replace(/[^0-9.-]+/g, '')) || 0\r\n      });\r\n\r\n      // Notificaci√≥n de √©xito\r\n      showOperationSuccess('update', 'Pago');\r\n\r\n      onClose?.();\r\n    } catch (error) {\r\n      console.error('Error authorizing payment:', error);\r\n      // Notificaci√≥n de error HTTP\r\n      showHttpError(error, 'Error al autorizar el pago');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    if (!expense?.id) return;\r\n\r\n    // Usamos tu notificaci√≥n de confirmaci√≥n en lugar de window.confirm\r\n    showConfirm(\r\n      `¬øDeseas eliminar este pago \"${expense?.description || ''}\"?`,\r\n      {\r\n        onConfirm: async () => {\r\n          setIsDeleting(true);\r\n          try {\r\n            await onDelete?.(expense.id);\r\n            showOperationSuccess('delete', 'Pago');\r\n            onClose?.();\r\n          } catch (err) {\r\n            console.error('Error eliminando pago:', err);\r\n            showHttpError(err, 'Error al eliminar el pago');\r\n          } finally {\r\n            setIsDeleting(false);\r\n          }\r\n        },\r\n        onCancel: () => {\r\n          // Si quieres hacer algo extra al cancelar, lo agregas aqu√≠\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    })?.format(amount);\r\n  };\r\n\r\n  const getRequiredAuthLevel = (amount) => {\r\n    const numAmount = parseFloat(amount?.replace(/[^0-9.-]+/g, ''));\r\n    if (numAmount > 100000) return 'executive';\r\n    if (numAmount > 50000) return 'director';\r\n    if (numAmount > 10000) return 'manager';\r\n    return 'supervisor';\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card rounded-lg shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Autorizaci√≥n de Pago</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Revisar y autorizar el gasto seleccionado</p>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n            disabled={isSubmitting || isDeleting}\r\n          >\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {/* Expense Details */}\r\n          <div className=\"bg-muted rounded-lg p-4 space-y-3\">\r\n            <h3 className=\"font-medium text-foreground\">Detalles del Gasto</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Descripci√≥n:</span>\r\n                <p className=\"text-foreground font-medium\">{expense?.description}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Monto:</span>\r\n                <p className=\"text-foreground font-bold text-lg\">{expense?.amount}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Categor√≠a:</span>\r\n                <p className=\"text-foreground\">{expense?.category}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Proyecto:</span>\r\n                <p className=\"text-foreground\">{expense?.project}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Fecha:</span>\r\n                <p className=\"text-foreground\">{expense?.date}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Solicitante:</span>\r\n                <p className=\"text-foreground\">{expense?.requestedBy || 'Juan P√©rez'}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Payment Details */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"CreditCard\" size={16} className=\"text-primary\" />\r\n              <h3 className=\"font-medium text-foreground\">Detalles de Pago</h3>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <Select\r\n                label=\"M√©todo de Pago\"\r\n                options={paymentMethods}\r\n                value={authData?.paymentMethod}\r\n                onChange={(value) => handleInputChange('paymentMethod', value)}\r\n                required\r\n              />\r\n\r\n              <Input\r\n                type=\"date\"\r\n                label=\"Fecha Programada\"\r\n                value={authData?.scheduledDate}\r\n                onChange={(e) => handleInputChange('scheduledDate', e?.target?.value)}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={authData?.priority}\r\n              onChange={(value) => handleInputChange('priority', value)}\r\n            />\r\n          </div>\r\n\r\n          {/* Comments */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm font-medium text-foreground\">\r\n              Comentarios del Aprobador\r\n            </label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent resize-none\"\r\n              rows={4}\r\n              placeholder=\"Agregue comentarios sobre la autorizaci√≥n...\"\r\n              value={authData?.approverComments}\r\n              onChange={(e) => handleInputChange('approverComments', e?.target?.value)}\r\n            />\r\n          </div>\r\n\r\n          {/* Additional Approval */}\r\n          <div className=\"flex items-center space-x-3\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"additionalApproval\"\r\n              checked={authData?.requiresAdditionalApproval}\r\n              onChange={(e) => handleInputChange('requiresAdditionalApproval', e?.target?.checked)}\r\n              className=\"w-4 h-4 text-primary bg-input border-border rounded focus:ring-ring\"\r\n            />\r\n            <label htmlFor=\"additionalApproval\" className=\"text-sm text-foreground\">\r\n              Requiere aprobaci√≥n adicional de nivel superior\r\n            </label>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex items-center justify-between pt-6 border-t border-border\">\r\n            {/* Bot√≥n eliminar */}\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"destructive\"\r\n              iconName=\"Trash2\"\r\n              iconPosition=\"left\"\r\n              onClick={handleDelete}\r\n              disabled={isSubmitting || isDeleting}\r\n            >\r\n              {isDeleting ? 'Eliminando‚Ä¶' : 'Eliminar pago'}\r\n            </Button>\r\n\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                onClick={onClose}\r\n                disabled={isSubmitting || isDeleting}\r\n              >\r\n                Cancelar\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"success\"\r\n                loading={isSubmitting}\r\n                disabled={isDeleting}\r\n                iconName=\"Check\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Autorizar Pago\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentAuthorizationModal;\r\n","// hooks/useFinanzas.js\r\nimport { useState } from 'react';\r\nimport finanzasService from '../services/finanzasService';\r\n\r\n// Util: toma data de {success, data} o del objeto plano\r\nconst unwrap = (resp) => (resp && typeof resp === 'object' && 'data' in resp ? resp.data : resp);\r\n// Util: id seguro (id o _id)\r\nconst getId = (o) => (o && (o.id ?? o._id));\r\n\r\nconst useFinanzas = () => {\r\n  const [finanzas, setFinanzas] = useState([]); // Puedes renombrar a \"gastos\" si gustas; mantengo \"finanzas\" por compatibilidad\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Obtener todos los gastos\r\n  const getGastos = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await finanzasService.getGastos();\r\n      const list = unwrap(resp);\r\n      if (Array.isArray(list)) {\r\n        setFinanzas(list);\r\n      } else {\r\n        setFinanzas([]);\r\n      }\r\n      return list ?? [];\r\n    } catch (err) {\r\n      console.error('Error en useFinanzas.getGastos:', err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Obtener un gasto por ID\r\n  const getGastoById = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await finanzasService.getGastoById(id);\r\n      const item = unwrap(resp);\r\n      return item;\r\n    } catch (err) {\r\n      console.error('Error en useFinanzas.getGastoById:', err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Crear un nuevo gasto\r\n  const createGasto = async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await finanzasService.createGasto(payload);\r\n      const created = unwrap(resp);\r\n      if (created) {\r\n        setFinanzas((prev) => [...prev, created]);\r\n      }\r\n      return created;\r\n    } catch (err) {\r\n      console.error('Error en useFinanzas.createGasto:', err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Actualizar un gasto existente\r\n  const updateGasto = async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await finanzasService.updateGasto(id, payload);\r\n      const updated = unwrap(resp);\r\n      const targetId = id ?? getId(updated);\r\n\r\n      if (targetId !== undefined) {\r\n        setFinanzas((prev) =>\r\n          prev.map((f) => (getId(f) === targetId ? { ...f, ...updated } : f))\r\n        );\r\n      }\r\n      return updated;\r\n    } catch (err) {\r\n      console.error('Error en useFinanzas.updateGasto:', err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Eliminar un gasto\r\n  const deleteGasto = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const resp = await finanzasService.deleteGasto(id);\r\n      // Si tu API devuelve { success: true } o el item borrado, igual filtramos localmente\r\n      setFinanzas((prev) => prev.filter((f) => getId(f) !== id));\r\n      return unwrap(resp) ?? true;\r\n    } catch (err) {\r\n      console.error('Error en useFinanzas.deleteGasto:', err);\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    finanzas,  // lista local (gastos)\r\n    loading,\r\n    error,\r\n    // M√©todos alineados al service:\r\n    getGastos,\r\n    getGastoById,\r\n    createGasto,\r\n    updateGasto,\r\n    deleteGasto,\r\n  };\r\n};\r\n\r\nexport default useFinanzas;\r\n","// modules/finanzas/ExpenseTable.jsx\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport finanzasService from 'services/finanzasService';\r\nimport PaymentAuthorizationModal from './PaymentAuthorizationModal';\r\nimport useProyect from '../../../hooks/useProyect';\r\nimport useFinanzas from '../../../hooks/useFinanzas';\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\n/* ===================== Utils ===================== */\r\n// Parser tolerante (ISO, timestamp, dd/mm/yyyy [opcional hora])\r\nconst parseISODate = (value) => {\r\n  if (!value) return null;\r\n  if (value instanceof Date && !isNaN(value)) return value;\r\n\r\n  // num√©rico/timestamp\r\n  if (typeof value === 'number' || /^\\d+$/.test(String(value))) {\r\n    const d = new Date(Number(value));\r\n    return isNaN(d) ? null : d;\r\n  }\r\n\r\n  const s = String(value).trim();\r\n\r\n  // dd/mm/yyyy o dd/mm/yyyy HH:MM\r\n  const m = s.match(/^(\\d{2})\\/(\\d{2})\\/(\\d{4})(?:\\s+(\\d{2}):(\\d{2}))?$/);\r\n  if (m) {\r\n    const [, dd, mm, yyyy, HH = '00', MM = '00'] = m;\r\n    const d = new Date(Number(yyyy), Number(mm) - 1, Number(dd), Number(HH), Number(MM), 0, 0);\r\n    return isNaN(d) ? null : d;\r\n  }\r\n\r\n  const d = new Date(s);\r\n  return isNaN(d) ? null : d;\r\n};\r\n\r\nconst formatDate = (date) => {\r\n  const d = date instanceof Date ? date : parseISODate(date);\r\n  if (!d) return '‚Äî';\r\n  return d.toLocaleDateString('es-MX', { day: '2-digit', month: '2-digit', year: 'numeric' });\r\n};\r\nconst toNumber = (v) => {\r\n  if (v === null || v === undefined || v === '') return null;\r\n  if (typeof v === 'number') return v;\r\n  const cleaned = String(v).replace(/[^0-9.-]/g, '');\r\n  const num = Number(cleaned);\r\n  return Number.isNaN(num) ? null : num;\r\n};\r\nconst formatCurrency = (amount) => {\r\n  const n = toNumber(amount);\r\n  if (n === null) return '‚Äî';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(n);\r\n};\r\nconst getExpenseStatusColor = (statusValue) => {\r\n  const v = (statusValue || '').toString().toLowerCase().trim();\r\n  const map = {\r\n    pendiente: 'bg-yellow-100 text-yellow-800',\r\n    aprobado: 'bg-green-100 text-green-800',\r\n    autorizado: 'bg-green-100 text-green-800',\r\n    rechazado: 'bg-red-100 text-red-800',\r\n    pagado: 'bg-emerald-100 text-emerald-800',\r\n    programado: 'bg-blue-100 text-blue-800',\r\n    pending: 'bg-yellow-100 text-yellow-800',\r\n    approved: 'bg-green-100 text-green-800',\r\n    authorized: 'bg-green-100 text-green-800',\r\n    rejected: 'bg-red-100 text-red-800',\r\n    paid: 'bg-emerald-100 text-emerald-800',\r\n    scheduled: 'bg-blue-100 text-blue-800',\r\n  };\r\n  return map[v] || 'bg-gray-100 text-gray-800';\r\n};\r\n\r\nconst normId = (v) => (v == null ? '' : String(v).trim());\r\nconst normCode = (v) => (v == null ? '' : String(v).trim().toUpperCase());\r\n\r\n// üîë Helper para identificar un gasto por su id\r\nconst getDocKey = (d) =>\r\n  String(\r\n    d?.id ??\r\n      d?._id ??\r\n      d?.gastoId ??\r\n      d?.gastoID ??\r\n      d?.Id ??\r\n      d?.ID ??\r\n      ''\r\n  );\r\n\r\n/* ====== Map de documento ‚Üí fila (join con proyectos) ====== */\r\nconst mapGastoDocWithProjects = (doc, projectById, projectByCode) => {\r\n  const id = doc.id ?? doc._id ?? doc.gastoId ?? `${Math.random()}`;\r\n\r\n  let date = doc.fecha ?? doc.date ?? doc.fechaGasto ?? doc.createdAt ?? null;\r\n  if (!doc.date && doc.fecha && doc.hora) {\r\n    const hhmm = String(doc.hora).slice(0, 5);\r\n    date = `${doc.fecha}T${hhmm}`;\r\n  }\r\n\r\n  const category = doc.categoria ?? doc.category ?? doc.tipo ?? '‚Äî';\r\n  const description = doc.descripcion ?? doc.description ?? doc.concepto ?? '‚Äî';\r\n  const amount = doc.monto ?? doc.amount ?? doc.total ?? doc.importe ?? null;\r\n  const status = doc.estado ?? doc.status ?? doc.aprobacion ?? doc.paymentStatus ?? 'Pendiente';\r\n\r\n  const proyectoNode = doc.proyecto ?? doc.project ?? {};\r\n  const projectIdRaw =\r\n    doc.idProyecto ??\r\n    doc.proyectoId ??\r\n    doc.projectId ??\r\n    proyectoNode?.id ??\r\n    proyectoNode?._id ??\r\n    proyectoNode?.proyectoId ??\r\n    null;\r\n  const projectCodeRaw =\r\n    doc.codigoProyecto ?? doc.projectCode ?? proyectoNode?.codigo ?? proyectoNode?.code ?? '';\r\n  let projectName =\r\n    doc.proyectoNombre ??\r\n    doc.projectName ??\r\n    proyectoNode?.nombre ??\r\n    proyectoNode?.name ??\r\n    doc.nombreProyecto ??\r\n    '';\r\n  let projectCode = projectCodeRaw || '';\r\n\r\n  const pid = normId(projectIdRaw);\r\n  if (!projectName && pid && projectById[pid]) {\r\n    projectName = projectById[pid].nombre || projectName;\r\n    if (!projectCode) projectCode = projectById[pid].codigo || '';\r\n  }\r\n  const pcode = normCode(projectCode);\r\n  if (!projectName && pcode && projectByCode[pcode]) {\r\n    projectName = projectByCode[pcode].nombre || projectName;\r\n    if (!projectCode) projectCode = projectByCode[pcode].codigo || '';\r\n  }\r\n\r\n  const requestedBy = doc.solicitadoPor ?? doc.requestedBy ?? doc.solicitante ?? doc.createdByName ?? '';\r\n  const department = doc.presupuestoDepartamento ?? doc.department ?? doc.departamento ?? '';\r\n\r\n  return {\r\n    id,\r\n    date,\r\n    category,\r\n    description,\r\n    amount,\r\n    status,\r\n    project: { id: pid || null, name: projectName || '‚Äî', code: projectCode || '' },\r\n    requestedBy,\r\n    department,\r\n    raw: doc,\r\n  };\r\n};\r\n\r\n/* ======== Rango de fechas helpers ======== */\r\nconst startOfToday = () => { const d = new Date(); d.setHours(0,0,0,0); return d; };\r\nconst endOfToday = () => { const d = new Date(); d.setHours(23,59,59,999); return d; };\r\nconst addDays = (d, n) => { const x = new Date(d); x.setDate(x.getDate()+n); return x; };\r\nconst startOfMonth = (d) => new Date(d.getFullYear(), d.getMonth(), 1);\r\nconst endOfMonth = (d) => new Date(d.getFullYear(), d.getMonth()+1, 0, 23,59,59,999);\r\nconst startOfYear = (d) => new Date(d.getFullYear(), 0, 1);\r\nconst endOfYear = (d) => new Date(d.getFullYear(), 11, 31, 23,59,59,999);\r\nconst getQuarterRange = (d) => {\r\n  const q = Math.floor(d.getMonth()/3);\r\n  const start = new Date(d.getFullYear(), q*3, 1);\r\n  const end = new Date(d.getFullYear(), q*3 + 3, 0, 23,59,59,999);\r\n  return { start, end };\r\n};\r\n\r\n/* ======================================================\r\n   Tabla anclada a filtros externos (pasados por props)\r\n====================================================== */\r\nconst ExpenseTable = ({ filters: externalFilters }) => {\r\n  const [remoteRows, setRemoteRows] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n  const [sortConfig, setSortConfig] = useState({ key: 'date', direction: 'desc' });\r\n  const [selectedIds, setSelectedIds] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  const [showAuthModal, setShowAuthModal] = useState(false);\r\n  const [selectedExpense, setSelectedExpense] = useState(null);\r\n\r\n  const { getProyectos, proyectos } = useProyect();\r\n  const { deleteGasto } = useFinanzas();\r\n\r\n  useEffect(() => { getProyectos().catch(() => {}); }, [getProyectos]);\r\n\r\n  // Carga inicial de gastos\r\n  useEffect(() => {\r\n    let alive = true;\r\n    (async () => {\r\n      setLoading(true);\r\n      setErrorMsg('');\r\n      try {\r\n        const res = await finanzasService.getGastos();\r\n        const list = Array.isArray(res)\r\n          ? res\r\n          : Array.isArray(res?.data)\r\n          ? res.data\r\n          : Array.isArray(res?.data?.items)\r\n          ? res.data.items\r\n          : [];\r\n        if (!alive) return;\r\n        setRemoteRows(list);\r\n      } catch (err) {\r\n        console.error('Error getGastos:', err);\r\n        if (alive) setErrorMsg('No se pudieron cargar los gastos.');\r\n      } finally {\r\n        if (alive) setLoading(false);\r\n      }\r\n    })();\r\n    return () => { alive = false; };\r\n  }, []);\r\n\r\n  // üëÇ Escuchar gastos nuevos creados desde el modal (sin refrescar la p√°gina)\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    const handler = (ev) => {\r\n      let doc = ev?.detail;\r\n      if (!doc) return;\r\n\r\n      // Por si el modal manda { data: gasto }\r\n      if (doc.data && typeof doc.data === 'object' && !Array.isArray(doc.data)) {\r\n        doc = doc.data;\r\n      }\r\n\r\n      setRemoteRows((prev) => {\r\n        const keyNew = getDocKey(doc);\r\n        // si no hay id, lo metemos igual al inicio\r\n        if (!keyNew) return [doc, ...prev];\r\n\r\n        const exists = prev.some((d) => getDocKey(d) === keyNew);\r\n        if (exists) return prev;\r\n\r\n        return [doc, ...prev];\r\n      });\r\n    };\r\n\r\n    window.addEventListener('gasto:created', handler);\r\n    return () => window.removeEventListener('gasto:created', handler);\r\n  }, []);\r\n\r\n  const { projectById, projectByCode } = useMemo(() => {\r\n    const byId = {};\r\n    const byCode = {};\r\n    (proyectos || []).forEach((p) => {\r\n      const id = normId(p.id ?? p._id ?? p.proyectoId ?? p.codigo ?? p.code);\r\n      const nombre = p.nombreProyecto ?? p.nombre ?? p.name ?? p.titulo ?? p.descripcion ?? '';\r\n      const codigo = p.codigo ?? p.code ?? p.clave ?? p.projectCode ?? '';\r\n      if (id) byId[id] = { nombre, codigo };\r\n      const ncode = normCode(codigo);\r\n      if (ncode) byCode[ncode] = { nombre, codigo };\r\n    });\r\n    return { projectById: byId, projectByCode: byCode };\r\n  }, [proyectos]);\r\n\r\n  const rows = useMemo(\r\n    () =>\r\n      Array.isArray(remoteRows)\r\n        ? remoteRows.map((d) => mapGastoDocWithProjects(d, projectById, projectByCode))\r\n        : [],\r\n    [remoteRows, projectById, projectByCode]\r\n  );\r\n\r\n  /* ===== Filtros externos ===== */\r\n  const defaultFilters = {\r\n    dateRange: 'all',\r\n    startDate: '', endDate: '',\r\n    category: '', department: '', status: '',\r\n    project: '', amountMin: '', amountMax: '', searchTerm: ''\r\n  };\r\n  const f = externalFilters ?? defaultFilters;\r\n\r\n  const applyFilters = (list) => {\r\n    if (!Array.isArray(list)) return [];\r\n\r\n    const term = (f.searchTerm || '').toLowerCase().trim();\r\n    const cat  = (f.category || '').toLowerCase();\r\n    const dep  = (f.department || '').toLowerCase();\r\n    const sta  = (f.status || '').toLowerCase();\r\n    const proj = (f.project || '').toLowerCase();\r\n    const min  = f.amountMin !== '' ? Number(f.amountMin) : null;\r\n    const max  = f.amountMax !== '' ? Number(f.amountMax) : null;\r\n\r\n    let rangeStart = null, rangeEnd = null;\r\n    const now = new Date();\r\n    switch (f.dateRange) {\r\n      case 'all':\r\n        rangeStart = null; rangeEnd = null; break;\r\n      case 'today':\r\n        rangeStart = startOfToday(); rangeEnd = endOfToday(); break;\r\n      case 'thisWeek': {\r\n        const today = startOfToday(); const dow = today.getDay();\r\n        rangeStart = addDays(today, -(dow || 7) + 1); rangeStart.setHours(0,0,0,0);\r\n        rangeEnd = addDays(rangeStart, 6); rangeEnd.setHours(23,59,59,999); break;\r\n      }\r\n      case 'thisMonth':\r\n        rangeStart = startOfMonth(now); rangeEnd = endOfMonth(now); break;\r\n      case 'lastMonth': {\r\n        const prev = new Date(now.getFullYear(), now.getMonth()-1, 1);\r\n        rangeStart = startOfMonth(prev); rangeEnd = endOfMonth(prev); break;\r\n      }\r\n      case 'thisQuarter': {\r\n        const { start, end } = getQuarterRange(now);\r\n        rangeStart = start; rangeEnd = end; break;\r\n      }\r\n      case 'thisYear':\r\n        rangeStart = startOfYear(now); rangeEnd = endOfYear(now); break;\r\n      case 'custom':\r\n        rangeStart = f.startDate ? new Date(f.startDate) : null;\r\n        rangeEnd   = f.endDate   ? new Date(`${f.endDate}T23:59:59.999`) : null;\r\n        break;\r\n      default:\r\n        rangeStart = null; rangeEnd = null; break;\r\n    }\r\n\r\n    return list.filter((r) => {\r\n      if (f.dateRange !== 'all' && (rangeStart || rangeEnd)) {\r\n        const d = parseISODate(r.date);\r\n        if (!d) return false;\r\n        if (rangeStart && d < rangeStart) return false;\r\n        if (rangeEnd   && d > rangeEnd) return false;\r\n      }\r\n\r\n      if (cat && (r.category || '').toLowerCase() !== cat) return false;\r\n\r\n      if (dep) {\r\n        const rowDep = (r.department || '').toLowerCase();\r\n        if (rowDep !== dep) return false;\r\n      }\r\n\r\n      if (sta) {\r\n        const rowSta = (r.status || r.estado || '').toLowerCase();\r\n        const aliases = {\r\n          pendiente: ['pendiente','pending'],\r\n          aprobado:  ['aprobado','approved'],\r\n          autorizado:['autorizado','authorized'],\r\n          rechazado: ['rechazado','rejected'],\r\n          pagado:    ['pagado','paid'],\r\n          programado:['programado','scheduled'],\r\n        };\r\n        const wanted = aliases[sta] || [sta];\r\n        if (!wanted.includes(rowSta)) return false;\r\n      }\r\n\r\n      if (proj) {\r\n        const pname = (r.project?.name || '').toLowerCase();\r\n        const pcode = (r.project?.code || '').toLowerCase();\r\n        if (!pname.includes(proj) && !pcode.includes(proj)) return false;\r\n      }\r\n\r\n      const amt = toNumber(r.amount);\r\n      if (min !== null && (amt === null || amt < min)) return false;\r\n      if (max !== null && (amt === null || amt > max)) return false;\r\n\r\n      if (term) {\r\n        const hit =\r\n          (r.description || '').toLowerCase().includes(term) ||\r\n          (r.category || '').toLowerCase().includes(term) ||\r\n          (r.requestedBy || '').toLowerCase().includes(term) ||\r\n          (r.project?.name || '').toLowerCase().includes(term) ||\r\n          (r.project?.code || '').toLowerCase().includes(term);\r\n        if (!hit) return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  };\r\n\r\n  const filteredRows = useMemo(() => applyFilters(rows), [rows, externalFilters]);\r\n\r\n  /* ================= Ordenamiento ================= */\r\n  const handleSort = (key) => {\r\n    setSortConfig((prev) => ({\r\n      key,\r\n      direction: prev?.key === key && prev?.direction === 'asc' ? 'desc' : 'asc',\r\n    }));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const sortedRows = useMemo(() => {\r\n    const list = [...filteredRows];\r\n    const { key, direction } = sortConfig || {};\r\n    if (!key) return list;\r\n    return list.sort((a, b) => {\r\n      if (key === 'date') {\r\n        const aTime = parseISODate(a.date)?.getTime() ?? -Infinity;\r\n        const bTime = parseISODate(b.date)?.getTime() ?? -Infinity;\r\n        return direction === 'asc' ? aTime - bTime : bTime - aTime;\r\n      }\r\n      if (key === 'amount') {\r\n        const an = toNumber(a.amount) ?? -Infinity;\r\n        const bn = toNumber(b.amount) ?? -Infinity;\r\n        return direction === 'asc' ? an - bn : bn - an;\r\n      }\r\n      return 0;\r\n    });\r\n  }, [filteredRows, sortConfig]);\r\n\r\n  // Paginaci√≥n\r\n  const totalItems = sortedRows.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedRows = sortedRows.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  /* ================= Selecci√≥n ================= */\r\n  const toggleOne = (id) => {\r\n    setSelectedIds((prev) => (prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]));\r\n  };\r\n  const toggleAll = () => {\r\n    const pageIds = paginatedRows.map((r) => r.id);\r\n    const allSelected = pageIds.every((id) => selectedIds.includes(id));\r\n    if (allSelected) {\r\n      setSelectedIds((prev) => prev.filter((id) => !pageIds.includes(id)));\r\n    } else {\r\n      setSelectedIds((prev) => Array.from(new Set([...prev, ...pageIds])));\r\n    }\r\n  };\r\n\r\n  /* ======= Ver / Autorizar / Eliminar ======= */\r\n  const handleOpenView = (row) => {\r\n    setSelectedExpense({\r\n      id: row.id,\r\n      description: row.description || '‚Äî',\r\n      amount: formatCurrency(row.amount),\r\n      category: row.category || '‚Äî',\r\n      project: row.project?.name || row.project?.code || '‚Äî',\r\n      date: formatDate(row.date),\r\n      requestedBy: row.requestedBy || '‚Äî',\r\n    });\r\n    setShowAuthModal(true);\r\n  };\r\n\r\n  // üî¥ AQU√ç EL CAMBIO IMPORTANTE PARA QUE SE ACTUALICE A \"AUTORIZADO\"\r\n  const handleAuthorizePayment = async ({\r\n    id,\r\n    authorizationLevel,\r\n    approverComments,\r\n    paymentMethod,\r\n    scheduledDate,\r\n    priority,\r\n    requiresAdditionalApproval,\r\n    // ... lo que m√°s te mande el modal, lo ignoramos si no se usa\r\n  }) => {\r\n    if (!id) return;\r\n    const expenseId = id;\r\n\r\n    const payload = {\r\n      estado: 'Autorizado',\r\n      status: 'authorized',\r\n      paymentStatus: 'authorized',\r\n      autorizacion: {\r\n        nivel: authorizationLevel,\r\n        comentariosAprobador: approverComments,\r\n        metodoPago: paymentMethod,\r\n        fechaProgramada: scheduledDate,\r\n        prioridad: priority,\r\n        requiereAprobacionAdicional: !!requiresAdditionalApproval,\r\n        fechaAutorizacion: new Date().toISOString(),\r\n      },\r\n    };\r\n\r\n    // Optimistic update: cambiar estado en la tabla al instante\r\n    setRemoteRows((prev) =>\r\n      prev.map((d) => {\r\n        const _id = d.id ?? d._id ?? d.gastoId;\r\n        if (String(_id) !== String(expenseId)) return d;\r\n        return {\r\n          ...d,\r\n          ...payload,\r\n          autorizacion: { ...(d.autorizacion || {}), ...payload.autorizacion },\r\n        };\r\n      })\r\n    );\r\n\r\n    try {\r\n      await finanzasService.updateGasto(expenseId, payload);\r\n    } catch (e) {\r\n      console.error(e);\r\n      // si quieres, puedes revertir el cambio ac√° guardando un snapshot antes\r\n    }\r\n  };\r\n\r\n  const handleDeleteExpense = async (expenseId) => {\r\n    const snapshot = remoteRows;\r\n    setRemoteRows((p) => p.filter((d) => String(d.id ?? d._id ?? d.gastoId) !== String(expenseId)));\r\n    try { await deleteGasto(expenseId); } catch (e) { console.error(e); setRemoteRows(snapshot); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n      {loading && remoteRows.length === 0 && (\r\n        <div className=\"p-4 text-sm text-muted-foreground\">Cargando gastos‚Ä¶</div>\r\n      )}\r\n      {!!errorMsg && <div className=\"p-4 text-sm text-red-600\">{errorMsg}</div>}\r\n\r\n      {/* Desktop */}\r\n      <div className=\"hidden lg:block overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-muted/50\">\r\n            <tr>\r\n              <th className=\"w-12 p-4\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={paginatedRows.length > 0 && paginatedRows.every((r) => selectedIds.includes(r.id))}\r\n                  onChange={toggleAll}\r\n                  className=\"rounded border-border\"\r\n                />\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('date')} className=\"flex items-center gap-1 hover:text-primary\">\r\n                  <span>Fecha</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Categor√≠a</th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Descripci√≥n</th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('amount')} className=\"flex items-center gap-1 hover:text-primary\">\r\n                  <span>Monto</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Estado</th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Proyecto</th>\r\n              <th className=\"w-20 p-4 font-medium text-foreground\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {paginatedRows.map((r) => (\r\n              <tr key={r.id} className=\"border-b border-border hover:bg-muted/30 transition-smooth\">\r\n                <td className=\"p-4\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedIds.includes(r.id)}\r\n                    onChange={() => toggleOne(r.id)}\r\n                    className=\"rounded border-border\"\r\n                  />\r\n                </td>\r\n                <td className=\"p-4\"><div className=\"text-sm text-foreground\">{formatDate(r.date)}</div></td>\r\n                <td className=\"p-4\"><div className=\"text-sm text-foreground\">{r.category || '‚Äî'}</div></td>\r\n                <td className=\"p-4\"><div className=\"text-sm text-foreground\">{r.description || '‚Äî'}</div></td>\r\n                <td className=\"p-4\"><div className=\"text-foreground font-medium\">{formatCurrency(r.amount)}</div></td>\r\n                <td className=\"p-4\">\r\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${getExpenseStatusColor(r.status || r.estado)}`}>\r\n                    {r.status?.toString().toLowerCase() === 'authorized' || r.estado?.toString().toLowerCase() === 'autorizado'\r\n                      ? 'Autorizado'\r\n                      : r.status || r.estado || '‚Äî'}\r\n                  </span>\r\n                </td>\r\n                <td className=\"p-4\">\r\n                  <div className=\"text-sm\">\r\n                    <div className=\"text-foreground\">{r.project?.name || r.project?.code || '‚Äî'}</div>\r\n                    {!!r.project?.code && <div className=\"text-muted-foreground text-xs\">{r.project.code}</div>}\r\n                  </div>\r\n                </td>\r\n                <td className=\"p-4\">\r\n                  <div className=\"flex items-center gap-1\">\r\n                    <Button variant=\"ghost\" size=\"icon\" title=\"Ver\" onClick={() => handleOpenView(r)}>\r\n                      <Icon name=\"Eye\" size={16} />\r\n                    </Button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {paginatedRows.length === 0 && !loading && (\r\n              <tr><td colSpan={8} className=\"p-8 text-center text-muted-foreground\">No hay gastos para mostrar.</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* Paginaci√≥n Desktop */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n            <span className=\"text-xs text-muted-foreground ml-3\">\r\n              Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n            <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* M√≥vil */}\r\n      <div className=\"lg:hidden\">\r\n        {paginatedRows.map((r) => (\r\n          <div key={r.id} className=\"border-b border-border p-4\">\r\n            <div className=\"flex items-start justify-between mb-2\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedIds.includes(r.id)}\r\n                  onChange={() => toggleOne(r.id)}\r\n                  className=\"rounded border-border\"\r\n                />\r\n                <div>\r\n                  <div className=\"text-sm text-foreground font-medium\">{r.project?.name || r.project?.code || '‚Äî'}</div>\r\n                  {!!r.project?.code && <div className=\"text-xs text-muted-foreground\">{r.project.code}</div>}\r\n                </div>\r\n              </div>\r\n              <span className={`px-2 py-1 rounded-full text-xs font-medium ${getExpenseStatusColor(r.status || r.estado)}`}>\r\n                {r.status?.toString().toLowerCase() === 'authorized' || r.estado?.toString().toLowerCase() === 'autorizado'\r\n                  ? 'Autorizado'\r\n                  : r.status || r.estado || '‚Äî'}\r\n              </span>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-3 mb-2\">\r\n              <div><div className=\"text-xs text-muted-foreground\">Fecha</div><div className=\"text-sm text-foreground\">{formatDate(r.date)}</div></div>\r\n              <div><div className=\"text-xs text-muted-foreground\">Monto</div><div className=\"text-sm text-foreground font-medium\">{formatCurrency(r.amount)}</div></div>\r\n              <div><div className=\"text-xs text-muted-foreground\">Categor√≠a</div><div className=\"text-sm text-foreground\">{r.category || '‚Äî'}</div></div>\r\n              <div><div className=\"text-xs text-muted-foreground\">Proyecto</div><div className=\"text-sm text-foreground\">{r.project?.name || r.project?.code || '‚Äî'}</div></div>\r\n            </div>\r\n\r\n            <div className=\"mt-3 flex items-center gap-1\">\r\n              <Button variant=\"ghost\" size=\"icon\" title=\"Ver\" onClick={() => handleOpenView(r)}>\r\n                <Icon name=\"Eye\" size={16} />\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {/* Paginaci√≥n Mobile */}\r\n        <div className=\"flex flex-col gap-3 p-4 border-t border-border\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {totalItems === 0 ? '0 de 0' : `${startIndex + 1}-${endIndex} de ${totalItems}`}\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n              <span className=\"px-2 text-sm text-foreground\">{currentPage}/{totalPages}</span>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      <PaymentAuthorizationModal\r\n        isOpen={showAuthModal}\r\n        onClose={() => setShowAuthModal(false)}\r\n        expense={selectedExpense}\r\n        onAuthorize={handleAuthorizePayment}\r\n        onDelete={handleDeleteExpense}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExpenseTable;\r\n","import React from 'react';\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst FinancialSummaryWidget = ({ summaryData }) => {\r\n  const COLORS = ['#2563EB', '#059669', '#F59E0B', '#DC2626', '#8B5CF6'];\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    })?.format(amount);\r\n  };\r\n\r\n  const getVarianceColor = (variance) => {\r\n    if (variance > 0) return 'text-success';\r\n    if (variance < 0) return 'text-error';\r\n    return 'text-muted-foreground';\r\n  };\r\n\r\n  const getVarianceIcon = (variance) => {\r\n    if (variance > 0) return 'TrendingUp';\r\n    if (variance < 0) return 'TrendingDown';\r\n    return 'Minus';\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n      {/* Financial Overview Cards */}\r\n      <div className=\"space-y-4\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Resumen Financiero</h3>\r\n        \r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div className=\"bg-card border border-border rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Ingresos Totales</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{formatCurrency(summaryData?.totalRevenue)}</p>\r\n                <div className=\"flex items-center space-x-1 mt-1\">\r\n                  <Icon \r\n                    name={getVarianceIcon(summaryData?.revenueVariance)} \r\n                    size={14} \r\n                    className={getVarianceColor(summaryData?.revenueVariance)}\r\n                  />\r\n                  <span className={`text-xs ${getVarianceColor(summaryData?.revenueVariance)}`}>\r\n                    {summaryData?.revenueVariance > 0 ? '+' : ''}{summaryData?.revenueVariance}%\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-success/10 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"TrendingUp\" size={24} className=\"text-success\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-card border border-border rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Gastos Totales</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{formatCurrency(summaryData?.totalExpenses)}</p>\r\n                <div className=\"flex items-center space-x-1 mt-1\">\r\n                  <Icon \r\n                    name={getVarianceIcon(summaryData?.expenseVariance)} \r\n                    size={14} \r\n                    className={getVarianceColor(-summaryData?.expenseVariance)}\r\n                  />\r\n                  <span className={`text-xs ${getVarianceColor(-summaryData?.expenseVariance)}`}>\r\n                    {summaryData?.expenseVariance > 0 ? '+' : ''}{summaryData?.expenseVariance}%\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-error/10 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"TrendingDown\" size={24} className=\"text-error\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-card border border-border rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Margen Neto</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{formatCurrency(summaryData?.netMargin)}</p>\r\n                <div className=\"flex items-center space-x-1 mt-1\">\r\n                  <Icon \r\n                    name={getVarianceIcon(summaryData?.marginVariance)} \r\n                    size={14} \r\n                    className={getVarianceColor(summaryData?.marginVariance)}\r\n                  />\r\n                  <span className={`text-xs ${getVarianceColor(summaryData?.marginVariance)}`}>\r\n                    {summaryData?.marginPercentage}% del total\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"DollarSign\" size={24} className=\"text-primary\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-card border border-border rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-muted-foreground\">Pendientes Aprobaci√≥n</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{summaryData?.pendingApprovals}</p>\r\n                <div className=\"flex items-center space-x-1 mt-1\">\r\n                  <Icon name=\"Clock\" size={14} className=\"text-warning\" />\r\n                  <span className=\"text-xs text-warning\">\r\n                    {formatCurrency(summaryData?.pendingAmount)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"w-12 h-12 bg-warning/10 rounded-lg flex items-center justify-center\">\r\n                <Icon name=\"Clock\" size={24} className=\"text-warning\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Charts Section */}\r\n      <div className=\"space-y-6\">\r\n        {/* Monthly Expenses Chart */}\r\n        <div className=\"bg-card border border-border rounded-lg p-4\">\r\n          <h4 className=\"text-md font-semibold text-foreground mb-4\">Gastos Mensuales</h4>\r\n          <div className=\"h-48\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <BarChart data={summaryData?.monthlyExpenses}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--color-border)\" />\r\n                <XAxis \r\n                  dataKey=\"month\" \r\n                  stroke=\"var(--color-muted-foreground)\"\r\n                  fontSize={12}\r\n                />\r\n                <YAxis \r\n                  stroke=\"var(--color-muted-foreground)\"\r\n                  fontSize={12}\r\n                  tickFormatter={(value) => `$${(value / 1000)?.toFixed(0)}K`}\r\n                />\r\n                <Tooltip \r\n                  formatter={(value) => [formatCurrency(value), 'Gastos']}\r\n                  labelStyle={{ color: 'var(--color-foreground)' }}\r\n                  contentStyle={{ \r\n                    backgroundColor: 'var(--color-popover)',\r\n                    border: '1px solid var(--color-border)',\r\n                    borderRadius: '6px'\r\n                  }}\r\n                />\r\n                <Bar dataKey=\"amount\" fill=\"var(--color-primary)\" radius={[4, 4, 0, 0]} />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Expense Categories Pie Chart */}\r\n        <div className=\"bg-card border border-border rounded-lg p-4\">\r\n          <h4 className=\"text-md font-semibold text-foreground mb-4\">Distribuci√≥n por Categor√≠a</h4>\r\n          <div className=\"h-48\">\r\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n              <PieChart>\r\n                <Pie\r\n                  data={summaryData?.expenseCategories}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  innerRadius={40}\r\n                  outerRadius={80}\r\n                  paddingAngle={5}\r\n                  dataKey=\"value\"\r\n                >\r\n                  {summaryData?.expenseCategories?.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={COLORS?.[index % COLORS?.length]} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip \r\n                  formatter={(value) => [formatCurrency(value), 'Monto']}\r\n                  contentStyle={{ \r\n                    backgroundColor: 'var(--color-popover)',\r\n                    border: '1px solid var(--color-border)',\r\n                    borderRadius: '6px'\r\n                  }}\r\n                />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n          <div className=\"grid grid-cols-2 gap-2 mt-4\">\r\n            {summaryData?.expenseCategories?.map((category, index) => (\r\n              <div key={category?.name} className=\"flex items-center space-x-2\">\r\n                <div \r\n                  className=\"w-3 h-3 rounded-full\"\r\n                  style={{ backgroundColor: COLORS?.[index % COLORS?.length] }}\r\n                />\r\n                <span className=\"text-xs text-muted-foreground\">{category?.name}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinancialSummaryWidget;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst ReceiptManagementPanel = ({ receipts, onUpload, onDelete, onCategorize }) => {\r\n  const [selectedReceipt, setSelectedReceipt] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterCategory, setFilterCategory] = useState('');\r\n\r\n  const categoryOptions = [\r\n    { value: '', label: 'Todas las Categor√≠as' },\r\n    { value: 'Viajes', label: 'Viajes' },\r\n    { value: 'Materiales', label: 'Materiales' },\r\n    { value: 'Servicios', label: 'Servicios' },\r\n    { value: 'Equipos', label: 'Equipos' },\r\n    { value: 'Otros', label: 'Otros' }\r\n  ];\r\n\r\n  const handleFileUpload = async (event) => {\r\n    const files = Array.from(event?.target?.files);\r\n    if (files?.length === 0) return;\r\n\r\n    setIsUploading(true);\r\n    setUploadProgress(0);\r\n\r\n    try {\r\n      for (let i = 0; i < files?.length; i++) {\r\n        const file = files?.[i];\r\n        \r\n        // Simulate upload progress\r\n        for (let progress = 0; progress <= 100; progress += 10) {\r\n          setUploadProgress(progress);\r\n          await new Promise(resolve => setTimeout(resolve, 100));\r\n        }\r\n\r\n        const newReceipt = {\r\n          id: Date.now() + i,\r\n          name: file?.name,\r\n          size: file?.size,\r\n          type: file?.type,\r\n          uploadDate: new Date()?.toLocaleDateString('es-MX'),\r\n          category: 'Sin Categorizar',\r\n          status: 'Pendiente',\r\n          url: URL.createObjectURL(file)\r\n        };\r\n\r\n        await onUpload(newReceipt);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading files:', error);\r\n    } finally {\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  const handleCategorize = async (receiptId, category) => {\r\n    try {\r\n      await onCategorize(receiptId, category);\r\n    } catch (error) {\r\n      console.error('Error categorizing receipt:', error);\r\n    }\r\n  };\r\n\r\n  const getFileIcon = (type) => {\r\n    if (type?.includes('image')) return 'Image';\r\n    if (type?.includes('pdf')) return 'FileText';\r\n    if (type?.includes('excel') || type?.includes('spreadsheet')) return 'FileSpreadsheet';\r\n    return 'File';\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    let i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i))?.toFixed(2)) + ' ' + sizes?.[i];\r\n  };\r\n\r\n  const filteredReceipts = receipts?.filter(receipt => {\r\n    const matchesSearch = receipt?.name?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||\r\n                         receipt?.category?.toLowerCase()?.includes(searchTerm?.toLowerCase());\r\n    const matchesCategory = filterCategory === '' || receipt?.category === filterCategory;\r\n    return matchesSearch && matchesCategory;\r\n  });\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n      <div className=\"p-6 border-b border-border\">\r\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Gesti√≥n de Recibos</h3>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Subir, categorizar y gestionar documentos de gastos\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-3\">\r\n            <input\r\n              type=\"file\"\r\n              id=\"receipt-upload\"\r\n              multiple\r\n              accept=\".pdf,.jpg,.jpeg,.png,.xlsx,.xls\"\r\n              onChange={handleFileUpload}\r\n              className=\"hidden\"\r\n            />\r\n            <Button\r\n              variant=\"default\"\r\n              onClick={() => document.getElementById('receipt-upload')?.click()}\r\n              disabled={isUploading}\r\n              iconName=\"Upload\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Subir Recibos\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Upload Progress */}\r\n        {isUploading && (\r\n          <div className=\"mt-4\">\r\n            <div className=\"flex items-center justify-between text-sm text-muted-foreground mb-2\">\r\n              <span>Subiendo archivos...</span>\r\n              <span>{uploadProgress}%</span>\r\n            </div>\r\n            <div className=\"w-full bg-muted rounded-full h-2\">\r\n              <div \r\n                className=\"bg-primary h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${uploadProgress}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Search and Filter */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n          <div className=\"relative\">\r\n            <Input\r\n              type=\"search\"\r\n              placeholder=\"Buscar recibos...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e?.target?.value)}\r\n              className=\"pl-10\"\r\n            />\r\n            <Icon \r\n              name=\"Search\" \r\n              size={16} \r\n              className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n            />\r\n          </div>\r\n\r\n          <Select\r\n            placeholder=\"Filtrar por categor√≠a\"\r\n            options={categoryOptions}\r\n            value={filterCategory}\r\n            onChange={setFilterCategory}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"p-6\">\r\n        {filteredReceipts?.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <Icon name=\"FileX\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n            <h4 className=\"text-lg font-medium text-foreground mb-2\">No hay recibos</h4>\r\n            <p className=\"text-muted-foreground mb-4\">\r\n              {searchTerm || filterCategory ? 'No se encontraron recibos con los filtros aplicados' : 'Comience subiendo sus primeros recibos'}\r\n            </p>\r\n            {!searchTerm && !filterCategory && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => document.getElementById('receipt-upload')?.click()}\r\n                iconName=\"Upload\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Subir Primer Recibo\r\n              </Button>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {filteredReceipts?.map((receipt) => (\r\n              <div key={receipt?.id} className=\"border border-border rounded-lg p-4 hover:shadow-md transition-smooth\">\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-10 h-10 bg-muted rounded-lg flex items-center justify-center\">\r\n                      <Icon name={getFileIcon(receipt?.type)} size={20} className=\"text-muted-foreground\" />\r\n                    </div>\r\n                    <div className=\"min-w-0 flex-1\">\r\n                      <h4 className=\"text-sm font-medium text-foreground truncate\">{receipt?.name}</h4>\r\n                      <p className=\"text-xs text-muted-foreground\">{formatFileSize(receipt?.size)}</p>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      onClick={() => setSelectedReceipt(receipt)}\r\n                      className=\"h-8 w-8\"\r\n                    >\r\n                      <Icon name=\"Eye\" size={14} />\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      onClick={() => onDelete(receipt?.id)}\r\n                      className=\"h-8 w-8 text-error hover:text-error\"\r\n                    >\r\n                      <Icon name=\"Trash2\" size={14} />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center justify-between text-xs\">\r\n                    <span className=\"text-muted-foreground\">Fecha:</span>\r\n                    <span className=\"text-foreground\">{receipt?.uploadDate}</span>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center justify-between text-xs\">\r\n                    <span className=\"text-muted-foreground\">Estado:</span>\r\n                    <span className={`px-2 py-1 rounded-full ${\r\n                      receipt?.status === 'Procesado' ? 'bg-success text-success-foreground' :\r\n                      receipt?.status === 'En Revisi√≥n' ? 'bg-warning text-warning-foreground' :\r\n                      'bg-muted text-muted-foreground'\r\n                    }`}>\r\n                      {receipt?.status}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"pt-2\">\r\n                    <Select\r\n                      placeholder=\"Categorizar\"\r\n                      options={categoryOptions?.filter(opt => opt?.value !== '')}\r\n                      value={receipt?.category === 'Sin Categorizar' ? '' : receipt?.category}\r\n                      onChange={(value) => handleCategorize(receipt?.id, value)}\r\n                      className=\"text-xs\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {/* Receipt Preview Modal */}\r\n      {selectedReceipt && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n          <div className=\"bg-card rounded-lg shadow-lg max-w-4xl w-full max-h-[90vh] overflow-hidden\">\r\n            <div className=\"flex items-center justify-between p-4 border-b border-border\">\r\n              <h3 className=\"text-lg font-semibold text-foreground\">{selectedReceipt?.name}</h3>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={() => setSelectedReceipt(null)}\r\n              >\r\n                <Icon name=\"X\" size={20} />\r\n              </Button>\r\n            </div>\r\n            \r\n            <div className=\"p-4 h-96 flex items-center justify-center bg-muted\">\r\n              {selectedReceipt?.type?.includes('image') ? (\r\n                <img \r\n                  src={selectedReceipt?.url} \r\n                  alt={selectedReceipt?.name}\r\n                  className=\"max-w-full max-h-full object-contain\"\r\n                />\r\n              ) : (\r\n                <div className=\"text-center\">\r\n                  <Icon name={getFileIcon(selectedReceipt?.type)} size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                  <p className=\"text-muted-foreground\">Vista previa no disponible para este tipo de archivo</p>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    className=\"mt-4\"\r\n                    onClick={() => window.open(selectedReceipt?.url, '_blank')}\r\n                    iconName=\"ExternalLink\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Abrir Archivo\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReceiptManagementPanel;","// modules/finanzas/NewExpenseModal.jsx\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport useFinanzas from '../../../hooks/useFinanzas';\r\nimport useProyect from '../../../hooks/useProyect';\r\n\r\nconst NewExpenseModal = ({ isOpen, onClose, onSubmit }) => {\r\n  const { createGasto, loading: loadingFinanzas } = useFinanzas();\r\n  const { getProyectos, proyectos, loading: loadingProyectos } = useProyect();\r\n\r\n  const [formData, setFormData] = useState({\r\n    date: new Date().toISOString().split('T')[0],\r\n    time: new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' }),\r\n    category: '',\r\n    description: '',\r\n    amount: '',\r\n    currency: 'MXN',\r\n    projectId: '',\r\n    projectName: '',\r\n    projectCode: '',\r\n    vendor: '',\r\n    requestedBy: '',\r\n    paymentMethod: 'Transferencia',\r\n    priority: 'Media',\r\n    departmentBudget: '',\r\n    notes: '',\r\n    receiptRequired: true,\r\n    authorizedBy: '',\r\n    dueDate: '',\r\n    taxDeductible: true,\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const categories = [\r\n    'Materiales','Viajes','N√≥mina','Equipos','Proveedores','Servicios',\r\n    'Oficina','Marketing','Capacitaci√≥n','Transporte','Mantenimiento','Otro'\r\n  ];\r\n  const currencies = ['MXN', 'USD', 'EUR'];\r\n  const paymentMethods = ['Transferencia','Cheque','Efectivo','Tarjeta Corporativa','Facturaci√≥n Directa'];\r\n  const priorities = ['Baja','Media','Alta','Urgente'];\r\n  const departmentBudgets = ['Operaciones','Proyectos','Administraci√≥n','Ventas','Recursos Humanos','IT','General'];\r\n\r\n  // Cargar proyectos solo al abrir el modal y si a√∫n no los tenemos\r\n  useEffect(() => {\r\n    if (isOpen && Array.isArray(proyectos) && proyectos.length === 0) {\r\n      getProyectos().catch(() => {});\r\n    }\r\n  }, [isOpen, getProyectos, proyectos]);\r\n\r\n  // Opciones del select de proyectos (SOLO nombre visible)\r\n  const projectOptions = useMemo(() => {\r\n    const list = Array.isArray(proyectos) ? proyectos : [];\r\n    return list.map((p) => {\r\n      const id =\r\n        p.id ??\r\n        p.Id ??\r\n        p._id ??\r\n        p.proyectoId ??\r\n        p.codigo ??\r\n        p.code;\r\n\r\n      const nombre =\r\n        p.nombreProyecto ??\r\n        p.nombre ??\r\n        p.name ??\r\n        p.titulo ??\r\n        p.descripcion ??\r\n        'Proyecto';\r\n\r\n      const codigo = p.codigo ?? p.code ?? p.clave ?? p.projectCode ?? '';\r\n\r\n      return {\r\n        value: String(id ?? nombre), // fallback seguro por si no hay id\r\n        label: nombre,               // ‚áê SOLO nombre\r\n        raw: { id, nombre, codigo },\r\n      };\r\n    });\r\n  }, [proyectos]);\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    if (!formData.date) newErrors.date = 'La fecha es requerida';\r\n    if (!formData.category) newErrors.category = 'La categor√≠a es requerida';\r\n    if (!formData.description.trim()) newErrors.description = 'La descripci√≥n es requerida';\r\n\r\n    const normalized = String(formData.amount ?? '').replace(/,/g, '');\r\n    if (!normalized) newErrors.amount = 'El monto es requerido';\r\n    else if (isNaN(parseFloat(normalized)) || parseFloat(normalized) <= 0)\r\n      newErrors.amount = 'El monto debe ser un n√∫mero v√°lido mayor a 0';\r\n\r\n    if (!formData.requestedBy.trim()) newErrors.requestedBy = 'El solicitante es requerido';\r\n    if (!formData.projectId) newErrors.project = 'El proyecto es requerido';\r\n    if (!formData.departmentBudget) newErrors.departmentBudget = 'El presupuesto departamental es requerido';\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData((prev) => ({ ...prev, [field]: value }));\r\n    if (errors[field]) setErrors((prev) => ({ ...prev, [field]: '' }));\r\n  };\r\n\r\n  // Selecci√≥n de proyecto: guarda id, nombre y (auto) c√≥digo\r\n  const handleProjectChange = (value) => {\r\n    const opt = projectOptions.find((o) => o.value === value);\r\n    const id = opt?.raw?.id ?? value;\r\n    const nombre = opt?.raw?.nombre ?? '';\r\n    const codigo = opt?.raw?.codigo ?? '';\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      projectId: String(id ?? ''),\r\n      projectName: nombre,\r\n      projectCode: codigo,\r\n    }));\r\n    if (errors.project) setErrors((prev) => ({ ...prev, project: '' }));\r\n  };\r\n\r\n  // Monto con limpieza suave\r\n  const handleAmountChange = (e) => {\r\n    const raw = e?.target?.value ?? '';\r\n    const sanitized = raw.replace(/[^\\d.,]/g, '');\r\n    const normalized = sanitized.replace(/,/g, '').replace(/(\\..*)\\./g, '$1');\r\n    setFormData((prev) => ({ ...prev, amount: normalized }));\r\n    if (errors.amount) setErrors((prev) => ({ ...prev, amount: '' }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validateForm()) return;\r\n\r\n    const amountNumber = parseFloat(String(formData.amount).replace(/,/g, ''));\r\n    const payload = {\r\n      fecha: formData.date,\r\n      hora: formData.time,\r\n      categoria: formData.category,\r\n      descripcion: formData.description,\r\n      monto: amountNumber,\r\n      moneda: formData.currency,\r\n      idProyecto: formData.projectId ? Number(formData.projectId) : null,\r\n      codigoProyecto: formData.projectCode || null,\r\n      proveedor: formData.vendor || null,\r\n      solicitadoPor: formData.requestedBy,\r\n      metodoPago: formData.paymentMethod,\r\n      prioridad: formData.priority,\r\n      presupuestoDepartamento: formData.departmentBudget,\r\n      notas: formData.notes || null,\r\n      requiereComprobante: !!formData.receiptRequired,\r\n      autorizadoPor: formData.authorizedBy || null,\r\n      fechaLimitePago: formData.dueDate || null,\r\n      deducibleImpuestos: !!formData.taxDeductible,\r\n    };\r\n\r\n    try {\r\n      const created = await createGasto(payload);\r\n\r\n      // üîÑ Normalizar respuesta para que la tabla pueda usarla directo\r\n      let newExpense = created;\r\n\r\n      // Si el backend env√≠a { data: {...} } o algo similar\r\n      if (created && typeof created === 'object') {\r\n        if (created.data && !Array.isArray(created.data)) {\r\n          newExpense = created.data;\r\n        } else if (created.item) {\r\n          newExpense = created.item;\r\n        }\r\n      }\r\n\r\n      // Fallback: usamos el payload + alg√∫n id\r\n      if (!newExpense || typeof newExpense !== 'object') {\r\n        newExpense = {\r\n          ...payload,\r\n          id: created?.id ?? created?._id ?? Date.now(),\r\n        };\r\n      } else {\r\n        // aseguramos campos m√≠nimos que usa ExpenseTable\r\n        newExpense = {\r\n          ...newExpense,\r\n          fecha: newExpense.fecha ?? payload.fecha,\r\n          categoria: newExpense.categoria ?? payload.categoria,\r\n          descripcion: newExpense.descripcion ?? payload.descripcion,\r\n          monto: newExpense.monto ?? payload.monto,\r\n          estado: newExpense.estado ?? newExpense.status ?? 'Pendiente',\r\n          idProyecto: newExpense.idProyecto ?? payload.idProyecto,\r\n          codigoProyecto: newExpense.codigoProyecto ?? payload.codigoProyecto,\r\n        };\r\n      }\r\n\r\n      // ‚úÖ Disparar evento global para que ExpenseTable lo agregue sin refrescar\r\n      if (typeof window !== 'undefined') {\r\n        window.dispatchEvent(\r\n          new CustomEvent('gasto:created', {\r\n            detail: newExpense,\r\n          })\r\n        );\r\n      }\r\n\r\n      // üëá notificar al padre (por si el contenedor tambi√©n necesita reaccionar)\r\n      if (typeof onSubmit === 'function') {\r\n        onSubmit(newExpense);\r\n      }\r\n\r\n      handleClose();\r\n    } catch (err) {\r\n      console.error('Error al crear gasto:', err);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      date: new Date().toISOString().split('T')[0],\r\n      time: new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' }),\r\n      category: '',\r\n      description: '',\r\n      amount: '',\r\n      currency: 'MXN',\r\n      projectId: '',\r\n      projectName: '',\r\n      projectCode: '',\r\n      vendor: '',\r\n      requestedBy: '',\r\n      paymentMethod: 'Transferencia',\r\n      priority: 'Media',\r\n      departmentBudget: '',\r\n      notes: '',\r\n      receiptRequired: true,\r\n      authorizedBy: '',\r\n      dueDate: '',\r\n      taxDeductible: true,\r\n    });\r\n    setErrors({});\r\n    onClose && onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n  const isBusy = loadingFinanzas || loadingProyectos;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-card rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        {/* Header (mismo dise√±o) */}\r\n        <div className=\"sticky top-0 bg-card border-b border-border p-6 rounded-t-lg\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-foreground\">Nuevo Gasto</h2>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                Registra un nuevo gasto para autorizaci√≥n\r\n              </p>\r\n            </div>\r\n            <Button variant=\"ghost\" size=\"icon\" onClick={handleClose} disabled={isBusy}>\r\n              <Icon name=\"X\" size={20} />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Formulario */}\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci√≥n del Gasto */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Receipt\" size={20} className=\"mr-2\" />\r\n                Informaci√≥n del Gasto\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"date\"\r\n                label=\"Fecha\"\r\n                value={formData.date}\r\n                onChange={(e) => handleInputChange('date', e.target.value)}\r\n                error={errors?.date}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"time\"\r\n                label=\"Hora\"\r\n                value={formData.time}\r\n                onChange={(e) => handleInputChange('time', e.target.value)}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Categor√≠a\"\r\n                value={formData.category}\r\n                onChange={(value) => handleInputChange('category', value)}\r\n                error={errors?.category}\r\n                options={categories.map((c) => ({ value: c, label: c }))}\r\n                placeholder=\"Selecciona una categor√≠a\"\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Prioridad\"\r\n                value={formData.priority}\r\n                onChange={(value) => handleInputChange('priority', value)}\r\n                options={priorities.map((p) => ({ value: p, label: p }))}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Descripci√≥n\"\r\n                placeholder=\"Ej. Compra de materiales para instalaci√≥n HVAC\"\r\n                value={formData.description}\r\n                onChange={(e) => handleInputChange('description', e.target.value)}\r\n                error={errors?.description}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            {/* Informaci√≥n Financiera */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"DollarSign\" size={20} className=\"mr-2\" />\r\n                Informaci√≥n Financiera\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"text\"\r\n                inputMode=\"decimal\"\r\n                label=\"Monto\"\r\n                placeholder=\"Ej. 2500.00\"\r\n                value={formData.amount}\r\n                onChange={handleAmountChange}\r\n                error={errors?.amount}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Moneda\"\r\n                value={formData.currency}\r\n                onChange={(value) => handleInputChange('currency', value)}\r\n                options={currencies.map((c) => ({ value: c, label: c }))}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"M√©todo de Pago\"\r\n                value={formData.paymentMethod}\r\n                onChange={(value) => handleInputChange('paymentMethod', value)}\r\n                options={paymentMethods.map((m) => ({ value: m, label: m }))}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Presupuesto Departamental\"\r\n                value={formData.departmentBudget}\r\n                onChange={(value) => handleInputChange('departmentBudget', value)}\r\n                error={errors?.departmentBudget}\r\n                options={departmentBudgets.map((d) => ({ value: d, label: d }))}\r\n                placeholder=\"Selecciona un departamento\"\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            {/* Informaci√≥n del Proyecto */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Folder\" size={20} className=\"mr-2\" />\r\n                Informaci√≥n del Proyecto\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Proyecto\"\r\n                value={formData.projectId}\r\n                onChange={handleProjectChange}\r\n                error={errors?.project}\r\n                options={projectOptions}\r\n                placeholder={loadingProyectos ? 'Cargando proyectos‚Ä¶' : 'Selecciona un proyecto'}\r\n                required\r\n                disabled={isBusy || loadingProyectos}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"C√≥digo de Proyecto\"\r\n                placeholder=\"Se completa autom√°ticamente\"\r\n                value={formData.projectCode}\r\n                onChange={(e) => handleInputChange('projectCode', e.target.value)}\r\n                readOnly\r\n                disabled\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Proveedor/Vendor\"\r\n                placeholder=\"Ej. Materiales Industriales SA\"\r\n                value={formData.vendor}\r\n                onChange={(e) => handleInputChange('vendor', e.target.value)}\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Solicitado por\"\r\n                placeholder=\"Ej. Carlos Mendoza\"\r\n                value={formData.requestedBy}\r\n                onChange={(e) => handleInputChange('requestedBy', e.target.value)}\r\n                error={errors?.requestedBy}\r\n                required\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            {/* Informaci√≥n Adicional */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"FileText\" size={20} className=\"mr-2\" />\r\n                Informaci√≥n Adicional\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Autorizado por\"\r\n                placeholder=\"Ej. Ana Garc√≠a\"\r\n                value={formData.authorizedBy}\r\n                onChange={(e) => handleInputChange('authorizedBy', e.target.value)}\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"date\"\r\n                label=\"Fecha L√≠mite de Pago\"\r\n                value={formData.dueDate}\r\n                onChange={(e) => handleInputChange('dueDate', e.target.value)}\r\n                disabled={isBusy}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"flex items-center gap-6\">\r\n                <label className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={formData.receiptRequired}\r\n                    onChange={(e) => handleInputChange('receiptRequired', e.target.checked)}\r\n                    className=\"h-4 w-4 text-primary focus:ring-primary border-border rounded\"\r\n                    disabled={isBusy}\r\n                  />\r\n                  <span className=\"text-sm text-foreground\">Comprobante requerido</span>\r\n                </label>\r\n\r\n                <label className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={formData.taxDeductible}\r\n                    onChange={(e) => handleInputChange('taxDeductible', e.target.checked)}\r\n                    className=\"h-4 w-4 text-primary focus:ring-primary border-border rounded\"\r\n                    disabled={isBusy}\r\n                  />\r\n                  <span className=\"text-sm text-foreground\">Deducible de impuestos</span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium text-foreground\">Notas Adicionales</label>\r\n                <textarea\r\n                  className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none bg-background text-foreground\"\r\n                  rows=\"4\"\r\n                  placeholder=\"Informaci√≥n adicional sobre el gasto...\"\r\n                  value={formData.notes}\r\n                  onChange={(e) => handleInputChange('notes', e.target.value)}\r\n                  disabled={isBusy}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-border\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={handleClose} disabled={isBusy}>\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"default\"\r\n              iconName={isBusy ? undefined : 'Plus'}\r\n              iconPosition=\"left\"\r\n              disabled={isBusy}\r\n              loading={isBusy}\r\n            >\r\n              {isBusy ? 'Guardando‚Ä¶' : 'Registrar Gasto'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewExpenseModal;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst ModalGestionCompra = ({ \r\n  isOpen, \r\n  onClose, \r\n  expense, \r\n  onAuthorize, \r\n  onDelete, \r\n  onDownload,\r\n  mode = 'edit'\r\n}) => {\r\n\r\n  const [authData, setAuthData] = useState({\r\n    paymentMethod: '',\r\n    priority: 'normal',\r\n    approverComments: '',\r\n    approvedBy: '',\r\n  });\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  // Opciones de selects\r\n  const paymentMethods = [\r\n  { value: 'efectivo', label: 'Efectivo' },\r\n  { value: 'transferencia_bancaria', label: 'Transferencia Bancaria' },\r\n  { value: 'cheque', label: 'Cheque' },\r\n  { value: 'tarjeta_corporativa', label: 'Tarjeta Corporativa' }\r\n];\r\n\r\n\r\n  const priorityOptions = [\r\n    { value: 'baja', label: 'Baja' },\r\n    { value: 'normal', label: 'Normal' },\r\n    { value: 'alta', label: 'Alta' },\r\n    { value: 'urgente', label: 'Urgente' }\r\n  ];\r\n\r\n  // Cargar datos si la orden ya est√° aprobada (modo view)\r\n  useEffect(() => {\r\n    if (expense) {\r\n      setAuthData({\r\n        paymentMethod: expense?.metodoPago || '',\r\n        priority: expense?.prioridadAprobacion || 'normal',\r\n        approverComments: expense?.comentariosAprobador || '',\r\n        approvedBy: expense?.aprobadoPor || '',\r\n      });\r\n    }\r\n  }, [expense]);\r\n\r\n  // Manejo de cambios en inputs\r\n  const handleInputChange = (field, value) => {\r\n    setAuthData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  // Enviar autorizaci√≥n al backend\r\n  const handleSubmit = async (e) => {\r\n  e?.preventDefault();\r\n  setIsSubmitting(true);\r\n\r\n  try {\r\n    const payload = {\r\n      decision: \"approved\",\r\n      metodoPago: authData.paymentMethod,\r\n      prioridad: authData.priority,\r\n      comentariosAprobador: authData.approverComments,\r\n      aprobadoPor: \"Juan P√©rez - Gerente\",\r\n    };\r\n\r\n    console.log(\"Enviando datos de aprobaci√≥n:\", payload);\r\n\r\n    // Llamar al callback que conecta con approveGasto()\r\n    await onAuthorize?.(expense?.id, payload);\r\n\r\n    onClose?.();\r\n  } catch (error) {\r\n    console.error(\"Error authorizing payment:\", error);\r\n  } finally {\r\n    setIsSubmitting(false);\r\n  }\r\n};\r\n\r\n\r\n\r\n  // Eliminar (enviar a rechazadas)\r\nconst handleDelete = async () => {\r\n  if (!expense?.id) return;\r\n\r\n  setIsDeleting(true);\r\n  try {\r\n    const payload = {\r\n      decision: \"rejected\",\r\n      comentariosAprobador: authData.approverComments || \"Pago rechazado por el aprobador.\",\r\n      aprobadoPor: \"Juan P√©rez - Gerente\",\r\n      prioridad: authData.priority,\r\n      metodoPago: authData.paymentMethod,\r\n    };\r\n\r\n    console.log(\"Enviando datos de rechazo:\", payload);\r\n    await onAuthorize?.(expense.id, payload, true);\r\n    onClose?.();\r\n  } catch (err) {\r\n    console.error(\"Error rechazando pago:\", err);\r\n  } finally {\r\n    setIsDeleting(false);\r\n  }\r\n};\r\n\r\n\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const isViewMode = mode === 'view';\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card rounded-lg shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">\r\n              {isViewMode ? 'Detalles de Autorizaci√≥n' : 'Autorizaci√≥n de Pago'}\r\n            </h2>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {isViewMode ? 'Visualiza los detalles del gasto autorizado' : 'Revisar y autorizar el gasto seleccionado'}\r\n            </p>\r\n          </div>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose} disabled={isSubmitting || isDeleting}>\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {/* Detalles del gasto */}\r\n          <div className=\"bg-muted rounded-lg p-4 space-y-3\">\r\n            <h3 className=\"font-medium text-foreground\">Detalles del Gasto</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n              <div>\r\n                <span className=\"text-muted-foreground\">C√≥digo Proyecto:</span>\r\n                <p className=\"text-foreground\">{expense?.project}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Proveedor:</span>\r\n                <p className=\"text-foreground\">{expense?.proveedor?.nombre || expense?.category}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Notas:</span>\r\n                <p className=\"text-foreground\">{expense?.notas || expense?.description}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Monto:</span>\r\n                <p className=\"text-foreground font-bold text-lg\">\r\n                  {new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(expense?.totalOrden || expense?.amount || 0)}\r\n                </p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Fecha de Creaci√≥n:</span>\r\n                <p className=\"text-foreground\">{expense?.fechaOrden?.split('T')[0]}</p>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Solicitante:</span>\r\n                <p className=\"text-foreground\">{expense?.creadoPor || 'Juan P√©rez'}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Detalles de Pago */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"CreditCard\" size={16} className=\"text-primary\" />\r\n              <h3 className=\"font-medium text-foreground\">Detalles de Pago</h3>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <Select\r\n                label=\"M√©todo de Pago\"\r\n                options={paymentMethods}\r\n                value={authData.paymentMethod}\r\n                onChange={(value) => handleInputChange('paymentMethod', value)}\r\n                disabled={isViewMode}\r\n                required\r\n              />\r\n              <Select\r\n                label=\"Prioridad\"\r\n                options={priorityOptions}\r\n                value={authData.priority}\r\n                onChange={(value) => handleInputChange('priority', value)}\r\n                disabled={isViewMode}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Comentarios */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm font-medium text-foreground\">Comentarios del Aprobador</label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent resize-none\"\r\n              rows={4}\r\n              placeholder=\"Agregue comentarios sobre la autorizaci√≥n...\"\r\n              value={authData.approverComments}\r\n              onChange={(e) => handleInputChange('approverComments', e?.target?.value)}\r\n              disabled={isViewMode}\r\n            />\r\n          </div>\r\n\r\n          {/* Botones */}\r\n          <div className=\"flex items-center justify-between pt-6 border-t border-border\">\r\n  {!isViewMode && (\r\n    <Button\r\n      type=\"button\"\r\n      variant=\"destructive\"\r\n      iconName=\"Ban\"\r\n      iconPosition=\"left\"\r\n      onClick={handleDelete}\r\n      disabled={isSubmitting || isDeleting}\r\n    >\r\n      {isDeleting ? 'Eliminando‚Ä¶' : 'Rechazar Pago'}\r\n    </Button>\r\n  )}\r\n\r\n  <div className=\"flex items-center space-x-3\">\r\n    {/* Bot√≥n para cerrar */}\r\n    <Button\r\n      type=\"button\"\r\n      variant=\"outline\"\r\n      onClick={onClose}\r\n      disabled={isSubmitting || isDeleting}\r\n    >\r\n      {isViewMode ? 'Cerrar' : 'Cancelar'}\r\n    </Button>\r\n    \r\n\r\n    {/* Bot√≥n para autorizar */}\r\n    {!isViewMode && (\r\n      <Button\r\n        type=\"submit\"\r\n        variant=\"success\"\r\n        loading={isSubmitting}\r\n        disabled={isDeleting}\r\n        iconName=\"Check\"\r\n        iconPosition=\"left\"\r\n      >\r\n        Autorizar Pago\r\n      </Button>\r\n    )}\r\n  </div>\r\n</div>\r\n\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalGestionCompra;\r\n","// services/gastosService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst gastosService = {\r\n  async getGastos() {\r\n    try {\r\n      const response = await httpService.get(\"/ordenCompra/todas\");\r\n      if (response?.data?.items) {\r\n        return response.data.items;\r\n      }\r\n      return response.data || response;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener √≥rdenes de compra:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateGastos(id, payload) {\r\n    try {\r\n      const data = await httpService.put(`/ordenCompra/editar/${id}`, payload);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al actualizar la orden con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async approveGasto(id, payload) {\r\n    try {\r\n      const data = await httpService.put(`/ordenCompra/aprobar/${id}`, payload);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(`Error al aprobar la orden con ID ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default gastosService;\r\n","import { useCallback } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport gastosService from \"../services/gastosService\";\r\n\r\nconst useGastos = () => {\r\n  const { showSuccess, showError } = useNotifications();\r\n\r\n  // Obtener lista de gastos\r\n  const getGastos = useCallback(async () => {\r\n    try {\r\n      return await gastosService.getGastos();\r\n    } catch (error) {\r\n      console.error(\"Error al obtener los gastos:\", error);\r\n      showError(\"Error al obtener la lista de gastos.\");\r\n      throw error;\r\n    }\r\n  }, [showError]);\r\n\r\n  // Actualizar un gasto\r\n  const updateGasto = useCallback(async (id, payload) => {\r\n    try {\r\n      const response = await gastosService.updateGastos(id, payload);\r\n      showSuccess(\"Orden de compra aprobada correctamente\");\r\n      return response;\r\n    } catch (error) {\r\n      console.error(`Error al actualizar el gasto con ID ${id}:`, error);\r\n      showError(\"Error al actualizar el gasto.\");\r\n      throw error;\r\n    }\r\n  }, [showSuccess, showError]);\r\n\r\n  // Autorizar o rechazar gasto\r\n  const approveGasto = useCallback(async (id, payload) => {\r\n    try {\r\n      const response = await gastosService.approveGasto(id, payload);\r\n\r\n      if (payload.decision === \"rejected\") {\r\n        showSuccess(\"Orden de compra rechazada correctamente\");\r\n      } else {\r\n        showSuccess(\"Orden de compra autorizada correctamente\");\r\n      }\r\n\r\n      return response;\r\n    } catch (error) {\r\n      console.error(`Error al procesar el gasto con ID ${id}:`, error);\r\n      showError(\"Error al procesar la orden de compra.\");\r\n      throw error;\r\n    }\r\n  }, [showSuccess, showError]);\r\n\r\n  return { getGastos, updateGasto, approveGasto };\r\n};\r\n\r\nexport default useGastos;\r\n","// modules/finanzas/GastosTable.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Icon from \"../../../components/AppIcon\";\r\nimport Button from \"../../../components/ui/Button\";\r\nimport ModalGestionCompra from \"./ModalGestionCompra\";\r\nimport useProyect from \"../../../hooks/useProyect\";\r\nimport useGastos from \"../../../hooks/useGastos\";\r\nimport { jsPDF } from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\n\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return \"‚Äî\";\r\n  const d = new Date(date);\r\n  return isNaN(d)\r\n    ? \"‚Äî\"\r\n    : d.toLocaleDateString(\"es-MX\", {\r\n        day: \"2-digit\",\r\n        month: \"2-digit\",\r\n        year: \"numeric\",\r\n      });\r\n};\r\n\r\nconst formatCurrency = (amount) =>\r\n  new Intl.NumberFormat(\"es-MX\", {\r\n    style: \"currency\",\r\n    currency: \"MXN\",\r\n  }).format(amount || 0);\r\n\r\nconst getStatusColor = (status) => {\r\n  switch ((status || \"\").toLowerCase()) {\r\n    case \"pendiente\":\r\n    case \"pending\":\r\n      return \"text-yellow-600 bg-yellow-100\";\r\n    case \"aprobado\":\r\n    case \"approved\":\r\n      return \"text-blue-600 bg-blue-100\";\r\n    case \"autorizado\":\r\n    case \"received\":\r\n      return \"text-green-600 bg-green-100\";\r\n    case \"rechazado\":\r\n    case \"cancelled\":\r\n      return \"text-red-600 bg-red-100\";\r\n    case \"pagado\":\r\n    case \"paid\":\r\n      return \"text-emerald-700 bg-emerald-100\";\r\n    default:\r\n      return \"text-gray-600 bg-gray-100\";\r\n  }\r\n};\r\n\r\nconst matchesEstado = (estado, tab) => {\r\n  const e = (estado || \"\").toLowerCase();\r\n\r\n  if (tab === \"pendiente\") return e === \"pendiente\" || e === \"pending\";\r\n  if (tab === \"aprobado\") return e === \"aprobado\" || e === \"approved\";\r\n  if (tab === \"pagado\") return e === \"pagado\" || e === \"paid\";\r\n  if (tab === \"rechazado\") return e === \"rechazado\" || e === \"rejected\" || e === \"cancelled\";\r\n\r\n  return false;\r\n};\r\n\r\n\r\nconst GastosTable = ({ filters = {}, data = [] }) => {\r\n  const [ordenes, setOrdenes] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n  const [selectedOrden, setSelectedOrden] = useState(null);\r\n  const [showAuthModal, setShowAuthModal] = useState(false);\r\n  const [activeTab, setActiveTab] = useState(\"pendiente\");\r\n\r\n  const { getProyectos } = useProyect();\r\n  const { getGastos, updateGasto, approveGasto } = useGastos();\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    getProyectos().catch(() => {});\r\n  }, [getProyectos]);\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const data = await getGastos();\r\n        console.log(\"Datos obtenidos:\", data);\r\n        if (!alive) return;\r\n        setOrdenes(Array.isArray(data) ? data : data.data || []);\r\n      } catch (err) {\r\n        console.error(\"Error al cargar √≥rdenes:\", err);\r\n        setErrorMsg(\"No se pudieron cargar las √≥rdenes de compra.\");\r\n      } finally {\r\n        if (alive) setLoading(false);\r\n      }\r\n    })();\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [getGastos]);\r\n\r\n  const handleOpenView = (orden) => {\r\n  const adaptedExpense = {\r\n    id: orden.id,\r\n    notas: orden.notas || \"Sin descripci√≥n\",\r\n    totalOrden: orden.totalOrden || 0,\r\n    proveedor: orden.proveedor,\r\n    project: orden.numeroOrden,\r\n    fechaOrden: orden.fechaOrden,\r\n    creadoPor: orden.creadoPor,\r\n    estado: orden.estado,\r\n    metodoPago: orden.metodoPago,\r\n    prioridadAprobacion: orden.prioridadAprobacion,\r\n    comentariosAprobador: orden.comentariosAprobador,\r\n    aprobadoPor: orden.aprobadoPor,\r\n  };\r\n\r\n  setSelectedOrden(adaptedExpense);\r\n  setShowAuthModal(true);\r\n};\r\n\r\n\r\n// Si vienen datos externos desde FinanzasManagement, los usamos;\r\n// si no, usamos los que carg√≥ localmente el componente.\r\nconst baseOrders = Array.isArray(data) && data.length > 0 ? data : ordenes;\r\n\r\n// 1Ô∏è‚É£ Aplicar filtros generales (sin importar estado)\r\nconst filteredBySearch = baseOrders.filter((o) => {\r\n  const search = (filters.search || \"\").toLowerCase();\r\n  const codigo = (filters.codigo || \"\").toLowerCase();\r\n  const proveedor = (filters.proveedor || \"\").toLowerCase();\r\n  const fechaDesde = filters.fechaDesde ? new Date(filters.fechaDesde) : null;\r\n  const fechaHasta = filters.fechaHasta ? new Date(filters.fechaHasta) : null;\r\n\r\n  const matchSearch =\r\n    !search ||\r\n    o.numeroOrden?.toLowerCase().includes(search) ||\r\n    o.proveedor?.nombre?.toLowerCase().includes(search) ||\r\n    o.notas?.toLowerCase().includes(search);\r\n\r\n  const matchCodigo = !codigo || o.numeroOrden?.toLowerCase().includes(codigo);\r\n  const matchProveedor = !proveedor || o.proveedor?.nombre?.toLowerCase().includes(proveedor);\r\n\r\n  const fechaOrden = o.fechaOrden ? new Date(o.fechaOrden) : null;\r\n  const matchFechaDesde = !fechaDesde || (fechaOrden && fechaOrden >= fechaDesde);\r\n  const matchFechaHasta = !fechaHasta || (fechaOrden && fechaOrden <= fechaHasta);\r\n\r\n  return (\r\n    matchSearch &&\r\n    matchCodigo &&\r\n    matchProveedor &&\r\n    matchFechaDesde &&\r\n    matchFechaHasta\r\n  );\r\n});\r\n\r\n// 2Ô∏è‚É£ Luego filtrar los que pertenecen a la pesta√±a activa\r\nconst filteredOrders = filteredBySearch.filter((o) =>\r\n  matchesEstado(o.estado, activeTab)\r\n);\r\n\r\n// 3Ô∏è‚É£ Calcular los conteos din√°micos por pesta√±a\r\nconst tabs = [\r\n  {\r\n    id: \"pendiente\",\r\n    label: \"Pendientes\",\r\n    count: filteredBySearch.filter((o) =>\r\n      matchesEstado(o.estado, \"pendiente\")\r\n    ).length,\r\n  },\r\n  {\r\n    id: \"aprobado\",\r\n    label: \"Aprobadas\",\r\n    count: filteredBySearch.filter((o) =>\r\n      matchesEstado(o.estado, \"aprobado\")\r\n    ).length,\r\n  },\r\n  {\r\n    id: \"rechazado\",\r\n    label: \"Rechazadas\",\r\n    count: filteredBySearch.filter((o) =>\r\n      matchesEstado(o.estado, \"rechazado\")\r\n    ).length,\r\n  },\r\n];\r\n\r\n\r\n\r\n\r\n\r\n  \r\nconst getStatusLabel = (estado) => {\r\n  switch ((estado || \"\").toLowerCase()) {\r\n    case \"pending\":\r\n    case \"pendiente\":\r\n      return \"Pendiente\";\r\n    case \"approved\":\r\n    case \"aprobado\":\r\n      return \"Aprobada\";\r\n    case \"received\":\r\n    case \"autorizado\":\r\n      return \"Autorizada\";\r\n    case \"paid\":\r\n    case \"pagado\":\r\n      return \"Pagada\";\r\n    case \"cancelled\":\r\n    case \"rejected\":\r\n    case \"rechazado\":\r\n      return \"Rechazada\";\r\n    default:\r\n      return estado || \"Desconocido\";\r\n  }\r\n};\r\n\r\n\r\n// PDF\r\nconst handleDownloadPDF = (order) => {\r\n  const doc = new jsPDF();\r\n  const gray = \"#333333\";\r\n\r\n  // Para que salga el texto bien en el apartado de Metodo de pago\r\n  const formatText = (text) => {\r\n    if (!text) return \"‚Äî\";\r\n    return text\r\n      .replace(/_/g, \" \")\r\n      .toLowerCase()\r\n      .replace(/\\b\\w/g, (c) => c.toUpperCase()); \r\n  };\r\n\r\n  // ENCABEZADO\r\n  doc.setFillColor(10, 74, 138);\r\n  doc.rect(0, 0, 210, 25, \"F\");\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.setFontSize(16);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.text(\"ORDEN DE COMPRA\", 105, 15, { align: \"center\" });\r\n\r\n  // DATOS GENERALES\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setTextColor(gray);\r\n  doc.setFontSize(12);\r\n  doc.text(\"Datos Generales\", 105, 35, { align: \"center\" });\r\n\r\n  const leftX = 20;\r\n  const rightX = 120;\r\n  const baseY = 44;\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  \r\n  doc.text(`Folio: ${order.numeroOrden || \"‚Äî\"}`, leftX, baseY);\r\n  doc.text(`Fecha de Orden: ${formatDate(order.fechaOrden)}`, leftX, baseY + 7);\r\n  doc.text(`Proveedor: ${order.proveedor?.nombre || \"‚Äî\"}`, leftX, baseY + 14);\r\n  doc.text(`Estado: ${getStatusLabel(order.estado)}`, rightX, baseY);\r\n  doc.text(`Creado por: ${order.creadoPor || \"‚Äî\"}`, rightX, baseY + 7);\r\n  const maxWidthNotas = 70;\r\n  const notaTexto = `Notas: ${order.notas || \"‚Äî\"}`;\r\n  const notaLineas = doc.splitTextToSize(notaTexto, maxWidthNotas);\r\n  const notaAltura = notaLineas.length * 5;\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.text(notaLineas, rightX, baseY + 14);\r\n\r\n  const pagoY = Math.max(baseY + 25, baseY + 14 + notaAltura + 5);\r\n\r\n  //DETALLES DE PAGO\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(gray);\r\n  doc.text(\"Detalles de Pago\", 105, pagoY, { align: \"center\" });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  const infoPagoY = pagoY + 8;\r\n\r\n  const metodoPagoFormateado = formatText(order.metodoPago);\r\n  const prioridadFormateada = formatText(order.prioridadAprobacion || \"Normal\");\r\n\r\n  doc.text(`M√©todo de Pago: ${metodoPagoFormateado}`, leftX, infoPagoY);\r\n  doc.text(`Prioridad: ${prioridadFormateada}`, leftX, infoPagoY + 7);\r\n\r\n  //COMENTARIOS con salto autom√°tico\r\n  const maxWidthComentarios = 70;\r\n  const comentarioTexto = `Comentarios: ${order.comentariosAprobador || \"Sin comentarios\"}`;\r\n  const comentarioLineas = doc.splitTextToSize(comentarioTexto, maxWidthComentarios);\r\n  const comentarioAltura = comentarioLineas.length * 5;\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.text(comentarioLineas, rightX, infoPagoY);\r\n\r\n  //DETALLE DE PRODUCTOS\r\n  const tableY = infoPagoY + 9 + comentarioAltura;\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.text(\"Detalle de Productos\", 105, tableY, { align: \"center\" });\r\n\r\n  const articulos = Array.isArray(order.articulos)\r\n    ? order.articulos.map((a) => ({\r\n        codigo: a.codigoArticulo || \"‚Äî\",\r\n        descripcion: a.descripcion || a.nombre || \"‚Äî\",\r\n        cantidadConUnidad: `${a.cantidadOrdenada || 0} ${a.unidad || \"\"}`.trim(),\r\n        costoUnitario: a.costoUnitario || 0,\r\n        subtotal:\r\n          a.subtotal ||\r\n          (a.cantidadOrdenada || 0) * (a.costoUnitario || 0),\r\n      }))\r\n    : [];\r\n\r\n  // Tabla\r\n  doc.autoTable({\r\n    startY: tableY + 5,\r\n    head: [[\"C√≥digo\", \"Descripci√≥n\", \"Cantidad\", \"Costo Unitario\", \"Subtotal\"]],\r\n    body: articulos.map((a) => [\r\n      a.codigo,\r\n      a.descripcion,\r\n      a.cantidadConUnidad,\r\n      formatCurrency(a.costoUnitario),\r\n      formatCurrency(a.subtotal),\r\n    ]),\r\n    theme: \"grid\",\r\n    styles: { fontSize: 9 },\r\n    headStyles: {\r\n      fillColor: [10, 74, 138],\r\n      textColor: 255,\r\n      halign: \"center\",\r\n      fontStyle: \"bold\",\r\n    },\r\n    bodyStyles: { halign: \"center\" },\r\n    margin: { left: 15, right: 15 },\r\n  });\r\n\r\n  // TOTAL\r\n  const finalY = doc.lastAutoTable.finalY + 10;\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(11);\r\n  doc.setTextColor(gray);\r\n  doc.text(`Total: ${formatCurrency(order.totalOrden)}`, 195, finalY, { align: \"right\" });\r\n\r\n  // APROBACIONES\r\n  const pageHeight = doc.internal.pageSize.getHeight();\r\n  const approvalSectionY = pageHeight - 35;\r\n\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.setTextColor(gray);\r\n  doc.text(\"Aprobaciones\", 105, approvalSectionY - 5, { align: \"center\" });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  const lineY = approvalSectionY + 10;\r\n  const leftXLine = 20;\r\n  const rightXLine = 135;\r\n\r\n  doc.text(\"_____________________________\", leftXLine, lineY);\r\n  doc.text(\"_____________________________\", rightXLine, lineY);\r\n  doc.text(\"Responsable de Aprobaci√≥n\", leftXLine + 10, lineY + 6);\r\n  doc.text(\"Departamento de Compras\", rightXLine + 7, lineY + 6);\r\n\r\n  // GUARDAR PDF\r\n  doc.save(`Orden_${order.numeroOrden || \"Compra\"}.pdf`);\r\n};\r\n\r\nconst handleAuthorize = async (id, payload, isRejection = false) => {\r\n  try {\r\n    await approveGasto(id, payload);\r\n    const updated = await getGastos();\r\n    setOrdenes(Array.isArray(updated) ? updated : updated.data || []);\r\n    setActiveTab(isRejection ? \"rechazado\" : \"aprobado\");\r\n    setShowAuthModal(false);\r\n  } catch (error) {\r\n    console.error(\"Error al procesar gasto:\", error);\r\n  }\r\n};\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Icon name=\"ShoppingCart\" size={20} className=\"text-primary\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground\">√ìrdenes de Compra</h3>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex border-b border-border\">\r\n        {tabs.map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => setActiveTab(tab.id)}\r\n            className={`flex items-center space-x-2 px-6 py-3 text-sm font-medium border-b-2 transition-smooth ${\r\n              activeTab === tab.id\r\n                ? \"border-primary text-primary bg-primary/5\"\r\n                : \"border-transparent text-muted-foreground hover:text-foreground hover:bg-muted/50\"\r\n            }`}\r\n          >\r\n            <span>{tab.label}</span>\r\n            {tab.count > 0 && (\r\n              <span\r\n                className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\r\n                  activeTab === tab.id\r\n                    ? \"bg-primary text-primary-foreground\"\r\n                    : \"bg-muted text-muted-foreground\"\r\n                }`}\r\n              >\r\n                {tab.count}\r\n              </span>\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Body */}\r\n      <div className=\"divide-y divide-border max-h-[500px] overflow-y-auto\">\r\n        {loading && (\r\n          <div className=\"text-center py-8 text-muted-foreground\">\r\n            Cargando √≥rdenes de compra‚Ä¶\r\n          </div>\r\n        )}\r\n        {!!errorMsg && <div className=\"text-center py-8 text-error\">{errorMsg}</div>}\r\n        {!loading && filteredOrders.length === 0 && (\r\n          <div className=\"text-center py-8\">\r\n            <Icon\r\n              name=\"ShoppingCart\"\r\n              size={48}\r\n              className=\"text-muted-foreground mx-auto mb-4\"\r\n            />\r\n            <p className=\"text-muted-foreground\">\r\n              No hay √≥rdenes {activeTab.toLowerCase()}.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {filteredOrders.map((order) => (\r\n  <div key={order.id} className=\"p-4 hover:bg-muted/50 transition-smooth\">\r\n    <div className=\"flex items-start justify-between\">\r\n      <div className=\"flex-1\">\r\n        <div className=\"flex items-center space-x-3 mb-2\">\r\n          <h4 className=\"font-medium text-foreground\">{order.numeroOrden}</h4>\r\n\r\n          {/* Estado actual */}\r\n          <span\r\n            className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(order.estado)}`}\r\n          >\r\n            {getStatusLabel(order.estado)}\r\n          </span>\r\n          {order.esUrgente && (\r\n            <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-error/10 text-error\">\r\n              <Icon name=\"AlertCircle\" size={12} className=\"mr-1\" />\r\n              Urgente\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Resto de la informaci√≥n */}\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground mb-3\">\r\n          <div>\r\n            <span className=\"font-medium\">Proveedor:</span>\r\n            <div className=\"text-foreground\">{order.proveedor?.nombre || \"‚Äî\"}</div>\r\n          </div>\r\n          <div>\r\n            <span className=\"font-medium\">Fecha:</span>\r\n            <div className=\"text-foreground\">{formatDate(order.fechaOrden)}</div>\r\n          </div>\r\n          <div>\r\n            <span className=\"font-medium\">Total:</span>\r\n            <div className=\"text-foreground font-medium\">\r\n              {formatCurrency(order.totalOrden)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => handleOpenView(order)}\r\n            iconName=\"Eye\"\r\n            iconSize={16}\r\n          >\r\n            Ver Detalles\r\n          </Button>\r\n\r\n          {[\"aprobado\", \"approved\", \"rechazado\", \"rejected\", \"cancelled\"].includes(\r\n  order.estado?.toLowerCase()\r\n) && (\r\n  <Button\r\n    variant=\"ghost\"\r\n    size=\"sm\"\r\n    iconName=\"Download\"\r\n    iconSize={16}\r\n    onClick={() => handleDownloadPDF(order)}\r\n  >\r\n    Descargar\r\n  </Button>\r\n\r\n          )}\r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n))}\r\n      </div>\r\n\r\n<ModalGestionCompra\r\n  isOpen={showAuthModal}\r\n  onClose={() => setShowAuthModal(false)}\r\n  expense={selectedOrden}\r\n  onAuthorize={handleAuthorize}\r\n  onDownload={() => handleDownloadPDF(selectedOrden)}\r\n  mode={\r\n    [\"approved\", \"aprobado\", \"rejected\", \"rechazado\", \"cancelled\"].includes(\r\n      selectedOrden?.estado?.toLowerCase()\r\n    )\r\n      ? \"view\" \r\n      : \"edit\"\r\n  }\r\n/>\r\n\r\n\r\n  </div>\r\n  );\r\n};\r\n\r\nexport default GastosTable;\r\n","import React, { useEffect, useState } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport FilterGastos from \"./components/FilterGastos\";\r\nimport FilterControls from './components/FilterControls';\r\nimport ExpenseTrackingTable from './components/ExpenseTrackingTable';\r\nimport FinancialSummaryWidget from './components/FinancialSummaryWidget';\r\nimport ReceiptManagementPanel from './components/ReceiptManagementPanel';\r\nimport PaymentAuthorizationModal from './components/PaymentAuthorizationModal';\r\nimport NewExpenseModal from './components/NewExpenseModal';\r\nimport GastosTable from './components/GastosTable';\r\nimport useFinanzas from '../../hooks/useFinanzas';\r\n\r\nconst FinanzasManagement = () => {\r\n  const { getGastos, createGasto, deleteGasto, loading, finanzas } = useFinanzas();\r\n\r\n  const [expenses, setExpenses] = useState([]);\r\n  const [filters, setFilters] = useState({});\r\n  const [activeTab, setActiveTab] = useState('expenses');\r\n\r\n  const [showAuthModal, setShowAuthModal] = useState(false);\r\n  const [showNewExpenseModal, setShowNewExpenseModal] = useState(false);\r\n  const [selectedExpense, setSelectedExpense] = useState(null);\r\n\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n\r\n  // ========================================================\r\n  // Cargar gastos del backend al montar\r\n  // ========================================================\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const data = await getGastos();\r\n        if (Array.isArray(data)) setExpenses(data);\r\n        else console.warn('‚ö†Ô∏è getGastos no devolvi√≥ un array:', data);\r\n      } catch (err) {\r\n        console.error('Error al obtener gastos:', err);\r\n      }\r\n    };\r\n    fetchData();\r\n    // üëá no pongas getGastos como dependencia o se cicla\r\n  }, []);\r\n\r\n  // ========================================================\r\n  // Handlers\r\n  // ========================================================\r\n  const handleFiltersChange = (newFilters) => setFilters(newFilters);\r\n  const handleResetFilters = () => setFilters({});\r\n\r\n  const handleViewExpense = (expense) => {\r\n    setSelectedExpense(expense);\r\n    setShowAuthModal(true);\r\n  };\r\n\r\n  const handleAuthorizePayment = async (authData) => {\r\n    try {\r\n      console.log('Autorizando pago:', authData);\r\n      // Aqu√≠ puedes actualizar el estado del gasto o recargar la lista\r\n    } catch (e) {\r\n      console.error('Error al autorizar pago:', e);\r\n    }\r\n  };\r\n\r\n  const handleAddNewExpense = async (createdExpense) => {\r\n    try {\r\n      if (!createdExpense) return;\r\n      setExpenses((prev) => [createdExpense, ...prev]);\r\n      setShowNewExpenseModal(false);\r\n    } catch (err) {\r\n      console.error('Error al agregar gasto:', err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteExpense = async (expenseId) => {\r\n    if (!window.confirm('¬øSeguro que deseas eliminar este gasto?')) return;\r\n    try {\r\n      await deleteGasto(expenseId);\r\n      setExpenses((prev) => prev.filter((x) => x.id !== expenseId));\r\n    } catch (err) {\r\n      console.error('Error al eliminar gasto:', err);\r\n      alert('No se pudo eliminar el gasto.');\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'expenses', label: 'Seguimiento de Gastos', icon: 'Table' },\r\n    { id: 'ordenes', label: '√ìrdenes de Compra', icon: 'ShoppingCart'},\r\n    { id: 'summary', label: 'Resumen Financiero', icon: 'BarChart3' },\r\n    { id: 'receipts', label: 'Gesti√≥n de Recibos', icon: 'FileText' },\r\n  ];\r\n\r\n  // ========================================================\r\n  // Render principal\r\n  // ========================================================\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Header\r\n        onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)}\r\n        isMenuOpen={headerMenuOpen}\r\n      />\r\n      <Sidebar\r\n        isCollapsed={sidebarCollapsed}\r\n        onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n      />\r\n\r\n      <main\r\n        className={`transition-all duration-300 ${\r\n          sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n        }`}\r\n      >\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Breadcrumb */}\r\n          <div className=\"mb-6\">\r\n            <Breadcrumb />\r\n          </div>\r\n\r\n          {/* HEADER */}\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-foreground\">\r\n                Gesti√≥n Financiera\r\n              </h1>\r\n              <p className=\"text-muted-foreground\">\r\n                Control integral de gastos, autorizaciones y reportes financieros\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                iconName=\"Download\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Exportar Reporte\r\n              </Button>\r\n              <Button\r\n                variant=\"default\"\r\n                onClick={() => setShowNewExpenseModal(true)}\r\n                iconName=\"Plus\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Nuevo Gasto\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* TABS */}\r\n          <div className=\"border-b border-border\">\r\n            <nav className=\"flex space-x-8\">\r\n              {tabs.map((tab) => (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id)}\r\n                  className={`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-smooth ${\r\n                    activeTab === tab.id\r\n                      ? 'border-primary text-primary'\r\n                      : 'border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground'\r\n                  }`}\r\n                >\r\n                  <Icon name={tab.icon} size={16} />\r\n                  <span>{tab.label}</span>\r\n                </button>\r\n              ))}\r\n            </nav>\r\n          </div>\r\n\r\n          {/* CONTENIDO */}\r\n          <div className=\"space-y-6\">\r\n            {activeTab === 'expenses' && (\r\n              <>\r\n                <FilterControls\r\n                  onFiltersChange={handleFiltersChange}\r\n                  onReset={handleResetFilters}\r\n                />\r\n\r\n                {loading ? (\r\n                  <div className=\"flex items-center justify-center h-64\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"animate-spin h-10 w-10 border-b-2 border-primary rounded-full mx-auto mb-3\" />\r\n                      <p className=\"text-muted-foreground\">\r\n                        Cargando gastos...\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                ) : expenses.length === 0 ? (\r\n                  <div className=\"text-center py-12\">\r\n                    <Icon\r\n                      name=\"FolderOpen\"\r\n                      size={64}\r\n                      className=\"text-muted-foreground mx-auto mb-4\"\r\n                    />\r\n                    <h3 className=\"text-lg font-medium text-foreground mb-2\">\r\n                      No hay gastos registrados\r\n                    </h3>\r\n                    <p className=\"text-muted-foreground mb-6\">\r\n                      Crea un nuevo gasto para comenzar\r\n                    </p>\r\n                    <Button\r\n                      onClick={() => setShowNewExpenseModal(true)}\r\n                      iconName=\"Plus\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Crear Gasto\r\n                    </Button>\r\n                  </div>\r\n                ) : (\r\n                  <ExpenseTrackingTable\r\n                    filters={filters}\r\n                    expenses={expenses}\r\n                    onViewDetails={handleViewExpense}\r\n                    onDelete={handleDeleteExpense}\r\n                  />\r\n                )}\r\n              </>\r\n            )}\r\n{activeTab === \"ordenes\" && (\r\n  <>\r\n    <FilterGastos\r\n      filters={filters}\r\n      onFilterChange={handleFiltersChange}\r\n      onClearFilters={handleResetFilters}\r\n      totalCount={0}\r\n      filteredCount={0}\r\n    />\r\n    <GastosTable filters={filters} />\r\n  </>\r\n)}\r\n\r\n            \r\n            {activeTab === 'summary' && (\r\n              <FinancialSummaryWidget summaryData={{ totalExpenses: 0, totalRevenue: 0 }} />\r\n            )}\r\n\r\n            {activeTab === 'receipts' && (\r\n              <ReceiptManagementPanel receipts={[]} />\r\n            )}\r\n            \r\n          </div>\r\n        </div>\r\n      </main>\r\n      \r\n\r\n      {/* MODALES */}\r\n      <PaymentAuthorizationModal\r\n        isOpen={showAuthModal}\r\n        onClose={() => setShowAuthModal(false)}\r\n        expense={selectedExpense}\r\n        onAuthorize={handleAuthorizePayment}\r\n      />\r\n\r\n      <NewExpenseModal\r\n        isOpen={showNewExpenseModal}\r\n        onClose={() => setShowNewExpenseModal(false)}\r\n        onSubmit={handleAddNewExpense}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinanzasManagement;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\nimport usePerson from '../../../hooks/usePerson';\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\nconst PersonnelTable = ({ personnel, onViewProfile, onEditPersonnel, onAssignPPE }) => {\r\n  const { persons, loading, error, getPersons } = usePerson();\r\n\r\n  const [sortConfig, setSortConfig] = useState({ key: 'nombreCompleto', direction: 'asc' });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  // üîπ Cargar empleados al montar\r\n  useEffect(() => {\r\n    getPersons();\r\n  }, []);\r\n\r\n  // üîπ Fuente de datos (props o hook)\r\n  const dataSource = useMemo(() => {\r\n    if (!personnel || personnel.length === 0) {\r\n      return persons || [];\r\n    }\r\n    return personnel;\r\n  }, [personnel, persons]);\r\n\r\n  // üîπ Ordenamiento\r\n  const sortedPersonnel = useMemo(() => {\r\n    const sorted = [...(dataSource || [])];\r\n    if (!sortConfig.key) return sorted;\r\n    sorted.sort((a, b) => {\r\n      const aVal = a[sortConfig.key] || '';\r\n      const bVal = b[sortConfig.key] || '';\r\n      if (aVal < bVal) return sortConfig.direction === 'asc' ? -1 : 1;\r\n      if (aVal > bVal) return sortConfig.direction === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n    return sorted;\r\n  }, [dataSource, sortConfig]);\r\n\r\n  // üîπ Paginaci√≥n\r\n  const totalItems = sortedPersonnel.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedPersonnel = sortedPersonnel.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  const handleSort = (key) => {\r\n    setSortConfig((prev) => ({\r\n      key,\r\n      direction: prev.key === key && prev.direction === 'asc' ? 'desc' : 'asc',\r\n    }));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  // üîπ Badges de estado\r\n  const getStatusBadge = (status) => {\r\n    const config = {\r\n      Activo: { bg: 'bg-success', text: 'text-success-foreground' },\r\n      Inactivo: { bg: 'bg-error', text: 'text-error-foreground' },\r\n      Suspendido: { bg: 'bg-warning', text: 'text-warning-foreground' },\r\n    }[status] || { bg: 'bg-muted', text: 'text-muted-foreground' };\r\n\r\n    return (\r\n      <span className={`px-2 py-1 text-xs font-medium rounded-full ${config.bg} ${config.text}`}>\r\n        {status}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const getComplianceBadge = (status) => {\r\n    const config = {\r\n      Completo: { bg: 'bg-success', text: 'text-success-foreground', icon: 'CheckCircle' },\r\n      Pendiente: { bg: 'bg-warning', text: 'text-warning-foreground', icon: 'Clock' },\r\n      Vencido: { bg: 'bg-error', text: 'text-error-foreground', icon: 'AlertCircle' },\r\n    }[status] || { bg: 'bg-muted', text: 'text-muted-foreground', icon: 'Clock' };\r\n\r\n    return (\r\n      <span\r\n        className={`inline-flex items-center space-x-1 px-2 py-1 text-xs font-medium rounded-full ${config.bg} ${config.text}`}\r\n      >\r\n        <Icon name={config.icon} size={12} />\r\n        <span>{status}</span>\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const SortableHeader = ({ label, sortKey }) => (\r\n    <th\r\n      className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted transition-smooth\"\r\n      onClick={() => handleSort(sortKey)}\r\n    >\r\n      <div className=\"flex items-center space-x-1\">\r\n        <span>{label}</span>\r\n        <Icon\r\n          name={\r\n            sortConfig.key === sortKey\r\n              ? sortConfig.direction === 'asc'\r\n                ? 'ChevronUp'\r\n                : 'ChevronDown'\r\n              : 'ChevronsUpDown'\r\n          }\r\n          size={14}\r\n        />\r\n      </div>\r\n    </th>\r\n  );\r\n\r\n  // üîπ Estados de carga y error\r\n  if (loading)\r\n    return (\r\n      <div className=\"flex justify-center items-center py-10\">\r\n        <Icon name=\"Loader2\" className=\"animate-spin mr-2\" size={18} />\r\n        <span className=\"text-muted-foreground\">Cargando empleados...</span>\r\n      </div>\r\n    );\r\n\r\n  if (error)\r\n    return (\r\n      <div className=\"text-center py-10 text-error\">\r\n        <Icon name=\"AlertCircle\" className=\"inline-block mr-2\" size={18} />\r\n        Error al cargar los empleados: {error.userMessage || error.message}\r\n      </div>\r\n    );\r\n\r\n  if (!sortedPersonnel?.length)\r\n    return (\r\n      <div className=\"text-center py-10 text-muted-foreground\">\r\n        <Icon name=\"UserX\" className=\"inline-block mr-2\" size={18} />\r\n        No hay empleados registrados.\r\n      </div>\r\n    );\r\n\r\n  // üîπ Render principal\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border overflow-hidden\">\r\n      {/* Tabla Desktop */}\r\n      <div className=\"hidden lg:block overflow-x-auto\">\r\n        <table className=\"min-w-full divide-y divide-border\">\r\n          <thead className=\"bg-muted\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Empleado\r\n              </th>\r\n              <SortableHeader label=\"Departamento\" sortKey=\"departamento\" />\r\n              <SortableHeader label=\"Puesto\" sortKey=\"puesto\" />\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Estado\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Estudios M√©dicos\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                EPP\r\n              </th>\r\n              <SortableHeader label=\"√öltima Actualizaci√≥n\" sortKey=\"fechaIngreso\" />\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Acciones\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody className=\"bg-card divide-y divide-border\">\r\n            {paginatedPersonnel.map((emp) => (\r\n              <tr key={emp.id} className=\"hover:bg-muted/50 transition-smooth\">\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-10 h-10 rounded-full overflow-hidden bg-muted\">\r\n                      <Image\r\n                        src={emp.foto || '/default-avatar.png'}\r\n                        alt={emp.nombreCompleto}\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-sm font-medium text-foreground\">{emp.nombreCompleto}</div>\r\n                      <div className=\"text-sm text-muted-foreground\">{emp.empleadoId}</div>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm\">{emp.departamento || '-'}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm\">{emp.puesto || '-'}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">{getStatusBadge(emp.estado)}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  {getComplianceBadge(emp.estado === 'Activo' ? 'Completo' : 'Pendiente')}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  {getComplianceBadge(emp.estado === 'Activo' ? 'Completo' : 'Pendiente')}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground\">\r\n                  {emp.fechaIngreso || '-'}\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onViewProfile(emp)}\r\n                      iconName=\"Eye\"\r\n                      iconSize={16}\r\n                    >\r\n                      Ver\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onEditPersonnel(emp)}\r\n                      iconName=\"Edit\"\r\n                      iconSize={16}\r\n                    >\r\n                      Editar\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onAssignPPE(emp)}\r\n                      iconName=\"Shield\"\r\n                      iconSize={16}\r\n                    >\r\n                      EPP\r\n                    </Button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* üîπ Paginaci√≥n Desktop */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n            <span className=\"text-xs text-muted-foreground ml-3\">\r\n              Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n            <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Vista M√≥vil */}\r\n      <div className=\"lg:hidden space-y-4 p-4\">{paginatedPersonnel.map((emp) => (\r\n          <div key={emp.id} className=\"bg-card border border-border rounded-lg p-4\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-12 h-12 rounded-full overflow-hidden bg-muted\">\r\n                  <Image\r\n                    src={emp.foto || '/default-avatar.png'}\r\n                    alt={emp.nombreCompleto}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-sm font-medium text-foreground\">{emp.nombreCompleto}</h3>\r\n                  <p className=\"text-xs text-muted-foreground\">{emp.empleadoId}</p>\r\n                </div>\r\n              </div>\r\n              {getStatusBadge(emp.estado)}\r\n            </div>\r\n\r\n            <div className=\"space-y-2 mb-4\">\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Departamento:</span>\r\n                <span>{emp.departamento || '-'}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Puesto:</span>\r\n                <span>{emp.puesto || '-'}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">Estudios M√©dicos:</span>\r\n                {getComplianceBadge(emp.estado === 'Activo' ? 'Completo' : 'Pendiente')}\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-muted-foreground\">EPP:</span>\r\n                {getComplianceBadge(emp.estado === 'Activo' ? 'Completo' : 'Pendiente')}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex space-x-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onViewProfile(emp)}\r\n                iconName=\"Eye\"\r\n                iconSize={16}\r\n                className=\"flex-1\"\r\n              >\r\n                Ver Perfil\r\n              </Button>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onEditPersonnel(emp)}\r\n                iconName=\"Edit\"\r\n                iconSize={16}\r\n              >\r\n                Editar\r\n              </Button>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onAssignPPE(emp)}\r\n                iconName=\"Shield\"\r\n                iconSize={16}\r\n              >\r\n                EPP\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {/* üîπ Paginaci√≥n m√≥vil */}\r\n        <div className=\"flex flex-col gap-3 pt-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {totalItems === 0 ? '0 de 0' : `${startIndex + 1}-${endIndex} de ${totalItems}`}\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n              <span className=\"px-2 text-sm text-foreground\">{currentPage}/{totalPages}</span>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonnelTable;\r\n","import React from 'react';\r\nimport Select from '../../../components/ui/Select';\r\nimport Input from '../../../components/ui/Input';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst FilterToolbar = ({ \r\n  filters, \r\n  onFilterChange, \r\n  onClearFilters, \r\n  onExportData,\r\n  totalCount,\r\n  filteredCount \r\n}) => {\r\n  const departmentOptions = [\r\n    { value: '', label: 'Todos los Departamentos' },\r\n    { value: 'Administraci√≥n', label: 'Administraci√≥n' },\r\n    { value: 'Proyectos', label: 'Proyectos' },\r\n    { value: 'Taller', label: 'Taller' },\r\n    { value: 'Ventas', label: 'Ventas' },\r\n    { value: 'Mantenimiento', label: 'Mantenimiento' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'Activo', label: 'Activo' },\r\n    { value: 'Inactivo', label: 'Inactivo' },\r\n    { value: 'Suspendido', label: 'Suspendido' }\r\n  ];\r\n\r\n  const complianceOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'Completo', label: 'Completo' },\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'Vencido', label: 'Vencido' }\r\n  ];\r\n\r\n  const positionOptions = [\r\n    { value: '', label: 'Todos los Puestos' },\r\n    { value: 'T√©cnico HVAC', label: 'T√©cnico HVAC' },\r\n    { value: 'Supervisor', label: 'Supervisor' },\r\n    { value: 'Ingeniero', label: 'Ingeniero' },\r\n    { value: 'Administrador', label: 'Administrador' },\r\n    { value: 'Vendedor', label: 'Vendedor' },\r\n    { value: 'Operario', label: 'Operario' }\r\n  ];\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    onFilterChange({ ...filters, [key]: value });\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some(value => value !== '');\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 mb-6\">\r\n      {/* Search and Quick Actions */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6\">\r\n        <div className=\"flex-1 max-w-md\">\r\n          <Input\r\n            type=\"search\"\r\n            placeholder=\"Buscar por nombre, ID o puesto...\"\r\n            value={filters?.search || ''}\r\n            onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n            className=\"w-full\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onExportData}\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n            iconSize={16}\r\n          >\r\n            Exportar\r\n          </Button>\r\n          \r\n          {hasActiveFilters && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              onClick={onClearFilters}\r\n              iconName=\"X\"\r\n              iconPosition=\"left\"\r\n              iconSize={16}\r\n            >\r\n              Limpiar Filtros\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* Filter Controls */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\r\n        <Select\r\n          label=\"Departamento\"\r\n          options={departmentOptions}\r\n          value={filters?.department || ''}\r\n          onChange={(value) => handleFilterChange('department', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Estado\"\r\n          options={statusOptions}\r\n          value={filters?.status || ''}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Puesto\"\r\n          options={positionOptions}\r\n          value={filters?.position || ''}\r\n          onChange={(value) => handleFilterChange('position', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Select\r\n          label=\"Estudios M√©dicos\"\r\n          options={complianceOptions}\r\n          value={filters?.medicalCompliance || ''}\r\n          onChange={(value) => handleFilterChange('medicalCompliance', value)}\r\n          className=\"w-full\"\r\n        />\r\n      </div>\r\n      {/* Additional Filters Row */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4\">\r\n        <Select\r\n          label=\"EPP\"\r\n          options={complianceOptions}\r\n          value={filters?.ppeCompliance || ''}\r\n          onChange={(value) => handleFilterChange('ppeCompliance', value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Input\r\n          type=\"date\"\r\n          label=\"Fecha de Ingreso Desde\"\r\n          value={filters?.hireDateFrom || ''}\r\n          onChange={(e) => handleFilterChange('hireDateFrom', e?.target?.value)}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        <Input\r\n          type=\"date\"\r\n          label=\"Fecha de Ingreso Hasta\"\r\n          value={filters?.hireDateTo || ''}\r\n          onChange={(e) => handleFilterChange('hireDateTo', e?.target?.value)}\r\n          className=\"w-full\"\r\n        />\r\n      </div>\r\n      {/* Results Summary */}\r\n      <div className=\"flex items-center justify-between pt-4 border-t border-border\">\r\n        <div className=\"flex items-center space-x-4 text-sm text-muted-foreground\">\r\n          <span>\r\n            Mostrando {filteredCount} de {totalCount} empleados\r\n          </span>\r\n          {hasActiveFilters && (\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"Filter\" size={16} />\r\n              <span>Filtros activos</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2 text-sm\">\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-success rounded-full\"></div>\r\n            <span className=\"text-muted-foreground\">Completo</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-warning rounded-full\"></div>\r\n            <span className=\"text-muted-foreground\">Pendiente</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <div className=\"w-3 h-3 bg-error rounded-full\"></div>\r\n            <span className=\"text-muted-foreground\">Vencido</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterToolbar;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ComplianceDashboard = ({ complianceData, onViewDetails, onScheduleTraining }) => {\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'critical': return 'text-error';\r\n      case 'warning': return 'text-warning';\r\n      case 'good': return 'text-success';\r\n      default: return 'text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  const getStatusBg = (status) => {\r\n    switch (status) {\r\n      case 'critical': return 'bg-error/10 border-error/20';\r\n      case 'warning': return 'bg-warning/10 border-warning/20';\r\n      case 'good': return 'bg-success/10 border-success/20';\r\n      default: return 'bg-muted/10 border-border';\r\n    }\r\n  };\r\n\r\n  const ComplianceCard = ({ title, value, total, status, icon, description, action }) => (\r\n    <div className={`p-4 rounded-lg border ${getStatusBg(status)} transition-smooth hover:shadow-md`}>\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className={`p-2 rounded-lg ${getStatusBg(status)}`}>\r\n            <Icon name={icon} size={20} className={getStatusColor(status)} />\r\n          </div>\r\n          <div>\r\n            <h3 className=\"text-sm font-medium text-foreground\">{title}</h3>\r\n            <p className=\"text-xs text-muted-foreground\">{description}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <div className=\"text-lg font-semibold text-foreground\">\r\n            {value}\r\n            {total && <span className=\"text-sm text-muted-foreground\">/{total}</span>}\r\n          </div>\r\n          {total && (\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {Math.round((value / total) * 100)}%\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {action && (\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"sm\"\r\n          onClick={action?.onClick}\r\n          iconName={action?.icon}\r\n          iconPosition=\"left\"\r\n          iconSize={14}\r\n          className=\"w-full mt-2\"\r\n        >\r\n          {action?.label}\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Overview Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <ComplianceCard\r\n          title=\"Estudios M√©dicos\"\r\n          value={complianceData?.medicalStudies?.expired}\r\n          total={complianceData?.medicalStudies?.total}\r\n          status={complianceData?.medicalStudies?.expired > 5 ? 'critical' : complianceData?.medicalStudies?.expired > 2 ? 'warning' : 'good'}\r\n          icon=\"Heart\"\r\n          description=\"Vencidos este mes\"\r\n          action={{\r\n            label: 'Ver Detalles',\r\n            icon: 'Eye',\r\n            onClick: () => onViewDetails('medical')\r\n          }}\r\n        />\r\n\r\n        <ComplianceCard\r\n          title=\"EPP Asignado\"\r\n          value={complianceData?.ppe?.assigned}\r\n          total={complianceData?.ppe?.total}\r\n          status={complianceData?.ppe?.assigned < complianceData?.ppe?.total * 0.9 ? 'warning' : 'good'}\r\n          icon=\"Shield\"\r\n          description=\"Equipos asignados\"\r\n          action={{\r\n            label: 'Gestionar EPP',\r\n            icon: 'Settings',\r\n            onClick: () => onViewDetails('ppe')\r\n          }}\r\n        />\r\n\r\n        <ComplianceCard\r\n          title=\"Capacitaciones\"\r\n          value={complianceData?.training?.pending}\r\n          total={complianceData?.training?.total}\r\n          status={complianceData?.training?.pending > 10 ? 'critical' : complianceData?.training?.pending > 5 ? 'warning' : 'good'}\r\n          icon=\"GraduationCap\"\r\n          description=\"Pendientes\"\r\n          action={{\r\n            label: 'Programar',\r\n            icon: 'Calendar',\r\n            onClick: () => onScheduleTraining()\r\n          }}\r\n        />\r\n\r\n        <ComplianceCard\r\n          title=\"Documentos\"\r\n          value={complianceData?.documents?.missing}\r\n          total={complianceData?.documents?.total}\r\n          status={complianceData?.documents?.missing > 3 ? 'critical' : complianceData?.documents?.missing > 1 ? 'warning' : 'good'}\r\n          icon=\"FileText\"\r\n          description=\"Faltantes\"\r\n          action={{\r\n            label: 'Revisar',\r\n            icon: 'Search',\r\n            onClick: () => onViewDetails('documents')\r\n          }}\r\n        />\r\n      </div>\r\n      {/* Alerts Section */}\r\n      <div className=\"bg-card rounded-lg border border-border p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground flex items-center space-x-2\">\r\n            <Icon name=\"AlertTriangle\" size={20} className=\"text-warning\" />\r\n            <span>Alertas de Cumplimiento</span>\r\n          </h3>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            iconName=\"Settings\"\r\n            iconPosition=\"left\"\r\n            iconSize={16}\r\n          >\r\n            Configurar Alertas\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"space-y-3\">\r\n          {complianceData?.alerts?.map((alert, index) => (\r\n            <div key={index} className={`p-4 rounded-lg border ${getStatusBg(alert?.priority)} flex items-start justify-between`}>\r\n              <div className=\"flex items-start space-x-3\">\r\n                <Icon \r\n                  name={alert?.priority === 'critical' ? 'AlertCircle' : alert?.priority === 'warning' ? 'Clock' : 'Info'} \r\n                  size={20} \r\n                  className={getStatusColor(alert?.priority)}\r\n                />\r\n                <div>\r\n                  <h4 className=\"text-sm font-medium text-foreground\">{alert?.title}</h4>\r\n                  <p className=\"text-sm text-muted-foreground\">{alert?.description}</p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">{alert?.date}</p>\r\n                </div>\r\n              </div>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => onViewDetails(alert?.type)}\r\n                iconName=\"ChevronRight\"\r\n                iconSize={16}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {/* Quick Stats */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <div className=\"bg-card rounded-lg border border-border p-4\">\r\n          <div className=\"flex items-center space-x-3 mb-3\">\r\n            <div className=\"p-2 bg-primary/10 rounded-lg\">\r\n              <Icon name=\"Users\" size={20} className=\"text-primary\" />\r\n            </div>\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-foreground\">Personal Activo</h4>\r\n              <p className=\"text-xs text-muted-foreground\">Total empleados</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-foreground\">{complianceData?.totalEmployees}</div>\r\n        </div>\r\n\r\n        <div className=\"bg-card rounded-lg border border-border p-4\">\r\n          <div className=\"flex items-center space-x-3 mb-3\">\r\n            <div className=\"p-2 bg-success/10 rounded-lg\">\r\n              <Icon name=\"CheckCircle\" size={20} className=\"text-success\" />\r\n            </div>\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-foreground\">Cumplimiento</h4>\r\n              <p className=\"text-xs text-muted-foreground\">Promedio general</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-foreground\">{complianceData?.overallCompliance}%</div>\r\n        </div>\r\n\r\n        <div className=\"bg-card rounded-lg border border-border p-4\">\r\n          <div className=\"flex items-center space-x-3 mb-3\">\r\n            <div className=\"p-2 bg-accent/10 rounded-lg\">\r\n              <Icon name=\"Calendar\" size={20} className=\"text-accent\" />\r\n            </div>\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-foreground\">Pr√≥ximos Vencimientos</h4>\r\n              <p className=\"text-xs text-muted-foreground\">En 30 d√≠as</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-foreground\">{complianceData?.upcomingExpirations}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ComplianceDashboard;","import React, { useState, useEffect } from 'react';\r\nimport { useNotifications } from '../../../context/NotificationContext';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport { Checkbox } from '../../../components/ui/Checkbox';\r\nimport usePerson from '../../../hooks/usePerson';\r\n\r\nconst PersonnelModal = ({ isOpen, onClose, employee, mode, onSave, error, openedFromEPP }) => {\r\n  const [localError, setLocalError] = useState(null);\r\n  const { createPerson, updatePersonByEmpleadoId } = usePerson();\r\n  const { showSuccess } = useNotifications();\r\n \r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    employeeId: '',\r\n    email: '',\r\n    phone: '',\r\n    department: '',\r\n    position: '',\r\n    hireDate: '',\r\n    status: 'Activo',\r\n    medicalStudies: {\r\n      lastExam: '',\r\n      nextExam: '',\r\n      status: 'Pendiente',\r\n      documents: []\r\n    },\r\n    ppe: {\r\n      helmet: false,\r\n      vest: false,\r\n      boots: false,\r\n      gloves: false,\r\n      glasses: false,\r\n      mask: false\r\n    },\r\n    certifications: [],\r\n    emergencyContact: {\r\n      name: '',\r\n      phone: '',\r\n      relationship: ''\r\n    }\r\n  });\r\n\r\n  // Secuencia de pasos\r\n  const steps = ['general', 'medical', 'ppe', 'emergency'];\r\n  const [step, setStep] = useState(openedFromEPP ? 2 : 0); // Si openedFromEPP, inicia en EPP\r\n\r\n  // Si openedFromEPP, bloquear navegaci√≥n y mostrar solo EPP\r\n  const isEPPOnly = openedFromEPP === true;\r\n\r\n  // üîπ Cargar datos del empleado seleccionado al abrir el modal\r\n  useEffect(() => {\r\n    if (employee) {\r\n      // Extraer el primer elemento si viene como arreglo\r\n      const medicalStudies = Array.isArray(employee.examenesMedicos)\r\n        ? employee.examenesMedicos[0] || { lastExam: '', nextExam: '', status: 'Pendiente', documents: [] }\r\n        : employee.medicalStudies || { lastExam: '', nextExam: '', status: 'Pendiente', documents: [] };\r\n\r\n      const ppe = Array.isArray(employee.equipos)\r\n        ? employee.equipos[0] || { helmet: false, vest: false, boots: false, gloves: false, glasses: false, mask: false }\r\n        : employee.ppe || { helmet: false, vest: false, boots: false, gloves: false, glasses: false, mask: false };\r\n\r\n      const emergencyContact = Array.isArray(employee.contactoEmergencia)\r\n        ? employee.contactoEmergencia[0] || { name: '', phone: '', relationship: '' }\r\n        : employee.emergencyContact || { name: '', phone: '', relationship: '' };\r\n\r\n      setFormData({\r\n        name: employee.nombreCompleto || '',\r\n        employeeId: employee.empleadoId || '',\r\n        email: employee.email || '',\r\n        phone: employee.telefono || '',\r\n        department: employee.departamento || '',\r\n        position: employee.puesto || '',\r\n        hireDate: employee.fechaIngreso || '',\r\n        status: employee.estado || 'Activo',\r\n        medicalStudies,\r\n        ppe,\r\n        certifications: employee.certifications || [],\r\n        emergencyContact\r\n      });\r\n    } else {\r\n      // Si es creaci√≥n, reinicia el formulario\r\n      setFormData({\r\n        name: '',\r\n        employeeId: '',\r\n        email: '',\r\n        phone: '',\r\n        department: '',\r\n        position: '',\r\n        hireDate: '',\r\n        status: 'Activo',\r\n        medicalStudies: {\r\n          lastExam: '',\r\n          nextExam: '',\r\n          status: 'Pendiente',\r\n          documents: []\r\n        },\r\n        ppe: {\r\n          helmet: false,\r\n          vest: false,\r\n          boots: false,\r\n          gloves: false,\r\n          glasses: false,\r\n          mask: false\r\n        },\r\n        certifications: [],\r\n        emergencyContact: {\r\n          name: '',\r\n          phone: '',\r\n          relationship: ''\r\n        }\r\n      });\r\n    }\r\n    setStep(openedFromEPP ? 2 : 0);\r\n  }, [employee, isOpen, openedFromEPP]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // üîπ Opciones de select\r\n  const departmentOptions = [\r\n    { value: 'Administraci√≥n', label: 'Administraci√≥n' },\r\n    { value: 'Proyectos', label: 'Proyectos' },\r\n    { value: 'Taller', label: 'Taller' },\r\n    { value: 'Ventas', label: 'Ventas' },\r\n    { value: 'Mantenimiento', label: 'Mantenimiento' }\r\n  ];\r\n\r\n  const positionOptions = [\r\n    { value: 'T√©cnico HVAC', label: 'T√©cnico HVAC' },\r\n    { value: 'Supervisor', label: 'Supervisor' },\r\n    { value: 'Ingeniero', label: 'Ingeniero' },\r\n    { value: 'Administrador', label: 'Administrador' },\r\n    { value: 'Vendedor', label: 'Vendedor' },\r\n    { value: 'Operario', label: 'Operario' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: 'Activo', label: 'Activo' },\r\n    { value: 'Inactivo', label: 'Inactivo' },\r\n    { value: 'Suspendido', label: 'Suspendido' }\r\n  ];\r\n\r\n  const medicalStatusOptions = [\r\n    { value: 'Completo', label: 'Completo' },\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'Vencido', label: 'Vencido' }\r\n  ];\r\n\r\n  const relationshipOptions = [\r\n    { value: 'C√≥nyuge', label: 'C√≥nyuge' },\r\n    { value: 'Padre/Madre', label: 'Padre/Madre' },\r\n    { value: 'Hijo/Hija', label: 'Hijo/Hija' },\r\n    { value: 'Hermano/Hermana', label: 'Hermano/Hermana' },\r\n    { value: 'Otro', label: 'Otro' }\r\n  ];\r\n\r\n  // üîπ Actualizar campos\r\n  const handleInputChange = (field, value) => {\r\n    if (field.includes('.')) {\r\n      const [parent, child] = field.split('.');\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [parent]: {\r\n          ...prev[parent],\r\n          [child]: value\r\n        }\r\n      }));\r\n    } else {\r\n      setFormData(prev => ({ ...prev, [field]: value }));\r\n    }\r\n  };\r\n\r\n  const handlePPEChange = (item, checked) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      ppe: {\r\n        ...prev.ppe,\r\n        [item]: checked\r\n      }\r\n    }));\r\n  };\r\n\r\n  // üîπ Guardar nuevo empleado\r\n\r\n  // (Ya est√° declarada al inicio, se elimina duplicado)\r\n\r\n  const handleSave = async () => {\r\n    setLocalError(null);\r\n    try {\r\n      const payload = {\r\n        nombreCompleto: formData.name,\r\n        email: formData.email,\r\n        telefono: formData.phone,\r\n        departamento: formData.department,\r\n        puesto: formData.position,\r\n        fechaIngreso: formData.hireDate,\r\n        estado: formData.status,\r\n        examenesMedicos: [formData.medicalStudies],\r\n        equipos: [formData.ppe],\r\n        contactoEmergencia: [formData.emergencyContact],\r\n        certifications: formData.certifications ?? [],\r\n      };\r\n\r\n      console.log(\"Payload enviado:\", payload);\r\n\r\n      let result;\r\n      if (mode === 'edit' && formData.employeeId) {\r\n        result = await updatePersonByEmpleadoId(formData.employeeId, payload);\r\n        showSuccess('Empleado actualizado correctamente ‚úÖ');\r\n      } else {\r\n        result = await createPerson({ ...payload, empleadoId: formData.employeeId, activo: true });\r\n        showSuccess('Empleado registrado correctamente ‚úÖ');\r\n      }\r\n\r\n      if (onSave) onSave(result);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error(\"Error al guardar:\", error);\r\n      if (error?.status === 409 && error?.data?.error?.includes('correo')) {\r\n        setLocalError(error);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  // üîπ Tabs del modal (solo para mostrar, deshabilitados)\r\n  const tabs = [\r\n  { id: 'general', label: 'Informaci√≥n General', icon: 'User' },\r\n  { id: 'medical', label: 'Archivos', icon: 'FileText' },\r\n  { id: 'ppe', label: 'EPP', icon: 'Shield' },\r\n  { id: 'emergency', label: 'Contacto de Emergencia', icon: 'Phone' }\r\n  ];\r\n\r\n  // Traducci√≥n de EPP\r\n  const ppeLabels = {\r\n    helmet: 'Casco',\r\n    vest: 'Chaleco',\r\n    boots: 'Botas',\r\n    gloves: 'Guantes',\r\n    glasses: 'Gafas',\r\n    mask: 'Mascarilla'\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-1050 flex items-center justify-center p-4\">\r\n      <div className=\"bg-card rounded-lg border border-border w-full max-w-4xl max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <Icon\r\n              name={\r\n                openedFromEPP\r\n                  ? 'Shield'\r\n                  : mode === 'create'\r\n                  ? 'UserPlus'\r\n                  : mode === 'edit'\r\n                  ? 'Edit'\r\n                  : 'Eye'\r\n              }\r\n              size={24}\r\n              className=\"text-primary\"\r\n            />\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-foreground\">\r\n                {openedFromEPP\r\n                  ? 'Editar Equipo de Protecci√≥n Personal'\r\n                  : mode === 'create'\r\n                  ? 'Nuevo Empleado'\r\n                  : mode === 'edit'\r\n                  ? 'Editar Empleado'\r\n                  : 'Perfil del Empleado'}\r\n              </h2>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                {openedFromEPP\r\n                  ? 'Modificar informaci√≥n de EPP del empleado'\r\n                  : mode === 'create'\r\n                  ? 'Agregar nuevo empleado al sistema'\r\n                  : mode === 'edit'\r\n                  ? 'Modificar informaci√≥n del empleado'\r\n                  : 'Ver detalles del empleado'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Tabs: solo mostrar si no es flujo EPP */}\r\n        {!isEPPOnly && (\r\n          <div className=\"border-b border-border\">\r\n            <nav className=\"flex space-x-8 px-6\">\r\n              {tabs.map((tab, idx) => (\r\n                <button\r\n                  key={tab.id}\r\n                  disabled={mode === 'create'}\r\n                  onClick={mode !== 'create' ? () => setStep(idx) : undefined}\r\n                  className={`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-smooth ${\r\n                    step === idx\r\n                      ? 'border-primary text-primary'\r\n                      : 'border-transparent text-muted-foreground'\r\n                  } ${mode === 'create' ? 'cursor-not-allowed opacity-60' : ''}`}\r\n                >\r\n                  <Icon name={tab.icon} size={16} />\r\n                  <span>{tab.label}</span>\r\n                </button>\r\n              ))}\r\n            </nav>\r\n          </div>\r\n        )}\r\n\r\n        {/* Contenido: solo mostrar EPP si es flujo EPP */}\r\n        <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\r\n          {/* Informaci√≥n General */}\r\n          {!isEPPOnly && step === 0 && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <Input\r\n                  label=\"Nombre Completo\"\r\n                  value={mode === 'view' ? (employee?.nombreCompleto ?? '') : formData.name}\r\n                  onChange={(e) => handleInputChange('name', e.target.value)}\r\n                  required\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Input\r\n                  label=\"ID de Empleado\"\r\n                  value={mode === 'view' ? (employee?.empleadoId ?? '') : formData.employeeId}\r\n                  onChange={(e) => handleInputChange('employeeId', e.target.value)}\r\n                  required\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Input\r\n                  label=\"Correo Electr√≥nico\"\r\n                  type=\"email\"\r\n                  value={mode === 'view' ? (employee?.email ?? '') : formData.email}\r\n                  onChange={(e) => {\r\n                    handleInputChange('email', e.target.value);\r\n                    if (localError) setLocalError(null);\r\n                  }}\r\n                  required\r\n                  disabled={mode === 'view'}\r\n                />\r\n                {(localError?.status === 409 && localError?.data?.error?.includes('correo')) && (\r\n                  <span className=\"block text-xs text-red-600 mt-1\">Este correo ya est√° registrado</span>\r\n                )}\r\n                <Input\r\n                  label=\"Tel√©fono\"\r\n                  type=\"tel\"\r\n                  value={mode === 'view' ? (employee?.telefono ?? '') : formData.phone}\r\n                  onChange={(e) => {\r\n                    const value = e.target.value;\r\n                    if (/^\\d{0,10}$/.test(value)) {\r\n                      handleInputChange('phone', value);\r\n                    }\r\n                  }}\r\n                  onBlur={(e) => {\r\n                    if (e.target.value.length !== 10) {\r\n                      alert('El n√∫mero de tel√©fono debe tener exactamente 10 d√≠gitos.');\r\n                    }\r\n                  }}\r\n                  inputMode=\"numeric\"\r\n                  maxLength={10}\r\n                  pattern=\"\\d{10}\"\r\n                  placeholder=\"Ingresa 10 d√≠gitos\"\r\n                  required\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Select\r\n                  label=\"Departamento\"\r\n                  options={departmentOptions}\r\n                  value={mode === 'view' ? (employee?.departamento ?? '') : formData.department}\r\n                  onChange={(value) => handleInputChange('department', value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Select\r\n                  label=\"Puesto\"\r\n                  options={positionOptions}\r\n                  value={mode === 'view' ? (employee?.puesto ?? '') : formData.position}\r\n                  onChange={(value) => handleInputChange('position', value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Input\r\n                  label=\"Fecha de Ingreso\"\r\n                  type=\"date\"\r\n                  value={mode === 'view' ? (employee?.fechaIngreso ?? '') : formData.hireDate}\r\n                  onChange={(e) => handleInputChange('hireDate', e.target.value)}\r\n                  required\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Select\r\n                  label=\"Estado\"\r\n                  options={statusOptions}\r\n                  value={mode === 'view' ? (employee?.estado ?? '') : formData.status}\r\n                  onChange={(value) => handleInputChange('status', value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Estudios M√©dicos */}\r\n          {!isEPPOnly && step === 1 && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <Input\r\n                  label=\"√öltimo Examen M√©dico\"\r\n                  type=\"date\"\r\n                  value={mode === 'view' ? (employee?.medicalStudies?.lastExam ?? '') : formData.medicalStudies.lastExam}\r\n                  onChange={(e) => handleInputChange('medicalStudies.lastExam', e.target.value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Input\r\n                  label=\"Pr√≥ximo Examen M√©dico\"\r\n                  type=\"date\"\r\n                  value={mode === 'view' ? (employee?.medicalStudies?.nextExam ?? '') : formData.medicalStudies.nextExam}\r\n                  onChange={(e) => handleInputChange('medicalStudies.nextExam', e.target.value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Select\r\n                  label=\"Estado de Estudios M√©dicos\"\r\n                  options={medicalStatusOptions}\r\n                  value={mode === 'view' ? (employee?.medicalStudies?.status ?? 'Pendiente') : formData.medicalStudies.status}\r\n                  onChange={(value) => handleInputChange('medicalStudies.status', value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n              </div>\r\n              <div className=\"border border-border rounded-lg p-4\">\r\n                <h4 className=\"text-sm font-medium text-foreground mb-3\">Documentos M√©dicos</h4>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center justify-between p-3 bg-muted rounded-lg\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <Icon name=\"FileText\" size={16} />\r\n                      <span className=\"text-sm text-foreground\">Examen m√©dico general</span>\r\n                    </div>\r\n                    <Button variant=\"ghost\" size=\"sm\" iconName=\"Download\" iconSize={14}>\r\n                      Descargar\r\n                    </Button>\r\n                  </div>\r\n                  {mode !== 'view' && (\r\n                    <Button variant=\"outline\" size=\"sm\" iconName=\"Upload\" iconPosition=\"left\" iconSize={14}>\r\n                      Subir Documento\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* EPP */}\r\n          {isEPPOnly ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div className=\"space-y-4\">\r\n                  <h4 className=\"text-sm font-medium text-foreground\">Equipo de Protecci√≥n Personal</h4>\r\n                  <div className=\"space-y-3\">\r\n                    <Checkbox\r\n                      label=\"Casco de Seguridad\"\r\n                      checked={formData.ppe.helmet || false}\r\n                      onChange={(e) => handlePPEChange('helmet', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                    <Checkbox\r\n                      label=\"Chaleco Reflectivo\"\r\n                      checked={formData.ppe.vest || false}\r\n                      onChange={(e) => handlePPEChange('vest', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                    <Checkbox\r\n                      label=\"Botas de Seguridad\"\r\n                      checked={formData.ppe.boots || false}\r\n                      onChange={(e) => handlePPEChange('boots', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-4\">\r\n                  <h4 className=\"text-sm font-medium text-foreground\">Equipo Adicional</h4>\r\n                  <div className=\"space-y-3\">\r\n                    <Checkbox\r\n                      label=\"Guantes de Trabajo\"\r\n                      checked={formData.ppe.gloves || false}\r\n                      onChange={(e) => handlePPEChange('gloves', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                    <Checkbox\r\n                      label=\"Gafas de Seguridad\"\r\n                      checked={formData.ppe.glasses || false}\r\n                      onChange={(e) => handlePPEChange('glasses', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                    <Checkbox\r\n                      label=\"Mascarilla\"\r\n                      checked={formData.ppe.mask || false}\r\n                      onChange={(e) => handlePPEChange('mask', e.target.checked)}\r\n                      disabled={mode === 'view'}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            step === 2 && (\r\n              <div className=\"space-y-6\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  <div className=\"space-y-4\">\r\n                    <h4 className=\"text-sm font-medium text-foreground\">Equipo de Protecci√≥n Personal</h4>\r\n                    <div className=\"space-y-3\">\r\n                      <Checkbox\r\n                        label=\"Casco de Seguridad\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.helmet ?? false) : formData.ppe.helmet}\r\n                        onChange={(e) => handlePPEChange('helmet', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                      <Checkbox\r\n                        label=\"Chaleco Reflectivo\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.vest ?? false) : formData.ppe.vest}\r\n                        onChange={(e) => handlePPEChange('vest', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                      <Checkbox\r\n                        label=\"Botas de Seguridad\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.boots ?? false) : formData.ppe.boots}\r\n                        onChange={(e) => handlePPEChange('boots', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"space-y-4\">\r\n                    <h4 className=\"text-sm font-medium text-foreground\">Equipo Adicional</h4>\r\n                    <div className=\"space-y-3\">\r\n                      <Checkbox\r\n                        label=\"Guantes de Trabajo\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.gloves ?? false) : formData.ppe.gloves}\r\n                        onChange={(e) => handlePPEChange('gloves', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                      <Checkbox\r\n                        label=\"Gafas de Seguridad\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.glasses ?? false) : formData.ppe.glasses}\r\n                        onChange={(e) => handlePPEChange('glasses', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                      <Checkbox\r\n                        label=\"Mascarilla\"\r\n                        checked={mode === 'view' ? (employee?.ppe?.mask ?? false) : formData.ppe.mask}\r\n                        onChange={(e) => handlePPEChange('mask', e.target.checked)}\r\n                        disabled={mode === 'view'}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )\r\n          )}\r\n\r\n          {/* Contacto de Emergencia */}\r\n          {!isEPPOnly && step === 3 && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <Input\r\n                  label=\"Nombre del Contacto\"\r\n                  value={mode === 'view' ? (employee?.emergencyContact?.name ?? '') : formData.emergencyContact.name}\r\n                  onChange={(e) => handleInputChange('emergencyContact.name', e.target.value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Input\r\n                  label=\"Tel√©fono de Contacto\"\r\n                  type=\"tel\"\r\n                  value={mode === 'view' ? (employee?.emergencyContact?.phone ?? '') : formData.emergencyContact.phone}\r\n                  onChange={(e) => handleInputChange('emergencyContact.phone', e.target.value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n                <Select\r\n                  label=\"Relaci√≥n\"\r\n                  options={relationshipOptions}\r\n                  value={mode === 'view' ? (employee?.emergencyContact?.relationship ?? '') : formData.emergencyContact.relationship}\r\n                  onChange={(value) => handleInputChange('emergencyContact.relationship', value)}\r\n                  disabled={mode === 'view'}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        {mode !== 'view' && (\r\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-border\">\r\n            <Button variant=\"outline\" onClick={onClose}>\r\n              Cancelar\r\n            </Button>\r\n            {/* Bot√≥n Anterior: solo si no es flujo EPP y no estamos en el primer paso */}\r\n            {!openedFromEPP && step > 0 && (\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => setStep((prev) => prev - 1)}\r\n                iconName=\"ArrowLeft\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Anterior\r\n              </Button>\r\n            )}\r\n            {/* Bot√≥n especial Guardar EPP */}\r\n            {openedFromEPP && step === 2 ? (\r\n              <Button\r\n                onClick={async () => {\r\n                  setLocalError(null);\r\n                  try {\r\n                    // Solo actualiza EPP\r\n                    const payload = {\r\n                      ppe: formData.ppe\r\n                    };\r\n                    let result;\r\n                    if (mode === 'edit' && formData.employeeId) {\r\n                      result = await updatePersonByEmpleadoId(formData.employeeId, payload);\r\n                      showSuccess('EPP actualizado correctamente ‚úÖ');\r\n                    }\r\n                    if (onSave) onSave(result);\r\n                    onClose();\r\n                  } catch (error) {\r\n                    console.error(\"Error al guardar EPP:\", error);\r\n                    if (error?.status === 409 && error?.data?.error?.includes('correo')) {\r\n                      setLocalError(error);\r\n                    }\r\n                  }\r\n                }}\r\n                iconName=\"Save\"\r\n                iconPosition=\"left\"\r\n                disabled={localError?.status === 409 && localError?.data?.error?.includes('correo')}\r\n              >\r\n                Guardar EPP\r\n              </Button>\r\n            ) : (\r\n              step < steps.length - 1 ? (\r\n                <Button\r\n                  onClick={() => setStep((prev) => prev + 1)}\r\n                  iconName=\"ArrowRight\"\r\n                  iconPosition=\"right\"\r\n                  disabled={localError?.status === 409 && localError?.data?.error?.includes('correo')}\r\n                >\r\n                  Siguiente\r\n                </Button>\r\n              ) : (\r\n                <Button\r\n                  onClick={async () => {\r\n                    setLocalError(null);\r\n                    try {\r\n                      // Unificar todos los datos para guardar\r\n                      const payload = {\r\n                        nombreCompleto: formData.name,\r\n                        empleadoId: formData.employeeId,\r\n                        email: formData.email,\r\n                        telefono: formData.phone,\r\n                        departamento: formData.department,\r\n                        puesto: formData.position,\r\n                        fechaIngreso: formData.hireDate,\r\n                        estado: formData.status,\r\n                        medicalStudies: formData.medicalStudies,\r\n                        ppe: formData.ppe,\r\n                        certifications: formData.certifications,\r\n                        emergencyContact: formData.emergencyContact\r\n                      };\r\n                      let result;\r\n                      if (mode === 'edit' && formData.employeeId) {\r\n                        result = await updatePersonByEmpleadoId(formData.employeeId, payload);\r\n                        showSuccess('Empleado actualizado correctamente ‚úÖ');\r\n                      } else {\r\n                        result = await createPerson({ ...payload, activo: true });\r\n                        showSuccess('Empleado registrado correctamente ‚úÖ');\r\n                      }\r\n                      if (onSave) onSave(result);\r\n                      onClose();\r\n                    } catch (error) {\r\n                      console.error(\"Error al guardar:\", error);\r\n                      if (error?.status === 409 && error?.data?.error?.includes('correo')) {\r\n                        setLocalError(error);\r\n                      }\r\n                    }\r\n                  }}\r\n                  iconName=\"Save\"\r\n                  iconPosition=\"left\"\r\n                  disabled={localError?.status === 409 && localError?.data?.error?.includes('correo')}\r\n                >\r\n                  {mode === 'create' ? 'Crear Empleado' : 'Guardar Cambios'}\r\n                </Button>\r\n              )\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonnelModal;","import React, { useState, useEffect, useMemo } from 'react';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport Button from '../../components/ui/Button';\r\nimport PersonnelTable from './components/PersonnelTable';\r\nimport FilterToolbar from './components/FilterToolbar';\r\nimport ComplianceDashboard from './components/ComplianceDashboard';\r\nimport PersonnelModal from './components/PersonnelModal';\r\nimport usePerson from '../../hooks/usePerson'; \r\n\r\nconst PersonnelManagement = () => {\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [activeView, setActiveView] = useState('personnel');\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    department: '',\r\n    status: '',\r\n    position: '',\r\n    medicalCompliance: '',\r\n    ppeCompliance: '',\r\n    hireDateFrom: '',\r\n    hireDateTo: ''\r\n  });\r\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\r\n  const [modalMode, setModalMode] = useState(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [initialStep, setInitialStep] = useState(0); // 0: general, 1: medical, 2: ppe, 3: emergency\r\n  const [openedFromEPP, setOpenedFromEPP] = useState(false);\r\n\r\n  // ‚úÖ Hook original\r\n  const { persons, loading, error, getPersons } = usePerson();\r\n\r\n  useEffect(() => {\r\n    getPersons(); // cargar empleados\r\n  }, []);\r\n\r\n  // ‚úÖ L√≥gica de filtrado robusta\r\n  const filteredPersonnel = useMemo(() => {\r\n  if (!persons) return [];\r\n\r\n  return persons.filter((employee) => {\r\n    const searchTerm = filters.search?.toLowerCase().trim() || '';\r\n\r\n    const matchSearch =\r\n      !searchTerm ||\r\n      employee?.nombreCompleto?.toLowerCase()?.includes(searchTerm) ||\r\n      employee?.empleadoId?.toLowerCase()?.includes(searchTerm) ||\r\n      employee?.puesto?.toLowerCase()?.includes(searchTerm);\r\n\r\n    const matchDept =\r\n      !filters.department ||\r\n      employee?.departamento?.toLowerCase() === filters.department.toLowerCase();\r\n\r\n    const matchStatus =\r\n      !filters.status ||\r\n      employee?.estado?.toLowerCase() === filters.status.toLowerCase();\r\n\r\n    const matchPosition =\r\n      !filters.position ||\r\n      employee?.puesto?.toLowerCase() === filters.position.toLowerCase();\r\n\r\n    // ‚ùå Eliminamos o comentamos estos porque NO existen en tu base\r\n    // const matchMedical =\r\n    //   !filters.medicalCompliance ||\r\n    //   employee?.cumplimientoMedico?.toLowerCase() ===\r\n    //     filters.medicalCompliance.toLowerCase();\r\n\r\n    // const matchPPE =\r\n    //   !filters.ppeCompliance ||\r\n    //   employee?.cumplimientoEPP?.toLowerCase() ===\r\n    //     filters.ppeCompliance.toLowerCase();\r\n\r\n    const matchHireDateFrom =\r\n      !filters.hireDateFrom ||\r\n      new Date(employee?.fechaIngreso) >= new Date(filters.hireDateFrom);\r\n\r\n    const matchHireDateTo =\r\n      !filters.hireDateTo ||\r\n      new Date(employee?.fechaIngreso) <= new Date(filters.hireDateTo);\r\n\r\n    return (\r\n      matchSearch &&\r\n      matchDept &&\r\n      matchStatus &&\r\n      matchPosition &&\r\n      matchHireDateFrom &&\r\n      matchHireDateTo\r\n    );\r\n  });\r\n}, [persons, filters]);\r\n\r\n  // ‚úÖ Acciones UI\r\n  const handleViewProfile = (employee) => {\r\n    setSelectedEmployee(employee);\r\n    setModalMode('view');\r\n    setInitialStep(0);\r\n    setOpenedFromEPP(false);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleEditPersonnel = (employee) => {\r\n    setSelectedEmployee(employee);\r\n    setModalMode('edit');\r\n    setInitialStep(0);\r\n    setOpenedFromEPP(false);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleCreatePersonnel = () => {\r\n    setSelectedEmployee(null);\r\n    setModalMode('create');\r\n    setInitialStep(0);\r\n    setOpenedFromEPP(false);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleAssignPPE = (employee) => {\r\n    setSelectedEmployee(employee);\r\n    setModalMode('edit');\r\n    setInitialStep(2); // Abrir directamente en el paso de EPP\r\n    setOpenedFromEPP(true);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  // Eliminar duplicados: las funciones ya est√°n arriba con initialStep\r\n\r\n  const handleSavePersonnel = async (personnelData) => {\r\n  try {\r\n    // Si tienes create/update dentro del hook usePerson, puedes llamarlos as√≠:\r\n    // await savePerson(personnelData);  // Ejemplo: si existe esa funci√≥n\r\n\r\n    // üëá Pero para asegurar que la tabla se actualiza:\r\n    await getPersons(); // üîÑ Refresca la lista actualizada desde el backend\r\n\r\n    setIsModalOpen(false); // Cierra el modal\r\n    setSelectedEmployee(null);\r\n    setModalMode(null);\r\n\r\n  } catch (err) {\r\n    console.error(\"Error al guardar el empleado:\", err);\r\n  }\r\n};\r\n\r\n\r\n  const handleClearFilters = () => {\r\n    setFilters({\r\n      search: '',\r\n      department: '',\r\n      status: '',\r\n      position: '',\r\n      medicalCompliance: '',\r\n      ppeCompliance: '',\r\n      hireDateFrom: '',\r\n      hireDateTo: ''\r\n    });\r\n  };\r\n\r\n  const handleExportData = () => {\r\n    if (!filteredPersonnel || filteredPersonnel.length === 0) {\r\n      alert('No hay datos para exportar');\r\n      return;\r\n    }\r\n\r\n    // Preparar los datos para exportar con TODOS los campos disponibles\r\n    const dataToExport = filteredPersonnel.map(emp => {\r\n      // Extraer datos de objetos anidados\r\n      const medicalStudies = Array.isArray(emp.examenesMedicos) && emp.examenesMedicos[0] \r\n        ? emp.examenesMedicos[0] \r\n        : emp.medicalStudies || {};\r\n      \r\n      const ppe = Array.isArray(emp.equipos) && emp.equipos[0]\r\n        ? emp.equipos[0]\r\n        : emp.ppe || {};\r\n      \r\n      const emergencyContact = Array.isArray(emp.contactoEmergencia) && emp.contactoEmergencia[0]\r\n        ? emp.contactoEmergencia[0]\r\n        : emp.emergencyContact || {};\r\n\r\n      return {\r\n        'Nombre Completo': emp.nombreCompleto || '',\r\n        'ID Empleado': emp.empleadoId || '',\r\n        'Departamento': emp.departamento || '',\r\n        'Puesto': emp.puesto || '',\r\n        'Estado': emp.estado || '',\r\n        'Estudios M√©dicos': medicalStudies.status || (emp.estado === 'Activo' ? 'Completo' : 'Pendiente'),\r\n        'EPP': emp.estado === 'Activo' ? 'Completo' : 'Pendiente',\r\n        'Fecha de Ingreso': emp.fechaIngreso || '',\r\n        'Email': emp.email || '',\r\n        'Tel√©fono': emp.telefono || '',\r\n        'Direcci√≥n': emp.direccion || '',\r\n        'Fecha de Nacimiento': emp.fechaNacimiento || '',\r\n        'NSS': emp.nss || '',\r\n        'CURP': emp.curp || '',\r\n        'RFC': emp.rfc || '',\r\n        '√öltimo Examen M√©dico': medicalStudies.lastExam || '',\r\n        'Pr√≥ximo Examen M√©dico': medicalStudies.nextExam || '',\r\n        'Casco': ppe.helmet ? 'S√≠' : 'No',\r\n        'Chaleco': ppe.vest ? 'S√≠' : 'No',\r\n        'Botas': ppe.boots ? 'S√≠' : 'No',\r\n        'Guantes': ppe.gloves ? 'S√≠' : 'No',\r\n        'Lentes': ppe.glasses ? 'S√≠' : 'No',\r\n        'Mascarilla': ppe.mask ? 'S√≠' : 'No',\r\n        'Contacto de Emergencia': emergencyContact.name || '',\r\n        'Tel√©fono de Emergencia': emergencyContact.phone || '',\r\n        'Relaci√≥n con Contacto': emergencyContact.relationship || ''\r\n      };\r\n    });\r\n\r\n    // Convertir a CSV\r\n    const headers = Object.keys(dataToExport[0]);\r\n    const csvContent = [\r\n      headers.join(','),\r\n      ...dataToExport.map(row => \r\n        headers.map(header => {\r\n          const value = row[header];\r\n          // Escapar comillas y envolver en comillas si contiene comas\r\n          const escaped = String(value).replace(/\"/g, '\"\"');\r\n          return `\"${escaped}\"`;\r\n        }).join(',')\r\n      )\r\n    ].join('\\n');\r\n\r\n    // Crear el archivo y descargarlo\r\n    const blob = new Blob(['\\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    const url = URL.createObjectURL(blob);\r\n    \r\n    const fecha = new Date().toISOString().split('T')[0];\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `personal_${fecha}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    \r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const handleViewComplianceDetails = (type) => {\r\n  // console.log eliminado\r\n  };\r\n\r\n  const handleScheduleTraining = () => {\r\n  // console.log eliminado\r\n  };\r\n\r\n  const handleSidebarToggle = () => {\r\n    setSidebarCollapsed(!sidebarCollapsed);\r\n  };\r\n\r\n  const handleMobileMenuToggle = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n  };\r\n\r\n  // ‚úÖ Mock dashboard data\r\n  const mockComplianceData = {\r\n    totalEmployees: persons?.length || 0,\r\n    overallCompliance: 78,\r\n    upcomingExpirations: 8,\r\n    medicalStudies: {\r\n      total: persons?.length || 0,\r\n      expired: 3,\r\n      pending: 7,\r\n      complete: 35\r\n    },\r\n    ppe: {\r\n      total: persons?.length || 0,\r\n      assigned: 42,\r\n      pending: 3\r\n    },\r\n    training: {\r\n      pending: 12,\r\n      scheduled: 8,\r\n      completed: 25\r\n    },\r\n    documents: {\r\n      missing: 5,\r\n      pending: 8,\r\n      complete: 32\r\n    },\r\n    alerts: [\r\n      {\r\n        id: 1,\r\n        title: 'Estudios m√©dicos vencidos',\r\n        description:\r\n          '3 empleados tienen estudios m√©dicos vencidos que requieren atenci√≥n inmediata',\r\n        date: '30/09/2024',\r\n        priority: 'critical',\r\n        type: 'medical'\r\n      },\r\n      {\r\n        id: 2,\r\n        title: 'EPP pendiente de asignaci√≥n',\r\n        description:\r\n          '3 empleados necesitan asignaci√≥n de equipo de protecci√≥n personal',\r\n        date: '29/09/2024',\r\n        priority: 'warning',\r\n        type: 'ppe'\r\n      },\r\n      {\r\n        id: 3,\r\n        title: 'Capacitaciones programadas',\r\n        description:\r\n          '8 empleados tienen capacitaciones programadas para la pr√≥xima semana',\r\n        date: '28/09/2024',\r\n        priority: 'good',\r\n        type: 'training'\r\n      }\r\n    ]\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={handleSidebarToggle} />\r\n      </div>\r\n\r\n      {/* Header m√≥vil */}\r\n      <div className=\"lg:hidden\">\r\n        <Header onMenuToggle={handleMobileMenuToggle} isMenuOpen={mobileMenuOpen} />\r\n      </div>\r\n\r\n      {/* Contenido principal */}\r\n      <div\r\n        className={`transition-all duration-300 ${\r\n          sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n        } lg:pt-0`}\r\n      >\r\n        <div className=\"p-6\">\r\n          {/* Breadcrumb */}\r\n          <div className=\"mb-6\">\r\n            <Breadcrumb />\r\n          </div>\r\n\r\n          {/* Encabezado */}\r\n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-8\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-foreground\">Gesti√≥n de Personal</h1>\r\n              <p className=\"text-muted-foreground mt-2\">\r\n                Administraci√≥n integral de recursos humanos, estudios m√©dicos y EPP\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"flex items-center bg-card border border-border rounded-lg p-1\">\r\n                <Button\r\n                  variant={activeView === 'personnel' ? 'default' : 'ghost'}\r\n                  size=\"sm\"\r\n                  onClick={() => setActiveView('personnel')}\r\n                  iconName=\"Users\"\r\n                  iconPosition=\"left\"\r\n                  iconSize={16}\r\n                >\r\n                  Personal\r\n                </Button>\r\n                {/* TODO: Habilitar cuando se implemente cumplimiento */}\r\n                {/* <Button\r\n                  variant={activeView === 'compliance' ? 'default' : 'ghost'}\r\n                  size=\"sm\"\r\n                  onClick={() => setActiveView('compliance')}\r\n                  iconName=\"Shield\"\r\n                  iconPosition=\"left\"\r\n                  iconSize={16}\r\n                >\r\n                  Cumplimiento\r\n                </Button> */}\r\n              </div>\r\n\r\n              <Button\r\n                onClick={handleCreatePersonnel}\r\n                iconName=\"UserPlus\"\r\n                iconPosition=\"left\"\r\n                iconSize={16}\r\n              >\r\n                Nuevo Empleado\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Vista principal */}\r\n          {activeView === 'personnel' ? (\r\n            <div className=\"space-y-6\">\r\n              <FilterToolbar\r\n                filters={filters}\r\n                onFilterChange={setFilters}\r\n                onClearFilters={handleClearFilters}\r\n                onExportData={handleExportData}\r\n                totalCount={persons?.length || 0}\r\n                filteredCount={filteredPersonnel?.length || 0}\r\n              />\r\n\r\n              <PersonnelTable\r\n  personnel={filteredPersonnel}\r\n  onViewProfile={handleViewProfile}\r\n  onEditPersonnel={handleEditPersonnel}\r\n  onAssignPPE={handleAssignPPE}\r\n/>\r\n\r\n            </div>\r\n          ) : (\r\n            <ComplianceDashboard\r\n              complianceData={mockComplianceData}\r\n              onViewDetails={handleViewComplianceDetails}\r\n              onScheduleTraining={handleScheduleTraining}\r\n            />\r\n          )}\r\n\r\n          {/* Modal */}\r\n          <PersonnelModal\r\n            isOpen={isModalOpen}\r\n            onClose={() => {\r\n              setIsModalOpen(false);\r\n              setSelectedEmployee(null);\r\n              setModalMode(null);\r\n              setInitialStep(0);\r\n              setOpenedFromEPP(false);\r\n            }}\r\n            employee={selectedEmployee}\r\n            mode={modalMode}\r\n            initialStep={initialStep}\r\n            openedFromEPP={openedFromEPP}\r\n            onSave={handleSavePersonnel}\r\n            error={error}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonnelManagement;\r\n","import { useState, useCallback, useRef } from 'react';\r\nimport { useNotifications } from '../context/NotificationContext';\r\nimport clientService from '../services/clientService';\r\n\r\nconst useClient = () => {\r\n  const { showOperationSuccess, showHttpError } = useNotifications();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const [clients, setClients] = useState([]);\r\n  const loadingRef = useRef(false); // Ref para evitar llamadas concurrentes\r\n  const hasLoadedRef = useRef(false); // Ref para rastrear si ya se cargaron los clientes\r\n  const clientsRef = useRef([]); // Ref para acceder a los clientes sin dependencias\r\n\r\n  const getClients = useCallback(async (force = false) => {\r\n    // Si ya hay clientes cargados y no se fuerza, no hacer la petici√≥n\r\n    if (!force && hasLoadedRef.current && !loadingRef.current) {\r\n      return clientsRef.current;\r\n    }\r\n\r\n    // Si ya hay una petici√≥n en curso, no hacer otra\r\n    if (loadingRef.current) {\r\n      return clientsRef.current;\r\n    }\r\n\r\n    loadingRef.current = true;\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n  const response = await clientService.getClients();\r\n  setClients(Array.isArray(response) ? response : response?.data || []);\r\n  // console.log eliminado\r\n  return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      setClients([]);\r\n      clientsRef.current = []; // Resetear el ref\r\n      hasLoadedRef.current = false; // Resetear el flag en caso de error\r\n      // No mostrar notificaci√≥n, solo actualizar el estado de error\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n      loadingRef.current = false;\r\n    }\r\n  }, []); // Sin dependencias para que la funci√≥n sea estable\r\n\r\n  const createClient = useCallback(async (clientData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      const response = await clientService.createClient(clientData);\r\n      setSuccess(true);\r\n      if (response && response.success && response.data) {\r\n        setClients(prevClients => {\r\n          const newClients = [...prevClients, response.data];\r\n          clientsRef.current = newClients; // Actualizar el ref\r\n          return newClients;\r\n        });\r\n        showOperationSuccess('Cliente guardado exitosamente');\r\n      }\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      setSuccess(false);\r\n      showHttpError('Error al guardar cliente');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  const editClient = useCallback(async (id, clientData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      const response = await clientService.updateClient(id, clientData);\r\n      setSuccess(true);\r\n      if (response && response.success && response.data) {\r\n        setClients(prevClients => {\r\n          const newClients = prevClients.map(c =>\r\n            (c.id === id || c._id === id)\r\n              ? { ...c, ...response.data, id: c.id || c._id }\r\n              : c\r\n          );\r\n          clientsRef.current = newClients; // Actualizar el ref\r\n          return newClients;\r\n        });\r\n        showOperationSuccess('Cliente actualizado exitosamente');\r\n      } else if (response && response.success) {\r\n        setClients(prevClients => {\r\n          const newClients = prevClients.map(c =>\r\n            (c.id === id || c._id === id)\r\n              ? { ...c, ...clientData, id: c.id || c._id }\r\n              : c\r\n          );\r\n          clientsRef.current = newClients; // Actualizar el ref\r\n          return newClients;\r\n        });\r\n        showOperationSuccess('Cliente actualizado exitosamente');\r\n      }\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      setSuccess(false);\r\n      showHttpError('Error al actualizar cliente');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  return { clients, getClients, createClient, editClient, loading, error, success, setClients };\r\n};\r\n\r\nexport default useClient;\r\n","// src/services/communicationService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst communicationService = {\r\n  async getComunicacionByCotizacionId(cotizacionId) {\r\n    // GET al endpoint comunicaciones/cotizacion/{cotizacionId}\r\n    const response = await httpService.get(\r\n      `/comunicaciones/cotizacion/${cotizacionId}`\r\n    );\r\n    return response;\r\n  },\r\n  async createCommunication(data) {\r\n    // POST al endpoint comunicacion/crear (para oportunidades)\r\n    const response = await httpService.post(\"/comunicacion/crear\", data);\r\n    return response;\r\n  },\r\n\r\n  async createCotizacionCommunication(data) {\r\n    // POST al endpoint comunicacion/cotizacion/crear (para cotizaciones)\r\n    const response = await httpService.post(\r\n      \"/comunicacion/cotizacion/crear\",\r\n      data\r\n    );\r\n    return response;\r\n  },\r\n\r\n  async getComunicacionesByCliente(clienteId) {\r\n    // GET al endpoint comunicaciones/cliente/{clienteId}\r\n    // Suprimir errores 404 (es normal que no haya comunicaciones al inicio)\r\n    try {\r\n      const response = await httpService.get(\r\n        `/comunicaciones/cliente/${clienteId}`,\r\n        {\r\n          validateStatus: (status) => status === 200 || status === 404,\r\n        }\r\n      );\r\n      return response;\r\n    } catch (error) {\r\n      // Si falla por cualquier raz√≥n, retornar vac√≠o\r\n      return { data: { comunicaciones: [] } };\r\n    }\r\n  },\r\n\r\n  async getComunicacionesByOportunidad(oportunidadId) {\r\n    // GET al endpoint comunicaciones/oportunidad/{oportunidadId}\r\n    try {\r\n      const response = await httpService.get(\r\n        `/comunicaciones/oportunidad/${oportunidadId}`,\r\n        {\r\n          validateStatus: (status) => status === 200 || status === 404,\r\n        }\r\n      );\r\n      return response;\r\n    } catch (error) {\r\n      // Si falla por cualquier raz√≥n, retornar vac√≠o\r\n      return { data: { comunicaciones: [] } };\r\n    }\r\n  },\r\n};\r\n\r\nexport default communicationService;\r\n","// src/hooks/useCommunication.js\r\nimport { useState } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport communicationService from \"../services/communicationService\";\r\n\r\nconst useCommunication = () => {\r\n  const getComunicacionByCotizacionId = async (cotizacionId) => {\r\n    // console.log eliminado\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await communicationService.getComunicacionByCotizacionId(\r\n        cotizacionId\r\n      );\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError(\"Error al obtener comunicaci√≥n por cotizaci√≥n\");\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const { showOperationSuccess, showHttpError } = useNotifications();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const createCommunication = async (commData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      const response = await communicationService.createCommunication(commData);\r\n      setSuccess(true);\r\n      showOperationSuccess(\"Comunicaci√≥n enviada exitosamente\");\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      setSuccess(false);\r\n      showHttpError(\"Error al enviar comunicaci√≥n\");\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createCotizacionCommunication = async (commData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      const response = await communicationService.createCotizacionCommunication(\r\n        commData\r\n      );\r\n      setSuccess(true);\r\n      showOperationSuccess(\"Comunicaci√≥n de cotizaci√≥n enviada exitosamente\");\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      setSuccess(false);\r\n      showHttpError(\"Error al enviar comunicaci√≥n de cotizaci√≥n\");\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getComunicacionesByCliente = async (clienteId) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await communicationService.getComunicacionesByCliente(\r\n        clienteId\r\n      );\r\n      return response;\r\n    } catch (err) {\r\n      // No hacer nada si no hay comunicaciones (404 es normal)\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getComunicacionesByOportunidad = async (oportunidadId) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response =\r\n        await communicationService.getComunicacionesByOportunidad(\r\n          oportunidadId\r\n        );\r\n      return response;\r\n    } catch (err) {\r\n      // No hacer nada si no hay comunicaciones (404 es normal)\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    createCommunication,\r\n    createCotizacionCommunication,\r\n    getComunicacionesByCliente,\r\n    getComunicacionesByOportunidad,\r\n    getComunicacionByCotizacionId,\r\n    loading,\r\n    error,\r\n    success,\r\n  };\r\n};\r\n\r\nexport default useCommunication;\r\n","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\n\r\nconst ClientCard = ({ client, onViewDetails, onEditClient, onViewProjects, onViewContracts }) => {\r\n  // Funci√≥n para capitalizar la primera letra\r\n  const capitalize = (text) => {\r\n    if (!text) return '';\r\n    const str = String(text);\r\n    return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    const normalizedStatus = (status || '').toString().toLowerCase();\r\n    switch (normalizedStatus) {\r\n      case 'activo':\r\n        return 'bg-success text-success-foreground';\r\n      case 'inactivo':\r\n        return 'bg-error text-error-foreground';\r\n      case 'pendiente':\r\n        return 'bg-warning text-warning-foreground';\r\n      case 'prospecto':\r\n        return 'bg-info text-info-foreground';\r\n      default:\r\n        return 'bg-secondary text-secondary-foreground';\r\n    }\r\n  };\r\n\r\n  const getHealthColor = (health) => {\r\n    const normalizedHealth = (health || '').toString().toLowerCase();\r\n    switch (normalizedHealth) {\r\n      case 'excelente':\r\n        return 'text-success';\r\n      case 'buena':\r\n        return 'text-primary';\r\n      case 'regular':\r\n        return 'text-warning';\r\n      case 'mala':\r\n        return 'text-error';\r\n      default:\r\n        return 'text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 card-shadow hover:shadow-md transition-smooth flex flex-col h-full min-w-[340px] max-w-[440px] max-h-[480px] min-h-[340px] overflow-hidden\">\r\n      <div className=\"flex items-start justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-4 min-w-0\">\r\n          <div className=\"w-12 h-12 bg-primary rounded-lg flex items-center justify-center flex-shrink-0\">\r\n            <Icon name=\"Building2\" size={24} color=\"white\" />\r\n          </div>\r\n          <div className=\"min-w-0 flex-1\">\r\n            <h3 className=\"text-lg font-semibold text-foreground truncate w-full max-w-full\">{String(client?.companyName || client?.empresa || '')}</h3>\r\n            <p className=\"text-sm text-muted-foreground truncate w-full max-w-full\">{String(client?.industry || client?.industria || '')}</p>\r\n            <div className=\"flex items-center space-x-2 mt-1 flex-wrap\">\r\n              <span className={`px-2 py-1 text-xs rounded-full ${getStatusColor(client?.status || client?.estado)} truncate max-w-[90px]`}>\r\n                {capitalize(client?.status || client?.estado || '')}\r\n              </span>\r\n              <span className={`text-xs font-medium ${getHealthColor(client?.relationshipHealth || client?.relacion)} truncate max-w-[90px]`}>\r\n                Relaci√≥n: {capitalize(client?.relationshipHealth || client?.relacion || '')}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          onClick={() => onViewDetails(client)}\r\n          title=\"Ver detalles\"\r\n        >\r\n          <Icon name=\"MoreVertical\" size={16} />\r\n        </Button>\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n        <div className=\"space-y-2 min-w-0\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"User\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">{String(client?.contactPerson || client?.contacto || '')}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Mail\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">{String(client?.email || '')}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Phone\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">{String(client?.phone || client?.telefono || '')}</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"MapPin\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">\r\n              {client?.ubicacionEmpre?.municipio || ''}{client?.ubicacionEmpre?.municipio && client?.ubicacionEmpre?.estado ? ', ' : ''}{client?.ubicacionEmpre?.estado || ''}\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Calendar\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">Cliente desde: {String(client?.clientSince || client?.fechaDesde || '')}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"FileText\" size={16} className=\"text-muted-foreground\" />\r\n            <span className=\"text-sm text-foreground truncate max-w-full\">RFC: {String(client?.rfc || '').substring(0, 18)}{client?.rfc && client?.rfc.length > 18 ? '...' : ''}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between pt-4 border-t border-border gap-4\">\r\n        <div className=\"grid grid-cols-3 gap-4 min-w-0 w-full\">\r\n          <div className=\"flex flex-col items-center\">\r\n            <div className=\"text-lg font-semibold text-foreground\">{Number(client?.totalProjects) || 0}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Proyectos</div>\r\n          </div>\r\n          <div className=\"flex flex-col items-center\">\r\n            <div className=\"text-lg font-semibold text-foreground\">{Number(client?.activeContracts) || 0}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Contratos</div>\r\n          </div>\r\n          <div className=\"flex flex-col items-center\">\r\n            <div className=\"text-lg font-semibold text-success\">${Number(client?.totalValue) ? Number(client?.totalValue).toLocaleString('es-MX', {minimumFractionDigits: 2}) : '0.00'}</div>\r\n            <div className=\"text-xs text-muted-foreground\">Valor Total</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex flex-wrap items-center gap-2 mt-2 md:mt-0\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onViewProjects(client)}\r\n            iconName=\"FolderOpen\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Proyectos\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => onViewContracts(client)}\r\n            iconName=\"FileText\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Contratos\r\n          </Button>\r\n          <Button\r\n            variant=\"default\"\r\n            size=\"sm\"\r\n            onClick={() => onEditClient(client)}\r\n            iconName=\"Edit\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Editar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientCard;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\nconst ClientTable = ({ clients, onViewDetails, onEditClient, onViewProjects, onViewContracts }) => {\r\n  const [sortField, setSortField] = useState('empresa');\r\n  const [sortDirection, setSortDirection] = useState('asc');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  const handleSort = (field) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection('asc');\r\n    }\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const sortedClients = [...clients]?.sort((a, b) => {\r\n    const aValue = a?.[sortField] || '';\r\n    const bValue = b?.[sortField] || '';\r\n    if (sortDirection === 'asc') {\r\n      return aValue > bValue ? 1 : -1;\r\n    } else {\r\n      return aValue < bValue ? 1 : -1;\r\n    }\r\n  });\r\n\r\n  // Calcular datos de paginaci√≥n\r\n  const totalItems = sortedClients.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedClients = sortedClients.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  // Funci√≥n para capitalizar la primera letra\r\n  const capitalize = (text) => {\r\n    if (!text) return '';\r\n    const str = String(text);\r\n    return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    const normalizedStatus = (status || '').toString().toLowerCase();\r\n    switch (normalizedStatus) {\r\n      case 'activo':\r\n        return 'bg-success text-success-foreground';\r\n      case 'inactivo':\r\n        return 'bg-error text-error-foreground';\r\n      case 'pendiente':\r\n        return 'bg-warning text-warning-foreground';\r\n      case 'prospecto':\r\n        return 'bg-info text-info-foreground';\r\n      default:\r\n        return 'bg-secondary text-secondary-foreground';\r\n    }\r\n  };\r\n\r\n  const getHealthColor = (health) => {\r\n    const normalizedHealth = (health || '').toString().toLowerCase();\r\n    switch (normalizedHealth) {\r\n      case 'excelente':\r\n        return 'text-success';\r\n      case 'buena':\r\n        return 'text-primary';\r\n      case 'regular':\r\n        return 'text-warning';\r\n      case 'mala':\r\n        return 'text-error';\r\n      default:\r\n        return 'text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  const SortableHeader = ({ field, children }) => (\r\n    <th\r\n      className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted transition-smooth\"\r\n      onClick={() => handleSort(field)}\r\n    >\r\n      <div className=\"flex items-center space-x-1\">\r\n        <span>{children}</span>\r\n        <Icon\r\n          name={\r\n            sortField === field\r\n              ? sortDirection === 'asc'\r\n                ? 'ChevronUp'\r\n                : 'ChevronDown'\r\n              : 'ChevronsUpDown'\r\n          }\r\n          size={14}\r\n        />\r\n      </div>\r\n    </th>\r\n  );\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden card-shadow overflow-x-auto\">\r\n      <table className=\"min-w-full divide-y divide-border\">\r\n        <thead className=\"bg-muted\">\r\n          <tr>\r\n            <SortableHeader field=\"empresa\">Empresa</SortableHeader>\r\n            <SortableHeader field=\"contacto\">Contacto</SortableHeader>\r\n            <SortableHeader field=\"industria\">Industria</SortableHeader>\r\n            <SortableHeader field=\"ubicacionEmpre\">Ubicaci√≥n</SortableHeader>\r\n            <SortableHeader field=\"estado\">Estado</SortableHeader>\r\n            {/* <SortableHeader field=\"relacion\">Relaci√≥n</SortableHeader>\r\n            <SortableHeader field=\"totalProjects\">Proyectos</SortableHeader>\r\n            <SortableHeader field=\"totalValue\">Valor Total</SortableHeader> */}\r\n            <th className=\"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n              Acciones\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"bg-card divide-y divide-border\">\r\n          {paginatedClients?.map((client) => (\r\n            <tr key={client?.id || client?._id || client?.empresa} className=\"hover:bg-muted transition-smooth\">\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"w-10 h-10 bg-primary rounded-lg flex items-center justify-center flex-shrink-0\">\r\n                    <Icon name=\"Building2\" size={16} color=\"white\" />\r\n                  </div>\r\n                  <div className=\"ml-4\">\r\n                    <div className=\"text-sm font-medium text-foreground\">{String(client?.empresa || '')}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">RFC: {String(client?.rfc || '')}</div>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"text-sm text-foreground\">{String(client?.contacto || '')}</div>\r\n                <div className=\"text-sm text-muted-foreground\">{String(client?.email || '')}</div>\r\n                <div className=\"text-sm text-muted-foreground\">{String(client?.telefono || '')}</div>\r\n              </td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-foreground\">{String(client?.industria || '')}</td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"text-sm text-foreground\">\r\n                  {client?.ubicacionEmpre?.municipio || ''}{client?.ubicacionEmpre?.municipio && client?.ubicacionEmpre?.estado ? ', ' : ''}{client?.ubicacionEmpre?.estado || ''}\r\n                </div>\r\n                {client?.ubicacion?.direccion && (\r\n                  <div className=\"text-xs text-muted-foreground max-w-[200px] truncate\" title={client.ubicacion.direccion}>\r\n                    {String(client.ubicacion.direccion)}\r\n                  </div>\r\n                )}\r\n              </td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <span className={`px-2 py-1 text-xs rounded-full ${getStatusColor(client?.estado)}`}>\r\n                  {capitalize(client?.estado || '')}\r\n                </span>\r\n              </td>\r\n              {/* <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <span className={`text-sm font-medium ${getHealthColor(client?.relacion)}`}>\r\n                  {capitalize(client?.relacion || '')}\r\n                </span>\r\n              </td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"text-sm text-foreground\">{Number(client?.totalProjects || 0)}</div>\r\n                <div className=\"text-xs text-muted-foreground\">{Number(client?.activeContracts || 0)} contratos</div>\r\n              </td>\r\n              <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                <div className=\"text-sm font-semibold text-success\">\r\n                  ${Number(client?.totalValue || 0).toLocaleString('es-MX')}\r\n                </div>\r\n              </td> */}\r\n              <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                <div className=\"flex items-center justify-end space-x-2\">\r\n                  {/* <Button variant=\"ghost\" size=\"sm\" onClick={() => onViewProjects(client)} title=\"Ver proyectos\">\r\n                    <Icon name=\"FolderOpen\" size={16} />\r\n                  </Button>\r\n                  <Button variant=\"ghost\" size=\"sm\" onClick={() => onViewContracts(client)} title=\"Ver contratos\">\r\n                    <Icon name=\"FileText\" size={16} />\r\n                  </Button> */}\r\n                  <Button variant=\"ghost\" size=\"sm\" onClick={() => onEditClient(client)} title=\"Editar cliente\">\r\n                    <Icon name=\"Edit\" size={16} />\r\n                  </Button>\r\n                  {/* <Button variant=\"ghost\" size=\"sm\" onClick={() => onViewDetails(client)} title=\"Ver detalles\">\r\n                    <Icon name=\"Eye\" size={16} />\r\n                  </Button> */}\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Paginaci√≥n */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n          <select\r\n            value={pageSize}\r\n            onChange={handleChangePageSize}\r\n            className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n          >\r\n            {PAGE_SIZE_OPTIONS.map((opt) => (\r\n              <option key={opt} value={opt}>{opt}</option>\r\n            ))}\r\n          </select>\r\n          <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n          <span className=\"text-xs text-muted-foreground ml-3\">\r\n            Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n          <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n          <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientTable;\r\n","import React from 'react';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst ClientFilters = ({ \r\n  filters, \r\n  onFiltersChange, \r\n  onClearFilters, \r\n  onExport,\r\n  estados = []\r\n}) => {\r\n  const industryOptions = [\r\n    { value: '', label: 'Todas las industrias' },\r\n    { value: 'Manufactura', label: 'Manufactura' },\r\n    { value: 'Comercial', label: 'Comercial' },\r\n    { value: 'Hospitalidad', label: 'Hospitalidad' },\r\n    { value: 'Educaci√≥n', label: 'Educaci√≥n' },\r\n    { value: 'Salud', label: 'Salud' },\r\n    { value: 'Retail', label: 'Retail' },\r\n    { value: 'Oficinas', label: 'Oficinas' },\r\n    { value: 'Residencial', label: 'Residencial' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los estados' },\r\n    { value: 'Activo', label: 'Activo' },\r\n    { value: 'Inactivo', label: 'Inactivo' },\r\n    { value: 'Pendiente', label: 'Pendiente' }\r\n  ];\r\n\r\n  const relationshipOptions = [\r\n    { value: '', label: 'Todas las relaciones' },\r\n    { value: 'Excelente', label: 'Excelente' },\r\n    { value: 'Buena', label: 'Buena' },\r\n    { value: 'Regular', label: 'Regular' },\r\n    { value: 'Mala', label: 'Mala' }\r\n  ];\r\n\r\n  const locationOptions = [\r\n    { value: '', label: 'Todas las ubicaciones' },\r\n    ...(Array.isArray(estados) ? estados.map(estado => ({\r\n      value: estado?.name || estado?.nombre || estado,\r\n      label: estado?.name || estado?.nombre || estado\r\n    })) : [])\r\n  ];\r\n\r\n  const handleFilterChange = (field, value) => {\r\n    onFiltersChange({\r\n      ...filters,\r\n      [field]: value\r\n    });\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some(value => value !== '');\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 card-shadow mb-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Filtros de B√∫squeda</h3>\r\n        <div className=\"flex items-center space-x-2\">\r\n          {hasActiveFilters && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={onClearFilters}\r\n              iconName=\"X\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Limpiar Filtros\r\n            </Button>\r\n          )}\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onExport}\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n          >\r\n            Exportar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\r\n        <Input\r\n          type=\"search\"\r\n          label=\"Buscar Cliente\"\r\n          placeholder=\"Nombre de empresa, contacto...\"\r\n          value={filters?.search}\r\n          onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Industria\"\r\n          options={industryOptions}\r\n          value={filters?.industry}\r\n          onChange={(value) => handleFilterChange('industry', value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Estado\"\r\n          options={statusOptions}\r\n          value={filters?.status}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n        />\r\n\r\n        <Select\r\n          label=\"Relaci√≥n\"\r\n          options={relationshipOptions}\r\n          value={filters?.relationshipHealth}\r\n          onChange={(value) => handleFilterChange('relationshipHealth', value)}\r\n        />\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        <Select\r\n          label=\"Ubicaci√≥n\"\r\n          options={locationOptions}\r\n          value={filters?.location}\r\n          onChange={(value) => handleFilterChange('location', value)}\r\n          searchable={true}\r\n          placeholder=\"Seleccionar estado...\"\r\n        />\r\n\r\n        <Input\r\n          type=\"text\"\r\n          label=\"RFC\"\r\n          placeholder=\"RFC del cliente\"\r\n          value={filters?.rfc}\r\n          onChange={(e) => handleFilterChange('rfc', e?.target?.value)}\r\n        />\r\n\r\n        {/* <Input\r\n          type=\"number\"\r\n          label=\"Proyectos M√≠nimos\"\r\n          placeholder=\"N√∫mero m√≠nimo\"\r\n          value={filters?.minProjects}\r\n          onChange={(e) => handleFilterChange('minProjects', e?.target?.value)}\r\n        />\r\n\r\n        <Input\r\n          type=\"number\"\r\n          label=\"Valor M√≠nimo (MXN)\"\r\n          placeholder=\"Valor m√≠nimo\"\r\n          value={filters?.minValue}\r\n          onChange={(e) => handleFilterChange('minValue', e?.target?.value)}\r\n        /> */}\r\n      </div>\r\n      {hasActiveFilters && (\r\n        <div className=\"mt-4 pt-4 border-t border-border\">\r\n          <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\r\n            <Icon name=\"Filter\" size={16} />\r\n            <span>Filtros activos aplicados</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientFilters;","import React, { useState, useEffect } from 'react';\r\nimport useCommunication from '../../../hooks/useCommunication';\r\nimport { useAuth } from '../../../hooks/useAuth';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ClientCommunicationPanel = ({ client }) => {\r\n  const { createCommunication, getComunicacionesByCliente, loading, error, success } = useCommunication();\r\n  const { user } = useAuth();\r\n  const [showNewCommForm, setShowNewCommForm] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    tipoComunicacion: 'email',\r\n    nivelUrgencia: 'normal',\r\n    asunto: '',\r\n    mensaje: ''\r\n  });\r\n\r\n  const [communicationHistory, setCommunicationHistory] = useState([]);\r\n  const [loadingHistory, setLoadingHistory] = useState(false);\r\n\r\n  // Cargar historial de comunicaciones al montar el componente o cuando cambie el cliente\r\n  useEffect(() => {\r\n    if (client?.id || client?._id) {\r\n      const clientId = client?.id || client?._id;\r\n      getComunicacionesByCliente(clientId).then((res) => {\r\n        if (res && res.data && res.data.comunicaciones && Array.isArray(res.data.comunicaciones)) {\r\n          setCommunicationHistory(res.data.comunicaciones);\r\n        } else if (res && res.comunicaciones && Array.isArray(res.comunicaciones)) {\r\n          setCommunicationHistory(res.comunicaciones);\r\n        } else if (res && res.data && Array.isArray(res.data)) {\r\n          setCommunicationHistory(res.data);\r\n        } else {\r\n          setCommunicationHistory([]);\r\n        }\r\n      });\r\n    } else {\r\n      setCommunicationHistory([]);\r\n    }\r\n  }, [client?.id, client?._id]);\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleAddCommunication = async () => {\r\n    if (!formData?.mensaje?.trim() || !formData?.asunto?.trim()) {\r\n      return;\r\n    }\r\n\r\n    const clientId = client?.id || client?._id;\r\n    if (!clientId) {\r\n      console.error('No se encontr√≥ ID del cliente');\r\n      return;\r\n    }\r\n\r\n    // Mapea los datos al formato del backend\r\n    const commData = {\r\n      tipoComunicacion: formData?.tipoComunicacion || 'email',\r\n      nivelUrgencia: formData?.nivelUrgencia || 'normal',\r\n      asunto: formData?.asunto,\r\n      mensaje: formData?.mensaje,\r\n      idCliente: clientId,\r\n      idOportunidad: 'sin-oportunidad',\r\n      creadoPor: user?.rol || user?.email || 'Usuario',\r\n    };\r\n\r\n    const result = await createCommunication(commData);\r\n    \r\n    if (result) {\r\n      // Limpiar formulario y cerrar\r\n      setFormData({ \r\n        tipoComunicacion: 'email', \r\n        nivelUrgencia: 'normal',\r\n        asunto: '',\r\n        mensaje: ''\r\n      });\r\n      setShowNewCommForm(false);\r\n      \r\n      // Recargar historial\r\n      getComunicacionesByCliente(clientId).then((res) => {\r\n        if (res && res.data && res.data.comunicaciones && Array.isArray(res.data.comunicaciones)) {\r\n          setCommunicationHistory(res.data.comunicaciones);\r\n        } else if (res && res.comunicaciones && Array.isArray(res.comunicaciones)) {\r\n          setCommunicationHistory(res.comunicaciones);\r\n        } else if (res && res.data && Array.isArray(res.data)) {\r\n          setCommunicationHistory(res.data);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const getUrgencyColor = (urgency) => {\r\n    const normalizedUrgency = (urgency || '').toString().toLowerCase();\r\n    switch (normalizedUrgency) {\r\n      case 'urgente':\r\n      case 'alta':\r\n        return 'text-red-600 bg-red-50';\r\n      case 'normal':\r\n        return 'text-blue-600 bg-blue-50';\r\n      default:\r\n        return 'text-gray-600 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getTypeIcon = (type) => {\r\n    const normalizedType = (type || '').toString().toLowerCase();\r\n    switch (normalizedType) {\r\n      case 'whatsapp':\r\n        return 'MessageCircle';\r\n      case 'llamada':\r\n      case 'phone':\r\n        return 'Phone';\r\n      case 'email':\r\n        return 'Mail';\r\n      case 'meeting':\r\n        return 'Users';\r\n      default:\r\n        return 'MessageSquare';\r\n    }\r\n  };\r\n\r\n  const getTypeIconBg = (type) => {\r\n    const normalizedType = (type || '').toString().toLowerCase();\r\n    switch (normalizedType) {\r\n      case 'email':\r\n        return 'bg-blue-500';\r\n      case 'whatsapp':\r\n        return 'bg-green-500';\r\n      case 'llamada':\r\n      case 'phone':\r\n        return 'bg-purple-500';\r\n      default:\r\n        return 'bg-gray-500';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('es-MX', { \r\n      year: 'numeric', \r\n      month: 'short', \r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Historial de Comunicaci√≥n</h3>\r\n        <Button\r\n          onClick={() => setShowNewCommForm(true)}\r\n          className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n          iconName=\"Plus\"\r\n          iconPosition=\"left\"\r\n          size=\"sm\"\r\n        >\r\n          Nueva Comunicaci√≥n\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Communication History */}\r\n      <div className=\"space-y-3 max-h-96 overflow-y-auto pr-2\">\r\n        {loadingHistory ? (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"Loader2\" size={24} className=\"animate-spin mx-auto text-muted-foreground\" />\r\n            <p className=\"text-sm text-muted-foreground mt-2\">Cargando historial...</p>\r\n          </div>\r\n        ) : communicationHistory.length > 0 ? (\r\n          communicationHistory.map((comm) => (\r\n            <div key={comm?.id} className=\"flex items-start space-x-3 p-3 bg-card border border-border rounded-lg hover:bg-muted/30 transition-colors\">\r\n              {/* Icon */}\r\n              <div className={`p-3 rounded-full ${getTypeIconBg(comm?.tipoComunicacion)}`}>\r\n                <Icon \r\n                  name={getTypeIcon(comm?.tipoComunicacion)} \r\n                  size={20}\r\n                  className=\"text-white\"\r\n                />\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-start justify-between mb-1\">\r\n                  <h4 className=\"font-medium text-sm text-foreground\">{comm?.asunto}</h4>\r\n                  <div className=\"flex items-center space-x-2 text-xs text-muted-foreground ml-2\">\r\n                    <Icon name=\"Calendar\" size={12} />\r\n                    <span>\r\n                      {new Date(parseInt(comm.id)).toLocaleString('es-MX', {\r\n                        year: 'numeric',\r\n                        month: '2-digit',\r\n                        day: '2-digit',\r\n                        hour: '2-digit',\r\n                        minute: '2-digit'\r\n                      })}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                \r\n                <p className=\"text-sm text-muted-foreground mb-2 line-clamp-2\">{comm?.mensaje}</p>\r\n                \r\n                <div className=\"flex items-center space-x-3 text-xs\">\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Icon name=\"User\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-muted-foreground\">{comm?.creadoPor || 'Sistema'}</span>\r\n                  </div>\r\n                  <span className={`px-2 py-1 rounded ${getUrgencyColor(comm?.nivelUrgencia)}`}>\r\n                    {comm?.nivelUrgencia === 'urgente' ? 'Urgente' : comm?.nivelUrgencia === 'alta' ? 'Alta' : 'Normal'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center py-12 bg-muted/30 rounded-lg\">\r\n            <Icon name=\"MessageSquare\" size={48} className=\"mx-auto text-muted-foreground mb-3 opacity-50\" />\r\n            <p className=\"text-sm font-medium text-foreground\">Sin comunicaciones registradas</p>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Agrega la primera comunicaci√≥n con este cliente\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modal/Form for New Communication */}\r\n      {showNewCommForm && (\r\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"bg-card rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6 space-y-4\">\r\n              {/* Modal Header */}\r\n              <div className=\"flex items-center justify-between border-b border-border pb-4\">\r\n                <h3 className=\"text-lg font-semibold text-foreground\">Nueva Comunicaci√≥n</h3>\r\n                <button\r\n                  onClick={() => {\r\n                    setShowNewCommForm(false);\r\n                    setFormData({\r\n                      tipoComunicacion: 'email',\r\n                      nivelUrgencia: 'normal',\r\n                      asunto: '',\r\n                      mensaje: ''\r\n                    });\r\n                  }}\r\n                  className=\"text-muted-foreground hover:text-foreground\"\r\n                >\r\n                  <Icon name=\"X\" size={20} />\r\n                </button>\r\n              </div>\r\n\r\n              {/* Form Fields */}\r\n              <div className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block text-foreground\">\r\n                      Tipo de Comunicaci√≥n <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <select\r\n                      value={formData.tipoComunicacion}\r\n                      onChange={(e) => handleInputChange('tipoComunicacion', e.target.value)}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    >\r\n                      <option value=\"email\">Correo Electr√≥nico</option>\r\n                      <option value=\"whatsapp\">WhatsApp</option>\r\n                      <option value=\"llamada\">Llamada Telef√≥nica</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block text-foreground\">\r\n                      Nivel de Urgencia\r\n                    </label>\r\n                    <select\r\n                      value={formData.nivelUrgencia}\r\n                      onChange={(e) => handleInputChange('nivelUrgencia', e.target.value)}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    >\r\n                      <option value=\"normal\">Normal</option>\r\n                      <option value=\"alta\">Alta</option>\r\n                      <option value=\"urgente\">Urgente</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-2 block text-foreground\">\r\n                    Asunto <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.asunto}\r\n                    onChange={(e) => handleInputChange('asunto', e.target.value)}\r\n                    placeholder=\"Ej. Seguimiento de propuesta comercial\"\r\n                    className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-2 block text-foreground\">\r\n                    Mensaje <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <textarea\r\n                    value={formData.mensaje}\r\n                    onChange={(e) => handleInputChange('mensaje', e.target.value)}\r\n                    placeholder=\"Escribir mensaje de comunicaci√≥n con el cliente...\"\r\n                    rows={6}\r\n                    className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Quick Templates */}\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-2 block text-foreground\">Plantillas R√°pidas</label>\r\n                  <div className=\"grid grid-cols-2 gap-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        handleInputChange('asunto', 'Seguimiento de Proyecto');\r\n                        handleInputChange('mensaje', 'Buenos d√≠as, me comunico para dar seguimiento al proyecto en curso y verificar si requieren alguna informaci√≥n adicional.');\r\n                      }}\r\n                      className=\"px-3 py-2 text-xs border border-border rounded-md hover:bg-muted/50 text-left flex items-center space-x-2\"\r\n                    >\r\n                      <Icon name=\"Clock\" size={14} />\r\n                      <span>Seguimiento</span>\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        handleInputChange('asunto', 'Propuesta Comercial');\r\n                        handleInputChange('mensaje', 'Adjunto encontrar√°n nuestra propuesta comercial para el proyecto solicitado. Quedo atento a sus comentarios.');\r\n                      }}\r\n                      className=\"px-3 py-2 text-xs border border-border rounded-md hover:bg-muted/50 text-left flex items-center space-x-2\"\r\n                    >\r\n                      <Icon name=\"FileText\" size={14} />\r\n                      <span>Propuesta</span>\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        handleInputChange('asunto', 'Cotizaci√≥n Actualizada');\r\n                        handleInputChange('mensaje', 'Les env√≠o cotizaci√≥n actualizada considerando los ajustes solicitados. Por favor confirmen para proceder.');\r\n                      }}\r\n                      className=\"px-3 py-2 text-xs border border-border rounded-md hover:bg-muted/50 text-left flex items-center space-x-2\"\r\n                    >\r\n                      <Icon name=\"DollarSign\" size={14} />\r\n                      <span>Cotizaci√≥n</span>\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        handleInputChange('asunto', 'Programaci√≥n de Visita');\r\n                        handleInputChange('mensaje', 'Nos gustar√≠a programar una visita t√©cnica para evaluar los requerimientos del proyecto. ¬øQu√© d√≠a les vendr√≠a mejor?');\r\n                      }}\r\n                      className=\"px-3 py-2 text-xs border border-border rounded-md hover:bg-muted/50 text-left flex items-center space-x-2\"\r\n                    >\r\n                      <Icon name=\"Calendar\" size={14} />\r\n                      <span>Visita</span>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Modal Footer */}\r\n              <div className=\"flex items-center justify-end space-x-3 border-t border-border pt-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => {\r\n                    setShowNewCommForm(false);\r\n                    setFormData({\r\n                      tipoComunicacion: 'email',\r\n                      nivelUrgencia: 'normal',\r\n                      asunto: '',\r\n                      mensaje: ''\r\n                    });\r\n                  }}\r\n                >\r\n                  Cancelar\r\n                </Button>\r\n                <Button\r\n                  onClick={handleAddCommunication}\r\n                  disabled={!formData.mensaje?.trim() || !formData.asunto?.trim() || loading}\r\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white\"\r\n                  iconName=\"Send\"\r\n                  iconPosition=\"left\"\r\n                >\r\n                  {loading ? 'Enviando...' : 'Registrar Comunicaci√≥n'}\r\n                </Button>\r\n              </div>\r\n\r\n              {error && (\r\n                <div className=\"text-sm text-red-600 flex items-center space-x-2 bg-red-50 p-3 rounded-md\">\r\n                  <Icon name=\"AlertCircle\" size={16} />\r\n                  <span>Error al enviar comunicaci√≥n</span>\r\n                </div>\r\n              )}\r\n              {success && (\r\n                <div className=\"text-sm text-green-600 flex items-center space-x-2 bg-green-50 p-3 rounded-md\">\r\n                  <Icon name=\"CheckCircle2\" size={16} />\r\n                  <span>Comunicaci√≥n registrada correctamente</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientCommunicationPanel;\r\n","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst DocumentStatus = ({ documents, onUploadDocument, onViewDocument, onDownloadDocument }) => {\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'Completo':\r\n        return 'bg-success text-success-foreground';\r\n      case 'Pendiente':\r\n        return 'bg-warning text-warning-foreground';\r\n      case 'Vencido':\r\n        return 'bg-error text-error-foreground';\r\n      case 'En Revisi√≥n':\r\n        return 'bg-primary text-primary-foreground';\r\n      default:\r\n        return 'bg-secondary text-secondary-foreground';\r\n    }\r\n  };\r\n\r\n  const getDocumentIcon = (type) => {\r\n    switch (type) {\r\n      case 'RFC':\r\n        return 'FileText';\r\n      case 'Contrato':\r\n        return 'FileCheck';\r\n      case 'Garant√≠a':\r\n        return 'Shield';\r\n      case 'Facturaci√≥n':\r\n        return 'Receipt';\r\n      case 'Identificaci√≥n':\r\n        return 'CreditCard';\r\n      default:\r\n        return 'File';\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'No especificado';\r\n    const date = new Date(dateString);\r\n    return date?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  const isExpiringSoon = (expirationDate) => {\r\n    if (!expirationDate) return false;\r\n    const today = new Date();\r\n    const expiry = new Date(expirationDate);\r\n    const diffTime = expiry - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    return diffDays <= 30 && diffDays > 0;\r\n  };\r\n\r\n  const isExpired = (expirationDate) => {\r\n    if (!expirationDate) return false;\r\n    const today = new Date();\r\n    const expiry = new Date(expirationDate);\r\n    return expiry < today;\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h3 className=\"text-lg font-semibold text-foreground\">Estado de Documentos</h3>\r\n        <Button\r\n          variant=\"default\"\r\n          size=\"sm\"\r\n          onClick={onUploadDocument}\r\n          iconName=\"Upload\"\r\n          iconPosition=\"left\"\r\n        >\r\n          Subir Documento\r\n        </Button>\r\n      </div>\r\n  <div className=\"space-y-4 max-h-[400px] overflow-y-auto overflow-x-hidden\">\r\n        {documents?.length === 0 ? (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"FileX\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n            <p className=\"text-muted-foreground\">No hay documentos registrados</p>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={onUploadDocument}\r\n              className=\"mt-4\"\r\n              iconName=\"Upload\"\r\n              iconPosition=\"left\"\r\n            >\r\n              Subir Primer Documento\r\n            </Button>\r\n          </div>\r\n        ) : (\r\n          documents?.map((doc) => (\r\n            <div key={doc?.id} className=\"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-muted transition-smooth\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <div className=\"w-10 h-10 bg-muted rounded-lg flex items-center justify-center\">\r\n                  <Icon name={getDocumentIcon(doc?.type)} size={20} className=\"text-muted-foreground\" />\r\n                </div>\r\n                \r\n                <div className=\"min-w-0 flex-1\">\r\n                  <div className=\"flex items-center space-x-2 mb-1\">\r\n                    <h4 className=\"text-sm font-medium text-foreground\">{doc?.name}</h4>\r\n                    <span className={`px-2 py-1 text-xs rounded-full ${getStatusColor(doc?.status)}`}>\r\n                      {doc?.status}\r\n                    </span>\r\n                    {isExpiringSoon(doc?.expirationDate) && (\r\n                      <span className=\"px-2 py-1 text-xs bg-warning text-warning-foreground rounded-full\">\r\n                        Por Vencer\r\n                      </span>\r\n                    )}\r\n                    {isExpired(doc?.expirationDate) && (\r\n                      <span className=\"px-2 py-1 text-xs bg-error text-error-foreground rounded-full\">\r\n                        Vencido\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-4 text-xs text-muted-foreground\">\r\n                    <span>Tipo: {doc?.type}</span>\r\n                    <span>Subido: {formatDate(doc?.uploadDate)}</span>\r\n                    {doc?.expirationDate && (\r\n                      <span>Vence: {formatDate(doc?.expirationDate)}</span>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {doc?.notes && (\r\n                    <p className=\"text-xs text-muted-foreground mt-1 line-clamp-1\">\r\n                      {doc?.notes}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-2\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onViewDocument(doc)}\r\n                  title=\"Ver documento\"\r\n                >\r\n                  <Icon name=\"Eye\" size={16} />\r\n                </Button>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onDownloadDocument(doc)}\r\n                  title=\"Descargar documento\"\r\n                >\r\n                  <Icon name=\"Download\" size={16} />\r\n                </Button>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => onUploadDocument(doc)}\r\n                  title=\"Actualizar documento\"\r\n                >\r\n                  <Icon name=\"Upload\" size={16} />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n      {/* Document Summary */}\r\n      <div className=\"mt-6 pt-6 border-t border-border\">\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-success\">\r\n              {documents?.filter(d => d?.status === 'Completo')?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Completos</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-warning\">\r\n              {documents?.filter(d => d?.status === 'Pendiente')?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Pendientes</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-error\">\r\n              {documents?.filter(d => isExpired(d?.expirationDate))?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Vencidos</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-primary\">\r\n              {documents?.filter(d => isExpiringSoon(d?.expirationDate))?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Por Vencer</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentStatus;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ContractAlerts = ({ contracts, onViewContract, onRenewContract, onScheduleRenewal }) => {\r\n  const getAlertType = (contract) => {\r\n    const today = new Date();\r\n    const expirationDate = new Date(contract.expirationDate);\r\n    const diffTime = expirationDate - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n    if (diffDays < 0) return 'expired';\r\n    if (diffDays <= 30) return 'expiring';\r\n    if (diffDays <= 90) return 'warning';\r\n    return 'normal';\r\n  };\r\n\r\n  const getAlertColor = (type) => {\r\n    switch (type) {\r\n      case 'expired':\r\n        return 'border-error bg-error/10';\r\n      case 'expiring':\r\n        return 'border-warning bg-warning/10';\r\n      case 'warning':\r\n        return 'border-accent bg-accent/10';\r\n      default:\r\n        return 'border-border bg-card';\r\n    }\r\n  };\r\n\r\n  const getAlertIcon = (type) => {\r\n    switch (type) {\r\n      case 'expired':\r\n        return 'AlertTriangle';\r\n      case 'expiring':\r\n        return 'Clock';\r\n      case 'warning':\r\n        return 'AlertCircle';\r\n      default:\r\n        return 'FileCheck';\r\n    }\r\n  };\r\n\r\n  const getAlertMessage = (contract) => {\r\n    const today = new Date();\r\n    const expirationDate = new Date(contract.expirationDate);\r\n    const diffTime = expirationDate - today;\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n    if (diffDays < 0) {\r\n      return `Vencido hace ${Math.abs(diffDays)} d√≠as`;\r\n    } else if (diffDays === 0) {\r\n      return 'Vence hoy';\r\n    } else if (diffDays <= 30) {\r\n      return `Vence en ${diffDays} d√≠as`;\r\n    } else if (diffDays <= 90) {\r\n      return `Vence en ${diffDays} d√≠as`;\r\n    }\r\n    return 'Vigente';\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date?.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN'\r\n    })?.format(amount);\r\n  };\r\n\r\n  // Filter contracts that need attention\r\n  const alertContracts = contracts?.filter(contract => {\r\n    const alertType = getAlertType(contract);\r\n    return ['expired', 'expiring', 'warning']?.includes(alertType);\r\n  });\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Alertas de Contratos</h3>\r\n          {alertContracts?.length > 0 && (\r\n            <span className=\"px-2 py-1 text-xs bg-error text-error-foreground rounded-full\">\r\n              {alertContracts?.length}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={() => window.location.href = '/contract-management'}\r\n          iconName=\"FileText\"\r\n          iconPosition=\"left\"\r\n        >\r\n          Ver Todos\r\n        </Button>\r\n      </div>\r\n  <div className=\"space-y-4 max-h-[350px] overflow-y-auto overflow-x-auto px-2\" style={{minWidth: '100%', maxWidth: '100%'}}>\r\n        {alertContracts?.length === 0 ? (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"CheckCircle\" size={48} className=\"text-success mx-auto mb-4\" />\r\n            <p className=\"text-muted-foreground\">No hay contratos que requieran atenci√≥n</p>\r\n            <p className=\"text-sm text-muted-foreground mt-2\">\r\n              Todos los contratos est√°n vigentes y actualizados\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          alertContracts?.map((contract) => {\r\n            const alertType = getAlertType(contract);\r\n            return (\r\n              <div\r\n                key={contract?.id}\r\n                className={`p-4 rounded-lg border-2 ${getAlertColor(alertType)} transition-smooth min-w-[400px] max-w-[600px] mx-auto`}\r\n              >\r\n                <div className=\"flex items-start justify-between flex-wrap\">\r\n                  <div className=\"flex items-start space-x-3\">\r\n                    <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${\r\n                      alertType === 'expired' ? 'bg-error text-error-foreground' :\r\n                      alertType === 'expiring' ? 'bg-warning text-warning-foreground' :\r\n                      alertType === 'warning' ? 'bg-accent text-accent-foreground' :\r\n                      'bg-primary text-primary-foreground'\r\n                    }`}>\r\n                      <Icon name={getAlertIcon(alertType)} size={20} />\r\n                    </div>\r\n                    <div className={`px-2 py-1 text-xs rounded-full whitespace-nowrap ${\r\n                      alertType === 'expired' ? 'bg-error text-error-foreground' :\r\n                      alertType === 'expiring' ? 'bg-warning text-warning-foreground' :\r\n                      'bg-accent text-accent-foreground'\r\n                    }`}>\r\n                      {getAlertMessage(contract)}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0 ml-4\">\r\n                    <div className=\"flex flex-wrap items-center gap-2 mb-1\">\r\n                      <h4 className=\"text-sm font-bold text-foreground\">\r\n                        {contract?.contractNumber}\r\n                      </h4>\r\n                      <span className=\"text-xs text-muted-foreground font-medium\">\r\n                        {contract?.clientName}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex flex-wrap gap-4 text-xs text-muted-foreground mb-1\">\r\n                      <span className=\"flex items-center gap-1\"><Icon name=\"Calendar\" size={12} />Inicio: {formatDate(contract?.startDate)}</span>\r\n                      <span className=\"flex items-center gap-1\"><Icon name=\"CalendarX\" size={12} />Vence: {formatDate(contract?.expirationDate)}</span>\r\n                      <span className=\"flex items-center gap-1\"><Icon name=\"DollarSign\" size={12} />Valor: {formatCurrency(contract?.value)}</span>\r\n                    </div>\r\n                    {contract?.description && (\r\n                      <p className=\"text-xs text-muted-foreground mt-1 line-clamp-2\">\r\n                        {contract?.description}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2 ml-4\">\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => onViewContract(contract)}\r\n                      title=\"Ver contrato\"\r\n                    >\r\n                      <Icon name=\"Eye\" size={16} />\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => onScheduleRenewal(contract)}\r\n                      iconName=\"Calendar\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Programar\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"default\"\r\n                      size=\"sm\"\r\n                      onClick={() => onRenewContract(contract)}\r\n                      iconName=\"RefreshCw\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Renovar\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n      {/* Summary Statistics */}\r\n      <div className=\"mt-6 pt-6 border-t border-border\">\r\n        <div className=\"grid grid-cols-3 gap-4\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-error\">\r\n              {contracts?.filter(c => getAlertType(c) === 'expired')?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Vencidos</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-warning\">\r\n              {contracts?.filter(c => getAlertType(c) === 'expiring')?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Por Vencer</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg font-semibold text-accent\">\r\n              {contracts?.filter(c => getAlertType(c) === 'warning')?.length}\r\n            </div>\r\n            <div className=\"text-xs text-muted-foreground\">Pr√≥ximos</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContractAlerts;","import React, { useState } from 'react';\r\nimport useClient from '../../../hooks/useClient';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport { useNotifications } from '../../../context/NotificationContext.jsx';\r\nimport { useEstados, useMunicipios } from '../../../hooks/useEstado';\r\n\r\nconst NewClientModal = ({ isOpen, onClose, onSubmit, mode = 'create', initialData = null }) => {\r\n  const { createClient, editClient } = useClient();\r\n  const { showSuccess, showError } = useNotifications();\r\n  const [formData, setFormData] = useState({\r\n    companyName: '',\r\n    contactPerson: '',\r\n    email: '',\r\n    phone: '',\r\n    industry: '',\r\n    status: 'Activo',\r\n    relationshipHealth: 'Buena',\r\n    rfc: '',\r\n    clientSince: new Date()?.toISOString()?.split('T')?.[0],\r\n    totalProjects: 0,\r\n    activeContracts: 0,\r\n    totalValue: 0,\r\n    lastContact: new Date()?.toISOString()?.split('T')?.[0],\r\n    nextFollowUp: '',\r\n    website: '',\r\n    notes: '',\r\n    estadoEmpresa: '',\r\n    municipioEmpresa: '',\r\n    ubicacionUrl: '',\r\n    estadoDireccion: '',\r\n    municipioDireccion: '',\r\n    direccionCompleta: ''\r\n  });\r\n\r\n  // Estado para contactos adicionales (m√°ximo 3 adicionales)\r\n  const [additionalContacts, setAdditionalContacts] = useState([]);\r\n\r\n  // Hooks para estados y municipios\r\n  const { estados, loading: loadingEstados, error: errorEstados } = useEstados();\r\n  const { municipios: municipiosEmpresa, loading: loadingMunicipiosEmpresa, error: errorMunicipiosEmpresa } = useMunicipios(formData.estadoEmpresa);\r\n  const { municipios: municipiosDireccion, loading: loadingMunicipiosDireccion, error: errorMunicipiosDireccion } = useMunicipios(formData.estadoDireccion);\r\n\r\n  React.useEffect(() => {\r\n    if (isOpen && mode === 'edit' && initialData) {\r\n      setFormData({\r\n        companyName: initialData.companyName || initialData.empresa || '',\r\n        contactPerson: initialData.contactPerson || initialData.contacto || '',\r\n        email: initialData.email || '',\r\n        phone: initialData.phone || initialData.telefono || '',\r\n        industry: initialData.industry || initialData.industria || '',\r\n        status: initialData.status || initialData.estado || 'Activo',\r\n        relationshipHealth: initialData.relationshipHealth || initialData.relacion || 'Buena',\r\n        rfc: initialData.rfc || '',\r\n        clientSince: initialData.clientSince || initialData.fechaDesde || '',\r\n        totalProjects: initialData.totalProjects || 0,\r\n        activeContracts: initialData.activeContracts || 0,\r\n        totalValue: initialData.totalValue || 0,\r\n        lastContact: initialData.lastContact || '',\r\n        nextFollowUp: initialData.nextFollowUp || initialData.proximoSeguimiento || '',\r\n        website: initialData.website || initialData.sitioWeb || '',\r\n        notes: initialData.notes || initialData.notas || '',\r\n        estadoEmpresa: initialData.ubicacionEmpre?.estado || '',\r\n        municipioEmpresa: initialData.ubicacionEmpre?.municipio || '',\r\n        ubicacionUrl: initialData.ubicacionUrl || '',\r\n        estadoDireccion: (initialData.ubicacion && initialData.ubicacion.estado) || '',\r\n        municipioDireccion: (initialData.ubicacion && initialData.ubicacion.municipio) || '',\r\n        direccionCompleta: initialData.address || (initialData.ubicacion && initialData.ubicacion.direccion) || ''\r\n      });\r\n      \r\n      // Cargar contactos adicionales si existen\r\n      if (initialData.contactos && Array.isArray(initialData.contactos) && initialData.contactos.length > 1) {\r\n        // El primer contacto es el principal, los dem√°s son adicionales\r\n        const extraContacts = initialData.contactos.slice(1);\r\n        setAdditionalContacts(extraContacts);\r\n      } else {\r\n        setAdditionalContacts([]);\r\n      }\r\n    } else if (isOpen && mode === 'create') {\r\n      // Limpiar contactos adicionales en modo create\r\n      setAdditionalContacts([]);\r\n    }\r\n  }, [isOpen, mode, initialData]);\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const industries = [\r\n    'Manufactura',\r\n    'Comercial',\r\n    'Hospitalidad',\r\n    'Educaci√≥n',\r\n    'Salud',\r\n    'Gobierno',\r\n    'Retail',\r\n    'Oficinas',\r\n    'Residencial',\r\n    'Industrial',\r\n    'Otro'\r\n  ];\r\n\r\n  const locations = [\r\n    'Monterrey',\r\n    'Ciudad de M√©xico',\r\n    'Guadalajara',\r\n    'Tijuana',\r\n    'Puebla',\r\n    'Le√≥n',\r\n    'Quer√©taro',\r\n    'M√©rida',\r\n    'Canc√∫n',\r\n    'Otro'\r\n  ];\r\n\r\n  const statusOptions = [\r\n    'Activo',\r\n    'Pendiente',\r\n    'Inactivo',\r\n    'Prospecto'\r\n  ];\r\n\r\n  const relationshipHealthOptions = [\r\n    'Excelente',\r\n    'Buena',\r\n    'Regular',\r\n    'Mala'\r\n  ];\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData?.companyName?.trim()) {\r\n      newErrors.companyName = 'El nombre de la empresa es requerido';\r\n    } else if (formData.companyName.length < 3) {\r\n      newErrors.companyName = 'El nombre debe tener al menos 3 caracteres';\r\n    }\r\n\r\n    if (!formData?.contactPerson?.trim()) {\r\n      newErrors.contactPerson = 'La persona de contacto es requerida';\r\n    } else if (formData.contactPerson.length < 3) {\r\n      newErrors.contactPerson = 'El nombre debe tener al menos 3 caracteres';\r\n    }\r\n\r\n    if (!formData?.email?.trim()) {\r\n      newErrors.email = 'El email es requerido';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/?.test(formData?.email)) {\r\n      newErrors.email = 'El formato del email no es v√°lido';\r\n    }\r\n\r\n    if (!formData?.phone?.trim()) {\r\n      newErrors.phone = 'El tel√©fono es requerido';\r\n    } else if (!/^\\d{10}$/?.test(formData?.phone)) {\r\n      newErrors.phone = 'El tel√©fono debe tener exactamente 10 d√≠gitos';\r\n    }\r\n\r\n    if (!formData?.industry) {\r\n      newErrors.industry = 'La industria es requerida';\r\n    }\r\n\r\n    if (!formData?.rfc?.trim()) {\r\n      newErrors.rfc = 'El RFC es requerido';\r\n    } else if (!/^[A-Z&√ë]{3,4}[0-9]{6}[A-Z0-9]{3}$/?.test(formData?.rfc)) {\r\n      newErrors.rfc = 'El formato del RFC no es v√°lido (Ej. ABC123456XYZ)';\r\n    }\r\n\r\n    // Validaci√≥n para sitio web (opcional pero si se llena debe ser v√°lido)\r\n    if (formData?.website?.trim() && !/^https?:\\/\\/.+\\..+/?.test(formData?.website)) {\r\n      newErrors.website = 'El formato del sitio web no es v√°lido (debe comenzar con http:// o https://)';\r\n    }\r\n\r\n    // Validaci√≥n para ubicaci√≥n empresa\r\n    if (!formData?.estadoEmpresa?.trim()) {\r\n      newErrors.estadoEmpresa = 'El estado de la ubicaci√≥n de la empresa es requerido';\r\n    }\r\n\r\n    if (!formData?.municipioEmpresa?.trim()) {\r\n      newErrors.municipioEmpresa = 'El municipio de la ubicaci√≥n de la empresa es requerido';\r\n    }\r\n\r\n    // Validaci√≥n para direcci√≥n del cliente\r\n    if (!formData?.estadoDireccion?.trim()) {\r\n      newErrors.estadoDireccion = 'El estado de la direcci√≥n es requerido';\r\n    }\r\n\r\n    if (!formData?.municipioDireccion?.trim()) {\r\n      newErrors.municipioDireccion = 'El municipio de la direcci√≥n es requerido';\r\n    }\r\n\r\n    if (!formData?.direccionCompleta?.trim()) {\r\n      newErrors.direccionCompleta = 'La direcci√≥n completa es requerida';\r\n    } else if (formData.direccionCompleta.length < 10) {\r\n      newErrors.direccionCompleta = 'La direcci√≥n debe ser m√°s espec√≠fica (m√≠nimo 10 caracteres)';\r\n    }\r\n\r\n    // Validaci√≥n para ubicacionUrl (opcional pero si se llena debe ser v√°lida)\r\n    if (formData?.ubicacionUrl?.trim() && !/^https?:\\/\\/.+\\..+/?.test(formData?.ubicacionUrl)) {\r\n      newErrors.ubicacionUrl = 'El formato de la URL no es v√°lido (debe comenzar con http:// o https://)';\r\n    }\r\n\r\n    // Validaci√≥n para contactos adicionales\r\n    additionalContacts.forEach((contact, index) => {\r\n      const hasAnyField = contact.contacto?.trim() || contact.email?.trim() || contact.telefono?.trim();\r\n      \r\n      if (hasAnyField) {\r\n        // Si tiene alg√∫n campo, todos deben estar completos\r\n        if (!contact.contacto?.trim()) {\r\n          newErrors[`additionalContact_${index}_name`] = 'El nombre es requerido si agregas este contacto';\r\n        } else if (contact.contacto.length < 3) {\r\n          newErrors[`additionalContact_${index}_name`] = 'El nombre debe tener al menos 3 caracteres';\r\n        }\r\n        \r\n        if (!contact.email?.trim()) {\r\n          newErrors[`additionalContact_${index}_email`] = 'El email es requerido si agregas este contacto';\r\n        } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/?.test(contact.email)) {\r\n          newErrors[`additionalContact_${index}_email`] = 'El formato del email no es v√°lido';\r\n        }\r\n        \r\n        if (!contact.telefono?.trim()) {\r\n          newErrors[`additionalContact_${index}_phone`] = 'El tel√©fono es requerido si agregas este contacto';\r\n        } else if (!/^\\d{10}$/?.test(contact.telefono)) {\r\n          newErrors[`additionalContact_${index}_phone`] = 'El tel√©fono debe tener exactamente 10 d√≠gitos';\r\n        }\r\n      }\r\n    });\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    // Validaci√≥n y formateo para tel√©fono\r\n    if (field === 'phone') {\r\n      // Eliminar caracteres no num√©ricos\r\n      let cleanValue = value.replace(/\\D/g, '');\r\n      // Limitar a 10 d√≠gitos\r\n      cleanValue = cleanValue.slice(0, 10);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    } \r\n    // Validaci√≥n para RFC - solo may√∫sculas y alfanum√©rico\r\n    else if (field === 'rfc') {\r\n      const cleanValue = value.toUpperCase().replace(/[^A-Z√ë&0-9]/g, '').slice(0, 13);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Validaci√≥n para nombre de empresa - limitar caracteres\r\n    else if (field === 'companyName') {\r\n      const cleanValue = value.slice(0, 100);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Validaci√≥n para persona de contacto\r\n    else if (field === 'contactPerson') {\r\n      const cleanValue = value.slice(0, 100);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Validaci√≥n para direcci√≥n completa\r\n    else if (field === 'direccionCompleta') {\r\n      const cleanValue = value.slice(0, 200);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Validaci√≥n para sitio web\r\n    else if (field === 'website') {\r\n      const cleanValue = value.slice(0, 150);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Validaci√≥n para ubicacionUrl\r\n    else if (field === 'ubicacionUrl') {\r\n      const cleanValue = value.slice(0, 200);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    }\r\n    // Otros campos sin validaci√≥n especial\r\n    else {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: value\r\n      }));\r\n    }\r\n\r\n    // Clear error when user starts typing\r\n    if (errors?.[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  // Funciones para manejar contactos adicionales\r\n  const addAdditionalContact = () => {\r\n    if (additionalContacts.length < 3) {\r\n      setAdditionalContacts([...additionalContacts, { contacto: '', email: '', telefono: '' }]);\r\n    }\r\n  };\r\n\r\n  const removeAdditionalContact = (index) => {\r\n    const newContacts = additionalContacts.filter((_, i) => i !== index);\r\n    setAdditionalContacts(newContacts);\r\n    // Limpiar errores relacionados con este contacto\r\n    const newErrors = { ...errors };\r\n    delete newErrors[`additionalContact_${index}_name`];\r\n    delete newErrors[`additionalContact_${index}_email`];\r\n    delete newErrors[`additionalContact_${index}_phone`];\r\n    setErrors(newErrors);\r\n  };\r\n\r\n  const handleAdditionalContactChange = (index, field, value) => {\r\n    const newContacts = [...additionalContacts];\r\n    \r\n    // Validaci√≥n y formateo\r\n    if (field === 'telefono') {\r\n      value = value.replace(/\\D/g, '').slice(0, 10);\r\n    } else if (field === 'contacto') {\r\n      value = value.slice(0, 100);\r\n    } else if (field === 'email') {\r\n      value = value.slice(0, 100);\r\n    }\r\n    \r\n    newContacts[index][field] = value;\r\n    setAdditionalContacts(newContacts);\r\n    \r\n    // Limpiar error si existe\r\n    const errorKey = `additionalContact_${index}_${field === 'contacto' ? 'name' : field === 'telefono' ? 'phone' : 'email'}`;\r\n    if (errors[errorKey]) {\r\n      setErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[errorKey];\r\n        return newErrors;\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n    \r\n    // Construir array de contactos: principal + adicionales que est√©n completos\r\n    const contactosCompletos = additionalContacts.filter(c => {\r\n      // Solo incluir contactos que tengan los 3 campos completos\r\n      return c.contacto?.trim() && c.email?.trim() && c.telefono?.trim();\r\n    });\r\n    \r\n    const contactos = [\r\n      {\r\n        contacto: formData.contactPerson,\r\n        email: formData.email,\r\n        telefono: formData.phone\r\n      },\r\n      ...contactosCompletos\r\n    ];\r\n    \r\n    const clientData = {\r\n      empresa: formData.companyName,\r\n      contactos: contactos,\r\n      contacto: formData.contactPerson,\r\n      email: formData.email,\r\n      telefono: formData.phone,\r\n      industria: formData.industry,\r\n      ubicacionEmpre: {\r\n        estado: formData.estadoEmpresa,\r\n        municipio: formData.municipioEmpresa,\r\n      },\r\n      ubicacionUrl: formData.ubicacionUrl,\r\n      ubicacion: {\r\n        estado: formData.estadoDireccion,\r\n        municipio: formData.municipioDireccion,\r\n        direccion: formData.direccionCompleta\r\n      },\r\n      rfc: formData.rfc?.toUpperCase(),\r\n      sitioWeb: formData.website,\r\n      estado: formData.status,\r\n      relacion: formData.relationshipHealth,\r\n      fechaDesde: formData.clientSince,\r\n      proximoSeguimiento: formData.nextFollowUp,\r\n      notas: formData.notes,\r\n      totalProjects: parseInt(formData.totalProjects) || 0,\r\n      activeContracts: parseInt(formData.activeContracts) || 0,\r\n      totalValue: parseInt(formData.totalValue) || 0,\r\n      lastContact: formData.lastContact\r\n    };\r\n    console.log('Datos enviados al servicio:', clientData);\r\n    if (mode === 'edit' && initialData && initialData.id) {\r\n      // Actualizar cliente usando la funci√≥n pasada por props\r\n      const res = await editClient(initialData.id, clientData);\r\n      if (res && res.success) {\r\n        showSuccess(`Cliente \"${clientData.empresa}\" actualizado exitosamente.`);\r\n        handleClose();\r\n      } else {\r\n        showError('Error al actualizar el cliente');\r\n      }\r\n    } else {\r\n      // Crear cliente usando la funci√≥n pasada por props\r\n      const res = await createClient(clientData);\r\n      if (res && res.success) {\r\n        showSuccess(`Cliente \"${clientData.empresa}\" guardado exitosamente.`);\r\n        handleClose();\r\n      } else {\r\n        showError('Error al guardar el cliente');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      companyName: '',\r\n      contactPerson: '',\r\n      email: '',\r\n      phone: '',\r\n      industry: '',\r\n      status: 'Activo',\r\n      relationshipHealth: 'Buena',\r\n      rfc: '',\r\n      clientSince: new Date()?.toISOString()?.split('T')?.[0],\r\n      totalProjects: 0,\r\n      activeContracts: 0,\r\n      totalValue: 0,\r\n      lastContact: new Date()?.toISOString()?.split('T')?.[0],\r\n      nextFollowUp: '',\r\n      website: '',\r\n      notes: '',\r\n      estadoEmpresa: '',\r\n      municipioEmpresa: '',\r\n      ubicacionUrl: '',\r\n      estadoDireccion: '',\r\n      municipioDireccion: '',\r\n      direccionCompleta: ''\r\n    });\r\n    setAdditionalContacts([]);\r\n    setErrors({});\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-card rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"sticky top-0 bg-card border-b border-border p-6 rounded-t-lg\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-xl font-semibold text-foreground\">\r\n                {mode === 'edit' ? 'Editar Cliente' : 'Nuevo Cliente'}\r\n              </h2>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                {mode === 'edit' ? 'Actualiza la informaci√≥n del cliente' : 'Agrega un nuevo cliente al sistema'}\r\n              </p>\r\n            </div>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              onClick={handleClose}\r\n            >\r\n              <Icon name=\"X\" size={20} />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci√≥n B√°sica */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Building2\" size={20} className=\"mr-2\" />\r\n                Informaci√≥n B√°sica\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Nombre de la Empresa\"\r\n                placeholder=\"Ej. Grupo Industrial Monterrey\"\r\n                value={formData?.companyName}\r\n                onChange={(e) => handleInputChange('companyName', e?.target?.value)}\r\n                error={errors?.companyName}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Contacto Principal */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-2 flex items-center\">\r\n                <Icon name=\"User\" size={20} className=\"mr-2\" />\r\n                Contacto Principal\r\n              </h3>\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Informaci√≥n del contacto principal (obligatorio)\r\n              </p>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Persona de Contacto\"\r\n                placeholder=\"Ej. Carlos Hern√°ndez\"\r\n                value={formData?.contactPerson}\r\n                onChange={(e) => handleInputChange('contactPerson', e?.target?.value)}\r\n                error={errors?.contactPerson}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"email\"\r\n                label=\"Email\"\r\n                placeholder=\"Ej. carlos.hernandez@empresa.com.mx\"\r\n                value={formData?.email}\r\n                onChange={(e) => handleInputChange('email', e?.target?.value)}\r\n                error={errors?.email}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Tel√©fono\"\r\n                placeholder=\"1234567890 (10 d√≠gitos)\"\r\n                value={formData?.phone}\r\n                onChange={(e) => handleInputChange('phone', e?.target?.value)}\r\n                error={errors?.phone}\r\n                required\r\n                maxLength={10}\r\n              />\r\n              {formData?.phone && formData.phone.length > 0 && (\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {formData.phone.length}/10 d√≠gitos\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Contactos Adicionales */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"text-lg font-medium text-foreground flex items-center\">\r\n                    <Icon name=\"Users\" size={20} className=\"mr-2\" />\r\n                    Contactos Adicionales\r\n                  </h3>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">\r\n                    Puedes agregar hasta 3 contactos adicionales (opcional)\r\n                  </p>\r\n                </div>\r\n                {additionalContacts.length < 3 && (\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={addAdditionalContact}\r\n                    iconName=\"Plus\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Agregar Contacto\r\n                  </Button>\r\n                )}\r\n              </div>\r\n\r\n              {additionalContacts.map((contact, index) => (\r\n                <div key={index} className=\"border border-border rounded-lg p-4 mb-4 bg-muted/30\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <h4 className=\"text-sm font-medium text-foreground\">\r\n                      Contacto Adicional {index + 1}\r\n                    </h4>\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"ghost\"\r\n                      size=\"sm\"\r\n                      onClick={() => removeAdditionalContact(index)}\r\n                      iconName=\"X\"\r\n                    >\r\n                      Eliminar\r\n                    </Button>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <div>\r\n                      <Input\r\n                        label=\"Nombre\"\r\n                        placeholder=\"Ej. Mar√≠a Garc√≠a\"\r\n                        value={contact.contacto}\r\n                        onChange={(e) => handleAdditionalContactChange(index, 'contacto', e.target.value)}\r\n                        error={errors?.[`additionalContact_${index}_name`]}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <Input\r\n                        type=\"email\"\r\n                        label=\"Email\"\r\n                        placeholder=\"Ej. maria@empresa.com\"\r\n                        value={contact.email}\r\n                        onChange={(e) => handleAdditionalContactChange(index, 'email', e.target.value)}\r\n                        error={errors?.[`additionalContact_${index}_email`]}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <Input\r\n                        label=\"Tel√©fono\"\r\n                        placeholder=\"1234567890\"\r\n                        value={contact.telefono}\r\n                        onChange={(e) => handleAdditionalContactChange(index, 'telefono', e.target.value)}\r\n                        error={errors?.[`additionalContact_${index}_phone`]}\r\n                        maxLength={10}\r\n                      />\r\n                      {contact.telefono && contact.telefono.length > 0 && (\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                          {contact.telefono.length}/10 d√≠gitos\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Select\r\n                label=\"Industria\"\r\n                value={formData?.industry}\r\n                onChange={(value) => handleInputChange('industry', value)}\r\n                error={errors?.industry}\r\n                options={industries?.map(industry => ({ value: industry, label: industry }))}\r\n                placeholder=\"Selecciona una industria\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Ubicaci√≥n de la Empresa */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Building\" size={20} className=\"mr-2\" />\r\n                Ubicaci√≥n de la Empresa\r\n              </h3>\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Estado y municipio donde se encuentra ubicada la empresa\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 md:col-span-2\">\r\n              <div>\r\n                <Select\r\n                  label={<>Estado <span className=\"text-destructive\">*</span></>}\r\n                  value={formData.estadoEmpresa}\r\n                  onChange={value => {\r\n                    handleInputChange('estadoEmpresa', value);\r\n                    handleInputChange('municipioEmpresa', '');\r\n                  }}\r\n                  options={\r\n                    estados ? [{ value: '', label: 'Selecciona un estado' }, ...estados.map(e => ({ value: e.code, label: e.name }))] : []\r\n                  }\r\n                  loading={loadingEstados}\r\n                  error={errors?.estadoEmpresa}\r\n                  required\r\n                  disabled={loadingEstados || !!errorEstados}\r\n                  placeholder={loadingEstados ? 'Cargando estados...' : 'Selecciona un estado'}\r\n                  searchable\r\n                />\r\n              </div>\r\n              <div>\r\n                <Select\r\n                  label={<>Municipio <span className=\"text-destructive\">*</span></>}\r\n                  value={formData.municipioEmpresa}\r\n                  onChange={value => handleInputChange('municipioEmpresa', value)}\r\n                  options={\r\n                    formData.estadoEmpresa === ''\r\n                      ? [{ value: '', label: 'Selecciona un estado primero' }]\r\n                      : loadingMunicipiosEmpresa\r\n                        ? [{ value: '', label: 'Cargando municipios...' }]\r\n                        : errorMunicipiosEmpresa\r\n                          ? [{ value: '', label: 'Error al cargar municipios' }]\r\n                          : [{ value: '', label: 'Selecciona un municipio' }, ...(municipiosEmpresa ? Object.values(municipiosEmpresa.municipios || {}).map((m, idx) => ({ value: m, label: m })) : [])]\r\n                  }\r\n                  loading={loadingMunicipiosEmpresa}\r\n                  error={errors?.municipioEmpresa}\r\n                  required\r\n                  disabled={formData.estadoEmpresa === '' || loadingMunicipiosEmpresa || !!errorMunicipiosEmpresa}\r\n                  placeholder={formData.estadoEmpresa === '' ? 'Selecciona un estado primero' : loadingMunicipiosEmpresa ? 'Cargando municipios...' : 'Selecciona un municipio'}\r\n                  searchable\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"URL de Ubicaci√≥n\"\r\n                placeholder=\"Ej. https://maps.google.com/...\"\r\n                value={formData?.ubicacionUrl}\r\n                onChange={(e) => handleInputChange('ubicacionUrl', e?.target?.value)}\r\n                error={errors?.ubicacionUrl}\r\n              />\r\n              <p className=\"text-xs text-muted-foreground mt-1\">\r\n                Opcional: Link de Google Maps o ubicaci√≥n web de la empresa\r\n              </p>\r\n            </div>\r\n\r\n            {/* RFC y Sitio Web */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"FileText\" size={20} className=\"mr-2\" />\r\n                Informaci√≥n Fiscal y Web\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"RFC\"\r\n                placeholder=\"Ej. ABC123456XYZ\"\r\n                value={formData?.rfc}\r\n                onChange={(e) => handleInputChange('rfc', e?.target?.value)}\r\n                error={errors?.rfc}\r\n                required\r\n                maxLength={13}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Sitio Web\"\r\n                placeholder=\"Ej. https://www.empresa.com.mx\"\r\n                value={formData?.website}\r\n                onChange={(e) => handleInputChange('website', e?.target?.value)}\r\n                error={errors?.website}\r\n              />\r\n            </div>\r\n\r\n            {/* Informaci√≥n de Estado */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Settings\" size={20} className=\"mr-2\" />\r\n                Estado y Relaci√≥n\r\n              </h3>\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Estado\"\r\n                value={formData?.status}\r\n                onChange={(value) => handleInputChange('status', value)}\r\n                options={statusOptions?.map(status => ({ value: status, label: status }))}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Select\r\n                label=\"Salud de la Relaci√≥n\"\r\n                value={formData?.relationshipHealth}\r\n                onChange={(value) => handleInputChange('relationshipHealth', value)}\r\n                options={relationshipHealthOptions?.map(health => ({ value: health, label: health }))}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"date\"\r\n                label=\"Cliente Desde\"\r\n                value={formData?.clientSince}\r\n                onChange={(e) => handleInputChange('clientSince', e?.target?.value)}\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                type=\"date\"\r\n                label=\"Pr√≥ximo Seguimiento\"\r\n                value={formData?.nextFollowUp}\r\n                onChange={(e) => handleInputChange('nextFollowUp', e?.target?.value)}\r\n              />\r\n            </div>\r\n\r\n            {/* Direcci√≥n del Cliente */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"MapPin\" size={20} className=\"mr-2\" />\r\n                Direcci√≥n del Cliente\r\n              </h3>\r\n              <p className=\"text-sm text-muted-foreground mb-4\">\r\n                Direcci√≥n completa donde se puede contactar o visitar al cliente\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 md:col-span-2\">\r\n              <div>\r\n                <Select\r\n                  label={<>Estado <span className=\"text-destructive\">*</span></>}\r\n                  value={formData.estadoDireccion}\r\n                  onChange={value => {\r\n                    handleInputChange('estadoDireccion', value);\r\n                    handleInputChange('municipioDireccion', '');\r\n                  }}\r\n                  options={\r\n                    estados ? [{ value: '', label: 'Selecciona un estado' }, ...estados.map(e => ({ value: e.code, label: e.name }))] : []\r\n                  }\r\n                  loading={loadingEstados}\r\n                  error={errors?.estadoDireccion}\r\n                  required\r\n                  disabled={loadingEstados || !!errorEstados}\r\n                  placeholder={loadingEstados ? 'Cargando estados...' : 'Selecciona un estado'}\r\n                  searchable\r\n                />\r\n              </div>\r\n              <div>\r\n                <Select\r\n                  label={<>Municipio <span className=\"text-destructive\">*</span></>}\r\n                  value={formData.municipioDireccion}\r\n                  onChange={value => handleInputChange('municipioDireccion', value)}\r\n                  options={\r\n                    formData.estadoDireccion === ''\r\n                      ? [{ value: '', label: 'Selecciona un estado primero' }]\r\n                      : loadingMunicipiosDireccion\r\n                        ? [{ value: '', label: 'Cargando municipios...' }]\r\n                        : errorMunicipiosDireccion\r\n                          ? [{ value: '', label: 'Error al cargar municipios' }]\r\n                          : [{ value: '', label: 'Selecciona un municipio' }, ...(municipiosDireccion ? Object.values(municipiosDireccion.municipios || {}).map((m, idx) => ({ value: m, label: m })) : [])]\r\n                  }\r\n                  loading={loadingMunicipiosDireccion}\r\n                  error={errors?.municipioDireccion}\r\n                  required\r\n                  disabled={formData.estadoDireccion === '' || loadingMunicipiosDireccion || !!errorMunicipiosDireccion}\r\n                  placeholder={formData.estadoDireccion === '' ? 'Selecciona un estado primero' : loadingMunicipiosDireccion ? 'Cargando municipios...' : 'Selecciona un municipio'}\r\n                  searchable\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Direcci√≥n completa\"\r\n                placeholder=\"Ej. Av. Constituci√≥n 1234, Col. Centro\"\r\n                value={formData?.direccionCompleta}\r\n                onChange={(e) => handleInputChange('direccionCompleta', e?.target?.value)}\r\n                error={errors?.direccionCompleta}\r\n                required\r\n                maxLength={200}\r\n              />\r\n              {formData?.direccionCompleta && formData.direccionCompleta.length > 0 && (\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {formData.direccionCompleta.length}/200 caracteres\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"FileText\" size={20} className=\"mr-2\" />\r\n                Notas Adicionales\r\n              </h3>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                  Notas\r\n                </label>\r\n                <textarea\r\n                  className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none bg-background text-foreground\"\r\n                  rows=\"4\"\r\n                  placeholder=\"Informaci√≥n adicional sobre el cliente...\"\r\n                  value={formData?.notes}\r\n                  onChange={(e) => handleInputChange('notes', e?.target?.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-border\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={handleClose}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            {mode === 'edit' ? (\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"default\"\r\n                iconName=\"Save\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Guardar\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                type=\"submit\"\r\n                variant=\"default\"\r\n                iconName=\"Plus\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Agregar Cliente\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewClientModal;","import React, { useState, useEffect } from 'react';\r\nimport useClient from '../../hooks/useClient';\r\nimport useCommunication from '../../hooks/useCommunication';\r\nimport { useEstados } from '../../hooks/useEstado';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\n\r\nimport ClientCard from './components/ClientCard';\r\nimport ClientTable from './components/ClientTable';\r\nimport ClientFilters from './components/ClientFilters';\r\nimport ClientCommunicationPanel from './components/ClientCommunicationPanel';\r\nimport DocumentStatus from './components/DocumentStatus';\r\nimport ContractAlerts from './components/ContractAlerts';\r\nimport NewClientModal from './components/NewClientModal';\r\n\r\nconst ClientManagement = () => {\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [viewMode, setViewMode] = useState('table');\r\n  const [selectedClient, setSelectedClient] = useState(null);\r\n  const [showSidebar, setShowSidebar] = useState(false);\r\n  const [showNewClientModal, setShowNewClientModal] = useState(false);\r\n  const [clientCommunications, setClientCommunications] = useState([]);\r\n  \r\n  const { clients, getClients, createClient, editClient, loading, error } = useClient();\r\n  const { estados } = useEstados();\r\n  const { \r\n    createCommunication, \r\n    getComunicacionesByCliente, \r\n    loading: loadingComm \r\n  } = useCommunication();\r\n\r\n  // C√°lculo de clientes activos (case-insensitive para 'estado')\r\n  // C√°lculo de total clientes del mes anterior\r\n  const getPreviousMonthClients = (clientsArr) => {\r\n    if (!Array.isArray(clientsArr)) return 0;\r\n    const now = new Date();\r\n    const firstDayOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\r\n    return clientsArr.filter(c => {\r\n      const createdAt = c?.createdAt ? new Date(c.createdAt) : null;\r\n      return createdAt && createdAt < firstDayOfMonth;\r\n    }).length;\r\n  };\r\n  const getActiveClients = (clientsArr) => {\r\n    if (!Array.isArray(clientsArr)) return 0;\r\n    return clientsArr.filter(c => {\r\n      const estado = (c?.estado || c?.status || '').toString().toLowerCase();\r\n      return estado === 'activo';\r\n    }).length;\r\n  };\r\n\r\n  // C√°lculo de clientes activos del mes anterior\r\n  const getPreviousMonthActiveClients = (clientsArr) => {\r\n    if (!Array.isArray(clientsArr)) return 0;\r\n    const now = new Date();\r\n    // Primer d√≠a del mes actual\r\n    const firstDayOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\r\n    return clientsArr.filter(c => {\r\n      const estado = (c?.estado || c?.status || '').toString().toLowerCase();\r\n      const createdAt = c?.createdAt ? new Date(c.createdAt) : null;\r\n      return estado === 'activo' && createdAt && createdAt < firstDayOfMonth;\r\n    }).length;\r\n  };\r\n\r\n  // C√°lculo de variaci√≥n porcentual\r\n  const getMonthlyVariation = (current, previous) => {\r\n    if (typeof previous !== 'number' || previous === 0) return '+0%';\r\n    const percent = ((current - previous) / previous) * 100;\r\n    return `${percent > 0 ? '+' : ''}${percent.toFixed(0)}%`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    getClients();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    industry: '',\r\n    status: '',\r\n    relationshipHealth: '',\r\n    location: '',\r\n    rfc: '',\r\n    minProjects: '',\r\n    minValue: ''\r\n  });\r\n\r\n  const handleSidebarToggle = () => {\r\n    setSidebarCollapsed(!sidebarCollapsed);\r\n  };\r\n\r\n  const handleMobileMenuToggle = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n  };\r\n\r\n  // Mock data for communications\r\n  const mockCommunications = [\r\n    {\r\n      id: 1,\r\n      type: \"email\",\r\n      subject: \"Propuesta de Mantenimiento Anual\",\r\n      description: \"Env√≠o de propuesta para contrato de mantenimiento anual de sistemas HVAC. Incluye revisiones trimestrales y soporte 24/7.\",\r\n      contactPerson: \"Carlos Hern√°ndez\",\r\n      date: \"2024-09-28T10:30:00\",\r\n      hasAttachments: true\r\n    },\r\n    {\r\n      id: 2,\r\n      type: \"phone\",\r\n      subject: \"Seguimiento de Proyecto Torre B\",\r\n      description: \"Llamada telef√≥nica para revisar avances del proyecto de instalaci√≥n en Torre B. Cliente satisfecho con el progreso.\",\r\n      contactPerson: \"Mar√≠a Gonz√°lez\",\r\n      date: \"2024-09-25T14:15:00\",\r\n      hasAttachments: false\r\n    },\r\n    {\r\n      id: 3,\r\n      type: \"meeting\",\r\n      subject: \"Reuni√≥n de Cierre de Proyecto\",\r\n      description: \"Reuni√≥n presencial para la entrega final del proyecto de climatizaci√≥n del hotel. Firma de acta de aceptaci√≥n.\",\r\n      contactPerson: \"Roberto Mart√≠nez\",\r\n      date: \"2024-09-20T09:00:00\",\r\n      hasAttachments: true\r\n    },\r\n    {\r\n      id: 4,\r\n      type: \"contract\",\r\n      subject: \"Renovaci√≥n de Contrato de Servicio\",\r\n      description: \"Proceso de renovaci√≥n del contrato de servicio t√©cnico para el pr√≥ximo a√±o acad√©mico.\",\r\n      contactPerson: \"Ana Rodr√≠guez\",\r\n      date: \"2024-09-18T16:45:00\",\r\n      hasAttachments: true\r\n    }\r\n  ];\r\n\r\n  // Mock data for documents\r\n  const mockDocuments = [\r\n    {\r\n      id: 1,\r\n      name: \"RFC - Grupo Industrial Monterrey\",\r\n      type: \"RFC\",\r\n      status: \"Completo\",\r\n      uploadDate: \"2024-03-15\",\r\n      expirationDate: null,\r\n      notes: \"Documento fiscal actualizado\"\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"Contrato de Servicios 2024\",\r\n      type: \"Contrato\",\r\n      status: \"Completo\",\r\n      uploadDate: \"2024-01-10\",\r\n      expirationDate: \"2024-12-31\",\r\n      notes: \"Contrato anual de mantenimiento\"\r\n    },\r\n    {\r\n      id: 3,\r\n      name: \"Garant√≠a Equipos HVAC\",\r\n      type: \"Garant√≠a\",\r\n      status: \"Pendiente\",\r\n      uploadDate: \"2024-06-20\",\r\n      expirationDate: \"2025-06-20\",\r\n      notes: \"Pendiente firma del cliente\"\r\n    },\r\n    {\r\n      id: 4,\r\n      name: \"Informaci√≥n Fiscal\",\r\n      type: \"Facturaci√≥n\",\r\n      status: \"En Revisi√≥n\",\r\n      uploadDate: \"2024-09-01\",\r\n      expirationDate: null,\r\n      notes: \"Actualizaci√≥n de datos fiscales\"\r\n    }\r\n  ];\r\n\r\n  // Mock data for contracts\r\n  const mockContracts = [\r\n    {\r\n      id: 1,\r\n      contractNumber: \"CONT-2024-001\",\r\n      clientName: \"Grupo Industrial Monterrey\",\r\n      startDate: \"2024-01-01\",\r\n      expirationDate: \"2024-12-31\",\r\n      value: 850000,\r\n      description: \"Contrato de mantenimiento anual para sistemas HVAC industriales\"\r\n    },\r\n    {\r\n      id: 2,\r\n      contractNumber: \"CONT-2024-002\",\r\n      clientName: \"Hotel Ejecutivo Guadalajara\",\r\n      startDate: \"2024-03-15\",\r\n      expirationDate: \"2024-10-15\",\r\n      value: 450000,\r\n      description: \"Instalaci√≥n y mantenimiento de sistema de climatizaci√≥n\"\r\n    },\r\n    {\r\n      id: 3,\r\n      contractNumber: \"CONT-2023-015\",\r\n      clientName: \"Cl√≠nica M√©dica Especializada\",\r\n      startDate: \"2023-11-01\",\r\n      expirationDate: \"2024-09-25\",\r\n      value: 320000,\r\n      description: \"Sistema de ventilaci√≥n especializada para √°reas m√©dicas\"\r\n    }\r\n  ];\r\n\r\n  const [filteredClients, setFilteredClients] = useState(clients);\r\n\r\n  useEffect(() => {\r\n    let filtered = clients;\r\n\r\n    // Filtro de b√∫squeda (empresa, contacto, email)\r\n    if (filters?.search) {\r\n      const search = filters.search.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => {\r\n        const empresa = (client?.empresa || client?.companyName || '').toString().toLowerCase();\r\n        const contacto = (client?.contacto || client?.contactPerson || '').toString().toLowerCase();\r\n        const email = (client?.email || '').toString().toLowerCase();\r\n        return empresa.includes(search) || contacto.includes(search) || email.includes(search);\r\n      });\r\n    }\r\n\r\n    // Industria\r\n    if (filters?.industry) {\r\n      const industry = filters.industry.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => (client?.industria || client?.industry || '').toString().toLowerCase() === industry);\r\n    }\r\n\r\n    // Estado\r\n    if (filters?.status) {\r\n      const estado = filters.status.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => (client?.estado || client?.status || '').toString().toLowerCase() === estado);\r\n    }\r\n\r\n    // Relaci√≥n\r\n    if (filters?.relationshipHealth) {\r\n      const relacion = filters.relationshipHealth.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => (client?.relacion || client?.relationshipHealth || '').toString().toLowerCase() === relacion);\r\n    }\r\n\r\n    // Ubicaci√≥n\r\n    if (filters?.location) {\r\n      const location = filters.location.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => {\r\n        const estadoEmpresa = (client?.ubicacionEmpre?.estado || '').toString().toLowerCase();\r\n        const municipioEmpresa = (client?.ubicacionEmpre?.municipio || '').toString().toLowerCase();\r\n        const estadoDireccion = (client?.ubicacion?.estado || '').toString().toLowerCase();\r\n        const municipioDireccion = (client?.ubicacion?.municipio || '').toString().toLowerCase();\r\n        return estadoEmpresa.includes(location) || \r\n               municipioEmpresa.includes(location) || \r\n               estadoDireccion.includes(location) || \r\n               municipioDireccion.includes(location);\r\n      });\r\n    }\r\n\r\n    // RFC\r\n    if (filters?.rfc) {\r\n      const rfc = filters.rfc.trim().toLowerCase();\r\n      filtered = filtered?.filter(client => (client?.rfc || '').toString().toLowerCase().includes(rfc));\r\n    }\r\n\r\n    // Proyectos m√≠nimos\r\n    if (filters?.minProjects) {\r\n      filtered = filtered?.filter(client => (parseInt(client?.totalProjects || client?.proyectos || 0) || 0) >= parseInt(filters?.minProjects));\r\n    }\r\n\r\n    // Valor m√≠nimo\r\n    if (filters?.minValue) {\r\n      filtered = filtered?.filter(client => (parseInt(client?.totalValue || client?.valor || 0) || 0) >= parseInt(filters?.minValue));\r\n    }\r\n\r\n    setFilteredClients(filtered);\r\n  }, [filters, clients]);\r\n\r\n  const handleFiltersChange = (newFilters) => {\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  const handleClearFilters = () => {\r\n    setFilters({\r\n      search: '',\r\n      industry: '',\r\n      status: '',\r\n      relationshipHealth: '',\r\n      location: '',\r\n      rfc: '',\r\n      minProjects: '',\r\n      minValue: ''\r\n    });\r\n  };\r\n\r\n  const handleExportClients = () => {\r\n    if (!filteredClients || filteredClients.length === 0) {\r\n      alert('No hay datos para exportar');\r\n      return;\r\n    }\r\n\r\n    // Preparar los datos para exportar (sin Cliente Desde, Total Proyectos, Contratos Activos, Valor Total)\r\n    const dataToExport = filteredClients.map(client => {\r\n      // Extraer contactos adicionales si existen\r\n      const contactosAdicionales = Array.isArray(client.contactos) && client.contactos.length > 1\r\n        ? client.contactos.slice(1).map((c, idx) => `${c.contacto} (${c.email}, ${c.telefono})`).join(' | ')\r\n        : '';\r\n\r\n      return {\r\n        'Empresa': client.companyName || client.empresa || '',\r\n        'RFC': client.rfc || '',\r\n        'Contacto Principal': client.contactPerson || client.contacto || '',\r\n        'Email Principal': client.email || '',\r\n        'Tel√©fono Principal': client.phone || client.telefono || '',\r\n        'Contactos Adicionales': contactosAdicionales,\r\n        'Industria': client.industry || client.industria || '',\r\n        'Ubicaci√≥n Empresa - Estado': client.ubicacionEmpre?.estado || '',\r\n        'Ubicaci√≥n Empresa - Municipio': client.ubicacionEmpre?.municipio || '',\r\n        'URL Ubicaci√≥n Empresa': client.ubicacionUrl || '',\r\n        'Direcci√≥n Cliente - Estado': client.ubicacion?.estado || '',\r\n        'Direcci√≥n Cliente - Municipio': client.ubicacion?.municipio || '',\r\n        'Direcci√≥n Completa': client.ubicacion?.direccion || client.address || '',\r\n        'Sitio Web': client.website || client.sitioWeb || '',\r\n        'Estado': client.status || client.estado || '',\r\n        'Relaci√≥n': client.relationshipHealth || client.relacion || '',\r\n        'Pr√≥ximo Seguimiento': client.nextFollowUp || client.proximoSeguimiento || '',\r\n        'Notas': client.notes || client.notas || ''\r\n      };\r\n    });\r\n\r\n    // Convertir a CSV\r\n    const headers = Object.keys(dataToExport[0]);\r\n    const csvContent = [\r\n      headers.join(','),\r\n      ...dataToExport.map(row => \r\n        headers.map(header => {\r\n          const value = row[header];\r\n          // Escapar comillas y envolver en comillas si contiene comas\r\n          const escaped = String(value).replace(/\"/g, '\"\"');\r\n          return `\"${escaped}\"`;\r\n        }).join(',')\r\n      )\r\n    ].join('\\n');\r\n\r\n    // Crear el archivo y descargarlo\r\n    const blob = new Blob(['\\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    const url = URL.createObjectURL(blob);\r\n    \r\n    const fecha = new Date().toISOString().split('T')[0];\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `clientes_${fecha}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    \r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const handleViewDetails = (client) => {\r\n    setSelectedClient(client);\r\n    setShowSidebar(true);\r\n    // Cargar comunicaciones del cliente\r\n    loadClientCommunications(client.id || client._id);\r\n  };\r\n\r\n  // Funci√≥n para cargar comunicaciones del cliente\r\n  const loadClientCommunications = async (clientId) => {\r\n    if (!clientId) return;\r\n    \r\n    try {\r\n      const response = await getComunicacionesByCliente(clientId);\r\n      if (response && response.data && response.data.comunicaciones) {\r\n        // Mapear los datos del backend al formato del frontend\r\n        const mappedComms = response.data.comunicaciones.map(comm => ({\r\n          id: comm.id,\r\n          type: comm.tipoComunicacion || comm.medioDifusion || 'email',\r\n          subject: comm.asunto,\r\n          description: comm.mensaje,\r\n          contactPerson: comm.creadoPor || 'Sistema',\r\n          date: comm.fechaCreacion,\r\n          hasAttachments: false,\r\n          urgency: comm.nivelUrgencia || 'normal',\r\n          status: comm.estado || 'completado'\r\n        }));\r\n        setClientCommunications(mappedComms);\r\n      } else {\r\n        setClientCommunications([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al cargar comunicaciones:', error);\r\n      setClientCommunications([]);\r\n    }\r\n  };\r\n\r\n  const [editModalState, setEditModalState] = useState({ open: false, client: null });\r\n\r\n  const handleEditClient = (client) => {\r\n    setEditModalState({ open: true, client });\r\n  };\r\n\r\n  const handleSubmitEditClient = async (updatedClient) => {\r\n    if (!updatedClient?.id) return;\r\n    const response = await editClient(updatedClient.id, updatedClient);\r\n    // Espera a que el estado se actualice antes de cerrar el modal\r\n    if (response && response.success) {\r\n      setEditModalState({ open: false, client: null });\r\n      // Recargar la lista de clientes para asegurar que est√© actualizada\r\n      await getClients(true);\r\n    }\r\n  };\r\n\r\n  const handleViewProjects = (client) => {\r\n    console.log('Ver proyectos del cliente:', client);\r\n    window.location.href = `/proyectos?client=${client?.id}`;\r\n  };\r\n\r\n  const handleViewContracts = (client) => {\r\n    console.log('Ver contratos del cliente:', client);\r\n  };\r\n\r\n  const handleAddClient = () => {\r\n    setShowNewClientModal(true);\r\n  };\r\n\r\n  const handleSubmitNewClient = async (clientData) => {\r\n    const result = await createClient(clientData);\r\n    if (result && result.success) {\r\n      setShowNewClientModal(false);\r\n      // Recargar la lista de clientes para asegurar que est√© actualizada\r\n      await getClients(true);\r\n    }\r\n  };\r\n\r\n  const handleSubmitCommunication = async (commData) => {\r\n    if (!selectedClient) return;\r\n\r\n    const payload = {\r\n      tipoComunicacion: commData.tipoComunicacion,\r\n      nivelUrgencia: commData.nivelUrgencia,\r\n      asunto: commData.asunto,\r\n      mensaje: commData.mensaje,\r\n      idCliente: selectedClient.id || selectedClient._id,\r\n      idOportunidad: '' // Vac√≠o para comunicaciones directas del cliente\r\n    };\r\n\r\n    const response = await createCommunication(payload);\r\n    if (response) {\r\n      // Recargar comunicaciones\r\n      loadClientCommunications(selectedClient.id || selectedClient._id);\r\n    }\r\n  };\r\n\r\n  const handleViewCommunicationDetails = (communication) => {\r\n    console.log('Ver detalles de comunicaci√≥n:', communication);\r\n  };\r\n\r\n  const handleUploadDocument = (document = null) => {\r\n    console.log('Subiendo documento:', document);\r\n  };\r\n\r\n  const handleViewDocument = (document) => {\r\n    console.log('Ver documento:', document);\r\n  };\r\n\r\n  const handleDownloadDocument = (document) => {\r\n    console.log('Descargar documento:', document);\r\n  };\r\n\r\n  const handleViewContract = (contract) => {\r\n    console.log('Ver contrato:', contract);\r\n  };\r\n\r\n  const handleRenewContract = (contract) => {\r\n    console.log('Renovar contrato:', contract);\r\n  };\r\n\r\n  const handleScheduleRenewal = (contract) => {\r\n    console.log('Programar renovaci√≥n:', contract);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Desktop Sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <Sidebar \r\n          isCollapsed={sidebarCollapsed} \r\n          onToggle={handleSidebarToggle}\r\n        />\r\n      </div>\r\n\r\n      {/* Mobile Header */}\r\n      <div className=\"lg:hidden\">\r\n        <Header \r\n          onMenuToggle={handleMobileMenuToggle}\r\n          isMenuOpen={mobileMenuOpen}\r\n        />\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className={`transition-all duration-300 ${\r\n        sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n      }`}>\r\n        <div className=\"flex\">\r\n              {/* Main Content */}\r\n              <div className={`flex-1 transition-all duration-300 ${showSidebar ? 'mr-96' : ''}`}>\r\n                <div className=\"p-6\">\r\n                  {/* Modals */}\r\n                  <NewClientModal\r\n                   isOpen={showNewClientModal}\r\n                   onClose={() => setShowNewClientModal(false)}\r\n                   onSubmit={handleSubmitNewClient}\r\n                   mode=\"create\"\r\n                   createClient={createClient}\r\n                   editClient={editClient}\r\n                  />\r\n                  <NewClientModal\r\n                   isOpen={editModalState.open}\r\n                   onClose={() => setEditModalState({ open: false, client: null })}\r\n                   onSubmit={handleSubmitEditClient}\r\n                   initialData={editModalState.client}\r\n                   mode=\"edit\"\r\n                   createClient={createClient}\r\n                   editClient={editClient}\r\n                  />\r\n                  {/* Breadcrumb */}\r\n              <div className=\"mb-6\">\r\n                <Breadcrumb />\r\n              </div>\r\n\r\n              {/* Header */}\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <div>\r\n                  <h1 className=\"text-2xl font-bold text-foreground\">Gesti√≥n de Clientes</h1>\r\n                  <p className=\"text-muted-foreground\">\r\n                    Administra relaciones con clientes, contratos y comunicaciones\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"flex items-center space-x-2 bg-muted rounded-lg p-1\">\r\n                    <Button\r\n                      variant={viewMode === 'table' ? 'default' : 'ghost'}\r\n                      size=\"sm\"\r\n                      onClick={() => setViewMode('table')}\r\n                      iconName=\"Table\"\r\n                    >\r\n                      Tabla\r\n                    </Button>\r\n                    <Button\r\n                      variant={viewMode === 'cards' ? 'default' : 'ghost'}\r\n                      size=\"sm\"\r\n                      onClick={() => setViewMode('cards')}\r\n                      iconName=\"Grid3X3\"\r\n                    >\r\n                      Tarjetas\r\n                    </Button>\r\n                  </div>\r\n                  <Button\r\n                    variant=\"default\"\r\n                    onClick={handleAddClient}\r\n                    iconName=\"Plus\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Nuevo Cliente\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Stats Cards */}\r\n              {/* <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6\">\r\n                <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Total Clientes</p>\r\n                      <p className=\"text-2xl font-bold text-foreground\">{Array.isArray(clients) ? clients.length : 0}</p>\r\n                    </div>\r\n                    <div className=\"w-12 h-12 bg-primary rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"Users\" size={24} color=\"white\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-4 flex items-center space-x-2\">\r\n                    <Icon name=\"TrendingUp\" size={16} className=\"text-success\" />\r\n                    <span className=\"text-sm text-success\">{getMonthlyVariation(Array.isArray(clients) ? clients.length : 0, getPreviousMonthClients(clients))} este mes</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Clientes Activos</p>\r\n                      <p className=\"text-2xl font-bold text-foreground\">\r\n                        {getActiveClients(clients)}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"w-12 h-12 bg-success rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"UserCheck\" size={24} color=\"white\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-4 flex items-center space-x-2\">\r\n                    <Icon name=\"TrendingUp\" size={16} className=\"text-success\" />\r\n                    <span className=\"text-sm text-success\">{getMonthlyVariation(getActiveClients(clients), getPreviousMonthActiveClients(clients))} este mes</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Contratos Activos</p>\r\n                      <p className=\"text-2xl font-bold text-foreground\">\r\n                        {Array.isArray(clients) ? clients.reduce((sum, client) => sum + (Number(client?.activeContracts) || 0), 0) : 0}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"w-12 h-12 bg-accent rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"FileCheck\" size={24} color=\"white\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-4 flex items-center space-x-2\">\r\n                    <Icon name=\"TrendingUp\" size={16} className=\"text-success\" />\r\n                    <span className=\"text-sm text-success\">+5% este mes</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-card border border-border rounded-lg p-6 card-shadow\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm text-muted-foreground\">Valor Total</p>\r\n                      <p className=\"text-2xl font-bold text-foreground\">\r\n                        ${Array.isArray(clients) ? clients.reduce((sum, client) => sum + (Number(client?.totalValue) || 0), 0).toLocaleString('es-MX') : '0'}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"w-12 h-12 bg-warning rounded-lg flex items-center justify-center\">\r\n                      <Icon name=\"DollarSign\" size={24} color=\"white\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mt-4 flex items-center space-x-2\">\r\n                    <Icon name=\"TrendingUp\" size={16} className=\"text-success\" />\r\n                    <span className=\"text-sm text-success\">+15% este mes</span>\r\n                  </div>\r\n                </div>\r\n              </div> */}\r\n\r\n              {/* Filters */}\r\n              <ClientFilters\r\n                filters={filters}\r\n                onFiltersChange={handleFiltersChange}\r\n                onClearFilters={handleClearFilters}\r\n                onExport={handleExportClients}\r\n                estados={estados}\r\n              />\r\n\r\n              {/* Client List */}\r\n              {viewMode === 'table' ? (\r\n                <div style={{overflowX: 'auto', width: '100%'}}>\r\n                  <ClientTable\r\n                    clients={filteredClients}\r\n                    onViewDetails={handleViewDetails}\r\n                    onEditClient={handleEditClient}\r\n                    onViewProjects={handleViewProjects}\r\n                    onViewContracts={handleViewContracts}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n                  {filteredClients?.map((client) => (\r\n                    <ClientCard\r\n                      key={client?.id}\r\n                      client={client}\r\n                      onViewDetails={handleViewDetails}\r\n                      onEditClient={handleEditClient}\r\n                      onViewProjects={handleViewProjects}\r\n                      onViewContracts={handleViewContracts}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n\r\n              {filteredClients?.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <Icon name=\"Users\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-semibold text-foreground mb-2\">No se encontraron clientes</h3>\r\n                  <p className=\"text-muted-foreground mb-4\">\r\n                    Ajusta los filtros de b√∫squeda o agrega un nuevo cliente\r\n                  </p>\r\n                  <Button\r\n                    variant=\"default\"\r\n                    onClick={handleAddClient}\r\n                    iconName=\"Plus\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Agregar Primer Cliente\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Sidebar */}\r\n          {showSidebar && (\r\n            <div className=\"fixed right-0 top-0 h-full bg-card border-l border-border shadow-lg z-1000 overflow-y-auto\" style={{width: '500px', minWidth: '440px'}}>\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  <h2 className=\"text-lg font-semibold text-foreground\">\r\n                    {selectedClient?.companyName}\r\n                  </h2>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    onClick={() => setShowSidebar(false)}\r\n                  >\r\n                    <Icon name=\"X\" size={20} />\r\n                  </Button>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                  {/* Communication Panel */}\r\n                  <ClientCommunicationPanel client={selectedClient} />\r\n\r\n                  {/* Document Status */}\r\n                  <DocumentStatus\r\n                    documents={mockDocuments}\r\n                    onUploadDocument={handleUploadDocument}\r\n                    onViewDocument={handleViewDocument}\r\n                    onDownloadDocument={handleDownloadDocument}\r\n                  />\r\n\r\n                  {/* Contract Alerts */}\r\n                  <ContractAlerts\r\n                    contracts={mockContracts}\r\n                    onViewContract={handleViewContract}\r\n                    onRenewContract={handleRenewContract}\r\n                    onScheduleRenewal={handleScheduleRenewal}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Sidebar Overlay */}\r\n          {showSidebar && (\r\n            <div\r\n              className=\"fixed inset-0 bg-black bg-opacity-50 z-999 lg:hidden\"\r\n              onClick={() => setShowSidebar(false)}\r\n            />\r\n          )}\r\n\r\n          {/* New Client Modal */}\r\n          <NewClientModal\r\n            isOpen={showNewClientModal}\r\n            onClose={() => setShowNewClientModal(false)}\r\n            onSubmit={handleSubmitNewClient}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientManagement;","import React, { useState, useEffect } from \"react\";\r\nimport Icon from \"../../../components/AppIcon\";\r\nimport Button from \"../../../components/ui/Button\";\r\nimport Input from \"../../../components/ui/Input\";\r\nimport Select from \"../../../components/ui/Select\";\r\nimport { Checkbox } from \"../../../components/ui/Checkbox\";\r\nimport useOperac from \"../../../hooks/useOperac\";\r\nimport useClient from \"../../../hooks/useClient\";\r\nimport usePerson from \"../../../hooks/usePerson\";\r\nimport useProyecto from \"../../../hooks/useProyect\";\r\n\r\n\r\nconst WorkOrderModal = ({ isOpen, onClose, workOrder, mode = \"edit\", onSaveSuccess }) => {\r\n  const { createWorkOrder, updateWorkOrder } = useOperac();\r\n  const { getProyectos } = useProyecto();\r\n  const [clientProjects, setClientProjects] = useState([]);\r\n\r\n  const { clients, getClients, loading: loadingClients, error: errorClients } = useClient();\r\n  const { getPersonsByDepartment, departmentPersons, loading: loadingPersons } = usePerson();\r\n\r\n  const isViewMode = mode === \"view\";\r\n\r\n  const [formData, setFormData] = useState({\r\n    orderNumber: \"\",\r\n    assignedTechnician: { id: \"\", nombre: \"\" },\r\n    priority: \"Media\",\r\n    status: \"Pendiente\",\r\n    dueDate: \"\",\r\n    workDescription: \"\",\r\n    additionalNotes: \"\",\r\n    requiredPPE: [],\r\n    medicalRequirements: false,\r\n    client: { id: \"\", nombre: \"\", contacto: \"\", email: \"\", telefono: \"\" },\r\n    type: \"\",\r\n    proyectoNombre: \"\", \r\n  });\r\n\r\n  const [assignClient, setAssignClient] = useState(false);\r\n\r\n  //Carga de clientes y t√©cnicos\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      getClients();\r\n      getPersonsByDepartment(\"Taller,Mantenimiento\");\r\n    }\r\n  }, [isOpen]);\r\n\r\n  //Carga de proyectos seg√∫n cliente seleccionado\r\n  useEffect(() => {\r\n    const fetchProjectsByClient = async () => {\r\n      if (!formData.client.id) {\r\n        setClientProjects([]);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const allProjects = await getProyectos({ force: true });\r\n        const filtered = allProjects.filter(\r\n          (p) =>\r\n            p.cliente?.id === formData.client.id ||\r\n            p.cliente?._id === formData.client.id\r\n        );\r\n        setClientProjects(filtered);\r\n      } catch (error) {\r\n        console.error(\"Error al obtener proyectos del cliente:\", error);\r\n        setClientProjects([]);\r\n      }\r\n    };\r\n\r\n    fetchProjectsByClient();\r\n  }, [formData.client.id]);\r\n\r\n  //Cuando se edita o visualiza una orden existente\r\n  useEffect(() => {\r\n  const loadWorkOrderData = async () => {\r\n    if (!workOrder) return;\r\n\r\n    // Carga inicial del formulario\r\n    setFormData({\r\n      orderNumber: workOrder.ordenTrabajo || \"\",\r\n      assignedTechnician: {\r\n        id: workOrder.tecnicoAsignado?.id || \"\",\r\n        nombre: workOrder.tecnicoAsignado?.nombre || \"\",\r\n      },\r\n      priority: workOrder.prioridad || \"Media\",\r\n      status: workOrder.estado || \"Pendiente\",\r\n      dueDate: workOrder.fechaLimite || \"\",\r\n      workDescription: workOrder.descripcion || \"\",\r\n      additionalNotes: workOrder.notasAdicionales || \"\",\r\n      requiredPPE: [\r\n        ...(workOrder.cascoSeguridad ? [\"Casco de Seguridad\"] : []),\r\n        ...(workOrder.gafasProteccion ? [\"Gafas de Protecci√≥n\"] : []),\r\n        ...(workOrder.guantesTrabajo ? [\"Guantes de Trabajo\"] : []),\r\n        ...(workOrder.calzadoSeguridad ? [\"Calzado de Seguridad\"] : []),\r\n        ...(workOrder.arnesSeguridad ? [\"Arn√©s de Seguridad\"] : []),\r\n        ...(workOrder.respiradorN95 ? [\"Respirador N95\"] : []),\r\n        ...(workOrder.chalecoReflectivo ? [\"Chaleco Reflectivo\"] : []),\r\n      ],\r\n      medicalRequirements: workOrder.requiereEstudiosMedicosActualizados || false,\r\n      client: {\r\n        id: workOrder.cliente?.id || \"\",\r\n        nombre:\r\n          workOrder.cliente?.nombre ||\r\n          workOrder.cliente?.empresa ||\r\n          workOrder.cliente?.companyName ||\r\n          \"\",\r\n        contacto: workOrder.cliente?.contacto || \"\",\r\n        email: workOrder.cliente?.email || \"\",\r\n        telefono: workOrder.cliente?.telefono || \"\",\r\n      },\r\n      type: workOrder.tipo || \"\",\r\n      // lo rellenamos abajo cuando tengamos proyectos\r\n      proyectoNombre: \"\",\r\n    });\r\n\r\n    setAssignClient(!!workOrder.cliente?.id);\r\n\r\n    if (workOrder.cliente?.id) {\r\n      try {\r\n        const allProjects = await getProyectos({ force: true });\r\n        const filtered = allProjects.filter(\r\n          (p) =>\r\n            p.cliente?.id === workOrder.cliente.id ||\r\n            p.cliente?._id === workOrder.cliente.id\r\n        );\r\n        setClientProjects(filtered);\r\n\r\n        // helper para normalizar texto\r\n        const normalize = (s) =>\r\n          typeof s === \"string\" ? s.trim().toLowerCase() : \"\";\r\n\r\n        let selectedProjectId = \"\";\r\n\r\n        // 1) si en el futuro guardas tambi√©n proyecto.id en la orden:\r\n        if (workOrder.proyecto?.id || workOrder.proyecto?._id) {\r\n          selectedProjectId = workOrder.proyecto.id || workOrder.proyecto._id;\r\n        }\r\n\r\n        // 2) si solo tienes el nombre del proyecto, lo buscamos por nombre\r\n        if (!selectedProjectId && workOrder.proyectoNombre) {\r\n          const match = filtered.find((p) => {\r\n            const nombreProyecto =\r\n              p.nombre ||\r\n              p.nombreProyecto || // <- por si lo llamas as√≠ en tus docs\r\n              \"\";\r\n            return (\r\n              normalize(nombreProyecto) ===\r\n              normalize(workOrder.proyectoNombre)\r\n            );\r\n          });\r\n\r\n          if (match) {\r\n            selectedProjectId = match.id || match._id;\r\n          }\r\n        }\r\n\r\n        if (selectedProjectId) {\r\n          setFormData((prev) => ({\r\n            ...prev,\r\n            proyectoNombre: selectedProjectId,\r\n          }));\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error al cargar proyectos del cliente:\", error);\r\n        setClientProjects([]);\r\n      }\r\n    }\r\n  };\r\n\r\n  loadWorkOrderData();\r\n}, [workOrder, isOpen, getProyectos]);\r\n\r\n\r\n// Agrega esto despu√©s\r\nuseEffect(() => {\r\n  if (workOrder?.cliente?.id && clients.length > 0) {\r\n    const selected = clients.find(\r\n      (c) => c.id === workOrder.cliente.id || c._id === workOrder.cliente.id\r\n    );\r\n\r\n    if (selected) {\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        client: {\r\n          id: selected.id || selected._id,\r\n          nombre:\r\n            selected.companyName || selected.empresa || selected.nombre || \"\",\r\n          contacto: selected.contacto || \"\",\r\n          email: selected.email || \"\",\r\n          telefono: selected.telefono || \"\",\r\n        },\r\n        proyectoNombre: prev.proyectoNombre,\r\n      }));\r\n      setAssignClient(true);\r\n    }\r\n  }\r\n}, [clients, workOrder]);\r\n\r\n\r\n\r\n  // Opciones\r\n  const priorityOptions = [\r\n    { value: 'Cr√≠tica', label: 'Cr√≠tica' },\r\n    { value: 'Alta', label: 'Alta' },\r\n    { value: 'Media', label: 'Media' },\r\n    { value: 'Baja', label: 'Baja' }\r\n  ];\r\n\r\n  const statusOptions = [\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'En Progreso', label: 'En Progreso' },\r\n    { value: 'En Pausa', label: 'En Pausa' },\r\n    { value: 'Completada', label: 'Completada' },\r\n    { value: 'Cancelada', label: 'Cancelada' }\r\n  ];\r\n\r\n  const ppeOptions = [\r\n    'Casco de Seguridad',\r\n    'Gafas de Protecci√≥n',\r\n    'Guantes de Trabajo',\r\n    'Calzado de Seguridad',\r\n    'Arn√©s de Seguridad',\r\n    'Respirador N95',\r\n    'Chaleco Reflectivo'\r\n  ];\r\n\r\n  //Handlers\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  const handlePPEChange = (item, checked) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      requiredPPE: checked \r\n        ? [...prev?.requiredPPE, item]\r\n        : prev?.requiredPPE?.filter(ppe => ppe !== item)\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n  const payload = {\r\n    ordenTrabajo: formData.orderNumber,\r\n    prioridad: formData.priority,\r\n    estado: formData.status,\r\n    fechaLimite: formData.dueDate,\r\n    descripcion: formData.workDescription,\r\n    notasAdicionales: formData.additionalNotes,\r\n    cascoSeguridad: formData.requiredPPE.includes(\"Casco de Seguridad\"),\r\n    gafasProteccion: formData.requiredPPE.includes(\"Gafas de Protecci√≥n\"),\r\n    guantesTrabajo: formData.requiredPPE.includes(\"Guantes de Trabajo\"),\r\n    calzadoSeguridad: formData.requiredPPE.includes(\"Calzado de Seguridad\"),\r\n    arnesSeguridad: formData.requiredPPE.includes(\"Arn√©s de Seguridad\"),\r\n    respiradorN95: formData.requiredPPE.includes(\"Respirador N95\"),\r\n    chalecoReflectivo: formData.requiredPPE.includes(\"Chaleco Reflectivo\"),\r\n    requiereEstudiosMedicosActualizados: formData.medicalRequirements,\r\n    tipo: formData.type,\r\n  };\r\n\r\n  if (assignClient && formData.client.id) {\r\n    payload.cliente = {\r\n      id: formData.client.id,\r\n      nombre: formData.client.nombre,\r\n    };\r\n  }\r\n\r\n  // ------- NUEVA L√ìGICA PARA PROYECTO -------\r\n  let proyectoNombreFinal = \"\";\r\n  let proyectoIdFinal = \"\";\r\n\r\n  if (formData.proyectoNombre) {\r\n    // Usuario seleccion√≥ un proyecto en el Select\r\n    const selectedProject = clientProjects.find(\r\n      (p) => p.id === formData.proyectoNombre || p._id === formData.proyectoNombre\r\n    );\r\n\r\n    if (selectedProject) {\r\n      proyectoNombreFinal =\r\n        selectedProject.nombre ||\r\n        selectedProject.nombreProyecto ||\r\n        \"\";\r\n      proyectoIdFinal = selectedProject.id || selectedProject._id;\r\n    }\r\n  } else if (workOrder?.proyecto?.id || workOrder?.proyectoNombre) {\r\n    // No toc√≥ el Select, pero la orden ya ten√≠a proyecto guardado\r\n    proyectoNombreFinal =\r\n      workOrder.proyectoNombre ||\r\n      workOrder.proyecto?.nombre ||\r\n      \"\";\r\n    proyectoIdFinal =\r\n      workOrder.proyecto?.id ||\r\n      workOrder.proyecto?._id ||\r\n      \"\";\r\n  }\r\n\r\n  if (proyectoNombreFinal) {\r\n    payload.proyecto = {\r\n      id: proyectoIdFinal || undefined,\r\n      nombre: proyectoNombreFinal,\r\n    };\r\n    payload.proyectoNombre = proyectoNombreFinal;\r\n  }\r\n  // ------------------------------------------\r\n\r\n  if (formData.assignedTechnician.id) {\r\n    payload.tecnicoAsignado = {\r\n      id: formData.assignedTechnician.id,\r\n      nombre: formData.assignedTechnician.nombre,\r\n    };\r\n  }\r\n\r\n  try {\r\n    let savedOrder;\r\n    if (workOrder?.id) {\r\n      savedOrder = await updateWorkOrder(workOrder.id, payload);\r\n    } else {\r\n      savedOrder = await createWorkOrder(payload);\r\n    }\r\n\r\n    onClose();\r\n    onSaveSuccess?.({\r\n    ...workOrder,\r\n    ...payload,\r\n    cliente: payload.cliente || workOrder?.cliente || null,\r\n    proyecto: payload.proyecto || workOrder?.proyecto || null,\r\n    proyectoNombre: payload.proyectoNombre || workOrder?.proyectoNombre || \"\"\r\n});\r\n\r\n  } catch (error) {\r\n    console.error(\"Error al guardar:\", error);\r\n  }\r\n};\r\n\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card rounded-lg border border-border w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">\r\n              {workOrder ? 'Editar Orden de Trabajo' : 'Nueva Orden de Trabajo'}\r\n            </h2>\r\n            {workOrder && (\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                {workOrder?.orderNumber} - {workOrder?.projectName}\r\n              </p>\r\n            )}\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n          >\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        <div className=\"p-6 space-y-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <Select\r\n              label=\"T√©cnico Asignado\"\r\n              options={technicianOptions}\r\n              value={formData?.assignedTechnician}\r\n              onChange={(value) => handleInputChange('assignedTechnician', value)}\r\n              searchable\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={formData?.priority}\r\n              onChange={(value) => handleInputChange('priority', value)}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Estado\"\r\n              options={statusOptions}\r\n              value={formData?.status}\r\n              onChange={(value) => handleInputChange('status', value)}\r\n              required\r\n            />\r\n\r\n            <Input\r\n              label=\"Fecha L√≠mite\"\r\n              type=\"date\"\r\n              value={formData?.dueDate}\r\n              onChange={(e) => handleInputChange('dueDate', e?.target?.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Notas Adicionales\r\n            </label>\r\n            <textarea\r\n              className=\"w-full px-3 py-2 border border-border rounded-md bg-input text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent\"\r\n              rows={4}\r\n              placeholder=\"Agregar notas sobre la orden de trabajo...\"\r\n              value={formData?.notes}\r\n              onChange={(e) => handleInputChange('notes', e?.target?.value)}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-3\">\r\n              Equipo de Protecci√≥n Personal (PPE) Requerido\r\n            </label>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\r\n              {ppeOptions?.map((item) => (\r\n                <Checkbox\r\n                  key={item}\r\n                  label={item}\r\n                  checked={formData?.requiredPPE?.includes(item)}\r\n                  onChange={(e) => handlePPEChange(item, e?.target?.checked)}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-muted/30 rounded-lg p-4\">\r\n            <Checkbox\r\n              label=\"Requiere Estudios M√©dicos\"\r\n              checked={formData.medicalRequirements}\r\n              onChange={(e) => handleInputChange(\"medicalRequirements\", e.target.checked)}\r\n              disabled={isViewMode}\r\n            />\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n  {/* Cliente con checkbox a la izquierda */}\r\n  <div>\r\n    <div className=\"flex items-center gap-2 mb-2\">\r\n      {/* Checkbox primero */}\r\n      <Checkbox\r\n        checked={assignClient}\r\n        onChange={(e) => setAssignClient(e.target.checked)}\r\n        disabled={isViewMode}\r\n        label=\"\" // sin texto\r\n      />\r\n      <label className=\"text-sm font-medium text-foreground\">Cliente</label>\r\n    </div>\r\n\r\n    {assignClient && (\r\n      <Select\r\n  value={formData.client.id}\r\n  onChange={(value) => {\r\n    const selected = clients.find(\r\n      (c) => c.id === value || c._id === value\r\n    );\r\n    handleInputChange(\"client\", {\r\n      id: value,\r\n      nombre:\r\n        selected?.companyName ||\r\n        selected?.empresa ||\r\n        selected?.nombre ||\r\n        \"\",\r\n      contacto: selected?.contacto || \"\",\r\n      email: selected?.email || \"\",\r\n      telefono: selected?.telefono || \"\",\r\n    });\r\n  }}\r\n  options={\r\n    Array.isArray(clients)\r\n      ? clients.map((c) => ({\r\n          value: c.id || c._id,\r\n          label:\r\n            c.companyName ||\r\n            c.empresa ||\r\n            c.nombre ||\r\n            \"Sin nombre\",\r\n        }))\r\n      : []\r\n  }\r\n  placeholder={\r\n    loadingClients\r\n      ? \"Cargando clientes...\"\r\n      : clients.length === 0\r\n      ? \"No hay clientes registrados\"\r\n      : \"Selecciona un cliente\"\r\n  }\r\n  loading={loadingClients}\r\n  disabled={isViewMode}\r\n  error={errorClients ? \"Error al cargar clientes\" : \"\"}\r\n/>\r\n\r\n    )}\r\n{assignClient && formData.client.id && (\r\n  <div className=\"mt-4\">\r\n    {/*Tarjeta del cliente (sin cambios) */}\r\n    <div className=\"relative flex flex-col items-start p-4 border border-blue-200 rounded-lg shadow-sm hover:shadow-md transition-all max-w-full overflow-hidden\">\r\n      {/* L√≠nea lateral decorativa */}\r\n      <div className=\"absolute left-0 top-0 h-full w-1 bg-blue-400 rounded-l-lg\"></div>\r\n\r\n      {/* Encabezado con √≠cono */}\r\n      <div className=\"flex items-center justify-between w-full mb-3\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"flex-shrink-0 bg-blue-100 p-2 rounded-md\">\r\n            <Icon name=\"Building2\" className=\"text-blue-600 w-5 h-5\" />\r\n          </div>\r\n          <h4 className=\"text-base font-semibold text-gray-900\">\r\n            {formData.client.nombre || \"Cliente sin nombre\"}\r\n          </h4>\r\n        </div>\r\n\r\n        {/* Bot√≥n copiar */}\r\n        <button\r\n          onClick={() => {\r\n            const datos = `\r\nCliente: ${formData.client.nombre || \"No especificado\"}\r\nContacto: ${formData.client.contacto || \"No especificado\"}\r\nTel√©fono: ${formData.client.telefono || \"No especificado\"}\r\nEmail: ${formData.client.email || \"No especificado\"}\r\n`;\r\n            navigator.clipboard.writeText(datos);\r\n          }}\r\n          className=\"text-xs bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded-md shadow-sm transition-all\"\r\n        >\r\n          Copiar\r\n        </button>\r\n      </div>\r\n\r\n      {/* Informaci√≥n del cliente */}\r\n      <div className=\"flex flex-col gap-2 text-xs text-gray-700 pl-1\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <Icon name=\"User\" className=\"w-4 h-4 text-gray-500\" />\r\n          <span className=\"font-semibold text-gray-700\">Contacto:</span>\r\n          <span className=\"truncate\">{formData.client.contacto || \"No especificado\"}</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Icon name=\"Phone\" className=\"w-4 h-4 text-gray-500\" />\r\n          <span className=\"font-semibold text-gray-700\">Tel√©fono:</span>\r\n          <span className=\"truncate\">{formData.client.telefono || \"No especificado\"}</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Icon name=\"Mail\" className=\"w-4 h-4 text-gray-500\" />\r\n          <span className=\"font-semibold text-gray-700\">Email:</span>\r\n          <span className=\"truncate\">{formData.client.email || \"No especificado\"}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    {/*Select de Proyecto ‚Äî abajo y fuera del recuadro */}\r\n    <div className=\"mt-4\">\r\n      <Select\r\n  label=\"Nombre del Proyecto\"\r\n  value={formData.proyectoNombre || \"\"}\r\n  onChange={(value) => handleInputChange(\"proyectoNombre\", value)}\r\n  options={\r\n    clientProjects.length > 0\r\n      ? clientProjects.map((p) => ({\r\n          value: p.id || p._id,\r\n          label: p.nombre || p.nombreProyecto || \"Sin nombre\",\r\n        }))\r\n      : []\r\n  }\r\n  placeholder={\r\n    formData.client.id\r\n      ? clientProjects.length > 0\r\n        ? \"Selecciona un proyecto\"\r\n        : \"Este cliente no tiene proyectos\"\r\n      : \"Selecciona un cliente primero\"\r\n  }\r\n  disabled={isViewMode || !formData.client.id}\r\n/>\r\n\r\n\r\n    </div>\r\n  </div>\r\n)}\r\n  </div>\r\n              {/* Tipo */}\r\n              <Select\r\n                label=\"Tipo\"\r\n                value={formData.type}\r\n                onChange={(value) => handleInputChange(\"type\", value)}\r\n                options={[\r\n                  { value: \"Instalaci√≥n\", label: \"Instalaci√≥n\" },\r\n                  { value: \"Mantenimiento Preventivo\", label: \"Mantenimiento Preventivo\" },\r\n                  { value: \"Mantenimiento Correctivo\", label: \"Mantenimiento Correctivo\" },\r\n                  { value: \"Inspecci√≥n\", label: \"Inspecci√≥n\" },\r\n                ]}\r\n                placeholder=\"Selecciona un tipo de servicio\"\r\n                disabled={isViewMode}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-border\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onClose}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"default\"\r\n            onClick={handleSave}\r\n            iconName=\"Save\"\r\n            iconSize={16}\r\n          >\r\n            Guardar Cambios\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkOrderModal;","import React, { useState, useEffect, useMemo } from \"react\";\r\nimport Icon from \"../../../components/AppIcon\";\r\nimport Button from \"../../../components/ui/Button\";\r\nimport useOperac from \"../../../hooks/useOperac\";\r\nimport useClient from \"../../../hooks/useClient\";\r\nimport WorkOrderModal from \"../components/WorkOrderModal\";\r\nimport { useNotifications } from \"../../../context/NotificationContext\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\nconst WorkOrderTable = ({\r\n  workOrders,\r\n  requisitions,\r\n  onStatusUpdate,\r\n  onAssignTechnician,\r\n  onViewDetails,\r\n  onEditOrder,\r\n  loading,\r\n  error,\r\n}) => {\r\nconst { oportunities, getOportunities, deleteWorkOrder } = useOperac();\r\n  const { clients, getClients, loading: loadingClients } = useClient();\r\n  const { showConfirm, showOperationSuccess, showHttpError } = useNotifications();\r\n\r\n  const [expandedRows, setExpandedRows] = useState(new Set());\r\n  const [sortConfig, setSortConfig] = useState({ key: \"prioridad\", direction: \"asc\" });\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n  const [localRequisitions, setLocalRequisitions] = useState([]);\r\n\r\n  // Modal\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [modalMode, setModalMode] = useState(\"view\");\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!workOrders?.length) getOportunities();\r\n    getClients();\r\n  }, []);\r\n\r\n  // Sincroniza requisiciones autom√°ticamente\r\n  useEffect(() => {\r\n    if (requisitions) setLocalRequisitions(requisitions);\r\n  }, [requisitions]);\r\n\r\n  const dataSource = useMemo(\r\n    () => (workOrders?.length ? workOrders : oportunities || []),\r\n    [workOrders, oportunities]\r\n  );\r\n  \r\n    // PARA ELIMINARLO PERO NO DESDE EL BACK SI NO VISUAL\r\nconst [deletedOrderIds, setDeletedOrderIds] = useState(() => {\r\n  const stored = localStorage.getItem(\"deletedWorkOrders\");\r\n  return stored ? new Set(JSON.parse(stored)) : new Set();\r\n});\r\n\r\nuseEffect(() => {\r\n  localStorage.setItem(\"deletedWorkOrders\", JSON.stringify([...deletedOrderIds]));\r\n}, [deletedOrderIds]);\r\n\r\nconst sortedOrders = useMemo(() => {\r\n  const filtered = dataSource.filter((order) => !deletedOrderIds.has(order.id));\r\n  if (!sortConfig.key) return filtered;\r\n  const sorted = [...filtered];\r\n  sorted.sort((a, b) => {\r\n    const aVal = a[sortConfig.key] || \"\";\r\n    const bVal = b[sortConfig.key] || \"\";\r\n    if (aVal < bVal) return sortConfig.direction === \"asc\" ? -1 : 1;\r\n    if (aVal > bVal) return sortConfig.direction === \"asc\" ? 1 : -1;\r\n    return 0;\r\n  });\r\n  return sorted;\r\n}, [dataSource, sortConfig, deletedOrderIds]);\r\n\r\n\r\n  // Paginaci√≥n\r\n  const totalItems = sortedOrders.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedData = sortedOrders.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n  \r\n\r\nconst handleDelete = (order) => {\r\n  showConfirm(`¬øSeguro que deseas eliminar la orden \"${order.ordenTrabajo}\"?`, {\r\n    onConfirm: () => {\r\n      setDeletedOrderIds((prev) => new Set([...prev, order.id]));\r\n      showOperationSuccess(\"delete\", \"Orden de trabajo\");\r\n      onEditOrder?.({ type: \"delete\", id: order.id });\r\n    },\r\n    onCancel: () => {\r\n      showInfo(\"Eliminaci√≥n cancelada\");\r\n    },\r\n  });\r\n};\r\n  const handleSort = (key) => {\r\n    setSortConfig((prev) => ({\r\n      key,\r\n      direction: prev.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\r\n    }));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handlePageChange = (newPage) => {\r\n    if (newPage >= 1 && newPage <= totalPages) setCurrentPage(newPage);\r\n  };\r\n\r\n  const toggleRowExpansion = (orderId) => {\r\n    const newExpanded = new Set(expandedRows);\r\n    if (newExpanded?.has(orderId)) {\r\n      newExpanded?.delete(orderId);\r\n    } else {\r\n      newExpanded?.add(orderId);\r\n    }\r\n    setExpandedRows(newExpanded);\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'Cr√≠tica': return 'bg-red-100 text-red-800';\r\n      case 'Alta': return 'bg-orange-100 text-orange-800';\r\n      case 'Media': return 'bg-yellow-100 text-yellow-800';\r\n      case 'Baja': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'Pendiente': return 'bg-yellow-100 text-yellow-800';\r\n      case 'En Progreso': return 'bg-blue-100 text-blue-800';\r\n      case 'Completada': return 'bg-green-100 text-green-800';\r\n      case 'En Pausa': return 'bg-orange-100 text-orange-800';\r\n      case 'Cancelada': return 'bg-red-100 text-red-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const SortableHeader = ({ label, sortKey }) => (\r\n    <th\r\n      className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider cursor-pointer hover:bg-muted transition-all\"\r\n      onClick={() => handleSort(sortKey)}\r\n    >\r\n      <div className=\"flex items-center space-x-1\">\r\n        <span>{label}</span>\r\n        <Icon\r\n          name={\r\n            sortConfig.key === sortKey\r\n              ? sortConfig.direction === \"asc\"\r\n                ? \"ChevronUp\"\r\n                : \"ChevronDown\"\r\n              : \"ChevronsUpDown\"\r\n          }\r\n          size={14}\r\n        />\r\n      </div>\r\n    </th>\r\n  );\r\n  \r\n\r\n  if (loading || loadingClients)\r\n    return (\r\n      <div className=\"flex justify-center items-center py-10\">\r\n        <Icon name=\"Loader2\" className=\"animate-spin mr-2\" size={18} />\r\n        <span className=\"text-muted-foreground\">Cargando √≥rdenes de trabajo...</span>\r\n      </div>\r\n    );\r\n\r\n  if (error)\r\n    return (\r\n      <div className=\"text-center py-10 text-error\">\r\n        <Icon name=\"AlertCircle\" className=\"inline-block mr-2\" size={18} />\r\n        Error al cargar los datos: {error.message}\r\n      </div>\r\n    );\r\n\r\n  if (!sortedOrders?.length)\r\n    return (\r\n      <div className=\"text-center py-10 text-muted-foreground\">\r\n        <Icon name=\"ClipboardX\" className=\"inline-block mr-2\" size={18} />\r\n        No hay √≥rdenes registradas.\r\n      </div>\r\n    );\r\n\r\n      // Exportar datos a PDF\r\n  const handleExportPDF = () => {\r\n    if (!sortedOrders || sortedOrders.length === 0) {\r\n      alert(\"No hay datos disponibles para exportar.\");\r\n      return;\r\n    }\r\n\r\n    const doc = new jsPDF({\r\n      orientation: \"landscape\",\r\n      unit: \"pt\",\r\n      format: \"A4\",\r\n    });\r\n\r\n    //  Encabezado del reporte\r\n    doc.setFontSize(16);\r\n    doc.text(\"Reporte de √ìrdenes de Trabajo\", 40, 40);\r\n\r\n    //  Fecha actual\r\n    const fechaActual = new Date().toLocaleDateString(\"es-MX\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n    doc.setFontSize(10);\r\n    doc.text(`Generado el ${fechaActual}`, 40, 60);\r\n\r\n    //  Columnas del PDF\r\n    const tableColumn = [\r\n      \"N¬∞ Orden\",\r\n      \"T√©cnico Asignado\",\r\n      \"Prioridad\",\r\n      \"Estado\",\r\n      \"Fecha L√≠mite\",\r\n      \"Cliente\",\r\n      \"Tipo Proyecto\",\r\n      \"Notas\",\r\n    ];\r\n\r\n    //  Filas de la tabla\r\n    const tableRows = sortedOrders.map((order) => [\r\n      order?.ordenTrabajo || \"‚Äî\",\r\n      order?.tecnicoAsignado?.nombre || \"Sin t√©cnico\",\r\n      order?.prioridad || \"‚Äî\",\r\n      order?.estado || \"‚Äî\",\r\n      order?.fechaLimite || \"‚Äî\",\r\n      order?.cliente?.empresa || order?.cliente?.nombre || \"Sin cliente\",\r\n      order?.tipo || \"‚Äî\",\r\n      order?.notasAdicionales || \"‚Äî\",\r\n    ]);\r\n\r\n    //  Generar tabla\r\n    doc.autoTable({\r\n      head: [tableColumn],\r\n      body: tableRows,\r\n      startY: 80,\r\n      styles: {\r\n        fontSize: 9,\r\n        cellPadding: 5,\r\n      },\r\n      headStyles: {\r\n        fillColor: [25, 118, 210],\r\n        textColor: 255,\r\n        fontStyle: \"bold\",\r\n      },\r\n      alternateRowStyles: { fillColor: [245, 245, 245] },\r\n    });\r\n\r\n    //  Descargar archivo\r\n    doc.save(`ordenes_trabajo_${new Date().toISOString().split(\"T\")[0]}.pdf`);\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border overflow-hidden\">\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-muted\">\r\n            <tr>\r\n              <SortableHeader label=\"Orden de Trabajo\" sortKey=\"ordenTrabajo\" />\r\n              <SortableHeader label=\"T√©cnico Asignado\" sortKey=\"tecnicoAsignado\" />\r\n              <SortableHeader label=\"Nombre del Proyecto\" sortKey=\"nombreProyecto\" />\r\n              <SortableHeader label=\"Prioridad\" sortKey=\"prioridad\" />\r\n              <SortableHeader label=\"Estado\" sortKey=\"estado\" />\r\n              <SortableHeader label=\"Fecha L√≠mite\" sortKey=\"fechaLimite\" />\r\n              <SortableHeader label=\"Cliente\" sortKey=\"cliente\" />\r\n              <SortableHeader label=\"Tipo Proyecto\" sortKey=\"tipo\" />\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Fecha L√≠mite\r\n              </th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                Acciones\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-card divide-y divide-border\">\r\n  {paginatedData.length === 0 ? (\r\n    <tr>\r\n      <td colSpan=\"9\" className=\"py-10 text-center text-muted-foreground\">\r\n        <Icon name=\"SearchX\" className=\"inline-block mr-2\" size={18} />\r\n        No se encontraron resultados con los filtros aplicados.\r\n      </td>\r\n    </tr>\r\n  ) : (\r\n    paginatedData.map((order) => (\r\n      <React.Fragment key={order.id}>\r\n        <tr className=\"hover:bg-muted/50 transition-colors\">\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={() => toggleRowExpansion(order.id)}\r\n                className=\"w-6 h-6\"\r\n              >\r\n                <Icon\r\n                  name={expandedRows.has(order.id) ? \"ChevronDown\" : \"ChevronRight\"}\r\n                  size={16}\r\n                />\r\n              </Button>\r\n              <div>{order.ordenTrabajo || \"‚Äî\"}</div>\r\n            </div>\r\n          </td>\r\n\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n  {order.tecnicoAsignado?.nombre || \"Sin t√©cnico\"}\r\n</td>\r\n\r\n<td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n  {order.proyectoNombre || order.nombreProyecto || \"Sin proyecto\"}\r\n</td>\r\n\r\n<td className=\"px-6 py-4 whitespace-nowrap\">\r\n  <span\r\n    className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPriorityColor(\r\n      order.prioridad\r\n    )}`}\r\n  >\r\n    {order.prioridad}\r\n  </span>\r\n</td>\r\n\r\n\r\n          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n            <span\r\n              className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(\r\n                order.estado\r\n              )}`}\r\n            >\r\n              {order.estado}\r\n            </span>\r\n          </td>\r\n\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">{order.fechaLimite}</td>\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n            {order.cliente?.nombre || order.cliente?.empresa || \"Sin cliente\"}\r\n          </td>\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">{order.tipo || \"‚Äî\"}</td>\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground\">\r\n            {order.notasAdicionales || \"-\"}\r\n          </td>\r\n\r\n          <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n            <div className=\"flex items-center justify-end space-x-2\">\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                iconName=\"Eye\"\r\n                iconSize={16}\r\n                onClick={() => handleView(order)}\r\n              >\r\n                Ver\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"Edit\"\r\n                iconSize={16}\r\n                onClick={() => handleEdit(order)}\r\n              >\r\n                Editar\r\n              </Button>\r\n              <Button\r\n  variant=\"ghost\"\r\n  size=\"icon\"\r\n  onClick={() => handleDelete(order)}\r\n  title=\"Eliminar orden\"\r\n>\r\n  <Icon name=\"Trash2\" size={16} className=\"text-destructive\" />\r\n</Button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n\r\n        {/*  Fila expandida con descripci√≥n, EPP y materiales */}\r\n        {expandedRows.has(order.id) && (\r\n          <tr>\r\n            <td colSpan=\"9\" className=\"px-6 py-4 bg-muted/30\">\r\n              <div className=\"space-y-3\">\r\n                <h4 className=\"text-sm font-medium text-foreground\">\r\n                  Descripci√≥n del Trabajo\r\n                </h4>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {order.descripcion || \"Sin descripci√≥n\"}\r\n                </p>\r\n\r\n                {/* === EQUIPO DE PROTECCI√ìN PERSONAL === */}\r\n                <h4 className=\"text-sm font-medium text-foreground\">\r\n                  Equipo de Protecci√≥n Personal\r\n                </h4>\r\n                <ul className=\"text-sm text-muted-foreground grid grid-cols-2 md:grid-cols-3 gap-2\">\r\n                  {[\r\n                    { key: \"cascoSeguridad\", label: \"Casco de Seguridad\" },\r\n                    { key: \"gafasProteccion\", label: \"Gafas de Protecci√≥n\" },\r\n                    { key: \"guantesTrabajo\", label: \"Guantes de Trabajo\" },\r\n                    { key: \"calzadoSeguridad\", label: \"Calzado de Seguridad\" },\r\n                    { key: \"arnesSeguridad\", label: \"Arn√©s de Seguridad\" },\r\n                    { key: \"respiradorN95\", label: \"Respirador N95\" },\r\n                    { key: \"chalecoReflectivo\", label: \"Chaleco Reflectivo\" },\r\n                  ].map(({ key, label }) => (\r\n                    <li key={key} className=\"flex items-center space-x-2\">\r\n                      <Icon\r\n                        name={order[key] ? \"CheckCircle\" : \"XCircle\"}\r\n                        size={14}\r\n                      />\r\n                      <span>{label}</span>\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n\r\n                {/* === MATERIALES REGISTRADOS === */}\r\n                <h4 className=\"text-sm font-medium text-foreground mt-4\">\r\n                  Materiales Registrados\r\n                </h4>\r\n                <div className=\"text-sm\">\r\n  {(() => {\r\n    const reqForOrder = requisitions?.filter(\r\n      (req) => req.numeroOrdenTrabajo === order.ordenTrabajo\r\n    );\r\n\r\n    if (!reqForOrder || reqForOrder.length === 0) {\r\n      return (\r\n        <p className=\"text-muted-foreground text-sm\">\r\n          No hay materiales registrados para esta orden\r\n        </p>\r\n      );\r\n    }\r\n\r\n    return reqForOrder.map((req, reqIndex) => {\r\n      // Debug\r\n      console.log('Requisici√≥n en tabla:', req);\r\n      console.log('Materiales inventario:', req.materiales);\r\n      console.log('Materiales manuales:', req.materialesManuales);\r\n      \r\n      // Normalizar materiales\r\n      const materialesInventario = req.materiales || req.items || [];\r\n      const materialesManuales = req.materialesManuales || req.manualItems || [];\r\n      \r\n      return (\r\n      <div key={reqIndex} className=\"mb-4 border border-border rounded-lg p-3 bg-card\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <p className=\"text-xs font-medium text-muted-foreground\">\r\n            Requisici√≥n: {req.numeroOrdenTrabajo || req.requestNumber}\r\n          </p>\r\n          <span className={`text-[10px] px-2 py-0.5 rounded-full ${\r\n            req.estado === 'Aprobada' ? 'bg-green-100 text-green-700' :\r\n            req.estado === 'Pendiente' ? 'bg-yellow-100 text-yellow-700' :\r\n            'bg-red-100 text-red-700'\r\n          }`}>\r\n            {req.estado}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Materiales del Inventario */}\r\n        {materialesInventario.length > 0 && (\r\n          <div className=\"mb-3\">\r\n            <p className=\"text-xs font-semibold text-blue-700 mb-1 flex items-center\">\r\n              <Icon name=\"Package\" size={14} className=\"mr-1\" />\r\n              Del Inventario ({materialesInventario.length})\r\n            </p>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 ml-4\">\r\n              {materialesInventario.map((item, idx) => (\r\n                <div key={idx} className=\"flex items-start space-x-2 text-xs bg-blue-50 p-2 rounded border border-blue-200\">\r\n                  <span className=\"text-blue-600 mt-0.5\">‚Ä¢</span>\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"font-medium text-foreground\">\r\n                      {item.nombreMaterial || item.nombre || item.name}\r\n                    </p>\r\n                    {(item.codigoArticulo || item.codigo) && (\r\n                      <p className=\"text-[10px] text-muted-foreground\">\r\n                        C√≥digo: {item.codigoArticulo || item.codigo}\r\n                      </p>\r\n                    )}\r\n                    <p className=\"text-muted-foreground\">\r\n                      Cantidad: {item.cantidad || item.quantity} {item.unidad || item.unit}\r\n                    </p>\r\n                    {item.urgencia && item.urgencia !== 'Normal' && (\r\n                      <span className={`text-[10px] px-1.5 py-0.5 rounded ${\r\n                        item.urgencia === 'Urgente' || item.urgencia === 'Cr√≠tica'\r\n                          ? 'bg-red-100 text-red-700'\r\n                          : 'bg-orange-100 text-orange-700'\r\n                      }`}>\r\n                        {item.urgencia}\r\n                      </span>\r\n                    )}\r\n                    {item.descripcionEspecificaciones && (\r\n                      <p className=\"text-[10px] text-muted-foreground mt-1 italic\">\r\n                        {item.descripcionEspecificaciones}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Materiales Manuales */}\r\n        {materialesManuales.length > 0 && (\r\n          <div>\r\n            <p className=\"text-xs font-semibold text-green-700 mb-1 flex items-center\">\r\n              <Icon name=\"Edit3\" size={14} className=\"mr-1\" />\r\n              Manuales ({materialesManuales.length})\r\n            </p>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 ml-4\">\r\n              {materialesManuales.map((item, idx) => (\r\n                <div key={idx} className=\"flex items-start space-x-2 text-xs bg-green-50 p-2 rounded border border-green-200\">\r\n                  <span className=\"text-green-600 mt-0.5\">‚Ä¢</span>\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"font-medium text-foreground\">\r\n                      {item.nombreMaterial || item.nombre || item.name}\r\n                    </p>\r\n                    <p className=\"text-muted-foreground\">\r\n                      Cantidad: {item.cantidad || item.quantity} {item.unidad || item.unit}\r\n                    </p>\r\n                    {item.urgencia && item.urgencia !== 'Normal' && (\r\n                      <span className={`text-[10px] px-1.5 py-0.5 rounded ${\r\n                        item.urgencia === 'Urgente' || item.urgencia === 'Cr√≠tica'\r\n                          ? 'bg-red-100 text-red-700'\r\n                          : 'bg-orange-100 text-orange-700'\r\n                      }`}>\r\n                        {item.urgencia}\r\n                      </span>\r\n                    )}\r\n                    {item.descripcionEspecificaciones && (\r\n                      <p className=\"text-[10px] text-muted-foreground mt-1 italic\">\r\n                        {item.descripcionEspecificaciones}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Si no hay materiales en esta requisici√≥n */}\r\n        {materialesInventario.length === 0 && materialesManuales.length === 0 && (\r\n          <p className=\"text-xs text-muted-foreground ml-4\">\r\n            Esta requisici√≥n no tiene materiales registrados\r\n          </p>\r\n        )}\r\n      </div>\r\n    );\r\n    });\r\n  })()}\r\n</div>\r\n\r\n\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  <strong>Requiere estudios m√©dicos actualizados:</strong>{\" \"}\r\n                  {order.requiereEstudiosMedicosActualizados ? \"S√≠\" : \"No\"}\r\n                </p>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        )}\r\n      </React.Fragment>\r\n    ))\r\n  )}\r\n</tbody>\r\n\r\n        </table>\r\n      </div>\r\n\r\n      {/* Paginaci√≥n */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n          <select\r\n            value={pageSize}\r\n            onChange={handleChangePageSize}\r\n            className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n          >\r\n            {PAGE_SIZE_OPTIONS.map((opt) => (\r\n              <option key={opt} value={opt}>{opt}</option>\r\n            ))}\r\n          </select>\r\n          <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n          <span className=\"text-xs text-muted-foreground ml-3\">\r\n            Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n          <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n          <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkOrderTable;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst FilterToolbar = ({ onFiltersChange, totalCount, filteredCount }) => {\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    status: '',\r\n    technician: '',\r\n    priority: '',\r\n    project: '',\r\n    dateRange: ''\r\n  });\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'Pendiente', label: 'Pendiente' },\r\n    { value: 'En Progreso', label: 'En Progreso' },\r\n    { value: 'Completada', label: 'Completada' },\r\n    { value: 'En Pausa', label: 'En Pausa' },\r\n    { value: 'Cancelada', label: 'Cancelada' }\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: '', label: 'Todas las Prioridades' },\r\n    { value: 'Cr√≠tica', label: 'Cr√≠tica' },\r\n    { value: 'Alta', label: 'Alta' },\r\n    { value: 'Media', label: 'Media' },\r\n    { value: 'Baja', label: 'Baja' }\r\n  ];\r\n\r\n  const technicianOptions = [\r\n    { value: '', label: 'Todos los T√©cnicos' },\r\n    { value: 'Carlos Mendoza', label: 'Carlos Mendoza' },\r\n    { value: 'Ana Garc√≠a', label: 'Ana Garc√≠a' },\r\n    { value: 'Roberto Silva', label: 'Roberto Silva' },\r\n    { value: 'Mar√≠a L√≥pez', label: 'Mar√≠a L√≥pez' },\r\n    { value: 'Diego Ram√≠rez', label: 'Diego Ram√≠rez' }\r\n  ];\r\n\r\n  const projectOptions = [\r\n  { value: \"\", label: \"Todos los Proyectos\" },\r\n  { value: \"Instalaci√≥n\", label: \"Instalaci√≥n\" },\r\n  { value: \"Mantenimiento Preventivo\", label: \"Mantenimiento Preventivo\" },\r\n  { value: \"Mantenimiento Correctivo\", label: \"Mantenimiento Correctivo\" },\r\n  { value: \"Inspecci√≥n\", label: \"Inspecci√≥n\" },\r\n];\r\n\r\n  const dateRangeOptions = [\r\n    { value: '', label: 'Todas las Fechas' },\r\n    { value: 'today', label: 'Hoy' },\r\n    { value: 'week', label: 'Esta Semana' },\r\n    { value: 'month', label: 'Este Mes' },\r\n    { value: 'overdue', label: 'Vencidas' }\r\n  ];\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    const newFilters = { ...filters, [key]: value };\r\n    setFilters(newFilters);\r\n    onFiltersChange(newFilters);\r\n  };\r\n\r\n  const clearAllFilters = () => {\r\n    const clearedFilters = {\r\n      search: '',\r\n      status: '',\r\n      technician: '',\r\n      priority: '',\r\n      project: '',\r\n      dateRange: ''\r\n    };\r\n    setFilters(clearedFilters);\r\n    onFiltersChange(clearedFilters);\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters)?.some((value) => value !== \"\");\r\n\r\n  // Generar mensaje din√°mico de \"sin resultados\"\r\n  const getNoResultsMessage = () => {\r\n    if (filteredCount > 0) return null;\r\n\r\n    if (filters.search)\r\n      return `No se encontraron resultados para \"${filters.search}\"`;\r\n    if (filters.status)\r\n      return `No se encontraron √≥rdenes con estado \"${filters.status}\"`;\r\n    if (filters.priority)\r\n      return `No se encontraron √≥rdenes con prioridad \"${filters.priority}\"`;\r\n    if (filters.technician)\r\n      return `No se encontraron √≥rdenes asignadas a \"${filters.technician}\"`;\r\n    if (filters.project)\r\n      return `No se encontraron √≥rdenes del proyecto \"${filters.project}\"`;\r\n    if (filters.dateRange)\r\n      return `No se encontraron √≥rdenes en el rango de fechas seleccionado`;\r\n\r\n    return \"No hay √≥rdenes registradas actualmente.\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-4 mb-6\">\r\n      {/* Encabezado */}\r\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">√ìrdenes de Trabajo</h3>\r\n          <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\r\n  {totalCount === 0 ? (\r\n    <span>No hay √≥rdenes registradas</span>\r\n  ) : filteredCount === 0 ? (\r\n    <span>No se encontraron resultados</span>\r\n  ) : filteredCount === totalCount ? (\r\n    <span>Mostrando todas las {totalCount} √≥rdenes</span>\r\n  ) : (\r\n    <span>\r\n      Mostrando {filteredCount} de {totalCount} √≥rdenes\r\n    </span>\r\n  )}\r\n  {hasActiveFilters && (\r\n    <span className=\"px-2 py-1 bg-primary/10 text-primary rounded-full text-xs\">\r\n      Filtros activos\r\n    </span>\r\n  )}\r\n</div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtros */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4\">\r\n        {/* Buscar */}\r\n        <div className=\"lg:col-span-2\">\r\n          <div className=\"relative\">\r\n            <Input\r\n              type=\"search\"\r\n              placeholder=\"Buscar por n√∫mero de orden, proyecto...\"\r\n              value={filters?.search}\r\n              onChange={(e) => handleFilterChange('search', e?.target?.value)}\r\n              className=\"pl-10\"\r\n            />\r\n            <Icon \r\n              name=\"Search\" \r\n              size={16} \r\n              className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Estado */}\r\n        <Select\r\n          placeholder=\"Estado\"\r\n          options={statusOptions}\r\n          value={filters?.status}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n        />\r\n\r\n        {/* Prioridad */}\r\n        <Select\r\n          placeholder=\"Prioridad\"\r\n          options={priorityOptions}\r\n          value={filters?.priority}\r\n          onChange={(value) => handleFilterChange('priority', value)}\r\n        />\r\n\r\n        {/* T√©cnico */}\r\n        <Select\r\n          placeholder=\"T√©cnico\"\r\n          options={technicianOptions}\r\n          value={filters?.technician}\r\n          onChange={(value) => handleFilterChange('technician', value)}\r\n          searchable\r\n        />\r\n\r\n        {/* Proyecto */}\r\n        <Select\r\n          placeholder=\"Proyecto\"\r\n          options={projectOptions}\r\n          value={filters?.project}\r\n          onChange={(value) => handleFilterChange('project', value)}\r\n          searchable\r\n        />\r\n      </div>\r\n\r\n      {/* Rango de fechas y bot√≥n limpiar */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mt-4 pt-4 border-t border-border\">\r\n        <Select\r\n          placeholder=\"Rango de fechas\"\r\n          options={dateRangeOptions}\r\n          value={filters?.dateRange}\r\n          onChange={(value) => handleFilterChange('dateRange', value)}\r\n          className=\"sm:w-48\"\r\n        />\r\n\r\n        {hasActiveFilters && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={clearAllFilters}\r\n            iconName=\"X\"\r\n            iconSize={16}\r\n          >\r\n            Limpiar Filtros\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Mensaje din√°mico cuando no hay resultados */}\r\n      {filteredCount === 0 && (\r\n  <div className=\"mt-4 flex items-center text-sm italic\">\r\n    <Icon name=\"SearchX\" size={16} className=\"mr-2 text-black\" />\r\n    <span className=\"font-bold text-black\">{getNoResultsMessage()}</span>\r\n  </div>\r\n)}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterToolbar;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport useRequisi from '../../../hooks/useRequisi';\r\nimport useInventario from '../../../hooks/useInventory';\r\nimport RequisitionModal from \"../components/RequisitionModal\";\r\nimport { useNotifications } from '../../../context/NotificationContext';\r\n\r\nconst InventoryPanel = ({ onCreatePurchaseOrder, onRequestMaterial, onCreateRequisition }) => {\r\n  const [activeTab, setActiveTab] = useState('inventory');\r\n  const { showConfirm, showHttpError, showInfo, showOperationSuccess } = useNotifications();\r\n  const { requisitions, loading: loadingRequis, getRequisitions, updateRequisition, deleteRequisition } = useRequisi();\r\n  const { inventario, getInventario, loading: loadingInventario } = useInventario();\r\n  const [localRequisitions, setLocalRequisitions] = useState([]);\r\n\r\n  const displayedRequisitions = externalRequisitions?.length > 0 ? externalRequisitions : localRequisitions;\r\n\r\n  useEffect(() => { getInventario(); }, []);\r\n  useEffect(() => {\r\n    const fetchRequisitions = async () => {\r\n      const data = await getRequisitions();\r\n      setLocalRequisitions(data);\r\n    };\r\n    fetchRequisitions();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (externalRequisitions?.length > 0) setLocalRequisitions(externalRequisitions);\r\n  }, [externalRequisitions]);\r\n\r\n  const getStockStatus = (currentStock, reorderPoint) => {\r\n    if (currentStock <= 0) return 'Cr√≠tico';\r\n    if (currentStock <= reorderPoint) return 'Bajo Stock';\r\n    return 'En Stock';\r\n  };\r\n\r\n  const getStockStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'Cr√≠tico': return 'bg-red-100 text-red-800';\r\n      case 'Bajo Stock': return 'bg-orange-100 text-orange-800';\r\n      case 'En Stock': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getRequestStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'Pendiente': return 'bg-yellow-100 text-yellow-800';\r\n      case 'Aprobada': return 'bg-green-100 text-green-800';\r\n      case 'Rechazada': return 'bg-red-100 text-red-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const handleApprove = async (request) => {\r\n    try {\r\n      const updated = await updateRequisition(request.id, { estado: 'Aprobada' });\r\n      if (!updated) return;\r\n      const updatedList = localRequisitions.map((r) => r.id === request.id ? { ...r, estado: 'Aprobada' } : r);\r\n      setLocalRequisitions(updatedList);\r\n      onRequisitionUpdated?.(updatedList);\r\n      showOperationSuccess();\r\n    } catch (error) {\r\n      showHttpError(error, \"Error al aprobar la requisici√≥n\");\r\n    }\r\n  };\r\n\r\n  const handleReject = async (request) => {\r\n    try {\r\n      const updated = await updateRequisition(request.id, { estado: 'Rechazada' });\r\n      if (!updated) return;\r\n      const updatedList = localRequisitions.map((r) => r.id === request.id ? { ...r, estado: 'Rechazada' } : r);\r\n      setLocalRequisitions(updatedList);\r\n      onRequisitionUpdated?.(updatedList);\r\n      showOperationSuccess();\r\n    } catch (error) {\r\n      showHttpError(error, \"Error al rechazar la requisici√≥n\");\r\n    }\r\n  };\r\n\r\n  const handleDelete = (request) => {\r\n    showConfirm(`¬øSeguro que deseas eliminar la requisici√≥n \"${request.numeroOrdenTrabajo}\"?`, {\r\n      onConfirm: async () => {\r\n        try {\r\n          const success = await deleteRequisition(request.id);\r\n          if (!success) return;\r\n          const updatedList = localRequisitions.filter((r) => r.id !== request.id);\r\n          setLocalRequisitions(updatedList);\r\n          onRequisitionUpdated?.(updatedList);\r\n        } catch (error) {\r\n          showHttpError(error, \"Error al eliminar la requisici√≥n\");\r\n        }\r\n      },\r\n      onCancel: () => showInfo(\"Eliminaci√≥n cancelada\"),\r\n    });\r\n  };\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedRequisition, setSelectedRequisition] = useState(null);\r\n\r\n  const handleEditRequisition = (req) => {\r\n  const mappedReq = {\r\n    id: req.id,\r\n    orderNumber: req.numeroOrdenTrabajo || \"\",\r\n    projectName: req.nombreProyecto || \"\",\r\n    requestedBy: req.solicitadoPor || \"\",\r\n    requestDate: req.fechaSolicitud\r\n      ? req.fechaSolicitud.split(\"/\").reverse().join(\"-\")\r\n      : new Date().toISOString().split(\"T\")[0],\r\n    status: req.estado || \"Pendiente\",\r\n    priority: req.prioridad || \"Media\",\r\n    description: req.descripcionSolicitud || \"\",\r\n\r\n    //  materiales de inventario\r\n    items: req.materiales?.map((m) => ({\r\n      id: Date.now() + Math.random(),\r\n      idArticulo: m.id || m.idArticulo || \"\", // mantiene referencia al inventario\r\n      codigoArticulo: m.codigoArticulo || \"\",\r\n      name: m.nombreMaterial || m.nombre || \"\", // admite ambos nombres\r\n      quantity: m.cantidad,\r\n      unit: m.unidad?.toLowerCase() || \"unidades\",\r\n      urgency: m.urgencia || \"Normal\",\r\n      description: m.descripcionEspecificaciones || \"\",\r\n      type: \"inventario\",\r\n    })) || [],\r\n\r\n    //  materiales manuales\r\n    manualItems: req.materialesManuales?.map((m) => ({\r\n      id: Date.now() + Math.random(),\r\n      name: m.nombreMaterial || m.nombre || \"\",\r\n      quantity: m.cantidad || 1,\r\n      unit: m.unidad || \"pieza\",\r\n      urgency: m.urgencia || \"Normal\",\r\n      description: m.descripcionEspecificaciones || \"\",\r\n      type: \"manual\",\r\n    })) || [],\r\n\r\n    justification: req.justificacionSolicitud || \"\",\r\n    notes: req.notasAdicionales || \"\",\r\n  };\r\n\r\n  setSelectedRequisition(mappedReq);\r\n  setIsModalOpen(true);\r\n};\r\n\r\n\r\n  const handleSaveRequisition = (updatedReq) => {\r\n    const updatedList = localRequisitions.map((r) => (r.id === updatedReq.id ? updatedReq : r));\r\n    setLocalRequisitions(updatedList);\r\n    onRequisitionUpdated?.(updatedList);\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n      <div className=\"border-b border-border\">\r\n        <div className=\"flex\">\r\n          <button\r\n            onClick={() => setActiveTab('inventory')}\r\n            className={`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${\r\n              activeTab === 'inventory' ? 'border-primary text-primary bg-primary/5' : 'border-transparent text-muted-foreground hover:text-foreground'\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"Package\" size={16} />\r\n              <span>Inventario</span>\r\n            </div>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setActiveTab('requests')}\r\n            className={`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${\r\n              activeTab === 'requests' ? 'border-primary text-primary bg-primary/5' : 'border-transparent text-muted-foreground hover:text-foreground'\r\n            }`}\r\n          >\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"ClipboardList\" size={16} />\r\n              <span>Requisiciones</span>\r\n            </div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contenido */}\r\n      <div className=\"p-4 h-[calc(100%-48px)]\">\r\n        {/* INVENTARIO */}\r\n        {activeTab === 'inventory' && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-foreground\">Estado del Inventario</h3>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"RefreshCw\" iconSize={16} onClick={getInventario}>\r\n                Actualizar\r\n              </Button>\r\n            </div>\r\n\r\n            {loadingInventario ? (\r\n              <p className=\"text-sm text-muted-foreground\">Cargando inventario...</p>\r\n            ) : inventario.length === 0 ? (\r\n              <p className=\"text-sm text-muted-foreground\">No hay art√≠culos en el inventario.</p>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {inventario.map((item) => {\r\n                  const nombre = item.descripcion || item.description || item.codigoArticulo || 'Art√≠culo sin nombre';\r\n                  const stock = item.stockActual ?? 0;\r\n                  const puntoReorden = item.puntoReorden ?? 0;\r\n                  const unidad = item.unidad ?? '';\r\n                  const ubicacion = item.ubicacion ?? 'Sin ubicaci√≥n';\r\n                  const estado = getStockStatus(stock, puntoReorden);\r\n\r\n                  return (\r\n                    <div key={item.id} className=\"border border-border rounded-lg p-4\">\r\n                      <div className=\"flex items-start justify-between mb-3\">\r\n                        <div className=\"flex-1\">\r\n                          <h4 className=\"text-sm font-medium text-foreground\">{nombre}</h4>\r\n                          <p className=\"text-xs text-muted-foreground\">SKU: {item.codigoArticulo || 'N/A'}</p>\r\n                        </div>\r\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStockStatusColor(estado)}`}>{estado}</span>\r\n                      </div>\r\n                      <div className=\"grid grid-cols-2 gap-4 mb-3\">\r\n                        <div>\r\n                          <p className=\"text-xs text-muted-foreground\">Stock Actual</p>\r\n                          <p className=\"text-sm font-medium text-foreground\">{stock} {unidad}</p>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-xs text-muted-foreground\">Punto de Reorden</p>\r\n                          <p className=\"text-sm font-medium text-foreground\">{puntoReorden} {unidad}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          <Icon name=\"MapPin\" size={12} className=\"inline mr-1\" />\r\n                          {ubicacion}\r\n                        </div>\r\n                        {(estado === 'Cr√≠tico' || estado === 'Bajo Stock') && (\r\n                          <Button variant=\"outline\" size=\"sm\" onClick={() => onCreatePurchaseOrder(item)} iconName=\"ShoppingCart\" iconSize={14}>Ordenar</Button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* REQUISICIONES */}\r\n        {activeTab === 'requests' && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-foreground\">Requisiciones de Material</h3>\r\n              <Button variant=\"default\" size=\"sm\" iconName=\"Plus\" iconSize={16} onClick={onCreateRequisition}>\r\n                Nueva Requisici√≥n\r\n              </Button>\r\n            </div>\r\n\r\n            {loadingRequis ? (\r\n              <p>Cargando requisiciones...</p>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {displayedRequisitions.length === 0 ? (\r\n                  <p className=\"text-sm text-muted-foreground\">No hay requisiciones disponibles.</p>\r\n                ) : (\r\n                  displayedRequisitions.map((request) => {\r\n                    // Debug - ver estructura de datos\r\n                    console.log('Requisici√≥n completa:', request);\r\n                    console.log('Materiales inventario:', request.materiales);\r\n                    console.log('Materiales manuales:', request.materialesManuales);\r\n                    \r\n                    // Normalizar materiales de inventario\r\n                    const materialesInventario = request.materiales || request.items || [];\r\n                    \r\n                    // Normalizar materiales manuales\r\n                    const materialesManuales = request.materialesManuales || request.manualItems || [];\r\n                    \r\n                    const allMaterials = [\r\n                      ...materialesInventario,\r\n                      ...materialesManuales\r\n                    ];\r\n\r\n                    return (\r\n                      <div key={request.id} className=\"border border-border rounded-lg p-4 shadow-sm transition-all duration-300 hover:shadow-md\">\r\n                        <div className=\"flex items-start justify-between mb-3\">\r\n                          <div className=\"flex-1\">\r\n                            <h4 className=\"text-sm font-medium text-foreground\">{request.numeroOrdenTrabajo}</h4>\r\n                            <p className=\"text-xs text-muted-foreground\">{request.nombreProyecto}</p>\r\n                          </div>\r\n                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getRequestStatusColor(request.estado)}`}>{request.estado}</span>\r\n                        </div>\r\n\r\n                        <div className=\"mb-3\">\r\n                          <p className=\"text-xs text-muted-foreground mb-2\">Materiales Solicitados:</p>\r\n                          {allMaterials.length > 0 ? (\r\n                            <div className=\"space-y-2\">\r\n                              {/* Materiales del Inventario */}\r\n                              {materialesInventario.length > 0 && (\r\n                                <div>\r\n                                  <p className=\"text-xs font-medium text-blue-700 mb-1 flex items-center\">\r\n                                    <Icon name=\"Package\" size={12} className=\"mr-1\" />\r\n                                    Del Inventario ({materialesInventario.length})\r\n                                  </p>\r\n                                  <ul className=\"space-y-1 ml-4\">\r\n                                    {materialesInventario.map((item, index) => (\r\n                                      <li key={index} className=\"text-xs text-foreground flex items-start space-x-2\">\r\n                                        <span className=\"text-blue-600 mt-0.5\">‚Ä¢</span>\r\n                                        <span>\r\n                                          <span className=\"font-medium\">{item.nombreMaterial || item.nombre || item.name}</span>\r\n                                          {item.codigoArticulo && (\r\n                                            <span className=\"text-muted-foreground text-[10px]\"> ({item.codigoArticulo})</span>\r\n                                          )}\r\n                                          <span className=\"text-muted-foreground\"> - {item.cantidad || item.quantity} {item.unidad || item.unit}</span>\r\n                                          {item.urgencia && item.urgencia !== 'Normal' && (\r\n                                            <span className={`ml-1 text-[10px] px-1 py-0.5 rounded ${\r\n                                              item.urgencia === 'Urgente' || item.urgencia === 'Cr√≠tica' \r\n                                                ? 'bg-red-100 text-red-700' \r\n                                                : 'bg-orange-100 text-orange-700'\r\n                                            }`}>\r\n                                              {item.urgencia}\r\n                                            </span>\r\n                                          )}\r\n                                        </span>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              )}\r\n                              \r\n                              {/* Materiales Manuales */}\r\n                              {materialesManuales.length > 0 && (\r\n                                <div>\r\n                                  <p className=\"text-xs font-medium text-green-700 mb-1 flex items-center\">\r\n                                    <Icon name=\"Edit3\" size={12} className=\"mr-1\" />\r\n                                    Manuales ({materialesManuales.length})\r\n                                  </p>\r\n                                  <ul className=\"space-y-1 ml-4\">\r\n                                    {materialesManuales.map((item, index) => (\r\n                                      <li key={index} className=\"text-xs text-foreground flex items-start space-x-2\">\r\n                                        <span className=\"text-green-600 mt-0.5\">‚Ä¢</span>\r\n                                        <span>\r\n                                          <span className=\"font-medium\">{item.nombreMaterial || item.nombre || item.name}</span>\r\n                                          <span className=\"text-muted-foreground\"> - {item.cantidad || item.quantity} {item.unidad || item.unit}</span>\r\n                                          {item.urgencia && item.urgencia !== 'Normal' && (\r\n                                            <span className={`ml-1 text-[10px] px-1 py-0.5 rounded ${\r\n                                              item.urgencia === 'Urgente' || item.urgencia === 'Cr√≠tica' \r\n                                                ? 'bg-red-100 text-red-700' \r\n                                                : 'bg-orange-100 text-orange-700'\r\n                                            }`}>\r\n                                              {item.urgencia}\r\n                                            </span>\r\n                                          )}\r\n                                        </span>\r\n                                      </li>\r\n                                    ))}\r\n                                  </ul>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          ) : (\r\n                            <p className=\"text-xs text-muted-foreground\">No se han agregado materiales a√∫n.</p>\r\n                          )}\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"text-xs text-muted-foreground\">\r\n                            <Icon name=\"User\" size={12} className=\"inline mr-1\" />\r\n                            {request.solicitadoPor} ‚Ä¢ {request.fechaSolicitud}\r\n                          </div>\r\n\r\n                          <div className=\"flex flex-col items-center gap-2 mt-2\">\r\n                            <div className=\"flex items-center justify-center gap-2\">\r\n                              <Button variant=\"outline\" size=\"sm\" iconName=\"Edit\" iconSize={16} onClick={() => handleEditRequisition(request)} className=\"p-2 border-gray-300 hover:bg-gray-100\" title=\"Editar\" />\r\n                              <Button variant=\"outline\" size=\"sm\" iconName=\"Trash2\" iconSize={16} onClick={() => handleDelete(request)} className=\"p-2 text-red-600 border-gray-300 hover:bg-red-50\" title=\"Eliminar\" />\r\n                            </div>\r\n\r\n                            {request.estado === \"Pendiente\" && (\r\n                              <div className=\"flex justify-center gap-2 mt-1\">\r\n                                <Button variant=\"outline\" size=\"sm\" iconName=\"X\" iconSize={14} onClick={() => handleReject(request)} className=\"min-w-[100px] text-gray-700 border-gray-400 hover:bg-gray-100\">Rechazar</Button>\r\n                                <Button variant=\"default\" size=\"sm\" iconName=\"Check\" iconSize={14} onClick={() => handleApprove(request)} className=\"min-w-[100px]\">Aprobar</Button>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      <RequisitionModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        requisition={selectedRequisition}\r\n        onSave={handleSaveRequisition}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InventoryPanel;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst StatsCards = ({ stats }) => {\r\n  const cards = [\r\n    {\r\n      title: '√ìrdenes Activas',\r\n      value: stats?.activeOrders,\r\n      change: '+12%',\r\n      changeType: 'positive',\r\n      icon: 'ClipboardList',\r\n      color: 'bg-blue-500'\r\n    },\r\n    {\r\n      title: 'Pendientes',\r\n      value: stats?.pendingOrders,\r\n      change: '+5%',\r\n      changeType: 'positive',\r\n      icon: 'Clock',\r\n      color: 'bg-yellow-500'\r\n    },\r\n    {\r\n      title: 'En Progreso',\r\n      value: stats?.inProgressOrders,\r\n      change: '+8%',\r\n      changeType: 'positive',\r\n      icon: 'Play',\r\n      color: 'bg-green-500'\r\n    },\r\n    {\r\n      title: 'Completadas Hoy',\r\n      value: stats?.completedToday,\r\n      change: '+15%',\r\n      changeType: 'positive',\r\n      icon: 'CheckCircle',\r\n      color: 'bg-emerald-500'\r\n    },\r\n    {\r\n      title: 'T√©cnicos Activos',\r\n      value: stats?.activeTechnicians,\r\n      change: '0%',\r\n      changeType: 'neutral',\r\n      icon: 'Users',\r\n      color: 'bg-purple-500'\r\n    },\r\n    {\r\n      title: 'Materiales Cr√≠ticos',\r\n      value: stats?.criticalMaterials,\r\n      change: '-3%',\r\n      changeType: 'negative',\r\n      icon: 'AlertTriangle',\r\n      color: 'bg-red-500'\r\n    }\r\n  ];\r\n\r\n  const getChangeColor = (type) => {\r\n    switch (type) {\r\n      case 'positive': return 'text-green-600';\r\n      case 'negative': return 'text-red-600';\r\n      default: return 'text-muted-foreground';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\">\r\n      {cards?.map((card, index) => (\r\n        <div key={index} className=\"bg-card border border-border rounded-lg p-4 hover:shadow-md transition-shadow\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div className={`w-10 h-10 ${card?.color} rounded-lg flex items-center justify-center`}>\r\n              <Icon name={card?.icon} size={20} color=\"white\" />\r\n            </div>\r\n            <span className={`text-sm font-medium ${getChangeColor(card?.changeType)}`}>\r\n              {card?.change}\r\n            </span>\r\n          </div>\r\n          \r\n          <div>\r\n            <p className=\"text-2xl font-bold text-foreground mb-1\">{card?.value}</p>\r\n            <p className=\"text-sm text-muted-foreground\">{card?.title}</p>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StatsCards;","import React, { useState, useEffect } from 'react';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport Button from '../../components/ui/Button';\r\nimport WorkOrderTable from './components/WorkOrderTable';\r\nimport FilterToolbar from './components/FilterToolbar';\r\nimport InventoryPanel from './components/InventoryPanel';\r\nimport WorkOrderModal from './components/WorkOrderModal';\r\nimport RequisitionModal from './components/RequisitionModal';\r\nimport StatsCards from './components/StatsCards';\r\nimport useOperac from '../../hooks/useOperac';\r\nimport useRequisi from '../../hooks/useRequisi';\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\n\r\nconst WorkOrderProcessing = () => {\r\n  const { oportunities, loading, error, getOportunities } = useOperac();\r\n  const { requisitions, loading: loadingRequisitions, getRequisitions, updateRequisition, createRequisition, deleteRequisition } = useRequisi();\r\n\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [workOrders, setWorkOrders] = useState([]);\r\n  const [filteredOrders, setFilteredOrders] = useState([]);\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [stats, setStats] = useState({});\r\n  const [isRequisitionModalOpen, setIsRequisitionModalOpen] = useState(false);\r\n  const [selectedRequisition, setSelectedRequisition] = useState(null);\r\n\r\n  const handleSidebarToggle = () => {\r\n    setSidebarCollapsed(!sidebarCollapsed);\r\n  };\r\n\r\n  const handleMobileMenuToggle = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n  };\r\n\r\n  // Mock data for work orders\r\n  const mockWorkOrders = [\r\n    {\r\n      id: 1,\r\n      orderNumber: 'OT-2024-015',\r\n      projectName: 'Torre Corporativa ABC',\r\n      clientName: 'Corporaci√≥n ABC S.A.',\r\n      type: 'Instalaci√≥n HVAC',\r\n      priority: 'Alta',\r\n      status: 'En Progreso',\r\n      assignedTechnician: 'Carlos Mendoza',\r\n      technicianRole: 'T√©cnico Senior',\r\n      dueDate: '05/10/2024',\r\n      progress: 65,\r\n      description: `Instalaci√≥n completa del sistema HVAC en torre corporativa de 15 pisos.\\nIncluye unidades manejadoras de aire, ductos, y sistema de control automatizado.\\nSe requiere coordinaci√≥n con otros contratistas para acceso a √°reas t√©cnicas.`,\r\n      requiredMaterials: [\r\n        { name: 'Compresor Rotativo 5HP', quantity: '2 unidades' },\r\n        { name: 'Filtro de Aire HEPA', quantity: '8 unidades' },\r\n        { name: 'Ductos Galvanizados', quantity: '150 metros' }\r\n      ],\r\n      attachments: [\r\n        { name: 'Planos_HVAC_ABC.pdf', type: 'pdf' },\r\n        { name: 'Especificaciones_T√©cnicas.docx', type: 'doc' }\r\n      ],\r\n      requiredPPE: ['Casco de Seguridad', 'Arn√©s de Seguridad', 'Calzado de Seguridad'],\r\n      medicalRequirements: true,\r\n      notes: 'Trabajo en altura requiere certificaci√≥n vigente'\r\n    },\r\n    {\r\n      id: 2,\r\n      orderNumber: 'OT-2024-016',\r\n      projectName: 'Centro Comercial Plaza Norte',\r\n      clientName: 'Inmobiliaria Plaza Norte',\r\n      type: 'Mantenimiento Preventivo',\r\n      priority: 'Media',\r\n      status: 'Pendiente',\r\n      assignedTechnician: 'Ana Garc√≠a',\r\n      technicianRole: 'Especialista HVAC',\r\n      dueDate: '08/10/2024',\r\n      progress: 0,\r\n      description: `Mantenimiento preventivo trimestral del sistema HVAC del centro comercial.\\nIncluye limpieza de filtros, revisi√≥n de compresores y calibraci√≥n de termostatos.\\nProgramado durante horarios de menor afluencia de p√∫blico.`,\r\n      requiredMaterials: [\r\n        { name: 'Filtros de Aire', quantity: '20 unidades' },\r\n        { name: 'Refrigerante R-410A', quantity: '2 cilindros' },\r\n        { name: 'Aceite para Compresor', quantity: '5 litros' }\r\n      ],\r\n      attachments: [\r\n        { name: 'Checklist_Mantenimiento.pdf', type: 'pdf' }\r\n      ],\r\n      requiredPPE: ['Casco de Seguridad', 'Gafas de Protecci√≥n', 'Guantes de Trabajo'],\r\n      medicalRequirements: false,\r\n      notes: 'Coordinar con administraci√≥n del centro comercial'\r\n    },\r\n    {\r\n      id: 3,\r\n      orderNumber: 'OT-2024-017',\r\n      projectName: 'Hospital General San Jos√©',\r\n      clientName: 'Hospital General San Jos√©',\r\n      type: 'Reparaci√≥n de Emergencia',\r\n      priority: 'Cr√≠tica',\r\n      status: 'En Progreso',\r\n      assignedTechnician: 'Roberto Silva',\r\n      technicianRole: 'T√©cnico Junior',\r\n      dueDate: '02/10/2024',\r\n      progress: 85,\r\n      description: `Reparaci√≥n urgente del sistema de climatizaci√≥n en √°rea de cuidados intensivos.\\nFalla en compresor principal requiere reemplazo inmediato.\\nTrabajo 24/7 hasta completar la reparaci√≥n cr√≠tica.`,\r\n      requiredMaterials: [\r\n        { name: 'Compresor Scroll 10HP', quantity: '1 unidad' },\r\n        { name: 'Kit de Conexiones', quantity: '1 set' },\r\n        { name: 'Refrigerante R-134A', quantity: '3 cilindros' }\r\n      ],\r\n      attachments: [\r\n        { name: 'Reporte_Falla_UCI.pdf', type: 'pdf' },\r\n        { name: 'Foto_Compresor_Da√±ado.jpg', type: 'image' }\r\n      ],\r\n      requiredPPE: ['Casco de Seguridad', 'Respirador N95', 'Guantes de Trabajo', 'Calzado de Seguridad'],\r\n      medicalRequirements: true,\r\n      notes: 'Ambiente hospitalario - seguir protocolos de bioseguridad'\r\n    },\r\n    {\r\n      id: 4,\r\n      orderNumber: 'OT-2024-018',\r\n      projectName: 'Edificio Residencial Vista Mar',\r\n      clientName: 'Constructora Vista Mar',\r\n      type: 'Instalaci√≥n Nueva',\r\n      priority: 'Media',\r\n      status: 'Completada',\r\n      assignedTechnician: 'Mar√≠a L√≥pez',\r\n      technicianRole: 'Supervisora',\r\n      dueDate: '28/09/2024',\r\n      progress: 100,\r\n      description: `Instalaci√≥n de sistema HVAC en edificio residencial de 8 pisos.\\nSistema VRF con unidades individuales por apartamento.\\nIncluye programaci√≥n de controles remotos y capacitaci√≥n a usuarios.`,\r\n      requiredMaterials: [\r\n        { name: 'Unidades VRF', quantity: '24 unidades' },\r\n        { name: 'Controles Remotos', quantity: '24 unidades' },\r\n        { name: 'Tuber√≠a de Cobre', quantity: '200 metros' }\r\n      ],\r\n      attachments: [\r\n        { name: 'Manual_Usuario_VRF.pdf', type: 'pdf' },\r\n        { name: 'Certificado_Instalaci√≥n.pdf', type: 'pdf' }\r\n      ],\r\n      requiredPPE: ['Casco de Seguridad', 'Calzado de Seguridad', 'Guantes de Trabajo'],\r\n      medicalRequirements: false,\r\n      notes: 'Proyecto completado satisfactoriamente - cliente aprob√≥ entrega'\r\n    },\r\n    {\r\n      id: 5,\r\n      orderNumber: 'OT-2024-019',\r\n      projectName: 'Oficinas Corporativas TechSoft',\r\n      clientName: 'TechSoft Solutions',\r\n      type: 'Actualizaci√≥n de Sistema',\r\n      priority: 'Baja',\r\n      status: 'En Pausa',\r\n      assignedTechnician: 'Diego Ram√≠rez',\r\n      technicianRole: 'T√©cnico Senior',\r\n      dueDate: '15/10/2024',\r\n      progress: 30,\r\n      description: `Actualizaci√≥n del sistema de control HVAC a tecnolog√≠a IoT.\\nInstalaci√≥n de sensores inteligentes y sistema de monitoreo remoto.\\nProyecto pausado por disponibilidad de equipos especializados.`,\r\n      requiredMaterials: [\r\n        { name: 'Sensores IoT', quantity: '15 unidades' },\r\n        { name: 'Gateway de Comunicaci√≥n', quantity: '1 unidad' },\r\n        { name: 'Cableado de Red', quantity: '100 metros' }\r\n      ],\r\n      attachments: [\r\n        { name: 'Propuesta_IoT_TechSoft.pdf', type: 'pdf' }\r\n      ],\r\n      requiredPPE: ['Casco de Seguridad', 'Gafas de Protecci√≥n'],\r\n      medicalRequirements: false,\r\n      notes: 'Esperando llegada de sensores IoT - fecha estimada 10/10/2024'\r\n    }\r\n  ];\r\n\r\n  const mockStats = {\r\n    activeOrders: 24,\r\n    pendingOrders: 8,\r\n    inProgressOrders: 12,\r\n    completedToday: 4,\r\n    activeTechnicians: 15,\r\n    criticalMaterials: 3\r\n  };\r\n\r\n  useEffect(() => {\r\n    setWorkOrders(mockWorkOrders);\r\n    setFilteredOrders(mockWorkOrders);\r\n    setStats(mockStats);\r\n  }, []);\r\n\r\n  const handleFiltersChange = (filters) => {\r\n  let filtered = [...(localOrders || [])];\r\n\r\n  // B√∫squeda general\r\n  if (filters?.search) {\r\n    const search = filters.search.toLowerCase();\r\n    filtered = filtered.filter(order =>\r\n      order?.ordenTrabajo?.toLowerCase()?.includes(search) ||\r\n      order?.cliente?.nombre?.toLowerCase()?.includes(search) ||\r\n      order?.cliente?.empresa?.toLowerCase()?.includes(search) ||\r\n      order?.tipo?.toLowerCase()?.includes(search) ||\r\n      order?.tecnicoAsignado?.nombre?.toLowerCase()?.includes(search) ||\r\n      order?.notasAdicionales?.toLowerCase()?.includes(search)\r\n    );\r\n  }\r\n\r\n  //  Estado\r\n  if (filters?.status)\r\n    filtered = filtered.filter(order => order?.estado === filters.status);\r\n\r\n  // Prioridad\r\n  if (filters?.priority)\r\n    filtered = filtered.filter(order => order?.prioridad === filters.priority);\r\n\r\n  // T√©cnico\r\n  if (filters?.technician)\r\n    filtered = filtered.filter(order =>\r\n      order?.tecnicoAsignado?.nombre === filters.technician\r\n    );\r\n\r\n  // Proyecto (por tipo)\r\n  if (filters?.project)\r\n    filtered = filtered.filter(order => order?.tipo === filters.project);\r\n\r\n  // Rango de fechas\r\n  if (filters?.dateRange) {\r\n    const today = new Date();\r\n    filtered = filtered.filter(order => {\r\n      const dueDate = new Date(order?.fechaLimite);\r\n      if (isNaN(dueDate)) return false;\r\n      switch (filters.dateRange) {\r\n        case 'today':\r\n          return dueDate.toDateString() === today.toDateString();\r\n        case 'week': {\r\n          const startOfWeek = new Date(today);\r\n          startOfWeek.setDate(today.getDate() - today.getDay());\r\n          const endOfWeek = new Date(startOfWeek);\r\n          endOfWeek.setDate(startOfWeek.getDate() + 6);\r\n          return dueDate >= startOfWeek && dueDate <= endOfWeek;\r\n        }\r\n        case 'month':\r\n          return (\r\n            dueDate.getMonth() === today.getMonth() &&\r\n            dueDate.getFullYear() === today.getFullYear()\r\n          );\r\n        case 'overdue':\r\n          return dueDate < today;\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  setFilteredOrders(filtered);\r\n};\r\n\r\n  const handleStatusUpdate = (order, newStatus) => {\r\n    const updatedOrders = workOrders?.map(wo => \r\n      wo?.id === order?.id ? { ...wo, status: newStatus } : wo\r\n    );\r\n    setWorkOrders(updatedOrders);\r\n    setFilteredOrders(updatedOrders);\r\n  };\r\n\r\n  // CRUD de √≥rdenes\r\n  const handleSaveOrder = async (data) => {\r\n  // üóë Si es eliminaci√≥n\r\n  if (data?.type === \"delete\") {\r\n    setLocalOrders(prev => prev.filter(o => o.id !== data.id));\r\n    setFilteredOrders(prev => prev.filter(o => o.id !== data.id));\r\n    return;\r\n  }\r\n\r\n  //Si es creaci√≥n o edici√≥n\r\n  let newOrder = { ...data };\r\n\r\n  if (!newOrder?.id) {\r\n    newOrder.id = Date.now();\r\n    newOrder.estado = 'Pendiente';\r\n    newOrder.fechaCreacion = new Date().toISOString();\r\n  }\r\n\r\n  setLocalOrders(prev => {\r\n    const exists = prev.some(o => o.id === newOrder.id);\r\n    return exists\r\n      ? prev.map(o => (o.id === newOrder.id ? newOrder : o))\r\n      : [newOrder, ...prev];\r\n  });\r\n\r\n  setFilteredOrders(prev => {\r\n    const exists = prev.some(o => o.id === newOrder.id);\r\n    return exists\r\n      ? prev.map(o => (o.id === newOrder.id ? newOrder : o))\r\n      : [newOrder, ...prev];\r\n  });\r\n\r\n  setIsModalOpen(false);\r\n  setSelectedOrder(null);\r\n};\r\n\r\n\r\n  const handleCreateNewOrder = () => {\r\n    // Create empty order structure for new order creation\r\n    const newOrder = {\r\n      id: null, // Will be generated when saved\r\n      orderNumber: '', // Will be auto-generated\r\n      projectName: '',\r\n      clientName: '',\r\n      type: '',\r\n      priority: 'Media',\r\n      status: 'Pendiente',\r\n      assignedTechnician: '',\r\n      technicianRole: '',\r\n      dueDate: '',\r\n      progress: 0,\r\n      description: '',\r\n      requiredMaterials: [],\r\n      attachments: [],\r\n      requiredPPE: [],\r\n      medicalRequirements: false,\r\n      notes: ''\r\n    };\r\n    \r\n    setSelectedOrder(newOrder);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleCreateNewRequisition = () => {\r\n    // Create empty requisition structure for new requisition creation\r\n    const newRequisition = {\r\n      id: null, // Will be generated when saved\r\n      requestNumber: '', // Will be auto-generated\r\n      orderNumber: '',\r\n      projectName: '',\r\n      requestedBy: 'Usuario Actual',\r\n      requestDate: new Date()?.toISOString()?.split('T')?.[0],\r\n      status: 'Pendiente',\r\n      priority: 'Media',\r\n      description: '',\r\n      items: [],\r\n      justification: '',\r\n      approvedBy: '',\r\n      approvalDate: '',\r\n      notes: ''\r\n    };\r\n    \r\n    setSelectedRequisition(newRequisition);\r\n    setIsRequisitionModalOpen(true);\r\n  };\r\n\r\n  // Guardar requisici√≥n\r\n  const handleSaveRequisition = async (savedRequisition) => {\r\n    let newReq = { ...savedRequisition };\r\n    try {\r\n      if (!newReq?.id) {\r\n        // Si es una nueva requisici√≥n, la creamos en el backend\r\n        const response = await createRequisition(newReq);\r\n        if (response) {\r\n          newReq = response;\r\n        }\r\n      } else {\r\n        // Si es una actualizaci√≥n, actualizamos en el backend\r\n        const response = await updateRequisition(newReq.id, newReq);\r\n        if (response) {\r\n          newReq = response;\r\n        }\r\n      }\r\n\r\n      setLocalRequisitions(prev => [newReq, ...prev.filter(r => r.id !== newReq.id)]);\r\n      setLocalOrders(prev => [newReq, ...prev.filter(r => r.id !== newReq.id)]);\r\n\r\n      // Forzar actualizaci√≥n de requisiciones\r\n      await getRequisitions();\r\n      \r\n      setIsRequisitionModalOpen(false);\r\n      setSelectedRequisition(null);\r\n    } catch (error) {\r\n      console.error(\"Error al guardar la requisici√≥n:\", error);\r\n    }\r\n  };\r\n\r\nconst handleExportData = () => {\r\n  if (!filteredOrders || filteredOrders.length === 0) {\r\n    alert(\"No hay datos disponibles para exportar.\");\r\n    return;\r\n  }\r\n\r\n  const doc = new jsPDF({\r\n    orientation: \"landscape\",\r\n    unit: \"pt\",\r\n    format: \"A4\",\r\n  });\r\n\r\n  const gray = \"#333333\";\r\n\r\n  //ENCABEZADO AZUL\r\n  doc.setFillColor(10, 74, 138);\r\n  doc.rect(0, 0, doc.internal.pageSize.getWidth(), 40, \"F\");\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(18);\r\n  doc.text(\"REPORTE DE √ìRDENES DE TRABAJO\", doc.internal.pageSize.getWidth() / 2, 25, {\r\n    align: \"center\",\r\n  });\r\n\r\n  //FECHA DE GENERACI√ìN\r\n  const fechaActual = new Date().toLocaleDateString(\"es-MX\", {\r\n    year: \"numeric\",\r\n    month: \"2-digit\",\r\n    day: \"2-digit\",\r\n  });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.text(`Generado el ${fechaActual}`, doc.internal.pageSize.getWidth() - 120, 25);\r\n\r\n  //SECCI√ìN DATOS GENERALES\r\n  let startY = 60;\r\n  doc.setTextColor(gray);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(13);\r\n  doc.text(\"Resumen General\", doc.internal.pageSize.getWidth() / 2, startY, { align: \"center\" });\r\n\r\n  doc.setFont(\"helvetica\", \"normal\");\r\n  doc.setFontSize(10);\r\n\r\n  //Totales de resumen\r\n  const totalOrdenes = filteredOrders.length;\r\n  const completadas = filteredOrders.filter((o) => o.estado === \"Completada\" || o.status === \"Completada\").length;\r\n  const pendientes = filteredOrders.filter((o) => o.estado === \"Pendiente\" || o.status === \"Pendiente\").length;\r\n  const enProceso = filteredOrders.filter((o) => o.estado === \"En Proceso\" || o.status === \"En Proceso\").length;\r\n\r\nstartY += 20;\r\n\r\n// Construimos el texto completo\r\nconst resumenTexto = `Total de √ìrdenes: ${totalOrdenes}   |   Completadas: ${completadas}   |   Pendientes: ${pendientes}   |   En Proceso: ${enProceso}`;\r\ndoc.text(resumenTexto, doc.internal.pageSize.getWidth() / 2, startY, { align: \"center\" });\r\n\r\n\r\n  //ORDENAR POR PRIORIDAD (Alta ‚Üí Media ‚Üí Baja ‚Üí Cr√≠tico)\r\n  const prioridadOrden = [\"Alta\", \"Media\", \"Baja\", \"Cr√≠tico\"];\r\n  const sortedOrders = [...filteredOrders].sort((a, b) => {\r\n    const prioridadA = prioridadOrden.indexOf((a.prioridad || a.priority || \"\").trim());\r\n    const prioridadB = prioridadOrden.indexOf((b.prioridad || b.priority || \"\").trim());\r\n    return (prioridadA === -1 ? 99 : prioridadA) - (prioridadB === -1 ? 99 : prioridadB);\r\n  });\r\n\r\n  //TABLA DETALLADA\r\n  const tableColumn = [\r\n    \"N¬∞ Orden\",\r\n    \"T√©cnico Asignado\",\r\n    \"Prioridad\",\r\n    \"Estado\",\r\n    \"Fecha L√≠mite\",\r\n    \"Cliente\",\r\n    \"Tipo Proyecto\",\r\n    \"Notas\",\r\n  ];\r\n\r\n  const tableRows = sortedOrders.map((order) => [\r\n    order?.ordenTrabajo || order?.orderNumber || \"‚Äî\",\r\n    order?.tecnicoAsignado?.nombre || order?.assignedTechnician || \"Sin t√©cnico\",\r\n    order?.prioridad || order?.priority || \"‚Äî\",\r\n    order?.estado || order?.status || \"‚Äî\",\r\n    order?.fechaLimite || order?.dueDate || \"‚Äî\",\r\n    order?.cliente?.empresa || order?.cliente?.nombre || order?.clientName || \"Sin cliente\",\r\n    order?.tipo || order?.projectName || \"‚Äî\",\r\n    order?.notasAdicionales || order?.notes || \"‚Äî\",\r\n  ]);\r\n\r\n  doc.autoTable({\r\n    startY: startY + 25,\r\n    head: [tableColumn],\r\n    body: tableRows,\r\n    theme: \"grid\",\r\n    styles: { fontSize: 9, cellPadding: 5 },\r\n    headStyles: {\r\n      fillColor: [10, 74, 138],\r\n      textColor: 255,\r\n      halign: \"center\",\r\n      fontStyle: \"bold\",\r\n    },\r\n    bodyStyles: { textColor: [50, 50, 50] },\r\n    alternateRowStyles: { fillColor: [245, 245, 245] },\r\n    margin: { left: 30, right: 30 },\r\n  });\r\n\r\n  //GUARDAR PDF\r\n  doc.save(`reporte_ordenes_trabajo_${new Date().toISOString().split(\"T\")[0]}.pdf`);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Desktop Sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <Sidebar \r\n          isCollapsed={sidebarCollapsed} \r\n          onToggle={handleSidebarToggle}\r\n        />\r\n      </div>\r\n      {/* Mobile Header */}\r\n      <div className=\"lg:hidden\">\r\n        <Header \r\n          onMenuToggle={handleMobileMenuToggle}\r\n          isMenuOpen={mobileMenuOpen}\r\n        />\r\n      </div>\r\n\r\n      <div className={`transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <div className=\"p-6\">\r\n          {/* Header Section */}\r\n          <div className=\"mb-6\">\r\n            <Breadcrumb />\r\n            <div className=\"flex items-center justify-between mt-4\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground\">Procesamiento de √ìrdenes de Trabajo</h1>\r\n                <p className=\"text-muted-foreground mt-2\">\r\n                  Gesti√≥n integral de √≥rdenes de trabajo, asignaci√≥n de t√©cnicos y control de materiales\r\n                </p>\r\n              </div>\r\n              <div className=\"flex items-center space-x-3\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  iconName=\"Plus\"\r\n                  iconSize={16}\r\n                  onClick={handleCreateNewOrder}\r\n                >\r\n                  Nueva Orden\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  iconName=\"ClipboardList\"\r\n                  iconSize={16}\r\n                  onClick={handleCreateNewRequisition}\r\n                >\r\n                  Nueva Requisici√≥n\r\n                </Button>\r\n                <div className=\"flex justify-end p-4\">\r\n <Button\r\n  variant=\"default\"\r\n  iconName=\"Download\"\r\n  iconSize={16}\r\n  onClick={handleExportData} \r\n>\r\n  Exportar\r\n</Button>\r\n</div>\r\n\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Stats Cards */}\r\n          <StatsCards stats={stats} />\r\n\r\n          {/* Main Content */}\r\n          <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\r\n            {/* Work Orders Section */}\r\n            <div className=\"xl:col-span-2 space-y-6\">\r\n              <FilterToolbar\r\n                onFiltersChange={handleFiltersChange}\r\n                totalCount={workOrders?.length}\r\n                filteredCount={filteredOrders?.length}\r\n              />\r\n\r\n              <WorkOrderTable\r\n                workOrders={filteredOrders}\r\n                onStatusUpdate={handleStatusUpdate}\r\n                onAssignTechnician={handleAssignTechnician}\r\n                onViewDetails={handleViewDetails}\r\n                onEditOrder={handleEditOrder}\r\n              />\r\n            </div>\r\n\r\n            {/* Inventory Panel */}\r\n            <div className=\"xl:col-span-1\">\r\n              <InventoryPanel\r\n                onCreatePurchaseOrder={handleCreatePurchaseOrder}\r\n                onRequestMaterial={handleRequestMaterial}\r\n                onCreateRequisition={handleCreateNewRequisition}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Work Order Modal */}\r\n          <WorkOrderModal\r\n            isOpen={isModalOpen}\r\n            onClose={() => {\r\n              setIsModalOpen(false);\r\n              setSelectedOrder(null);\r\n            }}\r\n            workOrder={selectedOrder}\r\n            onSave={handleSaveOrder}\r\n          />\r\n\r\n          {/* Requisition Modal */}\r\n          <RequisitionModal\r\n            isOpen={isRequisitionModalOpen}\r\n            onClose={() => {\r\n              setIsRequisitionModalOpen(false);\r\n              setSelectedRequisition(null);\r\n            }}\r\n            requisition={selectedRequisition}\r\n            onSave={handleSaveRequisition}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkOrderProcessing;","import httpService from \"./httpService\";\r\n\r\nconst tallerService = {\r\n  // list talleres with optional filters\r\n  async getWorkOrders(filters = {}) {\r\n    try {\r\n      const query = new URLSearchParams(filters).toString();\r\n      const url = query ? `/talleres?${query}` : \"/talleres\";\r\n\r\n      const response = await httpService.get(url);\r\n      return response; // { success, data, message }\r\n    } catch (error) {\r\n      console.error(\"Error al obtener talleres:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getWorkOrderById(id) {\r\n    try {\r\n      const response = await httpService.get(`/taller/${id}`);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al obtener taller por id:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async createWorkOrder(payload) {\r\n    try {\r\n      const response = await httpService.post(\"/taller/crear\", payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al crear taller:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async updateWorkOrder(id, payload) {\r\n    try {\r\n      // support PUT (or PATCH) via the same endpoint - prefer PUT\r\n      const response = await httpService.put(`/taller/${id}`, payload);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error al actualizar taller:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async deleteWorkOrder(id) {\r\n    try {\r\n      const response = await httpService.delete(`/taller/${id}`);\r\n      return response; // { success, data, message }\r\n    } catch (error) {\r\n      console.error(\"Error al eliminar taller:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\nexport default tallerService;\r\n","import { useState, useCallback } from \"react\";\r\nimport { useNotifications } from \"../context/NotificationContext\";\r\nimport tallerService from \"../services/tallerService\";\r\n\r\nconst useOperacAlt = () => {\r\n  const { showHttpError, showOperationSuccess } = useNotifications();\r\n  const [oportunities, setOportunities] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const getOportunities = useCallback(async (filters = {}) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n  const response = await tallerService.getWorkOrders(filters);\r\n      const data = response.success && Array.isArray(response.data) ? response.data : [];\r\n      setOportunities(data);\r\n      return data;\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err);\r\n      showHttpError(\"Error al cargar √≥rdenes\");\r\n      return [];\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showHttpError]);\r\n\r\n  const createWorkOrder = useCallback(async (payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n  const response = await tallerService.createWorkOrder(payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Orden creada\");\r\n        const newOrders = await getOportunities();  \r\n        const savedOrder = newOrders.find(o => o.id === response.data.id) || response.data;\r\n        return savedOrder;\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al crear orden\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo crear la orden\");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError, getOportunities]);\r\n\r\n  const updateWorkOrder = useCallback(async (id, payload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n  const response = await tallerService.updateWorkOrder(id, payload);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Orden actualizada\");\r\n        // Actualiza localmente sin recargar\r\n        setOportunities(prev => prev.map(o => o.id === id ? { ...o, ...payload } : o));\r\n        return { ...payload, id };\r\n      } else {\r\n        showHttpError(response.message || \"Error desconocido al actualizar orden\");\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo actualizar la orden\");\r\n      setError(err);\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  const deleteWorkOrder = useCallback(async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n  const response = await tallerService.deleteWorkOrder(id);\r\n      if (response.success) {\r\n        showOperationSuccess(response.message || \"Orden eliminada\");\r\n        setOportunities(prev => prev.filter(o => o.id !== id));\r\n        return true;\r\n      } else {\r\n        showHttpError(response.message || \"Error al eliminar la orden\");\r\n        return false;\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showHttpError(\"No se pudo eliminar la orden\");\r\n      setError(err);\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  return { oportunities, loading, error, getOportunities, createWorkOrder, updateWorkOrder, deleteWorkOrder };\r\n};\r\n\r\nexport default useOperacAlt;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport useOperacAlt from '../../../hooks/useOperacAlt';\r\n\r\n        const WorkflowBoard = ({ workOrders = [], onStatusChange, onOrderSelect }) => {\r\n          const { oportunities, getOportunities } = useOperacAlt();\r\n\r\n          const columns = [\r\n            { id: 'material-reception', title: 'Recepci√≥n Material', icon: 'Package', color: 'bg-blue-500' },\r\n            { id: 'safety-checklist', title: 'Lista Seguridad', icon: 'Shield', color: 'bg-orange-500' },\r\n            { id: 'manufacturing', title: 'Fabricaci√≥n', icon: 'Wrench', color: 'bg-purple-500' },\r\n            { id: 'quality-control', title: 'Control Calidad', icon: 'CheckCircle', color: 'bg-green-500' },\r\n            { id: 'ready-shipment', title: 'Listo Env√≠o', icon: 'Truck', color: 'bg-teal-500' }\r\n          ];\r\n\r\n          // helper to build a stable string key for an order\r\n          const getOrderKey = (orderOrId) => {\r\n            try {\r\n              if (!orderOrId) return '';\r\n              if (typeof orderOrId === 'string' || typeof orderOrId === 'number') return String(orderOrId);\r\n              // order object\r\n              const o = orderOrId;\r\n              return String(o.id || o.ordenTrabajo || o.folio || (o.raw && (o.raw.id || o.raw.folio)) || '').trim();\r\n            } catch (e) {\r\n              return '';\r\n            }\r\n          };\r\n\r\n          // (debug panel removed) ‚Äî normalization and rendering remain\r\n\r\n          // fetch when no external prop provided\r\n          // NOTE: avoid including `getOportunities` in deps because the hook returns a new\r\n          // function identity each render which would cause this effect to run repeatedly.\r\n          useEffect(() => {\r\n            if (!workOrders || !workOrders.length) getOportunities();\r\n            // Intentionally only depend on workOrders length to prevent cycling\r\n          }, [workOrders?.length]);\r\n\r\n          const sourceOrders = useMemo(() => (workOrders?.length ? workOrders : oportunities || []), [workOrders, oportunities]);\r\n\r\n\r\n          // normalize incoming order shapes (keep original object under `raw`)\r\n          function normalizeOrder(o) {\r\n            if (!o) return null;\r\n            const ordenTrabajo = o.ordenTrabajo || o.id || o.order || o.folio;\r\n            const proyectoNombre = o.proyectoNombre || o.projectRef || o.nombreProyecto || o.projectName;\r\n            const cliente = o.cliente || o.client || o.clientName || (o.clienteNombre ? { nombre: o.clienteNombre } : null);\r\n            const clientLabel = cliente?.nombre || cliente?.empresa || cliente || o.clientName || '';\r\n\r\n            let tecnicos = [];\r\n            if (Array.isArray(o.tecnicoAsignado)) tecnicos = o.tecnicoAsignado.map(t => ({ nombre: t.nombre || t.name || t }));\r\n            else if (o.tecnicoAsignado && typeof o.tecnicoAsignado === 'object') tecnicos = [{ nombre: o.tecnicoAsignado.nombre || o.tecnicoAsignado.name }];\r\n            else if (o.tecnicoAsignado) tecnicos = [{ nombre: o.tecnicoAsignado }];\r\n            else if (Array.isArray(o.assignedTechnicians)) tecnicos = o.assignedTechnicians.map(t => ({ nombre: t.name || t.nombre }));\r\n            // also accept 'tecnicos' as an alias from backend\r\n            else if (Array.isArray(o.tecnicos)) tecnicos = o.tecnicos.map(t => ({ nombre: t.nombre || t.name || t }));\r\n\r\n            let prioridad = o.prioridad || o.priority || o.priorityLabel || '';\r\n            // infer priority from other fields when backend misuses 'estado' for priority\r\n            try {\r\n              const maybeEstado = (o.estado || o.estado?.toString?.() || o.status || '').toString().toLowerCase();\r\n              if (!prioridad && maybeEstado) {\r\n                const priMap = ['alta','high','urgent','urgente','cr√≠tica','critica','media','baja','low'];\r\n                if (priMap.includes(maybeEstado)) prioridad = (o.estado || maybeEstado);\r\n              }\r\n            } catch (e) {\r\n              // ignore\r\n            }\r\n            const prioridadLabel = o.prioridad || o.priorityLabel || o.priority || prioridad || '';\r\n            const fechaLimite = o.fechaLimite || o.estimatedCompletion || o.fecha || o.fechaEstimada || '';\r\n            // normalize various progress fields and parse strings like \"15%\"\r\n            const _rawProg = o.estadoProgreso ?? o.estado_progreso ?? o.progressPercentage ?? o.progressPercent ?? o.estado_progress ?? o.progress ?? o.progreso;\r\n            let estadoProgreso = 0;\r\n            try {\r\n              if (_rawProg == null) estadoProgreso = 0;\r\n              else if (typeof _rawProg === 'string') {\r\n                const n = parseInt(String(_rawProg).replace('%', '').trim(), 10);\r\n                estadoProgreso = Number.isFinite(n) ? n : 0;\r\n              } else {\r\n                estadoProgreso = Math.round(Number(_rawProg) || 0);\r\n              }\r\n            } catch (e) { estadoProgreso = 0; }\r\n\r\n            const statusRaw = (o.status || o.estado || '').toString();\r\n            const estadoMap = (val) => {\r\n              if (!val) return '';\r\n              const v = String(val).toLowerCase().trim();\r\n              // map common Spanish and English states to column ids\r\n              if (['material-reception','recepcion material','recepci√≥n material','recepci√≥n_material','recepci√≥n'].includes(v)) return 'material-reception';\r\n              if (['safety-checklist','lista seguridad','seguridad','safety','checklist seguridad'].includes(v)) return 'safety-checklist';\r\n              if (['manufacturing','fabricaci√≥n','fabricacion','en progreso','progreso','producci√≥n','produccion','produccion'].includes(v)) return 'manufacturing';\r\n              if (['quality-control','control calidad','calidad','qc','quality'].includes(v)) return 'quality-control';\r\n              if (['ready-shipment','listo env√≠o','listo envio','env√≠o','envio','enviado','completada','completado','listo'].includes(v)) return 'ready-shipment';\r\n              if (['pendiente','pendiente por revisar','new','nuevo'].includes(v)) return 'material-reception';\r\n              if (['en pausa','pausa','pausado'].includes(v)) return 'manufacturing';\r\n              // fallback: if value already matches expected ids\r\n              if (['material-reception','safety-checklist','manufacturing','quality-control','ready-shipment'].includes(v)) return v;\r\n              return val;\r\n            };\r\n\r\n            const status = estadoMap(statusRaw);\r\n\r\n            // expose original estado value for transparency\r\n            const estado = o.estado || o.status || '';\r\n\r\n            return {\r\n              raw: o,\r\n              ordenTrabajo,\r\n              proyectoNombre,\r\n              cliente: cliente || null,\r\n              clientLabel,\r\n              tecnicos,\r\n              prioridad,\r\n              prioridadLabel,\r\n              estadoProgreso,\r\n              fechaLimite,\r\n              status,\r\n              estado,\r\n              tecnicoAsignado: o.tecnicoAsignado || (tecnicos.length ? tecnicos.map(t => ({ nombre: t.nombre })) : null),\r\n              notasAdicionales: o.notasAdicionales || o.notes || o.descripcion || '',\r\n              tipo: o.tipo || o.type || '',\r\n              id: o.id || ordenTrabajo,\r\n              assignedTechnicians: o.assignedTechnicians || tecnicos.map(t => ({ name: t.nombre })),\r\n              projectRef: o.projectRef || proyectoNombre,\r\n              materials: o.materiales || o.materials || null,\r\n              progress: o.progress || o.progreso || 0,\r\n              estimatedCompletion: o.estimatedCompletion || fechaLimite,\r\n              priorityValue: prioridad,\r\n            };\r\n          }\r\n\r\n          // precompute normalized orders for rendering and for the debug panel\r\n          const normalizedOrders = useMemo(() => sourceOrders.map(normalizeOrder).filter(Boolean), [sourceOrders]);\r\n\r\n          // (debugging/logs removed) keep normalizedOrders for UI rendering\r\n\r\n          const getPriorityColor = (priority) => {\r\n            const colors = { low: 'border-gray-300', medium: 'border-yellow-400', high: 'border-orange-500', urgent: 'border-red-500' };\r\n            return colors[priority] || 'border-gray-300';\r\n          };\r\n\r\n          const getProgressColor = (progress) => {\r\n            if (progress < 30) return 'bg-red-500';\r\n            if (progress < 70) return 'bg-yellow-500';\r\n            return 'bg-green-500';\r\n          };\r\n\r\n          // persist some UI-only states in session so reloads keep positions and completed flags\r\n          const [localProgress, setLocalProgress] = useState(() => {\r\n            try { return JSON.parse(localStorage.getItem('wb_local_progress') || '{}'); } catch (e) { return {}; }\r\n          });\r\n          const [localHidden, setLocalHidden] = useState(() => {\r\n            try { return JSON.parse(localStorage.getItem('wb_local_hidden') || '{}'); } catch (e) { return {}; }\r\n          });\r\n          const [localCompleted, setLocalCompleted] = useState(() => {\r\n            try { return JSON.parse(localStorage.getItem('wb_local_completed') || '{}'); } catch (e) { return {}; }\r\n          });\r\n          const [localStatusOverrides, setLocalStatusOverrides] = useState(() => {\r\n            try { return JSON.parse(localStorage.getItem('wb_status_overrides') || '{}'); } catch (e) { return {}; }\r\n          });\r\n\r\n          // keep localStorage in sync when these states change\r\n          useEffect(() => {\r\n            try { localStorage.setItem('wb_status_overrides', JSON.stringify(localStatusOverrides || {})); } catch (e) { }\r\n          }, [localStatusOverrides]);\r\n          useEffect(() => {\r\n            try { localStorage.setItem('wb_local_completed', JSON.stringify(localCompleted || {})); } catch (e) { }\r\n          }, [localCompleted]);\r\n          useEffect(() => {\r\n            try { localStorage.setItem('wb_local_hidden', JSON.stringify(localHidden || {})); } catch (e) { }\r\n          }, [localHidden]);\r\n          useEffect(() => {\r\n            try { localStorage.setItem('wb_local_progress', JSON.stringify(localProgress || {})); } catch (e) { }\r\n          }, [localProgress]);\r\n\r\n          // Initialize overrides on load: ensure each known order has a default override of\r\n          // 'material-reception' but DO NOT clobber existing overrides. This prevents\r\n          // resetting user moves when normalizedOrders updates (e.g. after parent updates).\r\n          useEffect(() => {\r\n            setLocalStatusOverrides((prev) => {\r\n              try {\r\n                const next = { ...(prev || {}) };\r\n                normalizedOrders.forEach((o) => {\r\n                  const k = getOrderKey(o);\r\n                  if (!k) return;\r\n                  if (!next[k]) next[k] = 'material-reception';\r\n                });\r\n                return next;\r\n              } catch (e) {\r\n                return prev || {};\r\n              }\r\n            });\r\n          }, [normalizedOrders]);\r\n\r\n          // Limpiar localStorage cuando el servidor tiene valores m√°s recientes\r\n          useEffect(() => {\r\n            setLocalProgress((prev) => {\r\n              try {\r\n                const next = { ...prev };\r\n                let hasChanges = false;\r\n                normalizedOrders.forEach((o) => {\r\n                  const k = getOrderKey(o);\r\n                  if (!k) return;\r\n                  // Si el servidor tiene un progreso definido, eliminar el valor local\r\n                  const serverProgress = o?.estadoProgreso ?? o?.progress;\r\n                  if (serverProgress !== undefined && serverProgress !== null && next[k] !== undefined) {\r\n                    delete next[k];\r\n                    hasChanges = true;\r\n                  }\r\n                });\r\n                return hasChanges ? next : prev;\r\n              } catch (e) {\r\n                return prev || {};\r\n              }\r\n            });\r\n          }, [normalizedOrders]);\r\n\r\n          const handleMoveOrder = (order, newStatus) => {\r\n            const orderKey = getOrderKey(order);\r\n            if (!orderKey) return; // don't proceed without a stable key\r\n            // compute progress based on column index (0..n-1). final column => 100%\r\n            const nextIndex = columns.findIndex(c => c.id === newStatus);\r\n            const newProgress = nextIndex >= 0 ? Math.round((nextIndex / (columns.length - 1)) * 100) : null;\r\n            const payload = {};\r\n            // Important: don't auto-mark 100% when moving into 'ready-shipment' via Siguiente.\r\n            // The user requested that only the explicit 'Listo' button marks 100% and completed.\r\n            if (newProgress !== null && newStatus !== 'ready-shipment') {\r\n              payload.estadoProgreso = newProgress;\r\n              // Solo actualizar localStorage si el servidor NO tiene ya un valor\r\n              const serverProgress = order?.estadoProgreso ?? order?.progress;\r\n              if (serverProgress === undefined || serverProgress === null) {\r\n                setLocalProgress(prev => ({ ...prev, [orderKey]: newProgress }));\r\n              }\r\n            }\r\n            if (newProgress === 100 && newStatus !== 'ready-shipment') payload.completed = true;\r\n            // persist local status override so UI keeps the card in the new column across reloads\r\n            setLocalStatusOverrides(prev => {\r\n              const next = { ...(prev || {}) };\r\n              next[orderKey] = newStatus;\r\n              return next;\r\n            });\r\n            onStatusChange?.(orderKey, newStatus, payload);\r\n          };\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg\">\r\n              {/* Title */}\r\n              <div className=\"p-4 border-b\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <Icon name=\"Workflow\" className=\"text-primary\" size={20} />\r\n                  <h3 className=\"text-lg font-semibold\">Flujo Operativo Taller</h3>\r\n                  <div className=\"ml-auto\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"overflow-x-auto p-4\">\r\n                <div className=\"flex space-x-4\">\r\n                  {columns.map((column) => {\r\n                    // filter normalized orders by (possibly overridden) column status\r\n                    const orders = normalizedOrders.filter((o) => {\r\n                      const k = getOrderKey(o);\r\n                      // Prefer authoritative status from the parent (o.status) when present.\r\n                      // localStatusOverrides are only a fallback so parent-initiated reverts are respected.\r\n                      const hasParentStatus = o && o.status !== undefined && o.status !== null && String(o.status) !== '';\r\n                      const s = hasParentStatus ? o.status : ((k && localStatusOverrides[k]) || o?.status);\r\n                      return s === column.id;\r\n                    });\r\n\r\n                    // orders per column are rendered below\r\n\r\n                    // sort by priority (critical/urgent, high/alta, medium/media, low/baja)\r\n                    const priorityRank = (p) => {\r\n                      const v = String(p || '').toLowerCase();\r\n                      if (['cr√≠tica','critica','urgent','urgente'].includes(v)) return 1;\r\n                      if (['alta','high'].includes(v)) return 2;\r\n                      if (['media','medium'].includes(v)) return 3;\r\n                      if (['baja','low'].includes(v)) return 4;\r\n                      return 99;\r\n                    };\r\n                    orders.sort((a, b) => priorityRank(a.prioridad || a.priorityValue) - priorityRank(b.prioridad || b.priorityValue));\r\n\r\n                    // compute visible orders (exclude hidden) so header counts match rendered cards\r\n                    const visibleOrders = orders.filter((o) => {\r\n                      const k = getOrderKey(o);\r\n                      return !(k && (localHidden[k] || o?.hidden));\r\n                    });\r\n\r\n                    return (\r\n                      <div key={column.id} className=\"bg-muted/30 rounded-lg p-3 flex flex-col flex-shrink-0 w-72 md:w-80 lg:w-96 h-[60vh]\">\r\n                        {/* Fixed header area for each column to align starts */}\r\n                          <div className=\"flex items-center space-x-2 mb-3 h-16 flex-shrink-0\">\r\n                          <div className={`w-3 h-3 rounded-full ${column.color}`} />\r\n                          <Icon name={column.icon} size={16} className=\"text-foreground\" />\r\n                          <span className=\"font-medium text-sm truncate\">{column.title}</span>\r\n                          <span className=\"text-xs text-muted-foreground bg-muted px-2 py-1 rounded-full ml-auto\">{visibleOrders.length}</span>\r\n                        </div>\r\n                        {/* compact IDs info removed */}\r\n\r\n                        <div className=\"space-y-3 overflow-y-auto flex-1 pr-1 no-scrollbar\">\r\n                          {visibleOrders.length === 0 && (\r\n                            <div className=\"text-center text-muted-foreground py-6\">\r\n                              <Icon name={column.icon} size={28} className=\"mx-auto mb-2 opacity-50\" />\r\n                              <div className=\"text-sm\">Sin √≥rdenes</div>\r\n                            </div>\r\n                          )}\r\n                          {visibleOrders.map((order, __idx) => {\r\n                            const stableKey = getOrderKey(order) || (order?.id || order?.ordenTrabajo || `order-${__idx}`);\r\n                            // ensure we build a unique react key per rendered item (append index)\r\n                            const reactKey = `${stableKey}-${__idx}`;\r\n                            const isHidden = stableKey && (localHidden[stableKey] || order?.hidden);\r\n                            if (isHidden) return null;\r\n                            // Siempre priorizar valores del servidor sobre localStorage\r\n                            const parentProgress = (order?.estadoProgreso !== undefined && order?.estadoProgreso !== null)\r\n                              ? Number(order.estadoProgreso)\r\n                              : (order?.progress !== undefined && order?.progress !== null) ? Number(order.progress) : null;\r\n\r\n                            const localProg = (stableKey && localProgress && (localProgress[stableKey] !== undefined && localProgress[stableKey] !== null))\r\n                              ? Number(localProgress[stableKey])\r\n                              : null;\r\n\r\n                            let rawProgress = 0;\r\n                            // SIEMPRE preferir parentProgress (servidor) sobre localStorage\r\n                            if (parentProgress !== null && !Number.isNaN(parentProgress)) {\r\n                              rawProgress = Math.round(parentProgress);\r\n                              // Limpiar localStorage si hay un valor del servidor m√°s reciente\r\n                              if (stableKey && localProg !== null && localProg !== parentProgress) {\r\n                                setLocalProgress(prev => {\r\n                                  const next = { ...prev };\r\n                                  delete next[stableKey];\r\n                                  return next;\r\n                                });\r\n                              }\r\n                            } else if (localProg !== null && !Number.isNaN(localProg)) {\r\n                              rawProgress = Math.round(localProg);\r\n                            } else {\r\n                              rawProgress = Math.round(Number(order?.progreso ?? 0) || 0);\r\n                            }\r\n\r\n                            // Siempre preferir el progreso del servidor sobre flags locales\r\n                            let computedProgress = rawProgress;\r\n                            if (parentProgress !== null && !Number.isNaN(parentProgress)) {\r\n                              computedProgress = Math.min(100, Math.max(0, Math.round(parentProgress)));\r\n                            } else if (stableKey && localCompleted && localCompleted[stableKey]) {\r\n                              computedProgress = 100;\r\n                            } else {\r\n                              computedProgress = Math.min(100, Math.max(0, Math.round(rawProgress)));\r\n                            }\r\n                            const priorityKey = (p) => {\r\n                              const v = String(p || '').toLowerCase();\r\n                              if (['cr√≠tica','critica','urgent','urgente'].includes(v)) return 'urgent';\r\n                              if (['alta','high'].includes(v)) return 'high';\r\n                              if (['media','medium'].includes(v)) return 'medium';\r\n                              if (['baja','low'].includes(v)) return 'low';\r\n                              return v;\r\n                            };\r\n\r\n                            return (\r\n                <div\r\n                  key={reactKey}\r\n                                className={`bg-background border-2 ${getPriorityColor(priorityKey(order?.prioridad || order?.priorityValue))} rounded-lg p-4 cursor-pointer hover:shadow-md transition-all duration-200 overflow-hidden h-80 md:h-96 flex flex-col justify-between`}\r\n                                onClick={() => {\r\n                                  // prefer sending a normalized, stable object to the parent so\r\n                                  // the Controls panel can render consistent fields regardless of source\r\n                                  const selected = {\r\n                                    id: order?.id || order?.ordenTrabajo,\r\n                                    ordenTrabajo: order?.ordenTrabajo || order?.id,\r\n                                    // Cliente (m√∫ltiples aliases)\r\n                                    clientName: order?.clientLabel || order?.clientName || order?.cliente?.nombre || (order?.raw && (order.raw.clientName || '')),\r\n                                    clientLabel: order?.clientLabel || order?.clientName || order?.cliente?.nombre || '',\r\n                                    cliente: order?.cliente || (order?.raw && (order.raw.cliente || null)) || null,\r\n                                    // Prioridad (exponer varios nombres que el Controls usa como fallback)\r\n                                    prioridad: order?.prioridad || order?.priorityValue || '',\r\n                                    prioridadLabel: order?.prioridadLabel || order?.priorityLabel || order?.prioridad || '',\r\n                                    priorityValue: order?.priorityValue || order?.prioridad || '',\r\n                                    // Progreso (exponer en dos nombres)\r\n                                    progress: order?.progress || order?.progreso || order?.estadoProgreso || 0,\r\n                                    progreso: order?.progreso || order?.progress || order?.estadoProgreso || 0,\r\n                                    // Proyecto\r\n                                    projectRef: order?.projectRef || order?.proyectoNombre || '',\r\n                                    proyectoNombre: order?.proyectoNombre || order?.projectRef || '',\r\n                                    // T√©cnicos: pasar como assignedTechnicians y tambi√©n como tecnicoAsignado / tecnicos\r\n                                    assignedTechnicians: (Array.isArray(order?.assignedTechnicians) ? order.assignedTechnicians : (order?.assignedTechnicians ? [order.assignedTechnicians] : (Array.isArray(order?.tecnicoAsignado) ? order.tecnicoAsignado.map(t => ({ name: t?.nombre || t?.name || t })) : (order?.tecnicoAsignado ? [{ name: order.tecnicoAsignado.nombre || order.tecnicoAsignado.name || order.tecnicoAsignado }] : [])))) || [],\r\n                                    tecnicoAsignado: (Array.isArray(order?.tecnicoAsignado) ? order.tecnicoAsignado : (order?.tecnicoAsignado ? [order.tecnicoAsignado] : (Array.isArray(order?.assignedTechnicians) ? order.assignedTechnicians.map(t => ({ nombre: t?.name || t?.nombre || t })) : (order?.tecnicos || [])))) || [],\r\n                                    tecnicos: (Array.isArray(order?.tecnicos) ? order.tecnicos : (order?.tecnicos ? [order.tecnicos] : (Array.isArray(order?.tecnicoAsignado) ? order.tecnicoAsignado.map(t => ({ nombre: t?.nombre || t?.name || t })) : (Array.isArray(order?.assignedTechnicians) ? order.assignedTechnicians.map(t => ({ nombre: t?.name || t?.nombre || t })) : [])))) || [],\r\n                                    raw: order?.raw || order,\r\n                                  };\r\n                                  onOrderSelect?.(selected);\r\n                                }}\r\n                                // cuando Debug est√° activado, forzamos estilos visibles para confirmar existencia en DOM\r\n                                // no debug styles\r\n                              >\r\n                                <div className=\"flex items-start justify-between mb-2\">\r\n                                  <div className=\"min-w-0\">\r\n                                  <div className=\"font-medium text-sm truncate\">{order?.ordenTrabajo || order?.id}</div>\r\n                                  <div className=\"text-xs text-muted-foreground truncate max-w-[16rem]\">{order?.proyectoNombre}</div>\r\n                                </div>\r\n\r\n                                  <div className={`px-2 py-1 rounded-full text-xs font-medium max-w-[8rem] overflow-hidden truncate ${\r\n                                    priorityKey(order?.prioridad || order?.priorityValue) === 'urgent'\r\n                                      ? 'bg-red-100 text-red-700'\r\n                                      : priorityKey(order?.prioridad || order?.priorityValue) === 'high'\r\n                                      ? 'bg-orange-100 text-orange-700'\r\n                                      : priorityKey(order?.prioridad || order?.priorityValue) === 'medium'\r\n                                      ? 'bg-yellow-100 text-yellow-700'\r\n                                      : 'bg-gray-100 text-gray-700'\r\n                                  }`}>\r\n                                    <span className=\"truncate\">{order?.prioridadLabel || order?.prioridad || order?.priorityValue}</span>\r\n                                  </div>\r\n                                  {( (stableKey && localCompleted && localCompleted[stableKey]) || computedProgress >= 100 || order?.status === 'ready-shipment') && (\r\n                                    <div className=\"ml-2 px-2 py-0.5 rounded-full bg-green-100 text-green-700 text-xs font-medium\">Completado</div>\r\n                                  )}\r\n                                </div>\r\n\r\n                                <div className=\"mb-3\">\r\n                                  <div className=\"font-medium text-sm text-foreground truncate max-w-[16rem]\">{order?.cliente?.nombre || order?.clientLabel}</div>\r\n                                </div>\r\n\r\n                                <div className=\"mb-3\">\r\n                                  <div className=\"text-xs text-muted-foreground mb-1\">T√©cnicos:</div>\r\n                                    {(() => {\r\n                                      const rawTech = order?.tecnicoAsignado || order?.tecnicos || [];\r\n                                      const techList = Array.isArray(rawTech) ? rawTech : (rawTech ? [rawTech] : []);\r\n                                      return techList.slice(0, 2).map((tech, idx) => (\r\n                                        <div key={idx} className=\"text-xs truncate\">\r\n                                          <span className=\"truncate block max-w-[12rem]\">{tech?.nombre || tech?.name || tech}</span>\r\n                                        </div>\r\n                                      ));\r\n                                    })()}\r\n                                    {((order?.tecnicoAsignado || order?.tecnicos) || []).length > 2 && (\r\n                                      <div className=\"text-xs text-muted-foreground\">+{((order?.tecnicoAsignado || order?.tecnicos) || []).length - 2} m√°s</div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                  <div className=\"mb-3\">\r\n                                  {(() => {\r\n                                    const reception = order?.recepcionMateriales || order?.raw?.recepcionMateriales || { materials: [] };\r\n                                    const materials = order?.materials;\r\n                                    \r\n                                    // Calcular totales desde recepcionMateriales si existen\r\n                                    const totalReceived = reception?.materials?.reduce((sum, m) => sum + (Number(m.received) || 0), 0) || reception?.cantidadRecibida || reception?.received || materials?.received || 0;\r\n                                    const totalRequired = reception?.materials?.reduce((sum, m) => sum + (Number(m.required) || 0), 0) || materials?.total || 0;\r\n                                    const totalPending = Math.max(0, totalRequired - totalReceived);\r\n                                    \r\n                                    return (\r\n                                      <>\r\n                                        <div className=\"flex items-center justify-between text-xs mb-1\">\r\n                                          <span className=\"text-muted-foreground\">Materiales:</span>\r\n                                          <div className=\"flex items-center gap-1\">\r\n                                            <span className=\"text-green-600 font-semibold\">{totalReceived}</span>\r\n                                            <span className=\"text-muted-foreground\">/</span>\r\n                                            <span className=\"font-semibold\">{totalRequired}</span>\r\n                                            {totalPending > 0 && (\r\n                                              <>\r\n                                                <span className=\"text-muted-foreground mx-1\">‚Ä¢</span>\r\n                                                <span className=\"text-orange-600 font-medium\">{totalPending} faltantes</span>\r\n                                              </>\r\n                                            )}\r\n                                          </div>\r\n                                        </div>\r\n                                        <div className=\"w-full bg-gray-200 rounded-full h-1\">\r\n                                          <div\r\n                                            className={`h-1 rounded-full ${\r\n                                              totalPending === 0 ? 'bg-green-500' : totalReceived > 0 ? 'bg-yellow-500' : 'bg-red-500'\r\n                                            }`}\r\n                                            style={{ width: `${totalRequired > 0 ? (totalReceived / totalRequired * 100) : 0}%` }}\r\n                                          />\r\n                                        </div>\r\n                                        {order?.materials?.issues?.length > 0 && (\r\n                                          <div className=\"text-xs text-red-600 mt-1\">{order?.materials?.issues?.length} problema(s)</div>\r\n                                        )}\r\n                                      </>\r\n                                    );\r\n                                  })()}\r\n                                </div>\r\n\r\n                                <div className=\"mb-3\">\r\n                                  <div className=\"flex items-center justify-between text-xs mb-1\">\r\n                                    <span className=\"text-muted-foreground\">Progreso:</span>\r\n                                    <span className=\"font-medium\">{computedProgress}%</span>\r\n                                  </div>\r\n                                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                                    <div className={`h-2 rounded-full ${getProgressColor(computedProgress)}`} style={{ width: `${computedProgress}%` }} />\r\n                                  </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center space-x-1 text-xs text-muted-foreground mb-3\">\r\n                                  <Icon name=\"Calendar\" size={12} />\r\n                                  <span>Est: {order?.fechaLimite}</span>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center space-x-2 text-xs\">\r\n                                  {order?.safetyChecklistCompleted && (\r\n                                    <div className=\"flex items-center space-x-1 text-green-600\">\r\n                                      <Icon name=\"Shield\" size={12} />\r\n                                      <span>Seguro</span>\r\n                                    </div>\r\n                                  )}\r\n                                  {order?.qualityControlStatus === 'approved' && (\r\n                                    <div className=\"flex items-center space-x-1 text-green-600\">\r\n                                      <Icon name=\"CheckCircle\" size={12} />\r\n                                      <span>QC OK</span>\r\n                                    </div>\r\n                                  )}\r\n                                  {order?.changeOrders?.length > 0 && (\r\n                                    <div className=\"flex items-center space-x-1 text-orange-600\">\r\n                                      <Icon name=\"Edit\" size={12} />\r\n                                      <span>{order?.changeOrders?.length}</span>\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n\r\n                                <div className=\"mt-3 pt-3 border-t border-muted\">\r\n                                  <div className=\"flex space-x-1\">\r\n                                    {column.id !== 'ready-shipment' ? (\r\n                                      <Button\r\n                                        size=\"xs\"\r\n                                        variant=\"outline\"\r\n                                        onClick={(e) => {\r\n                                          e?.stopPropagation();\r\n                                          const nextStatuses = {\r\n                                            'material-reception': 'safety-checklist',\r\n                                            'safety-checklist': 'manufacturing',\r\n                                            'manufacturing': 'quality-control',\r\n                                            'quality-control': 'ready-shipment'\r\n                                          };\r\n                                          handleMoveOrder(order, nextStatuses[column.id]);\r\n                                        }}\r\n                                        className=\"flex-1\"\r\n                                      >\r\n                                        Siguiente\r\n                                      </Button>\r\n                                    ) : (\r\n                                      (() => {\r\n                                        const orderKey = stableKey;\r\n                                        const isCompleted = !!(\r\n                                          (orderKey && localCompleted && localCompleted[orderKey]) ||\r\n                                          (order?.estadoProgreso >= 100) ||\r\n                                          (order?.progress >= 100) ||\r\n                                          (order?.progreso >= 100)\r\n                                        );\r\n\r\n                                        if (!isCompleted) {\r\n                                          // show only the Listo button until the order is marked completed\r\n                                          return (\r\n                                            <Button\r\n                                              size=\"xs\"\r\n                                              variant=\"outline\"\r\n                                              onClick={(e) => {\r\n                                                e?.stopPropagation();\r\n                                                if (!orderKey) return;\r\n                                                // optimistic mark completed\r\n                                                setLocalProgress(prev => ({ ...prev, [orderKey]: 100 }));\r\n                                                setLocalCompleted(prev => ({ ...prev, [orderKey]: true }));\r\n                                                // persist status override as final\r\n                                                setLocalStatusOverrides(prev => {\r\n                                                  const next = { ...(prev || {}) };\r\n                                                  next[orderKey] = 'ready-shipment';\r\n                                                  return next;\r\n                                                });\r\n                                                    // mark completed locally and notify parent\r\n                                                    onStatusChange?.(orderKey, 'ready-shipment', { estadoProgreso: 100, completed: true });\r\n                                              }}\r\n                                              className=\"flex-1\"\r\n                                            >\r\n                                              Listo\r\n                                            </Button>\r\n                                          );\r\n                                        }\r\n\r\n                                        // once completed, replace with Finalizar button\r\n                                        return (\r\n                                          <Button\r\n                                            size=\"xs\"\r\n                                            variant=\"ghost\"\r\n                                            onClick={(e) => {\r\n                                              e?.stopPropagation();\r\n                                              if (!orderKey) return;\r\n                                              // DEBUG: log Finalizar payload to console to trace parent matching\r\n                                              setLocalHidden(prev => ({ ...prev, [orderKey]: true }));\r\n                                              onStatusChange?.(orderKey, 'ready-shipment', { hidden: true });\r\n                                            }}\r\n                                          >\r\n                                            Finalizar\r\n                                          </Button>\r\n                                        );\r\n                                      })()\r\n                                    )}\r\n                                    <Button\r\n                                      size=\"xs\"\r\n                                      variant=\"outline\"\r\n                                      onClick={(e) => {\r\n                                        e?.stopPropagation();\r\n                                        // Handle photo evidence\r\n                                      }}\r\n                                      iconName=\"Camera\"\r\n                                    />\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default WorkflowBoard;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\nimport requisiService from '../../../services/requisiService';\r\nimport useGastos from '../../../hooks/useGastos';\r\n\r\n        \r\n\r\n  const WorkflowControls = ({ selectedOrder, currentShift, totalOrders, workOrdersIds = [], workOrders = [], onForceRemove, onRevertStatus, localMissingByOrder = {} }) => {\r\n          const isWorkingHours = currentShift === 'morning';\r\n    const { getGastos } = useGastos();\r\n          const selectedMissingPPE = Array.isArray(selectedOrder?.safetyChecklistMissing)\r\n            ? selectedOrder.safetyChecklistMissing\r\n            : (Array.isArray(selectedOrder?.raw?.safetyChecklistMissing) ? selectedOrder.raw.safetyChecklistMissing : []);\r\n          const resolvePriority = () => {\r\n            if (!selectedOrder) return '';\r\n            // direct values\r\n            const direct = selectedOrder?.prioridadLabel || selectedOrder?.prioridad || selectedOrder?.priorityValue || selectedOrder?.raw?.prioridad || selectedOrder?.raw?.priority || '';\r\n            if (direct) return direct;\r\n\r\n            // try matching related records in provided workOrders prop\r\n            try {\r\n              const candidates = [];\r\n              // possible keys on selectedOrder/raw: id, ordenTrabajo, trabajoId\r\n              if (selectedOrder?.id) candidates.push(String(selectedOrder.id));\r\n              if (selectedOrder?.ordenTrabajo) candidates.push(String(selectedOrder.ordenTrabajo));\r\n              if (selectedOrder?.raw?.trabajoId) candidates.push(String(selectedOrder.raw.trabajoId));\r\n              if (selectedOrder?.raw?.id) candidates.push(String(selectedOrder.raw.id));\r\n\r\n              for (const w of (workOrders || [])) {\r\n                if (!w) continue;\r\n                const keys = [w?.id, w?.ordenTrabajo, w?.trabajoId, (w?.raw && w.raw?.trabajoId), (w?.raw && w.raw?.id)].filter(Boolean).map(String);\r\n                if (keys.some(k => candidates.includes(k))) {\r\n                  const p = w?.prioridad || w?.prioridadLabel || w?.priority || w?.priorityLabel || (w?.raw && (w.raw.prioridad || w.raw.priority)) || '';\r\n                  if (p) return p;\r\n                }\r\n              }\r\n            } catch (e) {\r\n              // ignore\r\n            }\r\n\r\n            // last resort: use estado if it looks like a priority\r\n            try {\r\n              const estado = (selectedOrder?.raw?.estado || selectedOrder?.raw?.status || selectedOrder?.estado || selectedOrder?.status || '').toString();\r\n              if (estado) {\r\n                const low = estado.toLowerCase();\r\n                if (['alta','high','urgent','urgente','cr√≠tica','critica','media','baja','low'].some(s => low.includes(s))) return selectedOrder?.raw?.estado || estado;\r\n              }\r\n            } catch (e) {}\r\n\r\n            return '';\r\n          };\r\n\r\n          // helpers moved into component scope to avoid returning objects into JSX\r\n          const formatProgress = (p) => {\r\n            if (p === null || p === undefined || p === '') return '0%';\r\n            // Normalize into a numeric value removing non-numeric characters except dot and minus\r\n            const normalizeToNumber = (val) => {\r\n              if (typeof val === 'number') return val;\r\n              if (typeof val !== 'string') return NaN;\r\n              const s = val.trim();\r\n              // if contains percent sign, strip it but keep decimal\r\n              const cleaned = s.replace(/[^0-9.+-]/g, '');\r\n              const n = Number(cleaned);\r\n              return Number.isFinite(n) ? n : NaN;\r\n            };\r\n\r\n            const num = normalizeToNumber(p);\r\n            if (Number.isNaN(num)) return String(p);\r\n\r\n            let percent = num;\r\n            // If it's clearly a fraction (0 < num <= 1) treat as fraction\r\n            if (percent > 0 && percent <= 1) {\r\n              percent = percent * 100;\r\n            } else if (percent > 100) {\r\n              // If it's an unexpectedly large number (e.g. 1500) try dividing by 100 (common scale issues)\r\n              const maybe = percent / 100;\r\n              if (maybe > 0 && maybe <= 100) percent = maybe;\r\n              // otherwise leave as-is (will be rounded)\r\n            }\r\n            if (percent < 0) percent = 0;\r\n            if (percent > 100) percent = 100;\r\n\r\n            return `${Math.round(percent)}%`;\r\n          };\r\n\r\n          const formatDate = (v) => {\r\n            if (!v && v !== 0) return '';\r\n            try {\r\n              // If value is a plain YYYY-MM-DD string, construct a local Date to avoid timezone shifts\r\n              if (typeof v === 'string' && /^\\d{4}-\\d{2}-\\d{2}$/.test(v)) {\r\n                const [y, m, d] = v.split('-').map(Number);\r\n                const dt = new Date(y, m - 1, d); // local date\r\n                return dt.toLocaleDateString(undefined, { day: '2-digit', month: 'short', year: 'numeric' });\r\n              }\r\n              const d = (v instanceof Date) ? v : new Date(v);\r\n              if (Number.isNaN(d.getTime())) return String(v);\r\n              return d.toLocaleDateString(undefined, { day: '2-digit', month: 'short', year: 'numeric' });\r\n            } catch (e) {\r\n              return String(v);\r\n            }\r\n          };\r\n\r\n          // Generate a PDF report for the selected order.\r\n          const extractApprovedFromArray = (arr) => {\r\n            if (!Array.isArray(arr)) return [];\r\n            return arr\r\n              .filter(item => {\r\n                if (!item) return false;\r\n                const s = String(item?.status || item?.estado || item?.approved || item?.aprobado || '').toLowerCase();\r\n                if (s.includes('aprob')) return true;\r\n                if (item?.approved === true) return true;\r\n                if (item?.approvedAt || item?.approvedBy) return true;\r\n                return false;\r\n              })\r\n              .map(it => ({\r\n                name: it?.name || it?.nombre || it?.item || it?.producto || 'Material',\r\n                required: Number(it?.required ?? it?.cantidad ?? it?.total ?? it?.qty ?? 0) || 0,\r\n                received: Number(it?.received ?? it?.recibido ?? it?.have ?? 0) || 0,\r\n                raw: it\r\n              }));\r\n          };\r\n// --------------------------------------------\r\n// GENERATE PDF - DISE√ëO BONITO + DATOS COMPLETOS\r\n// --------------------------------------------\r\nconst generateReport = async () => {\r\n  if (!selectedOrder) return;\r\n\r\n  // --------------------------------------------\r\n  // CARGAR MATERIALES DESDE MATERIAL RECEPTION PANEL\r\n  // --------------------------------------------\r\n  let receptionMaterials = [];\r\n\r\n  try {\r\n    const resp = await inventoryService.getReceptionMaterials(selectedOrder?.ordenTrabajo);\r\n    if (resp?.success && Array.isArray(resp.data)) {\r\n      receptionMaterials = resp.data;\r\n      console.log(\"Materiales recepci√≥n cargados:\", receptionMaterials);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error cargando materiales recepci√≥n\", err);\r\n  }\r\n\r\n  // --------------------------------------------\r\n  // PROGRESO (DELTA) - SIN CAMBIOS\r\n  // --------------------------------------------\r\n  const normalizeKey = (v) => String(v || '').toLowerCase().replace(/[^a-z0-9]/g, '');\r\n  const onlyDigits = (v) => (String(v || '').match(/\\d+/g) || []).join('');\r\n\r\n  const computeDailyProgressDelta = () => {\r\n    try {\r\n      const raw = selectedOrder?.raw || {};\r\n      const todayKey = (d) => `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;\r\n      const today = todayKey(new Date());\r\n\r\n      const candidates = raw.progressHistory || raw.progress_logs ||\r\n                         raw.updates || raw.progressUpdates ||\r\n                         raw.progreso_historial || raw.history ||\r\n                         raw.progress_log || null;\r\n\r\n      if (Array.isArray(candidates) && candidates.length) {\r\n        const entries = candidates.map(e => {\r\n          if (typeof e === 'number') return { date: today, value: Number(e) };\r\n          if (typeof e === 'string') {\r\n            const m = e.match(/(\\d{4}-\\d{2}-\\d{2}).*?([0-9+.\\-%]+)/);\r\n            if (m) return { date: m[1], value: Number(String(m[2]).replace('%','')) };\r\n            return { date: today, value: Number(e.replace(/[^0-9.+-]/g,'')) };\r\n          }\r\n          return { date: (e.date || e.fecha || e.d) || today, value: Number(e.value ?? e.progreso ?? e.progress ?? e.porcentaje ?? 0) };\r\n        });\r\n\r\n        const todays = entries.filter(en => String(en.date).startsWith(today));\r\n        if (todays.length >= 2) return Math.round((todays.at(-1).value - todays[0].value) * 100) / 100;\r\n        if (todays.length === 1) {\r\n          const before = entries.filter(en => !String(en.date).startsWith(today)).sort((a,b)=> new Date(a.date)-new Date(b.date)).pop();\r\n          if (before) return Math.round((todays[0].value - before.value) * 100) / 100;\r\n          return Math.round((todays[0].value) * 100) / 100;\r\n        }\r\n      }\r\n      const cur = Number(selectedOrder?.progress ?? selectedOrder?.progreso ?? 0);\r\n      const prev = Number(selectedOrder?.raw?.previousProgress ?? selectedOrder?.previousProgress ?? 0);\r\n      if (!Number.isNaN(cur) && !Number.isNaN(prev)) return Math.round((cur - prev) * 100) / 100;\r\n      return null;\r\n    } catch { return null; }\r\n  };\r\n\r\n  // --------------------------------------------\r\n  // MATERIALES - AHORA USAR√Å RECEPCI√ìN\r\n  // --------------------------------------------\r\n  const buildMaterials = () => {\r\n    // 1Ô∏è‚É£ Si existen materiales de recepci√≥n, usar esos\r\n    if (Array.isArray(receptionMaterials) && receptionMaterials.length > 0) {\r\n      return receptionMaterials.map(m => {\r\n        const required = Number(m.requerido ?? m.cantidad ?? m.required ?? 0);\r\n        const received = Number(m.recibido ?? m.entregado ?? m.received ?? 0);\r\n\r\n        return {\r\n          name: m.material || m.nombre || \"Material\",\r\n          required,\r\n          received,\r\n          missing: Math.max(0, required - received)\r\n        };\r\n      });\r\n    }\r\n\r\n    // 2Ô∏è‚É£ Fallback a selectedOrder.materials (si no hubiera recepci√≥n)\r\n    const raw = selectedOrder?.materials || [];\r\n    return raw.map(it => ({\r\n      name: it.name || it.nombre || \"Material\",\r\n      required: Number(it.required ?? it.cantidad ?? 0),\r\n      received: Number(it.received ?? it.recibido ?? 0),\r\n      missing: Math.max(0, (it.required ?? 0) - (it.received ?? 0))\r\n    }));\r\n  };\r\n\r\n  // --------------------------------------------\r\n  // PDF\r\n  // --------------------------------------------\r\n  const doc = new jsPDF({ unit: \"pt\", format: \"a4\" });\r\n  const margin = 40;\r\n\r\n  // ENCABEZADO\r\n  doc.setFillColor(10, 74, 138);\r\n  doc.rect(0, 0, 595.28, 40, \"F\");\r\n  doc.setTextColor(255, 255, 255);\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(18);\r\n  doc.text(\"REPORTE DE ORDEN\", 595.28 / 2, 25, { align: \"center\" });\r\n\r\n  doc.setTextColor(\"#333\");\r\n\r\n  // T√çTULO\r\n  const title = `Orden: ${selectedOrder?.ordenTrabajo || selectedOrder?.id || \"\"}`;\r\n  doc.setFontSize(14);\r\n  doc.text(title, margin, 70);\r\n\r\n  doc.setFontSize(10);\r\n  doc.text(`Generado: ${new Date().toLocaleString()}`, margin, 88);\r\n\r\n  // --------------------------------------------\r\n  // TABLA INFO\r\n  // --------------------------------------------\r\n  const rows = [];\r\n  rows.push([\"Orden Trabajo\", String(selectedOrder?.ordenTrabajo || selectedOrder?.id || \"\")]);\r\n  rows.push([\"Cliente\", String(selectedOrder?.clientName || selectedOrder?.cliente?.nombre || \"\")]);\r\n\r\n  const progress = Number(selectedOrder?.progress ?? selectedOrder?.progreso ?? 0);\r\n  const delta = computeDailyProgressDelta();\r\n\r\n  rows.push([\"Progreso\", `${progress}%`]);\r\n  if (delta !== null) rows.push([\"Avance del d√≠a\", `${delta >= 0 ? \"+\" : \"\"}${delta}%`]);\r\n\r\n  rows.push([\"Prioridad\", selectedOrder?.prioridad || \"\"]);\r\n  rows.push([\"Fecha L√≠mite\", selectedOrder?.fechaLimite || \"-\"]);\r\n\r\n  const techs =\r\n    (Array.isArray(selectedOrder?.tecnicos)\r\n      ? selectedOrder.tecnicos\r\n      : selectedOrder?.tecnicoAsignado\r\n      ? [selectedOrder.tecnicoAsignado]\r\n      : []\r\n    )\r\n      .map(t => t?.nombre || t?.name || \"\")\r\n      .join(\", \");\r\n\r\n  rows.push([\"T√©cnicos\", techs]);\r\n  rows.push([\"Flujo Actual\", selectedOrder?.estado || selectedOrder?.status || \"\"]);\r\n\r\n  if (selectedOrder?.safetyChecklistCompleted) {\r\n    rows.push([\"Check Seguridad\", \"Completado\"]);\r\n  }\r\n\r\n  doc.autoTable({\r\n    startY: 110,\r\n    head: [[\"Campo\", \"Valor\"]],\r\n    body: rows,\r\n    theme: \"grid\",\r\n    styles: { fontSize: 10 },\r\n    headStyles: { fillColor: [10, 74, 138], textColor: 255 }\r\n  });\r\n\r\n  // --------------------------------------------\r\n  // TABLA MATERIALES (RECEPCI√ìN REAL)\r\n  // --------------------------------------------\r\n  let cursorY = doc.lastAutoTable.finalY + 20;\r\n  const materials = buildMaterials();\r\n\r\n  doc.setFont(\"helvetica\", \"bold\");\r\n  doc.setFontSize(12);\r\n  doc.text(\"Materiales Recepcionados\", margin, cursorY);\r\n\r\n  doc.autoTable({\r\n    startY: cursorY + 10,\r\n    head: [[\"Material\", \"Requerido\", \"Recibido\", \"Faltante\"]],\r\n    body: materials.map(m => [m.name, m.required, m.received, m.missing]),\r\n    theme: \"grid\",\r\n    styles: { fontSize: 9 },\r\n    headStyles: { fillColor: [10, 74, 138], textColor: 255 }\r\n  });\r\n\r\n  // --------------------------------------------\r\n  // GUARDAR PDF\r\n  // --------------------------------------------\r\n  doc.save(`Reporte_Orden_${selectedOrder?.ordenTrabajo || selectedOrder?.id || \"\"}.pdf`);\r\n};\r\n\r\n\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg p-4\">\r\n              <h3 className=\"font-medium mb-4 flex items-center space-x-2\">\r\n                <Icon name=\"Settings\" size={20} />\r\n                <span>Controles Operativos</span>\r\n              </h3>\r\n\r\n              {/* Shift Status */}\r\n              <div className=\"mb-4 p-3 bg-muted rounded-lg\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"font-medium\">Estado del Turno</div>\r\n                    <div className=\"text-sm text-muted-foreground\">8:00 - 18:00</div>\r\n                  </div>\r\n                  <div className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                    isWorkingHours \r\n                      ? 'bg-green-100 text-green-700' :'bg-red-100 text-red-700'\r\n                  }`}>\r\n                    {isWorkingHours ? 'Activo' : 'Inactivo'}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Order Summary */}\r\n              <div className=\"mb-4\">\r\n                <div className=\"text-sm text-muted-foreground mb-2\">Resumen √ìrdenes</div>\r\n                <div className=\"text-2xl font-bold\">{totalOrders}</div>\r\n                <div className=\"text-sm text-muted-foreground\">√ìrdenes activas</div>\r\n              </div>\r\n\r\n              \r\n\r\n              {/* Selected Order Info */}\r\n              {selectedOrder && (\r\n                <div className=\"mb-4 p-3 bg-primary/10 rounded-lg border border-primary/20 overflow-hidden\">\r\n                  <div className=\"font-medium mb-2 text-center\">Orden Seleccionada</div>\r\n                  <div className=\"text-sm grid grid-cols-2 gap-3\">\r\n                    {/* helpers defined in component scope: formatProgress, formatDate */}\r\n                    <div className=\"truncate\">\r\n                      <strong className=\"block\">Orden Trabajo</strong>\r\n                      <span className=\"block mt-1 font-medium\">{selectedOrder?.ordenTrabajo || selectedOrder?.id}</span>\r\n                    </div>\r\n\r\n                    <div className=\"truncate\">\r\n                      <strong className=\"block\">Progreso</strong>\r\n                      <span className=\"block mt-1\">\r\n                        {(() => {\r\n                          // Collect possible progress sources (many aliases)\r\n                          const candidates = [\r\n                            selectedOrder?.progress,\r\n                            selectedOrder?.progreso,\r\n                            selectedOrder?.raw?.progreso,\r\n                            selectedOrder?.raw?.estadoProgreso,\r\n                            selectedOrder?.raw?.progress,\r\n                            selectedOrder?.raw?.estado,\r\n                            selectedOrder?.raw?.porcentaje,\r\n                            selectedOrder?.porcentaje,\r\n                          ].filter(v => v !== undefined && v !== null);\r\n\r\n                          // normalize helper (reuse logic similar to formatProgress but return numeric percent)\r\n                          const normalizeNumericPercent = (val) => {\r\n                            if (val === null || val === undefined || val === '') return NaN;\r\n                            const s = (typeof val === 'string') ? val.trim() : String(val);\r\n                            // strip non numeric except dot and minus\r\n                            const cleaned = s.replace(/[^0-9.+-]/g, '');\r\n                            const n = Number(cleaned);\r\n                            if (Number.isNaN(n)) return NaN;\r\n                            let num = n;\r\n                            if (num > 0 && num <= 1) num = num * 100;\r\n                            else if (num > 100) {\r\n                              const maybe = num / 100;\r\n                              if (maybe > 0 && maybe <= 100) num = maybe;\r\n                            }\r\n                            if (num < 0) num = 0;\r\n                            if (num > 100) num = 100;\r\n                            return num;\r\n                          };\r\n\r\n                          let best = NaN;\r\n                          for (const c of candidates) {\r\n                            const n = normalizeNumericPercent(c);\r\n                            if (Number.isNaN(n)) continue;\r\n                            // prefer values that look like whole percentages (>=1)\r\n                            if (n >= 1 && (Number.isNaN(best) || n > best)) {\r\n                              best = n; // pick the largest clear percentage\r\n                            } else if (Number.isNaN(best)) {\r\n                              best = n;\r\n                            }\r\n                          }\r\n\r\n                          // fallback to any available raw if none normalized\r\n                          const fallback = candidates.length ? candidates[0] : null;\r\n\r\n                          if (!Number.isNaN(best)) return formatProgress(best);\r\n                          if (fallback !== null && fallback !== undefined) return formatProgress(fallback);\r\n                          return '0%';\r\n                        })()}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"col-span-2\">\r\n                      <strong className=\"block\">Cliente</strong>\r\n                      <span className=\"block mt-1 break-words\">{selectedOrder?.clientName || selectedOrder?.clientLabel || (selectedOrder?.cliente && (selectedOrder.cliente.nombre || selectedOrder.cliente)) || ''}</span>\r\n                    </div>\r\n\r\n                    <div className=\"col-span-2\">\r\n                      <strong className=\"block\">Proyecto</strong>\r\n                      <span className=\"block mt-1 break-words\">\r\n                        {(\r\n                          selectedOrder?.projectRef ||\r\n                          selectedOrder?.proyectoNombre ||\r\n                          selectedOrder?.raw?.proyecto ||\r\n                          selectedOrder?.raw?.projectName ||\r\n                          selectedOrder?.raw?.project ||\r\n                          selectedOrder?.project?.name ||\r\n                          selectedOrder?.project?.nombre ||\r\n                          ''\r\n                        )}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div className=\"truncate\">\r\n                      <strong className=\"block\">Prioridad</strong>\r\n                      <span className=\"block mt-1\">{(resolvePriority()) || selectedOrder?.raw?.prioridad || selectedOrder?.raw?.estado || selectedOrder?.estado || ''}</span>\r\n                    </div>\r\n\r\n                    <div className=\"truncate\">\r\n                      <strong className=\"block\">Fecha l√≠mite</strong>\r\n                      <span className=\"block mt-1\">\r\n                        {(() => {\r\n                          const rawDate = selectedOrder?.fechaLimite || selectedOrder?.estimatedCompletion || selectedOrder?.proyectoFecha || selectedOrder?.raw?.fechaLimite || selectedOrder?.raw?.fecha || selectedOrder?.raw?.estimatedCompletion || selectedOrder?.raw?.fechaEstimada || '';\r\n                          try {\r\n                            return formatDate(rawDate);\r\n                          } catch (e) {\r\n                            return rawDate || '';\r\n                          }\r\n                        })()}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* Materiales - recibidos y faltantes */}\r\n                    <div className=\"col-span-2 mt-1\">\r\n                      <strong className=\"block mb-1\">Materiales</strong>\r\n                      {(() => {\r\n                        const reception = selectedOrder?.recepcionMateriales || selectedOrder?.raw?.recepcionMateriales || { materials: [] };\r\n                        const materials = selectedOrder?.materials;\r\n                        \r\n                        // Calcular totales desde recepcionMateriales si existen\r\n                        const totalReceived = reception?.materials?.reduce((sum, m) => sum + (Number(m.received) || 0), 0) || reception?.cantidadRecibida || reception?.received || materials?.received || 0;\r\n                        const totalRequired = reception?.materials?.reduce((sum, m) => sum + (Number(m.required) || 0), 0) || materials?.total || 0;\r\n                        const totalPending = Math.max(0, totalRequired - totalReceived);\r\n                        \r\n                        return (\r\n                          <div className=\"flex items-center gap-2 text-sm\">\r\n                            <span className=\"text-green-600 font-semibold\">{totalReceived}</span>\r\n                            <span className=\"text-muted-foreground\">/</span>\r\n                            <span className=\"font-semibold\">{totalRequired}</span>\r\n                            {totalPending > 0 && (\r\n                              <>\r\n                                <span className=\"text-muted-foreground\">‚Ä¢</span>\r\n                                <span className=\"text-orange-600 font-medium flex items-center gap-1\">\r\n                                  <Icon name=\"AlertCircle\" size={14} />\r\n                                  {totalPending} faltantes\r\n                                </span>\r\n                              </>\r\n                            )}\r\n                          </div>\r\n                        );\r\n                      })()}\r\n                    </div>\r\n\r\n                    {/* T√©cnicos ocupa toda la fila en caso de necesitar m√°s espacio */}\r\n                    {(() => {\r\n                      const fromSelected = (selectedOrder?.assignedTechnicians || selectedOrder?.tecnicoAsignado || selectedOrder?.tecnicos || []);\r\n                      let techArray = Array.isArray(fromSelected) ? fromSelected : (fromSelected ? [fromSelected] : []);\r\n                      if (!techArray.length && selectedOrder?.raw) {\r\n                        const rawTech = selectedOrder.raw.tecnicoAsignado || selectedOrder.raw.tecnicos || selectedOrder.raw.assignedTechnicians || null;\r\n                        if (rawTech) techArray = Array.isArray(rawTech) ? rawTech : [rawTech];\r\n                      }\r\n                      if (!techArray.length) return null;\r\n                      const names = techArray.map(t => (t?.name || t?.nombre || (typeof t === 'string' ? t : ''))).filter(Boolean);\r\n                      if (!names.length) return null;\r\n                      return (\r\n                        <div className=\"truncate col-span-2 mt-1\">\r\n                          <strong className=\"block\">T√©cnicos</strong>\r\n                          <span className=\"block mt-1\">{names.join(', ')}</span>\r\n                        </div>\r\n                      );\r\n                    })()}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Quick Actions */}\r\n              <div className=\"space-y-2\">\r\n                {selectedOrder && (\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"outline\"\r\n                    className=\"w-full\"\r\n                    iconName=\"RefreshCw\"\r\n                    onClick={() => onRevertStatus?.(selectedOrder)}\r\n                  >\r\n                    Regresar progreso\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  className=\"w-full\"\r\n                  iconName=\"FileText\"\r\n                  onClick={async () => {\r\n                    try {\r\n                      await generateReport();\r\n                    } catch (e) {\r\n                      // fallback: no-op\r\n                    }\r\n                  }}\r\n                >\r\n                  Generar Reporte\r\n                </Button>\r\n                \r\n                \r\n              </div>\r\n\r\n              {/* Working Hours Reminder */}\r\n              {!isWorkingHours && (\r\n                <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n                  <div className=\"flex items-start space-x-2\">\r\n                    <Icon name=\"AlertTriangle\" size={16} className=\"text-yellow-600 mt-0.5\" />\r\n                    <div className=\"text-sm\">\r\n                      <div className=\"font-medium text-yellow-800\">Fuera de Horario</div>\r\n                      <div className=\"text-yellow-700\">\r\n                        Turno de trabajo: 8:00 - 18:00\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default WorkflowControls;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport requisiService from '../../../services/requisiService';\r\nimport useGastos from '../../../hooks/useGastos';\r\nimport useOperacAlt from '../../../hooks/useOperacAlt';\r\n\r\nconst MaterialReceptionPanel = ({ workOrders = [], onMaterialReception, selectedOrder: propSelectedOrder }) => {\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [receptionData, setReceptionData] = useState({ received: 0, notes: '', issues: [] });\r\n  const [newIssue, setNewIssue] = useState('');\r\n  const [approvedMaterials, setApprovedMaterials] = useState([]);\r\n  const [approvedSource, setApprovedSource] = useState('');\r\n  const [materialsReception, setMaterialsReception] = useState([]);\r\n  const [orderMaterialsCache, setOrderMaterialsCache] = useState({});\r\n  const { getGastos } = useGastos();\r\n  const { updateWorkOrder } = useOperacAlt();\r\n\r\n  // Persist approved materials per-order to localStorage (taller) so previews survive reloads\r\n  const TALLER_PREFIX = 'wb_taller_approved_';\r\n  const TALLER_RECEIVED_PREFIX = 'wb_taller_received_';\r\n  const saveApprovedToTaller = (orderKey, materials, source) => {\r\n    try {\r\n      if (!orderKey) return;\r\n      const payload = { materials, source, updatedAt: Date.now() };\r\n      localStorage.setItem(`${TALLER_PREFIX}${orderKey}`, JSON.stringify(payload));\r\n    } catch (e) { /* ignore storage errors */ }\r\n  };\r\n\r\n  const loadApprovedFromTaller = (orderKey) => {\r\n    try {\r\n      if (!orderKey) return null;\r\n      const raw = localStorage.getItem(`${TALLER_PREFIX}${orderKey}`);\r\n      if (!raw) return null;\r\n      try {\r\n        const parsed = JSON.parse(raw);\r\n        return parsed;\r\n      } catch (e) { return null; }\r\n    } catch (e) { return null; }\r\n  };\r\n\r\n  const saveReceptionToTaller = (orderKey, receptionPayload) => {\r\n    try {\r\n      if (!orderKey) return;\r\n      localStorage.setItem(`${TALLER_RECEIVED_PREFIX}${orderKey}`, JSON.stringify({ ...receptionPayload, updatedAt: Date.now() }));\r\n    } catch (e) {}\r\n  };\r\n\r\n  const loadReceptionFromTaller = (orderKey) => {\r\n    try {\r\n      if (!orderKey) return null;\r\n      const raw = localStorage.getItem(`${TALLER_RECEIVED_PREFIX}${orderKey}`);\r\n      if (!raw) return null;\r\n      return JSON.parse(raw);\r\n    } catch (e) { return null; }\r\n  };\r\n\r\n  const normalizeMaterialsForCache = (materials) => {\r\n    if (!Array.isArray(materials)) return [];\r\n    if (materials.length === 0) return [];\r\n    const first = materials[0];\r\n    // If items are in the approved-flag heuristic shape (name/required/received), map to article-like shape\r\n    if (first && (first.required !== undefined || first.received !== undefined) && !first.codigo && !first.descripcion) {\r\n      return materials.map(it => ({\r\n        codigo: it?.codigo || '',\r\n        descripcion: it?.name || it?.nombre || it?.descripcion || 'Sin descripci√≥n',\r\n        cantidad: Number(it?.required ?? 0),\r\n        cantidadConUnidad: `${Number(it?.required ?? 0)}`,\r\n        raw: it\r\n      }));\r\n    }\r\n    // otherwise normalize/aggregate into canonical shape\r\n    return normalizeAndAggregate(materials);\r\n  };\r\n\r\n  const initMaterialsReception = (materials, persisted = null) => {\r\n    if (!Array.isArray(materials)) return [];\r\n    return materials.map((m, idx) => {\r\n      const key = (m.codigo || m.descripcion || m.descripcion || (`_${idx}`)).toString();\r\n      const required = Number(m.cantidad ?? m.required ?? m.qty ?? 0) || 0;\r\n      const persistedEntry = persisted && Array.isArray(persisted?.materials) ? persisted.materials.find(p => (p.codigo || p.descripcion) === (m.codigo || m.descripcion)) : null;\r\n      const received = persistedEntry ? Number(persistedEntry.received || 0) : 0;\r\n      return {\r\n        key,\r\n        codigo: m.codigo || null,\r\n        descripcion: m.descripcion || m.nombre || m.name || '',\r\n        required,\r\n        received,\r\n        missing: Math.max(0, required - received),\r\n        raw: m.raw || m\r\n      };\r\n    });\r\n  };\r\n\r\n  const setCacheAndPersist = (orderKey, materials, source) => {\r\n    if (!orderKey) return;\r\n    const normalized = normalizeMaterialsForCache(materials);\r\n    setOrderMaterialsCache(prev => ({ ...prev, [orderKey]: { materials: normalized, source } }));\r\n    saveApprovedToTaller(orderKey, normalized, source);\r\n  };\r\n\r\n  // Utility to summarize materials for logging\r\n  const summarizeMaterials = (materials) => {\r\n    if (!Array.isArray(materials)) return [];\r\n    return materials.map(m => ({ codigo: m?.codigo || m?.id || null, descripcion: m?.descripcion || m?.nombre || m?.name || null, cantidad: m?.cantidad ?? m?.required ?? m?.qty ?? null }));\r\n  };\r\n\r\n\r\n\r\n  // On workOrders change, preload any persisted taller materials so previews are instant\r\n  useEffect(() => {\r\n    if (!Array.isArray(workOrders) || workOrders.length === 0) return;\r\n    const initial = {};\r\n    for (const order of workOrders) {\r\n      const orderKey = order?.ordenTrabajo || order?.id || order?.folio || '';\r\n      if (!orderKey) continue;\r\n      // if we already have cache, skip\r\n      if (orderMaterialsCache[orderKey]) continue;\r\n      const payload = loadApprovedFromTaller(orderKey);\r\n      if (payload && Array.isArray(payload.materials)) {\r\n        initial[orderKey] = { materials: payload.materials, source: payload.source || 'taller' };\r\n      }\r\n    }\r\n    if (Object.keys(initial).length) {\r\n      setOrderMaterialsCache(prev => ({ ...initial, ...prev }));\r\n    }\r\n  }, [workOrders]);\r\n\r\n  const handleOrderSelect = (order) => {\r\n    setSelectedOrder(order);\r\n    setReceptionData({\r\n      received: order?.materials?.received || 0,\r\n      notes: '',\r\n      issues: order?.materials?.issues || []\r\n    });\r\n    setApprovedSource('');\r\n    // Always load materials for the selected order\r\n    computeApprovedMaterialsFromOrder(order, true);\r\n  };\r\n\r\n  const handleForceSearch = async () => {\r\n    // allow user to force a search by selectedOrder or by manual key\r\n    const orderKey = selectedOrder ? (selectedOrder?.ordenTrabajo || selectedOrder?.id || selectedOrder?.folio || (selectedOrder?.raw && (selectedOrder.raw.id || selectedOrder.raw.numeroOrdenTrabajo))) : window.prompt('Introduce clave de orden (ej. OT-2025-13 o PO-...)');\r\n    if (!orderKey) return;\r\n    console.debug('[MaterialReceptionPanel] force search for key', orderKey);\r\n    const fakeOrder = { ordenTrabajo: orderKey, id: orderKey, folio: orderKey, raw: { id: orderKey, numeroOrdenTrabajo: orderKey } };\r\n    // run the same computation path\r\n    await computeApprovedMaterialsFromOrder(fakeOrder);\r\n    setApprovedSource(prev => prev ? `${prev}|force` : 'force');\r\n  };\r\n\r\n  // heuristics to identify approved items from various shapes\r\n  const extractApprovedFromArray = (arr) => {\r\n    if (!Array.isArray(arr)) return [];\r\n    return arr\r\n      .filter(item => {\r\n        if (!item) return false;\r\n        const s = String(item?.status || item?.estado || item?.approved || item?.aprobado || '').toLowerCase();\r\n        if (s.includes('aprob')) return true;\r\n        if (item?.approved === true) return true;\r\n        if (item?.approvedAt || item?.approvedBy) return true;\r\n        return false;\r\n      })\r\n      .map(it => ({\r\n        name: it?.name || it?.nombre || it?.item || it?.producto || 'Material',\r\n        required: Number(it?.required ?? it?.cantidad ?? it?.total ?? it?.qty ?? 0) || 0,\r\n        received: Number(it?.received ?? it?.recibido ?? it?.have ?? 0) || 0,\r\n        raw: it\r\n      }));\r\n  };\r\n\r\n  const computeApprovedMaterialsFromOrder = async (order, updateCache = true) => {\r\n    // Clean, easier-to-follow implementation with explicit try/catch blocks\r\n    if (!order) {\r\n      setApprovedMaterials([]);\r\n      return [];\r\n    }\r\n\r\n    const orderKey = order?.ordenTrabajo || order?.id || order?.folio || order?.raw?.id || '';\r\n\r\n    // Check cache first for performance\r\n    if (orderKey && orderMaterialsCache[orderKey] && !updateCache) {\r\n      const cached = orderMaterialsCache[orderKey];\r\n      setApprovedMaterials(cached.materials);\r\n      setApprovedSource(cached.source);\r\n      const persisted = loadReceptionFromTaller(orderKey);\r\n      setMaterialsReception(initMaterialsReception(cached.materials, persisted));\r\n      return cached.materials;\r\n    }\r\n\r\n    // Gather local candidate arrays to detect any already-approved items\r\n    const candidates = [];\r\n    if (Array.isArray(order?.materials)) candidates.push(...order.materials);\r\n    if (Array.isArray(order?.raw?.materiales)) candidates.push(...order.raw.materiales);\r\n    if (Array.isArray(order?.raw?.materials)) candidates.push(...order.raw.materials);\r\n\r\n    const approvedLocal = extractApprovedFromArray(candidates);\r\n    if (approvedLocal.length) {\r\n      const result = approvedLocal;\r\n      setApprovedMaterials(result);\r\n      setApprovedSource('local');\r\n      // initialize reception entries (load persisted reception if any)\r\n      const persisted = loadReceptionFromTaller(orderKey);\r\n      setMaterialsReception(initMaterialsReception(result, persisted));\r\n      if (updateCache && orderKey) setCacheAndPersist(orderKey, result, 'local');\r\n      return result;\r\n    }\r\n\r\n    // If the order contains manually added materials (materialesManuales), map them to article shape and show\r\n    if (Array.isArray(order?.materialesManuales) && order.materialesManuales.length) {\r\n      console.debug('[MaterialReceptionPanel] using materialesManuales from order', order.materialesManuales.length);\r\n      const manualMapped = order.materialesManuales.map(it => ({\r\n        codigo: it?.id || it?.codigo || '',\r\n        descripcion: it?.nombreMaterial || it?.descripcionEspecificaciones || it?.nombre || it?.descripcion || it?.item || 'Material manual',\r\n        cantidadConUnidad: `${Number(it?.cantidad ?? 0)}${it?.unidad ? ` ${it.unidad}` : ''}`,\r\n        cantidad: Number(it?.cantidad ?? 0),\r\n        unidad: it?.unidad || '',\r\n        raw: it\r\n      }));\r\n      const result = normalizeAndAggregate(manualMapped);\r\n      setApprovedMaterials(result);\r\n      setApprovedSource('local-manuales');\r\n      const persisted = loadReceptionFromTaller(orderKey);\r\n      setMaterialsReception(initMaterialsReception(result, persisted));\r\n      if (updateCache && orderKey) setCacheAndPersist(orderKey, result, 'local-manuales');\r\n      return result;\r\n    }\r\n\r\n    if (!orderKey) {\r\n      console.debug('[MaterialReceptionPanel] no orderKey found for order', order);\r\n      setApprovedMaterials([]);\r\n      return [];\r\n    }\r\n\r\n    // Helpers\r\n    const normalizeKey = (v) => String(v || '').toLowerCase().replace(/[^a-z0-9]/g, '');\r\n    const onlyDigits = (v) => (String(v || '').match(/\\d+/g) || []).join('');\r\n\r\n    // 1) Try requisitions\r\n    try {\r\n      console.debug('[MaterialReceptionPanel] querying requisitions for', orderKey);\r\n      const resp = await requisiService.getRequisitions({ numeroOrdenTrabajo: orderKey });\r\n      console.debug('[MaterialReceptionPanel] requisitions response', resp?.data?.length ?? 0);\r\n\r\n      if (resp?.success && Array.isArray(resp.data) && resp.data.length) {\r\n        const nor = normalizeKey(orderKey);\r\n        const nd = onlyDigits(orderKey);\r\n        const matchedReqs = resp.data.filter(req => {\r\n          try {\r\n            const keys = [req?.numeroOrdenTrabajo, req?.ordenTrabajo, req?.folio, req?.id, req?.referencia].filter(Boolean).map(String);\r\n            return keys.some(k => {\r\n              const nk = normalizeKey(k);\r\n              const kd = onlyDigits(k);\r\n              if (nk && nor && (nk.includes(nor) || nor.includes(nk))) return true;\r\n              if (kd && nd && kd === nd) return true;\r\n              if (String(k).toLowerCase().includes(String(orderKey).toLowerCase()) || String(orderKey).toLowerCase().includes(String(k).toLowerCase())) return true;\r\n              return false;\r\n            });\r\n          } catch (err) { return false; }\r\n        });\r\n\r\n        console.debug('[MaterialReceptionPanel] matched requisitions count', matchedReqs.length);\r\n        if (matchedReqs.length) {\r\n          const mats = [];\r\n          matchedReqs.forEach(req => {\r\n            const list = Array.isArray(req.materiales) ? req.materiales : (Array.isArray(req.items) ? req.items : []);\r\n            list.forEach(it => mats.push(it));\r\n          });\r\n\r\n          console.debug('[MaterialReceptionPanel] matched requisitions materials count', mats.length);\r\n          if (mats.length) {\r\n            const first = mats[0];\r\n            // If items already have article-like fields, normalize directly\r\n            if (first && (first.codigo || first.descripcion || first.costoUnitario || first.cantidadConUnidad || first.nombre)) {\r\n              const result = normalizeAndAggregate(mats);\r\n              setApprovedMaterials(result);\r\n              setApprovedSource('requisitions-articulos');\r\n              const persisted = loadReceptionFromTaller(orderKey);\r\n              setMaterialsReception(initMaterialsReception(result, persisted));\r\n              if (updateCache && orderKey) setCacheAndPersist(orderKey, result, 'requisitions-articulos');\r\n              return result;\r\n            }\r\n\r\n            // Map generic shapes to article shape\r\n            const mapped = mats.map(it => ({\r\n              codigo: it.id || it.codigo || '',\r\n              descripcion: it.nombre || it.descripcion || it.nombreMaterial || it.producto || it.name || it.item || 'Material sin nombre',\r\n              cantidadConUnidad: `${Number(it.cantidad ?? it.qty ?? it.required ?? 0)}${it.unidad ? ` ${it.unidad}` : ''}`,\r\n              cantidad: Number(it.cantidad ?? it.qty ?? it.required ?? 0),\r\n              unidad: it.unidad || it.unidadMedida || '',\r\n              costoUnitario: it.costoUnitario || it.precioUnitario || it.unitPrice,\r\n              subtotal: it.subtotal,\r\n              raw: it\r\n            }));\r\n\r\n            if (mapped.length) {\r\n              const result = normalizeAndAggregate(mapped);\r\n              setApprovedMaterials(result);\r\n              setApprovedSource('requisitions-materiales');\r\n              const persisted = loadReceptionFromTaller(orderKey);\r\n              setMaterialsReception(initMaterialsReception(result, persisted));\r\n              if (updateCache && orderKey) setCacheAndPersist(orderKey, result, 'requisitions-materiales');\r\n              return result;\r\n            }\r\n          }\r\n\r\n          // As a last resort in requisitions, try approved-flag heuristic across matched requisitions\r\n          const approvedFromReq = [];\r\n          matchedReqs.forEach(req => {\r\n            const list = Array.isArray(req.materiales) ? req.materiales : (Array.isArray(req.items) ? req.items : []);\r\n            approvedFromReq.push(...extractApprovedFromArray(list));\r\n          });\r\n          if (approvedFromReq.length) {\r\n            setApprovedMaterials(approvedFromReq);\r\n            setApprovedSource('requisitions-heuristic');\r\n            const persisted = loadReceptionFromTaller(orderKey);\r\n            setMaterialsReception(initMaterialsReception(approvedFromReq, persisted));\r\n            if (updateCache && orderKey) setCacheAndPersist(orderKey, approvedFromReq, 'requisitions-heuristic');\r\n            return approvedFromReq;\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('[MaterialReceptionPanel] requisitions fetch failed', e?.message || e);\r\n    }\r\n\r\n    // 2) Fallback to gastos (purchase orders)\r\n    try {\r\n      console.debug('[MaterialReceptionPanel] querying gastos via getGastos for orderKey', orderKey);\r\n      const gresp = await getGastos();\r\n      const list = Array.isArray(gresp) ? gresp : (gresp?.items || gresp?.data || []);\r\n      console.debug('[MaterialReceptionPanel] getGastos response length', Array.isArray(list) ? list.length : 0);\r\n\r\n      if (Array.isArray(list) && list.length) {\r\n        const nor = normalizeKey(orderKey);\r\n        const nd = onlyDigits(orderKey);\r\n        const matches = list.filter(po => {\r\n          try {\r\n            const keys = [po?.numeroOrdenTrabajo, po?.orderNumber, po?.numero, po?.folio, po?.id, po?.ordenTrabajo, po?.numeroOrdenCompra].filter(Boolean).map(String);\r\n            return keys.some(k => {\r\n              const nk = normalizeKey(k);\r\n              const kd = onlyDigits(k);\r\n              if (!nk && !kd) return false;\r\n              if (nk && nor && (nk.includes(nor) || nor.includes(nk))) return true;\r\n              if (kd && nd && kd === nd) return true;\r\n              if (String(orderKey).toLowerCase().includes(String(k).toLowerCase()) || String(k).toLowerCase().includes(String(orderKey).toLowerCase())) return true;\r\n              return false;\r\n            });\r\n          } catch (err) { return false; }\r\n        });\r\n\r\n        console.debug('[MaterialReceptionPanel] gastos matches count', matches.length);\r\n        if (matches.length) {\r\n          const articles = [];\r\n          matches.forEach(m => {\r\n            const items = Array.isArray(m.articulos) ? m.articulos : (Array.isArray(m.materiales) ? m.materiales : (Array.isArray(m.items) ? m.items : []));\r\n            items.forEach(it => articles.push(it));\r\n          });\r\n\r\n          console.debug('[MaterialReceptionPanel] extracted articles count', articles.length);\r\n          if (articles.length) {\r\n            const res = normalizeAndAggregate(articles);\r\n            setApprovedMaterials(res);\r\n            setApprovedSource('gastos-articulos');\r\n            const persisted = loadReceptionFromTaller(orderKey);\r\n            setMaterialsReception(initMaterialsReception(res, persisted));\r\n            if (updateCache && orderKey) setCacheAndPersist(orderKey, res, 'gastos-articulos');\r\n            return res;\r\n          }\r\n\r\n          // try approved-flag heuristic in gastos\r\n          const approvedFromGastos = [];\r\n          matches.forEach(m => {\r\n            const items = Array.isArray(m.materiales) ? m.materiales : (Array.isArray(m.items) ? m.items : []);\r\n            approvedFromGastos.push(...extractApprovedFromArray(items));\r\n          });\r\n          if (approvedFromGastos.length) {\r\n            setApprovedMaterials(approvedFromGastos);\r\n            setApprovedSource('gastos-heuristic');\r\n            const persisted = loadReceptionFromTaller(orderKey);\r\n            setMaterialsReception(initMaterialsReception(approvedFromGastos, persisted));\r\n            if (updateCache && orderKey) setCacheAndPersist(orderKey, approvedFromGastos, 'gastos-heuristic');\r\n            return approvedFromGastos;\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('[MaterialReceptionPanel] getGastos fetch failed', e?.message || e);\r\n    }\r\n\r\n    // No materials found\r\n    setApprovedMaterials([]);\r\n    setApprovedSource('none');\r\n    if (updateCache && orderKey) setCacheAndPersist(orderKey, [], 'none');\r\n    return [];\r\n  };\r\n\r\n  // Load approved materials for all work orders on mount to show previews\r\n  useEffect(() => {\r\n    const loadMaterialsForAllOrders = async () => {\r\n      for (const order of workOrders) {\r\n        const orderKey = order?.ordenTrabajo || order?.id || order?.folio || '';\r\n        if (orderKey && !orderMaterialsCache[orderKey]) {\r\n          try {\r\n            await computeApprovedMaterialsFromOrder(order, true);\r\n          } catch (e) {\r\n            console.warn('[MaterialReceptionPanel] Failed to load materials for order', orderKey, e);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    if (workOrders.length > 0) {\r\n      loadMaterialsForAllOrders();\r\n    }\r\n  }, [workOrders, orderMaterialsCache]);\r\n\r\n  // If a selected order is provided by the parent (from WorkflowBoard), load it into the panel\r\n  useEffect(() => {\r\n    const handleOrderChange = async () => {\r\n      if (!propSelectedOrder) {\r\n        // Clear materials when no order is selected\r\n        setSelectedOrder(null);\r\n        setApprovedMaterials([]);\r\n        setApprovedSource('');\r\n        return;\r\n      }\r\n      \r\n      const incomingKey = propSelectedOrder?.id || propSelectedOrder?.ordenTrabajo || propSelectedOrder?.folio || '';\r\n      if (!incomingKey) return;\r\n      \r\n      const currentKey = selectedOrder?.id || selectedOrder?.ordenTrabajo || selectedOrder?.folio || '';\r\n      \r\n      // Always process if keys are different or if no current order\r\n      if (String(currentKey) !== String(incomingKey) || !selectedOrder) {\r\n        // Clear current materials first\r\n        setApprovedMaterials([]);\r\n        setApprovedSource('');\r\n        \r\n        // Set the selected order\r\n        setSelectedOrder(propSelectedOrder);\r\n        \r\n        // Load existing reception data from database (recepcionMateriales field) or localStorage\r\n        // Los datos pueden estar en propSelectedOrder.recepcionMateriales O en propSelectedOrder.raw.recepcionMateriales\r\n        const dbReception = propSelectedOrder?.recepcionMateriales || propSelectedOrder?.raw?.recepcionMateriales;\r\n        const localReception = loadReceptionFromTaller(incomingKey);\r\n        \r\n        // Prefer database data over localStorage\r\n        const existingReception = dbReception || localReception;\r\n        \r\n        if (existingReception) {\r\n          // Soportar ambos formatos: nuevos nombres (cantidadRecibida) y antiguos (received)\r\n          const receivedValue = existingReception?.cantidadRecibida ?? existingReception?.received ?? 0;\r\n          const notesValue = existingReception?.notasAdicionales ?? existingReception?.notes ?? '';\r\n          const issuesValue = existingReception?.problemasFaltantes ?? existingReception?.issues ?? [];\r\n          \r\n          setReceptionData({\r\n            received: receivedValue,\r\n            notes: notesValue,\r\n            issues: Array.isArray(issuesValue) ? issuesValue : []\r\n          });\r\n          \r\n          // Load existing materials reception data\r\n          if (Array.isArray(existingReception?.materials) && existingReception.materials.length > 0) {\r\n            setMaterialsReception(existingReception.materials);\r\n          }\r\n        } else {\r\n          // No existing reception, use defaults\r\n          setReceptionData({\r\n            received: propSelectedOrder?.materials?.received || 0,\r\n            notes: '',\r\n            issues: propSelectedOrder?.materials?.issues || []\r\n          });\r\n        }\r\n        \r\n        // Force load fresh materials for this specific order ONLY if there's no saved reception data\r\n        // If there's saved reception with materials, we already loaded them above\r\n        if (!existingReception || !existingReception.materials || existingReception.materials.length === 0) {\r\n          try {\r\n            // Force cache/persist when loading a selected order so taller previews update automatically\r\n            await computeApprovedMaterialsFromOrder(propSelectedOrder, true);\r\n          } catch (e) {\r\n            console.warn('[MaterialReceptionPanel] Failed to load materials for selected order', incomingKey, e);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    \r\n    handleOrderChange();\r\n  }, [propSelectedOrder?.id, propSelectedOrder?.ordenTrabajo, propSelectedOrder?.folio]);\r\n\r\n  const handleAddIssue = () => {\r\n    if (newIssue?.trim()) {\r\n      setReceptionData(prev => ({ ...prev, issues: [...prev?.issues, newIssue?.trim()] }));\r\n      setNewIssue('');\r\n    }\r\n  };\r\n\r\n  const handleMaterialReceivedChange = (key, value) => {\r\n    setMaterialsReception(prev => {\r\n      const updated = prev.map(m => {\r\n        if (m.key !== key) return m;\r\n        const received = Number(isNaN(Number(value)) ? 0 : Number(value));\r\n        return { ...m, received, missing: Math.max(0, (Number(m.required) || 0) - received) };\r\n      });\r\n      // persist draft reception for this order\r\n      try {\r\n        const orderKey = selectedOrder ? (selectedOrder?.ordenTrabajo || selectedOrder?.id || selectedOrder?.folio || '') : '';\r\n        if (orderKey) saveReceptionToTaller(orderKey, { materials: updated, notes: receptionData?.notes, issues: receptionData?.issues });\r\n      } catch (e) {}\r\n      // also update total received in receptionData\r\n      try {\r\n        const totalReceived = updated.reduce((s, it) => s + (Number(it.received) || 0), 0);\r\n        setReceptionData(prev => ({ ...prev, received: totalReceived }));\r\n      } catch (e) {}\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  const handleRemoveIssue = (index) => {\r\n    setReceptionData(prev => ({ ...prev, issues: prev?.issues?.filter((_, i) => i !== index) }));\r\n  };\r\n\r\n  const handleSubmitReception = async () => {\r\n    if (selectedOrder) {\r\n      const orderKey = selectedOrder?.ordenTrabajo || selectedOrder?.id || selectedOrder?.folio || '';\r\n      const orderId = selectedOrder?.id;\r\n      \r\n      // Calcular total de pendientes (missing) sumando todos los materiales\r\n      const pendientes = materialsReception.reduce((sum, material) => {\r\n        return sum + (material.missing || 0);\r\n      }, 0);\r\n      \r\n      const status = receptionData?.received >= (selectedOrder?.materials?.total || 0) ? 'complete' : 'partial';\r\n      \r\n      // Build complete payload with all reception details\r\n      const receptionPayload = {\r\n        ...receptionData,\r\n        status,\r\n        materials: materialsReception,\r\n        orderKey,\r\n        pendientes,\r\n        orderData: {\r\n          ordenTrabajo: selectedOrder?.ordenTrabajo,\r\n          cliente: selectedOrder?.cliente,\r\n          proyecto: selectedOrder?.proyecto,\r\n          total: selectedOrder?.materials?.total\r\n        },\r\n        registeredAt: Date.now(),\r\n        updatedAt: Date.now()\r\n      };\r\n      \r\n      // Save to taller localStorage (allows updates)\r\n      try { \r\n        if (orderKey) {\r\n          saveReceptionToTaller(orderKey, receptionPayload);\r\n        }\r\n      } catch(e) {\r\n        console.error('[MaterialReceptionPanel] Error guardando recepci√≥n localStorage:', e);\r\n      }\r\n      \r\n      // Save to database using useOperacAlt\r\n      try {\r\n        if (orderId) {\r\n          const dbPayload = {\r\n            recepcionMateriales: {\r\n              // Guardar con ambos formatos para compatibilidad\r\n              received: receptionData.received,\r\n              cantidadRecibida: receptionData.received,\r\n              notes: receptionData.notes,\r\n              notasAdicionales: receptionData.notes,\r\n              issues: receptionData.issues,\r\n              problemasFaltantes: receptionData.issues,\r\n              pendientes: pendientes,\r\n              totalPendientes: pendientes,\r\n              status,\r\n              materials: materialsReception,\r\n              updatedAt: new Date().toISOString()\r\n            }\r\n          };\r\n          \r\n          const result = await updateWorkOrder(orderId, dbPayload);\r\n          \r\n          if (result) {\r\n            // Actualizar selectedOrder localmente con los datos guardados para que se muestren inmediatamente\r\n            setSelectedOrder(prev => ({\r\n              ...prev,\r\n              recepcionMateriales: dbPayload.recepcionMateriales\r\n            }));\r\n          } else {\r\n            console.error('[MaterialReceptionPanel] Error al guardar en BD');\r\n          }\r\n        }\r\n      } catch(e) {\r\n        console.error('[MaterialReceptionPanel] Error guardando recepci√≥n en BD:', e);\r\n      }\r\n      \r\n      // Notify parent component with complete payload including recepcionMateriales\r\n      onMaterialReception?.(selectedOrder?.id, {\r\n        ...receptionPayload,\r\n        recepcionMateriales: {\r\n          received: receptionData.received,\r\n          cantidadRecibida: receptionData.received,\r\n          notes: receptionData.notes,\r\n          notasAdicionales: receptionData.notes,\r\n          issues: receptionData.issues,\r\n          problemasFaltantes: receptionData.issues,\r\n          pendientes: pendientes,\r\n          totalPendientes: pendientes,\r\n          status,\r\n          materials: materialsReception,\r\n          updatedAt: new Date().toISOString()\r\n        }\r\n      });\r\n      \r\n      // Clear form\r\n      setSelectedOrder(null);\r\n      setReceptionData({ received: 0, notes: '', issues: [] });\r\n      setMaterialsReception([]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border rounded-lg p-6\">\r\n      <div className=\"flex items-center space-x-2 mb-6\">\r\n        <Icon name=\"Package\" className=\"text-blue-500\" size={24} />\r\n        <h2 className=\"text-xl font-bold\">Recepci√≥n de Materiales</h2>\r\n        {process.env.NODE_ENV !== 'production' && (\r\n          <div className=\"ml-3 inline-flex items-center space-x-2\">\r\n            <div className=\"inline-flex items-center px-2 py-0.5 rounded-full bg-gray-100 text-xs text-gray-700 border\">\r\n              <span className=\"font-medium mr-2\">Aprobados:</span>\r\n              <span className=\"font-semibold\">{approvedMaterials?.length ?? 0}</span>\r\n              <span className=\"text-[10px] ml-2 text-muted-foreground\">{approvedSource || ''}</span>\r\n            </div>\r\n            <Button size=\"xs\" variant=\"outline\" onClick={handleForceSearch} iconName=\"Search\">Buscar aprobados</Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Orders List */}\r\n        <div>\r\n          <h3 className=\"font-medium mb-3\">√ìrdenes Pendientes</h3>\r\n          <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n            {workOrders?.map((order) => {\r\n              const orderKey = order?.ordenTrabajo || order?.id || order?.folio || '';\r\n              const cachedMaterials = orderMaterialsCache[orderKey];\r\n              const existingReception = loadReceptionFromTaller(orderKey);\r\n              \r\n              return (\r\n                <div\r\n                  key={order?.ordenTrabajo || order?.id}\r\n                  onClick={() => handleOrderSelect(order)}\r\n                  className={`p-3 border rounded-lg cursor-pointer transition-colors ${(selectedOrder?.ordenTrabajo || selectedOrder?.id) === (order?.ordenTrabajo || order?.id) ? 'border-primary bg-primary/10' : 'border-muted hover:border-primary/50'}`}\r\n                >\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"font-medium\">{order?.ordenTrabajo || order?.id}</div>\r\n                        {existingReception && (\r\n                          <span className=\"inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-blue-100 text-blue-700 border border-blue-200\">\r\n                            üìã Recepci√≥n guardada\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"text-sm text-muted-foreground\">{order?.clientName}</div>\r\n                      {/* Mostrar estad√≠sticas de materiales */}\r\n                      {(() => {\r\n                        const reception = existingReception || { materials: [] };\r\n                        const totalRequired = cachedMaterials?.materials?.reduce((sum, m) => sum + (Number(m.cantidad) || 0), 0) || order?.materials?.total || 0;\r\n                        const totalReceived = reception?.materials?.reduce((sum, m) => sum + (Number(m.received) || 0), 0) || reception?.cantidadRecibida || reception?.received || order?.materials?.received || 0;\r\n                        const totalPending = Math.max(0, totalRequired - totalReceived);\r\n                        \r\n                        return (\r\n                          <div className=\"text-sm\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <span className=\"font-medium\">Materiales:</span>\r\n                              <span className=\"text-green-600 font-semibold\">{totalReceived}</span>\r\n                              <span className=\"text-muted-foreground\">/</span>\r\n                              <span className=\"font-semibold\">{totalRequired}</span>\r\n                              {totalPending > 0 && (\r\n                                <>\r\n                                  <span className=\"text-muted-foreground\">‚Ä¢</span>\r\n                                  <span className=\"text-orange-600 font-medium flex items-center gap-1\">\r\n                                    <Icon name=\"AlertCircle\" size={14} />\r\n                                    {totalPending} faltantes\r\n                                  </span>\r\n                                </>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })()}\r\n                      \r\n                      {/* Preview de materiales aprobados */}\r\n                      {cachedMaterials && cachedMaterials.materials && cachedMaterials.materials.length > 0 && (\r\n                        <div className=\"mt-2 text-xs text-green-700 bg-green-50 rounded px-2 py-1\">\r\n                          <div className=\"font-medium\">‚úì {cachedMaterials.materials.length} materiales aprobados</div>\r\n                          <div className=\"truncate\">\r\n                            {cachedMaterials.materials.slice(0, 2).map(m => \r\n                              m.descripcion || m.nombre || m.codigo || 'Material'\r\n                            ).join(', ')}\r\n                            {cachedMaterials.materials.length > 2 && '...'}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className={`px-2 py-1 rounded-full text-xs ${order?.materials?.status === 'complete' ? 'bg-green-100 text-green-700' : order?.materials?.status === 'partial' ? 'bg-yellow-100 text-yellow-700' : 'bg-red-100 text-red-700'}`}>\r\n                      {order?.materials?.status === 'complete' ? 'Completo' : order?.materials?.status === 'partial' ? 'Parcial' : 'Pendiente'}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {order?.materials?.issues?.length > 0 && (\r\n                    <div className=\"mt-2 text-xs text-red-600\">{order?.materials?.issues?.length} problema(s) reportado(s)</div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {workOrders?.length === 0 && !selectedOrder && (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n              <Icon name=\"Package\" size={48} className=\"mx-auto mb-2 opacity-50\" />\r\n              <div>No hay √≥rdenes pendientes de recepci√≥n</div>\r\n            </div>\r\n          )}\r\n          \r\n          {workOrders?.length === 0 && selectedOrder && (\r\n            <div className=\"p-3 border rounded-lg bg-blue-50 border-blue-200\">\r\n              <div className=\"flex items-center space-x-2 mb-2\">\r\n                <Icon name=\"Info\" size={16} className=\"text-blue-600\" />\r\n                <span className=\"text-sm font-medium text-blue-800\">Orden Seleccionada</span>\r\n              </div>\r\n              <div className=\"text-sm text-blue-700\">\r\n                <div className=\"font-medium\">{selectedOrder?.ordenTrabajo || selectedOrder?.id}</div>\r\n                <div>{selectedOrder?.clientName || selectedOrder?.nombreProyecto}</div>\r\n              </div>\r\n              {(() => {\r\n                const orderKey = selectedOrder?.ordenTrabajo || selectedOrder?.id || selectedOrder?.folio || '';\r\n                const cachedMaterials = orderMaterialsCache[orderKey];\r\n                return cachedMaterials && cachedMaterials.materials && cachedMaterials.materials.length > 0 && (\r\n                  <div className=\"mt-2\">\r\n                    <div className=\"text-xs text-green-700 bg-green-50 rounded px-2 py-1 mb-2\">\r\n                      <div className=\"font-medium\">‚úì {cachedMaterials.materials.length} materiales aprobados</div>\r\n                    </div>\r\n                    \r\n                    {/* Lista compacta de materiales */}\r\n                    <div className=\"space-y-1 max-h-32 overflow-y-auto\">\r\n                      {cachedMaterials.materials.map((material, idx) => (\r\n                        <div key={idx} className=\"text-xs bg-white border rounded px-2 py-1\">\r\n                          <div className=\"font-medium text-gray-800 truncate\">\r\n                            {material?.descripcion || material?.nombre || material?.producto || material?.name || 'Sin descripci√≥n'}\r\n                            {!material?.codigo && <span className=\"ml-1 text-gray-500\">(Manual)</span>}\r\n                          </div>\r\n                          <div className=\"text-gray-600\">\r\n                            <span>Descripci√≥n: {material?.descripcion || material?.nombre || '‚Äî'}</span>\r\n                            <span className=\"ml-3\">Cant: {material?.cantidadConUnidad || material?.cantidad || 0}</span>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Reception Form */}\r\n        <div>\r\n          {selectedOrder ? (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"bg-muted p-4 rounded-lg\">\r\n                <h4 className=\"font-medium mb-2\">Verificaci√≥n Material - {selectedOrder?.ordenTrabajo || selectedOrder?.id}</h4>\r\n                <div className=\"text-sm space-y-1\">\r\n                  <div><strong>Proyecto:</strong> {selectedOrder?.projectRef}</div>\r\n                  <div><strong>Cliente:</strong> {selectedOrder?.clientName}</div>\r\n                  <div><strong>Total requerido:</strong> {selectedOrder?.materials?.total} items</div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Approved materials list (editable): show per-material required/received and allow editing received counts */}\r\n              {materialsReception && materialsReception.length > 0 && (\r\n                <div className=\"p-3 border rounded-lg bg-white\">\r\n                  <h5 className=\"font-medium mb-2\">Materiales aprobados para recepci√≥n</h5>\r\n                  <div className=\"text-sm space-y-3 max-h-64 overflow-y-auto\">\r\n                    {materialsReception.map((m, idx) => (\r\n                      <div key={m.key || idx} className=\"flex items-start justify-between border-b pb-3 gap-4\">\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"font-medium text-sm break-words\">\r\n                            {m.descripcion || 'Sin descripci√≥n'}\r\n                            {!m.codigo && <span className=\"ml-2 text-xs text-muted-foreground\">(Agregado manualmente)</span>}\r\n                          </div>\r\n                          <div className=\"text-xs text-muted-foreground mt-1\">\r\n                            <span className=\"font-medium\">Requerido:</span> {m.required} ‚Ä¢ <span className=\"font-medium\">Pendiente:</span> {m.missing}\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex flex-col items-start space-y-2 flex-shrink-0\">\r\n                          <div className=\"text-xs text-muted-foreground whitespace-nowrap ml-0.5\">Cantidad recibida</div>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <Input\r\n                              type=\"number\"\r\n                              min=\"0\"\r\n                              value={m.received}\r\n                              onChange={(e) => handleMaterialReceivedChange(m.key, e?.target?.value)}\r\n                              className=\"w-20 text-center\"\r\n                            />\r\n                            <Button size=\"xs\" variant=\"outline\" onClick={() => handleMaterialReceivedChange(m.key, m.required)}>Marcar completo</Button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Issues */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Problemas/Faltantes</label>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex space-x-2\">\r\n                    <Input value={newIssue} onChange={(e) => setNewIssue(e?.target?.value)} placeholder=\"Describir problema o faltante...\" onKeyPress={(e) => e?.key === 'Enter' && handleAddIssue()} />\r\n                    <Button onClick={handleAddIssue} size=\"sm\" iconName=\"Plus\">Agregar</Button>\r\n                  </div>\r\n\r\n                  {receptionData?.issues?.map((issue, index) => (\r\n                    <div key={index} className=\"flex items-center justify-between bg-red-50 p-2 rounded border border-red-200\">\r\n                      <span className=\"text-sm text-red-800\">{issue}</span>\r\n                      <Button size=\"xs\" variant=\"ghost\" onClick={() => handleRemoveIssue(index)} iconName=\"X\" className=\"text-red-600 hover:text-red-800\" />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Notes */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Notas Adicionales</label>\r\n                <textarea value={receptionData?.notes} onChange={(e) => setReceptionData(prev => ({ ...prev, notes: e?.target?.value }))} className=\"w-full p-3 border rounded-lg resize-none\" rows={3} placeholder=\"Observaciones, condiciones especiales, etc...\" />\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex space-x-2 pt-4\">\r\n                <Button onClick={handleSubmitReception} className=\"flex-1\" iconName=\"Check\">\r\n                  {loadReceptionFromTaller(selectedOrder?.ordenTrabajo || selectedOrder?.id || selectedOrder?.folio || '') ? 'Actualizar Recepci√≥n' : 'Registrar Recepci√≥n'}\r\n                </Button>\r\n                <Button variant=\"outline\" onClick={() => setSelectedOrder(null)}>Cancelar</Button>\r\n              </div>\r\n\r\n              {/* Status Alert */}\r\n              {receptionData?.received < (selectedOrder?.materials?.total || 0) && (\r\n                <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\r\n                  <div className=\"flex items-start space-x-2\">\r\n                    <Icon name=\"AlertTriangle\" size={16} className=\"text-yellow-600 mt-0.5\" />\r\n                    <div className=\"text-sm\">\r\n                      <div className=\"font-medium text-yellow-800\">Material Incompleto</div>\r\n                      <div className=\"text-yellow-700\">Se reportar√°n faltantes a Proyectos y se esperar√° reposici√≥n</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n              <Icon name=\"MousePointer\" size={48} className=\"mx-auto mb-2 opacity-50\" />\r\n              <div>Seleccione una orden para verificar materiales</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Normalize articles to a canonical 'article' shape and aggregate duplicates by code/description\r\nconst normalizeAndAggregate = (arr) => {\r\n  if (!Array.isArray(arr)) return [];\r\n\r\n  const parseQuantity = (q) => {\r\n    if (q == null) return 0;\r\n    if (typeof q === 'number') return q;\r\n    const s = String(q).replace(/,/g, '.');\r\n    const m = s.match(/[-+]?[0-9]*\\.?[0-9]+/);\r\n    return m ? Number(m[0]) : 0;\r\n  };\r\n\r\n  const normalizeItem = (it) => {\r\n    const codigo = it?.codigo || it?.id || '';\r\n    // Priorizar nombre/descripci√≥n con m√°s opciones de campos\r\n    const descripcion = it?.descripcion || it?.nombre || it?.nombreMaterial || it?.producto || it?.name || it?.item || (codigo ? '' : 'Sin descripci√≥n');\r\n    // try to extract numeric quantity from different fields\r\n    const qty = parseQuantity(it?.cantidadConUnidad ?? it?.cantidad ?? it?.qty ?? it?.required ?? it?.cantidad_total ?? it?.cantidadTotal);\r\n    // try to extract unit if present in cantidadConUnidad\r\n    let unit = '';\r\n    if (it?.unidad) unit = it.unidad;\r\n    else if (it?.cantidadConUnidad) {\r\n      const m = String(it.cantidadConUnidad).match(/[a-zA-Z%]+/);\r\n      unit = m ? m[0] : '';\r\n    }\r\n    return {\r\n      codigo,\r\n      descripcion,\r\n      cantidad: qty,\r\n      unidad: unit,\r\n      cantidadConUnidad: `${qty}${unit ? ` ${unit}` : ''}`,\r\n      costoUnitario: it?.costoUnitario || it?.precioUnitario || it?.unitPrice,\r\n      subtotal: it?.subtotal,\r\n      raw: it\r\n    };\r\n  };\r\n\r\n  const map = new Map();\r\n  arr.forEach(it => {\r\n    const n = normalizeItem(it);\r\n    const key = (n.codigo || n.descripcion || '').toString().toLowerCase().trim();\r\n    if (!map.has(key)) map.set(key, { ...n });\r\n    else {\r\n      const exist = map.get(key);\r\n      exist.cantidad = (Number(exist.cantidad) || 0) + (Number(n.cantidad) || 0);\r\n      exist.cantidadConUnidad = `${exist.cantidad}${exist.unidad ? ` ${exist.unidad}` : ''}`;\r\n      // preserve costoUnitario/subtotal if present on one of them\r\n      if (!exist.costoUnitario && n.costoUnitario) exist.costoUnitario = n.costoUnitario;\r\n      if (!exist.subtotal && n.subtotal) exist.subtotal = n.subtotal;\r\n    }\r\n  });\r\n\r\n  return Array.from(map.values());\r\n};\r\n\r\nexport default MaterialReceptionPanel;","import React, { useState, useEffect } from 'react';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        import { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\n  const SafetyChecklistPanel = ({ workOrders, onSafetyComplete, selectedOrder: propSelectedOrder, onLocalMissingChange }) => {\r\n          const [selectedOrder, setSelectedOrder] = useState(null);\r\n          const [checklist, setChecklist] = useState({});\r\n          const [missingPPE, setMissingPPE] = useState({});\r\n          const [customMissing, setCustomMissing] = useState('');\r\n          const [persistedState, setPersistedState] = useState(null);\r\n\r\n          // localStorage key helper\r\n          const storageKeyFor = (orderKey) => `wb_safety_check_${orderKey}`;\r\n\r\n          const loadLocalState = (orderKey) => {\r\n            try {\r\n              if (!orderKey) return null;\r\n              const raw = localStorage.getItem(storageKeyFor(orderKey));\r\n              if (!raw) return null;\r\n              return JSON.parse(raw);\r\n            } catch (e) {\r\n              return null;\r\n            }\r\n          };\r\n\r\n          const saveLocalState = (orderKey, state) => {\r\n            try {\r\n              if (!orderKey) return;\r\n              localStorage.setItem(storageKeyFor(orderKey), JSON.stringify(state || {}));\r\n            } catch (e) {\r\n            }\r\n          };\r\n\r\n          const safetyItems = [\r\n            {\r\n              id: 'ppe',\r\n              title: 'Equipo de Protecci√≥n Personal (EPP)',\r\n              items: [\r\n                'Casco de Seguridad',\r\n                'Gafas de Protecci√≥n',\r\n                'Guantes de Trabajo',\r\n                'Calzado de Seguridad',\r\n                'Arn√©s de Seguridad',\r\n                'Respirador N95',\r\n                'Chaleco Reflectivo'\r\n              ]\r\n            },\r\n            {\r\n              id: 'tools',\r\n              title: 'Herramientas y Equipos',\r\n              items: [\r\n                'Herramientas en buen estado',\r\n                'Equipos calibrados',\r\n                'Extensiones el√©ctricas revisadas',\r\n                'Escaleras/andamios seguros',\r\n                'Equipos de soldadura verificados'\r\n              ]\r\n            },\r\n            {\r\n              id: 'procedures',\r\n              title: 'Procedimientos',\r\n              items: [\r\n                'Planos t√©cnicos disponibles',\r\n                'Instrucciones de trabajo claras',\r\n                'Procedimientos de emergencia',\r\n                'Contactos de emergencia visibles',\r\n                'Permisos de trabajo actualizados'\r\n              ]\r\n            }\r\n          ];\r\n\r\n            // Mapping labels for missing-list inference (reusable)\r\n            const PPE_LABEL_MAP = {\r\n              cascoSeguridad: ['casco de seguridad','casco','casco seguridad'],\r\n              gafasProteccion: ['gafas de protecci√≥n','gafas de proteccion','gafas'],\r\n              guantesTrabajo: ['guantes de trabajo','guantes'],\r\n              calzadoSeguridad: ['calzado de seguridad','calzado'],\r\n              arnesSeguridad: ['arn√©s de seguridad','arnes de seguridad','arnes','arn√©s'],\r\n              respiradorN95: ['respirador n95','respirador','n95'],\r\n              chalecoReflectivo: ['chaleco reflectivo','chaleco'],\r\n              requiereEstudiosMedicosActualizados: ['estudios medicos actualizados','estudios m√©dicos actualizados','estudios']\r\n            };\r\n\r\n            // Helper: read PPE boolean fields from order (accepts multiple shapes)\r\n            const getPPEValue = (order, field) => {\r\n              if (!order) return false;\r\n              // 1) direct boolean fields (top-level)\r\n              if (order[field] !== undefined) return !!order[field];\r\n              // 2) nested safety object\r\n              if (order.safetyChecklist && order.safetyChecklist[field] !== undefined) return !!order.safetyChecklist[field];\r\n              // 3) raw payload\r\n              if (order.raw && order.raw[field] !== undefined) return !!order.raw[field];\r\n\r\n              // 4) try alternate key forms (snake_case)\r\n              const snake = field.replace(/([A-Z])/g, '_$1').toLowerCase();\r\n              if (order[snake] !== undefined) return !!order[snake];\r\n              if (order.raw && order.raw[snake] !== undefined) return !!order.raw[snake];\r\n\r\n              // 5) if the order stores a list of missing items (safetyChecklistMissing), derive boolean\r\n              const missingList = Array.isArray(order.safetyChecklistMissing)\r\n                ? order.safetyChecklistMissing\r\n                : (Array.isArray(order.raw && order.raw.safetyChecklistMissing) ? order.raw.safetyChecklistMissing : null);\r\n              if (Array.isArray(missingList)) {\r\n                const possibles = PPE_LABEL_MAP[field] || [field];\r\n                const lowerMissing = missingList.map(m => String(m || '').toLowerCase());\r\n                // if any possible label appears in missingList, then the item is missing => return false\r\n                for (const p of possibles) {\r\n                  if (lowerMissing.some(mm => mm.includes(p))) return false;\r\n                }\r\n                // not listed as missing -> assume present\r\n                return true;\r\n              }\r\n              return false;\r\n            };\r\n\r\n            const getRecordedMissing = (order) => {\r\n              if (!order) return [];\r\n              if (Array.isArray(order.safetyChecklistMissing)) return order.safetyChecklistMissing;\r\n              if (order.raw && Array.isArray(order.raw.safetyChecklistMissing)) return order.raw.safetyChecklistMissing;\r\n              return [];\r\n            };\r\n\r\n            const PPE_FIELDS = [\r\n              ['cascoSeguridad','Casco'],\r\n              ['gafasProteccion','Gafas'],\r\n              ['guantesTrabajo','Guantes'],\r\n              ['calzadoSeguridad','Calzado'],\r\n              ['arnesSeguridad','Arn√©s'],\r\n              ['respiradorN95','Respirador'],\r\n              ['chalecoReflectivo','Chaleco'],\r\n              ['requiereEstudiosMedicosActualizados','Estudios']\r\n            ];\r\n\r\n          const handleOrderSelect = (order) => {\r\n            setSelectedOrder(order);\r\n            // Initialize checklist with false values\r\n            const initialChecklist = {};\r\n            \r\n            safetyItems?.forEach(section => {\r\n              section?.items?.forEach((item, index) => {\r\n                const key = `${section?.id}-${index}`;\r\n                initialChecklist[key] = false;\r\n                \r\n              });\r\n            });\r\n            // Merge with any persisted state for this order so marks are not lost\r\n            const orderKey = order?.id || order?.ordenTrabajo || order?.folio || '';\r\n            const saved = loadLocalState(orderKey) || {};\r\n            const mergedChecklist = { ...initialChecklist, ...(saved.checklist || {}) };\r\n            const mergedMissing = { ...(saved.missingPPE || {}) };\r\n            setChecklist(mergedChecklist);\r\n            setMissingPPE(mergedMissing);\r\n            setPersistedState(saved);\r\n          };\r\n\r\n          // If a selected order is provided by the parent (board selection), initialize the panel with it\r\n          useEffect(() => {\r\n            if (!propSelectedOrder) return;\r\n            \r\n            // Only select if it's actually a different order\r\n            const incomingId = propSelectedOrder?.id || propSelectedOrder?.ordenTrabajo || propSelectedOrder?.folio || '';\r\n            const currentId = selectedOrder?.id || selectedOrder?.ordenTrabajo || selectedOrder?.folio || '';\r\n            \r\n            if (incomingId && incomingId !== currentId) {\r\n              handleOrderSelect(propSelectedOrder);\r\n            }\r\n          }, [propSelectedOrder?.id, propSelectedOrder?.ordenTrabajo, propSelectedOrder?.folio]);\r\n\r\n          const handleChecklistChange = (itemKey, checked) => {\r\n            setChecklist(prev => ({\r\n              ...prev,\r\n              [itemKey]: checked\r\n            }));\r\n          };\r\n\r\n          // Mark all items in a section as verified (only affects applicable items)\r\n          const handleMarkAllVerified = (sectionId) => {\r\n            if (!selectedOrder) return;\r\n            const checklistUpdates = {};\r\n            const missingUpdates = {};\r\n            const section = safetyItems.find(s => s.id === sectionId);\r\n            section?.items?.forEach((it, idx) => {\r\n              const key = `${sectionId}-${idx}`;\r\n              let applies = true;\r\n              if (sectionId === 'ppe') {\r\n                const field = PPE_FIELDS[idx]?.[0];\r\n                applies = !!getPPEValue(selectedOrder, field);\r\n              }\r\n              if (applies) {\r\n                checklistUpdates[key] = true;\r\n                missingUpdates[key] = false;\r\n              }\r\n            });\r\n            setChecklist(prev => ({ ...prev, ...checklistUpdates }));\r\n            setMissingPPE(prev => ({ ...prev, ...missingUpdates }));\r\n          };\r\n\r\n          const handleMissingToggle = (itemKey, checked) => {\r\n            setMissingPPE(prev => ({ ...prev, [itemKey]: checked }));\r\n            if (checked) {\r\n              // Uncheck verification if marked missing\r\n              setChecklist(prev => ({ ...prev, [itemKey]: false }));\r\n            }\r\n          };\r\n\r\n          const handleAddCustomMissing = () => {\r\n            if (!customMissing?.trim()) return;\r\n            const key = `custom-${Date.now()}`;\r\n            setMissingPPE(prev => ({ ...prev, [key]: true }));\r\n            setChecklist(prev => ({ ...prev, [key]: false }));\r\n            // store label alongside checklist for rendering\r\n            setChecklist(prev => ({ ...prev, [key + '-label']: customMissing.trim() }));\r\n            setCustomMissing('');\r\n          };\r\n\r\n          // Notify parent about local missing labels for the currently selected order\r\n          // Use a ref to track the last notified value to prevent infinite loops\r\n          const lastNotifiedRef = React.useRef({});\r\n          \r\n          useEffect(() => {\r\n            try {\r\n              if (!onLocalMissingChange) return;\r\n              if (!selectedOrder) return;\r\n              const orderKey = selectedOrder?.id || selectedOrder?.ordenTrabajo || selectedOrder?.folio || '';\r\n              if (!orderKey) return;\r\n              \r\n              const localMissingLabels = Object.keys(missingPPE || {}).filter(k => !!missingPPE[k]).map(k => {\r\n                if (k.startsWith('custom-')) return checklist?.[k + '-label'] || 'Otro';\r\n                const parts = k.split('-');\r\n                const sec = safetyItems.find(s => s.id === parts[0]);\r\n                const idx = Number(parts[1]);\r\n                return sec?.items?.[idx] || 'Otro';\r\n              });\r\n              \r\n              const uniqueLabels = Array.from(new Set(localMissingLabels));\r\n              const labelsKey = JSON.stringify(uniqueLabels);\r\n              \r\n              // Only notify if the value actually changed\r\n              if (lastNotifiedRef.current[orderKey] !== labelsKey) {\r\n                lastNotifiedRef.current[orderKey] = labelsKey;\r\n                onLocalMissingChange(orderKey, uniqueLabels);\r\n              }\r\n            } catch (e) {\r\n              // ignore\r\n            }\r\n          }, [missingPPE, selectedOrder, checklist]);\r\n\r\n          const getCompletionPercentage = () => {\r\n            // Only consider required items in the progress calculation.\r\n            if (!selectedOrder) return 0;\r\n            const requiredKeys = [];\r\n            safetyItems?.forEach(section => {\r\n              section?.items?.forEach((it, idx) => {\r\n                const key = `${section?.id}-${idx}`;\r\n                if (section?.id === 'ppe') {\r\n                  const field = PPE_FIELDS[idx]?.[0];\r\n                  if (getPPEValue(selectedOrder, field)) requiredKeys.push(key);\r\n                } else {\r\n                  requiredKeys.push(key);\r\n                }\r\n              });\r\n            });\r\n            const uniqueReq = Array.from(new Set(requiredKeys));\r\n            if (uniqueReq.length === 0) return 0;\r\n            const checkedItems = uniqueReq.filter(k => !!checklist?.[k]).length;\r\n            const totalItems = uniqueReq.length;\r\n            return totalItems > 0 ? Math.round((checkedItems / totalItems) * 100) : 0;\r\n          };\r\n\r\n          const isChecklistComplete = () => {\r\n            if (!selectedOrder) return false;\r\n            // Only required items must be checked\r\n            const requiredKeys = [];\r\n            safetyItems?.forEach(section => {\r\n              section?.items?.forEach((it, idx) => {\r\n                const key = `${section?.id}-${idx}`;\r\n                if (section?.id === 'ppe') {\r\n                  const field = PPE_FIELDS[idx]?.[0];\r\n                  if (getPPEValue(selectedOrder, field)) requiredKeys.push(key);\r\n                } else {\r\n                  requiredKeys.push(key);\r\n                }\r\n              });\r\n            });\r\n            Object.keys(checklist || {}).forEach(k => { if (k.startsWith('custom-')) requiredKeys.push(k); });\r\n            const uniqueReq = Array.from(new Set(requiredKeys));\r\n            if (uniqueReq.length === 0) return false;\r\n            // If the order already has recorded missing items, do not allow completion\r\n            const recordedMissing = getRecordedMissing(selectedOrder) || [];\r\n            if (recordedMissing.length > 0) return false;\r\n            // Also prevent completion if there are local missing marks\r\n            const localMissingKeys = Object.keys(missingPPE || {}).filter(k => !!missingPPE[k]);\r\n            if (localMissingKeys.length > 0) return false;\r\n            return uniqueReq.every(k => !!checklist?.[k]);\r\n          };\r\n\r\n          // Persist local changes to localStorage whenever they change\r\n          useEffect(() => {\r\n            if (!selectedOrder) return;\r\n            const orderKey = selectedOrder?.id || selectedOrder?.ordenTrabajo || selectedOrder?.folio || '';\r\n            if (!orderKey) return;\r\n            \r\n            const completed = isChecklistComplete();\r\n            const toSave = {\r\n              checklist: checklist || {},\r\n              missingPPE: missingPPE || {},\r\n              completed: completed,\r\n              updatedAt: new Date().toISOString()\r\n            };\r\n            saveLocalState(orderKey, toSave);\r\n            \r\n            // Only update persistedState if completed status actually changed\r\n            setPersistedState(prev => {\r\n              if (prev?.completed !== completed) {\r\n                return toSave;\r\n              }\r\n              return prev;\r\n            });\r\n          }, [checklist, missingPPE, selectedOrder]);\r\n\r\n          const handleSubmitChecklist = () => {\r\n            if (!selectedOrder) return;\r\n            // Build missing list combining recorded (server) and local missing entries\r\n            const recorded = getRecordedMissing(selectedOrder) || [];\r\n            const localMissing = Object.keys(missingPPE || {}).filter(k => !!missingPPE[k]).map(k => {\r\n              if (k.startsWith('custom-')) return checklist?.[k + '-label'] || 'Otro';\r\n              const parts = k.split('-');\r\n              const sec = safetyItems.find(s => s.id === parts[0]);\r\n              const idx = Number(parts[1]);\r\n              return sec?.items?.[idx] || 'Otro';\r\n            });\r\n            const missing = Array.from(new Set([...(recorded || []), ...localMissing]));\r\n\r\n            const completedFlag = isChecklistComplete();\r\n            const payload = {\r\n              completed: completedFlag,\r\n              missingPPE: missing\r\n            };\r\n            // Save completed state locally so it persists even after UI updates\r\n            try {\r\n              const orderKey = selectedOrder?.id || selectedOrder?.ordenTrabajo || selectedOrder?.folio || '';\r\n              const saved = loadLocalState(orderKey) || {};\r\n              const toSave = { ...saved, checklist: checklist || {}, missingPPE: missing || {}, completed: completedFlag, updatedAt: new Date().toISOString() };\r\n              saveLocalState(orderKey, toSave);\r\n              setPersistedState(toSave);\r\n            } catch (e) {}\r\n\r\n            onSafetyComplete?.(selectedOrder?.id, payload);\r\n            // Close panel but keep persisted marks\r\n            setSelectedOrder(null);\r\n            setChecklist({});\r\n            setMissingPPE({});\r\n          };\r\n\r\n          // Whether this order is logically completed (server or local)\r\n          const isCompletedLocked = !!(selectedOrder?.safetyChecklistCompleted || persistedState?.completed);\r\n          const primaryButtonLabel = isCompletedLocked ? 'Actualizar' : 'Completar Verificaci√≥n';\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg p-6\">\r\n              <div className=\"flex items-center space-x-2 mb-6\">\r\n                <Icon name=\"Shield\" className=\"text-orange-500\" size={24} />\r\n                <h2 className=\"text-xl font-bold\">Lista de Verificaci√≥n de Seguridad</h2>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                {/* Orders List */}\r\n                <div>\r\n                  <h3 className=\"font-medium mb-3\">√ìrdenes Pendientes</h3>\r\n                  <div className=\"space-y-2\">\r\n                    {workOrders?.map((order) => (\r\n                      <div\r\n                        key={order?.id}\r\n                        onClick={() => handleOrderSelect(order)}\r\n                        className={`p-3 border rounded-lg cursor-pointer transition-colors ${\r\n                          selectedOrder?.id === order?.id\r\n                            ? 'border-primary bg-primary/10' :'border-muted hover:border-primary/50'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div>\r\n                            <div className=\"font-medium\">{order?.ordenTrabajo || order?.id}</div>\r\n                            <div className=\"text-sm text-muted-foreground\">{order?.clientName}</div>\r\n                          </div>\r\n                            <div className={`px-2 py-1 rounded-full text-xs ${\r\n                              order?.safetyChecklistCompleted \r\n                                ? 'bg-green-100 text-green-700' :'bg-red-100 text-red-700'\r\n                            }`}>\r\n                              {order?.safetyChecklistCompleted ? 'Completo' : 'Pendiente'}\r\n                            </div>\r\n                        </div>\r\n                          {/* PPE List: mostrar en forma de lista vertical */}\r\n                          <div className=\"mt-3\">\r\n                            <div className=\"text-sm font-medium mb-2\">EPP</div>\r\n                            <ul className=\"space-y-1 text-sm\">\r\n                              {PPE_FIELDS.map(([field, label]) => ({ field, label }))\r\n                                .filter(({ field }) => getPPEValue(order, field))\r\n                                .map(({ field, label }) => (\r\n                                  <li key={`${order?.ordenTrabajo || order?.id}-${field}`} className=\"flex items-center justify-between\">\r\n                                    <span className=\"truncate mr-4\">{label}</span>\r\n                                    <span className={`text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700`}>\r\n                                      Requiere\r\n                                    </span>\r\n                                  </li>\r\n                                ))}\r\n                            </ul>\r\n                          </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {workOrders?.length === 0 && (\r\n                    <div className=\"text-center py-8 text-muted-foreground\">\r\n                      <Icon name=\"Shield\" size={48} className=\"mx-auto mb-2 opacity-50\" />\r\n                      <div>No hay √≥rdenes pendientes</div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Safety Checklist */}\r\n                <div className=\"lg:col-span-2\">\r\n                  {selectedOrder ? (\r\n                    <div className=\"space-y-4\">\r\n                      {/* Order Info */}\r\n                      <div className=\"bg-muted p-4 rounded-lg\">\r\n                        <h4 className=\"font-medium mb-2\">Lista de Seguridad - {selectedOrder?.ordenTrabajo || selectedOrder?.id}</h4>\r\n                        <div className=\"text-sm space-y-1\">\r\n                          <div><strong>Proyecto:</strong> {selectedOrder?.projectRef}</div>\r\n                          <div><strong>Cliente:</strong> {selectedOrder?.clientName}</div>\r\n                        </div>\r\n                        \r\n                        {/* Progress */}\r\n                        <div className=\"mt-3\">\r\n                          <div className=\"flex items-center justify-between text-sm mb-1\">\r\n                            <span>Progreso de Verificaci√≥n</span>\r\n                            <span className=\"font-medium\">{getCompletionPercentage()}%</span>\r\n                          </div>\r\n                          <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                            <div \r\n                              className={`h-2 rounded-full transition-all duration-300 ${\r\n                                getCompletionPercentage() === 100 ? 'bg-green-500' : 'bg-orange-500'\r\n                              }`}\r\n                              style={{ width: `${getCompletionPercentage()}%` }}\r\n                            ></div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Checklist Sections */}\r\n                      <div className=\"space-y-4 max-h-96 overflow-y-auto\">\r\n                        {safetyItems?.map((section) => (\r\n                          <div key={section?.id} className=\"bg-muted/30 rounded-lg p-4\">\r\n                            <div className=\"flex items-center justify-between mb-3\">\r\n                                <h5 className=\"font-medium flex items-center space-x-2\">\r\n                                <button\r\n                                  type=\"button\"\r\n                                  onClick={() => handleMarkAllVerified(section?.id)}\r\n                                  className=\"inline-flex items-center p-1 rounded hover:bg-muted/20\"\r\n                                  title=\"Marcar verificadas\"\r\n                                  aria-label={`Marcar verificadas ${section?.id}`}\r\n                                >\r\n                                  <Icon name=\"CheckSquare\" size={16} />\r\n                                </button>\r\n                                <span>{section?.title}</span>\r\n                              </h5>\r\n                              <div className=\"flex items-center space-x-2\">\r\n                                {/* compact icon-only action handled via the icon button */}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                              {section?.items?.map((item, index) => {\r\n                                const itemKey = `${section?.id}-${index}`;\r\n                                // For PPE section, determine if this item is required for the selectedOrder\r\n                                let requiredForSelected = true;\r\n                                if (section?.id === 'ppe' && selectedOrder) {\r\n                                  const field = PPE_FIELDS[index]?.[0];\r\n                                  requiredForSelected = !!getPPEValue(selectedOrder, field);\r\n                                }\r\n                                const recordedMissing = getRecordedMissing(selectedOrder || {})?.map(m => String(m || '').toLowerCase()) || [];\r\n\r\n                                return (\r\n                                  <div key={itemKey} className=\"flex items-center justify-between space-x-3\">\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                      {(() => {\r\n                                    \r\n                                        const disabledForChecklist = (section?.id === 'ppe' && selectedOrder && !getPPEValue(selectedOrder, PPE_FIELDS[index]?.[0])) || recordedMissing.some(r => (String(item || '').toLowerCase().includes(r) || r.includes(String(item || '').toLowerCase()))) || !!missingPPE?.[itemKey];\r\n                                        return (\r\n                                          <Checkbox\r\n                                            id={itemKey}\r\n                                            checked={!!checklist?.[itemKey]}\r\n                                            onChange={(e) => handleChecklistChange(itemKey, e?.target?.checked)}\r\n                                            disabled={disabledForChecklist}\r\n                                          />\r\n                                        );\r\n                                      })()}\r\n                                      <label htmlFor={itemKey} className={`text-sm cursor-pointer ${!requiredForSelected ? 'opacity-50' : ''}`}>\r\n                                        {item}\r\n                                      </label>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-2\">\r\n                                          {requiredForSelected ? (\r\n                                        <>\r\n                                          <label className=\"text-xs text-muted-foreground mr-2\">Falta</label>\r\n                                          <input type=\"checkbox\" className=\"accent-red-600\" checked={!!missingPPE?.[itemKey]} onChange={(e) => handleMissingToggle(itemKey, e?.target?.checked)} />\r\n                                        </>\r\n                                      ) : (\r\n                                        <span className=\"text-xs text-muted-foreground mr-2\">No requiere</span>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                );\r\n                              })}\r\n                              {/* Render any custom missing items added */}\r\n                              {Object.keys(missingPPE || {}).filter(k => k.startsWith('custom-')).map((ck) => (\r\n                                <div key={ck} className=\"flex items-center justify-between space-x-3\">\r\n                                  <div className=\"flex items-center space-x-3\">\r\n                                    <Checkbox id={ck} checked={!!checklist?.[ck]} onChange={(e) => handleChecklistChange(ck, e?.target?.checked)} />\r\n                                    <label className=\"text-sm cursor-pointer\">{checklist?.[ck + '-label'] || 'Otro'}</label>\r\n                                  </div>\r\n                                  <div className=\"flex items-center space-x-2\">\r\n                                    <label className=\"text-xs text-muted-foreground mr-2\">Falta</label>\r\n                                    <input type=\"checkbox\" className=\"accent-red-600\" checked={!!missingPPE?.[ck]} onChange={(e) => handleMissingToggle(ck, e?.target?.checked)} />\r\n                                  </div>\r\n                                </div>\r\n                              ))}\r\n                              <div className=\"flex items-center space-x-2 mt-2\">\r\n                                <input value={customMissing} onChange={(e) => setCustomMissing(e?.target?.value)} placeholder=\"Agregar...\" className=\"flex-1 px-2 py-1 border rounded\" />\r\n                                <Button size=\"xs\" onClick={handleAddCustomMissing}>Agregar</Button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n\r\n                      {(getRecordedMissing(selectedOrder) || []).length > 0 && (\r\n                        <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <Icon name=\"AlertTriangle\" size={16} className=\"text-red-600 mt-0.5\" />\r\n                            <div className=\"text-sm\">\r\n                              <div className=\"font-medium text-red-800\">Faltantes registrados</div>\r\n                              <div className=\"text-red-700\">No es posible completar la verificaci√≥n mientras existan √≠tems marcados como faltantes. Revise y resuelva los siguientes:</div>\r\n                              <ul className=\"list-disc ml-5 mt-2 text-red-700\">\r\n                                {getRecordedMissing(selectedOrder).map((m, i) => (\r\n                                  <li key={`missing-${i}`}>{m}</li>\r\n                                ))}\r\n                              </ul>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Actions */}\r\n                      <div className=\"flex space-x-2 pt-4 border-t\">\r\n                        <Button\r\n                          onClick={handleSubmitChecklist}\r\n                          disabled={!isChecklistComplete()}\r\n                          className=\"flex-1\"\r\n                          iconName=\"Shield\"\r\n                        >\r\n                          {primaryButtonLabel}\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          onClick={() => setSelectedOrder(null)}\r\n                        >\r\n                          Cancelar\r\n                        </Button>\r\n                      </div>\r\n\r\n                      {/* Completion Alert */}\r\n                      {!isChecklistComplete() && (\r\n                        <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-3\">\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <Icon name=\"AlertTriangle\" size={16} className=\"text-orange-600 mt-0.5\" />\r\n                            <div className=\"text-sm\">\r\n                              <div className=\"font-medium text-orange-800\">Verificaci√≥n Incompleta</div>\r\n                              <div className=\"text-orange-700\">\r\n                                Complete todos los elementos antes de continuar con la fabricaci√≥n\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {isChecklistComplete() && (\r\n                        <div className=\"bg-green-50 border border-green-200 rounded-lg p-3\">\r\n                          <div className=\"flex items-start space-x-2\">\r\n                            <Icon name=\"CheckCircle\" size={16} className=\"text-green-600 mt-0.5\" />\r\n                            <div className=\"text-sm\">\r\n                              <div className=\"font-medium text-green-800\">Verificaci√≥n Completa</div>\r\n                              <div className=\"text-green-700\">\r\n                                Todos los elementos de seguridad han sido verificados\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center py-8 text-muted-foreground\">\r\n                      <Icon name=\"MousePointer\" size={48} className=\"mx-auto mb-2 opacity-50\" />\r\n                      <div>Seleccione una orden para completar la lista de seguridad</div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default SafetyChecklistPanel;","import React, { useState, useEffect } from 'react';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n\r\n        const AttendancePanel = ({ currentShift }) => {\r\n          const [attendanceData, setAttendanceData] = useState([]);\r\n          const [currentTime, setCurrentTime] = useState(new Date());\r\n\r\n          const mockPersonnel = [\r\n            { id: 1, name: 'Carlos Mart√≠nez', role: 'T√©cnico Senior', status: 'present', checkIn: '07:55', checkOut: null },\r\n            { id: 2, name: 'Ana Rodr√≠guez', role: 'Especialista', status: 'present', checkIn: '08:02', checkOut: null },\r\n            { id: 3, name: 'Luis Garc√≠a', role: 'Supervisor', status: 'present', checkIn: '07:50', checkOut: null },\r\n            { id: 4, name: 'Mar√≠a L√≥pez', role: 'Fabricador', status: 'present', checkIn: '08:05', checkOut: null },\r\n            { id: 5, name: 'Jos√© Hern√°ndez', role: 'Asistente', status: 'late', checkIn: '08:15', checkOut: null },\r\n            { id: 6, name: 'Roberto Silva', role: 'Inspector QC', status: 'absent', checkIn: null, checkOut: null },\r\n            { id: 7, name: 'Carmen D√≠az', role: 'T√©cnico QC', status: 'present', checkIn: '07:58', checkOut: null },\r\n            { id: 8, name: 'Fernando Ruiz', role: 'Coordinador', status: 'present', checkIn: '07:45', checkOut: null }\r\n          ];\r\n\r\n          useEffect(() => {\r\n            setAttendanceData(mockPersonnel);\r\n            \r\n            // Update current time every minute\r\n            const timer = setInterval(() => {\r\n              setCurrentTime(new Date());\r\n            }, 60000);\r\n\r\n            return () => clearInterval(timer);\r\n          }, []);\r\n\r\n          const formatTime = (timeString) => {\r\n            if (!timeString) return '--:--';\r\n            return timeString;\r\n          };\r\n\r\n          const getStatusColor = (status) => {\r\n            const colors = {\r\n              'present': 'bg-green-100 text-green-700',\r\n              'late': 'bg-yellow-100 text-yellow-700',\r\n              'absent': 'bg-red-100 text-red-700',\r\n              'checked-out': 'bg-gray-100 text-gray-700'\r\n            };\r\n            return colors?.[status] || 'bg-gray-100 text-gray-700';\r\n          };\r\n\r\n          const getStatusLabel = (status) => {\r\n            const labels = {\r\n              'present': 'Presente',\r\n              'late': 'Tarde',\r\n              'absent': 'Ausente',\r\n              'checked-out': 'Sali√≥'\r\n            };\r\n            return labels?.[status] || 'Desconocido';\r\n          };\r\n\r\n          const handleCheckOut = (personnelId) => {\r\n            const currentTimeStr = currentTime?.toLocaleTimeString('es-ES', { \r\n              hour: '2-digit', \r\n              minute: '2-digit' \r\n            });\r\n            \r\n            setAttendanceData(prev => prev?.map(person => \r\n              person?.id === personnelId \r\n                ? { \r\n                    ...person, \r\n                    checkOut: currentTimeStr,\r\n                    status: 'checked-out'\r\n                  }\r\n                : person\r\n            ));\r\n          };\r\n\r\n          const getAttendanceStats = () => {\r\n            const total = attendanceData?.length;\r\n            const present = attendanceData?.filter(p => p?.status === 'present')?.length;\r\n            const late = attendanceData?.filter(p => p?.status === 'late')?.length;\r\n            const absent = attendanceData?.filter(p => p?.status === 'absent')?.length;\r\n            \r\n            return { total, present, late, absent };\r\n          };\r\n\r\n          const stats = getAttendanceStats();\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"font-medium flex items-center space-x-2\">\r\n                  <Icon name=\"Clock\" size={20} />\r\n                  <span>Control de Asistencia</span>\r\n                </h3>\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {currentTime?.toLocaleTimeString('es-ES', { \r\n                    hour: '2-digit', \r\n                    minute: '2-digit' \r\n                  })}\r\n                </div>\r\n              </div>\r\n              {/* Attendance Stats */}\r\n              <div className=\"grid grid-cols-2 gap-2 mb-4\">\r\n                <div className=\"bg-green-50 p-2 rounded text-center\">\r\n                  <div className=\"text-lg font-bold text-green-700\">{stats?.present}</div>\r\n                  <div className=\"text-xs text-green-600\">Presente</div>\r\n                </div>\r\n                <div className=\"bg-yellow-50 p-2 rounded text-center\">\r\n                  <div className=\"text-lg font-bold text-yellow-700\">{stats?.late}</div>\r\n                  <div className=\"text-xs text-yellow-600\">Tarde</div>\r\n                </div>\r\n              </div>\r\n              {/* Shift Hours */}\r\n              <div className=\"bg-muted p-3 rounded-lg mb-4\">\r\n                <div className=\"flex items-center justify-between text-sm\">\r\n                  <span>Horario de Turno:</span>\r\n                  <span className=\"font-medium\">8:00 - 18:00</span>\r\n                </div>\r\n                <div className=\"flex items-center justify-between text-sm\">\r\n                  <span>Total Personal:</span>\r\n                  <span className=\"font-medium\">{stats?.total}</span>\r\n                </div>\r\n              </div>\r\n              {/* Personnel List */}\r\n              <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                {attendanceData?.map((person) => (\r\n                  <div key={person?.id} className=\"flex items-center justify-between p-2 bg-muted/30 rounded\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"font-medium text-sm\">{person?.name}</div>\r\n                      <div className=\"text-xs text-muted-foreground\">{person?.role}</div>\r\n                    </div>\r\n                    \r\n                    <div className=\"text-right\">\r\n                      <div className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(person?.status)}`}>\r\n                        {getStatusLabel(person?.status)}\r\n                      </div>\r\n                      <div className=\"text-xs text-muted-foreground mt-1\">\r\n                        {person?.checkIn ? `E: ${formatTime(person?.checkIn)}` : ''}\r\n                        {person?.checkOut ? ` S: ${formatTime(person?.checkOut)}` : ''}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {person?.status === 'present' || person?.status === 'late' ? (\r\n                      <Button\r\n                        size=\"xs\"\r\n                        variant=\"outline\"\r\n                        onClick={() => handleCheckOut(person?.id)}\r\n                        iconName=\"LogOut\"\r\n                        className=\"ml-2\"\r\n                      >\r\n                      </Button>\r\n                    ) : null}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n              {/* Quick Actions */}\r\n              <div className=\"mt-4 pt-4 border-t space-y-2\">\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  className=\"w-full\"\r\n                  iconName=\"FileText\"\r\n                >\r\n                  Generar Reporte Diario\r\n                </Button>\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  className=\"w-full\"\r\n                  iconName=\"Bell\"\r\n                >\r\n                  Notificar Ausencias\r\n                </Button>\r\n              </div>\r\n              {/* Shift Status Alert */}\r\n              <div className={`mt-4 p-3 rounded-lg ${\r\n                currentShift === 'morning' ?'bg-green-50 border border-green-200' :'bg-red-50 border border-red-200'\r\n              }`}>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon \r\n                    name={currentShift === 'morning' ? 'CheckCircle' : 'XCircle'} \r\n                    size={16} \r\n                    className={currentShift === 'morning' ? 'text-green-600' : 'text-red-600'} \r\n                  />\r\n                  <div className=\"text-sm\">\r\n                    <div className={`font-medium ${\r\n                      currentShift === 'morning' ? 'text-green-800' : 'text-red-800'\r\n                    }`}>\r\n                      {currentShift === 'morning' ? 'Turno Activo' : 'Fuera de Horario'}\r\n                    </div>\r\n                    <div className={currentShift === 'morning' ? 'text-green-700' : 'text-red-700'}>\r\n                      {currentShift === 'morning' ?'Personal en horario laboral' :'Turno terminado - registro cerrado'}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default AttendancePanel;","import React, { useState } from 'react';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        import { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\n        const QualityControlPanel = ({ workOrders, onQualityUpdate }) => {\r\n          const [selectedOrder, setSelectedOrder] = useState(null);\r\n          const [qualityData, setQualityData] = useState({\r\n            checks: {},\r\n            photos: [],\r\n            notes: '',\r\n            decision: null\r\n          });\r\n\r\n          const qualityChecks = [\r\n            {\r\n              category: 'Dimensiones',\r\n              items: [\r\n                'Medidas seg√∫n planos',\r\n                'Tolerancias correctas',\r\n                'Alineaci√≥n apropiada'\r\n              ]\r\n            },\r\n            {\r\n              category: 'Materiales',\r\n              items: [\r\n                'Material especificado',\r\n                'Acabados correctos',\r\n                'Sin defectos visibles'\r\n              ]\r\n            },\r\n            {\r\n              category: 'Ensamble',\r\n              items: [\r\n                'Soldaduras de calidad',\r\n                'Conexiones seguras',\r\n                'Funcionamiento correcto'\r\n              ]\r\n            },\r\n            {\r\n              category: 'Documentaci√≥n',\r\n              items: [\r\n                'Certificados de material',\r\n                'Registros de pruebas',\r\n                'Fotograf√≠as de evidencia'\r\n              ]\r\n            }\r\n          ];\r\n\r\n          const handleOrderSelect = (order) => {\r\n            setSelectedOrder(order);\r\n            // Initialize quality checks\r\n            const initialChecks = {};\r\n            qualityChecks?.forEach(category => {\r\n              category?.items?.forEach((item, index) => {\r\n                initialChecks[`${category?.category}-${index}`] = false;\r\n              });\r\n            });\r\n            setQualityData({\r\n              checks: initialChecks,\r\n              photos: [],\r\n              notes: '',\r\n              decision: null\r\n            });\r\n          };\r\n\r\n          const handleCheckChange = (checkKey, checked) => {\r\n            setQualityData(prev => ({\r\n              ...prev,\r\n              checks: {\r\n                ...prev?.checks,\r\n                [checkKey]: checked\r\n              }\r\n            }));\r\n          };\r\n\r\n          const handlePhotoUpload = (event) => {\r\n            const files = Array.from(event?.target?.files);\r\n            const newPhotos = files?.map(file => ({\r\n              name: file?.name,\r\n              size: file?.size,\r\n              url: URL?.createObjectURL(file),\r\n              type: 'evidence'\r\n            }));\r\n            setQualityData(prev => ({\r\n              ...prev,\r\n              photos: [...prev?.photos, ...newPhotos]\r\n            }));\r\n          };\r\n\r\n          const getCompletionPercentage = () => {\r\n            const totalChecks = Object?.keys(qualityData?.checks)?.length;\r\n            const completedChecks = Object?.values(qualityData?.checks)?.filter(Boolean)?.length;\r\n            return totalChecks > 0 ? Math?.round((completedChecks / totalChecks) * 100) : 0;\r\n          };\r\n\r\n          const areAllChecksComplete = () => {\r\n            return Object?.values(qualityData?.checks)?.every(Boolean);\r\n          };\r\n\r\n          const handleQualityDecision = (decision) => {\r\n            setQualityData(prev => ({ ...prev, decision }));\r\n          };\r\n\r\n          const handleSubmitQuality = () => {\r\n            if (selectedOrder && qualityData?.decision) {\r\n              onQualityUpdate?.(selectedOrder?.id, {\r\n                status: qualityData?.decision === 'approve' ? 'approved' : 'rejected',\r\n                checks: qualityData?.checks,\r\n                photos: qualityData?.photos,\r\n                notes: qualityData?.notes\r\n              });\r\n              setSelectedOrder(null);\r\n              setQualityData({\r\n                checks: {},\r\n                photos: [],\r\n                notes: '',\r\n                decision: null\r\n              });\r\n            }\r\n          };\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg p-4\">\r\n              <div className=\"flex items-center space-x-2 mb-4\">\r\n                <Icon name=\"CheckCircle\" className=\"text-green-500\" size={20} />\r\n                <h3 className=\"font-medium\">Control de Calidad</h3>\r\n              </div>\r\n              {/* Orders List */}\r\n              <div className=\"mb-4\">\r\n                <h4 className=\"text-sm font-medium mb-2\">√ìrdenes en Revisi√≥n</h4>\r\n                <div className=\"space-y-2 max-h-32 overflow-y-auto\">\r\n                  {workOrders?.map((order) => (\r\n                    <div\r\n                      key={order?.id}\r\n                      onClick={() => handleOrderSelect(order)}\r\n                      className={`p-2 border rounded cursor-pointer text-sm transition-colors ${\r\n                        selectedOrder?.id === order?.id\r\n                          ? 'border-primary bg-primary/10' :'border-muted hover:border-primary/50'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex justify-between items-start\">\r\n                        <div>\r\n                          <div className=\"font-medium\">{order?.id}</div>\r\n                          <div className=\"text-xs text-muted-foreground\">{order?.clientName}</div>\r\n                        </div>\r\n                        <div className={`px-2 py-1 rounded-full text-xs ${\r\n                          order?.qualityControlStatus === 'approved' ? 'bg-green-100 text-green-700' :\r\n                          order?.qualityControlStatus === 'rejected' ? 'bg-red-100 text-red-700' :\r\n                          order?.qualityControlStatus === 'review'? 'bg-yellow-100 text-yellow-700' : 'bg-gray-100 text-gray-700'\r\n                        }`}>\r\n                          {order?.qualityControlStatus === 'approved' ? 'Aprobado' :\r\n                           order?.qualityControlStatus === 'rejected' ? 'Rechazado' :\r\n                           order?.qualityControlStatus === 'review' ? 'Revisi√≥n' : 'Pendiente'}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              {selectedOrder ? (\r\n                <div className=\"space-y-4\">\r\n                  {/* Order Info */}\r\n                  <div className=\"bg-muted p-3 rounded-lg\">\r\n                    <div className=\"text-sm font-medium\">{selectedOrder?.id}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">\r\n                      {selectedOrder?.clientName} ‚Ä¢ {selectedOrder?.progress}% completado\r\n                    </div>\r\n                    \r\n                    {/* Progress Bar */}\r\n                    <div className=\"mt-2\">\r\n                      <div className=\"flex items-center justify-between text-xs mb-1\">\r\n                        <span>Verificaciones</span>\r\n                        <span>{getCompletionPercentage()}%</span>\r\n                      </div>\r\n                      <div className=\"w-full bg-gray-200 rounded-full h-1\">\r\n                        <div \r\n                          className=\"h-1 rounded-full bg-green-500 transition-all\"\r\n                          style={{ width: `${getCompletionPercentage()}%` }}\r\n                        ></div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Quality Checks */}\r\n                  <div className=\"max-h-48 overflow-y-auto space-y-3\">\r\n                    {qualityChecks?.map((category) => (\r\n                      <div key={category?.category} className=\"space-y-2\">\r\n                        <h5 className=\"text-sm font-medium\">{category?.category}</h5>\r\n                        {category?.items?.map((item, index) => {\r\n                          const checkKey = `${category?.category}-${index}`;\r\n                          return (\r\n                            <div key={checkKey} className=\"flex items-center space-x-2 ml-2\">\r\n                              <Checkbox\r\n                                id={checkKey}\r\n                                checked={qualityData?.checks?.[checkKey] || false}\r\n                                onChange={(e) => handleCheckChange(checkKey, e?.target?.checked)}\r\n                              />\r\n                              <label htmlFor={checkKey} className=\"text-sm cursor-pointer\">\r\n                                {item}\r\n                              </label>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  {/* Photo Evidence */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-2\">\r\n                      Evidencia Final\r\n                    </label>\r\n                    <div className=\"border-2 border-dashed border-muted-foreground/30 rounded-lg p-3 text-center\">\r\n                      <input\r\n                        type=\"file\"\r\n                        multiple\r\n                        accept=\"image/*\"\r\n                        onChange={handlePhotoUpload}\r\n                        className=\"hidden\"\r\n                        id=\"quality-photos\"\r\n                      />\r\n                      <label htmlFor=\"quality-photos\" className=\"cursor-pointer\">\r\n                        <Icon name=\"Camera\" size={24} className=\"mx-auto mb-1 text-muted-foreground\" />\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          Fotos del producto final\r\n                        </div>\r\n                      </label>\r\n                    </div>\r\n\r\n                    {qualityData?.photos?.length > 0 && (\r\n                      <div className=\"mt-2 grid grid-cols-4 gap-1\">\r\n                        {qualityData?.photos?.map((photo, index) => (\r\n                          <div key={index} className=\"relative\">\r\n                            <img \r\n                              src={photo?.url} \r\n                              alt={photo?.name}\r\n                              className=\"w-full h-12 object-cover rounded\"\r\n                            />\r\n                            <button\r\n                              onClick={() => setQualityData(prev => ({\r\n                                ...prev,\r\n                                photos: prev?.photos?.filter((_, i) => i !== index)\r\n                              }))}\r\n                              className=\"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs\"\r\n                            >\r\n                              √ó\r\n                            </button>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Notes */}\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-1\">\r\n                      Observaciones\r\n                    </label>\r\n                    <textarea\r\n                      value={qualityData?.notes}\r\n                      onChange={(e) => setQualityData(prev => ({ ...prev, notes: e?.target?.value }))}\r\n                      className=\"w-full p-2 border rounded text-sm resize-none\"\r\n                      rows={2}\r\n                      placeholder=\"Observaciones sobre la calidad...\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Decision */}\r\n                  {areAllChecksComplete() && (\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium mb-2\">Decisi√≥n</label>\r\n                      <div className=\"flex space-x-2\">\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={qualityData?.decision === 'approve' ? 'default' : 'outline'}\r\n                          onClick={() => handleQualityDecision('approve')}\r\n                          iconName=\"Check\"\r\n                          className=\"flex-1\"\r\n                        >\r\n                          Aprobar\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={qualityData?.decision === 'reject' ? 'destructive' : 'outline'}\r\n                          onClick={() => handleQualityDecision('reject')}\r\n                          iconName=\"X\"\r\n                          className=\"flex-1\"\r\n                        >\r\n                          Rechazar\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Submit */}\r\n                  <Button\r\n                    onClick={handleSubmitQuality}\r\n                    disabled={!qualityData?.decision}\r\n                    className=\"w-full\"\r\n                    iconName=\"Send\"\r\n                  >\r\n                    Enviar Revisi√≥n\r\n                  </Button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-8 text-muted-foreground\">\r\n                  <Icon name=\"MousePointer\" size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                  <div className=\"text-sm\">Seleccione una orden para revisar</div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default QualityControlPanel;","import React, { useState } from 'react';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        import Input from '../../../components/ui/Input';\r\n\r\n        const ChangeOrderPanel = ({ workOrders, onChangeOrder }) => {\r\n          const [selectedOrder, setSelectedOrder] = useState(null);\r\n          const [changeData, setChangeData] = useState({\r\n            type: '',\r\n            description: '',\r\n            reason: '',\r\n            impact: '',\r\n            requestedBy: '',\r\n            approved: false\r\n          });\r\n          const [showHistory, setShowHistory] = useState(false);\r\n\r\n          const changeTypes = [\r\n            { value: 'client', label: 'Cambio del Cliente' },\r\n            { value: 'engineering', label: 'Cambio de Ingenier√≠a' },\r\n            { value: 'material', label: 'Cambio de Material' },\r\n            { value: 'process', label: 'Cambio de Proceso' }\r\n          ];\r\n\r\n          const handleOrderSelect = (order) => {\r\n            setSelectedOrder(order);\r\n            setChangeData({\r\n              type: '',\r\n              description: '',\r\n              reason: '',\r\n              impact: '',\r\n              requestedBy: '',\r\n              approved: false\r\n            });\r\n            setShowHistory(false);\r\n          };\r\n\r\n          const handleSubmitChange = () => {\r\n            if (selectedOrder && changeData?.type && changeData?.description) {\r\n              onChangeOrder?.(selectedOrder?.id, changeData);\r\n              setChangeData({\r\n                type: '',\r\n                description: '',\r\n                reason: '',\r\n                impact: '',\r\n                requestedBy: '',\r\n                approved: false\r\n              });\r\n            }\r\n          };\r\n\r\n          const getChangeTypeIcon = (type) => {\r\n            const icons = {\r\n              'client': 'User',\r\n              'engineering': 'Cog',\r\n              'material': 'Package',\r\n              'process': 'Settings'\r\n            };\r\n            return icons?.[type] || 'Edit';\r\n          };\r\n\r\n          const getChangeTypeColor = (type) => {\r\n            const colors = {\r\n              'client': 'text-blue-600 bg-blue-50',\r\n              'engineering': 'text-purple-600 bg-purple-50',\r\n              'material': 'text-green-600 bg-green-50',\r\n              'process': 'text-orange-600 bg-orange-50'\r\n            };\r\n            return colors?.[type] || 'text-gray-600 bg-gray-50';\r\n          };\r\n\r\n          return (\r\n            <div className=\"bg-card border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"Edit\" className=\"text-orange-500\" size={20} />\r\n                  <h3 className=\"font-medium\">√ìrdenes de Cambio</h3>\r\n                </div>\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"outline\"\r\n                  onClick={() => setShowHistory(!showHistory)}\r\n                  iconName=\"History\"\r\n                >\r\n                  {showHistory ? 'Nueva' : 'Historial'}\r\n                </Button>\r\n              </div>\r\n              {!showHistory ? (\r\n                <div className=\"space-y-4\">\r\n                  {/* Orders List */}\r\n                  <div>\r\n                    <h4 className=\"text-sm font-medium mb-2\">√ìrdenes Activas</h4>\r\n                    <div className=\"space-y-2 max-h-32 overflow-y-auto\">\r\n                      {workOrders?.slice(0, 5)?.map((order) => (\r\n                        <div\r\n                          key={order?.id}\r\n                          onClick={() => handleOrderSelect(order)}\r\n                          className={`p-2 border rounded cursor-pointer text-sm transition-colors ${\r\n                            selectedOrder?.id === order?.id\r\n                              ? 'border-primary bg-primary/10' :'border-muted hover:border-primary/50'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex justify-between items-center\">\r\n                            <div>\r\n                              <div className=\"font-medium\">{order?.id}</div>\r\n                              <div className=\"text-xs text-muted-foreground\">{order?.clientName}</div>\r\n                            </div>\r\n                            {order?.changeOrders?.length > 0 && (\r\n                              <div className=\"flex items-center space-x-1 text-orange-600\">\r\n                                <Icon name=\"Edit\" size={12} />\r\n                                <span className=\"text-xs\">{order?.changeOrders?.length}</span>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {selectedOrder && (\r\n                    <div className=\"space-y-3 border-t pt-4\">\r\n                      {/* Order Info */}\r\n                      <div className=\"bg-muted p-3 rounded-lg\">\r\n                        <div className=\"text-sm font-medium\">{selectedOrder?.id}</div>\r\n                        <div className=\"text-xs text-muted-foreground\">\r\n                          {selectedOrder?.clientName} ‚Ä¢ {selectedOrder?.statusLabel}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Change Type */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Tipo de Cambio</label>\r\n                        <div className=\"grid grid-cols-2 gap-1\">\r\n                          {changeTypes?.map((type) => (\r\n                            <button\r\n                              key={type?.value}\r\n                              onClick={() => setChangeData(prev => ({ ...prev, type: type?.value }))}\r\n                              className={`p-2 text-xs border rounded transition-colors ${\r\n                                changeData?.type === type?.value\r\n                                  ? 'border-primary bg-primary/10 text-primary' :'border-muted hover:border-primary/50'\r\n                              }`}\r\n                            >\r\n                              {type?.label}\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Description */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Descripci√≥n del Cambio</label>\r\n                        <textarea\r\n                          value={changeData?.description}\r\n                          onChange={(e) => setChangeData(prev => ({ ...prev, description: e?.target?.value }))}\r\n                          className=\"w-full p-2 border rounded text-sm resize-none\"\r\n                          rows={2}\r\n                          placeholder=\"Describir el cambio requerido...\"\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Reason */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Raz√≥n</label>\r\n                        <Input\r\n                          value={changeData?.reason}\r\n                          onChange={(e) => setChangeData(prev => ({ ...prev, reason: e?.target?.value }))}\r\n                          placeholder=\"¬øPor qu√© es necesario este cambio?\"\r\n                          className=\"text-sm\"\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Impact */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Impacto</label>\r\n                        <Input\r\n                          value={changeData?.impact}\r\n                          onChange={(e) => setChangeData(prev => ({ ...prev, impact: e?.target?.value }))}\r\n                          placeholder=\"Tiempo adicional, materiales, etc.\"\r\n                          className=\"text-sm\"\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Requested By */}\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Solicitado Por</label>\r\n                        <Input\r\n                          value={changeData?.requestedBy}\r\n                          onChange={(e) => setChangeData(prev => ({ ...prev, requestedBy: e?.target?.value }))}\r\n                          placeholder=\"Nombre del solicitante\"\r\n                          className=\"text-sm\"\r\n                        />\r\n                      </div>\r\n\r\n                      {/* Submit */}\r\n                      <Button\r\n                        onClick={handleSubmitChange}\r\n                        disabled={!changeData?.type || !changeData?.description}\r\n                        className=\"w-full\"\r\n                        size=\"sm\"\r\n                        iconName=\"Plus\"\r\n                      >\r\n                        Registrar en Bit√°cora\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n\r\n                  {!selectedOrder && (\r\n                    <div className=\"text-center py-6 text-muted-foreground\">\r\n                      <Icon name=\"MousePointer\" size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                      <div className=\"text-sm\">Seleccione una orden para registrar cambios</div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                /* Change History */\r\n                (<div className=\"space-y-3\">\r\n                  <h4 className=\"text-sm font-medium\">Historial de Cambios</h4>\r\n                  <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n                    {workOrders\r\n                      ?.filter(order => order?.changeOrders?.length > 0)\r\n                      ?.map((order) => (\r\n                      <div key={order?.id}>\r\n                        {order?.changeOrders?.map((change, index) => (\r\n                          <div key={`${order?.id}-${index}`} className=\"p-3 border rounded-lg\">\r\n                            <div className=\"flex items-start justify-between mb-2\">\r\n                              <div className=\"flex items-center space-x-2\">\r\n                                <Icon \r\n                                  name={getChangeTypeIcon(change?.type)} \r\n                                  size={16}\r\n                                />\r\n                                <div>\r\n                                  <div className=\"text-sm font-medium\">{order?.id}</div>\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {change?.date || 'Fecha no disponible'}\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                              <div className={`px-2 py-1 rounded-full text-xs font-medium ${getChangeTypeColor(change?.type || 'client')}`}>\r\n                                {changeTypes?.find(t => t?.value === change?.type)?.label || 'Cliente'}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"text-sm text-foreground mb-1\">\r\n                              {change?.description}\r\n                            </div>\r\n                            {change?.reason && (\r\n                              <div className=\"text-xs text-muted-foreground\">\r\n                                Raz√≥n: {change?.reason}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  {workOrders?.filter(order => order?.changeOrders?.length > 0)?.length === 0 && (\r\n                    <div className=\"text-center py-6 text-muted-foreground\">\r\n                      <Icon name=\"History\" size={32} className=\"mx-auto mb-2 opacity-50\" />\r\n                      <div className=\"text-sm\">No hay cambios registrados</div>\r\n                    </div>\r\n                  )}\r\n                </div>)\r\n              )}\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default ChangeOrderPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport WorkflowBoard from './components/WorkflowBoard';\r\nimport useOperacAlt from '../../hooks/useOperacAlt';\r\nimport WorkflowControls from './components/WorkflowControls';\r\nimport MaterialReceptionPanel from './components/MaterialReceptionPanel';\r\nimport SafetyChecklistPanel from './components/SafetyChecklistPanel';\r\nimport AttendancePanel from './components/AttendancePanel';\r\nimport QualityControlPanel from './components/QualityControlPanel';\r\nimport ChangeOrderPanel from './components/ChangeOrderPanel';\r\n\r\nconst WorkshopOperationsManagement = () => {\r\n  const [workOrders, setWorkOrders] = useState([]);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [activePanel, setActivePanel] = useState('workflow');\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [panelMissingByOrder, setPanelMissingByOrder] = useState({});\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [currentShift, setCurrentShift] = useState('morning');\r\n  const { oportunities, getOportunities, updateWorkOrder: updateWorkOrderRemote, deleteWorkOrder: deleteWorkOrderRemote } = useOperacAlt();\r\n\r\n  useEffect(() => {\r\n    const loadWorkOrders = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const data = await getOportunities();\r\n        setWorkOrders(Array.isArray(data) ? data : []);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadWorkOrders();\r\n  }, []);\r\n\r\n  const handleOrderStatusChange = (orderId, newStatus, payload = {}) => {\r\n    if (payload && payload.hidden) {\r\n      try {\r\n        const matched = (workOrders || []).find(order => {\r\n          if (!order) return false;\r\n          const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n          return candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n        });\r\n\r\n        const backendId = matched?.id || matched?.ordenTrabajo || matched?.folio || null;\r\n\r\n        if (backendId && deleteWorkOrderRemote) {\r\n          const doRemoteDelete = () => {\r\n            return deleteWorkOrderRemote(backendId).then((success) => {\r\n              if (success) {\r\n                setWorkOrders(prev => {\r\n                  const list = prev || [];\r\n                  return list.filter(order => {\r\n                    if (!order) return false;\r\n                    const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n                    return !candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n                  });\r\n                });\r\n              }\r\n              return success;\r\n            }).catch(() => {\r\n              return false;\r\n            });\r\n          };\r\n\r\n          if (backendId && updateWorkOrderRemote) {\r\n            updateWorkOrderRemote(backendId, { estadoProgreso: 100, completed: true })\r\n              .then(() => doRemoteDelete())\r\n              .catch(() => doRemoteDelete());\r\n          } else {\r\n            doRemoteDelete();\r\n          }\r\n        } else {\r\n        }\r\n      } catch (e) {\r\n       //ignora los errores\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    setWorkOrders(prev => (prev || []).map(order => {\r\n      if (!order) return order;\r\n      const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n      const matches = candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n      if (!matches) return order;\r\n      return {\r\n        ...order,\r\n        status: newStatus,\r\n        statusLabel: getStatusLabel(newStatus),\r\n        ...(payload.estadoProgreso !== undefined ? { estadoProgreso: payload.estadoProgreso } : {}),\r\n        ...(payload.completed ? { completed: true } : {})\r\n      };\r\n    }));\r\n    try {\r\n      const matched = (workOrders || []).find(order => {\r\n        if (!order) return false;\r\n        const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n        return candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n      });\r\n      const backendId = matched?.id || matched?.ordenTrabajo || matched?.folio || null;\r\n      if (backendId && updateWorkOrderRemote) {\r\n        // send the payload + status so backend can update progress/status\r\n        const remotePayload = { ...(payload || {}), status: newStatus };\r\n        updateWorkOrderRemote(backendId, remotePayload).catch(() => {\r\n          // already handled inside hook (notifications)\r\n        });\r\n      } else {\r\n        // no backend id or updateWorkOrderRemote available for this order\r\n      }\r\n    } catch (e) {\r\n      // error while attempting remote update\r\n    }\r\n  };\r\n\r\n          // Force-remove helper (used by debug control) - removes matching order by id/ordenTrabajo/folio or by JSON substring\r\n          const handleForceRemove = (orderId) => {\r\n            if (!orderId) return;\r\n            setWorkOrders(prev => {\r\n              const list = prev || [];\r\n              // attempt exact-field removal first\r\n              const directMatches = list.filter(order => {\r\n                if (!order) return false;\r\n                const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n                return candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n              });\r\n              if (directMatches.length > 0) {\r\n                return list.filter(order => {\r\n                  if (!order) return false;\r\n                  const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n                  return !candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n                });\r\n              }\r\n\r\n              // fallback: remove by JSON substring\r\n              try {\r\n                const needle = String(orderId);\r\n                return list.filter(order => {\r\n                  try { return !JSON.stringify(order).includes(needle); } catch (e) { return true; }\r\n                });\r\n              } catch (e) {\r\n                return list;\r\n              }\r\n            });\r\n          };\r\n\r\n          const getStatusLabel = (status) => {\r\n            const statusLabels = {\r\n              'material-reception': 'Recepci√≥n Material',\r\n              'safety-checklist': 'Lista Seguridad',\r\n              'manufacturing': 'Fabricaci√≥n',\r\n              'quality-control': 'Control Calidad',\r\n              'ready-shipment': 'Listo Env√≠o'\r\n            };\r\n            return statusLabels?.[status] || status;\r\n          };\r\n\r\n          // map various backend status/estado strings to canonical column ids\r\n          const mapToColumnId = (val) => {\r\n            if (!val) return '';\r\n            const v = String(val).toLowerCase().trim();\r\n            if (['material-reception','recepcion material','recepci√≥n material','recepci√≥n_material','recepci√≥n','pendiente','pendiente por revisar','new','nuevo'].includes(v)) return 'material-reception';\r\n            if (['safety-checklist','lista seguridad','seguridad','safety','checklist seguridad'].includes(v)) return 'safety-checklist';\r\n            if (['manufacturing','fabricaci√≥n','fabricacion','en progreso','progreso','producci√≥n','produccion','en pausa','pausa','pausado'].includes(v)) return 'manufacturing';\r\n            if (['quality-control','control calidad','calidad','qc','quality','revisi√≥n'].includes(v)) return 'quality-control';\r\n            if (['ready-shipment','listo env√≠o','listo envio','env√≠o','envio','enviado','completada','completado','listo'].includes(v)) return 'ready-shipment';\r\n            // fallback: if it's already a canonical id\r\n            if (['material-reception','safety-checklist','manufacturing','quality-control','ready-shipment'].includes(v)) return v;\r\n            return '';\r\n          };\r\n\r\n          const columns = ['material-reception','safety-checklist','manufacturing','quality-control','ready-shipment'];\r\n\r\n          const getPreviousColumn = (current) => {\r\n            const idx = columns.indexOf(current);\r\n            if (idx <= 0) return columns[0];\r\n            return columns[idx - 1];\r\n          };\r\n\r\n          const computeProgressForColumn = (col) => {\r\n            const idx = columns.indexOf(col);\r\n            if (idx < 0) return 0;\r\n            return Math.round((idx / (columns.length - 1)) * 100);\r\n          };\r\n\r\n          // allow parent to revert an order to previous status and restore progress\r\n          const handleRevertStatus = (orderRef) => {\r\n            setWorkOrders(prev => (prev || []).map(order => {\r\n              if (!order) return order;\r\n              // build candidate values for the existing order\r\n              const orderCandidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio].filter(Boolean).map(String);\r\n\r\n              // build candidate values from the provided reference (could be a string id or the selected object)\r\n              let refCandidates = [];\r\n              try {\r\n                if (orderRef && typeof orderRef === 'object') {\r\n                  refCandidates = [orderRef?.id, orderRef?.ordenTrabajo, orderRef?.folio, orderRef?.raw?.id, orderRef?.raw?.ordenTrabajo, orderRef?.raw?.folio].filter(Boolean).map(String);\r\n                } else {\r\n                  refCandidates = [String(orderRef)];\r\n                }\r\n              } catch (e) {\r\n                refCandidates = [String(orderRef || '')];\r\n              }\r\n\r\n              const matches = orderCandidates.some(oc => refCandidates.some(rc => rc === oc));\r\n\r\n              // fallback: if no exact match, allow substring match against serialized orderRef when it's a string\r\n              if (!matches) {\r\n                try {\r\n                  const needle = typeof orderRef === 'string' ? orderRef : JSON.stringify(orderRef || '');\r\n                  if (needle && JSON.stringify(order).includes(needle)) {\r\n                    // consider this a match\r\n                  } else return order;\r\n                } catch (e) {\r\n                  return order;\r\n                }\r\n              }\r\n\r\n              const current = mapToColumnId(order?.status || order?.estado || '');\r\n              const prevCol = getPreviousColumn(current || columns[0]);\r\n              const restoredProgress = computeProgressForColumn(prevCol);\r\n              \r\n              // Persistir el cambio en la base de datos\r\n              const backendId = order?.id || order?.raw?.id;\r\n              if (backendId && updateWorkOrderRemote) {\r\n                const remotePayload = {\r\n                  status: prevCol,\r\n                  estado: prevCol,\r\n                  estadoProgreso: restoredProgress,\r\n                  progress: restoredProgress\r\n                };\r\n                updateWorkOrderRemote(backendId, remotePayload).catch((err) => {\r\n                  console.error('[handleRevertStatus] Error al actualizar en BD:', err);\r\n                });\r\n              }\r\n              \r\n              return {\r\n                ...order,\r\n                status: prevCol,\r\n                statusLabel: getStatusLabel(prevCol),\r\n                estadoProgreso: restoredProgress,\r\n                progress: restoredProgress\r\n              };\r\n            }));\r\n          };\r\n\r\n          const handleMaterialReception = (orderId, receptionData) => {\r\n            setWorkOrders(prev => prev?.map(order => \r\n              order?.id === orderId \r\n                ? { \r\n                    ...order, \r\n                    materials: {\r\n                      ...order?.materials,\r\n                      received: receptionData?.cantidadRecibida || receptionData?.received || 0,\r\n                      total: receptionData?.materials?.reduce((sum, m) => sum + (Number(m.required) || 0), 0) || order?.materials?.total || 0,\r\n                      status: receptionData?.status,\r\n                      issues: receptionData?.problemasFaltantes || receptionData?.issues || []\r\n                    },\r\n                    recepcionMateriales: receptionData?.recepcionMateriales || {\r\n                      cantidadRecibida: receptionData?.cantidadRecibida || receptionData?.received || 0,\r\n                      notasAdicionales: receptionData?.notasAdicionales || receptionData?.notes || '',\r\n                      problemasFaltantes: receptionData?.problemasFaltantes || receptionData?.issues || [],\r\n                      totalPendientes: receptionData?.totalPendientes || receptionData?.pendientes || 0,\r\n                      status: receptionData?.status,\r\n                      materials: receptionData?.materials || [],\r\n                      updatedAt: receptionData?.updatedAt || new Date().toISOString()\r\n                    },\r\n                    raw: {\r\n                      ...order?.raw,\r\n                      recepcionMateriales: receptionData?.recepcionMateriales || {\r\n                        cantidadRecibida: receptionData?.cantidadRecibida || receptionData?.received || 0,\r\n                        notasAdicionales: receptionData?.notasAdicionales || receptionData?.notes || '',\r\n                        problemasFaltantes: receptionData?.problemasFaltantes || receptionData?.issues || [],\r\n                        totalPendientes: receptionData?.totalPendientes || receptionData?.pendientes || 0,\r\n                        status: receptionData?.status,\r\n                        materials: receptionData?.materials || [],\r\n                        updatedAt: receptionData?.updatedAt || new Date().toISOString()\r\n                      }\r\n                    },\r\n                    status: receptionData?.status === 'complete' ? 'safety-checklist' : 'material-reception'\r\n                  }\r\n                : order\r\n            ));\r\n          };\r\n\r\n          const handleSafetyChecklist = (orderId, payload) => {\r\n            // payload can be a boolean (completed) or an object { completed: bool, missingPPE: [] }\r\n            const completed = typeof payload === 'boolean' ? payload : !!(payload && payload.completed);\r\n            const missingPPE = (payload && Array.isArray(payload.missingPPE)) ? payload.missingPPE : [];\r\n            setWorkOrders(prev => prev?.map(order => \r\n              order?.id === orderId \r\n                ? { \r\n                    ...order, \r\n                    safetyChecklistCompleted: completed,\r\n                    safetyChecklistMissing: missingPPE,\r\n                    status: completed ? 'manufacturing' : 'safety-checklist'\r\n                  }\r\n                : order\r\n            ));\r\n            try {\r\n              const matched = (workOrders || []).find(order => {\r\n                if (!order) return false;\r\n                const candidates = [order?.id, order?.ordenTrabajo, order?.folio, order?.raw?.id, order?.raw?.ordenTrabajo, order?.raw?.folio];\r\n                return candidates.some(c => c !== undefined && c !== null && String(c) === String(orderId));\r\n              });\r\n              const backendId = matched?.id || matched?.ordenTrabajo || matched?.folio || null;\r\n              if (backendId && updateWorkOrderRemote) {\r\n                // Compose remote payload - include completed and missingPPE under flexible keys\r\n                const remotePayload = {\r\n                  safetyChecklistCompleted: completed,\r\n                  safetyChecklistMissing: missingPPE,\r\n                  completed: completed\r\n                };\r\n                updateWorkOrderRemote(backendId, remotePayload).catch(() => {\r\n                  // failure to persist remotely is non-fatal; local state remains authoritative until next sync\r\n                });\r\n              }\r\n            } catch (e) {\r\n              // ignore errors\r\n            }\r\n          };\r\n\r\n          const handleQualityControl = (orderId, qcData) => {\r\n            setWorkOrders(prev => prev?.map(order => \r\n              order?.id === orderId \r\n                ? { \r\n                    ...order, \r\n                    qualityControlStatus: qcData?.status,\r\n                    status: qcData?.status === 'approved' ? 'ready-shipment' : 'quality-control'\r\n                  }\r\n                : order\r\n            ));\r\n          };\r\n\r\n          const handleChangeOrder = (orderId, changeData) => {\r\n            setWorkOrders(prev => prev?.map(order => \r\n              order?.id === orderId \r\n                ? { \r\n                    ...order, \r\n                    changeOrders: [...(order?.changeOrders || []), {\r\n                      id: Date.now(),\r\n                      ...changeData,\r\n                      date: new Date()?.toISOString()?.split('T')?.[0]\r\n                    }]\r\n                  }\r\n                : order\r\n            ));\r\n          };\r\n\r\n          const panelOptions = [\r\n            { value: 'workflow', label: 'Flujo Taller', icon: 'Workflow' },\r\n            { value: 'materials', label: 'Recepci√≥n Material', icon: 'Package' },\r\n            { value: 'safety', label: 'Seguridad', icon: 'Shield' },\r\n            { value: 'attendance', label: 'Asistencia', icon: 'Clock' },\r\n            { value: 'quality', label: 'Control Calidad', icon: 'CheckCircle' },\r\n            { value: 'changes', label: '√ìrdenes Cambio', icon: 'Edit' }\r\n          ];\r\n\r\n          if (isLoading) {\r\n            return (\r\n              <div className=\"min-h-screen bg-background flex\">\r\n                <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n                <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n                  <div className=\"flex items-center justify-center h-96\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n                      <p className=\"text-muted-foreground\">Cargando proyectos...</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          }\r\n\r\n          return (\r\n            <div className=\"min-h-screen bg-background\">\r\n              {/* Desktop Sidebar */}\r\n              <div className=\"hidden lg:block\">\r\n                <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n              </div>\r\n\r\n              {/* Mobile Header Placeholder */}\r\n              <div className=\"lg:hidden\">\r\n                <div className=\"p-4 bg-background border-b\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"text-lg font-semibold\">Gesti√≥n Operativa - Taller</div>\r\n                    <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className=\"p-2 rounded bg-muted\">\r\n                      <Icon name=\"Menu\" size={18} />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <React.StrictMode>\r\n                {null}\r\n              </React.StrictMode>\r\n\r\n              <div className={`transition-all duration-300 ${\r\n                sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n              } lg:pt-0`}>\r\n                <div className=\"container mx-auto px-4 py-8\">\r\n                  {/* Breadcrumb */}\r\n                  <div className=\"mb-6\">\r\n                    <Breadcrumb customItems={[\r\n                      { label: 'Dashboard', path: '/dashboard', icon: 'Home' },\r\n                      { label: 'Gesti√≥n Operativa - √Årea de Taller', path: '/workshop-operations-management', icon: 'Wrench', current: true }\r\n                    ]} />\r\n                  </div>\r\n                {/* Header */}\r\n                <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n                  <div>\r\n                    <h1 className=\"text-3xl font-bold text-foreground mb-2\">Gesti√≥n Operativa - √Årea de Taller</h1>\r\n                    <p className=\"text-muted-foreground\">\r\n                      Flujo completo desde recepci√≥n de materiales hasta control de calidad y env√≠o (8:00-18:00)\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                    {/* Shift Indicator */}\r\n                    <div className=\"bg-muted rounded-lg px-4 py-2\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon name=\"Clock\" size={16} className=\"text-primary\" />\r\n                        <span className=\"text-sm font-medium\">\r\n                          Turno: {currentShift === 'morning' ? '8:00 - 18:00' : 'Fuera de Horario'}\r\n                        </span>\r\n                        <div className={`w-2 h-2 rounded-full ${\r\n                          currentShift === 'morning' ? 'bg-green-500' : 'bg-red-500'\r\n                        }`}></div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex bg-muted rounded-lg p-1 overflow-x-auto no-scrollbar sticky top-20 z-40\">\r\n                      {panelOptions?.slice(0, 3)?.map((option) => (\r\n                        <button\r\n                          key={option?.value}\r\n                          onClick={() => setActivePanel(option?.value)}\r\n                          className={`flex items-center justify-center space-x-2 px-3 py-2 rounded-md transition-smooth whitespace-nowrap min-w-[96px] ${\r\n                            activePanel === option?.value\r\n                              ? 'bg-primary text-primary-foreground'\r\n                              : 'text-muted-foreground hover:text-foreground'\r\n                          }`}\r\n                        >\r\n                          <Icon name={option?.icon} size={28} />\r\n                          <span className=\"text-sm font-medium\">{option?.label}</span>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Workshop Stats */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8\">\r\n                  <div className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Icon name=\"Package\" className=\"text-blue-500\" size={20} />\r\n                      <span className=\"font-medium\">Recepci√≥n</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold\">{workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === 'material-reception')?.length}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">√ìrdenes</div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Icon name=\"Shield\" className=\"text-orange-500\" size={20} />\r\n                      <span className=\"font-medium\">Seguridad</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold\">{workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === 'safety-checklist')?.length}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">Listas</div>\r\n                  </div>\r\n\r\n                  <div className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Icon name=\"Wrench\" className=\"text-purple-500\" size={20} />\r\n                      <span className=\"font-medium\">Fabricaci√≥n</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold\">{workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === 'manufacturing')?.length}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">En Proceso</div>\r\n                  </div>\r\n\r\n                  <div className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Icon name=\"CheckCircle\" className=\"text-green-500\" size={20} />\r\n                      <span className=\"font-medium\">Calidad</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold\">{workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === 'quality-control')?.length}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">Revisi√≥n</div>\r\n                  </div>\r\n\r\n                  <div className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Icon name=\"Truck\" className=\"text-teal-500\" size={20} />\r\n                      <span className=\"font-medium\">Env√≠o</span>\r\n                    </div>\r\n                    <div className=\"text-2xl font-bold\">{workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === 'ready-shipment')?.length}</div>\r\n                    <div className=\"text-sm text-muted-foreground\">Listos</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Main Content Area */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                  {/* Primary Workflow Board */}\r\n                  <div className=\"lg:col-span-2\">\r\n                    {activePanel === 'workflow' && (\r\n                      <WorkflowBoard\r\n                        workOrders={workOrders}\r\n                        onStatusChange={handleOrderStatusChange}\r\n                        onOrderSelect={setSelectedOrder}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'materials' && (\r\n                      <MaterialReceptionPanel\r\n                        workOrders={workOrders?.filter(o => o?.status === 'material-reception')}\r\n                        selectedOrder={selectedOrder}\r\n                        onMaterialReception={handleMaterialReception}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'safety' && (() => {\r\n                      const hasPPEFields = (o) => {\r\n                        if (!o) return false;\r\n                        const keys = ['cascoSeguridad','gafasProteccion','guantesTrabajo','calzadoSeguridad','arnesSeguridad','respiradorN95','chalecoReflectivo','requiereEstudiosMedicosActualizados','safetyChecklistMissing'];\r\n                        for (const k of keys) {\r\n                          if (o[k] !== undefined) return true;\r\n                          if (o.raw && o.raw[k] !== undefined) return true;\r\n                        }\r\n                        return false;\r\n                      };\r\n\r\n                      const safetyOrders = (workOrders || []).filter(o => mapToColumnId(o?.status || o?.estado) === 'safety-checklist' || hasPPEFields(o));\r\n\r\n                      return (\r\n                        <SafetyChecklistPanel\r\n                          workOrders={safetyOrders}\r\n                          selectedOrder={selectedOrder}\r\n                          onSafetyComplete={handleSafetyChecklist}\r\n                          onLocalMissingChange={(orderId, missingArray) => {\r\n                            try {\r\n                              const key = String(orderId || (selectedOrder?.id || selectedOrder?.ordenTrabajo || ''));\r\n                              setPanelMissingByOrder(prev => ({ ...prev, [key]: Array.isArray(missingArray) ? missingArray : [] }));\r\n                            } catch (e) {}\r\n                          }}\r\n                        />\r\n                      );\r\n                    })()}\r\n                  </div>\r\n\r\n                  {/* Secondary Controls Panel */}\r\n                  <div className=\"space-y-6\">\r\n                    {(() => {\r\n                      const cols = ['material-reception','safety-checklist','manufacturing','quality-control','ready-shipment'];\r\n                      const totalActive = cols.reduce((acc, col) => acc + (workOrders?.filter(o => mapToColumnId(o?.status || o?.estado) === col)?.length || 0), 0);\r\n                      return (\r\n                        <WorkflowControls\r\n                          selectedOrder={selectedOrder}\r\n                          currentShift={currentShift}\r\n                          totalOrders={totalActive}\r\n                          workOrdersIds={(workOrders || []).map(o => o?.id || o?.ordenTrabajo || o?.folio)}\r\n                          workOrders={workOrders}\r\n                          onForceRemove={handleForceRemove}\r\n                          onRevertStatus={handleRevertStatus}\r\n                          onSafetyComplete={handleSafetyChecklist}\r\n                          localMissingByOrder={panelMissingByOrder}\r\n                        />\r\n                      );\r\n                    })()}\r\n\r\n                    {/* Secondary Panels */}\r\n                    {activePanel === 'attendance' && (\r\n                      <AttendancePanel currentShift={currentShift} />\r\n                    )}\r\n\r\n                    {activePanel === 'quality' && (\r\n                      <QualityControlPanel\r\n                        workOrders={workOrders?.filter(o => o?.status === 'quality-control')}\r\n                        onQualityUpdate={handleQualityControl}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'changes' && (\r\n                      <ChangeOrderPanel\r\n                        workOrders={workOrders}\r\n                        onChangeOrder={handleChangeOrder}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                {/* Log workOrders on change to help debugging Finalizar */}\r\n                {/* Remove this effect after verification */}\r\n                {(() => {\r\n                  try {\r\n                    // eslint-disable-next-line no-console\r\n                    console.debug('[Workshop] workOrders count:', workOrders?.length, 'ids:', (workOrders || []).map(o => o?.id || o?.ordenTrabajo || o?.folio));\r\n                  } catch (e) {}\r\n                  return null;\r\n                })()}\r\n                {/* Empty State */}\r\n                {workOrders?.length === 0 && !isLoading && (\r\n                  <div className=\"text-center py-12\">\r\n                    <Icon name=\"Wrench\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                    <h3 className=\"text-lg font-medium text-foreground mb-2\">No hay √≥rdenes de trabajo</h3>\r\n                    <p className=\"text-muted-foreground mb-6\">\r\n                      Las √≥rdenes aparecer√°n aqu√≠ cuando sean enviadas por el √°rea de Proyectos\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          );\r\n        };\r\n\r\n        export default WorkshopOperationsManagement;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst WorkflowBoard = ({\r\n  workOrders = [],\r\n  onStageUpdate,\r\n  onMaterialReception,\r\n  onSafetyChecklist,\r\n  onManufacturingUpdate,\r\n  onQualityControl,\r\n  onEvidenceSubmission,\r\n  onChangeOrder,\r\n  onReportToProjects,\r\n  onRequestToPurchases\r\n}) => {\r\n  const stages = [\r\n    {\r\n      id: 'material_reception',\r\n      name: 'Recepci√≥n de Materiales',\r\n      color: 'bg-blue-500',\r\n      icon: 'Package'\r\n    },\r\n    {\r\n      id: 'safety_attendance',\r\n      name: 'Seguridad y Asistencia',\r\n      color: 'bg-orange-500',\r\n      icon: 'Shield'\r\n    },\r\n    {\r\n      id: 'manufacturing',\r\n      name: 'Fabricaci√≥n',\r\n      color: 'bg-purple-500',\r\n      icon: 'Wrench'\r\n    },\r\n    {\r\n      id: 'quality_control',\r\n      name: 'Control de Calidad',\r\n      color: 'bg-green-500',\r\n      icon: 'CheckCircle'\r\n    },\r\n    {\r\n      id: 'evidence_submission',\r\n      name: 'Env√≠o de Evidencias',\r\n      color: 'bg-indigo-500',\r\n      icon: 'Camera'\r\n    }\r\n  ];\r\n\r\n  const getStatusColor = (workOrder, stage) => {\r\n    if (workOrder?.stage !== stage?.id) return 'border-border';\r\n    \r\n    switch (workOrder?.priority) {\r\n      case 'Cr√≠tica': return 'border-red-500 bg-red-50';\r\n      case 'Alta': return 'border-orange-500 bg-orange-50';\r\n      case 'Media': return 'border-yellow-500 bg-yellow-50';\r\n      case 'Baja': return 'border-green-500 bg-green-50';\r\n      default: return 'border-border';\r\n    }\r\n  };\r\n\r\n  const handleWorkOrderAction = (workOrder, action) => {\r\n    switch (action) {\r\n      case 'verify_materials':\r\n        onMaterialReception?.(workOrder?.id, { status: 'in_progress' });\r\n        break;\r\n      case 'complete_safety':\r\n        onSafetyChecklist?.(workOrder?.id, { status: 'completed' });\r\n        break;\r\n      case 'update_progress':\r\n        onManufacturingUpdate?.(workOrder?.id, { progress: workOrder?.manufacturing?.progress + 25 });\r\n        break;\r\n      case 'quality_check':\r\n        onQualityControl?.(workOrder?.id, { status: 'in_progress' });\r\n        break;\r\n      case 'submit_evidence':\r\n        onEvidenceSubmission?.(workOrder?.id, { status: 'completed', submittedToProjects: true });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const renderWorkOrderCard = (workOrder) => (\r\n    <div\r\n      key={workOrder?.id}\r\n      className={`bg-card border rounded-lg p-4 mb-3 card-shadow ${getStatusColor(workOrder, stages?.find(s => s?.id === workOrder?.stage))}`}\r\n    >\r\n      <div className=\"flex items-start justify-between mb-3\">\r\n        <div>\r\n          <h4 className=\"font-semibold text-sm text-foreground\">{workOrder?.orderNumber}</h4>\r\n          <p className=\"text-xs text-muted-foreground\">{workOrder?.projectReference}</p>\r\n        </div>\r\n        <div className={`px-2 py-1 rounded text-xs font-medium ${\r\n          workOrder?.priority === 'Cr√≠tica' ? 'bg-red-100 text-red-800' :\r\n          workOrder?.priority === 'Alta' ? 'bg-orange-100 text-orange-800' :\r\n          workOrder?.priority === 'Media'? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n        }`}>\r\n          {workOrder?.priority}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Icon name=\"Users\" size={14} className=\"text-muted-foreground\" />\r\n          <div className=\"flex -space-x-1\">\r\n            {workOrder?.assignedTechnicians?.slice(0, 2)?.map((tech, index) => (\r\n              <div\r\n                key={tech?.id}\r\n                className=\"w-6 h-6 bg-secondary rounded-full flex items-center justify-center text-xs font-medium text-secondary-foreground\"\r\n                title={`${tech?.name} - ${tech?.role}`}\r\n              >\r\n                {tech?.name?.charAt(0)}\r\n              </div>\r\n            ))}\r\n            {workOrder?.assignedTechnicians?.length > 2 && (\r\n              <div className=\"w-6 h-6 bg-muted rounded-full flex items-center justify-center text-xs font-medium text-muted-foreground\">\r\n                +{workOrder?.assignedTechnicians?.length - 2}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stage-specific info */}\r\n        {workOrder?.stage === 'material_reception' && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-xs text-muted-foreground\">Materiales:</span>\r\n              <span className={`text-xs font-medium ${\r\n                workOrder?.materialsReceived?.status === 'completed' ? 'text-green-600' :\r\n                workOrder?.materialsReceived?.status === 'in_progress'? 'text-orange-600' : 'text-red-600'\r\n              }`}>\r\n                {workOrder?.materialsReceived?.items?.filter(item => item?.received)?.length || 0}/{workOrder?.materialsReceived?.items?.length || 0}\r\n              </span>\r\n            </div>\r\n            {workOrder?.materialsReceived?.status !== 'completed' && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => handleWorkOrderAction(workOrder, 'verify_materials')}\r\n                className=\"w-full text-xs\"\r\n              >\r\n                Verificar Materiales\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {workOrder?.stage === 'safety_attendance' && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-xs text-muted-foreground\">Seguridad:</span>\r\n              <span className={`text-xs font-medium ${\r\n                workOrder?.safetyChecklist?.status === 'completed' ? 'text-green-600' :\r\n                workOrder?.safetyChecklist?.status === 'in_progress'? 'text-orange-600' : 'text-red-600'\r\n              }`}>\r\n                {workOrder?.safetyChecklist?.items?.filter(item => item?.checked)?.length || 0}/{workOrder?.safetyChecklist?.items?.length || 0}\r\n              </span>\r\n            </div>\r\n            {workOrder?.safetyChecklist?.status !== 'completed' && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => handleWorkOrderAction(workOrder, 'complete_safety')}\r\n                className=\"w-full text-xs\"\r\n              >\r\n                Completar Checklist\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {workOrder?.stage === 'manufacturing' && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-xs text-muted-foreground\">Progreso:</span>\r\n              <span className=\"text-xs font-medium text-foreground\">{workOrder?.manufacturing?.progress || 0}%</span>\r\n            </div>\r\n            <div className=\"w-full bg-muted rounded-full h-2\">\r\n              <div \r\n                className=\"bg-primary h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${workOrder?.manufacturing?.progress || 0}%` }}\r\n              />\r\n            </div>\r\n            {workOrder?.manufacturing?.progress < 100 && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => handleWorkOrderAction(workOrder, 'update_progress')}\r\n                className=\"w-full text-xs\"\r\n              >\r\n                Actualizar Progreso\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {workOrder?.stage === 'quality_control' && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-xs text-muted-foreground\">Calidad:</span>\r\n              <span className={`text-xs font-medium ${\r\n                workOrder?.qualityControl?.status === 'completed' ? 'text-green-600' :\r\n                workOrder?.qualityControl?.status === 'in_progress'? 'text-orange-600' : 'text-red-600'\r\n              }`}>\r\n                {workOrder?.qualityControl?.checkpoints?.filter(cp => cp?.passed === true)?.length || 0}/{workOrder?.qualityControl?.checkpoints?.length || 0}\r\n              </span>\r\n            </div>\r\n            {workOrder?.qualityControl?.status !== 'completed' && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => handleWorkOrderAction(workOrder, 'quality_check')}\r\n                className=\"w-full text-xs\"\r\n              >\r\n                Inspecci√≥n\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {workOrder?.stage === 'evidence_submission' && (\r\n          <div className=\"space-y-1\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <span className=\"text-xs text-muted-foreground\">Evidencias:</span>\r\n              <span className={`text-xs font-medium ${\r\n                workOrder?.evidenceSubmission?.submittedToProjects ? 'text-green-600' : 'text-orange-600'\r\n              }`}>\r\n                {workOrder?.evidenceSubmission?.photos?.length || 0} fotos, {workOrder?.evidenceSubmission?.documents?.length || 0} docs\r\n              </span>\r\n            </div>\r\n            {!workOrder?.evidenceSubmission?.submittedToProjects && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                onClick={() => handleWorkOrderAction(workOrder, 'submit_evidence')}\r\n                className=\"w-full text-xs\"\r\n              >\r\n                Enviar a Proyectos\r\n              </Button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Change orders indicator */}\r\n        {workOrder?.changeOrders?.length > 0 && (\r\n          <div className=\"flex items-center space-x-1 mt-2 pt-2 border-t border-border\">\r\n            <Icon name=\"AlertTriangle\" size={12} className=\"text-warning\" />\r\n            <span className=\"text-xs text-warning\">{workOrder?.changeOrders?.length} cambio(s)</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Workflow\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Tablero de Flujo Operativo</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Kanban del flujo de trabajo del taller</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"RefreshCw\">\r\n            Actualizar\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Filter\">\r\n            Filtros\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-4\">\r\n        {stages?.map((stage) => {\r\n          const stageWorkOrders = workOrders?.filter(wo => wo?.stage === stage?.id) || [];\r\n          \r\n          return (\r\n            <div key={stage?.id} className=\"space-y-3\">\r\n              <div className={`${stage?.color} text-white p-3 rounded-lg`}>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name={stage?.icon} size={16} color=\"white\" />\r\n                    <h3 className=\"font-medium text-sm\">{stage?.name}</h3>\r\n                  </div>\r\n                  <div className=\"w-6 h-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center\">\r\n                    <span className=\"text-xs font-bold\">{stageWorkOrders?.length}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2 max-h-96 overflow-y-auto\">\r\n                {stageWorkOrders?.map(workOrder => renderWorkOrderCard(workOrder))}\r\n                \r\n                {stageWorkOrders?.length === 0 && (\r\n                  <div className=\"text-center py-8\">\r\n                    <Icon name={stage?.icon} size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                    <p className=\"text-sm text-muted-foreground\">No hay √≥rdenes en esta etapa</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkflowBoard;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst MaterialReceptionPanel = ({ \r\n  workOrders = [], \r\n  onMaterialReception, \r\n  onReportToProjects, \r\n  onRequestToPurchases \r\n}) => {\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [materialPhotos, setMaterialPhotos] = useState([]);\r\n  const [notes, setNotes] = useState('');\r\n  const [selectedMaterials, setSelectedMaterials] = useState([]);\r\n\r\n  const handleMaterialCheck = (workOrderId, materialIndex, status, condition) => {\r\n    const workOrder = workOrders?.find(wo => wo?.id === workOrderId);\r\n    if (!workOrder) return;\r\n\r\n    const updatedItems = workOrder?.materialsReceived?.items?.map((item, index) => \r\n      index === materialIndex \r\n        ? { ...item, received: status === 'received', condition }\r\n        : item\r\n    );\r\n\r\n    const allReceived = updatedItems?.every(item => item?.received);\r\n    const hasDefects = updatedItems?.some(item => item?.condition === 'defective');\r\n\r\n    onMaterialReception?.(workOrderId, {\r\n      status: allReceived ? 'completed' : 'in_progress',\r\n      items: updatedItems,\r\n      photos: materialPhotos,\r\n      notes: notes\r\n    });\r\n\r\n    // Report defects to Projects\r\n    if (hasDefects) {\r\n      const defectiveItems = updatedItems?.filter(item => item?.condition === 'defective');\r\n      onReportToProjects?.(workOrderId, 'defect_report', {\r\n        defectiveItems,\r\n        photos: materialPhotos,\r\n        notes\r\n      });\r\n    }\r\n\r\n    // Request replacements from Purchases\r\n    const missingItems = updatedItems?.filter(item => !item?.received);\r\n    if (missingItems?.length > 0) {\r\n      onRequestToPurchases?.(workOrderId, 'replacement_request', {\r\n        missingItems,\r\n        notes\r\n      });\r\n    }\r\n  };\r\n\r\n  const handlePhotoUpload = (event) => {\r\n    const files = Array.from(event?.target?.files || []);\r\n    const photoUrls = files?.map(file => URL.createObjectURL(file));\r\n    setMaterialPhotos(prev => [...prev, ...photoUrls]);\r\n  };\r\n\r\n  const handleCompleteReception = (workOrder) => {\r\n    const allItemsProcessed = workOrder?.materialsReceived?.items?.every(item => \r\n      item?.received !== undefined\r\n    );\r\n    \r\n    if (!allItemsProcessed) {\r\n      alert('Por favor verifica todos los materiales antes de completar la recepci√≥n.');\r\n      return;\r\n    }\r\n\r\n    const completeItems = workOrder?.materialsReceived?.items?.filter(item => \r\n      item?.received && item?.condition === 'good'\r\n    );\r\n    \r\n    const hasCompleteItems = completeItems?.length > 0;\r\n\r\n    onMaterialReception?.(workOrder?.id, {\r\n      status: hasCompleteItems ? 'completed' : 'pending',\r\n      items: workOrder?.materialsReceived?.items,\r\n      photos: materialPhotos,\r\n      notes: notes,\r\n      completedAt: new Date()?.toISOString()\r\n    });\r\n\r\n    // Reset form\r\n    setSelectedOrder(null);\r\n    setMaterialPhotos([]);\r\n    setNotes('');\r\n    setSelectedMaterials([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Package\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Recepci√≥n de Materiales</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Verificaci√≥n y registro de materiales recibidos</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Camera\">\r\n            C√°mara\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\">\r\n            Reporte\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {workOrders?.length === 0 ? (\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"Package\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">No hay materiales pendientes</h3>\r\n          <p className=\"text-muted-foreground\">Todos los materiales han sido recibidos y verificados</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {workOrders?.map((workOrder) => (\r\n            <div key={workOrder?.id} className=\"border border-border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground\">{workOrder?.orderNumber}</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">{workOrder?.projectReference}</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Cliente: {workOrder?.clientName}</p>\r\n                </div>\r\n                <div className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                  workOrder?.priority === 'Cr√≠tica' ? 'bg-red-100 text-red-800' :\r\n                  workOrder?.priority === 'Alta' ? 'bg-orange-100 text-orange-800' :\r\n                  workOrder?.priority === 'Media'? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                }`}>\r\n                  {workOrder?.priority}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <h4 className=\"font-medium text-sm text-foreground mb-2\">Lista de Materiales:</h4>\r\n                \r\n                {workOrder?.materialsReceived?.items?.map((material, materialIndex) => (\r\n                  <div key={materialIndex} className=\"flex items-center justify-between p-3 bg-muted rounded-lg\">\r\n                    <div className=\"flex-1\">\r\n                      <p className=\"font-medium text-sm text-foreground\">{material?.name}</p>\r\n                      <p className=\"text-xs text-muted-foreground\">Cantidad: {material?.quantity}</p>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center space-x-2\">\r\n                      {/* Material status buttons */}\r\n                      <div className=\"flex items-center space-x-1\">\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={material?.received && material?.condition === 'good' ? 'default' : 'outline'}\r\n                          onClick={() => handleMaterialCheck(workOrder?.id, materialIndex, 'received', 'good')}\r\n                          className=\"text-xs px-2 py-1\"\r\n                        >\r\n                          <Icon name=\"CheckCircle\" size={12} className=\"mr-1\" />\r\n                          Bueno\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={material?.condition === 'defective' ? 'destructive' : 'outline'}\r\n                          onClick={() => handleMaterialCheck(workOrder?.id, materialIndex, 'received', 'defective')}\r\n                          className=\"text-xs px-2 py-1\"\r\n                        >\r\n                          <Icon name=\"XCircle\" size={12} className=\"mr-1\" />\r\n                          Defecto\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={!material?.received ? 'secondary' : 'outline'}\r\n                          onClick={() => handleMaterialCheck(workOrder?.id, materialIndex, 'missing', null)}\r\n                          className=\"text-xs px-2 py-1\"\r\n                        >\r\n                          <Icon name=\"AlertTriangle\" size={12} className=\"mr-1\" />\r\n                          Faltante\r\n                        </Button>\r\n                      </div>\r\n\r\n                      {/* Status indicator */}\r\n                      <div className=\"w-3 h-3 rounded-full\">\r\n                        {material?.received && material?.condition === 'good' && (\r\n                          <div className=\"w-3 h-3 bg-green-500 rounded-full\" title=\"Material recibido en buen estado\" />\r\n                        )}\r\n                        {material?.condition === 'defective' && (\r\n                          <div className=\"w-3 h-3 bg-red-500 rounded-full\" title=\"Material defectuoso reportado\" />\r\n                        )}\r\n                        {!material?.received && (\r\n                          <div className=\"w-3 h-3 bg-yellow-500 rounded-full\" title=\"Material faltante\" />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Photo upload section */}\r\n              <div className=\"mt-4 p-3 bg-muted rounded-lg\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <h4 className=\"font-medium text-sm text-foreground\">Documentaci√≥n Fotogr√°fica</h4>\r\n                  <label className=\"cursor-pointer\">\r\n                    <input\r\n                      type=\"file\"\r\n                      multiple\r\n                      accept=\"image/*\"\r\n                      onChange={handlePhotoUpload}\r\n                      className=\"hidden\"\r\n                    />\r\n                    <Button variant=\"outline\" size=\"sm\" iconName=\"Camera\">\r\n                      Tomar Foto\r\n                    </Button>\r\n                  </label>\r\n                </div>\r\n                \r\n                {materialPhotos?.length > 0 && (\r\n                  <div className=\"grid grid-cols-3 gap-2 mb-3\">\r\n                    {materialPhotos?.map((photo, index) => (\r\n                      <div key={index} className=\"relative\">\r\n                        <img\r\n                          src={photo}\r\n                          alt={`Material evidence ${index + 1}`}\r\n                          className=\"w-full h-16 object-cover rounded border\"\r\n                        />\r\n                        <Button\r\n                          variant=\"destructive\"\r\n                          size=\"icon\"\r\n                          className=\"absolute -top-1 -right-1 w-5 h-5\"\r\n                          onClick={() => setMaterialPhotos(prev => prev?.filter((_, i) => i !== index))}\r\n                        >\r\n                          <Icon name=\"X\" size={12} />\r\n                        </Button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Notes section */}\r\n              <div className=\"mt-4\">\r\n                <Input\r\n                  placeholder=\"Notas sobre recepci√≥n de materiales...\"\r\n                  value={notes}\r\n                  onChange={(e) => setNotes(e?.target?.value)}\r\n                  className=\"mb-3\"\r\n                />\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex justify-end space-x-2 mt-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => onReportToProjects?.(workOrder?.id, 'material_status', {\r\n                    items: workOrder?.materialsReceived?.items,\r\n                    photos: materialPhotos,\r\n                    notes\r\n                  })}\r\n                  iconName=\"Send\"\r\n                >\r\n                  Reportar a Proyectos\r\n                </Button>\r\n                <Button\r\n                  variant=\"default\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleCompleteReception(workOrder)}\r\n                  iconName=\"CheckCircle\"\r\n                >\r\n                  Completar Recepci√≥n\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MaterialReceptionPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\nconst SafetyChecklistPanel = ({ workOrders = [], onSafetyUpdate }) => {\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [checklistNotes, setChecklistNotes] = useState('');\r\n\r\n  const safetyItems = [\r\n    {\r\n      id: 'ppe_complete',\r\n      name: 'EPP Completo',\r\n      description: 'Casco, gafas, guantes, calzado de seguridad',\r\n      icon: 'Shield',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'tools_condition',\r\n      name: 'Herramientas en buen estado',\r\n      description: 'Verificaci√≥n de herramientas y equipos',\r\n      icon: 'Wrench',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'work_area_clear',\r\n      name: '√Årea de trabajo despejada',\r\n      description: 'Espacio libre de obst√°culos y riesgos',\r\n      icon: 'MapPin',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'certifications_valid',\r\n      name: 'Certificaciones vigentes',\r\n      description: 'Certificados de trabajo en altura, espacios confinados, etc.',\r\n      icon: 'Award',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'emergency_procedures',\r\n      name: 'Procedimientos de emergencia',\r\n      description: 'Conocimiento de rutas de evacuaci√≥n y primeros auxilios',\r\n      icon: 'AlertCircle',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'communication_devices',\r\n      name: 'Dispositivos de comunicaci√≥n',\r\n      description: 'Radios, tel√©fonos de emergencia funcionando',\r\n      icon: 'Phone',\r\n      required: false\r\n    }\r\n  ];\r\n\r\n  const handleChecklistUpdate = (workOrderId, itemId, checked) => {\r\n    const workOrder = workOrders?.find(wo => wo?.id === workOrderId);\r\n    if (!workOrder) return;\r\n\r\n    const updatedItems = workOrder?.safetyChecklist?.items?.map(item =>\r\n      item?.name?.toLowerCase()?.replace(/\\s+/g, '_') === itemId\r\n        ? { ...item, checked }\r\n        : item\r\n    );\r\n\r\n    const requiredItems = safetyItems?.filter(item => item?.required);\r\n    const completedRequired = updatedItems?.filter(item => {\r\n      const safetyItem = safetyItems?.find(si => \r\n        si?.name?.toLowerCase()?.replace(/\\s+/g, '_') === item?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return item?.checked && safetyItem?.required;\r\n    });\r\n\r\n    const isCompleted = completedRequired?.length >= requiredItems?.length;\r\n\r\n    onSafetyUpdate?.(workOrderId, {\r\n      status: isCompleted ? 'completed' : 'in_progress',\r\n      items: updatedItems,\r\n      completedAt: isCompleted ? new Date()?.toISOString() : null,\r\n      notes: checklistNotes\r\n    });\r\n  };\r\n\r\n  const handleCompleteChecklist = (workOrder) => {\r\n    const requiredItems = safetyItems?.filter(item => item?.required);\r\n    const checkedRequired = workOrder?.safetyChecklist?.items?.filter(item => {\r\n      const safetyItem = safetyItems?.find(si => \r\n        si?.name?.toLowerCase()?.replace(/\\s+/g, '_') === item?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return item?.checked && safetyItem?.required;\r\n    });\r\n\r\n    if (checkedRequired?.length < requiredItems?.length) {\r\n      alert('Por favor completa todos los elementos obligatorios de seguridad antes de continuar.');\r\n      return;\r\n    }\r\n\r\n    onSafetyUpdate?.(workOrder?.id, {\r\n      status: 'completed',\r\n      items: workOrder?.safetyChecklist?.items,\r\n      completedAt: new Date()?.toISOString(),\r\n      notes: checklistNotes\r\n    });\r\n\r\n    setSelectedOrder(null);\r\n    setChecklistNotes('');\r\n  };\r\n\r\n  const getCompletionPercentage = (workOrder) => {\r\n    const totalRequired = safetyItems?.filter(item => item?.required)?.length;\r\n    const completedRequired = workOrder?.safetyChecklist?.items?.filter(item => {\r\n      const safetyItem = safetyItems?.find(si => \r\n        si?.name?.toLowerCase()?.replace(/\\s+/g, '_') === item?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return item?.checked && safetyItem?.required;\r\n    })?.length || 0;\r\n    \r\n    return Math.round((completedRequired / totalRequired) * 100);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Shield\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Checklist de Seguridad</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Verificaci√≥n obligatoria antes de iniciar trabajos</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"AlertTriangle\">\r\n            Incidencias\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\">\r\n            Manual\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {workOrders?.length === 0 ? (\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"Shield\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">No hay checklists pendientes</h3>\r\n          <p className=\"text-muted-foreground\">Todas las verificaciones de seguridad est√°n completas</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {workOrders?.map((workOrder) => (\r\n            <div key={workOrder?.id} className=\"border border-border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground\">{workOrder?.orderNumber}</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">{workOrder?.projectReference}</p>\r\n                  <div className=\"flex items-center space-x-2 mt-1\">\r\n                    <div className=\"flex -space-x-1\">\r\n                      {workOrder?.assignedTechnicians?.map((tech, index) => (\r\n                        <div\r\n                          key={tech?.id}\r\n                          className=\"w-6 h-6 bg-secondary rounded-full flex items-center justify-center text-xs font-medium text-secondary-foreground border-2 border-background\"\r\n                          title={`${tech?.name} - ${tech?.role}`}\r\n                        >\r\n                          {tech?.name?.charAt(0)}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <span className=\"text-xs text-muted-foreground\">T√©cnicos asignados</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className={`px-3 py-1 rounded-full text-xs font-medium mb-2 ${\r\n                    workOrder?.priority === 'Cr√≠tica' ? 'bg-red-100 text-red-800' :\r\n                    workOrder?.priority === 'Alta' ? 'bg-orange-100 text-orange-800' :\r\n                    workOrder?.priority === 'Media'? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                  }`}>\r\n                    {workOrder?.priority}\r\n                  </div>\r\n                  <div className=\"text-sm font-medium text-foreground\">\r\n                    {getCompletionPercentage(workOrder)}% Completo\r\n                  </div>\r\n                  <div className=\"w-16 bg-muted rounded-full h-2 mt-1\">\r\n                    <div \r\n                      className=\"bg-orange-500 h-2 rounded-full transition-all duration-300\"\r\n                      style={{ width: `${getCompletionPercentage(workOrder)}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <h4 className=\"font-medium text-sm text-foreground mb-2\">Lista de Verificaci√≥n de Seguridad:</h4>\r\n                \r\n                {safetyItems?.map((safetyItem) => {\r\n                  const workOrderItem = workOrder?.safetyChecklist?.items?.find(item =>\r\n                    item?.name?.toLowerCase()?.replace(/\\s+/g, '_') === safetyItem?.id\r\n                  );\r\n                  const isChecked = workOrderItem?.checked || false;\r\n                  \r\n                  return (\r\n                    <div key={safetyItem?.id} className={`flex items-start space-x-3 p-3 rounded-lg ${\r\n                      safetyItem?.required ? 'bg-orange-50 border border-orange-200' : 'bg-muted'\r\n                    }`}>\r\n                      <div className=\"flex items-center space-x-2 flex-shrink-0\">\r\n                        <Checkbox\r\n                          checked={isChecked}\r\n                          onChange={(checked) => handleChecklistUpdate(workOrder?.id, safetyItem?.id, checked)}\r\n                          className=\"mt-0.5\"\r\n                        />\r\n                        <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${\r\n                          isChecked ? 'bg-green-500' : safetyItem?.required ? 'bg-orange-500' : 'bg-gray-500'\r\n                        }`}>\r\n                          <Icon name={safetyItem?.icon} size={16} color=\"white\" />\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <h4 className=\"font-medium text-sm text-foreground\">{safetyItem?.name}</h4>\r\n                          {safetyItem?.required && (\r\n                            <span className=\"px-2 py-1 bg-orange-500 text-white text-xs rounded-full\">\r\n                              Obligatorio\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">{safetyItem?.description}</p>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex-shrink-0\">\r\n                        {isChecked ? (\r\n                          <Icon name=\"CheckCircle\" size={20} className=\"text-green-500\" />\r\n                        ) : (\r\n                          <Icon name=\"Circle\" size={20} className=\"text-muted-foreground\" />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              {/* Notes section */}\r\n              <div className=\"mt-4\">\r\n                <textarea\r\n                  placeholder=\"Observaciones de seguridad...\"\r\n                  value={checklistNotes}\r\n                  onChange={(e) => setChecklistNotes(e?.target?.value)}\r\n                  className=\"w-full p-3 border border-border rounded-lg resize-none h-20 text-sm\"\r\n                />\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex justify-between items-center mt-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-blue-500\" />\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    Elementos obligatorios: {safetyItems?.filter(item => item?.required)?.length}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"flex space-x-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    iconName=\"AlertTriangle\"\r\n                    disabled\r\n                  >\r\n                    Reportar Incidencia\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"default\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleCompleteChecklist(workOrder)}\r\n                    iconName=\"CheckCircle\"\r\n                    disabled={getCompletionPercentage(workOrder) < 100}\r\n                  >\r\n                    Aprobar Seguridad\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SafetyChecklistPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst AttendancePanel = ({ currentShift = {}, onAttendanceUpdate }) => {\r\n  const [attendanceList, setAttendanceList] = useState([\r\n    {\r\n      id: 1,\r\n      name: 'Carlos Mendoza',\r\n      role: 'T√©cnico Senior',\r\n      checkIn: '08:00',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-001'\r\n    },\r\n    {\r\n      id: 2,\r\n      name: 'Ana Garc√≠a',\r\n      role: 'Especialista HVAC',\r\n      checkIn: '08:15',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-001'\r\n    },\r\n    {\r\n      id: 3,\r\n      name: 'Roberto Silva',\r\n      role: 'T√©cnico Junior',\r\n      checkIn: '08:05',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-002'\r\n    },\r\n    {\r\n      id: 4,\r\n      name: 'Mar√≠a L√≥pez',\r\n      role: 'Supervisora',\r\n      checkIn: '07:45',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-002'\r\n    },\r\n    {\r\n      id: 5,\r\n      name: 'Diego Ram√≠rez',\r\n      role: 'T√©cnico Senior',\r\n      checkIn: '08:00',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-003'\r\n    },\r\n    {\r\n      id: 6,\r\n      name: 'Laura Jim√©nez',\r\n      role: 'Especialista HVAC',\r\n      checkIn: null,\r\n      checkOut: null,\r\n      status: 'absent',\r\n      workOrder: null,\r\n      reason: 'Cita m√©dica programada'\r\n    },\r\n    {\r\n      id: 7,\r\n      name: 'Patricia Morales',\r\n      role: 'Supervisora',\r\n      checkIn: '08:10',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-004'\r\n    },\r\n    {\r\n      id: 8,\r\n      name: 'Alejandro Ruiz',\r\n      role: 'T√©cnico Senior',\r\n      checkIn: '08:00',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-004'\r\n    },\r\n    {\r\n      id: 9,\r\n      name: 'Fernando Castro',\r\n      role: 'Especialista IoT',\r\n      checkIn: '08:30',\r\n      checkOut: null,\r\n      status: 'late',\r\n      workOrder: 'WO-2024-005'\r\n    },\r\n    {\r\n      id: 10,\r\n      name: 'Gabriela V√°zquez',\r\n      role: 'T√©cnico Senior',\r\n      checkIn: '08:00',\r\n      checkOut: null,\r\n      status: 'present',\r\n      workOrder: 'WO-2024-005'\r\n    },\r\n    {\r\n      id: 11,\r\n      name: 'Jos√© Hern√°ndez',\r\n      role: 'T√©cnico Junior',\r\n      checkIn: null,\r\n      checkOut: null,\r\n      status: 'absent',\r\n      workOrder: null,\r\n      reason: 'No justificado'\r\n    },\r\n    {\r\n      id: 12,\r\n      name: 'Carmen Torres',\r\n      role: 'Especialista HVAC',\r\n      checkIn: '08:20',\r\n      checkOut: null,\r\n      status: 'late',\r\n      workOrder: null\r\n    }\r\n  ]);\r\n\r\n  const handleCheckIn = (technicianId) => {\r\n    const currentTime = new Date()?.toLocaleTimeString('es-MX', { \r\n      hour: '2-digit', \r\n      minute: '2-digit',\r\n      hour12: false \r\n    });\r\n    \r\n    setAttendanceList(prev => prev?.map(tech =>\r\n      tech?.id === technicianId\r\n        ? { ...tech, checkIn: currentTime, status: currentTime > '08:15' ? 'late' : 'present' }\r\n        : tech\r\n    ));\r\n\r\n    updateAttendanceStats();\r\n  };\r\n\r\n  const handleCheckOut = (technicianId) => {\r\n    const currentTime = new Date()?.toLocaleTimeString('es-MX', { \r\n      hour: '2-digit', \r\n      minute: '2-digit',\r\n      hour12: false \r\n    });\r\n    \r\n    setAttendanceList(prev => prev?.map(tech =>\r\n      tech?.id === technicianId\r\n        ? { ...tech, checkOut: currentTime, status: 'completed' }\r\n        : tech\r\n    ));\r\n\r\n    updateAttendanceStats();\r\n  };\r\n\r\n  const updateAttendanceStats = () => {\r\n    const presentCount = attendanceList?.filter(tech => \r\n      tech?.status === 'present' || tech?.status === 'late'\r\n    )?.length;\r\n    \r\n    onAttendanceUpdate?.({\r\n      attendanceCount: presentCount,\r\n      totalTechnicians: attendanceList?.length,\r\n      attendanceRate: Math.round((presentCount / attendanceList?.length) * 100)\r\n    });\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'present': return 'text-green-600 bg-green-100';\r\n      case 'late': return 'text-orange-600 bg-orange-100';\r\n      case 'absent': return 'text-red-600 bg-red-100';\r\n      case 'completed': return 'text-blue-600 bg-blue-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'present': return 'CheckCircle';\r\n      case 'late': return 'Clock';\r\n      case 'absent': return 'XCircle';\r\n      case 'completed': return 'LogOut';\r\n      default: return 'User';\r\n    }\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    switch (status) {\r\n      case 'present': return 'Presente';\r\n      case 'late': return 'Tardanza';\r\n      case 'absent': return 'Ausente';\r\n      case 'completed': return 'Salida';\r\n      default: return 'Indefinido';\r\n    }\r\n  };\r\n\r\n  const presentTechnicians = attendanceList?.filter(tech => tech?.status === 'present' || tech?.status === 'late')?.length;\r\n  const absentTechnicians = attendanceList?.filter(tech => tech?.status === 'absent')?.length;\r\n  const lateTechnicians = attendanceList?.filter(tech => tech?.status === 'late')?.length;\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Users\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Control de Asistencia</h2>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Turno {currentShift?.start} - {currentShift?.end} | {currentShift?.date}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <div className=\"text-2xl font-bold text-foreground\">{presentTechnicians}/{attendanceList?.length}</div>\r\n          <div className=\"text-sm text-muted-foreground\">Presentes</div>\r\n        </div>\r\n      </div>\r\n      {/* Attendance Summary */}\r\n      <div className=\"grid grid-cols-3 gap-4 mb-6\">\r\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"CheckCircle\" size={20} className=\"text-green-600\" />\r\n            <div>\r\n              <div className=\"font-semibold text-green-800\">{presentTechnicians - lateTechnicians}</div>\r\n              <div className=\"text-xs text-green-600\">A Tiempo</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Clock\" size={20} className=\"text-orange-600\" />\r\n            <div>\r\n              <div className=\"font-semibold text-orange-800\">{lateTechnicians}</div>\r\n              <div className=\"text-xs text-orange-600\">Tardanzas</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"XCircle\" size={20} className=\"text-red-600\" />\r\n            <div>\r\n              <div className=\"font-semibold text-red-800\">{absentTechnicians}</div>\r\n              <div className=\"text-xs text-red-600\">Ausentes</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Attendance List */}\r\n      <div className=\"space-y-2 max-h-80 overflow-y-auto\">\r\n        {attendanceList?.map((technician) => (\r\n          <div key={technician?.id} className=\"flex items-center justify-between p-3 bg-muted rounded-lg\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"w-10 h-10 bg-secondary rounded-full flex items-center justify-center\">\r\n                <Icon name=\"User\" size={16} color=\"white\" />\r\n              </div>\r\n              <div>\r\n                <h4 className=\"font-medium text-sm text-foreground\">{technician?.name}</h4>\r\n                <p className=\"text-xs text-muted-foreground\">{technician?.role}</p>\r\n                {technician?.workOrder && (\r\n                  <p className=\"text-xs text-blue-600\">Asignado a: {technician?.workOrder}</p>\r\n                )}\r\n                {technician?.reason && (\r\n                  <p className=\"text-xs text-red-600\">Motivo: {technician?.reason}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-4\">\r\n              {/* Check in/out times */}\r\n              <div className=\"text-right\">\r\n                {technician?.checkIn && (\r\n                  <div className=\"text-sm font-medium text-foreground\">\r\n                    Entrada: {technician?.checkIn}\r\n                  </div>\r\n                )}\r\n                {technician?.checkOut && (\r\n                  <div className=\"text-sm text-muted-foreground\">\r\n                    Salida: {technician?.checkOut}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Status badge */}\r\n              <div className={`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${getStatusColor(technician?.status)}`}>\r\n                <Icon name={getStatusIcon(technician?.status)} size={12} />\r\n                <span>{getStatusText(technician?.status)}</span>\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex space-x-1\">\r\n                {!technician?.checkIn && technician?.status === 'absent' && (\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"outline\"\r\n                    onClick={() => handleCheckIn(technician?.id)}\r\n                    iconName=\"LogIn\"\r\n                    className=\"text-xs px-2 py-1\"\r\n                  >\r\n                    Check In\r\n                  </Button>\r\n                )}\r\n                {technician?.checkIn && !technician?.checkOut && technician?.status !== 'absent' && (\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"outline\"\r\n                    onClick={() => handleCheckOut(technician?.id)}\r\n                    iconName=\"LogOut\"\r\n                    className=\"text-xs px-2 py-1\"\r\n                  >\r\n                    Check Out\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {/* Quick actions */}\r\n      <div className=\"flex justify-between items-center mt-6 pt-4 border-t border-border\">\r\n        <div className=\"flex space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Download\">\r\n            Exportar Reporte\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Calendar\">\r\n            Ver Historial\r\n          </Button>\r\n        </div>\r\n        \r\n        <div className=\"text-sm text-muted-foreground\">\r\n          √öltima actualizaci√≥n: {new Date()?.toLocaleTimeString('es-MX')}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendancePanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst QualityControlPanel = ({ workOrders = [], onQualityUpdate, onReportToProjects }) => {\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [qualityPhotos, setQualityPhotos] = useState([]);\r\n  const [inspectionNotes, setInspectionNotes] = useState('');\r\n\r\n  const qualityCheckpoints = [\r\n    {\r\n      id: 'installation_verification',\r\n      name: 'Verificaci√≥n de instalaci√≥n',\r\n      description: 'Revisi√≥n de montaje y conexiones seg√∫n especificaciones',\r\n      icon: 'Wrench',\r\n      critical: true\r\n    },\r\n    {\r\n      id: 'function_tests',\r\n      name: 'Pruebas de funcionamiento',\r\n      description: 'Operaci√≥n del sistema bajo condiciones normales',\r\n      icon: 'Play',\r\n      critical: true\r\n    },\r\n    {\r\n      id: 'visual_inspection',\r\n      name: 'Inspecci√≥n visual',\r\n      description: 'Revisi√≥n de acabados, etiquetado y limpieza',\r\n      icon: 'Eye',\r\n      critical: false\r\n    },\r\n    {\r\n      id: 'technical_documentation',\r\n      name: 'Documentaci√≥n t√©cnica',\r\n      description: 'Manuales, garant√≠as y certificados completos',\r\n      icon: 'FileText',\r\n      critical: true\r\n    },\r\n    {\r\n      id: 'safety_compliance',\r\n      name: 'Cumplimiento de seguridad',\r\n      description: 'Verificaci√≥n de normas de seguridad aplicables',\r\n      icon: 'Shield',\r\n      critical: true\r\n    },\r\n    {\r\n      id: 'performance_tests',\r\n      name: 'Pruebas de rendimiento',\r\n      description: 'Medici√≥n de par√°metros t√©cnicos y eficiencia',\r\n      icon: 'BarChart3',\r\n      critical: false\r\n    }\r\n  ];\r\n\r\n  const handleCheckpointUpdate = (workOrderId, checkpointId, passed, notes = '') => {\r\n    const workOrder = workOrders?.find(wo => wo?.id === workOrderId);\r\n    if (!workOrder) return;\r\n\r\n    const updatedCheckpoints = workOrder?.qualityControl?.checkpoints?.map(checkpoint => {\r\n      const qualityCheckpoint = qualityCheckpoints?.find(qc => \r\n        qc?.name?.toLowerCase()?.replace(/\\s+/g, '_') === checkpoint?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      \r\n      if (qualityCheckpoint?.id === checkpointId) {\r\n        return { \r\n          ...checkpoint, \r\n          passed, \r\n          notes,\r\n          inspectedAt: new Date()?.toISOString(),\r\n          inspector: 'Inspector Actual' // This should come from authentication\r\n        };\r\n      }\r\n      return checkpoint;\r\n    });\r\n\r\n    const criticalCheckpoints = qualityCheckpoints?.filter(qc => qc?.critical);\r\n    const passedCritical = updatedCheckpoints?.filter(cp => {\r\n      const qualityCheckpoint = qualityCheckpoints?.find(qc => \r\n        qc?.name?.toLowerCase()?.replace(/\\s+/g, '_') === cp?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return cp?.passed === true && qualityCheckpoint?.critical;\r\n    });\r\n\r\n    const hasFailures = updatedCheckpoints?.some(cp => cp?.passed === false);\r\n    const criticalComplete = passedCritical?.length >= criticalCheckpoints?.length;\r\n    \r\n    const status = hasFailures ? 'failed' : \r\n                  criticalComplete ? 'completed' : 'in_progress';\r\n\r\n    onQualityUpdate?.(workOrderId, {\r\n      status,\r\n      checkpoints: updatedCheckpoints,\r\n      photos: qualityPhotos,\r\n      inspector: 'Inspector Actual',\r\n      completedAt: status === 'completed' ? new Date()?.toISOString() : null,\r\n      notes: inspectionNotes\r\n    });\r\n\r\n    // Auto-report failures to Projects\r\n    if (hasFailures) {\r\n      const failedCheckpoints = updatedCheckpoints?.filter(cp => cp?.passed === false);\r\n      onReportToProjects?.(workOrderId, 'quality_failure', {\r\n        failedCheckpoints,\r\n        photos: qualityPhotos,\r\n        notes: inspectionNotes,\r\n        inspector: 'Inspector Actual'\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCompleteInspection = (workOrder) => {\r\n    const criticalCheckpoints = qualityCheckpoints?.filter(qc => qc?.critical);\r\n    const passedCritical = workOrder?.qualityControl?.checkpoints?.filter(cp => {\r\n      const qualityCheckpoint = qualityCheckpoints?.find(qc => \r\n        qc?.name?.toLowerCase()?.replace(/\\s+/g, '_') === cp?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return cp?.passed === true && qualityCheckpoint?.critical;\r\n    });\r\n\r\n    if (passedCritical?.length < criticalCheckpoints?.length) {\r\n      alert('Por favor completa todos los puntos cr√≠ticos de control de calidad.');\r\n      return;\r\n    }\r\n\r\n    const hasFailures = workOrder?.qualityControl?.checkpoints?.some(cp => cp?.passed === false);\r\n    \r\n    onQualityUpdate?.(workOrder?.id, {\r\n      status: hasFailures ? 'failed' : 'completed',\r\n      checkpoints: workOrder?.qualityControl?.checkpoints,\r\n      photos: qualityPhotos,\r\n      inspector: 'Inspector Actual',\r\n      completedAt: new Date()?.toISOString(),\r\n      notes: inspectionNotes\r\n    });\r\n\r\n    // Report completion to Projects\r\n    onReportToProjects?.(workOrder?.id, 'quality_approval', {\r\n      status: hasFailures ? 'rejected' : 'approved',\r\n      checkpoints: workOrder?.qualityControl?.checkpoints,\r\n      photos: qualityPhotos,\r\n      notes: inspectionNotes,\r\n      inspector: 'Inspector Actual'\r\n    });\r\n\r\n    setSelectedOrder(null);\r\n    setQualityPhotos([]);\r\n    setInspectionNotes('');\r\n  };\r\n\r\n  const handlePhotoUpload = (event) => {\r\n    const files = Array.from(event?.target?.files || []);\r\n    const photoUrls = files?.map(file => URL.createObjectURL(file));\r\n    setQualityPhotos(prev => [...prev, ...photoUrls]);\r\n  };\r\n\r\n  const getCompletionPercentage = (workOrder) => {\r\n    const totalCritical = qualityCheckpoints?.filter(qc => qc?.critical)?.length;\r\n    const completedCritical = workOrder?.qualityControl?.checkpoints?.filter(cp => {\r\n      const qualityCheckpoint = qualityCheckpoints?.find(qc => \r\n        qc?.name?.toLowerCase()?.replace(/\\s+/g, '_') === cp?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n      );\r\n      return cp?.passed === true && qualityCheckpoint?.critical;\r\n    })?.length || 0;\r\n    \r\n    return Math.round((completedCritical / totalCritical) * 100);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"CheckCircle\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Control de Calidad</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Inspecci√≥n y validaci√≥n de trabajos completados</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Camera\">\r\n            C√°mara\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\">\r\n            Checklist\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {workOrders?.length === 0 ? (\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"CheckCircle\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">No hay inspecciones pendientes</h3>\r\n          <p className=\"text-muted-foreground\">Todas las √≥rdenes est√°n en proceso de fabricaci√≥n</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {workOrders?.map((workOrder) => (\r\n            <div key={workOrder?.id} className=\"border border-border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground\">{workOrder?.orderNumber}</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">{workOrder?.projectReference}</p>\r\n                  <div className=\"flex items-center space-x-2 mt-1\">\r\n                    <Icon name=\"User\" size={14} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      Inspector: {workOrder?.qualityControl?.inspector || 'No asignado'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className={`px-3 py-1 rounded-full text-xs font-medium mb-2 ${\r\n                    workOrder?.priority === 'Cr√≠tica' ? 'bg-red-100 text-red-800' :\r\n                    workOrder?.priority === 'Alta' ? 'bg-orange-100 text-orange-800' :\r\n                    workOrder?.priority === 'Media'? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                  }`}>\r\n                    {workOrder?.priority}\r\n                  </div>\r\n                  <div className=\"text-sm font-medium text-foreground\">\r\n                    {getCompletionPercentage(workOrder)}% Inspeccionado\r\n                  </div>\r\n                  <div className=\"w-16 bg-muted rounded-full h-2 mt-1\">\r\n                    <div \r\n                      className=\"bg-green-500 h-2 rounded-full transition-all duration-300\"\r\n                      style={{ width: `${getCompletionPercentage(workOrder)}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <h4 className=\"font-medium text-sm text-foreground mb-2\">Puntos de Control de Calidad:</h4>\r\n                \r\n                {qualityCheckpoints?.map((checkpoint) => {\r\n                  const workOrderCheckpoint = workOrder?.qualityControl?.checkpoints?.find(cp =>\r\n                    cp?.name?.toLowerCase()?.replace(/\\s+/g, '_') === checkpoint?.name?.toLowerCase()?.replace(/\\s+/g, '_')\r\n                  );\r\n                  const status = workOrderCheckpoint?.passed;\r\n                  \r\n                  return (\r\n                    <div key={checkpoint?.id} className={`flex items-start space-x-3 p-3 rounded-lg ${\r\n                      checkpoint?.critical ? 'bg-green-50 border border-green-200' : 'bg-muted'\r\n                    }`}>\r\n                      <div className={`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${\r\n                        status === true ? 'bg-green-500' :\r\n                        status === false ? 'bg-red-500': checkpoint?.critical ?'bg-green-500' : 'bg-gray-500'\r\n                      }`}>\r\n                        <Icon name={checkpoint?.icon} size={16} color=\"white\" />\r\n                      </div>\r\n                      \r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <h4 className=\"font-medium text-sm text-foreground\">{checkpoint?.name}</h4>\r\n                          {checkpoint?.critical && (\r\n                            <span className=\"px-2 py-1 bg-green-500 text-white text-xs rounded-full\">\r\n                              Cr√≠tico\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">{checkpoint?.description}</p>\r\n                        {workOrderCheckpoint?.notes && (\r\n                          <p className=\"text-xs text-blue-600 mt-1\">Notas: {workOrderCheckpoint?.notes}</p>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <div className=\"flex items-center space-x-2 flex-shrink-0\">\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={status === true ? 'default' : 'outline'}\r\n                          onClick={() => handleCheckpointUpdate(workOrder?.id, checkpoint?.id, true)}\r\n                          className=\"text-xs px-2 py-1\"\r\n                        >\r\n                          <Icon name=\"CheckCircle\" size={12} className=\"mr-1\" />\r\n                          Aprobado\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant={status === false ? 'destructive' : 'outline'}\r\n                          onClick={() => handleCheckpointUpdate(workOrder?.id, checkpoint?.id, false)}\r\n                          className=\"text-xs px-2 py-1\"\r\n                        >\r\n                          <Icon name=\"XCircle\" size={12} className=\"mr-1\" />\r\n                          Rechazado\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              {/* Photo evidence section */}\r\n              <div className=\"mt-4 p-3 bg-muted rounded-lg\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <h4 className=\"font-medium text-sm text-foreground\">Evidencia Fotogr√°fica</h4>\r\n                  <label className=\"cursor-pointer\">\r\n                    <input\r\n                      type=\"file\"\r\n                      multiple\r\n                      accept=\"image/*\"\r\n                      onChange={handlePhotoUpload}\r\n                      className=\"hidden\"\r\n                    />\r\n                    <Button variant=\"outline\" size=\"sm\" iconName=\"Camera\">\r\n                      Tomar Foto\r\n                    </Button>\r\n                  </label>\r\n                </div>\r\n                \r\n                {qualityPhotos?.length > 0 && (\r\n                  <div className=\"grid grid-cols-4 gap-2 mb-3\">\r\n                    {qualityPhotos?.map((photo, index) => (\r\n                      <div key={index} className=\"relative\">\r\n                        <img\r\n                          src={photo}\r\n                          alt={`Quality evidence ${index + 1}`}\r\n                          className=\"w-full h-16 object-cover rounded border\"\r\n                        />\r\n                        <Button\r\n                          variant=\"destructive\"\r\n                          size=\"icon\"\r\n                          className=\"absolute -top-1 -right-1 w-5 h-5\"\r\n                          onClick={() => setQualityPhotos(prev => prev?.filter((_, i) => i !== index))}\r\n                        >\r\n                          <Icon name=\"X\" size={12} />\r\n                        </Button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Inspection notes */}\r\n              <div className=\"mt-4\">\r\n                <textarea\r\n                  placeholder=\"Observaciones de la inspecci√≥n...\"\r\n                  value={inspectionNotes}\r\n                  onChange={(e) => setInspectionNotes(e?.target?.value)}\r\n                  className=\"w-full p-3 border border-border rounded-lg resize-none h-20 text-sm\"\r\n                />\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex justify-between items-center mt-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-green-500\" />\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    Puntos cr√≠ticos: {qualityCheckpoints?.filter(qc => qc?.critical)?.length}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"flex space-x-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => onReportToProjects?.(workOrder?.id, 'quality_update', {\r\n                      checkpoints: workOrder?.qualityControl?.checkpoints,\r\n                      photos: qualityPhotos,\r\n                      notes: inspectionNotes\r\n                    })}\r\n                    iconName=\"Send\"\r\n                  >\r\n                    Reportar Progreso\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"default\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleCompleteInspection(workOrder)}\r\n                    iconName=\"CheckCircle\"\r\n                    disabled={getCompletionPercentage(workOrder) < 100}\r\n                  >\r\n                    Finalizar Inspecci√≥n\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QualityControlPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst EvidenceSubmissionPanel = ({ workOrders = [], onEvidenceSubmission, onReportToProjects }) => {\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [evidencePhotos, setEvidencePhotos] = useState([]);\r\n  const [documents, setDocuments] = useState([]);\r\n  const [submissionNotes, setSubmissionNotes] = useState('');\r\n\r\n  const requiredDocuments = [\r\n    {\r\n      id: 'installation_certificate',\r\n      name: 'Certificado de Instalaci√≥n',\r\n      description: 'Documento oficial de instalaci√≥n completada',\r\n      icon: 'FileCheck',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'user_manual',\r\n      name: 'Manual de Usuario',\r\n      description: 'Gu√≠a de operaci√≥n y mantenimiento',\r\n      icon: 'Book',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'warranty_document',\r\n      name: 'Documento de Garant√≠a',\r\n      description: 'T√©rminos y condiciones de garant√≠a',\r\n      icon: 'Shield',\r\n      required: true\r\n    },\r\n    {\r\n      id: 'technical_specs',\r\n      name: 'Especificaciones T√©cnicas',\r\n      description: 'Detalles t√©cnicos del sistema instalado',\r\n      icon: 'FileText',\r\n      required: false\r\n    },\r\n    {\r\n      id: 'compliance_certificate',\r\n      name: 'Certificado de Cumplimiento',\r\n      description: 'Cumplimiento de normas y regulaciones',\r\n      icon: 'Award',\r\n      required: false\r\n    }\r\n  ];\r\n\r\n  const evidenceCategories = [\r\n    {\r\n      id: 'installation_progress',\r\n      name: 'Progreso de Instalaci√≥n',\r\n      description: 'Fotos del proceso de instalaci√≥n paso a paso',\r\n      icon: 'Wrench'\r\n    },\r\n    {\r\n      id: 'final_product',\r\n      name: 'Producto Final',\r\n      description: 'Fotograf√≠as del sistema completamente instalado',\r\n      icon: 'Camera'\r\n    },\r\n    {\r\n      id: 'quality_tests',\r\n      name: 'Pruebas de Calidad',\r\n      description: 'Evidencia de pruebas de funcionamiento',\r\n      icon: 'CheckCircle'\r\n    },\r\n    {\r\n      id: 'workspace_cleanup',\r\n      name: 'Limpieza del √Årea',\r\n      description: '√Årea de trabajo limpia y organizada',\r\n      icon: 'Trash2'\r\n    }\r\n  ];\r\n\r\n  const handlePhotoUpload = (event, category = null) => {\r\n    const files = Array.from(event?.target?.files || []);\r\n    files?.forEach(file => {\r\n      const photoData = {\r\n        id: Date.now() + Math.random(),\r\n        file,\r\n        url: URL.createObjectURL(file),\r\n        category: category || 'general',\r\n        timestamp: new Date()?.toISOString(),\r\n        description: ''\r\n      };\r\n      setEvidencePhotos(prev => [...prev, photoData]);\r\n    });\r\n  };\r\n\r\n  const handleDocumentUpload = (event, documentType) => {\r\n    const file = event?.target?.files?.[0];\r\n    if (!file) return;\r\n\r\n    const documentData = {\r\n      id: Date.now(),\r\n      type: documentType,\r\n      name: file?.name,\r\n      file,\r\n      url: URL.createObjectURL(file),\r\n      uploadedAt: new Date()?.toISOString()\r\n    };\r\n    setDocuments(prev => [...prev, documentData]);\r\n  };\r\n\r\n  const handleSubmitEvidence = (workOrder) => {\r\n    const requiredDocs = requiredDocuments?.filter(doc => doc?.required);\r\n    const uploadedRequired = documents?.filter(doc => \r\n      requiredDocs?.some(req => req?.id === doc?.type)\r\n    );\r\n\r\n    if (uploadedRequired?.length < requiredDocs?.length) {\r\n      alert('Por favor sube todos los documentos obligatorios antes de enviar las evidencias.');\r\n      return;\r\n    }\r\n\r\n    if (evidencePhotos?.length < 3) {\r\n      alert('Por favor incluye al menos 3 fotograf√≠as como evidencia del trabajo completado.');\r\n      return;\r\n    }\r\n\r\n    const evidencePackage = {\r\n      status: 'completed',\r\n      photos: evidencePhotos?.map(photo => ({\r\n        category: photo?.category,\r\n        url: photo?.url,\r\n        description: photo?.description,\r\n        timestamp: photo?.timestamp\r\n      })),\r\n      documents: documents?.map(doc => ({\r\n        type: doc?.type,\r\n        name: doc?.name,\r\n        url: doc?.url,\r\n        uploadedAt: doc?.uploadedAt\r\n      })),\r\n      submittedToProjects: true,\r\n      submissionDate: new Date()?.toISOString(),\r\n      notes: submissionNotes,\r\n      submittedBy: 'Workshop Team'\r\n    };\r\n\r\n    onEvidenceSubmission?.(workOrder?.id, evidencePackage);\r\n\r\n    // Send package to Projects department\r\n    onReportToProjects?.(workOrder?.id, 'work_completion', {\r\n      ...evidencePackage,\r\n      projectReference: workOrder?.projectReference,\r\n      clientName: workOrder?.clientName,\r\n      completedTechnicians: workOrder?.assignedTechnicians\r\n    });\r\n\r\n    // Reset form\r\n    setSelectedOrder(null);\r\n    setEvidencePhotos([]);\r\n    setDocuments([]);\r\n    setSubmissionNotes('');\r\n  };\r\n\r\n  const removePhoto = (photoId) => {\r\n    setEvidencePhotos(prev => prev?.filter(photo => photo?.id !== photoId));\r\n  };\r\n\r\n  const removeDocument = (docId) => {\r\n    setDocuments(prev => prev?.filter(doc => doc?.id !== docId));\r\n  };\r\n\r\n  const updatePhotoDescription = (photoId, description) => {\r\n    setEvidencePhotos(prev => prev?.map(photo =>\r\n      photo?.id === photoId ? { ...photo, description } : photo\r\n    ));\r\n  };\r\n\r\n  const getPhotosByCategory = (category) => {\r\n    return evidencePhotos?.filter(photo => photo?.category === category);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Camera\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Env√≠o de Evidencias</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Documentaci√≥n y fotograf√≠as del trabajo completado</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Upload\">\r\n            Cargar\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"Send\">\r\n            Enviar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {workOrders?.length === 0 ? (\r\n        <div className=\"text-center py-8\">\r\n          <Icon name=\"Camera\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">No hay trabajos listos para env√≠o</h3>\r\n          <p className=\"text-muted-foreground\">Los trabajos aparecer√°n aqu√≠ una vez aprobados en control de calidad</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {workOrders?.map((workOrder) => (\r\n            <div key={workOrder?.id} className=\"border border-border rounded-lg p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"font-semibold text-foreground\">{workOrder?.orderNumber}</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">{workOrder?.projectReference}</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Cliente: {workOrder?.clientName}</p>\r\n                  <div className=\"flex items-center space-x-2 mt-1\">\r\n                    <div className=\"flex -space-x-1\">\r\n                      {workOrder?.assignedTechnicians?.map((tech, index) => (\r\n                        <div\r\n                          key={tech?.id}\r\n                          className=\"w-6 h-6 bg-secondary rounded-full flex items-center justify-center text-xs font-medium text-secondary-foreground border-2 border-background\"\r\n                          title={`${tech?.name} - ${tech?.role}`}\r\n                        >\r\n                          {tech?.name?.charAt(0)}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                    <span className=\"text-xs text-muted-foreground\">T√©cnicos responsables</span>\r\n                  </div>\r\n                </div>\r\n                <div className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                  workOrder?.evidenceSubmission?.submittedToProjects ? 'bg-green-100 text-green-800' : 'bg-orange-100 text-orange-800'\r\n                }`}>\r\n                  {workOrder?.evidenceSubmission?.submittedToProjects ? 'Enviado' : 'Pendiente'}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Evidence Categories */}\r\n              <div className=\"space-y-4\">\r\n                <h4 className=\"font-medium text-sm text-foreground\">Categor√≠as de Evidencia:</h4>\r\n                \r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  {evidenceCategories?.map((category) => {\r\n                    const categoryPhotos = getPhotosByCategory(category?.id);\r\n                    \r\n                    return (\r\n                      <div key={category?.id} className=\"border border-border rounded-lg p-3\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <Icon name={category?.icon} size={16} className=\"text-indigo-600\" />\r\n                            <div>\r\n                              <h5 className=\"font-medium text-sm text-foreground\">{category?.name}</h5>\r\n                              <p className=\"text-xs text-muted-foreground\">{category?.description}</p>\r\n                            </div>\r\n                          </div>\r\n                          <label className=\"cursor-pointer\">\r\n                            <input\r\n                              type=\"file\"\r\n                              multiple\r\n                              accept=\"image/*\"\r\n                              onChange={(e) => handlePhotoUpload(e, category?.id)}\r\n                              className=\"hidden\"\r\n                            />\r\n                            <Button variant=\"outline\" size=\"sm\" iconName=\"Plus\" className=\"text-xs px-2 py-1\">\r\n                              Agregar\r\n                            </Button>\r\n                          </label>\r\n                        </div>\r\n                        \r\n                        {categoryPhotos?.length > 0 ? (\r\n                          <div className=\"grid grid-cols-3 gap-2\">\r\n                            {categoryPhotos?.map((photo) => (\r\n                                <div key={photo?.id} className=\"relative group overflow-hidden\">\r\n                                <img\r\n                                  src={photo?.url}\r\n                                  alt={`${category?.name} evidence`}\r\n                                  className=\"w-full h-16 object-cover rounded border\"\r\n                                />\r\n                                <Button\r\n                                  variant=\"destructive\"\r\n                                  size=\"icon\"\r\n                                  className=\"absolute -top-1 -right-1 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                  onClick={() => removePhoto(photo?.id)}\r\n                                >\r\n                                  <Icon name=\"X\" size={10} />\r\n                                </Button>\r\n                                <input\r\n                                  type=\"text\"\r\n                                  placeholder=\"Descripci√≥n...\"\r\n                                  value={photo?.description}\r\n                                  onChange={(e) => updatePhotoDescription(photo?.id, e?.target?.value)}\r\n                                  className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs px-1 py-0.5 rounded-b truncate\"\r\n                                />\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"text-center py-4 border-2 border-dashed border-muted rounded\">\r\n                            <Icon name=\"ImagePlus\" size={24} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                            <p className=\"text-xs text-muted-foreground\">No hay fotos para esta categor√≠a</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Required Documents */}\r\n              <div className=\"mt-6\">\r\n                <h4 className=\"font-medium text-sm text-foreground mb-3\">Documentos Requeridos:</h4>\r\n                \r\n                <div className=\"space-y-2\">\r\n                  {requiredDocuments?.map((docType) => {\r\n                    const uploadedDoc = documents?.find(doc => doc?.type === docType?.id);\r\n                    \r\n                    return (\r\n                      <div key={docType?.id} className={`flex items-center justify-between p-3 rounded-lg ${\r\n                        docType?.required ? 'bg-indigo-50 border border-indigo-200' : 'bg-muted'\r\n                      }`}>\r\n                        <div className=\"flex items-center space-x-3\">\r\n                            <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${\r\n                            uploadedDoc ? 'bg-green-500' : docType?.required ? 'bg-indigo-500' : 'bg-gray-500'\r\n                          } overflow-hidden`}> \r\n                            <Icon name={docType?.icon} size={16} color=\"white\" />\r\n                          </div>\r\n                          <div>\r\n                            <h5 className=\"font-medium text-sm text-foreground flex items-center space-x-2\">\r\n                              <span>{docType?.name}</span>\r\n                              {docType?.required && (\r\n                                <span className=\"px-2 py-1 bg-indigo-500 text-white text-xs rounded-full\">\r\n                                  Obligatorio\r\n                                </span>\r\n                              )}\r\n                            </h5>\r\n                            <p className=\"text-xs text-muted-foreground\">{docType?.description}</p>\r\n                            {uploadedDoc && (\r\n                              <p className=\"text-xs text-green-600 truncate\">Archivo: {uploadedDoc?.name}</p>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {uploadedDoc ? (\r\n                            <>\r\n                              <Button\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                iconName=\"Eye\"\r\n                                className=\"text-xs px-2 py-1\"\r\n                                onClick={() => window.open(uploadedDoc?.url, '_blank')}\r\n                              >\r\n                                Ver\r\n                              </Button>\r\n                              <Button\r\n                                variant=\"destructive\"\r\n                                size=\"sm\"\r\n                                iconName=\"Trash2\"\r\n                                className=\"text-xs px-2 py-1\"\r\n                                onClick={() => removeDocument(uploadedDoc?.id)}\r\n                              >\r\n                                Eliminar\r\n                              </Button>\r\n                            </>\r\n                          ) : (\r\n                            <label className=\"cursor-pointer\">\r\n                              <input\r\n                                type=\"file\"\r\n                                accept=\".pdf,.doc,.docx,.jpg,.png\"\r\n                                onChange={(e) => handleDocumentUpload(e, docType?.id)}\r\n                                className=\"hidden\"\r\n                              />\r\n                              <Button variant=\"outline\" size=\"sm\" iconName=\"Upload\" className=\"text-xs px-2 py-1\">\r\n                                Subir\r\n                              </Button>\r\n                            </label>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Submission Notes */}\r\n              <div className=\"mt-4\">\r\n                <textarea\r\n                  placeholder=\"Notas adicionales para el equipo de Proyectos...\"\r\n                  value={submissionNotes}\r\n                  onChange={(e) => setSubmissionNotes(e?.target?.value)}\r\n                  className=\"w-full p-3 border border-border rounded-lg resize-none h-20 text-sm\"\r\n                />\r\n              </div>\r\n\r\n              {/* Summary and Submit */}\r\n              <div className=\"mt-4 p-3 bg-muted rounded-lg\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <h4 className=\"font-medium text-sm text-foreground\">Resumen de Evidencias</h4>\r\n                  <div className=\"text-xs text-muted-foreground\">\r\n                    √öltima actualizaci√≥n: {new Date()?.toLocaleString('es-MX')}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-3 gap-4 text-center\">\r\n                  <div>\r\n                    <div className=\"text-lg font-bold text-foreground\">{evidencePhotos?.length}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Fotograf√≠as</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-lg font-bold text-foreground\">{documents?.length}</div>\r\n                    <div className=\"text-xs text-muted-foreground\">Documentos</div>\r\n                  </div>\r\n                  <div>\r\n                    <div className={`text-lg font-bold ${\r\n                      workOrder?.evidenceSubmission?.submittedToProjects ? 'text-green-600' : 'text-orange-600'\r\n                    }`}>\r\n                      {workOrder?.evidenceSubmission?.submittedToProjects ? 'Enviado' : 'Pendiente'}\r\n                    </div>\r\n                    <div className=\"text-xs text-muted-foreground\">Estado</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action buttons */}\r\n              <div className=\"flex justify-end space-x-2 mt-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  iconName=\"Eye\"\r\n                  onClick={() => setSelectedOrder(selectedOrder === workOrder?.id ? null : workOrder?.id)}\r\n                >\r\n                  {selectedOrder === workOrder?.id ? 'Ocultar' : 'Vista Previa'}\r\n                </Button>\r\n                <Button\r\n                  variant=\"default\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleSubmitEvidence(workOrder)}\r\n                  iconName=\"Send\"\r\n                  disabled={workOrder?.evidenceSubmission?.submittedToProjects}\r\n                >\r\n                  Enviar a Proyectos\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EvidenceSubmissionPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\n\r\nconst ChangeOrderPanel = ({ workOrders = [], onChangeOrder, onReportToProjects }) => {\r\n  const [selectedOrder, setSelectedOrder] = useState('');\r\n  const [changeType, setChangeType] = useState('');\r\n  const [changeDescription, setChangeDescription] = useState('');\r\n  const [changeReason, setChangeReason] = useState('');\r\n  const [impactAssessment, setImpactAssessment] = useState('');\r\n  const [requestedBy, setRequestedBy] = useState('');\r\n\r\n  const changeTypes = [\r\n    { value: 'client', label: 'Cambio del Cliente', icon: 'User', color: 'text-blue-600' },\r\n    { value: 'engineering', label: 'Cambio de Ingenier√≠a', icon: 'Settings', color: 'text-purple-600' },\r\n    { value: 'material', label: 'Cambio de Materiales', icon: 'Package', color: 'text-orange-600' },\r\n    { value: 'safety', label: 'Requerimiento de Seguridad', icon: 'Shield', color: 'text-red-600' },\r\n    { value: 'quality', label: 'Mejora de Calidad', icon: 'CheckCircle', color: 'text-green-600' },\r\n    { value: 'technical', label: 'Ajuste T√©cnico', icon: 'Wrench', color: 'text-gray-600' }\r\n  ];\r\n\r\n  const handleSubmitChangeOrder = () => {\r\n    if (!selectedOrder || !changeType || !changeDescription || !requestedBy) {\r\n      alert('Por favor completa todos los campos obligatorios.');\r\n      return;\r\n    }\r\n\r\n    const changeOrderData = {\r\n      id: Date.now(),\r\n      type: changeType,\r\n      description: changeDescription,\r\n      reason: changeReason,\r\n      impact: impactAssessment,\r\n      requestedBy: requestedBy,\r\n      date: new Date()?.toISOString(),\r\n      status: 'pending_approval',\r\n      registeredBy: 'Workshop Team'\r\n    };\r\n\r\n    onChangeOrder?.(parseInt(selectedOrder), changeOrderData);\r\n\r\n    // Report change order to Projects\r\n    onReportToProjects?.(parseInt(selectedOrder), 'change_order', changeOrderData);\r\n\r\n    // Reset form\r\n    setSelectedOrder('');\r\n    setChangeType('');\r\n    setChangeDescription('');\r\n    setChangeReason('');\r\n    setImpactAssessment('');\r\n    setRequestedBy('');\r\n  };\r\n\r\n  const getChangeTypeInfo = (type) => {\r\n    return changeTypes?.find(ct => ct?.value === type) || changeTypes?.[0];\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'pending_approval': return 'bg-orange-100 text-orange-800';\r\n      case 'approved': return 'bg-green-100 text-green-800';\r\n      case 'rejected': return 'bg-red-100 text-red-800';\r\n      case 'in_progress': return 'bg-blue-100 text-blue-800';\r\n      case 'completed': return 'bg-gray-100 text-gray-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getAllChangeOrders = () => {\r\n    return workOrders?.reduce((allChanges, workOrder) => {\r\n      if (workOrder?.changeOrders?.length > 0) {\r\n        return [...allChanges, ...workOrder?.changeOrders?.map(change => ({\r\n          ...change,\r\n          workOrderNumber: workOrder?.orderNumber,\r\n          workOrderId: workOrder?.id,\r\n          projectReference: workOrder?.projectReference\r\n        }))];\r\n      }\r\n      return allChanges;\r\n    }, []) || [];\r\n  };\r\n\r\n  const allChangeOrders = getAllChangeOrders();\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"AlertTriangle\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Gesti√≥n de Cambios</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Registro y seguimiento de √≥rdenes de cambio</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\">\r\n            Bit√°cora Digital\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" iconName=\"History\">\r\n            Historial\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Change Order Registration Form */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Registrar Nueva Orden de Cambio</h3>\r\n          \r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Orden de Trabajo *\r\n            </label>\r\n            <Select\r\n              value={selectedOrder}\r\n              onChange={setSelectedOrder}\r\n              placeholder=\"Seleccionar orden de trabajo...\"\r\n            >\r\n              {workOrders?.map((workOrder) => (\r\n                <option key={workOrder?.id} value={workOrder?.id}>\r\n                  {workOrder?.orderNumber} - {workOrder?.projectReference}\r\n                </option>\r\n              ))}\r\n            </Select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Tipo de Cambio *\r\n            </label>\r\n            <Select\r\n              value={changeType}\r\n              onChange={setChangeType}\r\n              placeholder=\"Seleccionar tipo de cambio...\"\r\n            >\r\n              {changeTypes?.map((type) => (\r\n                <option key={type?.value} value={type?.value}>\r\n                  {type?.label}\r\n                </option>\r\n              ))}\r\n            </Select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Solicitado por *\r\n            </label>\r\n            <Input\r\n              value={requestedBy}\r\n              onChange={(e) => setRequestedBy(e?.target?.value)}\r\n              placeholder=\"Nombre del solicitante...\"\r\n              className=\"w-full\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Descripci√≥n del Cambio *\r\n            </label>\r\n            <textarea\r\n              value={changeDescription}\r\n              onChange={(e) => setChangeDescription(e?.target?.value)}\r\n              placeholder=\"Describe detalladamente el cambio solicitado...\"\r\n              className=\"w-full p-3 border border-border rounded-lg resize-none h-20 text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Justificaci√≥n\r\n            </label>\r\n            <textarea\r\n              value={changeReason}\r\n              onChange={(e) => setChangeReason(e?.target?.value)}\r\n              placeholder=\"Raz√≥n o justificaci√≥n del cambio...\"\r\n              className=\"w-full p-3 border border-border rounded-lg resize-none h-16 text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n              Evaluaci√≥n de Impacto\r\n            </label>\r\n            <textarea\r\n              value={impactAssessment}\r\n              onChange={(e) => setImpactAssessment(e?.target?.value)}\r\n              placeholder=\"Impacto en cronograma, costos, recursos, etc...\"\r\n              className=\"w-full p-3 border border-border rounded-lg resize-none h-16 text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <Button\r\n            onClick={handleSubmitChangeOrder}\r\n            variant=\"default\"\r\n            iconName=\"Send\"\r\n            iconPosition=\"left\"\r\n            className=\"w-full\"\r\n          >\r\n            Registrar Orden de Cambio\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Change Orders History */}\r\n        <div className=\"space-y-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Historial de Cambios</h3>\r\n          \r\n          {allChangeOrders?.length === 0 ? (\r\n            <div className=\"text-center py-8 bg-muted rounded-lg\">\r\n              <Icon name=\"FileText\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n              <h4 className=\"text-lg font-semibold text-foreground mb-2\">No hay √≥rdenes de cambio registradas</h4>\r\n              <p className=\"text-muted-foreground text-sm\">Las √≥rdenes de cambio aparecer√°n aqu√≠ una vez registradas</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n              {allChangeOrders\r\n                ?.sort((a, b) => new Date(b?.date) - new Date(a?.date))\r\n                ?.map((changeOrder, index) => {\r\n                const typeInfo = getChangeTypeInfo(changeOrder?.type);\r\n                \r\n                return (\r\n                  <div key={changeOrder?.id || index} className=\"border border-border rounded-lg p-4\">\r\n                    <div className=\"flex items-start justify-between mb-3\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <div className=\"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center\">\r\n                          <Icon name={typeInfo?.icon} size={16} color=\"white\" />\r\n                        </div>\r\n                        <div>\r\n                          <h4 className=\"font-semibold text-sm text-foreground\">\r\n                            {changeOrder?.workOrderNumber}\r\n                          </h4>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {changeOrder?.projectReference}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(changeOrder?.status)}`}>\r\n                        {changeOrder?.status === 'pending_approval' ? 'Pendiente Aprobaci√≥n' :\r\n                         changeOrder?.status === 'approved' ? 'Aprobado' :\r\n                         changeOrder?.status === 'rejected' ? 'Rechazado' :\r\n                         changeOrder?.status === 'in_progress'? 'En Progreso' : 'Completado'}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Icon name={typeInfo?.icon} size={14} className={typeInfo?.color} />\r\n                        <span className=\"text-sm font-medium text-foreground\">{typeInfo?.label}</span>\r\n                      </div>\r\n                      \r\n                      <p className=\"text-sm text-foreground\">{changeOrder?.description}</p>\r\n                      \r\n                      {changeOrder?.reason && (\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          <span className=\"font-medium\">Justificaci√≥n:</span> {changeOrder?.reason}\r\n                        </p>\r\n                      )}\r\n                      \r\n                      {changeOrder?.impact && (\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          <span className=\"font-medium\">Impacto:</span> {changeOrder?.impact}\r\n                        </p>\r\n                      )}\r\n\r\n                      <div className=\"flex items-center justify-between pt-2 border-t border-border\">\r\n                        <div className=\"flex items-center space-x-4 text-xs text-muted-foreground\">\r\n                          <span>Solicitado por: {changeOrder?.requestedBy}</span>\r\n                          <span>‚Ä¢</span>\r\n                          <span>{new Date(changeOrder?.date)?.toLocaleDateString('es-MX')}</span>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex space-x-2\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            iconName=\"Eye\"\r\n                            className=\"text-xs px-2 py-1\"\r\n                          >\r\n                            Ver Detalles\r\n                          </Button>\r\n                          {changeOrder?.status === 'pending_approval' && (\r\n                            <Button\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              iconName=\"Send\"\r\n                              className=\"text-xs px-2 py-1\"\r\n                              onClick={() => onReportToProjects?.(changeOrder?.workOrderId, 'change_follow_up', changeOrder)}\r\n                            >\r\n                              Seguimiento\r\n                            </Button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Summary Statistics */}\r\n      <div className=\"mt-6 pt-6 border-t border-border\">\r\n        <h4 className=\"font-medium text-sm text-foreground mb-3\">Resumen de Cambios</h4>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n          {[\r\n            { status: 'pending_approval', label: 'Pendientes', color: 'text-orange-600' },\r\n            { status: 'approved', label: 'Aprobados', color: 'text-green-600' },\r\n            { status: 'rejected', label: 'Rechazados', color: 'text-red-600' },\r\n            { status: 'in_progress', label: 'En Progreso', color: 'text-blue-600' },\r\n            { status: 'completed', label: 'Completados', color: 'text-gray-600' }\r\n          ]?.map((stat) => {\r\n            const count = allChangeOrders?.filter(co => co?.status === stat?.status)?.length || 0;\r\n            return (\r\n              <div key={stat?.status} className=\"text-center\">\r\n                <div className={`text-2xl font-bold ${stat?.color}`}>{count}</div>\r\n                <div className=\"text-xs text-muted-foreground\">{stat?.label}</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangeOrderPanel;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nconst WorkshopStats = ({ stats = {}, currentShift = {} }) => {\r\n  const statsCards = [\r\n    {\r\n      title: '√ìrdenes Activas',\r\n      value: stats?.activeWorkOrders || 0,\r\n      icon: 'ClipboardList',\r\n      color: 'bg-blue-500',\r\n      trend: '+2 desde ayer',\r\n      trendIcon: 'TrendingUp',\r\n      trendColor: 'text-green-600'\r\n    },\r\n    {\r\n      title: 'Completadas Hoy',\r\n      value: stats?.completedToday || 0,\r\n      icon: 'CheckCircle',\r\n      color: 'bg-green-500',\r\n      trend: '+1 desde ayer',\r\n      trendIcon: 'TrendingUp',\r\n      trendColor: 'text-green-600'\r\n    },\r\n    {\r\n      title: 'Materiales Pendientes',\r\n      value: stats?.pendingMaterials || 0,\r\n      icon: 'Package',\r\n      color: 'bg-orange-500',\r\n      trend: '-1 desde ayer',\r\n      trendIcon: 'TrendingDown',\r\n      trendColor: 'text-red-600'\r\n    },\r\n    {\r\n      title: 'Asistencia Turno',\r\n      value: `${stats?.attendanceRate || 0}%`,\r\n      icon: 'Users',\r\n      color: 'bg-purple-500',\r\n      trend: `${currentShift?.attendanceCount}/${currentShift?.totalTechnicians} t√©cnicos`,\r\n      trendIcon: 'UserCheck',\r\n      trendColor: 'text-blue-600'\r\n    },\r\n    {\r\n      title: 'Progreso Promedio',\r\n      value: `${stats?.averageProgress || 0}%`,\r\n      icon: 'Activity',\r\n      color: 'bg-indigo-500',\r\n      trend: '+15% esta semana',\r\n      trendIcon: 'TrendingUp',\r\n      trendColor: 'text-green-600'\r\n    },\r\n    {\r\n      title: 'Problemas de Calidad',\r\n      value: stats?.qualityIssues || 0,\r\n      icon: 'AlertTriangle',\r\n      color: 'bg-red-500',\r\n      trend: stats?.qualityIssues === 0 ? 'Sin incidencias' : 'Requiere atenci√≥n',\r\n      trendIcon: stats?.qualityIssues === 0 ? 'CheckCircle' : 'AlertCircle',\r\n      trendColor: stats?.qualityIssues === 0 ? 'text-green-600' : 'text-red-600'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-6\">\r\n      {statsCards?.map((card, index) => (\r\n        <div key={index} className=\"bg-card border border-border rounded-lg p-4 card-shadow\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div className={`w-10 h-10 ${card?.color} rounded-lg flex items-center justify-center`}>\r\n              <Icon name={card?.icon} size={20} color=\"white\" />\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <p className=\"text-xs text-muted-foreground font-medium\">{card?.title}</p>\r\n              <p className=\"text-2xl font-bold text-foreground\">{card?.value}</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center space-x-1\">\r\n            <Icon name={card?.trendIcon} size={12} className={card?.trendColor} />\r\n            <span className={`text-xs ${card?.trendColor}`}>{card?.trend}</span>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkshopStats;","import React from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst ShiftManagementPanel = ({ currentShift = {}, onAttendanceUpdate }) => {\r\n  const shiftStats = [\r\n    {\r\n      label: 'Horario de Turno',\r\n      value: `${currentShift?.start} - ${currentShift?.end}`,\r\n      icon: 'Clock',\r\n      color: 'text-blue-600'\r\n    },\r\n    {\r\n      label: 'Fecha',\r\n      value: new Date(currentShift?.date)?.toLocaleDateString('es-MX') || 'Hoy',\r\n      icon: 'Calendar',\r\n      color: 'text-green-600'\r\n    },\r\n    {\r\n      label: 'T√©cnicos Presentes',\r\n      value: `${currentShift?.attendanceCount}/${currentShift?.totalTechnicians}`,\r\n      icon: 'Users',\r\n      color: 'text-purple-600'\r\n    },\r\n    {\r\n      label: 'Porcentaje de Asistencia',\r\n      value: `${Math.round((currentShift?.attendanceCount / currentShift?.totalTechnicians) * 100) || 0}%`,\r\n      icon: 'TrendingUp',\r\n      color: 'text-orange-600'\r\n    }\r\n  ];\r\n\r\n  const shiftTips = [\r\n    {\r\n      icon: 'Shield',\r\n      title: 'Verificaci√≥n de Seguridad',\r\n      description: 'Asegurar que todos los t√©cnicos completen el checklist de seguridad antes de iniciar trabajos.'\r\n    },\r\n    {\r\n      icon: 'Clock',\r\n      title: 'Control de Tiempo',\r\n      description: 'Monitorear el progreso de las √≥rdenes para cumplir con el horario del turno.'\r\n    },\r\n    {\r\n      icon: 'Camera',\r\n      title: 'Documentaci√≥n',\r\n      description: 'Registrar evidencia fotogr√°fica de cada etapa del proceso de trabajo.'\r\n    },\r\n    {\r\n      icon: 'Send',\r\n      title: 'Comunicaci√≥n',\r\n      description: 'Mantener comunicaci√≥n constante con los departamentos de Proyectos y Compras.'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-card rounded-lg border border-border p-6 card-shadow mb-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center\">\r\n            <Icon name=\"Calendar\" size={20} color=\"white\" />\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-lg font-semibold text-foreground\">Gesti√≥n de Turno</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Informaci√≥n y control del turno actual</p>\r\n          </div>\r\n        </div>\r\n        <Button variant=\"outline\" size=\"sm\" iconName=\"RotateCcw\">\r\n          Actualizar Datos\r\n        </Button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n        {shiftStats?.map((stat, index) => (\r\n          <div key={index} className=\"bg-muted rounded-lg p-4\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Icon name={stat?.icon} size={20} className={stat?.color} />\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground font-medium\">{stat?.label}</p>\r\n                <p className=\"text-sm font-bold text-foreground\">{stat?.value}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        {shiftTips?.map((tip, index) => (\r\n          <div key={index} className=\"border border-border rounded-lg p-3\">\r\n            <div className=\"flex items-start space-x-2\">\r\n              <div className=\"w-6 h-6 bg-indigo-500 rounded flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                <Icon name={tip?.icon} size={12} color=\"white\" />\r\n              </div>\r\n              <div>\r\n                <h4 className=\"font-medium text-sm text-foreground\">{tip?.title}</h4>\r\n                <p className=\"text-xs text-muted-foreground mt-1\">{tip?.description}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShiftManagementPanel;","import React, { useState, useEffect } from 'react';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\n\r\nimport Button from '../../components/ui/Button';\r\n\r\nimport WorkflowBoard from './components/WorkflowBoard';\r\nimport MaterialReceptionPanel from './components/MaterialReceptionPanel';\r\nimport SafetyChecklistPanel from './components/SafetyChecklistPanel';\r\nimport AttendancePanel from './components/AttendancePanel';\r\nimport QualityControlPanel from './components/QualityControlPanel';\r\nimport EvidenceSubmissionPanel from './components/EvidenceSubmissionPanel';\r\nimport ChangeOrderPanel from './components/ChangeOrderPanel';\r\nimport WorkshopStats from './components/WorkshopStats';\r\nimport ShiftManagementPanel from './components/ShiftManagementPanel';\r\n\r\nconst WorkshopOperationsCenter = () => {\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [activePanel, setActivePanel] = useState('workflow');\r\n  const [workOrders, setWorkOrders] = useState([]);\r\n  const [currentShift, setCurrentShift] = useState({\r\n    start: '8:00',\r\n    end: '18:00',\r\n    date: new Date()?.toISOString()?.split('T')?.[0],\r\n    attendanceCount: 12,\r\n    totalTechnicians: 15\r\n  });\r\n\r\n  // Mock data for workshop work orders following the operational flow\r\n  const mockWorkOrders = [\r\n    {\r\n      id: 1,\r\n      orderNumber: 'WO-2024-001',\r\n      projectReference: 'Torre Corporativa ABC',\r\n      clientName: 'Corporaci√≥n ABC S.A.',\r\n      stage: 'material_reception',\r\n      priority: 'Alta',\r\n      assignedTechnicians: [\r\n        { id: 1, name: 'Carlos Mendoza', role: 'T√©cnico Senior' },\r\n        { id: 2, name: 'Ana Garc√≠a', role: 'Especialista HVAC' }\r\n      ],\r\n      materialsReceived: {\r\n        status: 'pending',\r\n        items: [\r\n          { name: 'Compresor Rotativo 5HP', quantity: '2 unidades', received: false, condition: null },\r\n          { name: 'Filtro de Aire HEPA', quantity: '8 unidades', received: false, condition: null },\r\n          { name: 'Ductos Galvanizados', quantity: '150 metros', received: false, condition: null }\r\n        ],\r\n        photos: [],\r\n        notes: ''\r\n      },\r\n      safetyChecklist: {\r\n        status: 'pending',\r\n        items: [\r\n          { name: 'EPP Completo', checked: false },\r\n          { name: 'Herramientas en buen estado', checked: false },\r\n          { name: '√Årea de trabajo despejada', checked: false },\r\n          { name: 'Certificaciones vigentes', checked: false }\r\n        ]\r\n      },\r\n      manufacturing: {\r\n        progress: 0,\r\n        startDate: null,\r\n        estimatedCompletion: '2024-10-15',\r\n        photos: [],\r\n        notes: ''\r\n      },\r\n      qualityControl: {\r\n        status: 'pending',\r\n        checkpoints: [\r\n          { name: 'Verificaci√≥n de instalaci√≥n', passed: null },\r\n          { name: 'Pruebas de funcionamiento', passed: null },\r\n          { name: 'Inspecci√≥n visual', passed: null },\r\n          { name: 'Documentaci√≥n t√©cnica', passed: null }\r\n        ],\r\n        photos: [],\r\n        inspector: null\r\n      },\r\n      evidenceSubmission: {\r\n        status: 'pending',\r\n        photos: [],\r\n        documents: [],\r\n        submittedToProjects: false,\r\n        submissionDate: null\r\n      },\r\n      changeOrders: []\r\n    },\r\n    {\r\n      id: 2,\r\n      orderNumber: 'WO-2024-002',\r\n      projectReference: 'Centro Comercial Plaza Norte',\r\n      clientName: 'Inmobiliaria Plaza Norte',\r\n      stage: 'safety_attendance',\r\n      priority: 'Media',\r\n      assignedTechnicians: [\r\n        { id: 3, name: 'Roberto Silva', role: 'T√©cnico Junior' },\r\n        { id: 4, name: 'Mar√≠a L√≥pez', role: 'Supervisora' }\r\n      ],\r\n      materialsReceived: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'Filtros de Aire', quantity: '20 unidades', received: true, condition: 'good' },\r\n          { name: 'Refrigerante R-410A', quantity: '2 cilindros', received: true, condition: 'good' },\r\n          { name: 'Aceite para Compresor', quantity: '5 litros', received: true, condition: 'good' }\r\n        ],\r\n        photos: ['material-photo-1.jpg', 'material-photo-2.jpg'],\r\n        notes: 'Todos los materiales recibidos en excelente estado'\r\n      },\r\n      safetyChecklist: {\r\n        status: 'in_progress',\r\n        items: [\r\n          { name: 'EPP Completo', checked: true },\r\n          { name: 'Herramientas en buen estado', checked: true },\r\n          { name: '√Årea de trabajo despejada', checked: false },\r\n          { name: 'Certificaciones vigentes', checked: false }\r\n        ]\r\n      },\r\n      manufacturing: {\r\n        progress: 0,\r\n        startDate: null,\r\n        estimatedCompletion: '2024-10-12',\r\n        photos: [],\r\n        notes: ''\r\n      },\r\n      qualityControl: {\r\n        status: 'pending',\r\n        checkpoints: [\r\n          { name: 'Verificaci√≥n de instalaci√≥n', passed: null },\r\n          { name: 'Pruebas de funcionamiento', passed: null },\r\n          { name: 'Inspecci√≥n visual', passed: null },\r\n          { name: 'Documentaci√≥n t√©cnica', passed: null }\r\n        ],\r\n        photos: [],\r\n        inspector: null\r\n      },\r\n      evidenceSubmission: {\r\n        status: 'pending',\r\n        photos: [],\r\n        documents: [],\r\n        submittedToProjects: false,\r\n        submissionDate: null\r\n      },\r\n      changeOrders: []\r\n    },\r\n    {\r\n      id: 3,\r\n      orderNumber: 'WO-2024-003',\r\n      projectReference: 'Hospital General San Jos√©',\r\n      clientName: 'Hospital General San Jos√©',\r\n      stage: 'manufacturing',\r\n      priority: 'Cr√≠tica',\r\n      assignedTechnicians: [\r\n        { id: 5, name: 'Diego Ram√≠rez', role: 'T√©cnico Senior' },\r\n        { id: 6, name: 'Laura Jim√©nez', role: 'Especialista HVAC' }\r\n      ],\r\n      materialsReceived: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'Compresor Scroll 10HP', quantity: '1 unidad', received: true, condition: 'good' },\r\n          { name: 'Kit de Conexiones', quantity: '1 set', received: true, condition: 'good' },\r\n          { name: 'Refrigerante R-134A', quantity: '3 cilindros', received: true, condition: 'good' }\r\n        ],\r\n        photos: ['material-photo-3.jpg', 'material-photo-4.jpg'],\r\n        notes: 'Materiales de emergencia recibidos y verificados'\r\n      },\r\n      safetyChecklist: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'EPP Completo', checked: true },\r\n          { name: 'Herramientas en buen estado', checked: true },\r\n          { name: '√Årea de trabajo despejada', checked: true },\r\n          { name: 'Certificaciones vigentes', checked: true }\r\n        ]\r\n      },\r\n      manufacturing: {\r\n        progress: 85,\r\n        startDate: '2024-10-01',\r\n        estimatedCompletion: '2024-10-03',\r\n        photos: ['progress-photo-1.jpg', 'progress-photo-2.jpg'],\r\n        notes: 'Instalaci√≥n de emergencia en UCI en progreso avanzado'\r\n      },\r\n      qualityControl: {\r\n        status: 'pending',\r\n        checkpoints: [\r\n          { name: 'Verificaci√≥n de instalaci√≥n', passed: null },\r\n          { name: 'Pruebas de funcionamiento', passed: null },\r\n          { name: 'Inspecci√≥n visual', passed: null },\r\n          { name: 'Documentaci√≥n t√©cnica', passed: null }\r\n        ],\r\n        photos: [],\r\n        inspector: null\r\n      },\r\n      evidenceSubmission: {\r\n        status: 'pending',\r\n        photos: [],\r\n        documents: [],\r\n        submittedToProjects: false,\r\n        submissionDate: null\r\n      },\r\n      changeOrders: [\r\n        {\r\n          id: 1,\r\n          type: 'client',\r\n          description: 'Cambio en ubicaci√≥n de unidad por requerimientos m√©dicos',\r\n          requestedBy: 'Hospital General San Jos√©',\r\n          date: '2024-10-02',\r\n          status: 'approved',\r\n          impact: 'Reubicaci√≥n de equipos, sin cambio en cronograma'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 4,\r\n      orderNumber: 'WO-2024-004',\r\n      projectReference: 'Edificio Residencial Vista Mar',\r\n      clientName: 'Constructora Vista Mar',\r\n      stage: 'quality_control',\r\n      priority: 'Media',\r\n      assignedTechnicians: [\r\n        { id: 7, name: 'Patricia Morales', role: 'Supervisora' },\r\n        { id: 8, name: 'Alejandro Ruiz', role: 'T√©cnico Senior' }\r\n      ],\r\n      materialsReceived: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'Unidades VRF', quantity: '24 unidades', received: true, condition: 'good' },\r\n          { name: 'Controles Remotos', quantity: '24 unidades', received: true, condition: 'good' },\r\n          { name: 'Tuber√≠a de Cobre', quantity: '200 metros', received: true, condition: 'good' }\r\n        ],\r\n        photos: ['material-photo-5.jpg', 'material-photo-6.jpg'],\r\n        notes: 'Sistema VRF completo recibido seg√∫n especificaciones'\r\n      },\r\n      safetyChecklist: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'EPP Completo', checked: true },\r\n          { name: 'Herramientas en buen estado', checked: true },\r\n          { name: '√Årea de trabajo despejada', checked: true },\r\n          { name: 'Certificaciones vigentes', checked: true }\r\n        ]\r\n      },\r\n      manufacturing: {\r\n        progress: 100,\r\n        startDate: '2024-09-20',\r\n        estimatedCompletion: '2024-09-30',\r\n        photos: ['final-photo-1.jpg', 'final-photo-2.jpg'],\r\n        notes: 'Instalaci√≥n VRF completada exitosamente en todos los pisos'\r\n      },\r\n      qualityControl: {\r\n        status: 'in_progress',\r\n        checkpoints: [\r\n          { name: 'Verificaci√≥n de instalaci√≥n', passed: true },\r\n          { name: 'Pruebas de funcionamiento', passed: true },\r\n          { name: 'Inspecci√≥n visual', passed: false },\r\n          { name: 'Documentaci√≥n t√©cnica', passed: null }\r\n        ],\r\n        photos: ['qc-photo-1.jpg'],\r\n        inspector: 'Patricia Morales'\r\n      },\r\n      evidenceSubmission: {\r\n        status: 'pending',\r\n        photos: [],\r\n        documents: [],\r\n        submittedToProjects: false,\r\n        submissionDate: null\r\n      },\r\n      changeOrders: []\r\n    },\r\n    {\r\n      id: 5,\r\n      orderNumber: 'WO-2024-005',\r\n      projectReference: 'Oficinas Corporativas TechSoft',\r\n      clientName: 'TechSoft Solutions',\r\n      stage: 'evidence_submission',\r\n      priority: 'Baja',\r\n      assignedTechnicians: [\r\n        { id: 9, name: 'Fernando Castro', role: 'Especialista IoT' },\r\n        { id: 10, name: 'Gabriela V√°zquez', role: 'T√©cnico Senior' }\r\n      ],\r\n      materialsReceived: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'Sensores IoT', quantity: '15 unidades', received: true, condition: 'good' },\r\n          { name: 'Gateway de Comunicaci√≥n', quantity: '1 unidad', received: true, condition: 'good' },\r\n          { name: 'Cableado de Red', quantity: '100 metros', received: true, condition: 'good' }\r\n        ],\r\n        photos: ['iot-material-1.jpg', 'iot-material-2.jpg'],\r\n        notes: 'Sistema IoT completo con tecnolog√≠a de vanguardia'\r\n      },\r\n      safetyChecklist: {\r\n        status: 'completed',\r\n        items: [\r\n          { name: 'EPP Completo', checked: true },\r\n          { name: 'Herramientas en buen estado', checked: true },\r\n          { name: '√Årea de trabajo despejada', checked: true },\r\n          { name: 'Certificaciones vigentes', checked: true }\r\n        ]\r\n      },\r\n      manufacturing: {\r\n        progress: 100,\r\n        startDate: '2024-09-25',\r\n        estimatedCompletion: '2024-10-01',\r\n        photos: ['iot-install-1.jpg', 'iot-install-2.jpg'],\r\n        notes: 'Sistema IoT instalado y configurado completamente'\r\n      },\r\n      qualityControl: {\r\n        status: 'completed',\r\n        checkpoints: [\r\n          { name: 'Verificaci√≥n de instalaci√≥n', passed: true },\r\n          { name: 'Pruebas de funcionamiento', passed: true },\r\n          { name: 'Inspecci√≥n visual', passed: true },\r\n          { name: 'Documentaci√≥n t√©cnica', passed: true }\r\n        ],\r\n        photos: ['qc-final-1.jpg', 'qc-final-2.jpg'],\r\n        inspector: 'Gabriela V√°zquez'\r\n      },\r\n      evidenceSubmission: {\r\n        status: 'in_progress',\r\n        photos: ['evidence-1.jpg', 'evidence-2.jpg', 'evidence-3.jpg'],\r\n        documents: ['manual-usuario.pdf', 'certificado-instalacion.pdf'],\r\n        submittedToProjects: false,\r\n        submissionDate: null\r\n      },\r\n      changeOrders: []\r\n    }\r\n  ];\r\n\r\n  const [workshopStats, setWorkshopStats] = useState({\r\n    activeWorkOrders: 5,\r\n    completedToday: 2,\r\n    pendingMaterials: 3,\r\n    qualityIssues: 1,\r\n    attendanceRate: 80,\r\n    averageProgress: 54\r\n  });\r\n\r\n  useEffect(() => {\r\n    setWorkOrders(mockWorkOrders);\r\n    \r\n    // Update workshop stats based on work orders\r\n    const stats = {\r\n      activeWorkOrders: mockWorkOrders?.length,\r\n      completedToday: mockWorkOrders?.filter(wo => wo?.stage === 'evidence_submission')?.length,\r\n      pendingMaterials: mockWorkOrders?.filter(wo => wo?.materialsReceived?.status === 'pending')?.length,\r\n      qualityIssues: mockWorkOrders?.filter(wo => \r\n        wo?.qualityControl?.checkpoints?.some(cp => cp?.passed === false)\r\n      )?.length,\r\n      attendanceRate: Math.round((currentShift?.attendanceCount / currentShift?.totalTechnicians) * 100),\r\n      averageProgress: Math.round(\r\n        mockWorkOrders?.reduce((sum, wo) => sum + wo?.manufacturing?.progress, 0) / mockWorkOrders?.length\r\n      )\r\n    };\r\n    setWorkshopStats(stats);\r\n  }, [currentShift?.attendanceCount, currentShift?.totalTechnicians]);\r\n\r\n  const handleSidebarToggle = () => {\r\n    setSidebarCollapsed(!sidebarCollapsed);\r\n  };\r\n\r\n  const handleMobileMenuToggle = () => {\r\n    setMobileMenuOpen(!mobileMenuOpen);\r\n  };\r\n\r\n  const handleStageUpdate = (workOrderId, newStage) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId ? { ...wo, stage: newStage } : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleMaterialReception = (workOrderId, materialData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              materialsReceived: { ...wo?.materialsReceived, ...materialData },\r\n              stage: materialData?.status === 'completed' ? 'safety_attendance' : wo?.stage\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleSafetyChecklist = (workOrderId, safetyData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              safetyChecklist: { ...wo?.safetyChecklist, ...safetyData },\r\n              stage: safetyData?.status === 'completed' ? 'manufacturing' : wo?.stage\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleManufacturingUpdate = (workOrderId, manufacturingData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              manufacturing: { ...wo?.manufacturing, ...manufacturingData },\r\n              stage: manufacturingData?.progress === 100 ? 'quality_control' : wo?.stage\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleQualityControl = (workOrderId, qualityData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              qualityControl: { ...wo?.qualityControl, ...qualityData },\r\n              stage: qualityData?.status === 'completed' ? 'evidence_submission' : wo?.stage\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleEvidenceSubmission = (workOrderId, evidenceData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              evidenceSubmission: { ...wo?.evidenceSubmission, ...evidenceData }\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleChangeOrder = (workOrderId, changeOrderData) => {\r\n    setWorkOrders(prevOrders =>\r\n      prevOrders?.map(wo =>\r\n        wo?.id === workOrderId \r\n          ? { \r\n              ...wo, \r\n              changeOrders: [...(wo?.changeOrders || []), changeOrderData]\r\n            }\r\n          : wo\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleAttendanceUpdate = (attendanceData) => {\r\n    setCurrentShift(prev => ({ ...prev, ...attendanceData }));\r\n  };\r\n\r\n  const handleReportToProjects = (workOrderId, reportType, reportData) => {\r\n  // console.log eliminado\r\n    // Integration with Projects department\r\n  };\r\n\r\n  const handleRequestToPurchases = (workOrderId, requestType, requestData) => {\r\n  // console.log eliminado\r\n    // Integration with Purchases department\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Desktop Sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <Sidebar \r\n          isCollapsed={sidebarCollapsed} \r\n          onToggle={handleSidebarToggle}\r\n        />\r\n      </div>\r\n\r\n      {/* Mobile Header */}\r\n      <div className=\"lg:hidden\">\r\n        <Header \r\n          onMenuToggle={handleMobileMenuToggle}\r\n          isMenuOpen={mobileMenuOpen}\r\n        />\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className={`transition-all duration-300 ${\r\n        sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'\r\n      }`}>\r\n        <div className=\"p-6\">\r\n          {/* Breadcrumb */}\r\n          <div className=\"mb-6\">\r\n            <Breadcrumb />\r\n          </div>\r\n\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-foreground\">Centro de Operaciones del Taller</h1>\r\n              <p className=\"text-muted-foreground\">\r\n                Gesti√≥n integral del flujo operativo del taller - Turno {currentShift?.start} a {currentShift?.end}\r\n              </p>\r\n            </div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"flex items-center space-x-2 bg-muted rounded-lg p-1\">\r\n                <Button\r\n                  variant={activePanel === 'workflow' ? 'default' : 'ghost'}\r\n                  size=\"sm\"\r\n                  onClick={() => setActivePanel('workflow')}\r\n                  iconName=\"Workflow\"\r\n                >\r\n                  Flujo\r\n                </Button>\r\n                <Button\r\n                  variant={activePanel === 'operations' ? 'default' : 'ghost'}\r\n                  size=\"sm\"\r\n                  onClick={() => setActivePanel('operations')}\r\n                  iconName=\"Settings\"\r\n                >\r\n                  Operaciones\r\n                </Button>\r\n              </div>\r\n              <Button\r\n                variant=\"default\"\r\n                iconName=\"FileText\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Reporte Semanal\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Workshop Stats */}\r\n          <WorkshopStats stats={workshopStats} currentShift={currentShift} />\r\n\r\n          {/* Shift Management Panel */}\r\n          <ShiftManagementPanel \r\n            currentShift={currentShift}\r\n            onAttendanceUpdate={handleAttendanceUpdate}\r\n          />\r\n\r\n          {/* Main Workshop Content */}\r\n          {activePanel === 'workflow' ? (\r\n            <div className=\"space-y-6\">\r\n              {/* Workflow Board - Kanban Style */}\r\n              <WorkflowBoard\r\n                workOrders={workOrders}\r\n                onStageUpdate={handleStageUpdate}\r\n                onMaterialReception={handleMaterialReception}\r\n                onSafetyChecklist={handleSafetyChecklist}\r\n                onManufacturingUpdate={handleManufacturingUpdate}\r\n                onQualityControl={handleQualityControl}\r\n                onEvidenceSubmission={handleEvidenceSubmission}\r\n                onChangeOrder={handleChangeOrder}\r\n                onReportToProjects={handleReportToProjects}\r\n                onRequestToPurchases={handleRequestToPurchases}\r\n              />\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\r\n              {/* Material Reception Panel */}\r\n              <MaterialReceptionPanel\r\n                workOrders={workOrders?.filter(wo => wo?.stage === 'material_reception' || wo?.materialsReceived?.status === 'pending')}\r\n                onMaterialReception={handleMaterialReception}\r\n                onReportToProjects={handleReportToProjects}\r\n                onRequestToPurchases={handleRequestToPurchases}\r\n              />\r\n\r\n              {/* Safety & Attendance Panel */}\r\n              <div className=\"space-y-6\">\r\n                <SafetyChecklistPanel\r\n                  workOrders={workOrders?.filter(wo => wo?.stage === 'safety_attendance')}\r\n                  onSafetyUpdate={handleSafetyChecklist}\r\n                />\r\n                \r\n                <AttendancePanel\r\n                  currentShift={currentShift}\r\n                  onAttendanceUpdate={handleAttendanceUpdate}\r\n                />\r\n              </div>\r\n\r\n              {/* Quality Control Panel */}\r\n              <QualityControlPanel\r\n                workOrders={workOrders?.filter(wo => wo?.stage === 'quality_control')}\r\n                onQualityUpdate={handleQualityControl}\r\n                onReportToProjects={handleReportToProjects}\r\n              />\r\n\r\n              {/* Evidence Submission Panel */}\r\n              <EvidenceSubmissionPanel\r\n                workOrders={workOrders?.filter(wo => wo?.stage === 'evidence_submission')}\r\n                onEvidenceSubmission={handleEvidenceSubmission}\r\n                onReportToProjects={handleReportToProjects}\r\n              />\r\n\r\n              {/* Change Order Panel */}\r\n              <div className=\"xl:col-span-2\">\r\n                <ChangeOrderPanel\r\n                  workOrders={workOrders}\r\n                  onChangeOrder={handleChangeOrder}\r\n                  onReportToProjects={handleReportToProjects}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WorkshopOperationsCenter;","import React, { useState, useEffect } from 'react';\r\nimport useCommunication from '../../../hooks/useCommunication';\r\nimport { useAuth } from '../../../hooks/useAuth';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        \r\n\r\n        const CommunicationPanel = ({ opportunity, onAddCommunication }) => {\r\n          const { createCommunication, getComunicacionesByOportunidad, loading, error, success } = useCommunication();\r\n          const { user } = useAuth();\r\n          const [newCommunication, setNewCommunication] = useState({\r\n            type: 'whatsapp',\r\n            content: '',\r\n            urgency: 'normal',\r\n            hasAttachments: false\r\n          });\r\n\r\n          const [showHistory, setShowHistory] = useState(false);\r\n          const [localHistory, setLocalHistory] = useState([]);\r\n\r\n          // Cargar comunicaciones de la oportunidad al montar el componente\r\n          useEffect(() => {\r\n            if (opportunity?.id) {\r\n              loadCommunications();\r\n            }\r\n          }, [opportunity?.id]);\r\n\r\n          const loadCommunications = async () => {\r\n            const response = await getComunicacionesByOportunidad(opportunity.id);\r\n            if (response?.data?.comunicaciones) {\r\n              const formattedComms = response.data.comunicaciones.map(comm => ({\r\n                id: comm.id,\r\n                type: comm.tipoComunicacion,\r\n                date: new Date(parseInt(comm.id)).toLocaleDateString('es-MX'),\r\n                content: comm.mensaje,\r\n                urgency: comm.nivelUrgencia,\r\n                createdBy: comm.creadoPor,\r\n              }));\r\n              setLocalHistory(formattedComms);\r\n            }\r\n          };\r\n\r\n          const handleInputChange = (field, value) => {\r\n            setNewCommunication(prev => ({ ...prev, [field]: value }));\r\n          };\r\n\r\n          const handleAddCommunication = async () => {\r\n            if (!newCommunication?.content?.trim()) return;\r\n\r\n            // Mapea los datos al formato del backend\r\n            const commData = {\r\n              tipoComunicacion: newCommunication?.type || 'whatsapp',\r\n              nivelUrgencia: newCommunication?.urgency || 'normal',\r\n              asunto: `Comunicaci√≥n desde Oportunidad`,\r\n              mensaje: newCommunication?.content,\r\n              idCliente: opportunity?.clientId || opportunity?.clienteId,\r\n              idOportunidad: opportunity?.id,\r\n              creadoPor: user?.rol ? `${user.rol} (${user.email})` : user?.email || 'Usuario',\r\n            };\r\n\r\n            const result = await createCommunication(commData);\r\n            if (!result) return;\r\n            \r\n            // Recargar las comunicaciones desde el backend\r\n            await loadCommunications();\r\n            \r\n            setNewCommunication({ type: 'whatsapp', content: '', urgency: 'normal', hasAttachments: false });\r\n          };\r\n\r\n          const getUrgencyColor = (urgency) => {\r\n            switch (urgency) {\r\n              case 'urgente': return 'text-red-600 bg-red-50';\r\n              case 'alta': return 'text-orange-600 bg-orange-50';\r\n              case 'normal': return 'text-blue-600 bg-blue-50';\r\n              default: return 'text-gray-600 bg-gray-50';\r\n            }\r\n          };\r\n\r\n          return (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"MessageSquare\" size={16} className=\"text-primary\" />\r\n                  <h4 className=\"font-medium\">Comunicaci√≥n con Cliente</h4>\r\n                </div>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => setShowHistory(!showHistory)}\r\n                  iconName={showHistory ? 'ChevronUp' : 'ChevronDown'}\r\n                >\r\n                  Historial\r\n                </Button>\r\n              </div>\r\n\r\n              {/* Communication History */}\r\n              {showHistory && (\r\n                <div className=\"max-h-48 overflow-y-auto space-y-2 bg-muted/30 rounded-lg p-3\">\r\n                  {localHistory.map((comm) => (\r\n                    <div key={comm?.id} className=\"flex items-start space-x-2 text-sm\">\r\n                      <Icon \r\n                        name={comm?.type === 'whatsapp' ? 'MessageCircle' : comm?.type === 'email' ? 'Mail' : 'Phone'} \r\n                        size={14} \r\n                        className=\"text-muted-foreground mt-0.5\" \r\n                      />\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <span className=\"text-xs text-muted-foreground\">{comm?.date}</span>\r\n                          <span className={`px-2 py-1 text-xs rounded ${getUrgencyColor(comm?.urgency)}`}>\r\n                            {comm?.urgency === 'urgente' ? 'Urgente' : comm?.urgency === 'alta' ? 'Alta' : 'Normal'}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-foreground mt-1\">{comm?.content}</p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                  {localHistory.length === 0 && (\r\n                    <p className=\"text-sm text-muted-foreground text-center py-4\">Sin comunicaciones registradas</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* New Communication */}\r\n              <div className=\"space-y-3\">\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-1 block\">Canal</label>\r\n                    <select\r\n                      value={newCommunication?.type}\r\n                      onChange={(e) => handleInputChange('type', e?.target?.value)}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background\"\r\n                    >\r\n                      <option value=\"whatsapp\">WhatsApp</option>\r\n                      <option value=\"email\">Email</option>\r\n                      <option value=\"llamada\">Llamada</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-1 block\">Urgencia</label>\r\n                    <select\r\n                      value={newCommunication?.urgency}\r\n                      onChange={(e) => handleInputChange('urgency', e?.target?.value)}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background\"\r\n                    >\r\n                      <option value=\"normal\">Normal</option>\r\n                      <option value=\"alta\">Alta</option>\r\n                      <option value=\"urgente\">Urgente</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium mb-1 block\">Mensaje</label>\r\n                  <textarea\r\n                    value={newCommunication?.content}\r\n                    onChange={(e) => handleInputChange('content', e?.target?.value)}\r\n                    placeholder=\"Escribir comunicaci√≥n con el cliente...\"\r\n                    rows={3}\r\n                    className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"attachments\"\r\n                    checked={newCommunication?.hasAttachments}\r\n                    onChange={(e) => handleInputChange('hasAttachments', e?.target?.checked)}\r\n                    className=\"rounded border-border\"\r\n                  />\r\n                  <label htmlFor=\"attachments\" className=\"text-sm\">Incluye anexos</label>\r\n                </div>\r\n\r\n                <Button\r\n                  onClick={handleAddCommunication}\r\n                  disabled={!newCommunication?.content?.trim() || loading}\r\n                  className=\"w-full\"\r\n                  iconName=\"Send\"\r\n                  iconPosition=\"left\"\r\n                >\r\n                  {loading ? 'Enviando...' : 'Enviar Comunicaci√≥n'}\r\n                </Button>\r\n                {error && <div className=\"text-xs text-destructive mt-2\">Error al enviar comunicaci√≥n</div>}\r\n                {success && <div className=\"text-xs text-green-600 mt-2\">Comunicaci√≥n enviada correctamente</div>}\r\n              </div>\r\n\r\n              {/* Quick Actions */}\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium\">Acciones R√°pidas</label>\r\n                <div className=\"grid grid-cols-2 gap-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleInputChange('content', 'Solicitar aclaraciones t√©cnicas m√≠nimas')}\r\n                    className=\"text-xs\"\r\n                  >\r\n                    Solicitar Aclaraciones\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => handleInputChange('content', 'Confirmar costo extra por escrito')}\r\n                    className=\"text-xs\"\r\n                  >\r\n                    Confirmar Costos Extra\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default CommunicationPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport useClient from '../../../hooks/useClient';\r\nimport usePerson from '../../../hooks/usePerson';\r\nimport useProyecto from '../../../hooks/useProyect';\r\n\r\nconst NewOpportunityModal = ({ isOpen, onClose, onCreateOpportunity, error }) => {\r\n  const [formData, setFormData] = useState({\r\n    clientId: '',\r\n    projectId: '',\r\n    contactChannel: 'whatsapp',\r\n    projectType: 'project',\r\n    priority: 'medium',\r\n    contactPerson: '',\r\n    phone: '',\r\n    email: '',\r\n    projectDescription: '',\r\n    location: '',\r\n    estimatedBudget: '',\r\n    timeline: '',\r\n    salesRep: 'Mar√≠a Garc√≠a',\r\n    notes: ''\r\n  });\r\n  // Proyectos\r\n  const { proyectos, getProyectos, loading: loadingProyectos, error: errorProyectos } = useProyecto();\r\n\r\n  // Filtrar proyectos por cliente seleccionado\r\n  const proyectosCliente = Array.isArray(proyectos)\r\n    ? proyectos.filter(p => {\r\n        const clienteId = p?.cliente?.id || p?.client?.id;\r\n        return clienteId === formData.clientId;\r\n      })\r\n    : [];\r\n\r\n  // Opciones para el select de proyectos\r\n  const proyectoOptions = proyectosCliente.map(p => ({\r\n    value: p.id || p._id,\r\n    label: p.nombre || p.name || p.nombreProyecto || 'Proyecto sin nombre'\r\n  }));\r\n\r\n  const { clients, getClients, loading: loadingClients, error: errorClients } = useClient();\r\n \r\n  const { departmentPersons, getPersonsByDepartment, loading: loadingSalesReps, error: errorSalesReps } = usePerson();\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      getClients();\r\n      getPersonsByDepartment('Ventas');\r\n      getProyectos();\r\n    }\r\n  }, [isOpen]);\r\n  // Limpiar datos de proyecto solo si el cliente realmente cambi√≥ (sin ciclo infinito)\r\n  const prevClientIdRef = React.useRef('');\r\n  useEffect(() => {\r\n    if (isOpen && prevClientIdRef.current !== formData.clientId) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        projectId: '',\r\n        projectType: 'project',\r\n        projectDescription: '',\r\n        location: '',\r\n        estimatedBudget: '',\r\n        timeline: ''\r\n      }));\r\n      prevClientIdRef.current = formData.clientId;\r\n    }\r\n  }, [isOpen, formData.clientId]);\r\n\r\n  // Cuando selecciona un proyecto, autollenar detalles\r\n  useEffect(() => {\r\n    if (!formData.projectId) return;\r\n    const proyecto = proyectosCliente.find(p => (p.id || p._id) === formData.projectId);\r\n    if (proyecto) {\r\n      // Formatear ubicaci√≥n correctamente\r\n      let ubicacionTexto = '';\r\n      if (proyecto.ubicacion) {\r\n        if (typeof proyecto.ubicacion === 'string') {\r\n          ubicacionTexto = proyecto.ubicacion;\r\n        } else if (typeof proyecto.ubicacion === 'object') {\r\n          const { direccion = '', municipio = '', estado = '' } = proyecto.ubicacion;\r\n          ubicacionTexto = `${direccion}${municipio ? ', ' + municipio : ''}${estado ? ', ' + estado : ''}`.trim();\r\n        }\r\n      }\r\n      \r\n      setFormData(prev => ({\r\n        ...prev,\r\n        projectType: proyecto.tipoProyecto || proyecto.type || 'project',\r\n        projectDescription: proyecto.descripcion || proyecto.description || proyecto.descripcionProyecto || '',\r\n        location: ubicacionTexto || proyecto.location || '',\r\n        estimatedBudget: String(proyecto.presupuesto?.total || proyecto.presupuesto || ''),\r\n        timeline: proyecto.cronograma?.fechaFin\r\n          ? `${proyecto.cronograma?.fechaInicio || ''} - ${proyecto.cronograma?.fechaFin}`\r\n          : (typeof proyecto.cronograma === 'string' ? proyecto.cronograma : '')\r\n      }));\r\n    }\r\n    // Solo se ejecuta cuando cambia projectId\r\n    // eslint-disable-next-line\r\n  }, [formData.projectId]);\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // Opciones de ejecutivos de ventas\r\n  const salesRepOptions = Array.isArray(departmentPersons) && departmentPersons.length > 0\r\n  ? departmentPersons.map(emp => ({ value: emp.nombreCompleto || emp.nombre || emp.name || emp.fullName || emp.email, label: emp.nombreCompleto || emp.nombre || emp.name || emp.fullName || emp.email }))\r\n    : [];\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n\r\n    // Clear error when user starts typing\r\n    if (errors?.[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n\r\n    if (!formData?.clientId?.trim()) {\r\n      newErrors.clientId = 'El cliente es requerido';\r\n    }\r\n    if (!formData?.projectId?.trim()) {\r\n      newErrors.projectId = 'El proyecto es requerido';\r\n    }\r\n\r\n    if (!formData?.contactPerson?.trim()) {\r\n      newErrors.contactPerson = 'La persona de contacto es requerida';\r\n    }\r\n\r\n    if (!formData?.phone?.trim()) {\r\n      newErrors.phone = 'El tel√©fono es requerido';\r\n    }\r\n\r\n    if (!formData?.email?.trim()) {\r\n      newErrors.email = 'El email es requerido';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/?.test(formData?.email)) {\r\n      newErrors.email = 'El formato del email no es v√°lido';\r\n    }\r\n\r\n    if (!formData?.projectDescription?.trim()) {\r\n      newErrors.projectDescription = 'La descripci√≥n del proyecto es requerida';\r\n    }\r\n\r\n    if (!formData?.location?.trim()) {\r\n      newErrors.location = 'La ubicaci√≥n es requerida';\r\n    }\r\n\r\n    if (!String(formData?.estimatedBudget).trim()) {\r\n      newErrors.estimatedBudget = 'El presupuesto estimado es requerido';\r\n    }\r\n\r\n    if (!formData?.timeline?.trim()) {\r\n      newErrors.timeline = 'El cronograma es requerido';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const generateOpportunityId = () => {\r\n    const timestamp = Date.now();\r\n    const random = Math.floor(Math.random() * 1000);\r\n    return `SALES-${timestamp?.toString()?.slice(-6)}${random?.toString()?.padStart(3, '0')}`;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      // Simulate API call delay\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n      const selectedClient = clients?.find(c => c.id === formData?.clientId || c._id === formData?.clientId);\r\n      const newOpportunity = {\r\n        clienteId: formData?.clientId,\r\n        proyectoId: formData?.projectId,\r\n        nombreCliente: selectedClient?.companyName || selectedClient?.empresa || selectedClient?.nombre || selectedClient?.name || '',\r\n        canalContacto: formData?.contactChannel,\r\n        tipoProyecto: formData?.projectType,\r\n        prioridad: formData?.priority,\r\n        personaContacto: formData?.contactPerson?.trim(),\r\n        telefono: formData?.phone?.trim(),\r\n        email: formData?.email?.trim(),\r\n        descripcionProyecto: formData?.projectDescription?.trim(),\r\n        ubicacion: formData?.location?.trim(),\r\n        presupuestoEstimado: String(formData?.estimatedBudget).trim(),\r\n        cronogramaEsperado: formData?.timeline?.trim(),\r\n        ejecutivoVentas: departmentPersons?.find(emp => (emp.nombreCompleto || emp.nombre || emp.name || emp.fullName || emp.email) === formData?.salesRep)?.nombreCompleto || formData?.salesRep,\r\n        notasAdicionales: formData?.notes?.trim() || `Nueva oportunidad registrada por ${formData?.salesRep}`\r\n      };\r\n\r\n      onCreateOpportunity?.(newOpportunity);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.error('Error creating opportunity:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      clientId: '',\r\n      contactChannel: 'whatsapp',\r\n      projectType: 'project',\r\n      priority: 'medium',\r\n      contactPerson: '',\r\n      phone: '',\r\n      email: '',\r\n      projectDescription: '',\r\n      location: '',\r\n      estimatedBudget: '',\r\n      timeline: '',\r\n      salesRep: 'Mar√≠a Garc√≠a',\r\n      notes: ''\r\n    });\r\n    setErrors({});\r\n    setIsSubmitting(false);\r\n    onClose?.();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"fixed inset-0 bg-black/50 transition-opacity\" \r\n        onClick={handleClose}\r\n      />\r\n      {/* Modal */}\r\n      <div className=\"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Nueva Oportunidad de Venta</h2>\r\n            <p className=\"text-sm text-muted-foreground mt-1\">\r\n              Registra una nueva oportunidad comercial\r\n            </p>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            iconName=\"X\"\r\n            onClick={handleClose}\r\n            disabled={isSubmitting}\r\n          />\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"overflow-y-auto max-h-[calc(90vh-140px)]\">\r\n          <div className=\"p-6 space-y-6\">\r\n            {/* Basic Information */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Building2\" size={18} className=\"mr-2\" />\r\n                Informaci√≥n B√°sica\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Cliente <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.clientId}\r\n                    onChange={(value) => handleInputChange('clientId', value)}\r\n                    options={\r\n                      Array.isArray(clients) && clients.length > 0\r\n                        ? clients.map(c => ({\r\n                            value: c.id || c._id,\r\n                            label: c.companyName || c.empresa || 'Sin nombre'\r\n                          }) )\r\n                        : []\r\n                    }\r\n                    placeholder={\r\n                      loadingClients\r\n                        ? 'Cargando clientes...'\r\n                        : (clients.length === 0 ? 'No hay clientes registrados' : 'Selecciona un cliente')\r\n                    }\r\n                    loading={loadingClients}\r\n                    error={errors?.clientId}\r\n                    searchable\r\n                  />\r\n                  {errorClients && <div className=\"text-xs text-destructive\">Error al cargar clientes</div>}\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Proyecto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.projectId}\r\n                    onChange={(value) => handleInputChange('projectId', value)}\r\n                    options={proyectoOptions}\r\n                    placeholder={formData.clientId ? (loadingProyectos ? 'Cargando proyectos...' : (proyectoOptions.length === 0 ? 'No hay proyectos para este cliente' : 'Selecciona un proyecto')) : 'Selecciona un cliente primero'}\r\n                    loading={loadingProyectos}\r\n                    error={errors?.projectId}\r\n                    searchable\r\n                    disabled={!formData.clientId}\r\n                  />\r\n                  {errorProyectos && <div className=\"text-xs text-destructive\">Error al cargar proyectos</div>}\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Canal de Contacto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.contactChannel}\r\n                    onChange={(value) => handleInputChange('contactChannel', value)}\r\n                    options={[\r\n                      { value: 'whatsapp', label: 'WhatsApp' },\r\n                      { value: 'email', label: 'Email' },\r\n                      { value: 'phone', label: 'Tel√©fono' }\r\n                    ]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Tipo de Proyecto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.projectType}\r\n                    onChange={(value) => handleInputChange('projectType', value)}\r\n                    options={[\r\n                      { value: 'project', label: 'Proyecto Completo' },\r\n                      { value: 'piece', label: 'Pieza/Servicio' }\r\n                    ]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Prioridad <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.priority}\r\n                    onChange={(value) => handleInputChange('priority', value)}\r\n                    options={[\r\n                      { value: 'urgent', label: 'Urgente' },\r\n                      { value: 'high', label: 'Alta' },\r\n                      { value: 'medium', label: 'Media' },\r\n                      { value: 'low', label: 'Baja' }\r\n                    ]}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Contact Information */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Users\" size={18} className=\"mr-2\" />\r\n                Informaci√≥n de Contacto\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <Input\r\n                  label=\"Persona de Contacto\"\r\n                  required\r\n                  value={formData?.contactPerson}\r\n                  onChange={(e) => handleInputChange('contactPerson', e?.target?.value)}\r\n                  error={errors?.contactPerson}\r\n                  placeholder=\"Ej. Ing. Carlos Rodriguez\"\r\n                />\r\n\r\n                <Input\r\n                  label=\"Tel√©fono\"\r\n                  required\r\n                  value={formData?.phone}\r\n                  onChange={(e) => {\r\n                    // Solo permitir n√∫meros y m√°ximo 10 d√≠gitos\r\n                    const val = e?.target?.value.replace(/[^0-9]/g, '').slice(0, 10);\r\n                    handleInputChange('phone', val);\r\n                  }}\r\n                  error={errors?.phone}\r\n                  placeholder=\"Ej. 5512345678\"\r\n                  maxLength={10}\r\n                  inputMode=\"numeric\"\r\n                  autoComplete=\"tel\"\r\n                />\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <Input\r\n                    label=\"Email\"\r\n                    type=\"email\"\r\n                    required\r\n                    value={formData?.email}\r\n                    onChange={(e) => handleInputChange('email', e?.target?.value)}\r\n                    error={errors?.email}\r\n                    placeholder=\"contacto@empresa.com\"\r\n                  />\r\n                  {error?.status === 409 && error?.data?.error?.includes('correo') && (\r\n                    <p className=\"text-xs text-destructive mt-1\">Correo registrado</p>\r\n                  )}\r\n                  {error?.status === 409 && error?.data?.error?.includes('correo') && (\r\n                    <p className=\"text-xs text-destructive mt-1\">Correo registrado</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Project Details */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"FileText\" size={18} className=\"mr-2\" />\r\n                Detalles del Proyecto\r\n              </h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Descripci√≥n del Proyecto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <textarea\r\n                    className=\"mt-2 flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[100px]\"\r\n                    value={formData?.projectDescription}\r\n                    onChange={(e) => handleInputChange('projectDescription', e?.target?.value)}\r\n                    placeholder=\"Describe el proyecto o servicio solicitado...\"\r\n                  />\r\n                  {errors?.projectDescription && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.projectDescription}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <Input\r\n                  label=\"Ubicaci√≥n\"\r\n                  required\r\n                  value={formData?.location}\r\n                  onChange={(e) => handleInputChange('location', e?.target?.value)}\r\n                  error={errors?.location}\r\n                  placeholder=\"Ciudad, Estado\"\r\n                />\r\n\r\n                <Input\r\n                  label=\"Presupuesto Estimado (MXN)\"\r\n                  type=\"number\"\r\n                  required\r\n                  value={formData?.estimatedBudget}\r\n                  onChange={(e) => handleInputChange('estimatedBudget', e?.target?.value)}\r\n                  error={errors?.estimatedBudget}\r\n                  placeholder=\"0\"\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                />\r\n\r\n                <Input\r\n                  label=\"Cronograma Esperado\"\r\n                  required\r\n                  value={formData?.timeline}\r\n                  onChange={(e) => handleInputChange('timeline', e?.target?.value)}\r\n                  error={errors?.timeline}\r\n                  placeholder=\"Ej. 3 meses, 8 semanas\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Assignment */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"UserCheck\" size={18} className=\"mr-2\" />\r\n                Asignaci√≥n\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Ejecutivo de Ventas <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.salesRep}\r\n                    onChange={(value) => handleInputChange('salesRep', value)}\r\n                    options={salesRepOptions}\r\n                    loading={loadingSalesReps}\r\n                    error={errorSalesReps}\r\n                    placeholder={loadingSalesReps ? 'Cargando ejecutivos...' : (salesRepOptions.length === 0 ? 'No hay ejecutivos de ventas' : 'Selecciona ejecutivo')}\r\n                    searchable\r\n                   />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground\">Notas Adicionales</label>\r\n                  <textarea\r\n                    className=\"mt-2 flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[80px]\"\r\n                    value={formData?.notes}\r\n                    onChange={(e) => handleInputChange('notes', e?.target?.value)}\r\n                    placeholder=\"Informaci√≥n adicional relevante...\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"flex items-center justify-end space-x-4 p-6 border-t bg-gray-50 dark:bg-gray-800/50\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={handleClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              iconName={isSubmitting ? \"Loader2\" : \"Plus\"}\r\n              iconPosition=\"left\"\r\n              className={isSubmitting ? \"animate-spin\" : \"\"}\r\n            >\r\n              {isSubmitting ? 'Creando...' : 'Crear Oportunidad'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewOpportunityModal;","import httpService from './httpService';\r\n\r\nconst API_BASE = '/oportunidades';\r\n\r\nconst opportunityService = {\r\n  crearOportunidad: async (data) => {\r\n    return httpService.post(`${API_BASE}/crear`, data);\r\n  },\r\n  obtenerTodasLasOportunidades: async () => {\r\n    return httpService.get(`${API_BASE}/obtenerTodasLasOportunidades`);\r\n  },\r\n  obtenerOportunidadPorId: async (id) => {\r\n    return httpService.get(`${API_BASE}/obtenerOportunidades/${id}`);\r\n  },\r\n  actualizarOportunidad: async (id, data) => {\r\n    return httpService.put(`${API_BASE}/actualizar/${id}`, data);\r\n  }\r\n};\r\n\r\nexport default opportunityService;\r\n","import { useState, useEffect } from 'react';\r\nimport { useNotifications } from '../context/NotificationContext';\r\nimport opportunityService from '../services/opportunityService';\r\n\r\nexport function useOpportunity() {\r\n  const { showOperationSuccess, showHttpError } = useNotifications();\r\n  const [oportunidades, setOportunidades] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const fetchOportunidades = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await opportunityService.obtenerTodasLasOportunidades();\r\n      const raw = response.data || [];\r\n      const mapped = raw.map((opp) => ({\r\n  id: opp.id,\r\n  clienteId: opp.clienteId,\r\n  proyectoId: opp.proyectoId,\r\n  clientName: opp.nombreCliente,\r\n        contactChannel: opp.canalContacto,\r\n        projectType: opp.tipoProyecto,\r\n        salesRep: opp.ejecutivoVentas,\r\n        stage: opp.etapa || 'initial-contact',\r\n        priority: opp.prioridad,\r\n        stageDuration: opp.diasEnEtapa || 1,\r\n        contactInfo: {\r\n          phone: opp.telefono,\r\n          email: opp.email,\r\n          contactPerson: opp.personaContacto,\r\n        },\r\n        projectDetails: {\r\n          description: opp.descripcionProyecto,\r\n          location: opp.ubicacion,\r\n          estimatedBudget: opp.presupuestoEstimado,\r\n          timeline: opp.cronogramaEsperado,\r\n        },\r\n        quotationData: opp.quotationData || {\r\n          scope: '',\r\n          assumptions: [],\r\n          timeline: '',\r\n          conditions: '',\r\n          materials: [],\r\n          riskAssessment: 'low',\r\n          extraCosts: [],\r\n          totalAmount: 0,\r\n          validity: '30 d√≠as'\r\n        },\r\n        contractualInfo: opp.contractualInfo || {\r\n          paymentConditions: '',\r\n          billingData: {\r\n            businessName: '',\r\n            rfc: '',\r\n            address: ''\r\n          },\r\n          deliverySchedule: []\r\n        },\r\n        notes: opp.notasAdicionales,\r\n        createdAt: opp.createdAt,\r\n        updatedAt: opp.updatedAt,\r\n      }));\r\n      setOportunidades(mapped);\r\n    } catch (err) {\r\n      setError(err);\r\n      // No mostrar notificaci√≥n, solo actualizar el estado de error\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const crearOportunidad = async (data) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await opportunityService.crearOportunidad(data);\r\n      await fetchOportunidades();\r\n      showOperationSuccess('Oportunidad guardada exitosamente');\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al guardar oportunidad');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n    };\r\n\r\n    const actualizarOportunidad = async (id, data) => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const response = await opportunityService.actualizarOportunidad(id, data);\r\n        await fetchOportunidades();\r\n        showOperationSuccess('Oportunidad actualizada exitosamente');\r\n        return response;\r\n      } catch (err) {\r\n        setError(err);\r\n        showHttpError('Error al actualizar oportunidad');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOportunidades();\r\n  }, []);\r\n\r\n  return {\r\n    oportunidades,\r\n    loading,\r\n    error,\r\n    fetchOportunidades,\r\n    crearOportunidad,\r\n     actualizarOportunidad,\r\n  };\r\n}\r\n","// SalesOpportunityManagement.jsx\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ClientRegistrationPanel from './components/ClientRegistrationPanel';\r\nimport CommunicationPanel from './components/CommunicationPanel';\r\nimport QuotationRequestPanel from './components/QuotationRequestPanel';\r\nimport WorkOrderPanel from './components/WorkOrderPanel';\r\nimport ChangeManagementPanel from './components/ChangeManagementPanel';\r\nimport NewOpportunityModal from './components/NewOpportunityModal';\r\nimport { useOpportunity } from '../../hooks/useOpportunity';\r\nimport { useNotifications } from '../../context/NotificationContext';\r\n\r\n\r\nconst SalesOpportunityManagement = () => {\r\n  const { oportunidades, loading, error, crearOportunidad, fetchOportunidades, actualizarOportunidad } = useOpportunity();\r\n  const { showOperationSuccess } = useNotifications();\r\n  // Estado local de oportunidades para el mock y handlers\r\n  const [opportunities, setOpportunities] = useState([]);\r\n  const [selectedOpportunity, setSelectedOpportunity] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showControls, setShowControls] = useState(false);\r\n  const [showNewOpportunityModal, setShowNewOpportunityModal] = useState(false);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n\r\n  // Verificar si viene de crear cotizaci√≥n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    if (params.get('cotizacionCreada') === 'true') {\r\n      showOperationSuccess('Cotizaci√≥n creada exitosamente. La oportunidad permanece en Desarrollo de Cotizaci√≥n.');\r\n      // Limpiar el par√°metro de la URL\r\n      window.history.replaceState({}, '', '/oportunidades');\r\n      // Recargar oportunidades para ver los datos actualizados\r\n      fetchOportunidades();\r\n    }\r\n  }, []);\r\n\r\n  // Etapas del flujo de ventas\r\n  const salesStages = useMemo(() => [\r\n    {\r\n      id: 'initial-contact',\r\n      name: 'Contacto Inicial',\r\n      description: 'Recepci√≥n de solicitud (WhatsApp/Correo)',\r\n      color: 'bg-blue-500',\r\n      icon: 'MessageCircle'\r\n    },\r\n    {\r\n      id: 'information-validation',\r\n      name: 'Validaci√≥n de Informaci√≥n',\r\n      description: 'Clasificaci√≥n y validaci√≥n de informaci√≥n m√≠nima',\r\n      color: 'bg-indigo-500',\r\n      icon: 'CheckSquare'\r\n    },\r\n    {\r\n      id: 'quotation-development',\r\n      name: 'Desarrollo de Cotizaci√≥n',\r\n      description: 'Preparar cotizaci√≥n con alcances, supuestos y tiempos',\r\n      color: 'bg-purple-500',\r\n      icon: 'FileText'\r\n    },\r\n    {\r\n      id: 'client-review',\r\n      name: 'Revisi√≥n del Cliente',\r\n      description: 'Env√≠o de cotizaci√≥n y seguimiento de aprobaci√≥n',\r\n      color: 'bg-yellow-500',\r\n      icon: 'Eye'\r\n    },\r\n    {\r\n      id: 'closure',\r\n      name: 'Cierre',\r\n      description: 'Aprobaci√≥n final o cierre de oportunidad',\r\n      color: 'bg-green-500',\r\n      icon: 'CheckCircle2'\r\n    }\r\n  ], []);\r\n\r\n  // Mock inicial (puedes reemplazar por fetch real)\r\n  const mockOpportunities = useMemo(() => ([\r\n    {\r\n      id: \"SALES-001\",\r\n      clientName: \"Corporaci√≥n ABC\",\r\n      contactChannel: \"whatsapp\",\r\n      projectType: \"project\",\r\n      salesRep: \"Mar√≠a Garc√≠a\",\r\n      stage: \"initial-contact\",\r\n      priority: \"high\",\r\n      stageDuration: 2,\r\n      contactInfo: {\r\n        phone: \"+52 55 1234 5678\",\r\n        email: \"contacto@corporacionabc.com\",\r\n        contactPerson: \"Ing. Carlos Rodriguez\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Instalaci√≥n de sistema HVAC para edificio corporativo\",\r\n        location: \"Ciudad de M√©xico\",\r\n        estimatedBudget: 2500000,\r\n        timeline: \"3 meses\"\r\n      },\r\n      documents: [],\r\n      communications: [\r\n        {\r\n          id: \"comm-1\",\r\n          type: \"whatsapp\",\r\n          date: \"2024-03-28\",\r\n          content: \"Cliente solicita cotizaci√≥n para sistema HVAC\",\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      notes: \"Cliente contact√≥ por WhatsApp. Requiere instalaci√≥n completa.\"\r\n    },\r\n    {\r\n      id: \"SALES-002\",\r\n      clientName: \"Industrias XYZ\",\r\n      contactChannel: \"email\",\r\n      projectType: \"piece\",\r\n      salesRep: \"Roberto Silva\",\r\n      stage: \"information-validation\",\r\n      priority: \"medium\",\r\n      stageDuration: 5,\r\n      contactInfo: {\r\n        phone: \"+52 55 9876 5432\",\r\n        email: \"proyectos@industriasxyz.com\",\r\n        contactPerson: \"Arq. Ana Martinez\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Mantenimiento y actualizaci√≥n de sistema existente\",\r\n        location: \"Guadalajara, Jalisco\",\r\n        estimatedBudget: 850000,\r\n        timeline: \"6 semanas\"\r\n      },\r\n      requirements: {\r\n        complete: false,\r\n        checklist: {\r\n          technicalSpecs: true,\r\n          locationAccess: false,\r\n          budgetRange: true,\r\n          timeline: true,\r\n          permits: false\r\n        }\r\n      },\r\n      communications: [\r\n        {\r\n          id: \"comm-2\",\r\n          type: \"email\",\r\n          date: \"2024-03-25\",\r\n          content: \"Enviamos formulario de requerimientos t√©cnicos\",\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      notes: \"Pendiente confirmaci√≥n de acceso y permisos\"\r\n    },\r\n    {\r\n      id: \"SALES-003\",\r\n      clientName: \"Green Energy M√©xico\",\r\n      contactChannel: \"whatsapp\",\r\n      projectType: \"project\",\r\n      salesRep: \"Carmen D√≠az\",\r\n      stage: \"quotation-development\",\r\n      priority: \"urgent\",\r\n      stageDuration: 8,\r\n      contactInfo: {\r\n        phone: \"+52 55 4567 8901\",\r\n        email: \"ventas@greenenergy.mx\",\r\n        contactPerson: \"Ing. Fernando L√≥pez\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Sistema HVAC para complejo residencial sustentable\",\r\n        location: \"Monterrey, Nuevo Le√≥n\",\r\n        estimatedBudget: 4200000,\r\n        timeline: \"4 meses\"\r\n      },\r\n      requirements: {\r\n        complete: true,\r\n        checklist: {\r\n          technicalSpecs: true,\r\n          locationAccess: true,\r\n          budgetRange: true,\r\n          timeline: true,\r\n          permits: true\r\n        }\r\n      },\r\n      quotationData: {\r\n        scope: \"Instalaci√≥n completa de sistema HVAC con controles inteligentes\",\r\n        assumptions: [\r\n          \"Acceso libre a todas las √°reas durante horario laboral\",\r\n          \"Cliente proporciona conexiones el√©ctricas principales\"\r\n        ],\r\n        timeline: \"16 semanas\",\r\n        conditions: \"50% anticipo, 50% contra entrega\",\r\n        materials: [\"Unidades condensadoras\", \"Ductos\", \"Controles\"],\r\n        riskAssessment: \"Medio - proyecto en construcci√≥n\",\r\n        extraCosts: []\r\n      },\r\n      communications: [\r\n        {\r\n          id: \"comm-3\",\r\n          type: \"whatsapp\",\r\n          date: \"2024-03-20\",\r\n          content: \"Cliente solicita ajustes en cronograma\",\r\n          urgency: \"urgent\"\r\n        }\r\n      ],\r\n      notes: \"Cotizaci√≥n en desarrollo. Cliente muy interesado.\"\r\n    },\r\n    {\r\n      id: \"SALES-004\",\r\n      clientName: \"Tech Solutions SA\",\r\n      contactChannel: \"email\",\r\n      projectType: \"project\",\r\n      salesRep: \"Patricia Morales\",\r\n      stage: \"client-review\",\r\n      priority: \"high\",\r\n      stageDuration: 12,\r\n      contactInfo: {\r\n        phone: \"+52 55 2345 6789\",\r\n        email: \"infraestructura@techsolutions.com\",\r\n        contactPerson: \"Lic. Miguel Hern√°ndez\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Modernizaci√≥n de sistema de climatizaci√≥n para oficinas\",\r\n        location: \"Puebla, Puebla\",\r\n        estimatedBudget: 1800000,\r\n        timeline: \"10 semanas\"\r\n      },\r\n      quotationData: {\r\n        scope: \"Reemplazo de equipos obsoletos y optimizaci√≥n energ√©tica\",\r\n        assumptions: [\r\n          \"Trabajo nocturno y fines de semana\",\r\n          \"Coordinaci√≥n con otros contratistas\"\r\n        ],\r\n        timeline: \"10 semanas\",\r\n        conditions: \"30% anticipo, 40% avance 50%, 30% finalizaci√≥n\",\r\n        totalAmount: 1950000,\r\n        validity: \"30 d√≠as\"\r\n      },\r\n      quotationStatus: {\r\n        sent: true,\r\n        sentDate: \"2024-03-15\",\r\n        method: \"email\",\r\n        attachments: [\"Cotizaci√≥n_TechSolutions.pdf\", \"Cronograma.pdf\"],\r\n        clientFeedback: \"Cliente solicit√≥ ajustes menores\"\r\n      },\r\n      communications: [\r\n        {\r\n          id: \"comm-4\",\r\n          type: \"email\",\r\n          date: \"2024-03-22\",\r\n          content: \"Cliente acepta condiciones, solicita ajuste en cronograma\",\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      notes: \"Cotizaci√≥n enviada. Cliente en proceso de aprobaci√≥n interna.\"\r\n    },\r\n    {\r\n      id: \"SALES-005\",\r\n      clientName: \"Urban Development Group\",\r\n      contactChannel: \"whatsapp\",\r\n      projectType: \"project\",\r\n      salesRep: \"Alejandro Torres\",\r\n      stage: \"closure\",\r\n      priority: \"medium\",\r\n      stageDuration: 15,\r\n      contactInfo: {\r\n        phone: \"+52 55 6789 0123\",\r\n        email: \"desarrollo@urbandevelopment.mx\",\r\n        contactPerson: \"Arq. Sofia Ram√≠rez\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Sistema HVAC para centro comercial\",\r\n        location: \"Tijuana, Baja California\",\r\n        estimatedBudget: 3500000,\r\n        timeline: \"5 meses\"\r\n      },\r\n      quotationData: {\r\n        totalAmount: 3750000,\r\n        approved: true,\r\n        approvalDate: \"2024-03-26\"\r\n      },\r\n      contractualInfo: {\r\n        paymentConditions: \"40% anticipo, 30% avance 50%, 30% finalizaci√≥n\",\r\n        billingData: {\r\n          businessName: \"Urban Development Group S.A. de C.V.\",\r\n          rfc: \"UDG123456789\",\r\n          address: \"Av. Revoluci√≥n 1234, Tijuana, BC\"\r\n        },\r\n        deliverySchedule: [\r\n          { milestone: \"Equipos principales\", date: \"2024-05-15\" },\r\n          { milestone: \"Instalaci√≥n completa\", date: \"2024-07-30\" }\r\n        ]\r\n      },\r\n      workOrderGenerated: true,\r\n      workOrderRef: \"WO-2024-UDG-001\",\r\n      communications: [\r\n        {\r\n          id: \"comm-5\",\r\n          type: \"email\",\r\n          date: \"2024-03-26\",\r\n          content: \"Contrato firmado. Iniciando proceso interno\",\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      notes: \"¬°Oportunidad cerrada exitosamente! Orden de trabajo generada.\"\r\n    }\r\n  ]), []);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const load = async () => {\r\n      setIsLoading(true);\r\n      // Simula fetch\r\n      await new Promise((r) => setTimeout(r, 600));\r\n      if (!mounted) return;\r\n      setOpportunities(mockOpportunities);\r\n      setIsLoading(false);\r\n    };\r\n    load();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [mockOpportunities]);\r\n\r\n  // --- Handlers ---\r\n  const handleCreateOpportunity = (newOpportunity) => {\r\n    crearOportunidad(newOpportunity)\r\n      .then(response => {\r\n        console.log('Respuesta backend oportunidad:', response);\r\n        // Si el backend responde con √©xito, actualiza el estado local\r\n        if (response && response.success && response.data) {\r\n          setOpportunities(prev => [response.data, ...prev]);\r\n        }\r\n        setShowNewOpportunityModal(false);\r\n      })\r\n      .catch(error => {\r\n        // Manejo de error opcional\r\n        console.error('Error al guardar oportunidad:', error);\r\n      });\r\n  };\r\n\r\n  const handleNewOpportunityClick = () => {\r\n    setShowNewOpportunityModal(true);\r\n    setShowControls(false);\r\n    setSelectedOpportunity(null);\r\n  };\r\n\r\n  const handleStageTransition = async (opportunityId, newStage) => {\r\n    try {\r\n      // Si se selecciona \"Desarrollo de Cotizaci√≥n\", redirigir antes de la actualizaci√≥n\r\n      if (newStage === 'quotation-development') {\r\n        // Actualiza primero el estado\r\n        await actualizarOportunidad(opportunityId, { etapa: newStage });\r\n        // Redirige a cotizaciones con los par√°metros necesarios\r\n        window.location.href = `/cotizaciones?opportunityId=${opportunityId}&newQuotation=true`;\r\n        return;\r\n      }\r\n\r\n      // Para otras etapas, contin√∫a con el flujo normal\r\n      await actualizarOportunidad(opportunityId, { etapa: newStage });\r\n      if (selectedOpportunity?.id === opportunityId) {\r\n        setSelectedOpportunity(prev => ({ ...prev, stage: newStage, stageDuration: 0 }));\r\n      }\r\n    } catch (err) {\r\n      // Manejo de error ya est√° en el hook\r\n    }\r\n  };\r\n\r\n  const handleOpportunitySelect = (opportunity) => {\r\n    setSelectedOpportunity(opportunity);\r\n    setShowControls(true);\r\n  };\r\n\r\n  const handleClientRegistration = (opportunityId, clientData) => {\r\n    setOpportunities(prev => prev?.map(opp =>\r\n      opp?.id === opportunityId\r\n        ? { ...opp, contactInfo: { ...opp?.contactInfo, ...clientData } }\r\n        : opp\r\n    ));\r\n    if (selectedOpportunity?.id === opportunityId) {\r\n      setSelectedOpportunity(prev => ({ ...prev, contactInfo: { ...prev?.contactInfo, ...clientData } }));\r\n    }\r\n  };\r\n\r\n  const handleCommunicationAdd = (opportunityId, communication) => {\r\n    setOpportunities(prev => prev?.map(opp =>\r\n      opp?.id === opportunityId\r\n        ? {\r\n            ...opp,\r\n            communications: [...(opp?.communications || []), communication]\r\n          }\r\n        : opp\r\n    ));\r\n    if (selectedOpportunity?.id === opportunityId) {\r\n      setSelectedOpportunity(prev => ({ ...prev, communications: [...(prev?.communications || []), communication] }));\r\n    }\r\n  };\r\n\r\n  const handleQuotationUpdate = (opportunityId, quotationData) => {\r\n    setOpportunities(prev => prev?.map(opp =>\r\n      opp?.id === opportunityId\r\n        ? { ...opp, quotationData }\r\n        : opp\r\n    ));\r\n    if (selectedOpportunity?.id === opportunityId) {\r\n      setSelectedOpportunity(prev => ({ ...prev, quotationData }));\r\n    }\r\n  };\r\n\r\n  const handleWorkOrderGeneration = (opportunityId, workOrderData) => {\r\n    setOpportunities(prev => prev?.map(opp =>\r\n      opp?.id === opportunityId\r\n        ? {\r\n            ...opp,\r\n            workOrderGenerated: true,\r\n            workOrderRef: workOrderData?.reference\r\n          }\r\n        : opp\r\n    ));\r\n    if (selectedOpportunity?.id === opportunityId) {\r\n      setSelectedOpportunity(prev => ({ ...prev, workOrderGenerated: true, workOrderRef: workOrderData?.reference }));\r\n    }\r\n  };\r\n\r\n  const getOpportunitiesByStage = (stageId) => {\r\n    if (!oportunidades) return [];\r\n    // Si la etapa es 'initial-contact', incluir las que no tienen etapa\r\n    if (stageId === 'initial-contact') {\r\n      return oportunidades.filter(opp => !opp.stage || opp.stage === 'initial-contact');\r\n    }\r\n    return oportunidades.filter(opp => opp.stage === stageId);\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'border-l-4 border-red-600 bg-red-50';\r\n      case 'high': return 'border-l-4 border-orange-500 bg-orange-50';\r\n      case 'medium': return 'border-l-4 border-yellow-500 bg-yellow-50';\r\n      case 'low': return 'border-l-4 border-green-500 bg-green-50';\r\n      default: return 'border-l-4 border-gray-400 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getDurationColor = (days) => {\r\n    if (days <= 3) return 'text-green-600';\r\n    if (days <= 7) return 'text-yellow-600';\r\n    return 'text-red-600';\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando oportunidades de venta...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Render ---\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n\r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n\r\n        <main className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Encabezado */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Gesti√≥n de Oportunidades de Venta</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                  Flujo completo de ventas desde contacto inicial hasta cierre de oportunidad\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  iconName=\"RefreshCw\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => window.location?.reload()}\r\n                >\r\n                  Actualizar\r\n                </Button>\r\n                <Button\r\n                  iconName=\"Plus\"\r\n                  iconPosition=\"left\"\r\n                  onClick={handleNewOpportunityClick}\r\n                >\r\n                  Nueva Oportunidad\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Kanban + Panel derecho */}\r\n            <div className=\"relative flex transition-all duration-300\">\r\n              {/* Kanban container */}\r\n              <div\r\n                className={`flex-1 pb-6 transition-all duration-300 ${showControls ? 'mr-[32rem]' : ''}`}\r\n              >\r\n                {/* Scroll horizontal en desktop; en mobile se apilan columnas (flex-col) */}\r\n                <div className=\"lg:overflow-x-auto lg:overflow-y-hidden\">\r\n                  <div className=\"flex gap-6 min-w-max px-0 lg:px-6\r\n                                  flex-col lg:flex-row\">\r\n                    {salesStages.map((stage) => (\r\n                      <div\r\n                        key={stage.id}\r\n                        className=\"flex flex-col w-full lg:w-[280px] bg-white rounded-2xl shadow-md border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow\"\r\n                      >\r\n                        {/* Header etapa */}\r\n                        <div className={`${stage.color} p-4 text-white flex flex-col rounded-t-2xl`}>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <Icon name={stage.icon} size={20} />\r\n                            <h3 className=\"font-semibold text-base\">{stage.name}</h3>\r\n                          </div>\r\n                          <p className=\"text-xs mt-1 opacity-90\">{stage.description}</p>\r\n                          <span className=\"text-xs mt-2 bg-white/20 rounded px-2 py-1 w-fit\">\r\n                            {getOpportunitiesByStage(stage.id)?.length} oportunidades\r\n                          </span>\r\n                        </div>\r\n\r\n                        {/* Contenido tarjetas y mensaje vac√≠o */}\r\n                        <div className=\"p-4 space-y-3 bg-gray-50 overflow-y-auto max-h-[60vh] scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent\">\r\n                          {/* Tarjetas */}\r\n                          {getOpportunitiesByStage(stage.id)?.map((opportunity) => (\r\n                            <article\r\n                              key={opportunity.id}\r\n                              onClick={() => handleOpportunitySelect(opportunity)}\r\n                              role=\"button\"\r\n                              tabIndex={0}\r\n                              onKeyDown={(e) => { if (e.key === 'Enter') handleOpportunitySelect(opportunity); }}\r\n                              className={`p-3 rounded-xl cursor-pointer hover:scale-[1.02] transform transition-all ${getPriorityColor(opportunity.priority)}`}\r\n                              aria-label={`${opportunity.clientName} - ${opportunity.id}`}\r\n                            >\r\n                              <div className=\"flex items-start justify-between mb-2\">\r\n                                <h4 className=\"font-medium text-sm text-gray-900 line-clamp-2\">\r\n                                  {opportunity.clientName}\r\n                                </h4>\r\n                                <span\r\n                                  className={`text-xs px-2 py-1 rounded-full ${\r\n                                    opportunity.priority === 'urgent'\r\n                                      ? 'bg-red-100 text-red-800'\r\n                                      : opportunity.priority === 'high'\r\n                                      ? 'bg-orange-100 text-orange-800'\r\n                                      : opportunity.priority === 'medium'\r\n                                      ? 'bg-yellow-100 text-yellow-800'\r\n                                      : 'bg-green-100 text-green-800'\r\n                                  }`}\r\n                                >\r\n                                  {opportunity.priority === 'urgent'\r\n                                    ? 'Urgente'\r\n                                    : opportunity.priority === 'high'\r\n                                    ? 'Alta'\r\n                                    : opportunity.priority === 'medium'\r\n                                    ? 'Media'\r\n                                    : 'Baja'}\r\n                                </span>\r\n                              </div>\r\n\r\n                              <div className=\"flex items-center justify-between text-xs text-gray-500 mb-1\">\r\n                                <div className=\"flex items-center space-x-2\">\r\n                                  <Icon\r\n                                    name={opportunity.contactChannel === 'whatsapp' ? 'MessageCircle' : 'Mail'}\r\n                                    size={12}\r\n                                  />\r\n                                  <span className=\"capitalize\">{opportunity.contactChannel}</span>\r\n                                  <span\r\n                                    className={`px-2 py-0.5 rounded text-xs ${\r\n                                      opportunity.projectType === 'project'\r\n                                        ? 'bg-blue-100 text-blue-800'\r\n                                        : 'bg-purple-100 text-purple-800'\r\n                                    }`}\r\n                                  >\r\n                                    {opportunity.projectType === 'project' ? 'Proyecto' : 'Pieza'}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n\r\n                              <div className=\"flex items-center space-x-2 mb-1\">\r\n                                <Icon name=\"User\" size={12} />\r\n                                <span className=\"text-xs text-gray-600\">{opportunity.salesRep}</span>\r\n                              </div>\r\n\r\n                              <div className=\"flex items-center justify-between\">\r\n                                <div className=\"flex items-center space-x-1\">\r\n                                  <Icon name=\"Clock\" size={12} />\r\n                                  <span\r\n                                    className={`text-xs font-medium ${getDurationColor(\r\n                                      opportunity.stageDuration\r\n                                    )}`}\r\n                                  >\r\n                                    {opportunity.stageDuration} d√≠as\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n\r\n                              {opportunity.workOrderGenerated && (\r\n                                <div className=\"flex items-center space-x-1 mt-2 text-green-600\">\r\n                                  <Icon name=\"CheckCircle2\" size={12} />\r\n                                  <span className=\"text-xs font-medium\">Orden generada</span>\r\n                                </div>\r\n                              )}\r\n                            </article>\r\n                          ))}\r\n                          {/* Mensaje vac√≠o */}\r\n                          {getOpportunitiesByStage(stage.id)?.length === 0 && (\r\n                            <div className=\"text-center py-8 text-gray-400\">\r\n                              <Icon name=\"Inbox\" size={28} className=\"mx-auto mb-2\" />\r\n                              <p className=\"text-sm\">Sin oportunidades</p>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Panel derecho - Desktop: fixed right panel; Mobile: slide-over full screen */}\r\n              {showControls && (\r\n                <>\r\n                  {/* Overlay solo para mobile */}\r\n                  <div\r\n                    className=\"lg:hidden fixed inset-0 bg-black/40 z-30\"\r\n                    onClick={() => setShowControls(false)}\r\n                    aria-hidden=\"true\"\r\n                  />\r\n\r\n                  {/* Fondo semitransparente solo para mobile */}\r\n                  <div\r\n                    className=\"fixed inset-0 bg-black/30 z-40 lg:hidden\"\r\n                    onClick={() => setShowControls(false)}\r\n                  />\r\n\r\n                  <aside\r\n                    className={`fixed top-16 right-4 w-11/12 max-w-xs h-[80vh] bg-white z-[60] rounded-l-2xl shadow-xl overflow-y-auto\r\n                  transform transition-transform duration-300\r\n                  ${showControls ? 'translate-x-0' : 'translate-x-full'}\r\n                  lg:top-[6rem] lg:right-0 lg:w-[25rem] lg:h-[calc(100vh-6rem)] lg:translate-x-0 lg:rounded-l-2xl lg:shadow-xl lg:border-l`}\r\n                    role=\"region\"\r\n                    aria-label=\"Controles de oportunidad\"\r\n                  >\r\n                    {/* Header sticky */}\r\n                    <div className=\"sticky top-0 bg-white border-b p-4 flex justify-between items-center z-50\">\r\n                      <h3 className=\"font-semibold text-gray-800 text-lg\">Controles de Oportunidad</h3>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        iconName=\"X\"\r\n                        onClick={() => setShowControls(false)}\r\n                        aria-label=\"Cerrar controles\"\r\n                      />\r\n                    </div>\r\n\r\n                    {/* Contenido */}\r\n                    <div className=\"p-4 space-y-6\">\r\n                      {selectedOpportunity ? (\r\n                        <div className=\"space-y-4\">\r\n                          <div>\r\n                            <h4 className=\"font-medium mb-2 text-sm sm:text-base\">{selectedOpportunity?.clientName}</h4>\r\n                          </div>\r\n\r\n                          {/* OCULTO TEMPORALMENTE - Paneles seg√∫n etapa */}\r\n                          {/* {(selectedOpportunity?.stage === 'initial-contact' || !selectedOpportunity?.stage) && (\r\n                            <ClientRegistrationPanel\r\n                              opportunity={selectedOpportunity}\r\n                              onRegister={(clientData) =>\r\n                                handleClientRegistration(selectedOpportunity?.id, clientData)\r\n                              }\r\n                            />\r\n                          )} */}\r\n\r\n                          {/* Panel de Comunicaci√≥n - VISIBLE */}\r\n                          <CommunicationPanel\r\n                            opportunity={selectedOpportunity}\r\n                            onAddCommunication={(communication) =>\r\n                              handleCommunicationAdd(selectedOpportunity?.id, communication)\r\n                            }\r\n                          />\r\n\r\n                          {/* OCULTO TEMPORALMENTE - QuotationRequestPanel */}\r\n                          {/* {(selectedOpportunity?.stage === 'quotation-development' ||\r\n                            selectedOpportunity?.stage === 'client-review' ||\r\n                            selectedOpportunity?.stage === 'closure') && (\r\n                            <QuotationRequestPanel\r\n                              opportunity={{\r\n                                ...selectedOpportunity,\r\n                                quotationData: selectedOpportunity?.quotationData || {\r\n                                  scope: '',\r\n                                  assumptions: [],\r\n                                  timeline: '',\r\n                                  conditions: '',\r\n                                  materials: [],\r\n                                  riskAssessment: 'low',\r\n                                  extraCosts: [],\r\n                                  totalAmount: 0,\r\n                                  validity: '30 d√≠as'\r\n                                }\r\n                              }}\r\n                              onUpdate={(quotationData) =>\r\n                                handleQuotationUpdate(selectedOpportunity?.id, quotationData)\r\n                              }\r\n                            />\r\n                          )} */}\r\n\r\n                          {/* OCULTO TEMPORALMENTE - Panel de revisi√≥n del cliente */}\r\n                          {/* {selectedOpportunity?.stage === 'client-review' && selectedOpportunity?.quotationStatus && (\r\n                            <div className=\"border rounded-lg p-4 bg-muted/10\">\r\n                              <h4 className=\"font-medium mb-2 flex items-center\">\r\n                                <Icon name=\"Eye\" size={16} className=\"mr-2 text-yellow-600\" />\r\n                                Revisi√≥n del Cliente\r\n                              </h4>\r\n                              <div className=\"text-sm mb-2\">\r\n                                <strong>Enviado:</strong> {selectedOpportunity.quotationStatus.sent ? 'S√≠' : 'No'}<br />\r\n                                <strong>Fecha de env√≠o:</strong> {selectedOpportunity.quotationStatus.sentDate}<br />\r\n                                <strong>M√©todo:</strong> {selectedOpportunity.quotationStatus.method}<br />\r\n                                <strong>Adjuntos:</strong> {selectedOpportunity.quotationStatus.attachments?.join(', ') || 'Ninguno'}<br />\r\n                                <strong>Feedback del cliente:</strong> {selectedOpportunity.quotationStatus.clientFeedback || 'Sin comentarios'}\r\n                              </div>\r\n                            </div>\r\n                          )} */}\r\n\r\n                          {/* OCULTO TEMPORALMENTE - Panel de orden de trabajo en cierre */}\r\n                          {/* {selectedOpportunity?.stage === 'closure' && (\r\n                            <WorkOrderPanel\r\n                              opportunity={selectedOpportunity}\r\n                              onGenerateWorkOrder={(workOrderData) =>\r\n                                handleWorkOrderGeneration(selectedOpportunity?.id, workOrderData)\r\n                              }\r\n                            />\r\n                          )} */}\r\n\r\n                          {/* OCULTO TEMPORALMENTE - ChangeManagementPanel */}\r\n                          {/* {selectedOpportunity?.stage !== 'initial-contact' && (\r\n                            <ChangeManagementPanel\r\n                              opportunity={selectedOpportunity}\r\n                              onRequestChange={(changeData) =>\r\n                                console.log('Change requested:', changeData)\r\n                              }\r\n                            />\r\n                          )} */}\r\n\r\n                          {/* Botones para cambiar etapa - VISIBLE */}\r\n                          <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-medium\">Avanzar Etapa</label>\r\n                            <div className=\"grid grid-cols-1 gap-2\">{salesStages?.map((stage) => (\r\n                                <Button\r\n                                  key={stage?.id}\r\n                                  variant={selectedOpportunity?.stage === stage?.id ? 'default' : 'outline'}\r\n                                  size=\"sm\"\r\n                                  onClick={() =>\r\n                                    handleStageTransition(selectedOpportunity?.id, stage?.id)\r\n                                  }\r\n                                  disabled={selectedOpportunity?.stage === stage?.id}\r\n                                  className=\"text-xs justify-start\"\r\n                                >\r\n                                  <Icon name={stage?.icon} size={14} className=\"mr-2\" />\r\n                                  {stage?.name}\r\n                                </Button>\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"text-center text-gray-500 py-6\">\r\n                          <p className=\"mb-2\">Selecciona una oportunidad para ver controles</p>\r\n                          <Button onClick={() => setShowControls(false)}>Cerrar</Button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </aside>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </main>\r\n\r\n        {/* Modal para nueva oportunidad */}\r\n        <NewOpportunityModal\r\n          isOpen={showNewOpportunityModal}\r\n          onClose={() => setShowNewOpportunityModal(false)}\r\n          onCreateOpportunity={handleCreateOpportunity}\r\n          error={error}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesOpportunityManagement;\r\n","// quotationService.js\r\nimport httpService from \"./httpService\";\r\n\r\nconst quotationService = {\r\n  async createQuotation(data) {\r\n    try {\r\n      const response = await httpService.post(\"cotizacion/crear\", data);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(\"Error creating quotation:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async getCotizaciones() {\r\n    try {\r\n      const response = await httpService.get(\"cotizaciones\");\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Error obteniendo cotizaciones:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n    async crearConstructor(data) {\r\n      try {\r\n        const response = await httpService.post('cotizaciones/constructor/crear', data);\r\n        return response;\r\n      } catch (error) {\r\n        console.error('Error creando constructor:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    async getCotizacionById(id) {\r\n      try {\r\n        const response = await httpService.get(`cotizacion/${id}`);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error(\"Error obteniendo cotizaci√≥n por ID:\", error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    async editCotizacion(id, data) {\r\n      try {\r\n        const response = await httpService.put(`cotizacion/${id}`, data);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error(\"Error editando cotizaci√≥n:\", error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    async upsertRevision(revisionData) {\r\n      try {\r\n        // POST/PUT para crear o actualizar revisi√≥n\r\n        const response = await httpService.post('cotizaciones/revision', revisionData);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('Error creando/actualizando revisi√≥n:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    async getRevision({ id, idCotizacion }) {\r\n      try {\r\n        const params = [];\r\n        if (id) params.push(`id=${id}`);\r\n        if (idCotizacion) params.push(`idCotizacion=${idCotizacion}`);\r\n        const query = params.length ? `?${params.join('&')}` : '';\r\n        const response = await httpService.get(`cotizaciones/revision/obtener${query}`);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('Error obteniendo revisi√≥n:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    async getConstructorByCotizacionId(id) {\r\n      try {\r\n        const response = await httpService.get(`cotizaciones/constructor/obtener?idCotizacion=${id}`);\r\n        return response.data;\r\n      } catch (error) {\r\n        // Si el error es 404, significa que no existe constructor y es un caso v√°lido\r\n        if (error.status === 404) {\r\n          return null;\r\n        }\r\n        // Para otros errores, los manejamos como antes\r\n        console.error('Error obteniendo constructor:', error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    // Agregar/actualizar materiales en una cotizaci√≥n\r\n    async updateMateriales(idCotizacion, materiales) {\r\n      try {\r\n        const response = await httpService.patch(`cotizacion/${idCotizacion}/materiales`, { materiales });\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('Error actualizando materiales:', error);\r\n        throw error;\r\n      }\r\n    },\r\n\r\n    // Actualizar materiales y evaluaci√≥n de riesgos\r\n    async updateMaterialesYRiesgos(idCotizacion, data) {\r\n      try {\r\n        const response = await httpService.patch(`cotizacion/${idCotizacion}/materiales`, data);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('Error actualizando materiales y riesgos:', error);\r\n        throw error;\r\n      }\r\n    },\r\n};\r\n\r\nexport default quotationService;\r\n","import { useState } from \"react\";\r\nimport quotationService from \"../services/quotationService\";\r\n\r\nconst useQuotation = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const createQuotation = async (data) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.createQuotation(data);\r\n      // console.log eliminado\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getCotizaciones = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.getCotizaciones();\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getCotizacionById = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.getCotizacionById(id);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const editCotizacion = async (id, data) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.editCotizacion(id, data);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const crearConstructor = async (data) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.crearConstructor(data);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const getConstructorByCotizacionId = async (id) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.getConstructorByCotizacionId(id);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Nueva funci√≥n para crear/actualizar revisi√≥n\r\n  const upsertRevision = async (revisionData) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.upsertRevision(revisionData);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Nueva funci√≥n para obtener revisi√≥n\r\n  const getRevision = async ({ id, idCotizacion }) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.getRevision({ id, idCotizacion });\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Nueva funci√≥n para actualizar materiales\r\n  const updateMateriales = async (idCotizacion, materiales) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.updateMateriales(idCotizacion, materiales);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Nueva funci√≥n para actualizar materiales y evaluaci√≥n de riesgos\r\n  const updateMaterialesYRiesgos = async (idCotizacion, data) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await quotationService.updateMaterialesYRiesgos(idCotizacion, data);\r\n      return response;\r\n    } catch (err) {\r\n      setError(err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    createQuotation,\r\n    getCotizaciones,\r\n    getCotizacionById,\r\n    editCotizacion,\r\n    crearConstructor,\r\n    getConstructorByCotizacionId,\r\n    upsertRevision,\r\n    getRevision,\r\n    updateMateriales,\r\n    updateMaterialesYRiesgos,\r\n    loading,\r\n    error,\r\n  };\r\n};\r\n\r\nexport default useQuotation;\r\n","import React, { useState, useEffect } from 'react';\r\nimport useQuotation from '../../../hooks/useQuotation';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { useNotification } from '../../../context/NotificationContext';\r\n\r\nconst QuotationBuilder = ({ cotizacion, onUpdate, onAddRevision }) => {\r\n  const { crearConstructor, getConstructorByCotizacionId } = useQuotation();\r\n  const notification = useNotification();\r\n          const [formData, setFormData] = useState({\r\n            scope: cotizacion?.quotationData?.scope || '',\r\n            assumptions: cotizacion?.quotationData?.assumptions || [],\r\n            timeline: cotizacion?.quotationData?.timeline || '',\r\n            conditions: cotizacion?.quotationData?.conditions || '',\r\n            warranty: cotizacion?.quotationData?.warranty || '',\r\n            totalAmount: cotizacion?.quotationData?.totalAmount || 0,\r\n            validity: cotizacion?.quotationData?.validity || '30 d√≠as'\r\n          });\r\n          const [loading, setLoading] = useState(false);\r\n          const [error, setError] = useState('');\r\n          // Cargar datos del constructor existente si hay\r\n          useEffect(() => {\r\n            async function fetchConstructor() {\r\n              // Limpiar el formulario al cambiar de cotizaci√≥n\r\n              setFormData({\r\n                scope: '',\r\n                assumptions: [],\r\n                timeline: '',\r\n                conditions: '',\r\n                warranty: '',\r\n                totalAmount: 0,\r\n                validity: '30 d√≠as'\r\n              });\r\n              if (!cotizacion?.id) return;\r\n              setLoading(true);\r\n              setError('');\r\n              try {\r\n                const existing = await getConstructorByCotizacionId(cotizacion.id);\r\n                // Solo mostramos en consola si existe\r\n                if (existing) {\r\n                  // console.log eliminado\r\n                  setFormData({\r\n                    scope: existing.alcance || '',\r\n                    assumptions: existing.supuestos || [],\r\n                    timeline: existing.tiempo_ejecucion || '',\r\n                    conditions: existing.condiciones_pago || '',\r\n                    warranty: existing.garantia || '',\r\n                    totalAmount: existing.monto_total || 0,\r\n                    validity: existing.vigencia || '30 d√≠as',\r\n                  });\r\n                } else {\r\n                  setFormData({\r\n                    scope: cotizacion?.quotationData?.scope || '',\r\n                    assumptions: cotizacion?.quotationData?.assumptions || [],\r\n                    timeline: cotizacion?.quotationData?.timeline || '',\r\n                    conditions: cotizacion?.quotationData?.conditions || '',\r\n                    warranty: cotizacion?.quotationData?.warranty || '',\r\n                    totalAmount: cotizacion?.quotationData?.totalAmount || 0,\r\n                    validity: cotizacion?.quotationData?.validity || '30 d√≠as'\r\n                  });\r\n                }\r\n              } catch (err) {\r\n                setError('Error al cargar constructor');\r\n              } finally {\r\n                setLoading(false);\r\n              }\r\n            }\r\n            fetchConstructor();\r\n          }, [cotizacion?.id]);\r\n\r\n          const [newAssumption, setNewAssumption] = useState('');\r\n          const [hasChanges, setHasChanges] = useState(false);\r\n\r\n          const handleInputChange = (field, value) => {\r\n            setFormData(prev => ({ ...prev, [field]: value }));\r\n            setHasChanges(true);\r\n          };\r\n\r\n          const addAssumption = () => {\r\n            if (!newAssumption?.trim()) return;\r\n            const newAssumptions = [...(formData?.assumptions || []), newAssumption];\r\n            setFormData(prev => ({ ...prev, assumptions: newAssumptions }));\r\n            setNewAssumption('');\r\n            setHasChanges(true);\r\n          };\r\n\r\n          const removeAssumption = (index) => {\r\n            const newAssumptions = formData?.assumptions?.filter((_, i) => i !== index);\r\n            setFormData(prev => ({ ...prev, assumptions: newAssumptions }));\r\n            setHasChanges(true);\r\n          };\r\n\r\n  const handleSave = async () => {\r\n    onUpdate?.({ quotationData: formData });\r\n    const payload = {\r\n      Constructor: {\r\n        cotizacionId: cotizacion?.id,\r\n        Folio: cotizacion?.folio || cotizacion?.id,\r\n        alcance: formData?.scope,\r\n        condiciones_pago: formData?.conditions,\r\n        supuestos: formData?.assumptions,\r\n        garantia: formData?.warranty,\r\n        monto_total: formData?.totalAmount,\r\n        tiempo_ejecucion: formData?.timeline,\r\n        vigencia: formData?.validity\r\n      }\r\n    };\r\n    try {\r\n      await crearConstructor(payload);\r\n      notification.showSuccess('guardado');\r\n    } catch (err) {\r\n      notification.showError('Error al guardar el constructor');\r\n    }\r\n    setHasChanges(false);\r\n  };\r\n\r\n          const handleCreateRevision = () => {\r\n            const revision = {\r\n              changes: \"Actualizaci√≥n de alcance y condiciones\",\r\n              author: cotizacion?.assignedTo || \"Usuario Actual\"\r\n            };\r\n            onAddRevision?.(revision);\r\n            setHasChanges(false);\r\n          };\r\n\r\n          const handleSaveConstructor = async () => {\r\n            const payload = {\r\n              Constructor: {\r\n                cotizacionId: cotizacion?.id,\r\n                Folio: cotizacion?.id,\r\n                alcance: formData?.scope,\r\n                condiciones_pago: formData?.conditions,\r\n                supuestos: formData?.assumptions,\r\n                garantia: formData?.warranty,\r\n                monto_total: formData?.totalAmount,\r\n                tiempo_ejecucion: formData?.timeline,\r\n                vigencia: formData?.validity\r\n              }\r\n            };\r\n            try {\r\n              const res = await crearConstructor(payload);\r\n              // console.log eliminado\r\n              alert('Constructor guardado exitosamente');\r\n            } catch (err) {\r\n              alert('Error al guardar el constructor');\r\n            }\r\n          };\r\n\r\n          return (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-semibold\">{cotizacion?.projectName}</h3>\r\n                  <p className=\"text-muted-foreground\">{cotizacion?.clientName} - {cotizacion?.folio}</p>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  {hasChanges && (\r\n                    <span className=\"text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded\">\r\n                      Cambios sin guardar\r\n                    </span>\r\n                  )}\r\n                  {/* Bot√≥n gris superior para guardar */}\r\n                  <button\r\n                    className=\"text-muted-foreground flex items-center space-x-1\"\r\n                    style={{ background: 'none', border: 'none', cursor: hasChanges ? 'pointer' : 'not-allowed', fontSize: '16px', padding: 0 }}\r\n                    onClick={hasChanges ? handleSave : undefined}\r\n                    disabled={!hasChanges}\r\n                  >\r\n                    <Icon name=\"Save\" size={20} />\r\n                    <span>Guardar</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Left Column */}\r\n                <div className=\"space-y-4\">\r\n                  {/* Scope Definition */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Definici√≥n de Alcance</label>\r\n                    <textarea\r\n                      value={formData?.scope}\r\n                      onChange={(e) => handleInputChange('scope', e?.target?.value)}\r\n                      placeholder=\"Descripci√≥n detallada del alcance del proyecto...\"\r\n                      rows={4}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Assumptions */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Supuestos del Proyecto</label>\r\n                    <div className=\"space-y-2\">\r\n                      {formData?.assumptions?.map((assumption, index) => (\r\n                        <div key={index} className=\"flex items-start space-x-2 p-2 bg-muted/30 rounded\">\r\n                          <Icon name=\"Check\" size={14} className=\"text-green-600 mt-0.5\" />\r\n                          <span className=\"flex-1 text-sm\">{assumption}</span>\r\n                          <button\r\n                            onClick={() => removeAssumption(index)}\r\n                            className=\"text-red-600 hover:text-red-800\"\r\n                          >\r\n                            <Icon name=\"X\" size={14} />\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                      <div className=\"flex space-x-2\">\r\n                        <Input\r\n                          value={newAssumption}\r\n                          onChange={(e) => setNewAssumption(e?.target?.value)}\r\n                          placeholder=\"Agregar supuesto...\"\r\n                          className=\"flex-1\"\r\n                          onKeyPress={(e) => e?.key === 'Enter' && addAssumption()}\r\n                        />\r\n                        <Button\r\n                          size=\"sm\"\r\n                          onClick={addAssumption}\r\n                          iconName=\"Plus\"\r\n                          disabled={!newAssumption?.trim()}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Timeline and Validity */}\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"text-sm font-medium mb-2 block\">Tiempo de Ejecuci√≥n</label>\r\n                      <Input\r\n                        value={formData?.timeline}\r\n                        onChange={(e) => handleInputChange('timeline', e?.target?.value)}\r\n                        placeholder=\"ej: 16 semanas\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-sm font-medium mb-2 block\">Vigencia</label>\r\n                      <Input\r\n                        value={formData?.validity}\r\n                        onChange={(e) => handleInputChange('validity', e?.target?.value)}\r\n                        placeholder=\"30 d√≠as\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Right Column */}\r\n                <div className=\"space-y-4\">\r\n                  {/* Payment Conditions */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Condiciones de Pago</label>\r\n                    <textarea\r\n                      value={formData?.conditions}\r\n                      onChange={(e) => handleInputChange('conditions', e?.target?.value)}\r\n                      placeholder=\"ej: 50% anticipo, 25% avance 50%, 25% finalizaci√≥n\"\r\n                      rows={3}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Warranty */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Garant√≠a</label>\r\n                    <Input\r\n                      value={formData?.warranty}\r\n                      onChange={(e) => handleInputChange('warranty', e?.target?.value)}\r\n                      placeholder=\"ej: 24 meses en equipos, 12 meses en instalaci√≥n\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Total Amount */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Monto Total (MXN)</label>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={formData?.totalAmount}\r\n                      onChange={(e) => handleInputChange('totalAmount', parseFloat(e?.target?.value) || 0)}\r\n                      placeholder=\"0.00\"\r\n                    />\r\n                    {formData?.totalAmount > 0 && (\r\n                      <p className=\"text-sm text-muted-foreground mt-1\">\r\n                        ${formData?.totalAmount?.toLocaleString('es-MX')} MXN\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Quick Actions */}\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"text-sm font-medium\">Plantillas R√°pidas</label>\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleInputChange('conditions', '50% anticipo, 50% contra entrega')}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Pago 50/50\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleInputChange('warranty', '24 meses equipos, 12 meses instalaci√≥n')}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Garant√≠a Est√°ndar\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleInputChange('validity', '45 d√≠as')}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Vigencia 45 d√≠as\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => addAssumption('Acceso libre durante horario laboral')}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Acceso Est√°ndar\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"flex items-center justify-between pt-6 border-t border-border\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-muted-foreground\" />\r\n                  <span className=\"text-sm text-muted-foreground\">\r\n                     √öltima actualizaci√≥n: {cotizacion?.lastModified}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex space-x-2\">\r\n                  {/* Bot√≥n comentado: Crear Revisi√≥n (se dej√≥ comentado para posible uso futuro)\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={handleCreateRevision}\r\n                    iconName=\"GitBranch\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Crear Revisi√≥n\r\n                  </Button>\r\n                  */}\r\n\r\n                  {/* Bot√≥n comentado: Enviar a Revisi√≥n (se dej√≥ comentado para posible uso futuro)\r\n                  <Button\r\n                    // console.log eliminado\r\n                    iconName=\"Users\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Enviar a Revisi√≥n\r\n                  </Button>\r\n                  */}\r\n                  {/* Eliminar el bot√≥n azul de Guardar aqu√≠ */}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default QuotationBuilder;","import React, { useState, useEffect, useMemo } from 'react';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        import Input from '../../../components/ui/Input';\r\n        import useInventory from '../../../hooks/useInventory';\r\n        import useQuotation from '../../../hooks/useQuotation';\r\n        import { useNotifications } from '../../../context/NotificationContext';\r\n\r\n        const MaterialRiskChecklist = ({ quotation, onUpdate }) => {\r\n          const { articulos, getArticulos, loading: inventoryLoading } = useInventory();\r\n          const { updateMaterialesYRiesgos, getCotizacionById, loading: quotationLoading } = useQuotation();\r\n          const { showSuccess, showError } = useNotifications();\r\n          const [materials, setMaterials] = useState([]);\r\n          const [riskAssessment, setRiskAssessment] = useState({\r\n            overall: 'low',\r\n            factors: [],\r\n            extraCostsPrevention: true\r\n          });\r\n          const [newMaterial, setNewMaterial] = useState({ \r\n            item: '', \r\n            quantity: '', \r\n            cost: 0, \r\n            risk: 'low',\r\n            itemCode: '',\r\n            unit: '',\r\n            fromInventory: false,\r\n            inventoryItemId: null\r\n          });\r\n          const [newRiskFactor, setNewRiskFactor] = useState({ factor: '', risk: 'low', mitigation: '' });\r\n          const [showInventorySelector, setShowInventorySelector] = useState(false);\r\n          const [inventorySearch, setInventorySearch] = useState('');\r\n          const [loadingMaterials, setLoadingMaterials] = useState(false);\r\n\r\n          // Cargar art√≠culos del inventario\r\n          useEffect(() => {\r\n            getArticulos();\r\n          }, []);\r\n\r\n          // Cargar materiales guardados cuando cambia la cotizaci√≥n\r\n          useEffect(() => {\r\n            async function fetchMateriales() {\r\n              // Limpiar materiales al cambiar de cotizaci√≥n\r\n              setMaterials([]);\r\n              setRiskAssessment({\r\n                overall: 'low',\r\n                factors: [],\r\n                extraCostsPrevention: true\r\n              });\r\n\r\n              if (!quotation?.id) return;\r\n\r\n              setLoadingMaterials(true);\r\n              try {\r\n                const cotizacionCompleta = await getCotizacionById(quotation.id);\r\n                \r\n                // Cargar materiales si existen\r\n                if (cotizacionCompleta?.materiales && Array.isArray(cotizacionCompleta.materiales)) {\r\n                  setMaterials(cotizacionCompleta.materiales);\r\n                }\r\n\r\n                // Cargar evaluaci√≥n de riesgos si existe\r\n                if (cotizacionCompleta?.riskAssessment) {\r\n                  setRiskAssessment(cotizacionCompleta.riskAssessment);\r\n                }\r\n              } catch (error) {\r\n                console.error('Error al cargar materiales:', error);\r\n                // Si hay error, intentar usar los datos locales del quotation prop\r\n                if (quotation?.materials) {\r\n                  setMaterials(quotation.materials);\r\n                }\r\n                if (quotation?.riskAssessment) {\r\n                  setRiskAssessment(quotation.riskAssessment);\r\n                }\r\n              } finally {\r\n                setLoadingMaterials(false);\r\n              }\r\n            }\r\n\r\n            fetchMateriales();\r\n          }, [quotation?.id]);\r\n\r\n          // Filtrar art√≠culos del inventario seg√∫n b√∫squeda\r\n          const filteredInventoryItems = useMemo(() => {\r\n            if (!inventorySearch.trim()) return articulos;\r\n            \r\n            const searchLower = inventorySearch.toLowerCase();\r\n            return articulos.filter(item => \r\n              item?.nombre?.toLowerCase().includes(searchLower) ||\r\n              item?.codigo?.toLowerCase().includes(searchLower) ||\r\n              item?.descripcion?.toLowerCase().includes(searchLower) ||\r\n              item?.categoria?.toLowerCase().includes(searchLower)\r\n            );\r\n          }, [articulos, inventorySearch]);\r\n\r\n          const handleMaterialChange = (index, field, value) => {\r\n            const updatedMaterials = materials?.map((material, i) => \r\n              i === index ? { ...material, [field]: value } : material\r\n            );\r\n            setMaterials(updatedMaterials);\r\n          };\r\n\r\n          // Seleccionar un art√≠culo del inventario\r\n          const handleSelectInventoryItem = (item) => {\r\n            setNewMaterial({\r\n              item: item.nombre || '',\r\n              itemCode: item.codigo || '',\r\n              quantity: '1',\r\n              cost: item.costoUnitario || 0,\r\n              unit: item.unidad || '',\r\n              risk: 'low',\r\n              fromInventory: true,\r\n              inventoryItemId: item.id\r\n            });\r\n            setShowInventorySelector(false);\r\n            setInventorySearch('');\r\n          };\r\n\r\n          const addMaterial = () => {\r\n            if (!newMaterial?.item?.trim() || !newMaterial?.quantity?.trim()) return;\r\n            \r\n            setMaterials(prev => [...prev, { \r\n              ...newMaterial, \r\n              id: Date.now(),\r\n              addedAt: new Date().toISOString()\r\n            }]);\r\n            setNewMaterial({ \r\n              item: '', \r\n              quantity: '', \r\n              cost: 0, \r\n              risk: 'low',\r\n              itemCode: '',\r\n              unit: '',\r\n              fromInventory: false,\r\n              inventoryItemId: null\r\n            });\r\n          };\r\n\r\n          const removeMaterial = (index) => {\r\n            setMaterials(prev => prev?.filter((_, i) => i !== index));\r\n          };\r\n\r\n          const addRiskFactor = () => {\r\n            if (!newRiskFactor?.factor?.trim()) return;\r\n            \r\n            setRiskAssessment(prev => ({\r\n              ...prev,\r\n              factors: [...(prev?.factors || []), { ...newRiskFactor, id: Date.now() }]\r\n            }));\r\n            setNewRiskFactor({ factor: '', risk: 'low', mitigation: '' });\r\n          };\r\n\r\n          const removeRiskFactor = (index) => {\r\n            setRiskAssessment(prev => ({\r\n              ...prev,\r\n              factors: prev?.factors?.filter((_, i) => i !== index)\r\n            }));\r\n          };\r\n\r\n          const handleSave = async () => {\r\n            try {\r\n              // Guardar en el backend si existe el ID de cotizaci√≥n\r\n              if (quotation?.id) {\r\n                const dataToSave = {\r\n                  materiales: materials,\r\n                  riskAssessment: {\r\n                    ...riskAssessment,\r\n                    overall: calculateOverallRisk()\r\n                  }\r\n                };\r\n                \r\n                await updateMaterialesYRiesgos(quotation.id, dataToSave);\r\n                showSuccess('Materiales y evaluaci√≥n de riesgos guardados exitosamente');\r\n              }\r\n              \r\n              // Tambi√©n llamar al onUpdate para actualizar el estado local\r\n              onUpdate?.({ \r\n                materials, \r\n                riskAssessment: {\r\n                  ...riskAssessment,\r\n                  overall: calculateOverallRisk()\r\n                }\r\n              });\r\n            } catch (error) {\r\n              console.error('Error guardando materiales:', error);\r\n              showError('Error al guardar los materiales');\r\n            }\r\n          };\r\n\r\n          const calculateOverallRisk = () => {\r\n            const highRiskMaterials = materials?.filter(m => m?.risk === 'high')?.length || 0;\r\n            const highRiskFactors = riskAssessment?.factors?.filter(f => f?.risk === 'high')?.length || 0;\r\n            \r\n            if (highRiskMaterials > 0 || highRiskFactors > 0) return 'high';\r\n            \r\n            const mediumRiskMaterials = materials?.filter(m => m?.risk === 'medium')?.length || 0;\r\n            const mediumRiskFactors = riskAssessment?.factors?.filter(f => f?.risk === 'medium')?.length || 0;\r\n            \r\n            if (mediumRiskMaterials > 0 || mediumRiskFactors > 0) return 'medium';\r\n            \r\n            return 'low';\r\n          };\r\n\r\n          const getRiskColor = (risk) => {\r\n            switch (risk) {\r\n              case 'high': return 'text-red-600 bg-red-50 border-red-200';\r\n              case 'medium': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\r\n              case 'low': return 'text-green-600 bg-green-50 border-green-200';\r\n              default: return 'text-gray-600 bg-gray-50 border-gray-200';\r\n            }\r\n          };\r\n\r\n          const totalCost = materials?.reduce((sum, material) => sum + (material?.cost || 0), 0);\r\n\r\n          // Mostrar loading mientras se cargan los materiales\r\n          if (loadingMaterials) {\r\n            return (\r\n              <div className=\"flex items-center justify-center h-96\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n                  <p className=\"text-muted-foreground\">Cargando materiales...</p>\r\n                </div>\r\n              </div>\r\n            );\r\n          }\r\n\r\n          return (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-xl font-semibold\">Checklist de Materiales y Riesgos</h3>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className={`px-3 py-1 text-sm rounded-full border ${getRiskColor(calculateOverallRisk())}`}>\r\n                    Riesgo General: {calculateOverallRisk() === 'high' ? 'Alto' : calculateOverallRisk() === 'medium' ? 'Medio' : 'Bajo'}\r\n                  </div>\r\n                  <Button\r\n                    onClick={handleSave}\r\n                    iconName=\"Save\"\r\n                    iconPosition=\"left\"\r\n                    disabled={quotationLoading}\r\n                  >\r\n                    {quotationLoading ? 'Guardando...' : 'Guardar Checklist'}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Materials Section */}\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon name=\"Package\" size={20} className=\"text-primary\" />\r\n                    <h4 className=\"text-lg font-medium\">Lista de Materiales</h4>\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      Total: ${totalCost?.toLocaleString('es-MX')} MXN\r\n                    </div>\r\n                  </div>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => setShowInventorySelector(!showInventorySelector)}\r\n                    iconName=\"Search\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Buscar en Inventario\r\n                  </Button>\r\n                </div>\r\n\r\n                {/* Inventory Selector Modal */}\r\n                {showInventorySelector && (\r\n                  <div className=\"bg-card border-2 border-primary rounded-lg p-4 shadow-lg\">\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                      <h5 className=\"font-medium\">Seleccionar del Inventario</h5>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          setShowInventorySelector(false);\r\n                          setInventorySearch('');\r\n                        }}\r\n                        iconName=\"X\"\r\n                      />\r\n                    </div>\r\n                    \r\n                    <Input\r\n                      value={inventorySearch}\r\n                      onChange={(e) => setInventorySearch(e.target.value)}\r\n                      placeholder=\"Buscar por nombre, c√≥digo, categor√≠a...\"\r\n                      className=\"mb-3\"\r\n                    />\r\n\r\n                    <div className=\"max-h-80 overflow-y-auto space-y-2\">\r\n                      {inventoryLoading ? (\r\n                        <p className=\"text-center text-muted-foreground py-4\">Cargando inventario...</p>\r\n                      ) : filteredInventoryItems.length === 0 ? (\r\n                        <p className=\"text-center text-muted-foreground py-4\">No se encontraron art√≠culos</p>\r\n                      ) : (\r\n                        filteredInventoryItems.map((item) => (\r\n                          <div\r\n                            key={item.id}\r\n                            onClick={() => handleSelectInventoryItem(item)}\r\n                            className=\"p-3 border border-border rounded-lg hover:bg-muted cursor-pointer transition-colors\"\r\n                          >\r\n                            <div className=\"flex items-start justify-between\">\r\n                              <div className=\"flex-1\">\r\n                                <div className=\"flex items-center space-x-2 mb-1\">\r\n                                  <span className=\"font-medium text-sm\">{item.nombre}</span>\r\n                                  <span className=\"text-xs px-2 py-0.5 bg-muted rounded\">\r\n                                    {item.codigo}\r\n                                  </span>\r\n                                </div>\r\n                                <p className=\"text-xs text-muted-foreground line-clamp-1\">\r\n                                  {item.descripcion}\r\n                                </p>\r\n                                <div className=\"flex items-center space-x-3 mt-2 text-xs\">\r\n                                  <span className=\"text-muted-foreground\">\r\n                                    <span className=\"font-medium\">Stock:</span> {item.stockActual} {item.unidad}\r\n                                  </span>\r\n                                  <span className=\"text-muted-foreground\">\r\n                                    <span className=\"font-medium\">Costo:</span> ${item.costoUnitario?.toLocaleString('es-MX')} MXN\r\n                                  </span>\r\n                                  <span className=\"text-muted-foreground\">\r\n                                    <span className=\"font-medium\">Categor√≠a:</span> {item.categoria}\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                              <Icon name=\"Plus\" size={16} className=\"text-primary ml-2\" />\r\n                            </div>\r\n                          </div>\r\n                        ))\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"bg-card border rounded-lg overflow-hidden\">\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                      <thead className=\"bg-muted/50\">\r\n                        <tr>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">C√≥digo</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Material/Equipo</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Cantidad</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Unidad</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Costo (MXN)</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Subtotal</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Riesgo</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Origen</th>\r\n                          <th className=\"px-4 py-3 text-left text-sm font-medium\">Acciones</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {materials?.map((material, index) => (\r\n                          <tr key={index} className=\"border-t border-border\">\r\n                            <td className=\"px-4 py-3\">\r\n                              <span className=\"text-xs text-muted-foreground\">\r\n                                {material?.itemCode || '-'}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <div className=\"flex items-center space-x-2\">\r\n                                <Input\r\n                                  value={material?.item}\r\n                                  onChange={(e) => handleMaterialChange(index, 'item', e?.target?.value)}\r\n                                  placeholder=\"Descripci√≥n del material\"\r\n                                  size=\"sm\"\r\n                                />\r\n                                {material?.fromInventory && (\r\n                                  <Icon name=\"Package\" size={14} className=\"text-green-600\" title=\"Del inventario\" />\r\n                                )}\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                value={material?.quantity}\r\n                                onChange={(e) => handleMaterialChange(index, 'quantity', e?.target?.value)}\r\n                                placeholder=\"0\"\r\n                                size=\"sm\"\r\n                                className=\"w-20\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <Input\r\n                                value={material?.unit || ''}\r\n                                onChange={(e) => handleMaterialChange(index, 'unit', e?.target?.value)}\r\n                                placeholder=\"pcs\"\r\n                                size=\"sm\"\r\n                                className=\"w-20\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                value={material?.cost}\r\n                                onChange={(e) => handleMaterialChange(index, 'cost', parseFloat(e?.target?.value) || 0)}\r\n                                placeholder=\"0.00\"\r\n                                size=\"sm\"\r\n                                className=\"w-28\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <span className=\"text-sm font-medium\">\r\n                                ${((parseFloat(material?.quantity) || 0) * (material?.cost || 0)).toLocaleString('es-MX')}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <select\r\n                                value={material?.risk}\r\n                                onChange={(e) => handleMaterialChange(index, 'risk', e?.target?.value)}\r\n                                className=\"w-full px-2 py-1 text-sm border border-border rounded bg-background\"\r\n                              >\r\n                                <option value=\"low\">Bajo</option>\r\n                                <option value=\"medium\">Medio</option>\r\n                                <option value=\"high\">Alto</option>\r\n                              </select>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <span className={`text-xs px-2 py-1 rounded-full ${\r\n                                material?.fromInventory \r\n                                  ? 'bg-green-100 text-green-800' \r\n                                  : 'bg-blue-100 text-blue-800'\r\n                              }`}>\r\n                                {material?.fromInventory ? 'Inventario' : 'Manual'}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-4 py-3\">\r\n                              <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={() => removeMaterial(index)}\r\n                                iconName=\"Trash2\"\r\n                                className=\"text-red-600\"\r\n                              />\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                        \r\n                        {/* Add New Material Row */}\r\n                        <tr className=\"border-t border-border bg-muted/20\">\r\n                          <td className=\"px-4 py-3\">\r\n                            <Input\r\n                              value={newMaterial?.itemCode}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, itemCode: e?.target?.value }))}\r\n                              placeholder=\"C√≥digo\"\r\n                              size=\"sm\"\r\n                              disabled={newMaterial?.fromInventory}\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <Input\r\n                              value={newMaterial?.item}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, item: e?.target?.value }))}\r\n                              placeholder=\"Nuevo material...\"\r\n                              size=\"sm\"\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <Input\r\n                              type=\"number\"\r\n                              value={newMaterial?.quantity}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, quantity: e?.target?.value }))}\r\n                              placeholder=\"0\"\r\n                              size=\"sm\"\r\n                              className=\"w-20\"\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <Input\r\n                              value={newMaterial?.unit}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, unit: e?.target?.value }))}\r\n                              placeholder=\"pcs\"\r\n                              size=\"sm\"\r\n                              className=\"w-20\"\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <Input\r\n                              type=\"number\"\r\n                              value={newMaterial?.cost}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, cost: parseFloat(e?.target?.value) || 0 }))}\r\n                              placeholder=\"0.00\"\r\n                              size=\"sm\"\r\n                              className=\"w-28\"\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <span className=\"text-sm font-medium\">\r\n                              ${((parseFloat(newMaterial?.quantity) || 0) * (newMaterial?.cost || 0)).toLocaleString('es-MX')}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <select\r\n                              value={newMaterial?.risk}\r\n                              onChange={(e) => setNewMaterial(prev => ({ ...prev, risk: e?.target?.value }))}\r\n                              className=\"w-full px-2 py-1 text-sm border border-border rounded bg-background\"\r\n                            >\r\n                              <option value=\"low\">Bajo</option>\r\n                              <option value=\"medium\">Medio</option>\r\n                              <option value=\"high\">Alto</option>\r\n                            </select>\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <span className={`text-xs px-2 py-1 rounded-full ${\r\n                              newMaterial?.fromInventory \r\n                                ? 'bg-green-100 text-green-800' \r\n                                : 'bg-blue-100 text-blue-800'\r\n                            }`}>\r\n                              {newMaterial?.fromInventory ? 'Inventario' : 'Manual'}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"px-4 py-3\">\r\n                            <Button\r\n                              size=\"sm\"\r\n                              onClick={addMaterial}\r\n                              iconName=\"Plus\"\r\n                              disabled={!newMaterial?.item?.trim()}\r\n                            >\r\n                              Agregar\r\n                            </Button>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Risk Factors Section */}\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Icon name=\"AlertTriangle\" size={20} className=\"text-primary\" />\r\n                  <h4 className=\"text-lg font-medium\">Factores de Riesgo</h4>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                  {riskAssessment?.factors?.map((factor, index) => (\r\n                    <div key={index} className={`p-4 rounded-lg border ${getRiskColor(factor?.risk)}`}>\r\n                      <div className=\"flex items-start justify-between\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center space-x-2 mb-2\">\r\n                            <Icon name=\"AlertCircle\" size={16} />\r\n                            <h5 className=\"font-medium\">{factor?.factor}</h5>\r\n                            <span className=\"text-xs px-2 py-1 rounded-full bg-current/20\">\r\n                              Riesgo {factor?.risk === 'high' ? 'Alto' : factor?.risk === 'medium' ? 'Medio' : 'Bajo'}\r\n                            </span>\r\n                          </div>\r\n                          <p className=\"text-sm\">{factor?.mitigation}</p>\r\n                        </div>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => removeRiskFactor(index)}\r\n                          iconName=\"X\"\r\n                          className=\"text-red-600\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n\r\n                  {/* Add New Risk Factor */}\r\n                  <div className=\"p-4 border border-dashed border-border rounded-lg\">\r\n                    <div className=\"space-y-3\">\r\n                      <Input\r\n                        value={newRiskFactor?.factor}\r\n                        onChange={(e) => setNewRiskFactor(prev => ({ ...prev, factor: e?.target?.value }))}\r\n                        placeholder=\"Factor de riesgo (ej: Disponibilidad de materiales)\"\r\n                      />\r\n                      <div className=\"grid grid-cols-2 gap-2\">\r\n                        <select\r\n                          value={newRiskFactor?.risk}\r\n                          onChange={(e) => setNewRiskFactor(prev => ({ ...prev, risk: e?.target?.value }))}\r\n                          className=\"px-3 py-2 text-sm border border-border rounded-md bg-background\"\r\n                        >\r\n                          <option value=\"low\">Riesgo Bajo</option>\r\n                          <option value=\"medium\">Riesgo Medio</option>\r\n                          <option value=\"high\">Riesgo Alto</option>\r\n                        </select>\r\n                        <Button\r\n                          onClick={addRiskFactor}\r\n                          disabled={!newRiskFactor?.factor?.trim()}\r\n                          iconName=\"Plus\"\r\n                          iconPosition=\"left\"\r\n                          size=\"sm\"\r\n                        >\r\n                          Agregar Factor\r\n                        </Button>\r\n                      </div>\r\n                      <Input\r\n                        value={newRiskFactor?.mitigation}\r\n                        onChange={(e) => setNewRiskFactor(prev => ({ ...prev, mitigation: e?.target?.value }))}\r\n                        placeholder=\"Plan de mitigaci√≥n\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Prevention Tools */}\r\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                <div className=\"flex items-center space-x-2 mb-3\">\r\n                  <Icon name=\"Shield\" size={20} className=\"text-green-600\" />\r\n                  <h4 className=\"font-medium text-green-800\">Prevenci√≥n de Costos Extra</h4>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2 mb-3\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"prevention-enabled\"\r\n                    checked={riskAssessment?.extraCostsPrevention}\r\n                    onChange={(e) => setRiskAssessment(prev => ({ ...prev, extraCostsPrevention: e?.target?.checked }))}\r\n                    className=\"rounded border-border\"\r\n                  />\r\n                  <label htmlFor=\"prevention-enabled\" className=\"text-sm text-green-800\">\r\n                    Sistema de prevenci√≥n de costos extra activado\r\n                  </label>\r\n                </div>\r\n                <p className=\"text-sm text-green-700\">\r\n                  El checklist de materiales y evaluaci√≥n de riesgos ayuda a identificar posibles costos adicionales antes de la finalizaci√≥n de la cotizaci√≥n.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default MaterialRiskChecklist;","import React, { useRef, useEffect, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\nimport useClient from '../../../hooks/useClient';\r\nimport useProyecto from '../../../hooks/useProyect';\r\nimport useQuotation from '../../../hooks/useQuotation';\r\nimport { useNotifications } from '../../../context/NotificationContext';\r\n\r\n// Utilidades de formateo\r\nconst formatCurrency = (amount) => {\r\n  if (amount === null || amount === undefined || Number.isNaN(Number(amount))) return '$0.00';\r\n  return new Intl.NumberFormat('es-MX', {\r\n    style: 'currency',\r\n    currency: 'MXN'\r\n  }).format(Number(amount));\r\n};\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return 'Fecha no disponible';\r\n  const d = new Date(dateString);\r\n  if (Number.isNaN(d.getTime())) return 'Fecha no disponible';\r\n  return d.toLocaleDateString('es-MX', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  });\r\n};\r\n\r\n// Funci√≥n para obtener la fecha actual\r\nconst getCurrentDate = () => {\r\n  const today = new Date();\r\n  return today.toLocaleDateString('es-MX', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  });\r\n};\r\n\r\nconst QuotationPreview = ({ quotation = {} }) => {\r\n  const quotationRef = useRef(null);\r\n  const [clientData, setClientData] = useState(null);\r\n  const [projectData, setProjectData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [cotizacionCompleta, setCotizacionCompleta] = useState(null);\r\n\r\n  const { getClients } = useClient();\r\n  const { getProyectos, getProyectoById } = useProyecto();\r\n  const { getCotizacionById } = useQuotation();\r\n  const { showError, showWarning } = useNotifications();\r\n  const [proyectoData, setProyectoData] = useState(null);\r\n\r\n  // Funci√≥n defensiva para extraer id/nombre de arrays heterog√©neos\r\n  const safeFindIdAndName = (arr = [], idFields = ['id', 'id_cliente', 'id_proyecto'], nameFields = ['nombre', 'nombre_cliente', 'nombre_proyecto', 'empresa']) => {\r\n    if (!Array.isArray(arr)) return { id: undefined, name: undefined };\r\n    let id, name;\r\n    for (const obj of arr) {\r\n      if (!obj) continue;\r\n      for (const f of idFields) {\r\n        if (id === undefined && (obj[f] !== undefined && obj[f] !== null)) {\r\n          id = obj[f];\r\n          break;\r\n        }\r\n      }\r\n      for (const f of nameFields) {\r\n        if (!name && obj[f]) {\r\n          name = obj[f];\r\n          break;\r\n        }\r\n      }\r\n      if (id !== undefined && name) break;\r\n    }\r\n    return { id, name };\r\n  };\r\n\r\n  // Debug ligero (opcional)\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    \r\n    const fetchCotizacion = async () => {\r\n      if (!quotation?.id || cotizacionCompleta) return;\r\n      \r\n      try {\r\n        const cotizacionDetallada = await getCotizacionById(quotation.id);\r\n        if (isMounted) {\r\n          console.log('Cotizaci√≥n obtenida completa:', cotizacionDetallada);\r\n          // Extraer data de la respuesta si viene encapsulada\r\n          const dataContent = cotizacionDetallada?.data || cotizacionDetallada;\r\n          console.log('Data content:', dataContent);\r\n          console.log('Fecha creaci√≥n:', dataContent.fechaCreacion);\r\n          console.log('Fecha actualizaci√≥n:', dataContent.fechaActualizacion);\r\n          console.log('Ultima modificaci√≥n:', dataContent.ultimaModificacion);\r\n          \r\n          // Preservar las fechas originales en formato ISO\r\n          const cotizacionConFechas = {\r\n            ...dataContent,\r\n            fechaCreacion: dataContent.fechaCreacion,\r\n            fechaActualizacion: dataContent.fechaActualizacion || dataContent.ultimaModificacion\r\n          };\r\n          console.log('Cotizaci√≥n con fechas:', cotizacionConFechas);\r\n          setCotizacionCompleta(cotizacionConFechas);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error al obtener la cotizaci√≥n:', error);\r\n        if (isMounted) {\r\n          showError('Error al cargar los detalles de la cotizaci√≥n');\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchCotizacion();\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [quotation?.id, getCotizacionById, showError]);\r\n\r\n  // Efecto para obtener datos del proyecto cuando tengamos la cotizaci√≥n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const fetchProyecto = async () => {\r\n      console.log('Estado actual de cotizacionCompleta:', cotizacionCompleta);\r\n      \r\n      // Buscar el ID del proyecto en la estructura actualizada\r\n      const proyectoId = cotizacionCompleta?.projectId || \r\n                        cotizacionCompleta?.informacion_basica?.proyecto?.[0]?.id_proyecto ||\r\n                        cotizacionCompleta?.informacion_basica?.id_proyecto;\r\n\r\n      if (!proyectoId) {\r\n        console.log('No se encontr√≥ el ID del proyecto en la cotizaci√≥n');\r\n        // Si tenemos el nombre del proyecto pero no el ID, intentamos buscarlo en la lista de proyectos\r\n        if (cotizacionCompleta?.projectName) {\r\n          try {\r\n            const proyectos = await getProyectos();\r\n            const proyecto = proyectos?.find(p => p.nombre === cotizacionCompleta.projectName);\r\n            if (proyecto?.id) {\r\n              console.log('Se encontr√≥ el proyecto por nombre:', proyecto);\r\n              if (isMounted) {\r\n                setProjectData({ data: proyecto });\r\n              }\r\n            }\r\n          } catch (error) {\r\n            console.error('Error al buscar proyecto por nombre:', error);\r\n          }\r\n        }\r\n        return;\r\n      }\r\n\r\n      try {\r\n        console.log('ID del proyecto encontrado:', proyectoId);\r\n        const proyectoDetallado = await getProyectoById(proyectoId);\r\n        console.log('Respuesta del servidor (proyecto):', proyectoDetallado);\r\n        \r\n        if (isMounted) {\r\n          setProjectData(proyectoDetallado);\r\n          console.log('ProjectData actualizado:', proyectoDetallado);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error al obtener el proyecto:', error);\r\n        if (isMounted) {\r\n          showWarning('No se pudieron cargar los detalles del proyecto');\r\n        }\r\n      }\r\n    };\r\n\r\n    if (cotizacionCompleta) {\r\n      fetchProyecto();\r\n    }\r\n    \r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [cotizacionCompleta, getProyectoById, getProyectos, showWarning]);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const normalizeList = (resp) => {\r\n      if (!resp) return [];\r\n      if (Array.isArray(resp)) return resp;\r\n      if (resp?.data?.data && Array.isArray(resp.data.data)) return resp.data.data;\r\n      if (resp?.data && Array.isArray(resp.data)) return resp.data;\r\n      return [];\r\n    };\r\n\r\n    const fetchData = async () => {\r\n      if (!quotation?.id) {\r\n        console.warn('QuotationPreview: no hay ID de cotizaci√≥n, usando datos m√≠nimos');\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Obtener proyectos y clientes en paralelo (si las funciones est√°n disponibles)\r\n        const [proyectosResp, clientsResp] = await Promise.allSettled([\r\n          typeof getProyectos === 'function' ? getProyectos() : Promise.resolve([]),\r\n          typeof getClients === 'function' ? getClients() : Promise.resolve([])\r\n        ]);\r\n\r\n        const proyectosList = proyectosResp.status === 'fulfilled' ? normalizeList(proyectosResp.value) : [];\r\n        const clientsList = clientsResp.status === 'fulfilled' ? normalizeList(clientsResp.value) : [];\r\n\r\n        // Intentar encontrar la cotizaci√≥n completa en proyectos (si corresponde)\r\n        let cotizacionData = null;\r\n        if (quotation?.id) {\r\n          cotizacionData = proyectosList.find(p => String(p.id) === String(quotation.id)) || null;\r\n          if (!cotizacionData) {\r\n            // fallback: buscar por folio, o usar la prop quotation directamente\r\n            cotizacionData = proyectosList.find(p => String(p.folio) === String(quotation.folio)) || null;\r\n          }\r\n        }\r\n\r\n        if (!cotizacionData) {\r\n          // No se encontr√≥ una cotizaci√≥n \"completa\" en proyectos -> usar la prop quotation (normalizar m√≠nimamente)\r\n          cotizacionData = {\r\n            ...quotation,\r\n            id: quotation.id || undefined,\r\n            folio: quotation.folio || (quotation.id ? `COT-${new Date().getFullYear()}-${quotation.id}` : `COT-${Date.now()}`),\r\n            informacion_basica: quotation.informacion_basica || quotation.informacion_cliente || {}\r\n          };\r\n        }\r\n\r\n        // Extraer cliente/proyecto desde informacion_basica de forma defensiva\r\n        const infoBasica = cotizacionData?.informacion_basica || {};\r\n        const clienteArr = infoBasica?.cliente || infoBasica?.clientes || [];\r\n        const proyectoArr = infoBasica?.proyecto || infoBasica?.proyectos || [];\r\n\r\n        const { id: clientIdFromInfo, name: clientNameFromInfo } = safeFindIdAndName(clienteArr, ['id', 'id_cliente'], ['nombre', 'empresa', 'nombre_cliente']);\r\n        const { id: projectIdFromInfo, name: projectNameFromInfo } = safeFindIdAndName(proyectoArr, ['id', 'id_proyecto'], ['nombre', 'nombre_proyecto']);\r\n\r\n        // Preferir IDs directos en la prop quotation si existen\r\n        const clientId = quotation.clientId || clientIdFromInfo || cotizacionData.clientId || undefined;\r\n        const projectId = quotation.projectId || projectIdFromInfo || cotizacionData.projectId || undefined;\r\n\r\n        // Enriquecer clientData y projectData desde los listados (si se encontraron)\r\n        const foundClient = clientId ? clientsList.find(c => String(c.id) === String(clientId)) : null;\r\n        const foundProject = projectId ? proyectosList.find(p => String(p.id) === String(projectId)) : null;\r\n\r\n        // Contacto defensivo\r\n        const contactoObj = quotation?.informacion_contacto?.[0]?.persona_contacto1?.[0] || {};\r\n\r\n        if (isMounted) {\r\n          setClientData({\r\n            ...(foundClient || {}),\r\n            id: clientId || (foundClient && foundClient.id),\r\n            empresa: (foundClient && (foundClient.empresa || foundClient.nombre)) || clientNameFromInfo || 'Cliente no especificado',\r\n            rfc: (foundClient && foundClient.rfc) || 'No disponible',\r\n            contacto: contactoObj?.Persona_de_contacto_nombre || contactoObj?.nombre || (foundClient && (foundClient.contacto || foundClient.nombre_contacto)) || 'No especificado',\r\n            email: contactoObj?.email || (foundClient && (foundClient.email || foundClient.contacto_email)) || 'No disponible',\r\n            telefono: contactoObj?.telefono || (foundClient && (foundClient.telefono || foundClient.contacto_telefono)) || 'No disponible',\r\n            ubicacion: (foundClient && foundClient.ubicacion) || {\r\n              direccion: cotizacionData?.detalles_proyecto?.ubicacion_proyecto?.[0]?.direccion || '',\r\n              ciudad: cotizacionData?.detalles_proyecto?.ubicacion_proyecto?.[0]?.municipio || '',\r\n              estado: cotizacionData?.detalles_proyecto?.ubicacion_proyecto?.[0]?.estado || ''\r\n            }\r\n          });\r\n\r\n          // Resolver cronograma defensivo\r\n          const resolvedCronograma = (foundProject && foundProject.cronograma) || (cotizacionData?.detalles_proyecto && (() => {\r\n            const tiempo = cotizacionData.detalles_proyecto.tiempo_ejecucion;\r\n            if (typeof tiempo === 'string' && tiempo.includes(' a ')) {\r\n              const [fechaInicio, fechaFin] = tiempo.split(' a ').map(s => s.trim());\r\n              return { fechaInicio, fechaFin };\r\n            }\r\n            return {\r\n              fechaInicio: cotizacionData.detalles_proyecto?.fecha_inicio,\r\n              fechaFin: cotizacionData.detalles_proyecto?.fecha_fin_estimada\r\n            };\r\n          })()) || undefined;\r\n\r\n          setProjectData({\r\n            ...(foundProject || {}),\r\n            id: projectId || (foundProject && foundProject.id),\r\n            nombre: (foundProject && (foundProject.nombre || foundProject.titulo)) || projectNameFromInfo || cotizacionData?.detalles_proyecto?.nombre_proyecto || 'Proyecto sin nombre',\r\n            descripcion: (foundProject && foundProject.descripcion) || cotizacionData?.detalles_proyecto?.descripcion_proyecto || 'Sin descripci√≥n disponible',\r\n            ubicacion: (foundProject && foundProject.ubicacion) || cotizacionData?.detalles_proyecto?.ubicacion_proyecto?.[0]?.direccion || 'Ubicaci√≥n no especificada',\r\n            tipoProyecto: (foundProject && foundProject.tipoProyecto) || infoBasica?.tipo_proyecto || 'No especificado',\r\n            prioridad: (foundProject && foundProject.prioridad) || infoBasica?.prioridad || 'Normal',\r\n            cronograma: resolvedCronograma,\r\n            totalPresupuesto: (foundProject && foundProject.totalPresupuesto) || cotizacionData?.detalles_proyecto?.presupuesto_estimado_mxn || cotizacionData?.totalAmount || 0\r\n          });\r\n\r\n          // Guardar cotizaci√≥n completa en estado para debug o usos posteriores\r\n          setCotizacionCompleta({\r\n            ...cotizacionData,\r\n            clientId,\r\n            projectId\r\n          });\r\n        }\r\n\r\n        // Advertencias si faltan ids cr√≠ticos\r\n        if (!clientId || !projectId) {\r\n          showWarning && showWarning('Faltan datos de cliente o proyecto en la cotizaci√≥n. Se us√≥ la informaci√≥n disponible.');\r\n        }\r\n      } catch (err) {\r\n        console.error('QuotationPreview - error al cargar datos:', err);\r\n        showError && showError(err?.message || 'Error al cargar los datos de la cotizaci√≥n');\r\n      } finally {\r\n        if (isMounted) setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [quotation, getProyectos, getClients, showError, showWarning]);\r\n\r\n  const handleExportPDF = async () => {\r\n    if (!quotationRef.current) return;\r\n    try {\r\n      const content = quotationRef.current;\r\n      const canvas = await html2canvas(content, {\r\n        scale: 2,\r\n        useCORS: true,\r\n        logging: false,\r\n        backgroundColor: '#ffffff'\r\n      });\r\n      const imgData = canvas.toDataURL('image/jpeg', 1.0);\r\n      const pdf = new jsPDF('p', 'mm', 'a4');\r\n      const pdfWidth = pdf.internal.pageSize.getWidth();\r\n      const pdfHeight = pdf.internal.pageSize.getHeight();\r\n      const imgWidth = canvas.width;\r\n      const imgHeight = canvas.height;\r\n      const ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight);\r\n      const imgX = (pdfWidth - imgWidth * ratio) / 2;\r\n      const imgY = 0;\r\n      pdf.addImage(imgData, 'JPEG', imgX, imgY, imgWidth * ratio, imgHeight * ratio);\r\n      pdf.save(`Cotizacion-${quotation?.id || 'nueva'}.pdf`);\r\n    } catch (error) {\r\n      console.error('Error al generar PDF:', error);\r\n      showError && showError('Error al generar PDF');\r\n    }\r\n  };\r\n\r\n  const handlePrint = () => {\r\n    try {\r\n      // Crear estilos de impresi√≥n\r\n      const printStyles = `\r\n        @media print {\r\n          * {\r\n            -webkit-print-color-adjust: exact !important;\r\n            print-color-adjust: exact !important;\r\n          }\r\n          \r\n          body * {\r\n            visibility: hidden;\r\n          }\r\n          \r\n          .print-section, .print-section * {\r\n            visibility: visible;\r\n          }\r\n          \r\n          .print-section {\r\n            position: absolute;\r\n            left: 0;\r\n            top: 0;\r\n            width: 100%;\r\n          }\r\n          \r\n          @page {\r\n            size: A4;\r\n            margin: 15mm;\r\n          }\r\n          \r\n          /* Ocultar botones */\r\n          button {\r\n            display: none !important;\r\n          }\r\n          \r\n          /* Ocultar estado de la cotizaci√≥n */\r\n          .space-y-6 > .bg-muted\\\\/30:last-child {\r\n            display: none !important;\r\n          }\r\n        }\r\n      `;\r\n      \r\n      const style = document.createElement('style');\r\n      style.id = 'print-styles';\r\n      style.textContent = printStyles;\r\n      document.head.appendChild(style);\r\n      \r\n      // A√±adir clase para impresi√≥n\r\n      if (quotationRef.current) {\r\n        quotationRef.current.classList.add('print-section');\r\n      }\r\n      \r\n      // Dar tiempo para que se apliquen los estilos\r\n      setTimeout(() => {\r\n        window.print();\r\n        \r\n        // Limpiar despu√©s de imprimir\r\n        setTimeout(() => {\r\n          if (quotationRef.current) {\r\n            quotationRef.current.classList.remove('print-section');\r\n          }\r\n          const styleElement = document.getElementById('print-styles');\r\n          if (styleElement) {\r\n            document.head.removeChild(styleElement);\r\n          }\r\n        }, 100);\r\n      }, 100);\r\n      \r\n    } catch (error) {\r\n      console.error('Error al imprimir:', error);\r\n      showError && showError('Hubo un problema al imprimir el documento');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-xl font-semibold\">Vista Previa de Cotizaci√≥n</h3>\r\n        <div className=\"flex space-x-2\">\r\n          <Button variant=\"outline\" onClick={handlePrint} iconName=\"Printer\" iconPosition=\"left\">\r\n            Imprimir\r\n          </Button>\r\n          <Button onClick={handleExportPDF} iconName=\"Download\" iconPosition=\"left\">\r\n            Exportar PDF\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div ref={quotationRef} className=\"bg-white border rounded-lg p-8 shadow-sm print:shadow-none print:border-none relative\">\r\n        {loading && (\r\n          <div className=\"absolute inset-0 bg-white/90 flex items-center justify-center z-10\">\r\n            <div className=\"flex flex-col items-center space-y-4\">\r\n              <div className=\"relative\">\r\n                <Icon name=\"Loader2\" className=\"animate-spin\" size={32} />\r\n                <Icon name=\"Wind\" className=\"absolute inset-0 m-auto opacity-30\" size={16} />\r\n              </div>\r\n              <span className=\"text-sm text-muted-foreground font-medium\">\r\n                Cargando informaci√≥n de la cotizaci√≥n...\r\n              </span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Encabezado empresa */}\r\n        <div className=\"flex items-center justify-between mb-8 pb-4 border-b\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"w-12 h-12 bg-primary rounded-lg flex items-center justify-center\">\r\n              <Icon name=\"Wind\" size={24} color=\"white\" />\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-foreground\">AireFlow Pro</h1>\r\n              <p className=\"text-muted-foreground\">Sistemas HVAC Profesionales</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-right text-sm text-muted-foreground\">\r\n            <p>RFC: AFP123456789</p>\r\n            <p>Tel: +52 55 1234 5678</p>\r\n            <p>info@aireflowpro.com</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cabecera de la cotizaci√≥n */}\r\n        <div className=\"grid grid-cols-2 gap-8 mb-8\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold mb-4\">COTIZACI√ìN</h2>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <p><span className=\"font-medium\">No. Cotizaci√≥n:</span> {quotation?.folio || cotizacionCompleta?.folio || 'No disponible'}</p>\r\n              <p><span className=\"font-medium\">Fecha:</span> {getCurrentDate()}</p>\r\n              <p><span className=\"font-medium\">Vendedor:</span> {quotation?.assignedTo || cotizacionCompleta?.assignedTo || 'No asignado'}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <h3 className=\"font-semibold mb-2\">CLIENTE</h3>\r\n            <div className=\"text-sm space-y-1\">\r\n              <p className=\"font-medium\">{clientData?.empresa || clientData?.nombre || 'Cliente no especificado'}</p>\r\n              <p><span className=\"font-medium\">RFC:</span> {clientData?.rfc || 'No disponible'}</p>\r\n              <p><span className=\"font-medium\">Direcci√≥n:</span> {clientData?.ubicacion ? `${clientData.ubicacion.direccion || ''}${clientData.ubicacion.ciudad ? ', ' + clientData.ubicacion.ciudad : ''}${clientData.ubicacion.estado ? ', ' + clientData.ubicacion.estado : ''}` : 'Direcci√≥n no disponible'}</p>\r\n              <p><span className=\"font-medium\">Contacto:</span> {clientData?.contacto || 'No especificado'}</p>\r\n              <p><span className=\"font-medium\">Email:</span> {clientData?.email || 'No disponible'}</p>\r\n              <p><span className=\"font-medium\">Tel√©fono:</span> {clientData?.telefono || 'No disponible'}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Informaci√≥n del proyecto */}\r\n        <div className=\"mb-8\">\r\n          <h3 className=\"text-lg font-semibold mb-4 text-primary\">INFORMACI√ìN DEL PROYECTO</h3>\r\n          <div className=\"bg-muted/30 rounded-lg p-4\">\r\n            <h4 className=\"font-medium mb-2\">{projectData?.data?.nombre || projectData?.nombre || cotizacionCompleta?.projectName || 'Proyecto sin nombre'}</h4>\r\n            <p className=\"text-sm text-foreground mb-3\">{projectData?.data?.descripcion || projectData?.descripcion || cotizacionCompleta?.description || 'Sin descripci√≥n disponible'}</p>\r\n            <div className=\"text-sm text-foreground space-y-2\">\r\n              <p><span className=\"font-bold\">Ubicaci√≥n:</span> {\r\n                projectData?.data?.ubicacion ? \r\n                `${projectData.data.ubicacion.direccion || ''}, ${projectData.data.ubicacion.municipio || ''}, ${projectData.data.ubicacion.estado || ''}` :\r\n                (projectData?.ubicacion ? \r\n                  `${projectData.ubicacion.direccion || ''}, ${projectData.ubicacion.municipio || ''}, ${projectData.ubicacion.estado || ''}` :\r\n                  (cotizacionCompleta?.location ? \r\n                    `${cotizacionCompleta.location.direccion || ''}, ${cotizacionCompleta.location.municipio || ''}, ${cotizacionCompleta.location.estado || ''}` :\r\n                    'Ubicaci√≥n no especificada'))\r\n              }</p>\r\n              <p><span className=\"font-bold\">Tipo de proyecto:</span> {(projectData?.data?.tipoProyecto || projectData?.tipoProyecto || cotizacionCompleta?.projectType || 'NO ESPECIFICADO')?.toUpperCase()}</p>\r\n              <p><span className=\"font-bold\">Prioridad:</span> {(projectData?.data?.prioridad || projectData?.prioridad || cotizacionCompleta?.priority || 'Media')}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Alcance - Comentado temporalmente\r\n        <div className=\"mb-8\">\r\n          <h3 className=\"text-lg font-semibold mb-4 text-primary\">ALCANCE DE TRABAJO</h3>\r\n          <div className=\"text-sm leading-relaxed\">\r\n            <p>{quotation?.quotationData?.scope || cotizacionCompleta?.quotationData?.scope || 'No hay alcance disponible'}</p>\r\n          </div>\r\n        </div>\r\n        */}\r\n\r\n        {/* Materiales y equipos */}\r\n        {quotation?.materials && quotation?.materials?.length > 0 && (\r\n          <div className=\"mb-8\">\r\n            <h3 className=\"text-lg font-semibold mb-4 text-primary\">MATERIALES Y EQUIPOS</h3>\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full text-sm border border-border\">\r\n                <thead className=\"bg-muted/50\">\r\n                  <tr>\r\n                    <th className=\"px-4 py-2 text-left border border-border\">Descripci√≥n</th>\r\n                    <th className=\"px-4 py-2 text-left border border-border\">Cantidad</th>\r\n                    <th className=\"px-4 py-2 text-right border border-border\">Precio Unit.</th>\r\n                    <th className=\"px-4 py-2 text-right border border-border\">Total</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {quotation.materials.map((material, index) => {\r\n                    const qty = Number(material?.quantity) || 0;\r\n                    const cost = Number(material?.cost) || 0;\r\n                    const unit = qty > 0 ? cost / qty : cost;\r\n                    return (\r\n                      <tr key={index}>\r\n                        <td className=\"px-4 py-2 border border-border\">{material?.item || '-'}</td>\r\n                        <td className=\"px-4 py-2 border border-border\">{qty || '-'}</td>\r\n                        <td className=\"px-4 py-2 text-right border border-border\">{formatCurrency(unit)}</td>\r\n                        <td className=\"px-4 py-2 text-right border border-border\">{formatCurrency(cost)}</td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                  <tr className=\"bg-muted/30 font-semibold\">\r\n                    <td colSpan=\"3\" className=\"px-4 py-2 text-right border border-border\">SUBTOTAL:</td>\r\n                    <td className=\"px-4 py-2 text-right border border-border\">{formatCurrency(quotation.materials.reduce((sum, m) => sum + (Number(m?.cost) || 0), 0))}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Cronograma y condiciones */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold mb-4 text-primary\">CRONOGRAMA</h3>\r\n            <div className=\"bg-muted/30 rounded-lg p-4 text-sm\">\r\n              <p><span className=\"font-medium\">Tiempo de ejecuci√≥n:</span> {projectData?.cronograma ? `${projectData.cronograma.fechaInicio || '-'} a ${projectData.cronograma.fechaFin || '-'}` : 'No especificado'}</p>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold mb-4 text-primary\">CONDICIONES COMERCIALES</h3>\r\n            <div className=\"bg-muted/30 rounded-lg p-4 text-sm\">\r\n              <p>‚Ä¢ Precio sujeto a cambios sin previo aviso</p>\r\n              <p>‚Ä¢ Forma de pago: 50% anticipo, 50% contra entrega</p>\r\n              <p>‚Ä¢ Tiempo de entrega: seg√∫n cronograma</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Total */}\r\n        <div className=\"bg-primary/10 rounded-lg p-6 mb-8\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div><h3 className=\"text-xl font-semibold text-primary\">INVERSI√ìN TOTAL</h3></div>\r\n            <div className=\"text-right\">\r\n              <div className=\"text-3xl font-bold text-primary\">{formatCurrency(\r\n                (projectData?.data?.totalPresupuesto || projectData?.totalPresupuesto || cotizacionCompleta?.quotationData?.totalAmount || 0) +\r\n                (quotation?.materials?.reduce((sum, m) => sum + (Number(m?.cost) || 0), 0) || 0)\r\n              )}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"border-t pt-4 text-center text-sm text-muted-foreground\">\r\n          <p>Gracias por la confianza en AireFlow Pro</p>\r\n          <p>Para cualquier consulta, contacte a: {quotation?.assignedTo || quotation?.asignado || '-'}</p>\r\n          <p className=\"mt-2 font-medium\">Esta cotizaci√≥n cumple con la normativa mexicana vigente</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Estado de la cotizaci√≥n */}\r\n      <div className=\"bg-muted/30 rounded-lg p-4\">\r\n        <h4 className=\"font-medium mb-2\">Estado de la Cotizaci√≥n</h4>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\r\n          <div className=\"flex items-center space-x-2\"><Icon name=\"Calendar\" size={16} className=\"text-muted-foreground\" /><span>Creada: {cotizacionCompleta?.createdDate || cotizacionCompleta?.fechaCreacion || quotation?.createdDate || 'Fecha no disponible'}</span></div>\r\n          <div className=\"flex items-center space-x-2\"><Icon name=\"Clock\" size={16} className=\"text-muted-foreground\" /><span>Modificada: {cotizacionCompleta?.lastModified || cotizacionCompleta?.fechaActualizacion || quotation?.lastModified || 'Fecha no disponible'}</span></div>\r\n          <div className=\"flex items-center space-x-2\"><Icon name=\"User\" size={16} className=\"text-muted-foreground\" /><span>Versi√≥n: {quotation?.revisions?.[quotation?.revisions?.length - 1]?.version || '1.0'}</span></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationPreview;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport useCommunication from '../../../hooks/useCommunication';\r\nimport useClient from '../../../hooks/useClient';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\n        const ClientCommunication = ({ quotation, onAddCommunication }) => {\r\n          const [newCommunication, setNewCommunication] = useState({\r\n            type: 'email',\r\n            subject: '',\r\n            content: '',\r\n            urgency: 'normal',\r\n          });\r\n          const { createCotizacionCommunication, getComunicacionesByCliente, getComunicacionByCotizacionId, loading } = useCommunication();\r\n\r\n          const [showHistory, setShowHistory] = useState(true);\r\n          const [clientHistory, setClientHistory] = useState([]);\r\n          const historyRef = useRef(null);\r\n          // Mostrar historial de comunicaci√≥n por cotizaci√≥n\r\n          useEffect(() => {\r\n            if (quotation?.id) {\r\n              getComunicacionByCotizacionId(quotation.id).then((res) => {\r\n                if (res && res.data && Array.isArray(res.data)) {\r\n                  setClientHistory(res.data);\r\n                } else {\r\n                  setClientHistory([]);\r\n                }\r\n              });\r\n            } else {\r\n              setClientHistory([]);\r\n            }\r\n          }, [quotation?.id]);\r\n\r\n          const handleInputChange = (field, value) => {\r\n            setNewCommunication(prev => ({ ...prev, [field]: value }));\r\n          };\r\n\r\n          const handleSendCommunication = () => {\r\n            if (!newCommunication?.subject?.trim() || !newCommunication?.content?.trim()) return;\r\n\r\n            // console.log eliminado\r\n            const idCliente = quotation?.clientId\r\n              || quotation?.informacion_basica?.cliente?.find?.(c => 'id_cliente' in c)?.id_cliente\r\n              || '';\r\n            const commData = {\r\n              tipoComunicacion: newCommunication.type,\r\n              nivelUrgencia: newCommunication.urgency,\r\n              asunto: newCommunication.subject,\r\n              mensaje: newCommunication.content,\r\n              idCliente,\r\n              idCotizacion: quotation?.id,\r\n            };\r\n            // console.log eliminado\r\n            createCotizacionCommunication(commData).then((data) => {\r\n              if (data) {\r\n                setNewCommunication({\r\n                  type: 'email',\r\n                  subject: '',\r\n                  content: '',\r\n                  urgency: 'normal',\r\n                });\r\n                // Recargar √∫nicamente el historial desde el backend\r\n                if (quotation?.id) {\r\n                  getComunicacionByCotizacionId(quotation.id).then((res) => {\r\n                    if (res && res.data && Array.isArray(res.data)) {\r\n                      setClientHistory(res.data);\r\n                      setShowHistory(true);\r\n                      // Hacer scroll al tope para mostrar el √∫ltimo mensaje (suponiendo orden descendente)\r\n                      setTimeout(() => {\r\n                        if (historyRef.current) {\r\n                          historyRef.current.scrollTo({ top: 0, behavior: 'smooth' });\r\n                        }\r\n                      }, 120);\r\n                    }\r\n                  }).catch(() => {\r\n                    // Fallback: insertar la comunicaci√≥n si la recarga falla\r\n                    setClientHistory(prev => [data, ...(prev || [])]);\r\n                    setShowHistory(true);\r\n                  });\r\n                } else {\r\n                  // Si no hay id de cotizaci√≥n, insertar localmente\r\n                  setClientHistory(prev => [data, ...(prev || [])]);\r\n                  setShowHistory(true);\r\n                }\r\n                // Callback externo si existe\r\n                onAddCommunication?.(data);\r\n              }\r\n            });\r\n          };\r\n\r\n          const handleQuotationSend = () => {\r\n            const quotationComm = {\r\n              type: 'email',\r\n              subject: `Cotizaci√≥n ${quotation?.id} - ${quotation?.projectName}`,\r\n              content: `Estimado cliente,\\n\\nAdjunto encontrar√° la cotizaci√≥n solicitada para el proyecto \"${quotation?.projectName}\".\\n\\nQuedamos a su disposici√≥n para cualquier aclaraci√≥n.\\n\\nSaludos cordiales,\\n${quotation?.assignedTo}\\nAireFlow Pro`,\r\n              urgency: 'high',\r\n              hasAttachments: true,\r\n              attachments: [`Cotizacion_${quotation?.id}.pdf`]\r\n            };\r\n\r\n            onAddCommunication?.(quotationComm);\r\n          };\r\n\r\n          const getUrgencyColor = (urgency) => {\r\n            switch (urgency) {\r\n              case 'urgent': return 'text-red-600 bg-red-50';\r\n              case 'high': return 'text-orange-600 bg-orange-50';\r\n              case 'normal': return 'text-blue-600 bg-blue-50';\r\n              default: return 'text-gray-600 bg-gray-50';\r\n            }\r\n          };\r\n\r\n          const getTypeIcon = (type) => {\r\n            switch (type) {\r\n              case 'whatsapp': return 'MessageCircle';\r\n              case 'email': return 'Mail';\r\n              case 'phone': return 'Phone';\r\n              default: return 'MessageSquare';\r\n            }\r\n          };\r\n\r\n          return (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-xl font-semibold\">Comunicaci√≥n con Cliente</h3>\r\n                <div className=\"flex space-x-2\">\r\n                  {/* Bot√≥n comentado: Enviar Cotizaci√≥n (se dej√≥ comentado para posible uso futuro)\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={handleQuotationSend}\r\n                    iconName=\"Send\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    Enviar Cotizaci√≥n\r\n                  </Button>\r\n                  */}\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => setShowHistory(!showHistory)}\r\n                    iconName={showHistory ? 'EyeOff' : 'Eye'}\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    {showHistory ? 'Ocultar' : 'Ver'} Historial\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Communication History */}\r\n              {showHistory && (\r\n                <div className=\"space-y-4\">\r\n                  <h4 className=\"font-medium flex items-center space-x-2\">\r\n                    <Icon name=\"History\" size={16} />\r\n                    <span>Historial de Comunicaciones</span>\r\n                  </h4>\r\n                  \r\n                  <div ref={historyRef} className=\"max-h-96 overflow-y-auto space-y-3 bg-muted/20 rounded-lg p-4\">\r\n                    {clientHistory.length > 0 ? (\r\n                      clientHistory.map((comm) => (\r\n                        <div key={comm.id} className=\"bg-white rounded-lg p-4 border\">\r\n                          <div className=\"flex items-start justify-between mb-2\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <Icon \r\n                                name={getTypeIcon(comm.tipoComunicacion)} \r\n                                size={16} \r\n                                className={`${comm.tipoComunicacion === 'whatsapp' ? 'text-green-600' : 'text-blue-600'}`} \r\n                              />\r\n                              <span className=\"font-medium text-sm\">{comm.asunto || 'Sin asunto'}</span>\r\n                              <span className={`px-2 py-1 text-xs rounded ${getUrgencyColor(comm.nivelUrgencia)}`}>\r\n                                {comm.nivelUrgencia === 'urgente' ? 'Urgente' : comm.nivelUrgencia === 'alta' ? 'Alta' : 'Normal'}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <span className=\"text-xs text-muted-foreground\">\r\n                                {new Date(parseInt(comm.id)).toLocaleString('es-MX', {\r\n                                  year: 'numeric',\r\n                                  month: '2-digit',\r\n                                  day: '2-digit',\r\n                                  hour: '2-digit',\r\n                                  minute: '2-digit'\r\n                                })}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                          <p className=\"text-sm text-foreground leading-relaxed whitespace-pre-line\">{comm.mensaje}</p>\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <div className=\"text-center py-8\">\r\n                        <Icon name=\"Inbox\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                        <p className=\"text-sm text-muted-foreground\">Sin comunicaciones registradas</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* New Communication Form */}\r\n              <div className=\"bg-card border rounded-lg p-6\">\r\n                <h4 className=\"font-medium mb-4 flex items-center space-x-2\">\r\n                  <Icon name=\"Edit3\" size={16} />\r\n                  <span>Nueva Comunicaci√≥n</span>\r\n                </h4>\r\n                \r\n                <div className=\"space-y-4\">\r\n                  {/* Communication Type and Urgency */}\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"text-sm font-medium mb-2 block\">Canal de Comunicaci√≥n</label>\r\n                      <select\r\n                        value={newCommunication?.type}\r\n                        onChange={(e) => handleInputChange('type', e?.target?.value)}\r\n                        className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background\"\r\n                      >\r\n                        <option value=\"email\">Correo Electr√≥nico</option>\r\n                        <option value=\"whatsapp\">WhatsApp</option>\r\n                        <option value=\"llamada\">Llamada Telef√≥nica</option>\r\n                      </select>\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"text-sm font-medium mb-2 block\">Nivel de Urgencia</label>\r\n                      <select\r\n                        value={newCommunication?.urgency}\r\n                        onChange={(e) => handleInputChange('urgency', e?.target?.value)}\r\n                        className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background\"\r\n                      >\r\n                        <option value=\"normal\">Normal</option>\r\n                        <option value=\"alta\">Alta</option>\r\n                        <option value=\"urgente\">Urgente</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Subject */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Asunto</label>\r\n                    <Input\r\n                      value={newCommunication?.subject}\r\n                      onChange={(e) => handleInputChange('subject', e?.target?.value)}\r\n                      placeholder=\"Asunto de la comunicaci√≥n\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Content */}\r\n                  <div>\r\n                    <label className=\"text-sm font-medium mb-2 block\">Mensaje</label>\r\n                    <textarea\r\n                      value={newCommunication?.content}\r\n                      onChange={(e) => handleInputChange('content', e?.target?.value)}\r\n                      placeholder=\"Escribir mensaje al cliente...\"\r\n                      rows={6}\r\n                      className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Opci√≥n de anexos eliminada por requerimiento */}\r\n\r\n                  {/* Quick Templates */}\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"text-sm font-medium\">Plantillas R√°pidas</label>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-2\">\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          handleInputChange('subject', 'Solicitud de aclaraciones t√©cnicas');\r\n                          handleInputChange('content', 'Estimado cliente,\\n\\nPara elaborar la cotizaci√≥n m√°s precisa, necesitamos algunas aclaraciones t√©cnicas adicionales:\\n\\n1. \\n2. \\n3. \\n\\nQuedamos en espera de su respuesta.\\n\\nSaludos cordiales.');\r\n                        }}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Solicitar Aclaraciones\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          handleInputChange('subject', 'Seguimiento de cotizaci√≥n');\r\n                          handleInputChange('content', 'Estimado cliente,\\n\\nEsperamos que se encuentre bien. Nos ponemos en contacto para dar seguimiento a la cotizaci√≥n enviada.\\n\\n¬øHa tenido oportunidad de revisar nuestra propuesta?\\n\\nQuedamos a su disposici√≥n para cualquier duda o aclaraci√≥n.\\n\\nSaludos cordiales.');\r\n                        }}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Seguimiento\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          handleInputChange('subject', 'Confirmaci√≥n de costos adicionales');\r\n                          handleInputChange('content', 'Estimado cliente,\\n\\nDespu√©s de la revisi√≥n t√©cnica, hemos identificado algunos trabajos adicionales necesarios:\\n\\n[Descripci√≥n del trabajo adicional]\\nCosto adicional: $XXX MXN\\nTiempo adicional: XX d√≠as\\n\\nSolicito su confirmaci√≥n para proceder.\\n\\nSaludos cordiales.');\r\n                        }}\r\n                        className=\"text-xs\"\r\n                      >\r\n                        Confirmar Extras\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Send Button */}\r\n                  <div className=\"flex items-center justify-between pt-4 border-t border-border\">\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      Cliente: {quotation?.clientName} - {quotation?.contactInfo?.email}\r\n                    </div>\r\n                    <Button\r\n                      onClick={handleSendCommunication}\r\n                      disabled={!newCommunication?.subject?.trim() || !newCommunication?.content?.trim() || loading}\r\n                      iconName=\"Send\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Enviar Comunicaci√≥n\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default ClientCommunication;","import React, { useEffect, useState } from 'react';\r\nimport useQuotation from '../../../hooks/useQuotation';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst RevisionHistory = ({ quotation }) => {\r\n  const { getRevision } = useQuotation();\r\n  const [revisionData, setRevisionData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [expandedAreas, setExpandedAreas] = useState({});\r\n\r\n  const toggleArea = (area) => {\r\n    setExpandedAreas(prev => ({\r\n      ...prev,\r\n      [area]: !prev[area]\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (quotation?.id) {\r\n      setLoading(true);\r\n      getRevision({ idCotizacion: quotation.id })\r\n        .then(response => {\r\n          if (response?.areasRevision) {\r\n            const formattedData = {\r\n              success: true,\r\n              data: [response]\r\n            };\r\n            setRevisionData(formattedData);\r\n          } else {\r\n            setRevisionData(null);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error al obtener revisiones:', error);\r\n          setRevisionData(null);\r\n        })\r\n        .finally(() => {\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      setRevisionData(null);\r\n    }\r\n  }, [quotation?.id]);\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    return new Date(dateString).toLocaleString('es-MX', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <Icon name=\"Loader\" className=\"animate-spin\" size={24} />\r\n        <span className=\"ml-2\">Cargando revisiones...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-xl font-semibold\">Historial de Revisiones</h3>\r\n        <div className=\"text-sm text-muted-foreground\">\r\n          Versi√≥n actual: 1.0\r\n        </div>\r\n      </div>\r\n\r\n      {/* Timeline of Revisions */}\r\n      <div className=\"space-y-6\">\r\n        {revisionData?.data?.[0]?.areasRevision ? (\r\n          Object.entries(revisionData.data[0].areasRevision)\r\n            .sort(([a], [b]) => {\r\n              if (a === '_comentariosGenerales') return 1;\r\n              if (b === '_comentariosGenerales') return -1;\r\n              return a.localeCompare(b);\r\n            })\r\n            .map(([area, revisiones]) => (\r\n              <div key={area} className=\"bg-card border rounded-lg overflow-hidden\">\r\n                <button \r\n                  onClick={() => toggleArea(area)}\r\n                  className=\"w-full bg-muted/10 px-4 py-3 border-b hover:bg-muted/20 transition-colors\"\r\n                >\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <h4 className=\"font-medium flex items-center space-x-2\">\r\n                      <Icon name={\r\n                        area === \"Precios y Costos\" ? \"DollarSign\" :\r\n                        area === \"Alcance y Supuestos\" ? \"FileText\" :\r\n                        area === \"Cronograma\" ? \"Calendar\" :\r\n                        area === \"Aspectos T√©cnicos\" ? \"Tool\" :\r\n                        area === \"_comentariosGenerales\" ? \"MessageCircle\" : \"Folder\"\r\n                      } size={16} />\r\n                      <span>{area === \"_comentariosGenerales\" ? \"Comentarios Generales\" : area}</span>\r\n                    </h4>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className=\"text-xs text-muted-foreground\">\r\n                        {Object.keys(revisiones).length} {Object.keys(revisiones).length === 1 ? 'revisi√≥n' : 'revisiones'}\r\n                      </span>\r\n                      <Icon \r\n                        name={expandedAreas[area] ? \"ChevronUp\" : \"ChevronDown\"} \r\n                        size={16} \r\n                        className=\"text-muted-foreground\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n                \r\n                <div className={`divide-y ${!expandedAreas[area] ? 'hidden' : ''}`}>\r\n                  {Object.entries(revisiones).map(([fecha, revision]) => (\r\n                    <div key={fecha} className=\"p-4 hover:bg-muted/5 transition-colors\">\r\n                      <div className=\"flex items-start justify-between mb-2\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {revision.revisor && (\r\n                            <span className=\"text-sm font-medium text-foreground\">\r\n                              {revision.revisor}\r\n                            </span>\r\n                          )}\r\n                          {revision.estado && (\r\n                            <span className={`px-2 py-0.5 text-xs rounded-full ${\r\n                              revision.estado === \"Actualizado\" ? \"bg-green-100 text-green-700\" :\r\n                              revision.estado === \"Pendiente\" ? \"bg-yellow-100 text-yellow-700\" :\r\n                              \"bg-blue-100 text-blue-700\"\r\n                            }`}>\r\n                              {revision.estado}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                          {formatDate(revision.fecha)}\r\n                        </span>\r\n                      </div>\r\n                      <p className=\"text-sm text-foreground whitespace-pre-line\">\r\n                        {revision.descripcion || revision.comentarios}\r\n                      </p>\r\n                      {revision.revisado !== undefined && (\r\n                        <div className=\"mt-2 flex items-center space-x-2 text-xs text-muted-foreground\">\r\n                          <Icon name={revision.revisado ? \"CheckCircle\" : \"Clock\"} size={12} />\r\n                          <span>{revision.revisado ? \"Revisado\" : \"Pendiente de revisi√≥n\"}</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ))\r\n        ) : (\r\n          <div className=\"text-center py-8\">\r\n            <Icon name=\"GitBranch\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n            <h4 className=\"font-medium text-foreground mb-1\">Sin revisiones</h4>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Las revisiones aparecer√°n aqu√≠ cuando se realicen cambios\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Revision Statistics */}\r\n      <div className=\"bg-muted/30 rounded-lg p-4\">\r\n        <h4 className=\"font-medium mb-3\">Estad√≠sticas de Revisi√≥n</h4>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"GitCommit\" size={16} className=\"text-muted-foreground\" />\r\n            <span>Total de revisiones: {\r\n              revisionData?.data?.[0]?.areasRevision ? \r\n              Object.keys(revisionData.data[0].areasRevision).length : 0\r\n            }</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Calendar\" size={16} className=\"text-muted-foreground\" />\r\n            <span>√öltima actualizaci√≥n: {formatDate(revisionData?.data?.[0]?.fechaActualizacion)}</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Clock\" size={16} className=\"text-muted-foreground\" />\r\n            <span>Fecha creaci√≥n: {formatDate(revisionData?.data?.[0]?.fechaCreacion)}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Change Tracking */}\r\n      <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n        <div className=\"flex items-center space-x-2 mb-2\">\r\n          <Icon name=\"Shield\" size={16} className=\"text-green-600\" />\r\n          <span className=\"font-medium text-green-800\">Trazabilidad Completa</span>\r\n        </div>\r\n        <p className=\"text-sm text-green-700\">\r\n          Todos los cambios son registrados autom√°ticamente para mantener un historial completo de la cotizaci√≥n.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RevisionHistory;","import React, { useState } from 'react';\r\nimport { useNotifications } from '../../../context/NotificationContext';\r\nimport useQuotation from '../../../hooks/useQuotation';\r\n        import Icon from '../../../components/AppIcon';\r\n        import Button from '../../../components/ui/Button';\r\n        import Input from '../../../components/ui/Input';\r\n\r\n        const InternalReview = ({ quotation, onSubmitReview }) => {\r\n          const { showSuccess, showError } = useNotifications();\r\n          const { upsertRevision } = useQuotation();\r\n          \r\n          // ‚úÖ Funci√≥n para verificar si un √°rea tiene datos v√°lidos\r\n          const areaTieneDatos = (area) => {\r\n            if (!area || typeof area !== 'object') return false;\r\n            \r\n            // Tiene comentarios con contenido\r\n            const tieneComentarios = area.comentarios && \r\n                                    typeof area.comentarios === 'string' && \r\n                                    area.comentarios.trim().length > 0;\r\n            \r\n            // Est√° marcado como revisado\r\n            const estaRevisado = area.revisado === true;\r\n            \r\n            // Tiene revisor asignado\r\n            const tieneRevisor = area.revisor && \r\n                                typeof area.revisor === 'string' && \r\n                                area.revisor.trim().length > 0;\r\n            \r\n            // Es v√°lida si tiene comentarios O est√° revisado O tiene revisor\r\n            return tieneComentarios || estaRevisado || tieneRevisor;\r\n          };\r\n          \r\n          // ‚úÖ Funci√≥n para filtrar solo √°reas con datos reales\r\n          const filtrarAreasConDatos = (areasRevision) => {\r\n            const areasFiltradas = {};\r\n            \r\n            Object.entries(areasRevision || {}).forEach(([key, value]) => {\r\n              if (areaTieneDatos(value)) {\r\n                areasFiltradas[key] = value;\r\n              }\r\n            });\r\n            \r\n            return areasFiltradas;\r\n          };\r\n          \r\n          // Funci√≥n para enviar la revisi√≥n al backend\r\n          const sendRevisionToBackend = async (reviewData) => {\r\n            try {\r\n              const fechaHoy = new Date().toISOString().split('T')[0];\r\n              \r\n              // Mapeo de nombres de √°reas\r\n              const areaMap = {\r\n                preciosYCostos: 'Precios y Costos',\r\n                alcanceYSupuestos: 'Alcance y Supuestos',\r\n                cronograma: 'Cronograma',\r\n                aspectosTecnicos: 'Aspectos T√©cnicos'\r\n              };\r\n              \r\n              // ‚úÖ FILTRAR √°reas antes de construir el payload\r\n              const areasFiltradas = filtrarAreasConDatos(reviewData?.areasRevision);\r\n              \r\n              // Verificar si hay comentarios generales con contenido\r\n              const tieneComentariosGenerales = overallComments && \r\n                                               typeof overallComments === 'string' && \r\n                                               overallComments.trim().length > 0;\r\n              \r\n              // ‚úÖ Si no hay datos v√°lidos para enviar, mostrar error\r\n              if (Object.keys(areasFiltradas).length === 0 && !tieneComentariosGenerales) {\r\n                showError('Debes completar al menos un √°rea de revisi√≥n o agregar comentarios generales');\r\n                return;\r\n              }\r\n              \r\n              // Construir el objeto de revisi√≥n solo con √°reas que tienen datos\r\n              const areasRevision = {};\r\n              Object.entries(areasFiltradas).forEach(([key, value]) => {\r\n                const areaName = areaMap[key] || key;\r\n                areasRevision[areaName] = {\r\n                  [fechaHoy]: {\r\n                    revisor: value?.revisor?.trim() || '',\r\n                    revisado: value?.revisado || false,\r\n                    comentarios: value?.comentarios?.trim() || '',\r\n                    fecha: fechaHoy\r\n                  }\r\n                };\r\n              });\r\n              \r\n              const revisionPayload = {\r\n                idCotizacion: quotation?.id,\r\n                areasRevision,\r\n                comentariosGenerales: tieneComentariosGenerales ? overallComments.trim() : undefined\r\n              };\r\n              \r\n              await upsertRevision(revisionPayload);\r\n              showSuccess('Revisi√≥n enviada correctamente');\r\n            } catch (err) {\r\n              showError('Error al enviar la revisi√≥n');\r\n              console.error('Error:', err);\r\n            }\r\n          };\r\n          const [reviewData, setReviewData] = useState(quotation?.internalReview || {\r\n            status: 'pending',\r\n            areasRevision: {\r\n              preciosYCostos: { revisado: false, revisor: '', comentarios: '' },\r\n              alcanceYSupuestos: { revisado: false, revisor: '', comentarios: '' },\r\n              cronograma: { revisado: false, revisor: '', comentarios: '' },\r\n              aspectosTecnicos: { revisado: false, revisor: '', comentarios: '' }\r\n            }\r\n          });\r\n\r\n          const [overallComments, setOverallComments] = useState('');\r\n\r\n          const reviewAreas = [\r\n            { \r\n              key: 'preciosYCostos', \r\n              name: 'Precios y Costos', \r\n              icon: 'DollarSign',\r\n              description: 'Revisi√≥n de precios competitivos y m√°rgenes'\r\n            },\r\n            { \r\n              key: 'alcanceYSupuestos', \r\n              name: 'Alcance y Supuestos', \r\n              icon: 'FileText',\r\n              description: 'Validaci√≥n del alcance definido y supuestos'\r\n            },\r\n            { \r\n              key: 'cronograma', \r\n              name: 'Cronograma', \r\n              icon: 'Calendar',\r\n              description: 'Evaluaci√≥n de tiempos de ejecuci√≥n'\r\n            },\r\n            { \r\n              key: 'aspectosTecnicos', \r\n              name: 'Aspectos T√©cnicos', \r\n              icon: 'Settings',\r\n              description: 'Revisi√≥n de soluci√≥n t√©cnica propuesta'\r\n            }\r\n          ];\r\n\r\n          const handleAreaChange = (area, field, value) => {\r\n            setReviewData(prev => ({\r\n              ...prev,\r\n              areasRevision: {\r\n                ...prev?.areasRevision,\r\n                [area]: {\r\n                  ...prev?.areasRevision?.[area],\r\n                  [field]: value\r\n                }\r\n              }\r\n            }));\r\n          };\r\n\r\n          const handleSubmitForReview = () => {\r\n            const updatedReview = {\r\n              ...reviewData,\r\n              status: 'in-review',\r\n              submittedDate: new Date()?.toISOString()?.split('T')?.[0],\r\n              submittedBy: quotation?.assignedTo\r\n            };\r\n            onSubmitReview?.(updatedReview);\r\n            sendRevisionToBackend(updatedReview);\r\n          };\r\n\r\n          const handleApproveReview = () => {\r\n            const allAreasReviewed = Object.values(reviewData?.areasRevision)?.every(area => area?.revisado);\r\n            if (!allAreasReviewed) {\r\n              alert('Todas las √°reas deben ser revisadas antes de la aprobaci√≥n');\r\n              return;\r\n            }\r\n            const approvedReview = {\r\n              ...reviewData,\r\n              status: 'approved',\r\n              approvedDate: new Date()?.toISOString()?.split('T')?.[0],\r\n              approvedBy: 'Ventas/Mart√≠n', // This would come from current user\r\n              overallComments\r\n            };\r\n            onSubmitReview?.(approvedReview);\r\n            sendRevisionToBackend(approvedReview);\r\n          };\r\n\r\n          const getStatusColor = (status) => {\r\n            switch (status) {\r\n              case 'approved': return 'text-green-600 bg-green-50 border-green-200';\r\n              case 'in-review': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\r\n              case 'rejected': return 'text-red-600 bg-red-50 border-red-200';\r\n              case 'pending': return 'text-gray-600 bg-gray-50 border-gray-200';\r\n              default: return 'text-gray-600 bg-gray-50 border-gray-200';\r\n            }\r\n          };\r\n\r\n          const getCompletionPercentage = () => {\r\n            const totalAreas = Object.keys(reviewData?.areasRevision)?.length;\r\n            const reviewedAreas = Object.values(reviewData?.areasRevision)?.filter(area => area?.revisado)?.length;\r\n            return Math.round((reviewedAreas / totalAreas) * 100);\r\n          };\r\n\r\n          return (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-semibold\">Revisi√≥n Comercial Interna</h3>\r\n                  <p className=\"text-sm text-muted-foreground\">\r\n                    Validaci√≥n de precios, alcances y tiempos antes del env√≠o al cliente\r\n                  </p>\r\n                </div>\r\n                <div className={`px-3 py-1 text-sm rounded-full border ${getStatusColor(reviewData?.status)}`}>\r\n                  {reviewData?.status === 'approved' ? 'Aprobada' :\r\n                   reviewData?.status === 'in-review' ? 'En Revisi√≥n' :\r\n                   reviewData?.status === 'rejected' ? 'Rechazada' : 'Pendiente'}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Review Progress */}\r\n              <div className=\"bg-card border rounded-lg p-4\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"font-medium\">Progreso de Revisi√≥n</span>\r\n                  <span className=\"text-sm text-muted-foreground\">{getCompletionPercentage()}% completado</span>\r\n                </div>\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                  <div \r\n                    className=\"bg-primary h-2 rounded-full transition-all\"\r\n                    style={{ width: `${getCompletionPercentage()}%` }}\r\n                  ></div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Review Areas */}\r\n              <div className=\"space-y-4\">\r\n                <h4 className=\"font-medium\">√Åreas de Revisi√≥n</h4>\r\n                \r\n                {reviewAreas?.map((area) => (\r\n                  <div key={area?.key} className=\"bg-card border rounded-lg p-4\">\r\n                    <div className=\"flex items-start space-x-4\">\r\n                      {/* Area Icon and Info */}\r\n                      <div className=\"flex-shrink-0\">\r\n                        <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${\r\n                          reviewData?.areasRevision?.[area?.key]?.revisado \r\n                            ? 'bg-green-100 text-green-600' :'bg-muted text-muted-foreground'\r\n                        }`}>\r\n                          <Icon name={area?.icon} size={20} />\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Area Content */}\r\n                      <div className=\"flex-1 space-y-3\">\r\n                        <div>\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            <h5 className=\"font-medium\">{area?.name}</h5>\r\n                            {reviewData?.areasRevision?.[area?.key]?.revisado && (\r\n                              <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                            )}\r\n                          </div>\r\n                          <p className=\"text-sm text-muted-foreground\">{area?.description}</p>\r\n                        </div>\r\n\r\n                        {/* Reviewer Input */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                          <div>\r\n                            <label className=\"text-sm font-medium mb-1 block\">Revisor</label>\r\n                            <Input\r\n                              value={reviewData?.areasRevision?.[area?.key]?.revisor}\r\n                              onChange={(e) => handleAreaChange(area?.key, 'revisor', e?.target?.value)}\r\n                              placeholder=\"Nombre del revisor\"\r\n                              size=\"sm\"\r\n                            />\r\n                          </div>\r\n                          <div className=\"flex items-end\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                id={`reviewed-${area?.key}`}\r\n                                checked={reviewData?.areasRevision?.[area?.key]?.revisado}\r\n                                onChange={(e) => handleAreaChange(area?.key, 'revisado', e?.target?.checked)}\r\n                                className=\"rounded border-border\"\r\n                              />\r\n                              <label htmlFor={`reviewed-${area?.key}`} className=\"text-sm\">\r\n                                Revisado\r\n                              </label>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Comments */}\r\n                        <div>\r\n                          <label className=\"text-sm font-medium mb-1 block\">Comentarios</label>\r\n                          <textarea\r\n                            value={reviewData?.areasRevision?.[area?.key]?.comentarios}\r\n                            onChange={(e) => handleAreaChange(area?.key, 'comentarios', e?.target?.value)}\r\n                            placeholder=\"Comentarios y observaciones...\"\r\n                            rows={2}\r\n                            className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Overall Comments */}\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-medium\">Comentarios Generales</label>\r\n                <textarea\r\n                  value={overallComments}\r\n                  onChange={(e) => setOverallComments(e?.target?.value)}\r\n                  placeholder=\"Comentarios generales sobre la cotizaci√≥n...\"\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 text-sm border border-border rounded-md bg-background resize-none\"\r\n                />\r\n              </div>\r\n\r\n              {/* Review Actions */}\r\n              <div className=\"flex items-center justify-between pt-4 border-t border-border\">\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {reviewData?.approvedDate && (\r\n                    <p>Aprobada el {reviewData?.approvedDate} por {reviewData?.approvedBy}</p>\r\n                  )}\r\n                  {reviewData?.submittedDate && reviewData?.status !== 'approved' && (\r\n                    <p>Enviada para revisi√≥n el {reviewData?.submittedDate}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"flex space-x-2\">\r\n                  {reviewData?.status === 'pending' && (\r\n                    <Button\r\n                      onClick={handleSubmitForReview}\r\n                      iconName=\"Send\"\r\n                      iconPosition=\"left\"\r\n                    >\r\n                      Enviar para Revisi√≥n\r\n                    </Button>\r\n                  )}\r\n                  \r\n                  {reviewData?.status === 'in-review' && (\r\n                    <>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => onSubmitReview?.({ ...reviewData, status: 'rejected' })}\r\n                        iconName=\"X\"\r\n                        iconPosition=\"left\"\r\n                      >\r\n                        Rechazar\r\n                      </Button>\r\n                      <Button\r\n                        onClick={handleApproveReview}\r\n                        iconName=\"CheckCircle\"\r\n                        iconPosition=\"left\"\r\n                      >\r\n                        Aprobar\r\n                      </Button>\r\n                    </>\r\n                  )}\r\n\r\n                  {reviewData?.status === 'approved' && (\r\n                    <div className=\"flex items-center space-x-2 text-green-600\">\r\n                      <Icon name=\"CheckCircle\" size={16} />\r\n                      <span className=\"text-sm font-medium\">Cotizaci√≥n aprobada</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Review Guidelines */}\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                <div className=\"flex items-center space-x-2 mb-2\">\r\n                  <Icon name=\"Info\" size={16} className=\"text-blue-600\" />\r\n                  <span className=\"font-medium text-blue-800\">Criterios de Revisi√≥n</span>\r\n                </div>\r\n                <ul className=\"text-sm text-blue-700 space-y-1\">\r\n                  <li>‚Ä¢ Verificar competitividad de precios en el mercado</li>\r\n                  <li>‚Ä¢ Validar que el alcance est√© completo y bien definido</li>\r\n                  <li>‚Ä¢ Confirmar que los tiempos de ejecuci√≥n sean realistas</li>\r\n                  <li>‚Ä¢ Revisar viabilidad t√©cnica de la soluci√≥n propuesta</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          );\r\n        };\r\n\r\n        export default InternalReview;","import { useNotifications } from '../../../context/NotificationContext';\r\nimport useQuotation from '../../../hooks/useQuotation';\r\nimport useClient from '../../../hooks/useClient';\r\nimport React, { useState } from 'react';\r\nimport { useOpportunity } from '../../../hooks/useOpportunity';\r\nimport { useEstados, useMunicipios } from '../../../hooks/useEstado';\r\nimport useProyecto from '../../../hooks/useProyect';\r\nimport usePerson from '../../../hooks/usePerson';\r\nimport Icon from '../../../components/AppIcon';\r\n\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nimport Select from '../../../components/ui/Select';\r\n\r\n// Formatea el presupuesto solo con separadores de miles y decimales\r\nfunction formatearNumero(valor) {\r\n  if (valor === null || valor === undefined || isNaN(Number(valor))) return '';\r\n  // Si es n√∫mero, convertir a string\r\n  let valorStr = typeof valor === 'string' ? valor : String(valor);\r\n  const partes = valorStr.split('.');\r\n  let entero = partes[0];\r\n  let decimal = partes[1] || '';\r\n  entero = Number(entero).toLocaleString('es-MX');\r\n  if (decimal.length > 0) {\r\n    return `${entero}.${decimal}`;\r\n  }\r\n  return entero;\r\n}\r\n\r\n// Formatea el presupuesto como dinero MXN\r\nfunction formatearDinero(valor) {\r\n  if (!valor || isNaN(Number(valor))) return '';\r\n  return Number(valor).toLocaleString('es-MX', { style: 'currency', currency: 'MXN' });\r\n}\r\n\r\nconst NewQuotationModal = ({ isOpen, onClose, onCreateQuotation }) => {\r\n  React.useEffect(() => {\r\n    const handler = () => {\r\n      setIsFromOpportunity(true);\r\n    };\r\n    window.addEventListener('setNewQuotationModalFromOpportunity', handler);\r\n    return () => window.removeEventListener('setNewQuotationModalFromOpportunity', handler);\r\n  }, []);\r\n  React.useEffect(() => {\r\n    const handler = () => {\r\n      resetModalState();\r\n    };\r\n    window.addEventListener('resetNewQuotationModal', handler);\r\n    return () => window.removeEventListener('resetNewQuotationModal', handler);\r\n  }, []);\r\n  // Obtener el ID de oportunidad de los par√°metros de URL\r\n  const [opportunityId] = useState(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    return params.get('opportunityId');\r\n  });\r\n\r\n  // Hooks para obtener oportunidades, clientes y proyectos\r\n  const { oportunidades } = useOpportunity();\r\n  // Solo una declaraci√≥n de los hooks para evitar errores\r\n  const proyectoHook = useProyecto();\r\n  const clientHook = useClient();\r\n  const proyectos = proyectoHook.proyectos;\r\n  const getProyectos = proyectoHook.getProyectos;\r\n  const loadingProyectos = proyectoHook.loading;\r\n  const clients = clientHook.clients;\r\n  const getClients = clientHook.getClients;\r\n  const loadingClients = clientHook.loading;\r\n\r\n  // Buscar la oportunidad actual\r\n  const currentOpportunity = React.useMemo(() => {\r\n    return oportunidades?.find(o => String(o.id) === String(opportunityId));\r\n  }, [oportunidades, opportunityId]);\r\n\r\n  // Buscar cliente y proyecto por id\r\n  const currentClient = React.useMemo(() => {\r\n    if (!currentOpportunity?.clienteId) return null;\r\n    return clients?.find(c => String(c.id) === String(currentOpportunity.clienteId) || String(c._id) === String(currentOpportunity.clienteId));\r\n  }, [clients, currentOpportunity]);\r\n\r\n  const currentProject = React.useMemo(() => {\r\n    if (!currentOpportunity?.proyectoId) return null;\r\n    return proyectos?.find(p => String(p.id) === String(currentOpportunity.proyectoId) || String(p._id) === String(currentOpportunity.proyectoId));\r\n  }, [proyectos, currentOpportunity]);\r\n\r\n  // Precargar datos en el formulario solo como informaci√≥n\r\n  // Estado inicial del formulario\r\n  const initialFormData = {\r\n    clienteId: '',\r\n    nombreCliente: '',\r\n    proyectoId: '',\r\n    nombreProyecto: '',\r\n    personalAsignadoId: '',\r\n    asignadoA: '',\r\n    personaContacto: '',\r\n    telefono: '',\r\n    email: '',\r\n    descripcionProyecto: '',\r\n    estado: '',\r\n    municipio: '',\r\n    direccion: '',\r\n    montoTotal: '',\r\n    cronograma: '',\r\n    prioridad: 'media',\r\n    tipoProyecto: 'hvac',\r\n    notas: '',\r\n    oportunidadVentaId: ''\r\n  };\r\n\r\n  const [formData, setFormData] = useState({ ...initialFormData, oportunidadVentaId: opportunityId || '' });\r\n  const [isFromOpportunity, setIsFromOpportunity] = useState(false);\r\n\r\n  // Funci√≥n para resetear el estado del modal y formulario\r\n  const resetModalState = () => {\r\n    setFormData({ ...initialFormData, oportunidadVentaId: '' });\r\n    setIsFromOpportunity(false);\r\n  };\r\n\r\n  // Al cerrar el modal, limpiar estado\r\n  const handleClose = () => {\r\n    resetModalState();\r\n    if (onClose) onClose();\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    // Si el modal se abre y no viene de oportunidad, resetea el estado\r\n    if (isOpen && !isFromOpportunity) {\r\n      resetModalState();\r\n    }\r\n    // Si hay oportunidad y los IDs existen, simula la selecci√≥n manual\r\n    if (currentOpportunity && currentOpportunity.clienteId && currentOpportunity.proyectoId) {\r\n      setIsFromOpportunity(true);\r\n      const selectedClient = clients?.find(c => String(c.id) === String(currentOpportunity.clienteId) || String(c._id) === String(currentOpportunity.clienteId));\r\n      const selectedProject = proyectos?.find(p => String(p.id) === String(currentOpportunity.proyectoId) || String(p._id) === String(currentOpportunity.proyectoId));\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        clienteId: selectedClient?.id || '',\r\n        nombreCliente: selectedClient?.empresa || selectedClient?.nombre || selectedClient?.razonSocial || selectedClient?.name || '',\r\n        proyectoId: selectedProject?.id || '',\r\n        nombreProyecto: selectedProject?.nombreProyecto || selectedProject?.nombre || selectedProject?.proyectoNombre || selectedProject?.codigo || '',\r\n        personaContacto: currentOpportunity?.contactInfo?.contactPerson || '',\r\n        telefono: currentOpportunity?.contactInfo?.phone || '',\r\n        email: currentOpportunity?.contactInfo?.email || '',\r\n        descripcionProyecto: currentOpportunity?.projectDetails?.description || '',\r\n        montoTotal: currentOpportunity?.projectDetails?.estimatedBudget?.toString() || '',\r\n        cronograma: currentOpportunity?.projectDetails?.timeline || '',\r\n        prioridad: currentOpportunity?.priority || 'media',\r\n        oportunidadVentaId: currentOpportunity?.id || ''\r\n      }));\r\n    }\r\n  }, [isOpen, currentOpportunity, clients, proyectos, isFromOpportunity]);\r\n\r\n  // ...eliminado, ahora el estado se inicializa arriba...\r\n\r\n  // Proyectos y clientes: ya declarados arriba, solo ejecuta la carga\r\n  React.useEffect(() => {\r\n    getProyectos();\r\n    getClients();\r\n  }, []);\r\n\r\n  // Estados y municipios (hooks llamados una sola vez)\r\n  const { estados, loading: loadingEstados, error: errorEstados } = useEstados();\r\n  const { municipios, loading: loadingMunicipios, error: errorMunicipios } = useMunicipios(formData.estado);\r\n\r\n  // Mostrar en consola c√≥mo se obtienen los estados y municipios\r\n  React.useEffect(() => {\r\n  // console.log eliminado\r\n  }, [estados, municipios, formData.estado]);\r\n  // Opciones para el select de proyectos (con clientId)\r\n  const projectOptions = proyectos?.map(p => ({\r\n    value: p.id || p._id || p.codigo || p.nombreProyecto,\r\n    label: p.nombreProyecto || p.codigo,\r\n    clientId: p.cliente?.id || p.cliente?.id || p.cliente || ''\r\n  })) || [];\r\n\r\n  // Funci√≥n para obtener el nombre del cliente por id\r\n  const getClientNameById = (id) => {\r\n    if (!id || !clients) return '';\r\n    // Buscar por id, _id, y tambi√©n comparar como string\r\n    const found = clients.find(c => String(c.id) === String(id) || String(c._id) === String(id));\r\n    // Mostrar empresa si existe, si no nombre, si no razonSocial, si no name\r\n  return found?.empresa || found?.nombre || found?.razonSocial || found?.name || id || '';\r\n  };\r\n\r\n  // Cuando cambia el proyecto seleccionado, actualizar el cliente\r\n  const handleProjectChange = (value) => {\r\n    const selected = projectOptions.find(opt => opt.value === value);\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      proyectoId: selected?.value || '',\r\n      nombreProyecto: selected?.label || value,\r\n      clienteId: selected?.clientId || '',\r\n      nombreCliente: getClientNameById(selected?.clientId)\r\n    }));\r\n    // Limpiar error si lo hay\r\n    if (errors?.projectName) setErrors(prev => ({ ...prev, projectName: '' }));\r\n  };\r\n\r\n  // Cuando cambia el proyecto seleccionado, actualizar el cliente\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n\r\n  // Hook para cargar empleados\r\n  const { persons, getPersons, loading: loadingEmployees } = usePerson();\r\n  React.useEffect(() => { getPersons(); /* solo una vez */ }, []);\r\n  const assignedToOptions = persons?.map((emp, idx) => {\r\n    const idValue = emp.empleadoId || emp.id || `${idx}`;\r\n    const uniqueValue = `${idValue}_${idx}`;\r\n    return {\r\n      value: uniqueValue,\r\n      label: emp.nombreCompleto || emp.nombre || emp.empleadoId || emp.id,\r\n      key: uniqueValue\r\n    };\r\n  }) || [];\r\n\r\n  const handleInputChange = (field, value) => {\r\n    // Formateo visual para el campo montoTotal (presupuesto)\r\n    if (field === 'montoTotal') {\r\n      let cleanValue = value.replace(/[^\\d.]/g, '');\r\n      if (cleanValue.includes('.')) {\r\n        const [intPart, decPart] = cleanValue.split('.');\r\n        cleanValue = intPart + '.' + decPart.slice(0,2);\r\n      }\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    } else if (field === 'telefono') {\r\n      let cleanValue = value.replace(/\\D/g, '').slice(0, 10);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: cleanValue\r\n      }));\r\n    } else if (field === 'asignadoA') {\r\n      // Guardar id y nombre como antes\r\n      const selected = assignedToOptions.find(opt => opt.value === value);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        personalAsignadoId: selected?.value || '',\r\n        asignadoA: selected?.label || value\r\n      }));\r\n    } else {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [field]: value\r\n      }));\r\n    }\r\n\r\n    // Clear error when user starts typing\r\n    if (errors?.[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData?.nombreCliente?.trim()) {\r\n      newErrors.nombreCliente = 'El nombre del cliente es requerido';\r\n    }\r\n\r\n    if (!formData?.nombreProyecto?.trim()) {\r\n      newErrors.nombreProyecto = 'El nombre del proyecto es requerido';\r\n    }\r\n\r\n    if (!formData?.personaContacto?.trim()) {\r\n      newErrors.personaContacto = 'La persona de contacto es requerida';\r\n    }\r\n\r\n    if (!formData?.telefono?.trim()) {\r\n      newErrors.telefono = 'El tel√©fono es requerido';\r\n    } else if (!/^\\d{10}$/.test(formData?.telefono)) {\r\n      newErrors.telefono = 'El tel√©fono debe tener exactamente 10 d√≠gitos num√©ricos';\r\n    }\r\n\r\n    if (!formData?.email?.trim()) {\r\n      newErrors.email = 'El email es requerido';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/?.test(formData?.email)) {\r\n      newErrors.email = 'El formato del email no es v√°lido';\r\n    }\r\n\r\n    if (!formData?.descripcionProyecto?.trim()) {\r\n      newErrors.descripcionProyecto = 'La descripci√≥n del proyecto es requerida';\r\n    }\r\n\r\n    if (!formData?.estado?.trim()) {\r\n      newErrors.estado = 'El estado es requerido';\r\n    }\r\n    if (!formData?.municipio?.trim()) {\r\n      newErrors.municipio = 'El municipio es requerido';\r\n    }\r\n    if (!formData?.direccion?.trim()) {\r\n      newErrors.direccion = 'La direcci√≥n es requerida';\r\n    }\r\n\r\n    let montoTotalStr = typeof formData?.montoTotal === 'string' ? formData?.montoTotal : String(formData?.montoTotal ?? '');\r\n    if (!montoTotalStr.trim()) {\r\n      newErrors.montoTotal = 'El presupuesto estimado es requerido';\r\n    }\r\n\r\n    if (!formData?.cronograma?.trim()) {\r\n      newErrors.cronograma = 'El cronograma es requerido';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors)?.length === 0;\r\n  };\r\n\r\n  const generateQuotationId = () => {\r\n    const timestamp = Date.now();\r\n    const random = Math.floor(Math.random() * 1000);\r\n    return `COT-${new Date()?.getFullYear()}-${timestamp?.toString()?.slice(-3)}${random?.toString()?.padStart(3, '0')}`;\r\n  };\r\n\r\n  const { createQuotation, loading: loadingQuotation, error: errorQuotation } = useQuotation();\r\n  const { showOperationSuccess } = useNotifications();\r\n  const { actualizarOportunidad } = useOpportunity();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validateForm()) return;\r\n    setIsSubmitting(true);\r\n    try {\r\n      // Buscar el proyecto seleccionado para obtener los objetos completos\r\n      const proyectoSeleccionado = proyectos?.find(p => String(p.id) === String(formData?.proyectoId) || String(p._id) === String(formData?.proyectoId));\r\n  \r\n      let montoTotal = 0;\r\n      if (proyectoSeleccionado?.presupuesto && typeof proyectoSeleccionado?.presupuesto === 'object') {\r\n        montoTotal = Object.values(proyectoSeleccionado.presupuesto).reduce((acc, val) => acc + (typeof val === 'number' ? val : 0), 0);\r\n      } else if (typeof proyectoSeleccionado?.presupuesto === 'number') {\r\n        montoTotal = proyectoSeleccionado.presupuesto;\r\n      } else if (formData?.montoTotal && !isNaN(Number(formData.montoTotal))) {\r\n        montoTotal = Number(formData.montoTotal);\r\n      }\r\n      // Formatear tiempoEjecucion como string\r\n      let tiempoEjecucion = '';\r\n      const cronograma = proyectoSeleccionado?.cronograma || formData?.cronograma || null;\r\n      if (cronograma && typeof cronograma === 'object' && cronograma.fechaInicio && cronograma.fechaFin) {\r\n        tiempoEjecucion = `${cronograma.fechaInicio} a ${cronograma.fechaFin}`;\r\n      } else if (typeof cronograma === 'string') {\r\n        tiempoEjecucion = cronograma;\r\n      } else {\r\n        tiempoEjecucion = '';\r\n      }\r\n      // Payload adaptado a la estructura esperada por el backend\r\n      const ubicacionStr = [formData?.direccion, formData?.municipio, formData?.estado].filter(Boolean).join(', ');\r\n      // Normalizar prioridad\r\n      const PRIORIDADES_VALIDAS = ['urgente', 'alta', 'media', 'baja'];\r\n      let prioridadValue = (formData?.prioridad || '').toLowerCase();\r\n      if (!PRIORIDADES_VALIDAS.includes(prioridadValue)) {\r\n        prioridadValue = 'media';\r\n      }\r\n\r\n      const quotationPayload = {\r\n        // Campos requeridos en el nivel ra√≠z\r\n        nombreCliente: formData?.nombreCliente?.trim(),\r\n        clienteId: formData?.clienteId,\r\n        proyectoId: formData?.proyectoId,\r\n        nombreProyecto: formData?.nombreProyecto?.trim(),\r\n        ubicacion: {\r\n          estado: formData?.estado?.trim() ? formData?.estado?.trim() : null,\r\n          municipio: formData?.municipio?.trim() ? formData?.municipio?.trim() : null,\r\n          direccion: formData?.direccion?.trim() ? formData?.direccion?.trim() : null\r\n        },\r\n        presupuestoEstimado: montoTotal,\r\n        tiempoEjecucion: tiempoEjecucion,\r\n        personaContacto: formData?.personaContacto?.trim(),\r\n        telefono: formData?.telefono?.trim(),\r\n        email: formData?.email?.trim(),\r\n        descripcionProyecto: formData?.descripcionProyecto?.trim(),\r\n        Responsable: formData?.asignadoA,\r\n        idResponsable: formData?.personalAsignadoId,\r\n        notas: formData?.notas?.trim() ? formData?.notas?.trim() : null,\r\n        prioridad: prioridadValue,\r\n        // Estructura anidada para compatibilidad\r\n        informacion_basica: {\r\n          cliente: [\r\n            { id_cliente: formData?.clienteId },\r\n            { nombre_cliente: formData?.nombreCliente?.trim() }\r\n          ],\r\n          proyecto: [\r\n            { id_proyecto: formData?.proyectoId },\r\n            { nombre_proyecto: formData?.nombreProyecto?.trim() }\r\n          ],\r\n          prioridad: prioridadValue,\r\n          tipo_proyecto: formData?.tipoProyecto\r\n        },\r\n        informacion_contacto: [\r\n          {\r\n            persona_contacto1: [\r\n              {\r\n                Persona_de_contacto_nombre: formData?.personaContacto?.trim(),\r\n                telefono: formData?.telefono?.trim(),\r\n                email: formData?.email?.trim()\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        detalles_proyecto: {\r\n          descripcion_proyecto: formData?.descripcionProyecto?.trim() || null,\r\n          ubicacion_proyecto: [\r\n            {\r\n              estado: formData?.estado?.trim() ? formData?.estado?.trim() : null,\r\n              municipio: formData?.municipio?.trim() ? formData?.municipio?.trim() : null,\r\n              direccion: formData?.direccion?.trim() ? formData?.direccion?.trim() : null\r\n            }\r\n          ],\r\n          presupuesto_estimado_mxn: montoTotal,\r\n          tiempo_ejecucion: tiempoEjecucion\r\n        },\r\n        asignacion: {\r\n          responsables: formData?.personalAsignadoId && formData?.asignadoA\r\n            ? [\r\n                {\r\n                  id: formData?.personalAsignadoId,\r\n                  nombre: formData?.asignadoA\r\n                }\r\n              ]\r\n            : [],\r\n          notas_adicionales: formData?.notas?.trim() ? formData?.notas?.trim() : null\r\n        },\r\n        oportunidadVentaId: formData?.oportunidadVentaId || opportunityId || ''\r\n      };\r\n  // console.log eliminado\r\n      const response = await createQuotation(quotationPayload);\r\n      const wasCreated = response?.success || response?.id || response?.data?.id;\r\n      if (wasCreated) {\r\n        showOperationSuccess('Cotizaci√≥n creada exitosamente');\r\n        \r\n        // Si viene de una oportunidad, mantener el estado y redirigir\r\n        if (opportunityId) {\r\n          // Limpiar completamente el estado del modal\r\n          resetModalState();\r\n          // Redirigir a oportunidades con mensaje de √©xito\r\n          window.location.href = '/oportunidades?cotizacionCreada=true';\r\n          return;\r\n        }\r\n        \r\n        // Flujo normal si no viene de oportunidad\r\n        onCreateQuotation?.(response.data || response);\r\n        handleClose();\r\n      } else {\r\n        showOperationSuccess('Error al crear la cotizaci√≥n');\r\n      }\r\n    } catch (error) {\r\n      alert('Error al crear la cotizaci√≥n');\r\n      if (error?.response?.data) {\r\n        console.error('Error detalle backend:', error.response.data);\r\n      } else {\r\n        console.error('Error creating quotation:', error);\r\n      }\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"fixed inset-0 bg-black/50 transition-opacity\" \r\n        onClick={handleClose}\r\n      />\r\n      {/* Modal */}\r\n      <div className=\"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Nueva Cotizaci√≥n</h2>\r\n            <p className=\"text-sm text-muted-foreground mt-1\">\r\n              Crear una nueva cotizaci√≥n de proyecto\r\n            </p>\r\n          </div>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            iconName=\"X\"\r\n            onClick={handleClose}\r\n            disabled={isSubmitting}\r\n          />\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"overflow-y-auto max-h-[calc(90vh-140px)]\">\r\n          <div className=\"p-6 space-y-6\">\r\n            {/* Basic Information */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"FileText\" size={18} className=\"mr-2\" />\r\n                Informaci√≥n B√°sica\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {/* Cliente: select si no hay oportunidad, input deshabilitado si hay oportunidad */}\r\n                {opportunityId ? (\r\n                  <Input\r\n                    label=\"Nombre del Cliente\"\r\n                    required\r\n                    value={formData?.nombreCliente}\r\n                    disabled\r\n                    error={errors?.nombreCliente}\r\n                    placeholder=\"Cliente del proyecto seleccionado\"\r\n                  />\r\n                ) : (\r\n                  <Select\r\n                    label=\"Cliente\"\r\n                    required\r\n                    value={formData?.clienteId}\r\n                    onChange={value => {\r\n                      const selectedClient = clients?.find(c => String(c.id) === String(value) || String(c._id) === String(value));\r\n                      setFormData(prev => ({\r\n                        ...prev,\r\n                        clienteId: value,\r\n                        nombreCliente: getClientNameById(value),\r\n                        proyectoId: '',\r\n                        nombreProyecto: '',\r\n                        personaContacto: selectedClient?.contacto || '',\r\n                        telefono: selectedClient?.telefono || '',\r\n                        email: selectedClient?.email || ''\r\n                      }));\r\n                    }}\r\n                    options={clients?.map(c => ({ value: c.id || c._id, label: c.empresa || c.nombre || c.razonSocial || c.name }))}\r\n                    isLoading={loadingClients}\r\n                    error={errors?.nombreCliente}\r\n                    placeholder={loadingClients ? 'Cargando clientes...' : 'Selecciona un cliente'}\r\n                  />\r\n                )}\r\n\r\n                {/* Proyecto: select si no hay oportunidad, input deshabilitado si hay oportunidad */}\r\n                {opportunityId ? (\r\n                  <Input\r\n                    label=\"Nombre del Proyecto\"\r\n                    required\r\n                    value={formData?.nombreProyecto}\r\n                    disabled\r\n                    error={errors?.nombreProyecto}\r\n                    placeholder=\"Proyecto relacionado a la oportunidad\"\r\n                  />\r\n                ) : (\r\n                    <Select\r\n                      label=\"Proyecto\"\r\n                      required\r\n                      value={formData?.proyectoId}\r\n                      onChange={value => {\r\n                        const selected = proyectos?.find(p => String(p.id) === String(value) || String(p._id) === String(value));\r\n                        // Precargar presupuesto total usando el nombre exacto\r\n                        let montoTotal = '';\r\n                        if (selected?.presupuesto && typeof selected.presupuesto === 'object') {\r\n                          montoTotal = selected.presupuesto.total || '';\r\n                        }\r\n                        // Precargar cronograma como rango de fechas usando el nombre exacto\r\n                        let cronograma = '';\r\n                        if (selected?.cronograma && typeof selected.cronograma === 'object') {\r\n                          if (selected.cronograma.fechaInicio && selected.cronograma.fechaFin) {\r\n                            cronograma = `${selected.cronograma.fechaInicio} a ${selected.cronograma.fechaFin}`;\r\n                          } else {\r\n                            cronograma = selected.cronograma.fechaInicio || selected.cronograma.fechaFin || '';\r\n                          }\r\n                        }\r\n                        setFormData(prev => ({\r\n                          ...prev,\r\n                          proyectoId: value,\r\n                          nombreProyecto: selected?.nombre || selected?.nombreProyecto || selected?.proyectoNombre || '',\r\n                          descripcionProyecto: selected?.descripcion || selected?.descripcionProyecto || '',\r\n                          ubicacion: selected?.ubicacion || '',\r\n                          montoTotal: montoTotal,\r\n                          cronograma: cronograma\r\n                        }));\r\n                      }}\r\n                      options={proyectos?.filter(p => String(p.cliente?.id) === String(formData.clienteId)).map(p => ({ value: p.id || p._id, label: p.nombre || p.nombreProyecto || p.proyectoNombre }))}\r\n                      isLoading={loadingProyectos}\r\n                      error={errors?.nombreProyecto}\r\n                      placeholder={formData.clienteId ? (loadingProyectos ? 'Cargando proyectos...' : 'Selecciona un proyecto') : 'Selecciona primero un cliente'}\r\n                      disabled={!formData.clienteId}\r\n                    />\r\n                )}\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Prioridad <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.prioridad}\r\n                    onChange={(value) => handleInputChange('prioridad', value)}\r\n                    options={[\r\n                      { value: 'urgente', label: 'Urgente' },\r\n                      { value: 'alta', label: 'Alta' },\r\n                      { value: 'media', label: 'Media' },\r\n                      { value: 'baja', label: 'Baja' }\r\n                    ]}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Tipo de Proyecto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.tipoProyecto}\r\n                    onChange={(value) => handleInputChange('tipoProyecto', value)}\r\n                    options={[\r\n                      { value: 'hvac', label: 'Sistema HVAC' },\r\n                      { value: 'instalacion', label: 'Instalaci√≥n' },\r\n                      { value: 'mantenimiento', label: 'Mantenimiento' },\r\n                      { value: 'modernizacion', label: 'Modernizaci√≥n' }\r\n                    ]}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Contact Information */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Users\" size={18} className=\"mr-2\" />\r\n                Informaci√≥n de Contacto\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <Input\r\n                  label=\"Persona de Contacto\"\r\n                  required\r\n                  value={formData?.personaContacto}\r\n                  onChange={(e) => handleInputChange('personaContacto', e?.target?.value)}\r\n                  error={errors?.personaContacto}\r\n                  placeholder=\"Ej. Ing. Carlos Rodriguez\"\r\n                />\r\n\r\n                <Input\r\n                  label=\"Tel√©fono\"\r\n                  required\r\n                  value={formData?.telefono}\r\n                  onChange={(e) => handleInputChange('telefono', e?.target?.value)}\r\n                  error={errors?.telefono}\r\n                  placeholder=\"+52 55 1234 5678\"\r\n                />\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <Input\r\n                    label=\"Email\"\r\n                    type=\"email\"\r\n                    required\r\n                    value={formData?.email}\r\n                    onChange={(e) => handleInputChange('email', e?.target?.value)}\r\n                    error={errors?.email}\r\n                    placeholder=\"contacto@empresa.com\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Project Details */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"Settings\" size={18} className=\"mr-2\" />\r\n                Detalles del Proyecto\r\n              </h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Descripci√≥n del Proyecto <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <textarea\r\n                    className=\"mt-2 flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[100px]\"\r\n                    value={formData?.descripcionProyecto}\r\n                    onChange={(e) => handleInputChange('descripcionProyecto', e?.target?.value)}\r\n                    placeholder=\"Describe el alcance y especificaciones del proyecto...\"\r\n                  />\r\n                  {errors?.projectDescription && (\r\n                    <p className=\"text-sm text-destructive mt-1\">{errors?.projectDescription}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 items-center\">\r\n                  <div className=\"flex flex-col justify-end h-full\">\r\n                    <Select\r\n                      label={<>Estado <span className=\"text-destructive\">*</span></>}\r\n                      value={formData.estado}\r\n                      onChange={value => {\r\n                        handleInputChange('estado', value);\r\n                        handleInputChange('municipio', '');\r\n                      }}\r\n                      options={\r\n                        estados ? [{ value: '', label: 'Selecciona un estado' }, ...estados.map(e => ({ value: e.code, label: e.name }))] : []\r\n                      }\r\n                      loading={loadingEstados}\r\n                      error={errors?.estado}\r\n                      required\r\n                      disabled={loadingEstados || !!errorEstados}\r\n                      placeholder={loadingEstados ? 'Cargando estados...' : 'Selecciona un estado'}\r\n                      searchable\r\n                      className=\"h-12 md:h-14 w-full text-base\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex flex-col justify-end h-full\">\r\n                    <Select\r\n                      label={<>Municipio <span className=\"text-destructive\">*</span></>}\r\n                      value={formData.municipio}\r\n                      onChange={value => handleInputChange('municipio', value)}\r\n                      options={\r\n                        formData.estado === ''\r\n                          ? [{ value: '', label: 'Selecciona un estado primero' }]\r\n                          : loadingMunicipios\r\n                            ? [{ value: '', label: 'Cargando municipios...' }]\r\n                            : errorMunicipios\r\n                              ? [{ value: '', label: 'Error al cargar municipios' }]\r\n                              : [{ value: '', label: 'Selecciona un municipio' }, ...(municipios ? Object.values(municipios.municipios || {}).map((m, idx) => ({ value: m, label: m })) : [])]\r\n                      }\r\n                      loading={loadingMunicipios}\r\n                      error={errors?.municipio}\r\n                      required\r\n                      disabled={formData.estado === '' || loadingMunicipios || !!errorMunicipios}\r\n                      placeholder={formData.estado === '' ? 'Selecciona un estado primero' : loadingMunicipios ? 'Cargando municipios...' : 'Selecciona un municipio'}\r\n                      searchable\r\n                      className=\"h-12 md:h-14 w-full text-base\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-4\">\r\n                  <Input\r\n                    label=\"Direcci√≥n\"\r\n                    required\r\n                    value={formData?.direccion}\r\n                    onChange={(e) => handleInputChange('direccion', e?.target?.value)}\r\n                    error={errors?.direccion}\r\n                    placeholder=\"Direcci√≥n completa\"\r\n                    className=\"h-12 md:h-14 w-full text-base\"\r\n                  />\r\n                  <Input\r\n                    label=\"Presupuesto Estimado (MXN)\"\r\n                    type=\"text\"\r\n                    required\r\n                    value={formatearNumero(formData?.montoTotal)}\r\n                    onChange={(e) => handleInputChange('montoTotal', e?.target?.value)}\r\n                    error={errors?.montoTotal}\r\n                    placeholder=\"$0.00 MXN\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    className=\"h-12 md:h-14 w-full text-base\"\r\n                  />\r\n                </div>\r\n\r\n                <Input\r\n                  label=\"Tiempo de Ejecuci√≥n\"\r\n                  required\r\n                  value={formData?.cronograma}\r\n                  onChange={(e) => handleInputChange('cronograma', e?.target?.value)}\r\n                  error={errors?.cronograma}\r\n                  placeholder=\"Ej. 16 semanas, 3 meses\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Assignment */}\r\n            <div>\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4 flex items-center\">\r\n                <Icon name=\"UserCheck\" size={18} className=\"mr-2\" />\r\n                Asignaci√≥n\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-foreground\">\r\n                    Responsable <span className=\"text-destructive\">*</span>\r\n                  </label>\r\n                  <Select\r\n                    value={formData?.personalAsignadoId}\r\n                    onChange={(value) => handleInputChange('asignadoA', value)}\r\n                    options={assignedToOptions}\r\n                    isLoading={loadingEmployees}\r\n                    placeholder={loadingEmployees ? 'Cargando empleados...' : 'Selecciona un responsable'}\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"text-sm font-medium text-foreground\">Notas Adicionales</label>\r\n                  <textarea\r\n                    className=\"mt-2 flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 min-h-[80px]\"\r\n                    value={formData?.notas}\r\n                    onChange={(e) => handleInputChange('notas', e?.target?.value)}\r\n                    placeholder=\"Informaci√≥n adicional relevante para la cotizaci√≥n...\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"flex items-center justify-end space-x-4 p-6 border-t bg-gray-50 dark:bg-gray-800/50\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={handleClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              iconName={isSubmitting ? \"Loader2\" : \"Plus\"}\r\n              iconPosition=\"left\"\r\n              className={isSubmitting ? \"animate-spin\" : \"\"}\r\n            >\r\n              {isSubmitting ? 'Creando...' : 'Crear Cotizaci√≥n'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewQuotationModal;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport QuotationBuilder from './components/QuotationBuilder';\r\nimport MaterialRiskChecklist from './components/MaterialRiskChecklist';\r\nimport QuotationPreview from './components/QuotationPreview';\r\nimport ClientCommunication from './components/ClientCommunication';\r\nimport RevisionHistory from './components/RevisionHistory';\r\nimport InternalReview from './components/InternalReview';\r\nimport NewQuotationModal from './components/NewQuotationModal';\r\nimport useQuotation from '../../hooks/useQuotation';\r\n\r\nconst QuotationDevelopmentCenter = () => {\r\n  const [quotations, setQuotations] = useState([]);\r\n  const [selectedQuotation, setSelectedQuotation] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState('builder');\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n  const [isNewQuotationModalOpen, setIsNewQuotationModalOpen] = useState(false);\r\n  \r\n  // Verificar par√°metros de URL al cargar\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const opportunityId = params.get('opportunityId');\r\n    const newQuotation = params.get('newQuotation');\r\n    if (opportunityId && newQuotation === 'true') {\r\n      window.dispatchEvent(new CustomEvent('setNewQuotationModalFromOpportunity'));\r\n      setIsNewQuotationModalOpen(true);\r\n    }\r\n  }, []);\r\n\r\n  const { getCotizaciones, getCotizacionById } = useQuotation();\r\n\r\n  useEffect(() => {\r\n    const fetchQuotations = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const response = await getCotizaciones();\r\n  // console.log eliminado\r\n        const cotizaciones = Array.isArray(response.data?.data) ? response.data.data : [];\r\n  // console.log eliminado\r\n        // Mapeo adaptado a la estructura real del backend\r\n        const mapped = cotizaciones.map(cotizacion => ({\r\n          id: cotizacion.id || '', // id de Cosmos\r\n          folio: cotizacion.folio || '', // folio\r\n          clientId: cotizacion.informacion_basica?.cliente?.find?.(c => 'id_cliente' in c)?.id_cliente || '',\r\n          clientName: cotizacion.informacion_basica?.cliente?.find?.(c => c?.nombre_cliente)?.nombre_cliente || '',\r\n          projectId: cotizacion.informacion_basica?.proyecto?.find?.(p => 'id_proyecto' in p)?.id_proyecto || '',\r\n          projectName: cotizacion.informacion_basica?.proyecto?.find?.(p => p?.nombre_proyecto)?.nombre_proyecto || '',\r\n          projectType: cotizacion.informacion_basica?.tipo_proyecto || '',\r\n          description: cotizacion.detalles_proyecto?.descripcion_proyecto || '',\r\n          location: cotizacion.detalles_proyecto?.ubicacion_proyecto?.[0] || {},\r\n          executionTime: cotizacion.detalles_proyecto?.tiempo_ejecucion || '',\r\n          contactInfo: cotizacion.informacion_contacto?.[0]?.persona_contacto1?.[0] || {},\r\n          additionalNotes: cotizacion.asignacion?.notas_adicionales || '',\r\n          status: 'development',\r\n          createdDate: cotizacion.fechaCreacion ? new Date(cotizacion.fechaCreacion).toLocaleDateString('es-MX') : '',\r\n          lastModified: cotizacion.fechaActualizacion ? new Date(cotizacion.fechaActualizacion).toLocaleDateString('es-MX') : '',\r\n          assignedTo: cotizacion.asignacion?.responsables?.[0]?.nombre_responsable || '',\r\n          assignedToId: cotizacion.asignacion?.responsables?.[0]?.id_responsable || '',\r\n          priority: cotizacion.informacion_basica?.prioridad || 'media',\r\n          quotationData: {\r\n            totalAmount: cotizacion.detalles_proyecto?.presupuesto_estimado_mxn || 0\r\n          }\r\n        }));\r\n        setQuotations(mapped);\r\n      } catch (err) {\r\n        setQuotations([]);\r\n        console.error('Error al obtener cotizaciones:', err);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchQuotations();\r\n  }, []);\r\n\r\n  const handleCreateQuotation = (newQuotation) => {\r\n    // Extraer datos relevantes seg√∫n el formato recibido\r\n    const mappedQuotation = {\r\n      id: newQuotation?.folio || newQuotation?.id || '',\r\n      clientId: newQuotation?.informacion_basica?.cliente?.find?.(c => 'id_cliente' in c)?.id_cliente || '',\r\n      clientName: newQuotation?.informacion_basica?.cliente?.find?.(c => c?.nombre_cliente)?.nombre_cliente || '',\r\n      projectId: newQuotation?.informacion_basica?.proyecto?.find?.(p => 'id_proyecto' in p)?.id_proyecto || '',\r\n      projectName: newQuotation?.informacion_basica?.proyecto?.find?.(p => p?.nombre_proyecto)?.nombre_proyecto || '',\r\n      projectType: newQuotation?.informacion_basica?.tipo_proyecto || '',\r\n      description: newQuotation?.detalles_proyecto?.descripcion_proyecto || '',\r\n      location: newQuotation?.detalles_proyecto?.ubicacion_proyecto?.[0] || {},\r\n      executionTime: newQuotation?.detalles_proyecto?.tiempo_ejecucion || '',\r\n      contactInfo: newQuotation?.informacion_contacto?.[0]?.persona_contacto1?.[0] || {},\r\n      additionalNotes: newQuotation?.asignacion?.notas_adicionales || '',\r\n      status: 'development',\r\n      createdDate: newQuotation?.fechaCreacion ? new Date(newQuotation?.fechaCreacion).toLocaleDateString('es-MX') : new Date().toLocaleDateString('es-MX'),\r\n      lastModified: newQuotation?.fechaActualizacion ? new Date(newQuotation?.fechaActualizacion).toLocaleDateString('es-MX') : new Date().toLocaleDateString('es-MX'),\r\n      assignedTo: newQuotation?.asignacion?.responsables?.[0]?.nombre_responsable || '',\r\n      assignedToId: newQuotation?.asignacion?.responsables?.[0]?.id_responsable || '',\r\n      priority: newQuotation?.informacion_basica?.prioridad || 'media',\r\n      quotationData: {\r\n        totalAmount: newQuotation?.detalles_proyecto?.presupuesto_estimado_mxn || 0\r\n      }\r\n    };\r\n    setQuotations(prev => {\r\n      const updated = [mappedQuotation, ...prev];\r\n  // console.log eliminado\r\n      return updated;\r\n    });\r\n    setSelectedQuotation(mappedQuotation);\r\n    setActiveTab('builder');\r\n    setIsNewQuotationModalOpen(false);\r\n    // Limpiar el par√°metro newQuotation de la URL para evitar que se abra el modal tras recargar\r\n    const params = new URLSearchParams(window.location.search);\r\n    if (params.has('newQuotation')) {\r\n      params.delete('newQuotation');\r\n      window.history.replaceState({}, '', `${window.location.pathname}?${params.toString()}`);\r\n    }\r\n    // Recargar cotizaciones desde el backend para tener la lista actualizada\r\n    getCotizaciones().then(response => {\r\n      const cotizaciones = Array.isArray(response.data?.data) ? response.data.data : [];\r\n      const mapped = cotizaciones.map(cotizacion => ({\r\n        id: cotizacion.id || '',\r\n        folio: cotizacion.folio || '',\r\n        clientId: cotizacion.informacion_basica?.cliente?.find?.(c => 'id_cliente' in c)?.id_cliente || '',\r\n        clientName: cotizacion.informacion_basica?.cliente?.find?.(c => c?.nombre_cliente)?.nombre_cliente || '',\r\n        projectId: cotizacion.informacion_basica?.proyecto?.find?.(p => 'id_proyecto' in p)?.id_proyecto || '',\r\n        projectName: cotizacion.informacion_basica?.proyecto?.find?.(p => p?.nombre_proyecto)?.nombre_proyecto || '',\r\n        projectType: cotizacion.informacion_basica?.tipo_proyecto || '',\r\n        description: cotizacion.detalles_proyecto?.descripcion_proyecto || '',\r\n        location: cotizacion.detalles_proyecto?.ubicacion_proyecto?.[0] || {},\r\n        executionTime: cotizacion.detalles_proyecto?.tiempo_ejecucion || '',\r\n        contactInfo: cotizacion.informacion_contacto?.[0]?.persona_contacto1?.[0] || {},\r\n        additionalNotes: cotizacion.asignacion?.notas_adicionales || '',\r\n        status: 'development',\r\n        createdDate: cotizacion.fechaCreacion ? new Date(cotizacion.fechaCreacion).toLocaleDateString('es-MX') : '',\r\n        lastModified: cotizacion.fechaActualizacion ? new Date(cotizacion.fechaActualizacion).toLocaleDateString('es-MX') : '',\r\n        assignedTo: cotizacion.asignacion?.responsables?.[0]?.nombre_responsable || '',\r\n        assignedToId: cotizacion.asignacion?.responsables?.[0]?.id_responsable || '',\r\n        priority: cotizacion.informacion_basica?.prioridad || 'media',\r\n        quotationData: {\r\n          totalAmount: cotizacion.detalles_proyecto?.presupuesto_estimado_mxn || 0\r\n        }\r\n      }));\r\n      setQuotations(mapped);\r\n    });\r\n  };\r\n\r\n  const handleQuotationSelect = async (quotation) => {\r\n    setIsLoading(true);\r\n    try {\r\n      // Si el objeto ya tiene la estructura mapeada, √∫salo directamente\r\n      if (quotation.quotationData && quotation.projectName) {\r\n        setSelectedQuotation(quotation);\r\n      } else {\r\n        const quotationDetail = await getCotizacionById(quotation.id);\r\n        const mappedQuotation = {\r\n          id: quotationDetail.id || '', // id de Cosmos\r\n          folio: quotationDetail.folio || '', // folio\r\n          clientName: quotationDetail.informacion_basica?.cliente?.find?.(c => c?.nombre_cliente)?.nombre_cliente || '',\r\n          projectName: quotationDetail.informacion_basica?.proyecto?.find?.(p => p?.nombre_proyecto)?.nombre_proyecto || '',\r\n          status: 'development',\r\n          createdDate: quotationDetail.fechaCreacion ? new Date(quotationDetail.fechaCreacion).toLocaleDateString('es-MX') : '',\r\n          lastModified: quotationDetail.fechaActualizacion ? new Date(quotationDetail.fechaActualizacion).toLocaleDateString('es-MX') : '',\r\n          assignedTo: quotationDetail.asignacion?.responsables?.[0]?.nombre_responsable || '',\r\n          priority: quotationDetail.informacion_basica?.prioridad || 'media',\r\n          quotationData: {\r\n            totalAmount: quotationDetail.detalles_proyecto?.presupuesto_estimado_mxn || 0\r\n          }\r\n        };\r\n        setSelectedQuotation(mappedQuotation);\r\n      }\r\n    } catch (err) {\r\n      // Manejo de error si es necesario\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleQuotationUpdate = (quotationId, updates) => {\r\n    setQuotations(prev => prev?.map(quote => \r\n      quote?.id === quotationId \r\n        ? { ...quote, ...updates, lastModified: new Date()?.toISOString()?.split('T')?.[0] }\r\n        : quote\r\n    ));\r\n    \r\n    if (selectedQuotation?.id === quotationId) {\r\n      setSelectedQuotation(prev => ({ ...prev, ...updates }));\r\n    }\r\n  };\r\n\r\n  const handleAddRevision = (quotationId, revision) => {\r\n    const newRevision = {\r\n      ...revision,\r\n      version: `1.${Date.now()?.toString()?.slice(-1)}`,\r\n      date: new Date()?.toISOString()?.split('T')?.[0]\r\n    };\r\n\r\n    setQuotations(prev => prev?.map(quote => \r\n      quote?.id === quotationId \r\n        ? { \r\n            ...quote, \r\n            revisions: [...(quote?.revisions || []), newRevision],\r\n            lastModified: newRevision?.date\r\n          }\r\n        : quote\r\n    ));\r\n  };\r\n\r\n  const handleSubmitInternalReview = (quotationId, reviewData) => {\r\n    setQuotations(prev => prev?.map(quote => \r\n      quote?.id === quotationId \r\n        ? { ...quote, internalReview: reviewData }\r\n        : quote\r\n    ));\r\n  };\r\n\r\n  const handleClientCommunication = (quotationId, communication) => {\r\n    const newComm = {\r\n      ...communication,\r\n      id: `comm-${Date.now()}`,\r\n      date: new Date()?.toISOString()?.split('T')?.[0]\r\n    };\r\n\r\n    setQuotations(prev => prev?.map(quote => \r\n      quote?.id === quotationId \r\n        ? { \r\n            ...quote, \r\n            communications: [...(quote?.communications || []), newComm]\r\n          }\r\n        : quote\r\n    ));\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'development': return 'bg-blue-100 text-blue-800'; // Desarrollo\r\n      case 'review': return 'bg-yellow-100 text-yellow-800'; // Revisi√≥n\r\n      case 'approved': return 'bg-green-100 text-green-800'; // Aprobada\r\n      case 'rejected': return 'bg-red-100 text-red-800'; // Rechazada\r\n      case 'sent': return 'bg-indigo-100 text-indigo-800'; // Enviada\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgente': return 'border-l-red-600';\r\n      case 'alta': return 'border-l-orange-500';\r\n      case 'media': return 'border-l-yellow-500';\r\n      case 'baja': return 'border-l-green-500';\r\n      default: return 'border-l-gray-400';\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Ya no selecciona autom√°ticamente la primera cotizaci√≥n\r\n  }, [quotations, selectedQuotation]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando centro de desarrollo...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n      \r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n        \r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Centro de Desarrollo de Cotizaciones</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                  Creaci√≥n y gesti√≥n avanzada de cotizaciones con validaci√≥n de costos y comunicaci√≥n directa\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                {/* Bot√≥n comentado: Exportar PDF (se dej√≥ comentado para posible uso futuro)\r\n                <Button\r\n                  variant=\"outline\"\r\n                  iconName=\"Download\"\r\n                  iconPosition=\"left\"\r\n                >\r\n                  Exportar PDF\r\n                </Button>\r\n                */}\r\n                <Button\r\n                  iconName=\"Plus\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => {\r\n                    window.dispatchEvent(new CustomEvent('resetNewQuotationModal'));\r\n                    setIsNewQuotationModalOpen(true);\r\n                  }}\r\n                >\r\n                  Nueva Cotizaci√≥n\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-6\">\r\n              {/* Quotations List */}\r\n              <div className=\"w-80\">\r\n                <div className=\"bg-card rounded-lg shadow-sm border\">\r\n                  <div className=\"p-4 border-b\">\r\n                    <h3 className=\"font-semibold\">Cotizaciones Activas</h3>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4 space-y-3 max-h-[calc(100vh-300px)] overflow-y-auto\">\r\n                    {quotations?.map((quotation) => (\r\n                      <div\r\n                        key={quotation?.id}\r\n                        onClick={() => handleQuotationSelect(quotation)}\r\n                        className={`p-3 rounded-lg border-l-4 cursor-pointer hover:shadow-md transition-all ${\r\n                          selectedQuotation?.id === quotation?.id ? 'bg-primary/10' : 'bg-card'\r\n                        } ${getPriorityColor(quotation?.priority)}`}\r\n                      >\r\n                        <div className=\"flex items-start justify-between mb-2\">\r\n                          <h4 className=\"font-medium text-sm text-foreground line-clamp-2\">\r\n                            {quotation?.projectName || 'Sin proyecto'}\r\n                          </h4>\r\n                          <span className={`text-xs px-2 py-1 rounded-full ${getStatusColor(quotation?.status)}`}>\r\n                            {quotation?.status === 'development' ? 'Desarrollo' :\r\n                             quotation?.status === 'review' ? 'Revisi√≥n' :\r\n                             quotation?.status === 'approved' ? 'Aprobada' :\r\n                             quotation?.status === 'rejected' ? 'Rechazada' :\r\n                             quotation?.status === 'sent' ? 'Enviada' :\r\n                             quotation?.status || 'Sin estado'}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mb-2\">{quotation?.clientName || 'Sin cliente'}</p>\r\n                        <div className=\"flex items-center space-x-2 mb-2\">\r\n                          <Icon name=\"User\" size={12} className=\"text-muted-foreground\" />\r\n                          <span className=\"text-xs text-muted-foreground\">{quotation?.assignedTo || 'Sin responsable'}</span>\r\n                        </div>\r\n                          {/* Solo mostrar el folio, nunca el id de Cosmos */}\r\n                        <p className=\"text-xs text-muted-foreground mb-2\">{quotation?.folio || 'Sin folio'}</p>\r\n                        {/* El id de Cosmos no se muestra */}\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            <Icon name=\"Calendar\" size={12} className=\"text-muted-foreground\" />\r\n                            <span className=\"text-xs text-muted-foreground\">\r\n                              {quotation?.lastModified || quotation?.createdDate || ''}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"text-xs font-medium text-foreground\">\r\n                            ${quotation?.quotationData?.totalAmount?.toLocaleString('es-MX') || '0'}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Main Quotation Development Area */}\r\n              <div className=\"flex-1\">\r\n                {selectedQuotation ? (\r\n                  <div className=\"bg-card rounded-lg shadow-sm border\">\r\n                    {/* Tabs */}\r\n                    <div className=\"border-b\">\r\n                      <div className=\"flex space-x-1 p-1\">\r\n                        {[\r\n                          { id: 'builder', label: 'Constructor', icon: 'Settings' },\r\n                          { id: 'materials', label: 'Materiales', icon: 'Package' },\r\n                          { id: 'preview', label: 'Vista Previa', icon: 'Eye' },\r\n                          { id: 'communication', label: 'Comunicaci√≥n', icon: 'MessageSquare' },\r\n                          { id: 'review', label: 'Revisi√≥n', icon: 'Users' },\r\n                          { id: 'history', label: 'Historial', icon: 'Clock' }\r\n                        ]?.map((tab) => (\r\n                          <button\r\n                            key={tab?.id}\r\n                            onClick={() => setActiveTab(tab?.id)}\r\n                            className={`flex items-center space-x-2 px-4 py-2 text-sm rounded-lg transition-all ${\r\n                              activeTab === tab?.id\r\n                                ? 'bg-primary text-primary-foreground'\r\n                                : 'text-muted-foreground hover:text-foreground hover:bg-muted'\r\n                            }`}\r\n                          >\r\n                            <Icon name={tab?.icon} size={16} />\r\n                            <span>{tab?.label}</span>\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Tab Content */}\r\n                    <div className=\"p-6\">\r\n                      {activeTab === 'builder' && (\r\n                        <QuotationBuilder\r\n                          cotizacion={selectedQuotation}\r\n                          onUpdate={(updates) => handleQuotationUpdate(selectedQuotation?.id, updates)}\r\n                          onAddRevision={(revision) => handleAddRevision(selectedQuotation?.id, revision)}\r\n                        />\r\n                      )}\r\n\r\n                      {activeTab === 'materials' && (\r\n                        <MaterialRiskChecklist\r\n                          quotation={selectedQuotation}\r\n                          onUpdate={(updates) => handleQuotationUpdate(selectedQuotation?.id, updates)}\r\n                        />\r\n                      )}\r\n\r\n                      {activeTab === 'preview' && (\r\n                        <QuotationPreview\r\n                          quotation={selectedQuotation}\r\n                        />\r\n                      )}\r\n\r\n                      {activeTab === 'communication' && (\r\n                        <ClientCommunication\r\n                          quotation={selectedQuotation}\r\n                          onAddCommunication={(comm) => handleClientCommunication(selectedQuotation?.id, comm)}\r\n                        />\r\n                      )}\r\n\r\n                      {activeTab === 'review' && (\r\n                        <InternalReview\r\n                          quotation={selectedQuotation}\r\n                          onSubmitReview={(reviewData) => handleSubmitInternalReview(selectedQuotation?.id, reviewData)}\r\n                        />\r\n                      )}\r\n\r\n                      {activeTab === 'history' && (\r\n                        <RevisionHistory\r\n                          quotation={selectedQuotation}\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"bg-card rounded-lg shadow-sm border h-96 flex items-center justify-center\">\r\n                    <div className=\"text-center\">\r\n                      <Icon name=\"FileText\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                      <h3 className=\"text-lg font-medium text-foreground mb-2\">Seleccionar Cotizaci√≥n</h3>\r\n                      <p className=\"text-muted-foreground\">\r\n                        Selecciona una cotizaci√≥n de la lista para comenzar a trabajar\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* New Quotation Modal */}\r\n      <NewQuotationModal\r\n        isOpen={isNewQuotationModalOpen}\r\n        onClose={() => setIsNewQuotationModalOpen(false)}\r\n        onCreateQuotation={handleCreateQuotation}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuotationDevelopmentCenter;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\nconst StartupTrackingPanel = ({ project, onConfirm }) => {\r\n  const [startupData, setStartupData] = useState({\r\n    confirmedDate: project?.startup?.confirmedDate || '',\r\n    preWorkMeeting: project?.startup?.preWorkMeeting || '',\r\n    accessPermits: project?.startup?.accessPermits || false,\r\n    safetyBriefing: project?.startup?.safetyBriefing || false,\r\n    materialsDelivery: project?.startup?.materialsDelivery || false,\r\n    fieldSupervisorAssigned: project?.startup?.fieldSupervisorAssigned || false\r\n  });\r\n  \r\n  const [notes, setNotes] = useState('');\r\n\r\n  const handleCheckboxChange = (field) => {\r\n    setStartupData(prev => ({\r\n      ...prev,\r\n      [field]: !prev?.[field]\r\n    }));\r\n  };\r\n\r\n  const handleConfirm = () => {\r\n    const confirmationData = {\r\n      ...startupData,\r\n      status: 'confirmed',\r\n      confirmationDate: new Date()?.toISOString()?.split('T')?.[0],\r\n      notes: notes\r\n    };\r\n    \r\n    onConfirm?.(confirmationData);\r\n  };\r\n\r\n  const isAllRequirementsMet = () => {\r\n    return startupData?.confirmedDate && \r\n           startupData?.preWorkMeeting && \r\n           startupData?.accessPermits && \r\n           startupData?.safetyBriefing && \r\n           startupData?.fieldSupervisorAssigned;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <h5 className=\"font-medium text-sm\">Seguimiento de Arranque</h5>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          Confirmar fechas y responsable en campo (Paso 19 del flujo)\r\n        </p>\r\n\r\n        {/* Field Supervisor Info */}\r\n        {project?.fieldSupervisor && (\r\n          <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n            <div className=\"flex items-center space-x-2 mb-2\">\r\n              <Icon name=\"HardHat\" size={16} className=\"text-blue-600\" />\r\n              <span className=\"font-medium text-sm\">Supervisor de Campo</span>\r\n            </div>\r\n            <div className=\"text-sm space-y-1\">\r\n              <p><strong>{project?.fieldSupervisor?.name}</strong></p>\r\n              <p className=\"text-muted-foreground\">{project?.fieldSupervisor?.phone}</p>\r\n              <p className=\"text-muted-foreground\">{project?.fieldSupervisor?.email}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Date Confirmations */}\r\n        <div className=\"space-y-3\">\r\n          <div>\r\n            <label className=\"text-sm font-medium block mb-1\">Fecha de Inicio Confirmada</label>\r\n            <Input\r\n              type=\"date\"\r\n              value={startupData?.confirmedDate}\r\n              onChange={(e) => setStartupData(prev => ({ ...prev, confirmedDate: e?.target?.value }))}\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm font-medium block mb-1\">Reuni√≥n Pre-trabajo</label>\r\n            <Input\r\n              type=\"date\"\r\n              value={startupData?.preWorkMeeting}\r\n              onChange={(e) => setStartupData(prev => ({ ...prev, preWorkMeeting: e?.target?.value }))}\r\n              className=\"text-sm\"\r\n            />\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Reuni√≥n inicial con cliente y equipo de campo\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Requirements Checklist */}\r\n        <div className=\"space-y-3\">\r\n          <h6 className=\"font-medium text-sm\">Lista de Verificaci√≥n</h6>\r\n          \r\n          <div className=\"space-y-2\">\r\n            <label className=\"flex items-center space-x-3\">\r\n              <Checkbox\r\n                checked={startupData?.accessPermits}\r\n                onChange={() => handleCheckboxChange('accessPermits')}\r\n              />\r\n              <div className=\"flex-1\">\r\n                <span className=\"text-sm\">Permisos de acceso confirmados</span>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Acceso a todas las √°reas de trabajo autorizado\r\n                </p>\r\n              </div>\r\n            </label>\r\n\r\n            <label className=\"flex items-center space-x-3\">\r\n              <Checkbox\r\n                checked={startupData?.safetyBriefing}\r\n                onChange={() => handleCheckboxChange('safetyBriefing')}\r\n              />\r\n              <div className=\"flex-1\">\r\n                <span className=\"text-sm\">Briefing de seguridad completado</span>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Equipo informado sobre protocolos de seguridad\r\n                </p>\r\n              </div>\r\n            </label>\r\n\r\n            <label className=\"flex items-center space-x-3\">\r\n              <Checkbox\r\n                checked={startupData?.materialsDelivery}\r\n                onChange={() => handleCheckboxChange('materialsDelivery')}\r\n              />\r\n              <div className=\"flex-1\">\r\n                <span className=\"text-sm\">Entrega de materiales coordinada</span>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Cronograma de entrega de materiales confirmado\r\n                </p>\r\n              </div>\r\n            </label>\r\n\r\n            <label className=\"flex items-center space-x-3\">\r\n              <Checkbox\r\n                checked={startupData?.fieldSupervisorAssigned}\r\n                onChange={() => handleCheckboxChange('fieldSupervisorAssigned')}\r\n              />\r\n              <div className=\"flex-1\">\r\n                <span className=\"text-sm\">Supervisor de campo asignado</span>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Responsable t√©cnico confirmado para el proyecto\r\n                </p>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Notes */}\r\n        <div>\r\n          <label className=\"text-sm font-medium block mb-1\">Notas Adicionales</label>\r\n          <textarea\r\n            value={notes}\r\n            onChange={(e) => setNotes(e?.target?.value)}\r\n            placeholder=\"Observaciones especiales, coordinaciones adicionales...\"\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n            rows={3}\r\n          />\r\n        </div>\r\n\r\n        {/* Confirmation Status */}\r\n        {project?.startup?.status === 'confirmed' && (\r\n          <div className=\"p-3 bg-green-50 rounded-lg\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n              <span className=\"font-medium text-sm text-green-800\">Arranque Confirmado</span>\r\n            </div>\r\n            <p className=\"text-sm text-green-700 mt-1\">\r\n              Confirmado el {new Date(project?.startup?.confirmationDate)?.toLocaleDateString()}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Button\r\n            onClick={handleConfirm}\r\n            disabled={!isAllRequirementsMet()}\r\n            iconName=\"CheckCircle\"\r\n            iconPosition=\"left\"\r\n            size=\"sm\"\r\n            className={`flex-1 ${!isAllRequirementsMet() ? 'opacity-50' : ''}`}\r\n          >\r\n            Confirmar Arranque\r\n          </Button>\r\n        </div>\r\n\r\n        {!isAllRequirementsMet() && (\r\n          <p className=\"text-xs text-orange-600 text-center\">\r\n            Complete todos los campos requeridos para confirmar el arranque\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StartupTrackingPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst ExecutionProgressPanel = ({ project, onUpdate }) => {\r\n  const [progressUpdate, setProgressUpdate] = useState({\r\n    overallProgress: project?.progress?.overallProgress || 0,\r\n    currentPhase: project?.progress?.currentPhase || '',\r\n    nextMilestone: project?.progress?.nextMilestone || '',\r\n    notes: ''\r\n  });\r\n\r\n  const [selectedMilestone, setSelectedMilestone] = useState(null);\r\n\r\n  const handleMilestoneUpdate = (milestoneId, updates) => {\r\n    const updatedMilestones = project?.milestones?.map(milestone =>\r\n      milestone?.id === milestoneId \r\n        ? { ...milestone, ...updates }\r\n        : milestone\r\n    );\r\n\r\n    // Calculate overall progress based on completed milestones\r\n    const completedMilestones = updatedMilestones?.filter(m => m?.status === 'completed')?.length || 0;\r\n    const totalMilestones = updatedMilestones?.length || 1;\r\n    const calculatedProgress = Math.round((completedMilestones / totalMilestones) * 100);\r\n\r\n    onUpdate?.({\r\n      milestones: updatedMilestones,\r\n      progress: {\r\n        ...project?.progress,\r\n        overallProgress: calculatedProgress\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleProgressUpdate = () => {\r\n    onUpdate?.(progressUpdate);\r\n    setProgressUpdate(prev => ({ ...prev, notes: '' }));\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'completed': return 'text-green-600 bg-green-100';\r\n      case 'in_progress': return 'text-blue-600 bg-blue-100';\r\n      case 'pending': return 'text-gray-600 bg-gray-100';\r\n      case 'delayed': return 'text-red-600 bg-red-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'completed': return 'CheckCircle';\r\n      case 'in_progress': return 'Clock';\r\n      case 'pending': return 'Circle';\r\n      case 'delayed': return 'AlertTriangle';\r\n      default: return 'Circle';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <h5 className=\"font-medium text-sm\">Monitoreo de Ejecuci√≥n</h5>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          Punto de contacto del cliente durante la obra (Paso 20 del flujo)\r\n        </p>\r\n\r\n        {/* Overall Progress */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <span className=\"font-medium text-sm\">Progreso General</span>\r\n            <span className=\"text-sm font-bold text-blue-600\">\r\n              {project?.progress?.overallProgress || 0}%\r\n            </span>\r\n          </div>\r\n          <div className=\"w-full bg-gray-200 rounded-full h-3 mb-2\">\r\n            <div \r\n              className=\"bg-blue-600 h-3 rounded-full transition-all\"\r\n              style={{ width: `${project?.progress?.overallProgress || 0}%` }}\r\n            ></div>\r\n          </div>\r\n          {project?.progress?.currentPhase && (\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              <strong>Fase actual:</strong> {project?.progress?.currentPhase}\r\n            </p>\r\n          )}\r\n          {project?.progress?.daysRemaining && (\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              <strong>D√≠as restantes:</strong> {project?.progress?.daysRemaining}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Milestones */}\r\n        <div className=\"space-y-3\">\r\n          <h6 className=\"font-medium text-sm\">Hitos del Proyecto</h6>\r\n          \r\n          <div className=\"space-y-2\">\r\n            {project?.milestones?.map((milestone) => (\r\n              <div\r\n                key={milestone?.id}\r\n                className=\"p-3 border rounded-lg hover:bg-gray-50 cursor-pointer\"\r\n                onClick={() => setSelectedMilestone(selectedMilestone === milestone?.id ? null : milestone?.id)}\r\n              >\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon \r\n                        name={getStatusIcon(milestone?.status)} \r\n                        size={16} \r\n                        className={getStatusColor(milestone?.status)?.split(' ')?.[0]} \r\n                      />\r\n                      <span className=\"font-medium text-sm\">{milestone?.name}</span>\r\n                    </div>\r\n                    \r\n                    <div className=\"mt-2 space-y-1\">\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        <strong>Meta:</strong> {new Date(milestone?.targetDate)?.toLocaleDateString()}\r\n                      </p>\r\n                      {milestone?.completedDate && (\r\n                        <p className=\"text-xs text-green-600\">\r\n                          <strong>Completado:</strong> {new Date(milestone?.completedDate)?.toLocaleDateString()}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex flex-col items-end space-y-1\">\r\n                    <span className={`text-xs px-2 py-1 rounded ${getStatusColor(milestone?.status)}`}>\r\n                      {milestone?.status === 'completed' ? 'Completado' :\r\n                       milestone?.status === 'in_progress' ? 'En Progreso' :\r\n                       milestone?.status === 'pending' ? 'Pendiente' : 'Retrasado'}\r\n                    </span>\r\n                    <span className=\"text-xs font-medium\">\r\n                      {milestone?.progress || 0}%\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Milestone Details */}\r\n                {selectedMilestone === milestone?.id && (\r\n                  <div className=\"mt-3 pt-3 border-t space-y-3\">\r\n                    <div>\r\n                      <label className=\"text-xs font-medium block mb-1\">Progreso (%)</label>\r\n                      <Input\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        max=\"100\"\r\n                        value={milestone?.progress || 0}\r\n                        onChange={(e) => handleMilestoneUpdate(milestone?.id, {\r\n                          progress: parseInt(e?.target?.value)\r\n                        })}\r\n                        className=\"text-sm\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"text-xs font-medium block mb-1\">Estado</label>\r\n                      <select\r\n                        value={milestone?.status}\r\n                        onChange={(e) => {\r\n                          const updates = { status: e?.target?.value };\r\n                          if (e?.target?.value === 'completed') {\r\n                            updates.completedDate = new Date()?.toISOString()?.split('T')?.[0];\r\n                            updates.progress = 100;\r\n                          }\r\n                          handleMilestoneUpdate(milestone?.id, updates);\r\n                        }}\r\n                        className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\r\n                      >\r\n                        <option value=\"pending\">Pendiente</option>\r\n                        <option value=\"in_progress\">En Progreso</option>\r\n                        <option value=\"completed\">Completado</option>\r\n                        <option value=\"delayed\">Retrasado</option>\r\n                      </select>\r\n                    </div>\r\n\r\n                    {milestone?.status === 'completed' && (\r\n                      <div>\r\n                        <label className=\"text-xs font-medium block mb-1\">Fecha de Completado</label>\r\n                        <Input\r\n                          type=\"date\"\r\n                          value={milestone?.completedDate || ''}\r\n                          onChange={(e) => handleMilestoneUpdate(milestone?.id, {\r\n                            completedDate: e?.target?.value\r\n                          })}\r\n                          className=\"text-sm\"\r\n                        />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Progress Update Form */}\r\n        <div className=\"space-y-3\">\r\n          <h6 className=\"font-medium text-sm\">Actualizaci√≥n de Progreso</h6>\r\n          \r\n          <div>\r\n            <label className=\"text-sm font-medium block mb-1\">Fase Actual</label>\r\n            <Input\r\n              type=\"text\"\r\n              value={progressUpdate?.currentPhase}\r\n              onChange={(e) => setProgressUpdate(prev => ({ ...prev, currentPhase: e?.target?.value }))}\r\n              placeholder=\"Descripci√≥n de la fase actual...\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm font-medium block mb-1\">Pr√≥ximo Hito</label>\r\n            <Input\r\n              type=\"text\"\r\n              value={progressUpdate?.nextMilestone}\r\n              onChange={(e) => setProgressUpdate(prev => ({ ...prev, nextMilestone: e?.target?.value }))}\r\n              placeholder=\"Pr√≥ximo hito o actividad...\"\r\n              className=\"text-sm\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-sm font-medium block mb-1\">Notas de Progreso</label>\r\n            <textarea\r\n              value={progressUpdate?.notes}\r\n              onChange={(e) => setProgressUpdate(prev => ({ ...prev, notes: e?.target?.value }))}\r\n              placeholder=\"Observaciones, logros, obst√°culos encontrados...\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <Button\r\n            onClick={handleProgressUpdate}\r\n            iconName=\"Update\"\r\n            iconPosition=\"left\"\r\n            size=\"sm\"\r\n            className=\"w-full\"\r\n          >\r\n            Actualizar Progreso\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Key Metrics */}\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <div className=\"p-3 bg-gray-50 rounded-lg text-center\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Hitos Completados</p>\r\n            <p className=\"text-sm font-bold\">\r\n              {project?.milestones?.filter(m => m?.status === 'completed')?.length || 0}/\r\n              {project?.milestones?.length || 0}\r\n            </p>\r\n          </div>\r\n          <div className=\"p-3 bg-gray-50 rounded-lg text-center\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Progreso Promedio</p>\r\n            <p className=\"text-sm font-bold\">\r\n              {Math.round((project?.milestones?.reduce((acc, m) => acc + (m?.progress || 0), 0) || 0) / (project?.milestones?.length || 1))}%\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExecutionProgressPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst ClientCommunicationPanel = ({ project, onAddCommunication }) => {\r\n  const [newCommunication, setNewCommunication] = useState({\r\n    type: 'email',\r\n    content: '',\r\n    urgency: 'normal',\r\n    participants: []\r\n  });\r\n  \r\n  const [participantInput, setParticipantInput] = useState('');\r\n\r\n  const handleAddParticipant = () => {\r\n    if (participantInput?.trim() && !newCommunication?.participants?.includes(participantInput?.trim())) {\r\n      setNewCommunication(prev => ({\r\n        ...prev,\r\n        participants: [...prev?.participants, participantInput?.trim()]\r\n      }));\r\n      setParticipantInput('');\r\n    }\r\n  };\r\n\r\n  const handleRemoveParticipant = (participant) => {\r\n    setNewCommunication(prev => ({\r\n      ...prev,\r\n      participants: prev?.participants?.filter(p => p !== participant)\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!newCommunication?.content?.trim()) return;\r\n\r\n    const communication = {\r\n      id: `comm-${Date.now()}`,\r\n      type: newCommunication?.type,\r\n      date: new Date()?.toISOString()?.split('T')?.[0],\r\n      content: newCommunication?.content,\r\n      participants: newCommunication?.participants?.length > 0 ? newCommunication?.participants : [project?.clientContact?.name],\r\n      urgency: newCommunication?.urgency,\r\n      timestamp: new Date()?.toISOString()\r\n    };\r\n\r\n    onAddCommunication?.(communication);\r\n    \r\n    // Reset form\r\n    setNewCommunication({\r\n      type: 'email',\r\n      content: '',\r\n      urgency: 'normal',\r\n      participants: []\r\n    });\r\n  };\r\n\r\n  const getCommunicationIcon = (type) => {\r\n    switch (type) {\r\n      case 'whatsapp': return 'MessageCircle';\r\n      case 'email': return 'Mail';\r\n      case 'phone': return 'Phone';\r\n      case 'meeting': return 'Users';\r\n      default: return 'MessageCircle';\r\n    }\r\n  };\r\n\r\n  const getUrgencyColor = (urgency) => {\r\n    switch (urgency) {\r\n      case 'urgent': return 'text-red-600 bg-red-100';\r\n      case 'high': return 'text-orange-600 bg-orange-100';\r\n      case 'normal': return 'text-blue-600 bg-blue-100';\r\n      case 'low': return 'text-green-600 bg-green-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <h5 className=\"font-medium text-sm\">Comunicaci√≥n con Cliente</h5>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          Punto de contacto principal durante la ejecuci√≥n del proyecto\r\n        </p>\r\n\r\n        {/* Client Contact Info */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name=\"User\" size={16} className=\"text-blue-600\" />\r\n            <span className=\"font-medium text-sm\">Contacto Principal</span>\r\n          </div>\r\n          <div className=\"text-sm space-y-1\">\r\n            <p><strong>{project?.clientContact?.name}</strong></p>\r\n            <p className=\"text-muted-foreground\">{project?.clientContact?.phone}</p>\r\n            <p className=\"text-muted-foreground\">{project?.clientContact?.email}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Recent Communications */}\r\n        <div className=\"space-y-3\">\r\n          <h6 className=\"font-medium text-sm\">Comunicaciones Recientes</h6>\r\n          \r\n          <div className=\"space-y-2 max-h-60 overflow-y-auto\">\r\n            {project?.communications?.slice(-5)?.reverse()?.map((comm) => (\r\n              <div key={comm?.id} className=\"p-3 border rounded-lg\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon \r\n                      name={getCommunicationIcon(comm?.type)} \r\n                      size={14} \r\n                      className=\"text-muted-foreground\" \r\n                    />\r\n                    <span className=\"text-xs text-muted-foreground capitalize\">\r\n                      {comm?.type}\r\n                    </span>\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      {new Date(comm?.date)?.toLocaleDateString()}\r\n                    </span>\r\n                  </div>\r\n                  <span className={`text-xs px-2 py-1 rounded ${getUrgencyColor(comm?.urgency)}`}>\r\n                    {comm?.urgency === 'urgent' ? 'Urgente' :\r\n                     comm?.urgency === 'high' ? 'Alta' :\r\n                     comm?.urgency === 'normal' ? 'Normal' : 'Baja'}\r\n                  </span>\r\n                </div>\r\n                \r\n                <p className=\"text-sm text-foreground mb-2\">\r\n                  {comm?.content}\r\n                </p>\r\n                \r\n                {comm?.participants?.length > 0 && (\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <Icon name=\"Users\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      {comm?.participants?.join(', ')}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            \r\n            {(!project?.communications || project?.communications?.length === 0) && (\r\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                No hay comunicaciones registradas\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* New Communication Form */}\r\n        <div className=\"space-y-3 p-3 border rounded-lg bg-gray-50\">\r\n          <h6 className=\"font-medium text-sm\">Nueva Comunicaci√≥n</h6>\r\n          \r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <div>\r\n              <label className=\"text-xs font-medium block mb-1\">Tipo</label>\r\n              <select\r\n                value={newCommunication?.type}\r\n                onChange={(e) => setNewCommunication(prev => ({ ...prev, type: e?.target?.value }))}\r\n                className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\r\n              >\r\n                <option value=\"email\">Email</option>\r\n                <option value=\"whatsapp\">WhatsApp</option>\r\n                <option value=\"phone\">Tel√©fono</option>\r\n                <option value=\"meeting\">Reuni√≥n</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"text-xs font-medium block mb-1\">Urgencia</label>\r\n              <select\r\n                value={newCommunication?.urgency}\r\n                onChange={(e) => setNewCommunication(prev => ({ ...prev, urgency: e?.target?.value }))}\r\n                className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\r\n              >\r\n                <option value=\"low\">Baja</option>\r\n                <option value=\"normal\">Normal</option>\r\n                <option value=\"high\">Alta</option>\r\n                <option value=\"urgent\">Urgente</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-xs font-medium block mb-1\">Contenido</label>\r\n            <textarea\r\n              value={newCommunication?.content}\r\n              onChange={(e) => setNewCommunication(prev => ({ ...prev, content: e?.target?.value }))}\r\n              placeholder=\"Descripci√≥n de la comunicaci√≥n, acuerdos, seguimientos...\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          {/* Participants */}\r\n          <div>\r\n            <label className=\"text-xs font-medium block mb-1\">Participantes</label>\r\n            <div className=\"flex items-center space-x-2 mb-2\">\r\n              <Input\r\n                type=\"text\"\r\n                value={participantInput}\r\n                onChange={(e) => setParticipantInput(e?.target?.value)}\r\n                placeholder=\"Nombre del participante...\"\r\n                className=\"text-sm flex-1\"\r\n                onKeyPress={(e) => e?.key === 'Enter' && handleAddParticipant()}\r\n              />\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"Plus\"\r\n                onClick={handleAddParticipant}\r\n              />\r\n            </div>\r\n            \r\n            {newCommunication?.participants?.length > 0 && (\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {newCommunication?.participants?.map((participant, index) => (\r\n                  <span\r\n                    key={index}\r\n                    className=\"inline-flex items-center space-x-1 bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs\"\r\n                  >\r\n                    <span>{participant}</span>\r\n                    <button\r\n                      onClick={() => handleRemoveParticipant(participant)}\r\n                      className=\"hover:text-blue-600\"\r\n                    >\r\n                      <Icon name=\"X\" size={12} />\r\n                    </button>\r\n                  </span>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <Button\r\n            onClick={handleSubmit}\r\n            disabled={!newCommunication?.content?.trim()}\r\n            iconName=\"Send\"\r\n            iconPosition=\"left\"\r\n            size=\"sm\"\r\n            className=\"w-full\"\r\n          >\r\n            Registrar Comunicaci√≥n\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Quick Communication Templates */}\r\n        <div className=\"space-y-2\">\r\n          <h6 className=\"font-medium text-sm\">Plantillas R√°pidas</h6>\r\n          <div className=\"grid grid-cols-1 gap-2\">\r\n            {[\r\n              'Actualizaci√≥n semanal de progreso',\r\n              'Solicitud de acceso a nueva √°rea',\r\n              'Confirmaci√≥n de entrega de materiales',\r\n              'Programaci√≥n de inspecci√≥n',\r\n              'Notificaci√≥n de hito completado'\r\n            ]?.map((template) => (\r\n              <button\r\n                key={template}\r\n                onClick={() => setNewCommunication(prev => ({ \r\n                  ...prev, \r\n                  content: template \r\n                }))}\r\n                className=\"text-left px-3 py-2 border rounded-lg hover:bg-gray-50 text-sm\"\r\n              >\r\n                {template}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientCommunicationPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst ChangeRequestPanel = ({ project, onRequestChange }) => {\r\n  const [newChangeRequest, setNewChangeRequest] = useState({\r\n    description: '',\r\n    reason: '',\r\n    commercialImpact: {\r\n      cost: '',\r\n      timeImpact: ''\r\n    },\r\n    urgency: 'normal'\r\n  });\r\n\r\n  const [showForm, setShowForm] = useState(false);\r\n\r\n  const handleSubmit = () => {\r\n    if (!newChangeRequest?.description?.trim()) return;\r\n\r\n    const changeRequest = {\r\n      id: `change-${Date.now()}`,\r\n      description: newChangeRequest?.description,\r\n      reason: newChangeRequest?.reason,\r\n      requestDate: new Date()?.toISOString()?.split('T')?.[0],\r\n      status: 'pending',\r\n      commercialImpact: {\r\n        cost: parseFloat(newChangeRequest?.commercialImpact?.cost) || 0,\r\n        timeImpact: newChangeRequest?.commercialImpact?.timeImpact\r\n      },\r\n      urgency: newChangeRequest?.urgency,\r\n      requestedBy: project?.salesRep\r\n    };\r\n\r\n    onRequestChange?.(changeRequest);\r\n    \r\n    // Reset form\r\n    setNewChangeRequest({\r\n      description: '',\r\n      reason: '',\r\n      commercialImpact: { cost: '', timeImpact: '' },\r\n      urgency: 'normal'\r\n    });\r\n    setShowForm(false);\r\n  };\r\n\r\n  const handleApproveChange = (changeId) => {\r\n    // This would update the change status to approved\r\n  // console.log eliminado\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'text-yellow-600 bg-yellow-100';\r\n      case 'approved': return 'text-green-600 bg-green-100';\r\n      case 'rejected': return 'text-red-600 bg-red-100';\r\n      case 'in_progress': return 'text-blue-600 bg-blue-100';\r\n      case 'completed': return 'text-green-600 bg-green-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getUrgencyColor = (urgency) => {\r\n    switch (urgency) {\r\n      case 'urgent': return 'text-red-600 bg-red-100';\r\n      case 'high': return 'text-orange-600 bg-orange-100';\r\n      case 'normal': return 'text-blue-600 bg-blue-100';\r\n      case 'low': return 'text-green-600 bg-green-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h5 className=\"font-medium text-sm\">Gesti√≥n de Cambios</h5>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Cambios con impacto comercial durante la ejecuci√≥n (Pasos 21-24)\r\n            </p>\r\n          </div>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            iconName=\"Plus\"\r\n            onClick={() => setShowForm(!showForm)}\r\n          >\r\n            Nuevo Cambio\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Existing Change Requests */}\r\n        <div className=\"space-y-3\">\r\n          <h6 className=\"font-medium text-sm\">Solicitudes de Cambio</h6>\r\n          \r\n          <div className=\"space-y-3 max-h-80 overflow-y-auto\">\r\n            {project?.changeRequests?.map((change) => (\r\n              <div key={change?.id} className=\"p-3 border rounded-lg\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex-1\">\r\n                    <h4 className=\"font-medium text-sm mb-1\">\r\n                      {change?.description}\r\n                    </h4>\r\n                    <p className=\"text-xs text-muted-foreground mb-2\">\r\n                      Solicitado el {new Date(change?.requestDate)?.toLocaleDateString()}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex flex-col items-end space-y-1\">\r\n                    <span className={`text-xs px-2 py-1 rounded ${getStatusColor(change?.status)}`}>\r\n                      {change?.status === 'pending' ? 'Pendiente' :\r\n                       change?.status === 'approved' ? 'Aprobado' :\r\n                       change?.status === 'rejected' ? 'Rechazado' :\r\n                       change?.status === 'in_progress' ? 'En Proceso' : 'Completado'}\r\n                    </span>\r\n                    <span className={`text-xs px-2 py-1 rounded ${getUrgencyColor(change?.urgency)}`}>\r\n                      {change?.urgency === 'urgent' ? 'Urgente' :\r\n                       change?.urgency === 'high' ? 'Alta' :\r\n                       change?.urgency === 'normal' ? 'Normal' : 'Baja'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {change?.reason && (\r\n                  <p className=\"text-sm text-muted-foreground mb-2\">\r\n                    <strong>Raz√≥n:</strong> {change?.reason}\r\n                  </p>\r\n                )}\r\n\r\n                {/* Commercial Impact */}\r\n                {change?.commercialImpact && (\r\n                  <div className=\"p-2 bg-gray-50 rounded mb-2\">\r\n                    <h6 className=\"text-xs font-medium mb-1\">Impacto Comercial</h6>\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                      {change?.commercialImpact?.cost > 0 && (\r\n                        <div>\r\n                          <span className=\"text-xs text-muted-foreground\">Costo:</span>\r\n                          <p className=\"text-sm font-medium\">\r\n                            ${change?.commercialImpact?.cost?.toLocaleString()}\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                      {change?.commercialImpact?.timeImpact && (\r\n                        <div>\r\n                          <span className=\"text-xs text-muted-foreground\">Tiempo:</span>\r\n                          <p className=\"text-sm font-medium\">\r\n                            {change?.commercialImpact?.timeImpact}\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {change?.approvalDate && (\r\n                  <p className=\"text-xs text-green-600\">\r\n                    <strong>Aprobado el:</strong> {new Date(change?.approvalDate)?.toLocaleDateString()}\r\n                  </p>\r\n                )}\r\n\r\n                {/* Actions for pending changes */}\r\n                {change?.status === 'pending' && (\r\n                  <div className=\"flex items-center space-x-2 mt-3 pt-2 border-t\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      iconName=\"Check\"\r\n                      onClick={() => handleApproveChange(change?.id)}\r\n                      className=\"text-green-600 border-green-600 hover:bg-green-50\"\r\n                    >\r\n                      Aprobar\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline\" \r\n                      size=\"sm\"\r\n                      iconName=\"X\"\r\n                      className=\"text-red-600 border-red-600 hover:bg-red-50\"\r\n                    >\r\n                      Rechazar\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Implementation status for approved changes */}\r\n                {change?.status === 'approved' && change?.implementation && (\r\n                  <div className=\"mt-2 p-2 bg-blue-50 rounded\">\r\n                    <p className=\"text-xs text-blue-600\">\r\n                      <strong>Implementaci√≥n:</strong> {change?.implementation}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            \r\n            {(!project?.changeRequests || project?.changeRequests?.length === 0) && (\r\n              <div className=\"text-center py-8\">\r\n                <Icon name=\"FileEdit\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                <p className=\"text-sm text-muted-foreground\">No hay solicitudes de cambio</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* New Change Request Form */}\r\n        {showForm && (\r\n          <div className=\"space-y-3 p-3 border rounded-lg bg-gray-50\">\r\n            <h6 className=\"font-medium text-sm\">Nueva Solicitud de Cambio</h6>\r\n            \r\n            <div>\r\n              <label className=\"text-xs font-medium block mb-1\">Descripci√≥n del Cambio</label>\r\n              <textarea\r\n                value={newChangeRequest?.description}\r\n                onChange={(e) => setNewChangeRequest(prev => ({ ...prev, description: e?.target?.value }))}\r\n                placeholder=\"Descripci√≥n detallada del cambio solicitado...\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n                rows={3}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"text-xs font-medium block mb-1\">Raz√≥n del Cambio</label>\r\n              <textarea\r\n                value={newChangeRequest?.reason}\r\n                onChange={(e) => setNewChangeRequest(prev => ({ ...prev, reason: e?.target?.value }))}\r\n                placeholder=\"Justificaci√≥n del cambio solicitado...\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n                rows={2}\r\n              />\r\n            </div>\r\n\r\n            {/* Commercial Impact */}\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-xs font-medium\">Impacto Comercial</label>\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <div>\r\n                  <label className=\"text-xs text-muted-foreground block mb-1\">Costo Adicional</label>\r\n                  <Input\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    value={newChangeRequest?.commercialImpact?.cost}\r\n                    onChange={(e) => setNewChangeRequest(prev => ({ \r\n                      ...prev, \r\n                      commercialImpact: { ...prev?.commercialImpact, cost: e?.target?.value }\r\n                    }))}\r\n                    placeholder=\"0\"\r\n                    className=\"text-sm\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"text-xs text-muted-foreground block mb-1\">Impacto en Tiempo</label>\r\n                  <Input\r\n                    type=\"text\"\r\n                    value={newChangeRequest?.commercialImpact?.timeImpact}\r\n                    onChange={(e) => setNewChangeRequest(prev => ({ \r\n                      ...prev, \r\n                      commercialImpact: { ...prev?.commercialImpact, timeImpact: e?.target?.value }\r\n                    }))}\r\n                    placeholder=\"ej. 2 semanas adicionales\"\r\n                    className=\"text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"text-xs font-medium block mb-1\">Urgencia</label>\r\n              <select\r\n                value={newChangeRequest?.urgency}\r\n                onChange={(e) => setNewChangeRequest(prev => ({ ...prev, urgency: e?.target?.value }))}\r\n                className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\r\n              >\r\n                <option value=\"low\">Baja</option>\r\n                <option value=\"normal\">Normal</option>\r\n                <option value=\"high\">Alta</option>\r\n                <option value=\"urgent\">Urgente</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Button\r\n                onClick={handleSubmit}\r\n                disabled={!newChangeRequest?.description?.trim()}\r\n                iconName=\"FileEdit\"\r\n                iconPosition=\"left\"\r\n                size=\"sm\"\r\n                className=\"flex-1\"\r\n              >\r\n                Solicitar Cambio\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                iconName=\"X\"\r\n                onClick={() => setShowForm(false)}\r\n              >\r\n                Cancelar\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Change Management Guidelines */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name=\"Info\" size={16} className=\"text-blue-600\" />\r\n            <span className=\"font-medium text-sm text-blue-800\">Proceso de Cambios</span>\r\n          </div>\r\n          <ul className=\"text-xs text-blue-700 space-y-1\">\r\n            <li>1. Levantar cambio con impacto comercial</li>\r\n            <li>2. Comunicar ajuste y solicitar aprobaci√≥n formal</li>\r\n            <li>3. Registrar adenda/condiciones del cambio</li>\r\n            <li>4. Notificar internamente para implementaci√≥n</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangeRequestPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { Checkbox } from '../../../components/ui/Checkbox';\r\n\r\nconst DeliveryManagementPanel = ({ project, onUpdate }) => {\r\n  const [deliveryUpdate, setDeliveryUpdate] = useState({\r\n    scheduledDate: project?.delivery?.scheduledDate || '',\r\n    status: project?.delivery?.status || 'scheduled',\r\n    notes: ''\r\n  });\r\n\r\n  const [acceptanceChecklist, setAcceptanceChecklist] = useState(\r\n    project?.delivery?.clientAcceptance?.checklist || []\r\n  );\r\n\r\n  const [correctionRequest, setCorrectionRequest] = useState({\r\n    description: '',\r\n    timeline: '',\r\n    evidence: ''\r\n  });\r\n\r\n  const handleChecklistUpdate = (index, checked) => {\r\n    const updatedChecklist = acceptanceChecklist?.map((item, i) => \r\n      i === index ? { ...item, checked } : item\r\n    );\r\n    setAcceptanceChecklist(updatedChecklist);\r\n    \r\n    onUpdate?.({\r\n      delivery: {\r\n        ...project?.delivery,\r\n        clientAcceptance: {\r\n          ...project?.delivery?.clientAcceptance,\r\n          checklist: updatedChecklist\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleDeliveryConfirmation = () => {\r\n    const allChecked = acceptanceChecklist?.every(item => item?.checked);\r\n    const deliveryData = {\r\n      ...project?.delivery,\r\n      status: allChecked ? 'accepted' : 'pending_corrections',\r\n      acceptanceDate: allChecked ? new Date()?.toISOString()?.split('T')?.[0] : null,\r\n      clientAcceptance: {\r\n        ...project?.delivery?.clientAcceptance,\r\n        status: allChecked ? 'accepted' : 'pending',\r\n        checklist: acceptanceChecklist\r\n      }\r\n    };\r\n\r\n    onUpdate?.({ delivery: deliveryData });\r\n  };\r\n\r\n  const handleCorrectionRequest = () => {\r\n    if (!correctionRequest?.description?.trim()) return;\r\n\r\n    const correctionData = {\r\n      id: `correction-${Date.now()}`,\r\n      description: correctionRequest?.description,\r\n      timeline: correctionRequest?.timeline,\r\n      evidence: correctionRequest?.evidence,\r\n      requestDate: new Date()?.toISOString()?.split('T')?.[0],\r\n      status: 'pending'\r\n    };\r\n\r\n    onUpdate?.({\r\n      delivery: {\r\n        ...project?.delivery,\r\n        corrections: [...(project?.delivery?.corrections || []), correctionData],\r\n        status: 'corrections_requested'\r\n      }\r\n    });\r\n\r\n    setCorrectionRequest({ description: '', timeline: '', evidence: '' });\r\n  };\r\n\r\n  const getDeliveryTypeIcon = (type) => {\r\n    switch (type) {\r\n      case 'construction': return 'Building';\r\n      case 'pieces': return 'Package';\r\n      default: return 'Truck';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'scheduled': return 'text-blue-600 bg-blue-100';\r\n      case 'in_progress': return 'text-yellow-600 bg-yellow-100';\r\n      case 'accepted': return 'text-green-600 bg-green-100';\r\n      case 'corrections_requested': return 'text-orange-600 bg-orange-100';\r\n      case 'pending_corrections': return 'text-red-600 bg-red-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <h5 className=\"font-medium text-sm\">Gesti√≥n de Entrega</h5>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          Coordinaci√≥n de entrega final y gesti√≥n de conformidad (Pasos 27-32)\r\n        </p>\r\n\r\n        {/* Delivery Type */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name={getDeliveryTypeIcon(project?.delivery?.type)} size={16} className=\"text-blue-600\" />\r\n            <span className=\"font-medium text-sm\">Tipo de Entrega</span>\r\n          </div>\r\n          <p className=\"text-sm\">\r\n            {project?.delivery?.type === 'construction' ? 'Obra / Construcci√≥n' : 'Piezas / Equipos'}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Delivery Status */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h6 className=\"font-medium text-sm\">Estado de Entrega</h6>\r\n            <span className={`text-xs px-2 py-1 rounded ${getStatusColor(project?.delivery?.status)}`}>\r\n              {project?.delivery?.status === 'scheduled' ? 'Programada' :\r\n               project?.delivery?.status === 'in_progress' ? 'En Progreso' :\r\n               project?.delivery?.status === 'accepted' ? 'Aceptada' :\r\n               project?.delivery?.status === 'corrections_requested' ? 'Correcciones Solicitadas' :\r\n               project?.delivery?.status === 'pending_corrections' ? 'Pendiente Correcciones' : 'Pendiente'}\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 gap-3\">\r\n            <div>\r\n              <label className=\"text-sm font-medium block mb-1\">Fecha Programada</label>\r\n              <Input\r\n                type=\"date\"\r\n                value={deliveryUpdate?.scheduledDate}\r\n                onChange={(e) => setDeliveryUpdate(prev => ({ ...prev, scheduledDate: e?.target?.value }))}\r\n                className=\"text-sm\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Deliverables */}\r\n        {project?.delivery?.deliverables && (\r\n          <div className=\"space-y-3\">\r\n            <h6 className=\"font-medium text-sm\">Entregables</h6>\r\n            <div className=\"space-y-2\">\r\n              {project?.delivery?.deliverables?.map((item, index) => (\r\n                <div key={index} className=\"flex items-center space-x-3 p-2 border rounded-lg\">\r\n                  <Icon name=\"Package\" size={16} className=\"text-muted-foreground\" />\r\n                  <span className=\"text-sm flex-1\">{item}</span>\r\n                  <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Client Acceptance Checklist */}\r\n        {project?.delivery?.clientAcceptance && (\r\n          <div className=\"space-y-3\">\r\n            <h6 className=\"font-medium text-sm\">Lista de Aceptaci√≥n del Cliente</h6>\r\n            \r\n            <div className=\"space-y-2\">\r\n              {acceptanceChecklist?.map((item, index) => (\r\n                <label key={index} className=\"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50\">\r\n                  <Checkbox\r\n                    checked={item?.checked || false}\r\n                    onChange={(checked) => handleChecklistUpdate(index, checked)}\r\n                  />\r\n                  <span className=\"text-sm flex-1\">{item?.item}</span>\r\n                  {item?.checked && (\r\n                    <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n                  )}\r\n                </label>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"p-3 bg-gray-50 rounded-lg\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <span className=\"font-medium text-sm\">Progreso de Aceptaci√≥n</span>\r\n                <span className=\"text-sm font-bold\">\r\n                  {acceptanceChecklist?.filter(item => item?.checked)?.length || 0}/\r\n                  {acceptanceChecklist?.length || 0}\r\n                </span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2 mt-2\">\r\n                <div \r\n                  className=\"bg-green-600 h-2 rounded-full transition-all\"\r\n                  style={{ \r\n                    width: `${((acceptanceChecklist?.filter(item => item?.checked)?.length || 0) / (acceptanceChecklist?.length || 1)) * 100}%` \r\n                  }}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n\r\n            <Button\r\n              onClick={handleDeliveryConfirmation}\r\n              disabled={!acceptanceChecklist?.every(item => item?.checked)}\r\n              iconName=\"CheckCircle\"\r\n              iconPosition=\"left\"\r\n              size=\"sm\"\r\n              className=\"w-full\"\r\n            >\r\n              Confirmar Entrega\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Correction Management */}\r\n        {project?.delivery?.status === 'corrections_requested' || project?.delivery?.corrections?.length > 0 && (\r\n          <div className=\"space-y-3\">\r\n            <h6 className=\"font-medium text-sm\">Gesti√≥n de Correcciones</h6>\r\n            \r\n            {/* Existing Corrections */}\r\n            {project?.delivery?.corrections?.map((correction) => (\r\n              <div key={correction?.id} className=\"p-3 border rounded-lg bg-orange-50\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <h4 className=\"font-medium text-sm\">{correction?.description}</h4>\r\n                  <span className={`text-xs px-2 py-1 rounded ${getStatusColor(correction?.status)}`}>\r\n                    {correction?.status === 'pending' ? 'Pendiente' :\r\n                     correction?.status === 'in_progress' ? 'En Proceso' : 'Completada'}\r\n                  </span>\r\n                </div>\r\n                \r\n                {correction?.timeline && (\r\n                  <p className=\"text-sm text-muted-foreground mb-1\">\r\n                    <strong>Tiempo estimado:</strong> {correction?.timeline}\r\n                  </p>\r\n                )}\r\n                \r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Solicitado el {new Date(correction?.requestDate)?.toLocaleDateString()}\r\n                </p>\r\n              </div>\r\n            ))}\r\n\r\n            {/* New Correction Request */}\r\n            <div className=\"space-y-3 p-3 border rounded-lg bg-gray-50\">\r\n              <h6 className=\"font-medium text-sm\">Solicitar Correcci√≥n</h6>\r\n              \r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Descripci√≥n</label>\r\n                <textarea\r\n                  value={correctionRequest?.description}\r\n                  onChange={(e) => setCorrectionRequest(prev => ({ ...prev, description: e?.target?.value }))}\r\n                  placeholder=\"Descripci√≥n detallada de la correcci√≥n necesaria...\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n                  rows={2}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Tiempo Estimado</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={correctionRequest?.timeline}\r\n                  onChange={(e) => setCorrectionRequest(prev => ({ ...prev, timeline: e?.target?.value }))}\r\n                  placeholder=\"ej. 3-5 d√≠as h√°biles\"\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Evidencia</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={correctionRequest?.evidence}\r\n                  onChange={(e) => setCorrectionRequest(prev => ({ ...prev, evidence: e?.target?.value }))}\r\n                  placeholder=\"Fotograf√≠as, documentos de referencia...\"\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <Button\r\n                onClick={handleCorrectionRequest}\r\n                disabled={!correctionRequest?.description?.trim()}\r\n                iconName=\"AlertTriangle\"\r\n                iconPosition=\"left\"\r\n                size=\"sm\"\r\n                className=\"w-full\"\r\n              >\r\n                Solicitar Correcci√≥n\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Delivery Completion */}\r\n        {project?.delivery?.status === 'accepted' && (\r\n          <div className=\"p-3 bg-green-50 rounded-lg\">\r\n            <div className=\"flex items-center space-x-2 mb-2\">\r\n              <Icon name=\"CheckCircle\" size={16} className=\"text-green-600\" />\r\n              <span className=\"font-medium text-sm text-green-800\">Entrega Completada</span>\r\n            </div>\r\n            <p className=\"text-sm text-green-700\">\r\n              Aceptada el {new Date(project?.delivery?.acceptanceDate)?.toLocaleDateString()}\r\n            </p>\r\n            {project?.delivery?.clientFeedback && (\r\n              <p className=\"text-sm text-green-700 mt-1\">\r\n                <strong>Comentarios:</strong> {project?.delivery?.clientFeedback}\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Delivery Guidelines */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name=\"Info\" size={16} className=\"text-blue-600\" />\r\n            <span className=\"font-medium text-sm text-blue-800\">Proceso de Entrega</span>\r\n          </div>\r\n          <ul className=\"text-xs text-blue-700 space-y-1\">\r\n            <li>1. Verificar lista de aceptaci√≥n del cliente</li>\r\n            <li>2. Coordinar entrega final y actas de conformidad</li>\r\n            <li>3. Gestionar correcciones si son necesarias</li>\r\n            <li>4. Obtener aceptaci√≥n final del cliente</li>\r\n            <li>5. Proceder a facturaci√≥n</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeliveryManagementPanel;","import React, { useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\n\r\nconst TraceabilityPanel = ({ project, onUpdate }) => {\r\n  const [newEvidence, setNewEvidence] = useState({\r\n    type: 'photo',\r\n    description: '',\r\n    date: new Date()?.toISOString()?.split('T')?.[0],\r\n    file: ''\r\n  });\r\n\r\n  const [newAgreement, setNewAgreement] = useState({\r\n    description: '',\r\n    date: new Date()?.toISOString()?.split('T')?.[0],\r\n    participants: []\r\n  });\r\n\r\n  const [showEvidenceForm, setShowEvidenceForm] = useState(false);\r\n  const [showAgreementForm, setShowAgreementForm] = useState(false);\r\n\r\n  const handleAddEvidence = () => {\r\n    if (!newEvidence?.description?.trim()) return;\r\n\r\n    const evidence = {\r\n      id: `evidence-${Date.now()}`,\r\n      type: newEvidence?.type,\r\n      description: newEvidence?.description,\r\n      date: newEvidence?.date,\r\n      file: newEvidence?.file,\r\n      addedBy: project?.salesRep,\r\n      timestamp: new Date()?.toISOString()\r\n    };\r\n\r\n    const updatedTraceability = {\r\n      ...project?.traceability,\r\n      evidence: [...(project?.traceability?.evidence || []), evidence]\r\n    };\r\n\r\n    onUpdate?.(updatedTraceability);\r\n    setNewEvidence({\r\n      type: 'photo',\r\n      description: '',\r\n      date: new Date()?.toISOString()?.split('T')?.[0],\r\n      file: ''\r\n    });\r\n    setShowEvidenceForm(false);\r\n  };\r\n\r\n  const handleAddAgreement = () => {\r\n    if (!newAgreement?.description?.trim()) return;\r\n\r\n    const agreement = {\r\n      id: `agreement-${Date.now()}`,\r\n      description: newAgreement?.description,\r\n      date: newAgreement?.date,\r\n      participants: newAgreement?.participants,\r\n      registeredBy: project?.salesRep,\r\n      timestamp: new Date()?.toISOString()\r\n    };\r\n\r\n    const updatedTraceability = {\r\n      ...project?.traceability,\r\n      agreements: [...(project?.traceability?.agreements || []), agreement]\r\n    };\r\n\r\n    onUpdate?.(updatedTraceability);\r\n    setNewAgreement({\r\n      description: '',\r\n      date: new Date()?.toISOString()?.split('T')?.[0],\r\n      participants: []\r\n    });\r\n    setShowAgreementForm(false);\r\n  };\r\n\r\n  const getEvidenceIcon = (type) => {\r\n    switch (type) {\r\n      case 'photo': return 'Camera';\r\n      case 'document': return 'FileText';\r\n      case 'video': return 'Video';\r\n      case 'certificate': return 'Award';\r\n      default: return 'File';\r\n    }\r\n  };\r\n\r\n  const getEvidenceColor = (type) => {\r\n    switch (type) {\r\n      case 'photo': return 'text-blue-600 bg-blue-100';\r\n      case 'document': return 'text-green-600 bg-green-100';\r\n      case 'video': return 'text-purple-600 bg-purple-100';\r\n      case 'certificate': return 'text-yellow-600 bg-yellow-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"space-y-4\">\r\n        <h5 className=\"font-medium text-sm\">Trazabilidad del Proyecto</h5>\r\n        <p className=\"text-xs text-muted-foreground\">\r\n          Mantener trazabilidad completa de comunicaciones, acuerdos y evidencias (Paso 26)\r\n        </p>\r\n\r\n        {/* Communications History */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h6 className=\"font-medium text-sm\">Historial de Comunicaciones</h6>\r\n            <span className=\"text-xs text-muted-foreground\">\r\n              {project?.communications?.length || 0} registros\r\n            </span>\r\n          </div>\r\n          \r\n          <div className=\"space-y-2 max-h-40 overflow-y-auto\">\r\n            {project?.communications?.slice(-3)?.reverse()?.map((comm) => (\r\n              <div key={comm?.id} className=\"p-2 border rounded-lg\">\r\n                <div className=\"flex items-center space-x-2 mb-1\">\r\n                  <Icon \r\n                    name={comm?.type === 'whatsapp' ? 'MessageCircle' : \r\n                          comm?.type === 'email' ? 'Mail' : \r\n                          comm?.type === 'phone' ? 'Phone' : 'Users'} \r\n                    size={12} \r\n                    className=\"text-muted-foreground\" \r\n                  />\r\n                  <span className=\"text-xs text-muted-foreground\">\r\n                    {new Date(comm?.date)?.toLocaleDateString()}\r\n                  </span>\r\n                  <span className=\"text-xs text-muted-foreground capitalize\">\r\n                    {comm?.type}\r\n                  </span>\r\n                </div>\r\n                <p className=\"text-xs text-foreground\">{comm?.content}</p>\r\n              </div>\r\n            ))}\r\n            \r\n            {(!project?.communications || project?.communications?.length === 0) && (\r\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                Sin comunicaciones registradas\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Agreements */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h6 className=\"font-medium text-sm\">Acuerdos y Compromisos</h6>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Plus\"\r\n              onClick={() => setShowAgreementForm(!showAgreementForm)}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"space-y-2\">\r\n            {project?.traceability?.agreements?.map((agreement) => (\r\n              <div key={agreement?.id} className=\"p-3 border rounded-lg bg-green-50\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium\">{agreement?.description}</p>\r\n                    <p className=\"text-xs text-muted-foreground mt-1\">\r\n                      {new Date(agreement?.date)?.toLocaleDateString()} - {agreement?.registeredBy}\r\n                    </p>\r\n                  </div>\r\n                  <Icon name=\"FileCheck\" size={16} className=\"text-green-600\" />\r\n                </div>\r\n                \r\n                {agreement?.participants?.length > 0 && (\r\n                  <div className=\"flex items-center space-x-1 mt-2\">\r\n                    <Icon name=\"Users\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground\">\r\n                      {agreement?.participants?.join(', ')}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            \r\n            {(!project?.traceability?.agreements || project?.traceability?.agreements?.length === 0) && (\r\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                Sin acuerdos registrados\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {showAgreementForm && (\r\n            <div className=\"space-y-3 p-3 border rounded-lg bg-gray-50\">\r\n              <h6 className=\"font-medium text-sm\">Nuevo Acuerdo</h6>\r\n              \r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Descripci√≥n</label>\r\n                <textarea\r\n                  value={newAgreement?.description}\r\n                  onChange={(e) => setNewAgreement(prev => ({ ...prev, description: e?.target?.value }))}\r\n                  placeholder=\"Descripci√≥n del acuerdo o compromiso...\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm resize-none\"\r\n                  rows={2}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Fecha</label>\r\n                <Input\r\n                  type=\"date\"\r\n                  value={newAgreement?.date}\r\n                  onChange={(e) => setNewAgreement(prev => ({ ...prev, date: e?.target?.value }))}\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Button\r\n                  onClick={handleAddAgreement}\r\n                  disabled={!newAgreement?.description?.trim()}\r\n                  iconName=\"FileCheck\"\r\n                  iconPosition=\"left\"\r\n                  size=\"sm\"\r\n                  className=\"flex-1\"\r\n                >\r\n                  Registrar Acuerdo\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  iconName=\"X\"\r\n                  onClick={() => setShowAgreementForm(false)}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Evidence Management */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <h6 className=\"font-medium text-sm\">Evidencias y Documentaci√≥n</h6>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              iconName=\"Plus\"\r\n              onClick={() => setShowEvidenceForm(!showEvidenceForm)}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"space-y-2\">\r\n            {project?.traceability?.evidence?.map((evidence) => (\r\n              <div key={evidence?.id} className=\"p-3 border rounded-lg\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Icon \r\n                      name={getEvidenceIcon(evidence?.type)} \r\n                      size={16} \r\n                      className={getEvidenceColor(evidence?.type)?.split(' ')?.[0]}\r\n                    />\r\n                    <div>\r\n                      <p className=\"text-sm font-medium\">{evidence?.description}</p>\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        {new Date(evidence?.date)?.toLocaleDateString()} - {evidence?.addedBy}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <span className={`text-xs px-2 py-1 rounded ${getEvidenceColor(evidence?.type)}`}>\r\n                    {evidence?.type === 'photo' ? 'Foto' :\r\n                     evidence?.type === 'document' ? 'Documento' :\r\n                     evidence?.type === 'video' ? 'Video' : 'Certificado'}\r\n                  </span>\r\n                </div>\r\n                \r\n                {evidence?.file && (\r\n                  <div className=\"flex items-center space-x-2 mt-2\">\r\n                    <Icon name=\"Paperclip\" size={12} className=\"text-muted-foreground\" />\r\n                    <span className=\"text-xs text-muted-foreground\">{evidence?.file}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            \r\n            {(!project?.traceability?.evidence || project?.traceability?.evidence?.length === 0) && (\r\n              <p className=\"text-sm text-muted-foreground text-center py-4\">\r\n                Sin evidencias registradas\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {showEvidenceForm && (\r\n            <div className=\"space-y-3 p-3 border rounded-lg bg-gray-50\">\r\n              <h6 className=\"font-medium text-sm\">Nueva Evidencia</h6>\r\n              \r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Tipo</label>\r\n                <select\r\n                  value={newEvidence?.type}\r\n                  onChange={(e) => setNewEvidence(prev => ({ ...prev, type: e?.target?.value }))}\r\n                  className=\"w-full px-2 py-1 border border-gray-300 rounded text-sm\"\r\n                >\r\n                  <option value=\"photo\">Fotograf√≠a</option>\r\n                  <option value=\"document\">Documento</option>\r\n                  <option value=\"video\">Video</option>\r\n                  <option value=\"certificate\">Certificado</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Descripci√≥n</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={newEvidence?.description}\r\n                  onChange={(e) => setNewEvidence(prev => ({ ...prev, description: e?.target?.value }))}\r\n                  placeholder=\"Descripci√≥n de la evidencia...\"\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Fecha</label>\r\n                <Input\r\n                  type=\"date\"\r\n                  value={newEvidence?.date}\r\n                  onChange={(e) => setNewEvidence(prev => ({ ...prev, date: e?.target?.value }))}\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"text-xs font-medium block mb-1\">Archivo</label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={newEvidence?.file}\r\n                  onChange={(e) => setNewEvidence(prev => ({ ...prev, file: e?.target?.value }))}\r\n                  placeholder=\"Nombre del archivo o referencia...\"\r\n                  className=\"text-sm\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-2\">\r\n                <Button\r\n                  onClick={handleAddEvidence}\r\n                  disabled={!newEvidence?.description?.trim()}\r\n                  iconName=\"Camera\"\r\n                  iconPosition=\"left\"\r\n                  size=\"sm\"\r\n                  className=\"flex-1\"\r\n                >\r\n                  Registrar Evidencia\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  iconName=\"X\"\r\n                  onClick={() => setShowEvidenceForm(false)}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Traceability Summary */}\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2 mb-2\">\r\n            <Icon name=\"Search\" size={16} className=\"text-blue-600\" />\r\n            <span className=\"font-medium text-sm text-blue-800\">Resumen de Trazabilidad</span>\r\n          </div>\r\n          <div className=\"grid grid-cols-3 gap-3\">\r\n            <div className=\"text-center\">\r\n              <p className=\"text-sm font-bold text-blue-800\">\r\n                {project?.communications?.length || 0}\r\n              </p>\r\n              <p className=\"text-xs text-blue-600\">Comunicaciones</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <p className=\"text-sm font-bold text-blue-800\">\r\n                {project?.traceability?.agreements?.length || 0}\r\n              </p>\r\n              <p className=\"text-xs text-blue-600\">Acuerdos</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <p className=\"text-sm font-bold text-blue-800\">\r\n                {project?.traceability?.evidence?.length || 0}\r\n              </p>\r\n              <p className=\"text-xs text-blue-600\">Evidencias</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TraceabilityPanel;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Button from '../../components/ui/Button';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\n\r\nimport StartupTrackingPanel from './components/StartupTrackingPanel';\r\nimport ExecutionProgressPanel from './components/ExecutionProgressPanel';\r\nimport ClientCommunicationPanel from './components/ClientCommunicationPanel';\r\nimport ChangeRequestPanel from './components/ChangeRequestPanel';\r\nimport DeliveryManagementPanel from './components/DeliveryManagementPanel';\r\nimport TraceabilityPanel from './components/TraceabilityPanel';\r\n\r\nconst SalesExecutionMonitoring = () => {\r\n  const [projects, setProjects] = useState([]);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showControls, setShowControls] = useState(false);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [headerMenuOpen, setHeaderMenuOpen] = useState(false);\r\n  const [activePanel, setActivePanel] = useState('execution');\r\n\r\n  // Execution phases following the Spanish workflow diagram (steps 17-32)\r\n  const executionPhases = [\r\n    {\r\n      id: 'work-order-generated',\r\n      name: 'Orden Generada',\r\n      description: 'WorkOrder interno generado con alcances finales',\r\n      color: 'bg-blue-600',\r\n      icon: 'FileText',\r\n      step: 17\r\n    },\r\n    {\r\n      id: 'startup-tracking',\r\n      name: 'Seguimiento de Arranque',\r\n      description: 'Confirmar fechas y responsable en campo',\r\n      color: 'bg-indigo-600',\r\n      icon: 'PlayCircle',\r\n      step: 19\r\n    },\r\n    {\r\n      id: 'execution-monitoring',\r\n      name: 'Monitoreo de Ejecuci√≥n',\r\n      description: 'Punto de contacto del cliente durante la obra',\r\n      color: 'bg-purple-600',\r\n      icon: 'Activity',\r\n      step: 20\r\n    },\r\n    {\r\n      id: 'delivery-coordination',\r\n      name: 'Coordinaci√≥n de Entrega',\r\n      description: 'Entrega final y gesti√≥n de conformidad',\r\n      color: 'bg-orange-600',\r\n      icon: 'Truck',\r\n      step: 27\r\n    },\r\n    {\r\n      id: 'billing-process',\r\n      name: 'Proceso de Facturaci√≥n',\r\n      description: 'Facturaci√≥n y generaci√≥n de recibo',\r\n      color: 'bg-green-600',\r\n      icon: 'Receipt',\r\n      step: 32\r\n    }\r\n  ];\r\n\r\n  // Mock execution projects data following the workflow\r\n  const mockProjects = [\r\n    {\r\n      id: \"EXEC-001\",\r\n      workOrderRef: \"WO-2024-UDG-001\",\r\n      clientName: \"Urban Development Group\",\r\n      projectType: \"construction\",\r\n      salesRep: \"Alejandro Torres\",\r\n      phase: \"startup-tracking\",\r\n      priority: \"high\",\r\n      contractValue: 3750000,\r\n      startDate: \"2024-04-15\",\r\n      estimatedEndDate: \"2024-08-30\",\r\n      clientContact: {\r\n        name: \"Arq. Sofia Ram√≠rez\",\r\n        phone: \"+52 55 6789 0123\",\r\n        email: \"desarrollo@urbandevelopment.mx\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Sistema HVAC para centro comercial\",\r\n        location: \"Tijuana, Baja California\",\r\n        scope: \"Instalaci√≥n completa de climatizaci√≥n con controles inteligentes\"\r\n      },\r\n      fieldSupervisor: {\r\n        name: \"Ing. Roberto Campos\",\r\n        phone: \"+52 55 1111 2222\",\r\n        email: \"roberto.campos@aireflowpro.com\"\r\n      },\r\n      startup: {\r\n        confirmedDate: \"2024-04-15\",\r\n        status: \"confirmed\",\r\n        preWorkMeeting: \"2024-04-12\",\r\n        accessPermits: true,\r\n        safetyBriefing: true\r\n      },\r\n      milestones: [\r\n        {\r\n          id: \"milestone-1\",\r\n          name: \"Equipos principales instalados\",\r\n          targetDate: \"2024-05-15\",\r\n          status: \"pending\",\r\n          progress: 0\r\n        },\r\n        {\r\n          id: \"milestone-2\", \r\n          name: \"Ductos y conexiones completadas\",\r\n          targetDate: \"2024-06-30\",\r\n          status: \"pending\",\r\n          progress: 0\r\n        },\r\n        {\r\n          id: \"milestone-3\",\r\n          name: \"Pruebas y puesta en marcha\",\r\n          targetDate: \"2024-07-15\",\r\n          status: \"pending\", \r\n          progress: 0\r\n        },\r\n        {\r\n          id: \"milestone-4\",\r\n          name: \"Entrega final y documentaci√≥n\",\r\n          targetDate: \"2024-08-30\",\r\n          status: \"pending\",\r\n          progress: 0\r\n        }\r\n      ],\r\n      communications: [\r\n        {\r\n          id: \"comm-exec-1\",\r\n          type: \"email\",\r\n          date: \"2024-03-30\",\r\n          content: \"Confirmaci√≥n de inicio de obra para el 15 de abril\",\r\n          participants: [\"Arq. Sofia Ram√≠rez\", \"Ing. Roberto Campos\"],\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      changeRequests: [],\r\n      traceability: {\r\n        agreements: [],\r\n        evidence: [],\r\n        communications: []\r\n      }\r\n    },\r\n    {\r\n      id: \"EXEC-002\",\r\n      workOrderRef: \"WO-2024-ABC-002\",\r\n      clientName: \"Corporaci√≥n ABC\",\r\n      projectType: \"construction\",\r\n      salesRep: \"Mar√≠a Garc√≠a\",\r\n      phase: \"execution-monitoring\", \r\n      priority: \"urgent\",\r\n      contractValue: 2500000,\r\n      startDate: \"2024-03-20\",\r\n      estimatedEndDate: \"2024-06-20\",\r\n      clientContact: {\r\n        name: \"Ing. Carlos Rodriguez\",\r\n        phone: \"+52 55 1234 5678\",\r\n        email: \"contacto@corporacionabc.com\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Instalaci√≥n de sistema HVAC para edificio corporativo\",\r\n        location: \"Ciudad de M√©xico\",\r\n        scope: \"Sistema completo de climatizaci√≥n para 12 pisos\"\r\n      },\r\n      fieldSupervisor: {\r\n        name: \"Ing. Ana Mart√≠nez\",\r\n        phone: \"+52 55 3333 4444\",\r\n        email: \"ana.martinez@aireflowpro.com\"\r\n      },\r\n      startup: {\r\n        confirmedDate: \"2024-03-20\",\r\n        status: \"completed\",\r\n        actualStartDate: \"2024-03-20\"\r\n      },\r\n      progress: {\r\n        overallProgress: 65,\r\n        currentPhase: \"Instalaci√≥n de ductos - Pisos 7-12\",\r\n        nextMilestone: \"Instalaci√≥n equipos principales\",\r\n        daysRemaining: 45\r\n      },\r\n      milestones: [\r\n        {\r\n          id: \"milestone-1\",\r\n          name: \"Preparaci√≥n y permisos\",\r\n          targetDate: \"2024-03-25\",\r\n          status: \"completed\",\r\n          progress: 100,\r\n          completedDate: \"2024-03-24\"\r\n        },\r\n        {\r\n          id: \"milestone-2\",\r\n          name: \"Instalaci√≥n pisos 1-6\",\r\n          targetDate: \"2024-04-30\",\r\n          status: \"completed\", \r\n          progress: 100,\r\n          completedDate: \"2024-04-28\"\r\n        },\r\n        {\r\n          id: \"milestone-3\",\r\n          name: \"Instalaci√≥n pisos 7-12\",\r\n          targetDate: \"2024-05-30\",\r\n          status: \"in_progress\",\r\n          progress: 75\r\n        },\r\n        {\r\n          id: \"milestone-4\",\r\n          name: \"Pruebas y entrega\",\r\n          targetDate: \"2024-06-20\",\r\n          status: \"pending\",\r\n          progress: 0\r\n        }\r\n      ],\r\n      communications: [\r\n        {\r\n          id: \"comm-exec-2\",\r\n          type: \"whatsapp\",\r\n          date: \"2024-04-28\",\r\n          content: \"Cliente reporta satisfacci√≥n con progreso. Solicita actualizaci√≥n semanal\",\r\n          participants: [\"Ing. Carlos Rodriguez\"],\r\n          urgency: \"normal\"\r\n        },\r\n        {\r\n          id: \"comm-exec-3\", \r\n          type: \"email\",\r\n          date: \"2024-04-25\",\r\n          content: \"Env√≠o de fotos de progreso y actualizaci√≥n de cronograma\",\r\n          participants: [\"Ing. Carlos Rodriguez\", \"Mar√≠a Garc√≠a\"],\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      changeRequests: [\r\n        {\r\n          id: \"change-1\",\r\n          description: \"Agregar control individual por piso en lugar de control centralizado\",\r\n          requestDate: \"2024-04-20\",\r\n          status: \"approved\",\r\n          commercialImpact: {\r\n            cost: 180000,\r\n            timeImpact: \"2 semanas adicionales\"\r\n          },\r\n          approvalDate: \"2024-04-22\",\r\n          implementation: \"in_progress\"\r\n        }\r\n      ],\r\n      traceability: {\r\n        agreements: [\r\n          \"Cambio aprobado por email el 2024-04-22\",\r\n          \"Confirmaci√≥n de costo adicional firmado\"\r\n        ],\r\n        evidence: [\r\n          \"Fotos de progreso pisos 1-6 completos\",\r\n          \"Certificado de calidad de materiales\"\r\n        ],\r\n        communications: [\r\n          \"Reuni√≥n semanal de seguimiento establecida\",\r\n          \"Canal WhatsApp para comunicaci√≥n urgente\"\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      id: \"EXEC-003\",\r\n      workOrderRef: \"WO-2024-TEC-003\",\r\n      clientName: \"Tech Solutions SA\",\r\n      projectType: \"pieces\",\r\n      salesRep: \"Patricia Morales\",\r\n      phase: \"delivery-coordination\",\r\n      priority: \"medium\", \r\n      contractValue: 1950000,\r\n      startDate: \"2024-02-15\",\r\n      estimatedEndDate: \"2024-04-30\",\r\n      clientContact: {\r\n        name: \"Lic. Miguel Hern√°ndez\",\r\n        phone: \"+52 55 2345 6789\",\r\n        email: \"infraestructura@techsolutions.com\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Modernizaci√≥n de sistema de climatizaci√≥n para oficinas\",\r\n        location: \"Puebla, Puebla\", \r\n        scope: \"Reemplazo de equipos obsoletos y optimizaci√≥n energ√©tica\"\r\n      },\r\n      fieldSupervisor: {\r\n        name: \"Ing. Carlos Vega\",\r\n        phone: \"+52 55 5555 6666\",\r\n        email: \"carlos.vega@aireflowpro.com\"\r\n      },\r\n      progress: {\r\n        overallProgress: 95,\r\n        currentPhase: \"Pruebas finales y documentaci√≥n\",\r\n        nextMilestone: \"Entrega final\",\r\n        daysRemaining: 5\r\n      },\r\n      delivery: {\r\n        type: \"pieces\",\r\n        scheduledDate: \"2024-04-30\",\r\n        status: \"scheduled\",\r\n        deliverables: [\r\n          \"Equipos HVAC instalados y operando\",\r\n          \"Manual de operaci√≥n y mantenimiento\",\r\n          \"Certificados de calidad\",\r\n          \"Garant√≠as de equipos y mano de obra\"\r\n        ],\r\n        clientAcceptance: {\r\n          status: \"pending\",\r\n          checklist: [\r\n            { item: \"Funcionamiento de todos los equipos\", checked: true },\r\n            { item: \"Temperaturas seg√∫n especificaciones\", checked: true },\r\n            { item: \"Documentaci√≥n t√©cnica completa\", checked: false },\r\n            { item: \"Capacitaci√≥n al personal\", checked: false }\r\n          ]\r\n        }\r\n      },\r\n      milestones: [\r\n        {\r\n          id: \"milestone-1\",\r\n          name: \"Desmontaje equipos obsoletos\",\r\n          status: \"completed\",\r\n          progress: 100,\r\n          completedDate: \"2024-03-05\"\r\n        },\r\n        {\r\n          id: \"milestone-2\", \r\n          name: \"Instalaci√≥n nuevos equipos\",\r\n          status: \"completed\",\r\n          progress: 100, \r\n          completedDate: \"2024-04-10\"\r\n        },\r\n        {\r\n          id: \"milestone-3\",\r\n          name: \"Pruebas y optimizaci√≥n\", \r\n          status: \"completed\",\r\n          progress: 100,\r\n          completedDate: \"2024-04-25\"\r\n        },\r\n        {\r\n          id: \"milestone-4\",\r\n          name: \"Documentaci√≥n y entrega\",\r\n          status: \"in_progress\", \r\n          progress: 80\r\n        }\r\n      ],\r\n      communications: [\r\n        {\r\n          id: \"comm-exec-4\",\r\n          type: \"email\",\r\n          date: \"2024-04-26\",\r\n          content: \"Confirmaci√≥n de fecha de entrega final para el 30 de abril\",\r\n          participants: [\"Lic. Miguel Hern√°ndez\"],\r\n          urgency: \"normal\"\r\n        }\r\n      ],\r\n      traceability: {\r\n        agreements: [\r\n          \"Cronograma de entrega confirmado por cliente\",\r\n          \"Especificaciones t√©cnicas validadas\"\r\n        ],\r\n        evidence: [\r\n          \"Fotos de instalaci√≥n completada\",\r\n          \"Pruebas de rendimiento energ√©tico\",\r\n          \"Certificados de equipos\"\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      id: \"EXEC-004\",\r\n      workOrderRef: \"WO-2024-GRN-004\", \r\n      clientName: \"Green Energy M√©xico\",\r\n      projectType: \"construction\",\r\n      salesRep: \"Carmen D√≠az\",\r\n      phase: \"billing-process\",\r\n      priority: \"low\",\r\n      contractValue: 4200000,\r\n      startDate: \"2024-01-15\",\r\n      estimatedEndDate: \"2024-03-31\", \r\n      clientContact: {\r\n        name: \"Ing. Fernando L√≥pez\",\r\n        phone: \"+52 55 4567 8901\",\r\n        email: \"ventas@greenenergy.mx\"\r\n      },\r\n      projectDetails: {\r\n        description: \"Sistema HVAC para complejo residencial sustentable\",\r\n        location: \"Monterrey, Nuevo Le√≥n\",\r\n        scope: \"Instalaci√≥n completa con controles inteligentes y eficiencia energ√©tica\"\r\n      },\r\n      progress: {\r\n        overallProgress: 100,\r\n        currentPhase: \"Proyecto completado\",\r\n        status: \"completed\",\r\n        completedDate: \"2024-03-28\"\r\n      },\r\n      delivery: {\r\n        type: \"construction\",\r\n        status: \"accepted\",\r\n        acceptanceDate: \"2024-03-30\",\r\n        clientFeedback: \"Excelente calidad y cumplimiento de cronograma\"\r\n      },\r\n      billing: {\r\n        status: \"in_progress\",\r\n        invoiceGenerated: true,\r\n        invoiceNumber: \"FACT-2024-0089\",\r\n        invoiceDate: \"2024-04-01\",\r\n        amount: 4200000,\r\n        paymentTerms: \"30 d√≠as\",\r\n        billingData: {\r\n          businessName: \"Green Energy M√©xico S.A. de C.V.\",\r\n          rfc: \"GEM123456789\",\r\n          address: \"Av. Constituci√≥n 2500, Monterrey, NL\"\r\n        }\r\n      },\r\n      traceability: {\r\n        agreements: [\r\n          \"Acta de entrega-recepci√≥n firmada\",\r\n          \"Conformidad del cliente documentada\",\r\n          \"Garant√≠as entregadas y explicadas\"\r\n        ],\r\n        evidence: [\r\n          \"Fotos de instalaci√≥n final\",\r\n          \"Certificados de pruebas de funcionamiento\",\r\n          \"Manual de usuario entregado\"\r\n        ]\r\n      }\r\n    }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const loadProjects = async () => {\r\n      setIsLoading(true);\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      setProjects(mockProjects);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    loadProjects();\r\n  }, []);\r\n\r\n  const handleProjectSelect = (project) => {\r\n    setSelectedProject(project);\r\n    setShowControls(true);\r\n  };\r\n\r\n  const handlePhaseTransition = (projectId, newPhase) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { ...proj, phase: newPhase }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const handleStartupConfirmation = (projectId, startupData) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { ...proj, startup: { ...proj?.startup, ...startupData } }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const handleProgressUpdate = (projectId, progressData) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { ...proj, progress: { ...proj?.progress, ...progressData } }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const handleCommunicationAdd = (projectId, communication) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { \r\n            ...proj, \r\n            communications: [...(proj?.communications || []), communication]\r\n          }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const handleChangeRequest = (projectId, changeRequest) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { \r\n            ...proj, \r\n            changeRequests: [...(proj?.changeRequests || []), changeRequest]\r\n          }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const handleDeliveryUpdate = (projectId, deliveryData) => {\r\n    setProjects(prev => prev?.map(proj => \r\n      proj?.id === projectId \r\n        ? { ...proj, delivery: { ...proj?.delivery, ...deliveryData } }\r\n        : proj\r\n    ));\r\n  };\r\n\r\n  const getProjectsByPhase = (phaseId) => {\r\n    return projects?.filter(proj => proj?.phase === phaseId) || [];\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'border-l-red-600 bg-red-50';\r\n      case 'high': return 'border-l-orange-500 bg-orange-50';\r\n      case 'medium': return 'border-l-yellow-500 bg-yellow-50';\r\n      case 'low': return 'border-l-green-500 bg-green-50';\r\n      default: return 'border-l-gray-400 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const getProgressColor = (progress) => {\r\n    if (progress >= 90) return 'text-green-600 bg-green-100';\r\n    if (progress >= 70) return 'text-blue-600 bg-blue-100';\r\n    if (progress >= 50) return 'text-yellow-600 bg-yellow-100';\r\n    return 'text-red-600 bg-red-100';\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando proyectos en ejecuci√≥n...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={sidebarCollapsed} onToggle={() => setSidebarCollapsed(!sidebarCollapsed)} />\r\n      \r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setHeaderMenuOpen(!headerMenuOpen)} isMenuOpen={headerMenuOpen} />\r\n        \r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Header */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Monitoreo de Ejecuci√≥n de Ventas</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                  Supervisi√≥n integral de proyectos desde WorkOrder hasta facturaci√≥n final\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center space-x-4 mt-4 lg:mt-0\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  iconName=\"RefreshCw\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => window.location?.reload()}\r\n                >\r\n                  Actualizar\r\n                </Button>\r\n                <Button\r\n                  iconName=\"BarChart3\"\r\n                  iconPosition=\"left\"\r\n                  onClick={() => setActivePanel('dashboard')}\r\n                >\r\n                  Dashboard\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-6\">\r\n              {/* Main Execution Board */}\r\n              <div className=\"flex-1\">\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-6 mb-8\">\r\n                  {executionPhases?.map((phase) => (\r\n                    <div key={phase?.id} className=\"bg-card rounded-lg shadow-sm border\">\r\n                      <div className={`p-4 ${phase?.color} text-white rounded-t-lg`}>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <Icon name={phase?.icon} size={20} />\r\n                          <h3 className=\"font-semibold text-sm\">{phase?.name}</h3>\r\n                        </div>\r\n                        <p className=\"text-xs mt-1 opacity-90\">{phase?.description}</p>\r\n                        <div className=\"text-xs mt-2 bg-white/20 rounded px-2 py-1 inline-block\">\r\n                          {getProjectsByPhase(phase?.id)?.length} proyectos\r\n                        </div>\r\n                        <div className=\"text-xs mt-1 opacity-75\">\r\n                          Paso {phase?.step}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"p-4 space-y-3 min-h-[500px]\">\r\n                        {getProjectsByPhase(phase?.id)?.map((project) => (\r\n                          <div\r\n                            key={project?.id}\r\n                            onClick={() => handleProjectSelect(project)}\r\n                            className={`p-3 rounded-lg border-l-4 cursor-pointer hover:shadow-md transition-all ${getPriorityColor(project?.priority)}`}\r\n                          >\r\n                            <div className=\"flex items-start justify-between mb-2\">\r\n                              <h4 className=\"font-medium text-sm text-foreground line-clamp-2\">\r\n                                {project?.clientName}\r\n                              </h4>\r\n                              <span className={`text-xs px-2 py-1 rounded-full ${\r\n                                project?.priority === 'urgent' ? 'bg-red-100 text-red-800' :\r\n                                project?.priority === 'high' ? 'bg-orange-100 text-orange-800' :\r\n                                project?.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'\r\n                              }`}>\r\n                                {project?.priority === 'urgent' ? 'Urgente' :\r\n                                 project?.priority === 'high' ? 'Alta' :\r\n                                 project?.priority === 'medium' ? 'Media' : 'Baja'}\r\n                              </span>\r\n                            </div>\r\n                            \r\n                            <div className=\"flex items-center space-x-2 mb-2\">\r\n                              <Icon name=\"FileText\" size={12} className=\"text-muted-foreground\" />\r\n                              <span className=\"text-xs text-muted-foreground\">{project?.workOrderRef}</span>\r\n                            </div>\r\n                            \r\n                            <div className=\"flex items-center space-x-2 mb-2\">\r\n                              <Icon name=\"User\" size={12} className=\"text-muted-foreground\" />\r\n                              <span className=\"text-xs text-muted-foreground\">{project?.salesRep}</span>\r\n                            </div>\r\n\r\n                            {project?.progress?.overallProgress && (\r\n                              <div className=\"mb-2\">\r\n                                <div className=\"flex items-center justify-between mb-1\">\r\n                                  <span className=\"text-xs text-muted-foreground\">Progreso</span>\r\n                                  <span className={`text-xs px-2 py-1 rounded ${getProgressColor(project?.progress?.overallProgress)}`}>\r\n                                    {project?.progress?.overallProgress}%\r\n                                  </span>\r\n                                </div>\r\n                                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                                  <div \r\n                                    className=\"bg-blue-600 h-2 rounded-full transition-all\"\r\n                                    style={{ width: `${project?.progress?.overallProgress}%` }}\r\n                                  ></div>\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                            \r\n                            <div className=\"flex items-center justify-between\">\r\n                              <div className=\"text-xs font-medium text-foreground\">\r\n                                ${project?.contractValue?.toLocaleString()}\r\n                              </div>\r\n                              <div className=\"flex items-center space-x-1\">\r\n                                <Icon \r\n                                  name={project?.projectType === 'construction' ? 'Building' : 'Package'} \r\n                                  size={12} \r\n                                  className=\"text-muted-foreground\" \r\n                                />\r\n                                <span className=\"text-xs text-muted-foreground capitalize\">\r\n                                  {project?.projectType === 'construction' ? 'Obra' : 'Piezas'}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n\r\n                            {project?.fieldSupervisor && (\r\n                              <div className=\"flex items-center space-x-1 mt-2\">\r\n                                <Icon name=\"HardHat\" size={12} className=\"text-blue-600\" />\r\n                                <span className=\"text-xs text-blue-600\">{project?.fieldSupervisor?.name}</span>\r\n                              </div>\r\n                            )}\r\n\r\n                            {project?.changeRequests?.length > 0 && (\r\n                              <div className=\"flex items-center space-x-1 mt-2\">\r\n                                <Icon name=\"AlertTriangle\" size={12} className=\"text-orange-600\" />\r\n                                <span className=\"text-xs text-orange-600\">\r\n                                  {project?.changeRequests?.length} cambio(s)\r\n                                </span>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        ))}\r\n                        \r\n                        {getProjectsByPhase(phase?.id)?.length === 0 && (\r\n                          <div className=\"text-center py-8\">\r\n                            <Icon name=\"Inbox\" size={32} className=\"text-muted-foreground mx-auto mb-2\" />\r\n                            <p className=\"text-sm text-muted-foreground\">Sin proyectos</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Controls Panel */}\r\n              {showControls && selectedProject && (\r\n                <div className=\"w-96 bg-card rounded-lg shadow-lg border h-fit\">\r\n                  <div className=\"p-4 border-b\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <h3 className=\"font-semibold\">Control de Ejecuci√≥n</h3>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        iconName=\"X\"\r\n                        onClick={() => setShowControls(false)}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {/* Panel Tabs */}\r\n                  <div className=\"border-b\">\r\n                    <div className=\"flex\">\r\n                      {[\r\n                        { id: 'execution', label: 'Ejecuci√≥n', icon: 'Activity' },\r\n                        { id: 'communication', label: 'Comunicaci√≥n', icon: 'MessageCircle' },\r\n                        { id: 'changes', label: 'Cambios', icon: 'Edit' },\r\n                        { id: 'delivery', label: 'Entrega', icon: 'Truck' },\r\n                        { id: 'traceability', label: 'Trazabilidad', icon: 'Search' }\r\n                      ]?.map((tab) => (\r\n                        <button\r\n                          key={tab?.id}\r\n                          onClick={() => setActivePanel(tab?.id)}\r\n                          className={`flex-1 px-3 py-2 text-xs border-b-2 flex items-center justify-center space-x-1 ${\r\n                            activePanel === tab?.id \r\n                              ? 'border-blue-600 text-blue-600 bg-blue-50' :'border-transparent text-muted-foreground hover:text-foreground'\r\n                          }`}\r\n                        >\r\n                          <Icon name={tab?.icon} size={14} />\r\n                          <span className=\"hidden sm:block\">{tab?.label}</span>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"p-4 space-y-6\">\r\n                    {/* Project Info */}\r\n                    <div className=\"space-y-2\">\r\n                      <h4 className=\"font-medium\">{selectedProject?.clientName}</h4>\r\n                      <p className=\"text-sm text-muted-foreground\">{selectedProject?.workOrderRef}</p>\r\n                      <div className=\"flex items-center space-x-4 text-xs text-muted-foreground\">\r\n                        <span>${selectedProject?.contractValue?.toLocaleString()}</span>\r\n                        <span>{selectedProject?.projectDetails?.location}</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Dynamic Panel Content */}\r\n                    {activePanel === 'execution' && selectedProject?.phase === 'startup-tracking' && (\r\n                      <StartupTrackingPanel\r\n                        project={selectedProject}\r\n                        onConfirm={(startupData) => handleStartupConfirmation(selectedProject?.id, startupData)}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'execution' && selectedProject?.phase === 'execution-monitoring' && (\r\n                      <ExecutionProgressPanel\r\n                        project={selectedProject}\r\n                        onUpdate={(progressData) => handleProgressUpdate(selectedProject?.id, progressData)}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'communication' && (\r\n                      <ClientCommunicationPanel\r\n                        project={selectedProject}\r\n                        onAddCommunication={(communication) => handleCommunicationAdd(selectedProject?.id, communication)}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'changes' && (\r\n                      <ChangeRequestPanel\r\n                        project={selectedProject}\r\n                        onRequestChange={(changeRequest) => handleChangeRequest(selectedProject?.id, changeRequest)}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'delivery' && (selectedProject?.phase === 'delivery-coordination' || selectedProject?.delivery) && (\r\n                      <DeliveryManagementPanel\r\n                        project={selectedProject}\r\n                        onUpdate={(deliveryData) => handleDeliveryUpdate(selectedProject?.id, deliveryData)}\r\n                      />\r\n                    )}\r\n\r\n                    {activePanel === 'traceability' && (\r\n                      <TraceabilityPanel\r\n                        project={selectedProject}\r\n                        // console.log eliminado\r\n                      />\r\n                    )}\r\n\r\n                    {/* Phase Transition Controls */}\r\n                    <div className=\"space-y-2\">\r\n                      <label className=\"text-sm font-medium\">Avanzar Fase</label>\r\n                      <div className=\"grid grid-cols-1 gap-2\">\r\n                        {executionPhases?.map((phase) => (\r\n                          <Button\r\n                            key={phase?.id}\r\n                            variant={selectedProject?.phase === phase?.id ? \"default\" : \"outline\"}\r\n                            size=\"sm\"\r\n                            onClick={() => handlePhaseTransition(selectedProject?.id, phase?.id)}\r\n                            disabled={selectedProject?.phase === phase?.id}\r\n                            className=\"text-xs justify-start\"\r\n                          >\r\n                            <Icon name={phase?.icon} size={14} className=\"mr-2\" />\r\n                            {phase?.name}\r\n                          </Button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SalesExecutionMonitoring;","import React, { useState } from 'react';\r\nimport { Search, X, ChevronUp, ChevronDown, Download } from 'lucide-react';\r\n\r\n/* =========================\r\n   UI b√°sicos (con mejoras)\r\n========================= */\r\nconst Button = ({\r\n  children,\r\n  variant = 'default',\r\n  size = 'default',\r\n  onClick,\r\n  iconName,\r\n  iconPosition,\r\n  className = '',\r\n  disabled = false,\r\n  type = 'button',\r\n  title,\r\n}) => {\r\n  const Icon =\r\n    iconName === 'X'\r\n      ? X\r\n      : iconName === 'ChevronUp'\r\n      ? ChevronUp\r\n      : iconName === 'ChevronDown'\r\n      ? ChevronDown\r\n      : iconName === 'Download'\r\n      ? Download\r\n      : null;\r\n\r\n  const baseClasses =\r\n    'inline-flex items-center justify-center font-medium rounded-md transition-colors';\r\n  const variantClasses = {\r\n    default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n    outline: 'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\r\n    ghost: 'hover:bg-accent hover:text-accent-foreground',\r\n  };\r\n  const sizeClasses = {\r\n    default: 'h-10 px-4 py-2',\r\n    sm: 'h-9 rounded-md px-3 text-sm',\r\n  };\r\n  const disabledClasses = disabled ? 'opacity-60 cursor-not-allowed' : '';\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n      title={title}\r\n      className={`${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${disabledClasses} ${className}`}\r\n    >\r\n      {Icon && iconPosition === 'left' && <Icon size={16} className=\"mr-2\" />}\r\n      {children}\r\n      {Icon && iconPosition === 'right' && <Icon size={16} className=\"ml-2\" />}\r\n    </button>\r\n  );\r\n};\r\n\r\nconst Input = ({ label, type = 'text', placeholder, value, onChange, className = '' }) => {\r\n  return (\r\n    <div className=\"w-full\">\r\n      {label && <label className=\"block text-sm font-medium text-foreground mb-2\">{label}</label>}\r\n      <input\r\n        type={type}\r\n        placeholder={placeholder}\r\n        value={value}\r\n        onChange={onChange}\r\n        className={`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Select = ({ label, options, value, onChange, className = '' }) => {\r\n  return (\r\n    <div className={className}>\r\n      {label && <label className=\"block text-sm font-medium text-foreground mb-2\">{label}</label>}\r\n      <select\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\r\n      >\r\n        {options.map((option) => (\r\n          <option key={option.value} value={option.value}>\r\n            {option.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\n/* =========================\r\n   ProjectFilters conectado\r\n========================= */\r\nconst ProjectFilters = ({\r\n  onFiltersChange,\r\n  totalProjects,\r\n  filteredProjects,\r\n  onExport, // üëà NUEVO: handler para exportar que viene del padre\r\n}) => {\r\n  const [filters, setFilters] = useState({\r\n    search: '',\r\n    paymentStatus: '', // Nuevo: 'pagado', 'en-proceso', '' (todos)\r\n    status: '',\r\n    minBudget: '',\r\n    maxBudget: '',\r\n    department: '',\r\n    priority: '',\r\n  });\r\n\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const statusOptions = [\r\n    { value: '', label: 'Todos los Estados' },\r\n    { value: 'planning', label: 'Planificaci√≥n' },\r\n    { value: 'in-progress', label: 'En Progreso' },\r\n    { value: 'on-hold', label: 'En Pausa' },\r\n    { value: 'review', label: 'En Revisi√≥n' },\r\n    { value: 'completed', label: 'Completado' },\r\n    { value: 'cancelled', label: 'Cancelado' },\r\n  ];\r\n\r\n  const departmentOptions = [\r\n    { value: '', label: 'Todos los Departamentos' },\r\n    { value: 'sales', label: 'Ventas' },\r\n    { value: 'engineering', label: 'Ingenier√≠a' },\r\n    { value: 'installation', label: 'Instalaci√≥n' },\r\n    { value: 'maintenance', label: 'Mantenimiento' },\r\n    { value: 'administration', label: 'Administraci√≥n' },\r\n  ];\r\n\r\n  const priorityOptions = [\r\n    { value: '', label: 'Todas las Prioridades' },\r\n    { value: 'low', label: 'Baja' },\r\n    { value: 'medium', label: 'Media' },\r\n    { value: 'high', label: 'Alta' },\r\n    { value: 'urgent', label: 'Urgente' },\r\n  ];\r\n\r\n  const handleFilterChange = (key, value) => {\r\n    const newFilters = { ...filters, [key]: value };\r\n    setFilters(newFilters);\r\n    onFiltersChange?.(newFilters);\r\n  };\r\n\r\n  const paymentStatusOptions = [\r\n    { value: '', label: 'Todos los Estados de Pago' },\r\n    { value: 'pagado', label: 'Proyectos Pagados' },\r\n    { value: 'en-proceso', label: 'En Proceso de Pago' },\r\n    { value: 'sin-pago', label: 'Sin Pagos' },\r\n  ];\r\n\r\n  const clearAllFilters = () => {\r\n    const cleared = {\r\n      search: '',\r\n      paymentStatus: '',\r\n      status: '',\r\n      minBudget: '',\r\n      maxBudget: '',\r\n      department: '',\r\n      priority: '',\r\n    };\r\n    setFilters(cleared);\r\n    onFiltersChange?.(cleared);\r\n  };\r\n\r\n  const hasActiveFilters = Object.values(filters).some((v) => v !== '');\r\n\r\n  const handleExportClick = () => {\r\n    if (!onExport) return;\r\n    if (!filteredProjects || filteredProjects <= 0) {\r\n      alert('No hay proyectos para exportar con los filtros actuales.');\r\n      return;\r\n    }\r\n    onExport(); // el padre exporta lo que ya est√° filtrado/visible\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg p-6 mb-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <h3 className=\"text-lg font-semibold text-foreground\">Filtros de Proyectos</h3>\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            Mostrando {filteredProjects} de {totalProjects} proyectos\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          {hasActiveFilters && (\r\n            <Button variant=\"outline\" size=\"sm\" onClick={clearAllFilters} iconName=\"X\" iconPosition=\"left\">\r\n              Limpiar Filtros\r\n            </Button>\r\n          )}\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n            iconName={isExpanded ? 'ChevronUp' : 'ChevronDown'}\r\n            iconPosition=\"right\"\r\n          >\r\n            {isExpanded ? 'Menos Filtros' : 'M√°s Filtros'}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search Bar */}\r\n      <div className=\"mb-4\">\r\n        <div className=\"relative\">\r\n          <Input\r\n            type=\"search\"\r\n            placeholder=\"Buscar por nombre de proyecto, cliente, c√≥digo...\"\r\n            value={filters.search}\r\n            onChange={(e) => handleFilterChange('search', e.target.value)}\r\n            className=\"pl-10\"\r\n          />\r\n          <Search size={16} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\" />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Filters */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4\">\r\n        <Select\r\n          label=\"Estado de Pago\"\r\n          options={paymentStatusOptions}\r\n          value={filters.paymentStatus}\r\n          onChange={(value) => handleFilterChange('paymentStatus', value)}\r\n          className=\"w-full\"\r\n        />\r\n        <Select\r\n          label=\"Estado del Proyecto\"\r\n          options={statusOptions}\r\n          value={filters.status}\r\n          onChange={(value) => handleFilterChange('status', value)}\r\n          className=\"w-full\"\r\n        />\r\n        <Select\r\n          label=\"Departamento\"\r\n          options={departmentOptions}\r\n          value={filters.department}\r\n          onChange={(value) => handleFilterChange('department', value)}\r\n          className=\"w-full\"\r\n        />\r\n        <div className=\"flex items-end\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"default\"\r\n            iconName=\"Download\"\r\n            iconPosition=\"left\"\r\n            className=\"w-full\"\r\n            onClick={handleExportClick}\r\n            disabled={!filteredProjects}\r\n            title={filteredProjects ? 'Exportar proyectos filtrados' : 'No hay resultados para exportar'}\r\n          >\r\n            Exportar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Advanced Filters */}\r\n      {isExpanded && (\r\n        <div className=\"border-t border-border pt-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n            <Input\r\n              label=\"Presupuesto M√≠nimo\"\r\n              type=\"number\"\r\n              placeholder=\"$0\"\r\n              value={filters.minBudget}\r\n              onChange={(e) => handleFilterChange('minBudget', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n            <Input\r\n              label=\"Presupuesto M√°ximo\"\r\n              type=\"number\"\r\n              placeholder=\"$999,999\"\r\n              value={filters.maxBudget}\r\n              onChange={(e) => handleFilterChange('maxBudget', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n            <Input\r\n              label=\"Fecha de Inicio\"\r\n              type=\"date\"\r\n              value={filters.startDate}\r\n              onChange={(e) => handleFilterChange('startDate', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n            <Input\r\n              label=\"Fecha de Finalizaci√≥n\"\r\n              type=\"date\"\r\n              value={filters.endDate}\r\n              onChange={(e) => handleFilterChange('endDate', e.target.value)}\r\n              className=\"w-full\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Active Filters pills */}\r\n      {hasActiveFilters && (\r\n        <div className=\"flex flex-wrap gap-2 mt-4 pt-4 border-t border-border\">\r\n          <span className=\"text-sm text-muted-foreground\">Filtros activos:</span>\r\n          {Object.entries(filters).map(([key, value]) => {\r\n            if (!value) return null;\r\n\r\n            // etiquetas amigables\r\n            let displayValue = value;\r\n            if (key === 'paymentStatus')\r\n              displayValue = paymentStatusOptions.find((opt) => opt.value === value)?.label || value;\r\n            if (key === 'status')\r\n              displayValue = statusOptions.find((opt) => opt.value === value)?.label || value;\r\n            if (key === 'department')\r\n              displayValue = departmentOptions.find((opt) => opt.value === value)?.label || value;\r\n            if (key === 'priority')\r\n              displayValue = priorityOptions.find((opt) => opt.value === value)?.label || value;\r\n            if (key === 'minBudget' || key === 'maxBudget') displayValue = `$${value}`;\r\n\r\n            return (\r\n              <div\r\n                key={key}\r\n                className=\"flex items-center space-x-1 bg-primary/10 text-primary px-2 py-1 rounded-md text-sm\"\r\n              >\r\n                <span>{displayValue}</span>\r\n                <button\r\n                  onClick={() => handleFilterChange(key, '')}\r\n                  className=\"hover:bg-primary/20 rounded-full p-0.5\"\r\n                >\r\n                  <X size={12} />\r\n                </button>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectFilters;\r\n\r\n/* ==========================================\r\n   Funci√≥n de filtrado para el componente padre\r\n========================================== */\r\nexport const applyProjectFilters = (projects, filters) => {\r\n  let filtered = [...projects];\r\n\r\n  // Search\r\n  if (filters?.search) {\r\n    const searchTerm = filters.search.toLowerCase();\r\n    filtered = filtered.filter(\r\n      (project) =>\r\n        project?.name?.toLowerCase()?.includes(searchTerm) ||\r\n        project?.code?.toLowerCase()?.includes(searchTerm) ||\r\n        project?.client?.name?.toLowerCase()?.includes(searchTerm)\r\n    );\r\n  }\r\n\r\n  // Status\r\n  if (filters?.status) {\r\n    filtered = filtered.filter((project) => project?.status === filters.status);\r\n  }\r\n\r\n  // Department\r\n  if (filters?.department) {\r\n    filtered = filtered.filter(\r\n      (project) => project?.department?.toLowerCase() === filters.department.toLowerCase()\r\n    );\r\n  }\r\n\r\n  // Priority\r\n  if (filters?.priority) {\r\n    filtered = filtered.filter((project) => project?.priority === filters.priority);\r\n  }\r\n\r\n  // Date range (sobre startDate)\r\n  if (filters?.dateRange) {\r\n    const now = new Date();\r\n    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n\r\n    filtered = filtered.filter((project) => {\r\n      const startDate = new Date(project?.startDate);\r\n      if (isNaN(startDate)) return false;\r\n\r\n      switch (filters.dateRange) {\r\n        case 'today':\r\n          return startDate.toDateString() === today.toDateString();\r\n        case 'week': {\r\n          const weekAgo = new Date(today);\r\n          weekAgo.setDate(weekAgo.getDate() - 7);\r\n          return startDate >= weekAgo && startDate <= now;\r\n        }\r\n        case 'month':\r\n          return (\r\n            startDate.getMonth() === now.getMonth() &&\r\n            startDate.getFullYear() === now.getFullYear()\r\n          );\r\n        case 'quarter': {\r\n          const quarter = Math.floor(now.getMonth() / 3);\r\n          const projectQuarter = Math.floor(startDate.getMonth() / 3);\r\n          return projectQuarter === quarter && startDate.getFullYear() === now.getFullYear();\r\n        }\r\n        case 'year':\r\n          return startDate.getFullYear() === now.getFullYear();\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Budget\r\n  if (filters?.minBudget) {\r\n    const minBudget = Number(filters.minBudget);\r\n    filtered = filtered.filter((project) => Number(project?.budget) >= minBudget);\r\n  }\r\n  if (filters?.maxBudget) {\r\n    const maxBudget = Number(filters.maxBudget);\r\n    filtered = filtered.filter((project) => Number(project?.budget) <= maxBudget);\r\n  }\r\n\r\n  // Start date exacta\r\n  if (filters?.startDate) {\r\n    const filterStartDate = new Date(filters.startDate);\r\n    filtered = filtered.filter((project) => {\r\n      const projectStartDate = new Date(project?.startDate);\r\n      return !isNaN(projectStartDate) && projectStartDate >= filterStartDate;\r\n    });\r\n  }\r\n\r\n  // End date exacta\r\n  if (filters?.endDate) {\r\n    const filterEndDate = new Date(filters.endDate);\r\n    filtered = filtered.filter((project) => {\r\n      const projectEndDate = new Date(project?.endDate);\r\n      return !isNaN(projectEndDate) && projectEndDate <= filterEndDate;\r\n    });\r\n  }\r\n\r\n  return filtered;\r\n};\r\n","import React, { useEffect, useMemo, useState, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport Image from '../../../components/AppImage';\r\nimport useProyecto from '../../../hooks/useProyect'; // ‚¨ÖÔ∏è usa el hook\r\nimport useClient from '../../../hooks/useClient';\r\n\r\n/* === Config === */\r\nconst DEFAULT_USD_RATE = 18;\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\n/* === Utils === */\r\nconst parseISODate = (value) => {\r\n  if (!value) return null;\r\n  const d = new Date(value);\r\n  return isNaN(d.getTime()) ? null : d;\r\n};\r\nconst formatCurrency = (amount) => {\r\n  if (amount == null || isNaN(amount)) return '‚Äî';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(amount);\r\n};\r\nconst formatUSD = (amount) => {\r\n  if (amount == null || isNaN(amount)) return '‚Äî';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'USD' }).format(amount);\r\n};\r\nconst formatDate = (date) => {\r\n  const d = date instanceof Date ? date : parseISODate(date);\r\n  if (!d) return '‚Äî';\r\n  return d.toLocaleDateString('es-MX', { day: '2-digit', month: '2-digit', year: 'numeric' });\r\n};\r\n\r\n// Normalizar estado para comparaci√≥n\r\nconst normalizarEstado = (estado) => {\r\n  if (!estado) return '';\r\n  return String(estado).toLowerCase().trim().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\r\n};\r\n\r\n// Obtener el estado normalizado y su etiqueta\r\nconst obtenerEstadoNormalizado = (status, statusLabel) => {\r\n  const estado = statusLabel || status || '';\r\n  const normalizado = normalizarEstado(estado);\r\n  \r\n  // Mapear a estados can√≥nicos\r\n  if (normalizado.includes('pausa') || normalizado.includes('pause') || normalizado.includes('hold')) {\r\n    return { canonico: 'en pausa', label: 'En Pausa' };\r\n  }\r\n  if (normalizado.includes('revision') || normalizado.includes('review')) {\r\n    return { canonico: 'en revision', label: 'En Revisi√≥n' };\r\n  }\r\n  if (normalizado.includes('completado') || normalizado.includes('complet') || normalizado.includes('done') || normalizado.includes('closed')) {\r\n    return { canonico: 'completado', label: 'Completado' };\r\n  }\r\n  if (normalizado.includes('cancelado') || normalizado.includes('canceled') || normalizado.includes('cancelled') || normalizado.includes('cancel')) {\r\n    return { canonico: 'cancelado', label: 'Cancelado' };\r\n  }\r\n  if (normalizado.includes('proceso') || normalizado.includes('progress') || normalizado.includes('process')) {\r\n    return { canonico: 'en proceso', label: 'En Proceso' };\r\n  }\r\n  if (normalizado.includes('planific') || normalizado.includes('planning') || normalizado.includes('activo') || normalizado.includes('active')) {\r\n    return { canonico: 'planificacion', label: 'Planificaci√≥n' };\r\n  }\r\n  \r\n  // Si hay un statusLabel, usarlo; si no, usar el status original\r\n  return { canonico: normalizado || 'planificacion', label: statusLabel || status || 'Planificaci√≥n' };\r\n};\r\n\r\n// Obtener clases de color seg√∫n el estado\r\nconst obtenerColorEstado = (estadoCanonico) => {\r\n  switch (estadoCanonico) {\r\n    case 'en proceso':\r\n      return 'bg-green-100 text-green-800 border-green-200';\r\n    case 'en pausa':\r\n      return 'bg-yellow-100 text-yellow-800 border-yellow-200';\r\n    case 'en revision':\r\n      return 'bg-purple-100 text-purple-800 border-purple-200';\r\n    case 'completado':\r\n      return 'bg-blue-100 text-blue-800 border-blue-200';\r\n    case 'cancelado':\r\n      return 'bg-red-100 text-red-800 border-red-200';\r\n    case 'planificacion':\r\n    default:\r\n      return 'bg-gray-100 text-gray-800 border-gray-200';\r\n  }\r\n};\r\n\r\n/* === Map NoSQL -> ViewModel (con USD derivado y resumen financiero del backend) === */\r\nconst mapProjectDocStrict = (doc, clientsMap = {}) => {\r\n  const rawId = doc.id ?? doc._id ?? null;\r\n  const code = doc.codigo ?? doc.code ?? '‚Äî';\r\n  const id = rawId ?? `ui-${(code || 'sin-codigo')}`; // ID estable para React keys; no usar para backend si no hay rawId\r\n  const name = doc.nombreProyecto ?? doc.nombre ?? 'Proyecto sin nombre';\r\n  const type = doc.tipoProyecto ?? doc.type ?? '‚Äî';\r\n\r\n  // Manejo flexible de cliente (string id u objeto)\r\n  const clienteNode = doc.cliente ?? doc.client ?? null;\r\n  let clienteId = null;\r\n  if (typeof clienteNode === 'string') {\r\n    clienteId = clienteNode;\r\n  } else if (clienteNode && typeof clienteNode === 'object') {\r\n    clienteId = clienteNode.id || clienteNode._id || null;\r\n  }\r\n  const clienteEncontrado = clienteId != null ? (clientsMap[String(clienteId)] || null) : null;\r\n\r\n  const client = {\r\n    id: clienteId || '‚Äî',\r\n    name:\r\n      (clienteNode && typeof clienteNode === 'object' &&\r\n        (clienteNode.nombre || clienteNode.name || clienteNode.empresa || clienteNode.companyName))\r\n        ? (clienteNode.nombre || clienteNode.name || clienteNode.empresa || clienteNode.companyName)\r\n        : (clienteEncontrado?.nombre ?? clienteEncontrado?.name ?? clienteEncontrado?.empresa ?? clienteEncontrado?.companyName ?? '‚Äî'),\r\n    contact:\r\n      (clienteNode && typeof clienteNode === 'object' && (clienteNode.contacto || clienteNode.contact))\r\n        ? (clienteNode.contacto || clienteNode.contact)\r\n        : (clienteEncontrado?.contacto ?? clienteEncontrado?.contact ?? '‚Äî'),\r\n    email:\r\n      (clienteNode && typeof clienteNode === 'object' && clienteNode.email)\r\n        ? clienteNode.email\r\n        : (clienteEncontrado?.email ?? '‚Äî'),\r\n  };\r\n\r\n  const startDate = doc.cronograma?.fechaInicio ?? doc.startDate ?? null;\r\n  const endDate   = doc.cronograma?.fechaFin    ?? doc.endDate   ?? null;\r\n\r\n  const status = doc.status ?? doc.estado ?? null;\r\n  const statusLabel = doc.statusLabel ?? null;\r\n  const priority = doc.prioridad ?? doc.prioridades ?? doc.priority ?? null;\r\n  const priorityLabel = doc.priorityLabel ?? null;\r\n\r\n  const p = doc.presupuesto || {};\r\n  const budget = doc.totalPresupuesto ?? doc.budget ?? p.total ?? null;\r\n\r\n  // Equipos USD: respeta USD si lo enviaron; si viene MXN convierte por tipoCambio o DEFAULT_USD_RATE\r\n  const equiposUSD = (() => {\r\n    if (p.equipoDolares != null && !isNaN(Number(p.equipoDolares))) {\r\n      return Number(p.equipoDolares) || 0;\r\n    }\r\n    if (p?._metaEquipos?.capturadoEn === 'USD' && p?._metaEquipos?.valorUSD != null) {\r\n      const v = Number(p._metaEquipos.valorUSD);\r\n      if (!isNaN(v)) return v;\r\n    }\r\n    const mxn = Number(p?.equipos || 0);\r\n    if (!(mxn > 0)) return 0;\r\n    const rate = Number(p?._metaEquipos?.tipoCambio);\r\n    const divisor = (rate && rate > 0) ? rate : DEFAULT_USD_RATE;\r\n    return mxn / divisor;\r\n  })();\r\n\r\n  const department = doc.departamento ?? doc.department ?? null;\r\n  const location   = doc.ubicacion ?? doc.location ?? null;\r\n  const description= doc.descripcion ?? doc.description ?? null;\r\n  const image      = doc.image ?? null;\r\n\r\n  let assignedPersonnel = null;\r\n  if (Array.isArray(doc.assignedPersonnel)) {\r\n    assignedPersonnel = doc.assignedPersonnel;\r\n  } else if (Array.isArray(doc.personalAsignado)) {\r\n    assignedPersonnel = doc.personalAsignado.map((s) => {\r\n      if (typeof s !== 'string') return { name: String(s ?? '‚Äî'), role: '' };\r\n      // Soporta separadores \"‚Äî\" o \"-\" (para robustez)\r\n      const parts = s.split(/‚Äî| - /);\r\n      const n = (parts[0] || '').trim();\r\n      const r = (parts[1] || '').trim();\r\n      return { name: n || '‚Äî', role: r || '' };\r\n    });\r\n  }\r\n\r\n  const workOrders = Array.isArray(doc.workOrders) ? doc.workOrders : undefined;\r\n\r\n  // --- Resumen financiero del backend (preferente) ---\r\n  const resumen = doc.resumenFinanciero || {};\r\n  const totalAbonadoDB = Number(\r\n    resumen.totalAbonado ?? resumen.total_abonado ?? 0\r\n  );\r\n  const totalRestanteDB = (() => {\r\n    const v =\r\n      resumen.totalRestante ?? // nombre preferente\r\n      resumen.saldoPendiente ?? // variante com√∫n\r\n      resumen.saldo_pendiente;\r\n    return (v === null || v === undefined) ? null : Number(v);\r\n  })();\r\n  const porcentajePagadoDB = Number(\r\n    resumen.porcentajePagado ?? resumen.porcentaje_pagado ?? null\r\n  );\r\n\r\n  return {\r\n    id, rawId, code, name, type, image,\r\n    client,\r\n    status, statusLabel,\r\n    priority, priorityLabel,\r\n    budget, startDate, endDate,\r\n    department, location, description,\r\n    assignedPersonnel, workOrders,\r\n    equiposUSD,\r\n    financialSummary: {\r\n      totalAbonado: isNaN(totalAbonadoDB) ? null : totalAbonadoDB,\r\n      totalRestante: (totalRestanteDB != null && !isNaN(totalRestanteDB)) ? totalRestanteDB : null,\r\n      porcentajePagado: isNaN(porcentajePagadoDB) ? null : porcentajePagadoDB,\r\n    },\r\n    createdAt: doc.createdAt ?? null,\r\n    updatedAt: doc.updatedAt ?? null,\r\n    raw: doc,\r\n  };\r\n};\r\n\r\nconst ProjectTable = ({\r\n  projects,          // opcional: lista (array) o wrapper { success, data }\r\n  onBulkAction,\r\n  onRegisterAbono,\r\n  onViewAbonos,      // callback para ver abonos de un proyecto\r\n  getPaidAmount,     // fallback si el backend a√∫n no env√≠a totalRestante\r\n}) => {\r\n  const navigate = useNavigate();\r\n  console.log( \"navigate\", navigate);\r\n\r\n  // Hook de proyectos\r\n  const {\r\n    proyectos,            // puede ser array o wrapper { success, data }\r\n    loading: loadingAny,\r\n    error,\r\n    getProyectos,\r\n    deleteProyecto,\r\n  } = useProyecto();\r\n\r\n  // Hook de clientes\r\n  const { clients, getClients } = useClient();\r\n\r\n  const [sortConfig, setSortConfig] = useState({ key: 'startDate', direction: 'desc' });\r\n  const [selectedProjects, setSelectedProjects] = useState([]);\r\n  const [expandedRows, setExpandedRows] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  // Cargar clientes al montar\r\n  useEffect(() => {\r\n    if (!clients || clients.length === 0) {\r\n      getClients().catch((err) => console.error('Error al cargar clientes:', err));\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Mapa de clientes por ID (normalizado a string)\r\n  const clientsMap = useMemo(() => {\r\n    const map = {};\r\n    if (Array.isArray(clients)) {\r\n      clients.forEach((client) => {\r\n        const clientId = client.id ?? client._id;\r\n        if (clientId != null) map[String(clientId)] = client;\r\n      });\r\n    }\r\n    return map;\r\n  }, [clients]);\r\n\r\n  // Carga inicial de proyectos (si no vienen por props)\r\n  useEffect(() => {\r\n    if (projects && ((Array.isArray(projects)) || (projects?.data && Array.isArray(projects.data)))) {\r\n      return; // ya viene por props\r\n    }\r\n    const controller = new AbortController();\r\n    getProyectos({ force: false, signal: controller.signal }).catch((err) => {\r\n      if (err?.name !== 'AbortError') console.error('Fallo getProyectos en ProjectTable:', err);\r\n    });\r\n    return () => controller.abort();\r\n  }, [projects, getProyectos]);\r\n\r\n  // Fuente de datos: soporta array plano o wrapper { success, data }\r\n  const sourceDocs = useMemo(() => {\r\n    if (projects?.data && Array.isArray(projects.data)) return projects.data;\r\n    if (proyectos?.data && Array.isArray(proyectos.data)) return proyectos.data;\r\n    if (Array.isArray(projects)) return projects;\r\n    if (Array.isArray(proyectos)) return proyectos;\r\n    return [];\r\n  }, [projects, proyectos]);\r\n\r\n  const normalizedProjects = useMemo(() => {\r\n    if (!Array.isArray(sourceDocs)) return [];\r\n    return sourceDocs.map((doc) => mapProjectDocStrict(doc, clientsMap));\r\n  }, [sourceDocs, clientsMap]);\r\n\r\n  const handleSort = useCallback((key) => {\r\n    setSortConfig((prev) => {\r\n      const direction = (prev?.key === key && prev?.direction === 'asc') ? 'desc' : 'asc';\r\n      return { key, direction };\r\n    });\r\n    setCurrentPage(1);\r\n  }, []);\r\n\r\n  const sortedProjects = useMemo(() => {\r\n    const list = [...normalizedProjects];\r\n    const { key, direction } = sortConfig || {};\r\n    if (!key) return list;\r\n\r\n    return list.sort((a, b) => {\r\n      let aValue = a?.[key];\r\n      let bValue = b?.[key];\r\n\r\n      // Ordenar fechas solo cuando la columna es fecha\r\n      if (key === 'startDate' || key === 'endDate') {\r\n        const aDate = parseISODate(aValue);\r\n        const bDate = parseISODate(bValue);\r\n        const aTime = aDate ? aDate.getTime() : -Infinity;\r\n        const bTime = bDate ? bDate.getTime() : -Infinity;\r\n        return direction === 'asc' ? aTime - bTime : bTime - aTime;\r\n      }\r\n\r\n      // Ordenar por estado (usar la etiqueta del estado)\r\n      if (key === 'status') {\r\n        const estadoA = obtenerEstadoNormalizado(a?.status, a?.statusLabel);\r\n        const estadoB = obtenerEstadoNormalizado(b?.status, b?.statusLabel);\r\n        aValue = estadoA.label.toLowerCase();\r\n        bValue = estadoB.label.toLowerCase();\r\n        if (aValue < bValue) return direction === 'asc' ? -1 : 1;\r\n        if (aValue > bValue) return direction === 'asc' ? 1 : -1;\r\n        return 0;\r\n      }\r\n\r\n      if (typeof aValue === 'number' || typeof bValue === 'number') {\r\n        aValue = Number(aValue) || 0;\r\n        bValue = Number(bValue) || 0;\r\n        return direction === 'asc' ? aValue - bValue : bValue - aValue;\r\n      }\r\n\r\n      aValue = (aValue ?? '').toString().toLowerCase();\r\n      bValue = (bValue ?? '').toString().toLowerCase();\r\n      if (aValue < bValue) return direction === 'asc' ? -1 : 1;\r\n      if (aValue > bValue) return direction === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n  }, [normalizedProjects, sortConfig]);\r\n\r\n  // Paginaci√≥n\r\n  const totalItems = sortedProjects.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const pageProjects = sortedProjects.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  const handleSelectProject = useCallback((projectId) => {\r\n    setSelectedProjects((prev) =>\r\n      prev?.includes(projectId) ? prev?.filter((id) => id !== projectId) : [...prev, projectId]\r\n    );\r\n  }, []);\r\n\r\n  const handleSelectAll = useCallback(() => {\r\n    const pageIds = pageProjects.map((p) => p?.id);\r\n    const allSelected = pageIds.every((id) => selectedProjects.includes(id));\r\n    if (allSelected) {\r\n      setSelectedProjects((prev) => prev.filter((id) => !pageIds.includes(id)));\r\n    } else {\r\n      setSelectedProjects((prev) => Array.from(new Set([...prev, ...pageIds])));\r\n    }\r\n  }, [selectedProjects, pageProjects]);\r\n\r\n  const toggleRowExpansion = useCallback((projectId) => {\r\n    setExpandedRows((prev) =>\r\n      prev?.includes(projectId) ? prev?.filter((id) => id !== projectId) : [...prev, projectId]\r\n    );\r\n  }, []);\r\n\r\n  /* =======================\r\n     Eliminar (fila y masivo)\r\n  ======================= */\r\n  const _handleDelete = useCallback(async (project) => {\r\n    if (!project?.rawId) {\r\n      alert('Este proyecto no tiene ID persistente. No se puede eliminar.');\r\n      return;\r\n    }\r\n    const ok = window.confirm(`¬øEliminar el proyecto \"${project?.name || project?.code}\"? Esta acci√≥n no se puede deshacer.`);\r\n    if (!ok) return;\r\n    try {\r\n      await deleteProyecto(project.rawId); // usar rawId para backend\r\n      setSelectedProjects((prev) => prev.filter((id) => id !== project.id));\r\n      setExpandedRows((prev) => prev.filter((id) => id !== project.id));\r\n    } catch (err) {\r\n      if (err?.name !== 'AbortError') {\r\n        console.error('Error eliminando proyecto:', err);\r\n        alert('No se pudo eliminar el proyecto.');\r\n      }\r\n    }\r\n  }, [deleteProyecto]);\r\n\r\n  const handleBulkDelete = useCallback(async () => {\r\n    if (!selectedProjects?.length) return;\r\n    const ok = window.confirm(`¬øEliminar ${selectedProjects.length} proyecto(s)?`);\r\n    if (!ok) return;\r\n    try {\r\n      // si tu backend tolera paralelismo:\r\n      // await Promise.all(selectedProjects.map((rid) => deleteProyecto(rid)));\r\n      for (const id of selectedProjects) {\r\n        const p = normalizedProjects.find(x => x.id === id);\r\n        if (p?.rawId) {\r\n          // eslint-disable-next-line no-await-in-loop\r\n          await deleteProyecto(p.rawId);\r\n        }\r\n      }\r\n      setSelectedProjects([]);\r\n    } catch (e) {\r\n      if (e?.name !== 'AbortError') {\r\n        console.error(e);\r\n        alert('Ocurri√≥ un error eliminando algunos proyectos.');\r\n      }\r\n    }\r\n  }, [selectedProjects, deleteProyecto, normalizedProjects]);\r\n\r\n  const _handleImageUpload = useCallback(async (project) => {\r\n    try {\r\n      const fileInput = document.createElement('input');\r\n      fileInput.type = 'file';\r\n      fileInput.accept = 'image/*';\r\n      fileInput.multiple = false;\r\n      fileInput.onchange = async (event) => {\r\n        const file = event?.target?.files?.[0];\r\n        if (file) {\r\n          if (!file?.type?.startsWith('image/')) return alert('Archivo de imagen inv√°lido');\r\n          const maxSize = 5 * 1024 * 1024;\r\n          if (file?.size > maxSize) return alert('M√°ximo 5MB');\r\n          alert(`Imagen \"${file?.name}\" cargada para \"${project?.name}\" (demo)`);\r\n        }\r\n      };\r\n      fileInput?.click();\r\n    } catch (error) {\r\n      console.error('Error al seleccionar imagen para proyecto:', project?.code, error);\r\n      alert('Error al seleccionar la imagen. Int√©ntelo de nuevo.');\r\n    }\r\n  }, []);\r\n\r\n  const loading = loadingAny;\r\n  const errorMsg = error ? (error.userMessage || error.message || 'Error') : '';\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n      {loading && <div className=\"p-4 border-b border-border text-sm text-muted-foreground\">Cargando proyectos‚Ä¶</div>}\r\n      {!!errorMsg && <div className=\"p-4 border-b border-border text-sm text-red-600\">{errorMsg}</div>}\r\n\r\n      {selectedProjects?.length > 0 && (\r\n        <div className=\"bg-primary/5 border-b border-border p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"text-sm text-foreground\">{selectedProjects?.length} proyecto(s) seleccionado(s)</span>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Edit\" iconPosition=\"left\" onClick={() => onBulkAction?.('edit', selectedProjects)}>Editar Estado</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"FileText\" iconPosition=\"left\" onClick={() => onBulkAction?.('export', selectedProjects)}>Exportar</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Mail\" iconPosition=\"left\" onClick={() => onBulkAction?.('notify', selectedProjects)}>Notificar</Button>\r\n              <Button variant=\"outline\" size=\"sm\" iconName=\"Trash2\" iconPosition=\"left\" onClick={handleBulkDelete}>Eliminar</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop */}\r\n      <div className=\"hidden lg:block overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-muted/50\">\r\n            <tr>\r\n              <th className=\"w-12 p-4\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={pageProjects.length > 0 && pageProjects.every((p) => selectedProjects.includes(p.id))}\r\n                  onChange={handleSelectAll}\r\n                  className=\"rounded border-border\"\r\n                  aria-label=\"Seleccionar todos\"\r\n                />\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('code')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>C√≥digo</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('name')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Proyecto</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Cliente</th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('status')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Estado</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('budget')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Presupuesto</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">Total restante</th>\r\n              <th className=\"text-left p-4 font-medium text-foreground\">\r\n                <button onClick={() => handleSort('startDate')} className=\"flex items-center space-x-1 hover:text-primary\">\r\n                  <span>Fecha Inicio</span><Icon name=\"ArrowUpDown\" size={14} />\r\n                </button>\r\n              </th>\r\n              <th className=\"w-28 p-4 font-medium text-foreground\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {pageProjects?.map((project) => (\r\n              <React.Fragment key={project?.id}>\r\n                <tr className=\"border-b border-border hover:bg-muted/30 transition-smooth\">\r\n                  <td className=\"p-4\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedProjects?.includes(project?.id)}\r\n                      onChange={() => handleSelectProject(project?.id)}\r\n                      className=\"rounded border-border\"\r\n                      aria-label={`Seleccionar ${project?.name}`}\r\n                    />\r\n                  </td>\r\n                  <td className=\"p-4\"><span className=\"font-mono text-sm text-primary\">{project?.code}</span></td>\r\n                  <td className=\"p-4\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <Image src={project?.image} alt={project?.name} className=\"w-10 h-10 rounded-lg object-cover\" />\r\n                      <div>\r\n                        <div className=\"font-medium text-foreground\">{project?.name}</div>\r\n                        <div className=\"text-sm text-muted-foreground\">{project?.type}</div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    <div>\r\n                      <div className=\"font-medium text-foreground\">{project?.client?.name}</div>\r\n                      <div className=\"text-sm text-muted-foreground\">{project?.client?.email}</div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    {(() => {\r\n                      const estadoInfo = obtenerEstadoNormalizado(project?.status, project?.statusLabel);\r\n                      const colorClasses = obtenerColorEstado(estadoInfo.canonico);\r\n                      return (\r\n                        <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${colorClasses}`}>\r\n                          {estadoInfo.label}\r\n                        </span>\r\n                      );\r\n                    })()}\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    <div className=\"text-foreground font-medium\">{formatCurrency(project?.budget)}</div>\r\n                    {Number(project?.equiposUSD) > 0 && (\r\n                      <div className=\"text-xs text-muted-foreground mt-1\">\r\n                        Equipos: <span className=\"font-medium\">{formatUSD(project?.equiposUSD)}</span>\r\n                      </div>\r\n                    )}\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    {(() => {\r\n                      // 1) valor directo desde backend si est√° presente\r\n                      const fromDB = project?.financialSummary?.totalRestante;\r\n                      if (typeof fromDB === 'number' && !isNaN(fromDB)) {\r\n                        return <span className=\"text-foreground font-medium\">{formatCurrency(fromDB)}</span>;\r\n                      }\r\n                      // 2) fallback: calcula a partir de pagos locales si el backend a√∫n no lo manda\r\n                      const paid = typeof getPaidAmount === 'function'\r\n                        ? Number(getPaidAmount({ id: project?.rawId || project?.id })) || 0\r\n                        : 0;\r\n                      const budget = Number(project?.budget) || 0;\r\n                      const remaining = Math.max(budget - paid, 0);\r\n                      return <span className=\"text-foreground font-medium\">{formatCurrency(remaining)}</span>;\r\n                    })()}\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    <div className=\"text-sm text-foreground\">{formatDate(project?.startDate)}</div>\r\n                  </td>\r\n                  <td className=\"p-4\">\r\n                    <div className=\"flex items-center space-x-1\">\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => onViewAbonos?.(project)}\r\n                        title=\"Ver abonos\"\r\n                        aria-label=\"Ver abonos\"\r\n                      >\r\n                        <Icon name=\"Eye\" size={16} />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => onRegisterAbono?.(project)}\r\n                        title=\"Registrar abono\"\r\n                        aria-label=\"Registrar abono\"\r\n                      >\r\n                        <Icon name=\"CreditCard\" size={16} />\r\n                      </Button>\r\n\r\n                      {/* Ejemplo de acci√≥n de imagen si luego lo conectas */}\r\n                      {/* <Button variant=\"ghost\" size=\"icon\" onClick={() => _handleImageUpload(project)} title=\"Subir imagen\" aria-label=\"Subir imagen\"><Icon name=\"Image\" size={16} /></Button> */}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n\r\n              </React.Fragment>\r\n            ))}\r\n            {pageProjects?.length === 0 && !loading && (\r\n              <tr><td colSpan={9} className=\"p-8 text-center text-muted-foreground\">No hay proyectos para mostrar.</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n\r\n        {/* Paginaci√≥n Desktop */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n            <span className=\"text-xs text-muted-foreground ml-3\">\r\n              Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n            <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* M√≥vil */}\r\n      <div className=\"lg:hidden\">\r\n        {pageProjects?.map((project) => (\r\n          <div key={project?.id} className=\"border-b border-border p-4\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedProjects?.includes(project?.id)}\r\n                  onChange={() => handleSelectProject(project?.id)}\r\n                  className=\"rounded border-border\"\r\n                  aria-label={`Seleccionar ${project?.name}`}\r\n                />\r\n                <Image src={project?.image} alt={project?.name} className=\"w-12 h-12 rounded-lg object-cover\" />\r\n                <div>\r\n                  <div className=\"font-medium text-foreground\">{project?.name}</div>\r\n                  <div className=\"text-sm text-muted-foreground\">{project?.code}</div>\r\n                </div>\r\n              </div>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                onClick={() => toggleRowExpansion(project?.id)}\r\n                aria-label=\"Alternar detalles\"\r\n                title={expandedRows.includes(project.id) ? \"Ocultar detalles\" : \"Ver detalles\"}\r\n              >\r\n                <Icon name={expandedRows.includes(project.id) ? \"ChevronUp\" : \"ChevronDown\"} size={16} />\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4 mb-3\">\r\n              <div>\r\n                <div className=\"text-xs text-muted-foreground\">Cliente</div>\r\n                <div className=\"text-sm text-foreground font-medium\">{project?.client?.name}</div>\r\n                <div className=\"text-xs text-muted-foreground\">{project?.client?.email}</div>\r\n              </div>\r\n              <div>\r\n                <div className=\"text-xs text-muted-foreground\">Estado</div>\r\n                <div className=\"mt-1\">\r\n                  {(() => {\r\n                    const estadoInfo = obtenerEstadoNormalizado(project?.status, project?.statusLabel);\r\n                    const colorClasses = obtenerColorEstado(estadoInfo.canonico);\r\n                    return (\r\n                      <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${colorClasses}`}>\r\n                        {estadoInfo.label}\r\n                      </span>\r\n                    );\r\n                  })()}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4 mb-3\">\r\n              <div>\r\n                <div className=\"text-xs text-muted-foreground\">Presupuesto</div>\r\n                <div className=\"text-sm text-foreground font-medium\">{formatCurrency(project?.budget)}</div>\r\n                {Number(project?.equiposUSD) > 0 && (\r\n                  <div className=\"text-[11px] text-muted-foreground\">Equipos: {formatUSD(project?.equiposUSD)}</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4 mb-3\">\r\n              <div>\r\n                <div className=\"text-xs text-muted-foreground\">Total restante</div>\r\n                {(() => {\r\n                  const fromDB = project?.financialSummary?.totalRestante;\r\n                  if (typeof fromDB === 'number' && !isNaN(fromDB)) {\r\n                    return <div className=\"text-sm text-foreground font-medium\">{formatCurrency(fromDB)}</div>;\r\n                  }\r\n                  const paid = typeof getPaidAmount === 'function'\r\n                    ? Number(getPaidAmount({ id: project?.rawId || project?.id })) || 0\r\n                    : 0;\r\n                  const budget = Number(project?.budget) || 0;\r\n                  const remaining = Math.max(budget - paid, 0);\r\n                  return <div className=\"text-sm text-foreground font-medium\">{formatCurrency(remaining)}</div>;\r\n                })()}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Acciones m√≥viles */}\r\n            <div className=\"flex items-center space-x-2 mt-3 pt-3 border-t border-border\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onViewAbonos?.(project)}\r\n                iconName=\"Eye\"\r\n                iconPosition=\"left\"\r\n                className=\"flex-1\"\r\n              >\r\n                Ver Abonos\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => onRegisterAbono?.(project)}\r\n                iconName=\"CreditCard\"\r\n                iconPosition=\"left\"\r\n                className=\"flex-1\"\r\n              >\r\n                Registrar\r\n              </Button>\r\n            </div>\r\n\r\n            {expandedRows?.includes(project?.id) && (\r\n              <div className=\"mt-4 pt-4 border-t border-border\">\r\n                <div className=\"grid grid-cols-1 gap-4\">\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div><div className=\"text-xs text-muted-foreground\">Inicio</div><div className=\"text-sm text-foreground\">{formatDate(project?.startDate)}</div></div>\r\n                    <div><div className=\"text-xs text-muted-foreground\">Fin</div><div className=\"text-sm text-foreground\">{formatDate(project?.endDate)}</div></div>\r\n                    <div><div className=\"text-xs text-muted-foreground\">Departamento</div><div className=\"text-sm text-foreground\">{project?.department || '‚Äî'}</div></div>\r\n                    <div><div className=\"text-xs text-muted-foreground\">Ubicaci√≥n</div><div className=\"text-sm text-foreground\">{project?.location || '‚Äî'}</div></div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-xs text-muted-foreground mb-2\">Personal Asignado</div>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {(project?.assignedPersonnel || [])?.map((person, index) => (\r\n                        <div key={index} className=\"flex items-center space-x-1 bg-muted px-2 py-1 rounded\">\r\n                          <Icon name=\"User\" size={12} />\r\n                          <span className=\"text-xs text-foreground\">{person?.name}</span>\r\n                          {person?.role && <span className=\"text-[10px] text-muted-foreground\">({person?.role})</span>}\r\n                        </div>\r\n                      ))}\r\n                      {(!project?.assignedPersonnel || project?.assignedPersonnel?.length === 0) && (\r\n                        <div className=\"text-xs text-muted-foreground\">Sin personal asignado</div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-xs text-muted-foreground mb-1\">Descripci√≥n</div>\r\n                    <p className=\"text-sm text-muted-foreground whitespace-pre-line\">{project?.description || '‚Äî'}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n        {pageProjects?.length === 0 && !loading && (\r\n          <div className=\"p-8 text-center text-muted-foreground\">No hay proyectos para mostrar.</div>\r\n        )}\r\n\r\n        {/* Paginaci√≥n Mobile */}\r\n        <div className=\"flex flex-col gap-3 p-4 border-t border-border\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n            <select\r\n              value={pageSize}\r\n              onChange={handleChangePageSize}\r\n              className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map((opt) => (\r\n                <option key={opt} value={opt}>{opt}</option>\r\n              ))}\r\n            </select>\r\n            <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n          </div>\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              {totalItems === 0 ? '0 de 0' : `${startIndex + 1}-${endIndex} de ${totalItems}`}\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n              <span className=\"px-2 text-sm text-foreground\">{currentPage}/{totalPages}</span>\r\n              <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n              <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectTable;\r\n","// src/services/abonoService.js\r\nimport httpService from './httpService';\r\n\r\n// Ruta base para los endpoints de abonos (configurable)\r\nconst BASE_PATH = '/abonos';\r\n\r\n/**\r\n * Servicio centralizado para gestionar Abonos de pago\r\n * Usa el proxy /api configurado en httpService\r\n *\r\n * Convenciones de API asumidas (donde ${BASE_PATH} es configurable):\r\n *  - Crear:         POST   ${BASE_PATH}/crear\r\n *  - Listar:        GET    ${BASE_PATH}            (acepta ?page, ?limit, y filtros)\r\n *  - Obtener por ID GET    ${BASE_PATH}/:id\r\n *  - Actualizar:    PUT    ${BASE_PATH}/:id\r\n *  - Eliminar:      DELETE ${BASE_PATH}/:id\r\n *  - Por proyecto:  GET    ${BASE_PATH}/proyecto/:proyectoId\r\n *  - Por cliente:   GET    ${BASE_PATH}/cliente/:clienteId\r\n *  - Aprobar:       POST   ${BASE_PATH}/:id/aprobar\r\n *  - Rechazar:      POST   ${BASE_PATH}/:id/rechazar   (body: { motivo })\r\n */\r\nconst abonoService = {\r\n  /**\r\n   * Crea un nuevo abono\r\n   * @param {Object} data\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async createAbono(data) {\r\n    return await httpService.post(`${BASE_PATH}/crear`, data);\r\n  },\r\n\r\n  /**\r\n   * Lista abonos con filtros/paginaci√≥n (opcional)\r\n   * @param {Object} [params]  e.g. { page, limit, proyectoId, clienteId, estado, desde, hasta, q }\r\n   * @returns {Promise<Object|Array>}\r\n   */\r\n  async getAbonos(params = {}) {\r\n    return await httpService.get(`${BASE_PATH}`, { params });\r\n  },\r\n\r\n  /**\r\n   * Obtiene un abono por ID\r\n   * @param {string} id\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async getAbonoById(id) {\r\n    return await httpService.get(`${BASE_PATH}/${id}`);\r\n  },\r\n\r\n  /**\r\n   * Actualiza un abono por ID\r\n   * @param {string} id\r\n   * @param {Object} data\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async updateAbono(id, data) {\r\n    return await httpService.patch(`${BASE_PATH}/editar/${id}`, data);\r\n  },\r\n\r\n  /**\r\n   * Elimina un abono por ID\r\n   * @param {string} id\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async deleteAbono(id) {\r\n    return await httpService.delete(`${BASE_PATH}/${id}`);\r\n  },\r\n\r\n  /**\r\n   * Lista abonos por proyecto\r\n   * @param {string} proyectoId\r\n   * @param {Object} [params]\r\n   * @returns {Promise<Object|Array>}\r\n   */\r\n  async getAbonosByProyecto(proyectoId, params = {}) {\r\n    return await httpService.get(`${BASE_PATH}/proyecto/${proyectoId}`, { params });\r\n  },\r\n\r\n  /**\r\n   * Lista abonos por cliente\r\n   * @param {string} clienteId\r\n   * @param {Object} [params]\r\n   * @returns {Promise<Object|Array>}\r\n   */\r\n  async getAbonosByCliente(clienteId, params = {}) {\r\n    return await httpService.get(`${BASE_PATH}/cliente/${clienteId}`, { params });\r\n  },\r\n    /**\r\n   * Lista abonos por cliente\r\n   * @param {string} clienteId\r\n   * @param {Object} [params]\r\n   * @returns {Promise<Object|Array>}\r\n   */\r\n    async obtenersumadortotaldeabonos(clienteId, params = {}) {\r\n      return await httpService.get(`${BASE_PATH}/suma`, { params });\r\n    },\r\n\r\n  /**\r\n   * Aprueba un abono\r\n   * @param {string} id\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async aprobarAbono(id) {\r\n    return await httpService.post(`${BASE_PATH}/${id}/aprobar`, {});\r\n  },\r\n\r\n  /**\r\n   * Rechaza un abono con motivo\r\n   * @param {string} id\r\n   * @param {string} motivo\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async rechazarAbono(id, motivo = '') {\r\n    return await httpService.post(`${BASE_PATH}/${id}/rechazar`, { motivo });\r\n  },\r\n};\r\n\r\nexport default abonoService;\r\n","import React, { useMemo, useEffect, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport abonoService from '../../../services/abonoService';\r\n\r\nconst AbonosStats = ({ projects = [], getTotalPagado, refreshTrigger }) => {\r\n  const [totalAbonosDesdeAPI, setTotalAbonosDesdeAPI] = useState(0);\r\n  const [cargandoTotalAbonos, setCargandoTotalAbonos] = useState(false);\r\n\r\n  // Obtener el total de abonos desde la API\r\n  // Se ejecuta al montar, cuando cambian los proyectos, o cuando se actualiza refreshTrigger\r\n  useEffect(() => {\r\n    const obtenerTotalAbonos = async () => {\r\n      setCargandoTotalAbonos(true);\r\n      try {\r\n        const respuesta = await abonoService.obtenersumadortotaldeabonos();\r\n        // La API puede devolver el total en diferentes formatos\r\n        const total = respuesta?.data?.total ?? respuesta?.data?.suma ?? respuesta?.total ?? respuesta?.suma ?? 0;\r\n        setTotalAbonosDesdeAPI(Number(total) || 0);\r\n      } catch (error) {\r\n        console.error('Error al obtener el total de abonos:', error);\r\n        setTotalAbonosDesdeAPI(0);\r\n      } finally {\r\n        setCargandoTotalAbonos(false);\r\n      }\r\n    };\r\n\r\n    obtenerTotalAbonos();\r\n  }, [refreshTrigger]); // Se ejecuta cuando cambia refreshTrigger o al montar\r\n\r\n  const stats = useMemo(() => {\r\n    if (!Array.isArray(projects) || projects.length === 0) {\r\n      return {\r\n        total: 0,\r\n        pagados: 0,\r\n        enProceso: 0,\r\n        enPausa: 0,\r\n        totalBudget: 0,\r\n        totalRecaudado: 0,\r\n        progresoGeneral: 0,\r\n      };\r\n    }\r\n\r\n    const getBudget = (p) => Number(p?.totalPresupuesto ?? p?.presupuesto?.total ?? p?.budget ?? 0);\r\n    \r\n    // Funci√≥n para obtener el total restante (consistente con la l√≥gica del filtro)\r\n    const obtenerTotalRestante = (p) => {\r\n      // 1) Valor directo desde backend si est√° presente\r\n      const resumen = p?.resumenFinanciero || p?.financialSummary || {};\r\n      const fromDB = resumen?.totalRestante ?? resumen?.saldoPendiente ?? resumen?.saldo_pendiente;\r\n      if (typeof fromDB === 'number' && !isNaN(fromDB)) {\r\n        return fromDB;\r\n      }\r\n      // 2) Fallback: calcula a partir de presupuesto y pagado\r\n      const presupuesto = getBudget(p);\r\n      const pagado = typeof getTotalPagado === 'function' \r\n        ? Number(getTotalPagado(p) || 0) \r\n        : 0;\r\n      const restante = Math.max(presupuesto - pagado, 0);\r\n      return restante;\r\n    };\r\n    \r\n    let totalBudget = 0;\r\n    let totalRecaudado = 0;\r\n    let pagados = 0;\r\n    let enProceso = 0;\r\n    let enPausa = 0;\r\n\r\n    projects.forEach((project) => {\r\n      const budget = getBudget(project);\r\n      const paid = typeof getTotalPagado === 'function' \r\n        ? Number(getTotalPagado(project) || 0) \r\n        : 0;\r\n      const totalRestante = obtenerTotalRestante(project);\r\n      \r\n      totalBudget += budget;\r\n      // Calcular total recaudado localmente como respaldo (se usar√° si la API no devuelve datos)\r\n      totalRecaudado += paid;\r\n\r\n      // Determinar estado de pago usando la misma l√≥gica que el filtro\r\n      // Pagados: Total restante = 0\r\n      if (totalRestante === 0 && budget > 0) {\r\n        pagados++;\r\n      } \r\n      // En Proceso de Pago: Total restante > 0 y < Presupuesto\r\n      else if (totalRestante > 0 && totalRestante < budget) {\r\n        enProceso++;\r\n      }\r\n\r\n      // Contar proyectos en pausa\r\n      const estado = project?.estado ?? project?.status ?? project?.statusLabel ?? '';\r\n      const estadoLower = String(estado).toLowerCase();\r\n      if (estadoLower.includes('pausa') || estadoLower.includes('pause') || estadoLower.includes('on-hold') || estadoLower.includes('hold')) {\r\n        enPausa++;\r\n      }\r\n    });\r\n\r\n    // Usar el total de abonos desde la API si est√° disponible, sino calcular desde proyectos\r\n    const totalRecaudadoFinal = totalAbonosDesdeAPI > 0 ? totalAbonosDesdeAPI : totalRecaudado;\r\n\r\n    // Calcular progreso general: (Total recaudado / Total presupuesto) * 100\r\n    // Sin redondear para mostrar el valor exacto\r\n    const progresoGeneral = totalBudget > 0 \r\n      ? (totalRecaudadoFinal / totalBudget) * 100 \r\n      : 0;\r\n\r\n    return {\r\n      total: projects.length,\r\n      pagados,\r\n      enProceso,\r\n      enPausa,\r\n      totalBudget,\r\n      totalRecaudado: totalRecaudadoFinal,\r\n      progresoGeneral: Math.min(progresoGeneral, 100), // Cap at 100% pero sin redondear\r\n      cargandoTotalAbonos,\r\n    };\r\n  }, [projects, getTotalPagado, totalAbonosDesdeAPI]);\r\n\r\n  const formatCurrency = (amount) => {\r\n    if (amount == null || isNaN(amount)) return '$0';\r\n    return new Intl.NumberFormat('es-MX', {\r\n      style: 'currency',\r\n      currency: 'MXN',\r\n      minimumFractionDigits: 0,\r\n      maximumFractionDigits: 0\r\n    }).format(amount);\r\n  };\r\n\r\n  const statCards = [\r\n    {\r\n      title: 'Total de Proyectos',\r\n      value: stats.total,\r\n      icon: 'FolderOpen',\r\n      color: 'bg-blue-500',\r\n      textColor: 'text-blue-600',\r\n      bgColor: 'bg-blue-50'\r\n    },\r\n    {\r\n      title: 'Proyectos Pagados',\r\n      value: stats.pagados,\r\n      icon: 'CheckCircle',\r\n      color: 'bg-emerald-500',\r\n      textColor: 'text-emerald-600',\r\n      bgColor: 'bg-emerald-50',\r\n      description: 'Proyectos completamente pagados'\r\n    },\r\n    {\r\n      title: 'En Proceso de Pago',\r\n      value: stats.enProceso,\r\n      icon: 'Clock',\r\n      color: 'bg-yellow-500',\r\n      textColor: 'text-yellow-600',\r\n      bgColor: 'bg-yellow-50',\r\n      description: 'Proyectos con pagos parciales'\r\n    },\r\n    {\r\n      title: 'Presupuesto Total',\r\n      value: formatCurrency(stats.totalBudget),\r\n      icon: 'DollarSign',\r\n      color: 'bg-purple-500',\r\n      textColor: 'text-purple-600',\r\n      bgColor: 'bg-purple-50',\r\n      description: 'Suma de todos los presupuestos'\r\n    },\r\n    {\r\n      title: 'Proyectos en Pausa',\r\n      value: stats.enPausa,\r\n      icon: 'Pause',\r\n      color: 'bg-orange-500',\r\n      textColor: 'text-orange-600',\r\n      bgColor: 'bg-orange-50',\r\n      description: 'Proyectos con estado en pausa'\r\n    },\r\n    {\r\n      title: 'Total Recaudado',\r\n      value: formatCurrency(stats.totalRecaudado),\r\n      icon: 'CreditCard',\r\n      color: 'bg-green-500',\r\n      textColor: 'text-green-600',\r\n      bgColor: 'bg-green-50',\r\n      description: 'Monto total de abonos registrados'\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6 mb-6\">\r\n      {/* Tarjetas de m√©tricas */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {statCards.map((stat, index) => (\r\n          <div key={index} className=\"bg-card border border-border rounded-lg p-6 hover:shadow-md transition-smooth\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <div className=\"flex-1\">\r\n                <p className=\"text-sm text-muted-foreground mb-1\">{stat.title}</p>\r\n                <p className=\"text-2xl font-bold text-foreground\">{stat.value}</p>\r\n                {stat.description && (\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">{stat.description}</p>\r\n                )}\r\n              </div>\r\n              <div className={`w-12 h-12 ${stat.bgColor} rounded-lg flex items-center justify-center flex-shrink-0`}>\r\n                <Icon name={stat.icon} size={24} className={stat.textColor} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Barra de progreso general */}\r\n      <div className=\"bg-card border border-border rounded-lg p-6\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-1\">Progreso General de Pagos</h3>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {formatCurrency(stats.totalRecaudado)} de {formatCurrency(stats.totalBudget)} recaudados\r\n            </p>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <p className=\"text-2xl font-bold text-primary\">\r\n              {stats.progresoGeneral.toFixed(2)}%\r\n            </p>\r\n            <p className=\"text-xs text-muted-foreground\">Completado</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"w-full bg-muted rounded-full h-4 overflow-hidden\">\r\n          <div \r\n            className=\"h-4 rounded-full bg-gradient-to-r from-primary to-primary/80 transition-all duration-500\"\r\n            style={{ \r\n              width: `${stats.progresoGeneral}%`,\r\n              minWidth: stats.progresoGeneral > 0 ? '2px' : '0'\r\n            }}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"flex justify-between items-center mt-4 pt-4 border-t border-border\">\r\n          <div className=\"text-center flex-1\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Total Recaudado</p>\r\n            <p className=\"text-lg font-semibold text-foreground\">{formatCurrency(stats.totalRecaudado)}</p>\r\n          </div>\r\n          <div className=\"text-center flex-1 border-x border-border\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Pendiente</p>\r\n            <p className=\"text-lg font-semibold text-foreground\">\r\n              {formatCurrency(Math.max(stats.totalBudget - stats.totalRecaudado, 0))}\r\n            </p>\r\n          </div>\r\n          <div className=\"text-center flex-1\">\r\n            <p className=\"text-xs text-muted-foreground mb-1\">Presupuesto Total</p>\r\n            <p className=\"text-lg font-semibold text-foreground\">{formatCurrency(stats.totalBudget)}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AbonosStats;\r\n","import React, { useEffect, useMemo, useRef, useState, useCallback } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport proyectoService from 'services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport usePerson from 'hooks/usePerson';\r\n\r\n/* === Cat√°logos === */\r\nconst projectTypes = [\r\n  { value: 'Instalaci√≥n', label: 'Instalaci√≥n' },\r\n  { value: 'Mantenimiento Preventivo', label: 'Mantenimiento Preventivo' },\r\n  { value: 'Mantenimiento Correctivo', label: 'Mantenimiento Correctivo' },\r\n  { value: 'Inspecci√≥n', label: 'Inspecci√≥n' },\r\n];\r\n\r\nconst departmentOptions = [\r\n  { value: 'Ingenier√≠a', label: 'Ingenier√≠a' },\r\n  { value: 'Mantenimiento', label: 'Mantenimiento' },\r\n  { value: 'Operaciones', label: 'Operaciones' },\r\n];\r\n\r\nconst priorityOptions = [\r\n  { value: 'low', label: 'Baja' },\r\n  { value: 'medium', label: 'Media' },\r\n  { value: 'high', label: 'Alta' },\r\n  { value: 'urgent', label: 'Urgente' },\r\n];\r\n\r\nconst projectStatusOptions = [\r\n  { value: 'Planificaci√≥n', label: 'Planificaci√≥n' },\r\n  { value: 'En Progreso', label: 'En Progreso' },\r\n  { value: 'En Pausa', label: 'En Pausa' },\r\n  { value: 'En Revisi√≥n', label: 'En Revisi√≥n' },\r\n  { value: 'Completado', label: 'Completado' },\r\n  { value: 'Cancelado', label: 'Cancelado' },\r\n];\r\n\r\nconst personnelOptionsFallback = [\r\n  { value: 'Andr√©s Torres ‚Äî T√©cnico HVAC', label: 'Andr√©s Torres ‚Äî T√©cnico HVAC' },\r\n  { value: 'Laura G√≥mez ‚Äî Supervisora de Mantenimiento', label: 'Laura G√≥mez ‚Äî Supervisora de Mantenimiento' },\r\n  { value: 'Pedro Hern√°ndez ‚Äî Ingeniero de Campo', label: 'Pedro Hern√°ndez ‚Äî Ingeniero de Campo' },\r\n];\r\n\r\nconst mapPriorityToEs = (v) => {\r\n  const m = { low: 'Baja', medium: 'Media', high: 'Alta', urgent: 'Urgente' };\r\n  return m[(v || '').toString().toLowerCase()] || v || '';\r\n};\r\n\r\n// /** Tu backend de CREAR solo acepta: \"activo\" | \"en proceso\" */\r\n// const mapStatusForCreate = (uiStatus) => {\r\n//   const s = (uiStatus || '').toLowerCase();\r\n//   if (s === 'en progreso') return 'en proceso';\r\n//   return 'activo';\r\n// };\r\n\r\n/* ===================== Helpers ===================== */\r\nconst formatWithCommas = (v, decimals = 2) => {\r\n  if (v === '' || v == null) return '';\r\n  const num = Number(v);\r\n  if (!Number.isFinite(num)) return '';\r\n  const options = Number.isInteger(num)\r\n    ? { minimumFractionDigits: 0, maximumFractionDigits: 0 }\r\n    : { minimumFractionDigits: decimals, maximumFractionDigits: decimals };\r\n  return num.toLocaleString('es-MX', options);\r\n};\r\nconst unformatNumber = (raw) => {\r\n  if (raw === '' || raw == null) return 0;\r\n  const clean = String(raw).replace(/[^\\d.-]/g, '');\r\n  const n = parseFloat(clean);\r\n  return Number.isFinite(n) ? n : 0;\r\n};\r\nconst rateSafe = (rate) => (Number.isFinite(Number(rate)) ? Number(rate) : 0);\r\n/* =================================================== */\r\n\r\nconst CreateProjectModal = ({ isOpen, onClose, onSubmit }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const { persons, getPersons } = usePerson();\r\n\r\n  // Estado del formulario\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    code: '',\r\n    type: '',\r\n    client: '',\r\n    department: '',\r\n    priority: '',\r\n    status: '',\r\n    budgetBreakdown: {\r\n      labor: 0,\r\n      parts: 0,\r\n      equipment: 0, // siempre guardado en MXN\r\n      materials: 0,\r\n      transportation: 0,\r\n      other: 0,\r\n    },\r\n    location: '',\r\n    startDate: '',\r\n    endDate: '',\r\n    assignedPersonnel: [],\r\n    description: '',\r\n  });\r\n\r\n  // === Moneda / FX ===\r\n  const [isEquipmentInUSD, setIsEquipmentInUSD] = useState(false);\r\n  const [exchangeRate, setExchangeRate] = useState(18); // MXN por USD\r\n  const [uiEquipmentUSD, setUiEquipmentUSD] = useState(''); // üëà ahora SOLO display (read-only)\r\n  const [loadingFx, setLoadingFx] = useState(false);\r\n  const [fxError, setFxError] = useState(null);\r\n\r\n  // refs anti-bucle\r\n  const isUSDRef = useRef(isEquipmentInUSD);\r\n  useEffect(() => { isUSDRef.current = isEquipmentInUSD; }, [isEquipmentInUSD]);\r\n\r\n  // === Clientes ===\r\n  const [clientOptions, setClientOptions] = useState([]);\r\n  const [loadingClients, setLoadingClients] = useState(false);\r\n\r\n  // Clientes (una vez por apertura)\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        setLoadingClients(true);\r\n        const resp = await clientService.getClients();\r\n        const list = Array.isArray(resp?.data) ? resp.data : (Array.isArray(resp) ? resp : []);\r\n        const opts = list.map((c) => ({ value: c.id, label: c.empresa || c.contacto || '‚Äî' }));\r\n        if (mounted) setClientOptions(opts);\r\n      } catch (e) {\r\n        console.error('Error cargando clientes:', e);\r\n      } finally {\r\n        if (mounted) setLoadingClients(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [isOpen]);\r\n\r\n  // Personas (una vez por apertura, sin depender de getPersons)\r\n  const fetchedPersonsRef = useRef(false);\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    if (fetchedPersonsRef.current) return;\r\n    fetchedPersonsRef.current = true;\r\n    const abort = new AbortController();\r\n    (async () => {\r\n      try {\r\n        await getPersons({ signal: abort.signal });\r\n      } catch (e) {\r\n        if (e?.name !== 'AbortError') console.error('Error cargando empleados:', e);\r\n      }\r\n    })();\r\n    return () => { abort.abort(); fetchedPersonsRef.current = false; };\r\n  }, [isOpen]); // intencionalmente sin getPersons\r\n\r\n  // Opciones de personal\r\n  const personnelOptionsFinal = useMemo(() => {\r\n    if (!Array.isArray(persons) || persons.length === 0) return personnelOptionsFallback;\r\n    const built = persons.map((p) => {\r\n      const nombre =\r\n        p?.nombreCompleto ||\r\n        [p?.nombre, p?.apellidoPaterno, p?.apellidoMaterno].filter(Boolean).join(' ') ||\r\n        p?.nombre || p?.name || '‚Äî';\r\n      const puesto = p?.puesto || p?.rol || p?.cargo;\r\n      const etiqueta = puesto ? `${nombre} ‚Äî ${puesto}` : nombre;\r\n      return etiqueta ? { value: etiqueta, label: etiqueta } : null;\r\n    }).filter(Boolean);\r\n\r\n    const seen = new Set(); const dedup = [];\r\n    for (const opt of built) { if (seen.has(opt.value)) continue; seen.add(opt.value); dedup.push(opt); }\r\n    return dedup.length ? dedup : personnelOptionsFallback;\r\n  }, [persons]);\r\n\r\n  const handleInputChange = (key, value) => {\r\n    setFormData((s) => ({ ...s, [key]: value }));\r\n    if (errors[key]) setErrors((e) => ({ ...e, [key]: undefined }));\r\n  };\r\n\r\n  const setEquipmentMXN = (mxnValue) => {\r\n    setFormData((s) => ({\r\n      ...s,\r\n      budgetBreakdown: { ...s.budgetBreakdown, equipment: Number(mxnValue) || 0 },\r\n    }));\r\n  };\r\n\r\n  /** üîÅ Cuando est√° en USD, el USD mostrado se calcula SIEMPRE desde MXN/rate */\r\n  useEffect(() => {\r\n    if (!isEquipmentInUSD) return;\r\n    const mxn = Number(formData?.budgetBreakdown?.equipment || 0);\r\n    const rate = rateSafe(exchangeRate);\r\n    const usd = rate ? mxn / rate : 0;\r\n    setUiEquipmentUSD(usd ? formatWithCommas(usd, 2) : '0.00');\r\n  }, [isEquipmentInUSD, exchangeRate, formData?.budgetBreakdown?.equipment]);\r\n\r\n  const handleBudgetChange = (key, rawValue) => {\r\n    const cleanedNumber = unformatNumber(rawValue);\r\n    // ‚úÖ si est√° en USD, NO permitimos editar; solo mostramos USD calculado.\r\n    if (key === 'equipment' && isEquipmentInUSD) return;\r\n    setFormData((s) => ({\r\n      ...s,\r\n      budgetBreakdown: { ...s.budgetBreakdown, [key]: cleanedNumber },\r\n    }));\r\n  };\r\n\r\n  // === FX: traer USD‚ÜíMXN estable\r\n  const fetchUsdMxnRate = useCallback(async () => {\r\n    try {\r\n      setFxError(null);\r\n      setLoadingFx(true);\r\n      const map = await proyectoService.getCurrencyRatesMap({ base: 'USD', currencies: ['MXN'] });\r\n      const rate = Number(map?.MXN || 0);\r\n      if (rate > 0) {\r\n        setExchangeRate(rate);\r\n        // USD de display se recalcula en el useEffect de arriba\r\n        return rate;\r\n      } else {\r\n        setFxError('No lleg√≥ una tasa v√°lida.');\r\n        return null;\r\n      }\r\n    } catch (e) {\r\n      setFxError(e?.message || 'Error llamando currencyapi');\r\n      console.error('currencyapi error:', e);\r\n      return null;\r\n    } finally {\r\n      setLoadingFx(false);\r\n    }\r\n  }, []);\r\n\r\n  // Pre-cargar tasa al abrir\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    fetchUsdMxnRate();\r\n  }, [isOpen, fetchUsdMxnRate]);\r\n\r\n  const toggleEquipmentUSD = async (checked) => {\r\n    setIsEquipmentInUSD(checked);\r\n    if (checked) {\r\n      await fetchUsdMxnRate(); // tras traer tasa, el useEffect calcular√° el USD mostrado\r\n    } else {\r\n      setUiEquipmentUSD('');\r\n    }\r\n  };\r\n\r\n  // En modo USD, el rate tambi√©n es solo lectura (no editable)\r\n  const handleExchangeRateChange = () => {};\r\n\r\n  const validate = () => {\r\n    const e = {};\r\n    if (!formData.name) e.name = 'Requerido';\r\n    if (!formData.type) e.type = 'Requerido';\r\n    if (!formData.client) e.client = 'Seleccione un cliente';\r\n    if (!formData.department) e.department = 'Requerido';\r\n    if (!formData.priority) e.priority = 'Requerido';\r\n    if (!formData.status) e.status = 'Requerido';\r\n    if (!formData.location) e.location = 'Requerido';\r\n    if (!formData.startDate) e.startDate = 'Requerido';\r\n    if (!formData.endDate) e.endDate = 'Requerido';\r\n    if (formData.startDate && formData.endDate && new Date(formData.endDate) < new Date(formData.startDate)) {\r\n      e.endDate = 'La fecha de fin no puede ser anterior al inicio';\r\n    }\r\n    if (isEquipmentInUSD && !(exchangeRate > 0)) e.exchangeRate = 'Indique un tipo de cambio v√°lido';\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  };\r\n \r\n  const buildPayloadForBackend = () => {\r\n    const b = formData.budgetBreakdown || {};\r\n    const equipoDolares = isEquipmentInUSD\r\n      ? unformatNumber(uiEquipmentUSD) // aunque sea read-only, lo mandamos como referencia\r\n      : undefined;\r\n\r\n    return {\r\n      codigo: formData.code || '',\r\n      nombre: formData.name || '',\r\n      tipoProyecto: formData.type || '',\r\n      cliente: { id: formData.client || '', nombre: formData.clientName || '' },\r\n      departamento: formData.department || '',\r\n      prioridad: mapPriorityToEs(formData.priority),\r\n      ubicacion: formData.location || '',\r\n      descripcion: formData.description || '',\r\n      personalAsignado: Array.isArray(formData.assignedPersonnel) ? formData.assignedPersonnel : [],\r\n      cronograma: { fechaInicio: formData.startDate || '', fechaFin: formData.endDate || '' },\r\n      presupuesto: {\r\n        manoObra: Number(b.labor) || 0,\r\n        piezas: Number(b.parts) || 0,\r\n        equipos: Number(b.equipment) || 0, // siempre MXN\r\n        ...(equipoDolares !== undefined ? { equipoDolares } : {}),\r\n        materiales: Number(b.materials) || 0,\r\n        transporte: Number(b.transportation) || 0,\r\n        otros: Number(b.other) || 0,\r\n        _metaEquipos: { capturadoEn: isEquipmentInUSD ? 'USD' : 'MXN' },\r\n      },\r\n      estado: formData.status,\r\n    };\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validate()) return;\r\n    setIsSubmitting(true);\r\n    try {\r\n      const payload = buildPayloadForBackend();\r\n      await proyectoService.createProyecto(payload);\r\n      onSubmit && onSubmit(payload);\r\n      onClose && onClose();\r\n    } catch (err) {\r\n      console.error('Error creando proyecto:', err);\r\n      alert(err?.data?.message || err?.userMessage || err?.message || 'Error al crear el proyecto.');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n  const b = formData.budgetBreakdown || {};\r\n  const totalMXN =\r\n    (Number(b?.labor) || 0) +\r\n    (Number(b?.parts) || 0) +\r\n    (Number(b?.equipment) || 0) +\r\n    (Number(b?.materials) || 0) +\r\n    (Number(b?.transportation) || 0) +\r\n    (Number(b?.other) || 0);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card border border-border rounded-lg w-full max-w-4xl max-height-[90vh] max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Crear Nuevo Proyecto</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Complete la informaci√≥n del proyecto</p>\r\n          </div>\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\r\n            <Icon name=\"X\" size={20} />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci√≥n B√°sica */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Informaci√≥n B√°sica</h3>\r\n            </div>\r\n\r\n            <Input label=\"Nombre del Proyecto\" type=\"text\" placeholder=\"Ej: Instalaci√≥n HVAC Edificio Central\"\r\n              value={formData?.name} onChange={(e) => handleInputChange('name', e?.target?.value)}\r\n              error={errors?.name} required />\r\n\r\n            <Input label=\"C√≥digo del Proyecto\" type=\"text\" placeholder=\"Ej: PROJ-2025-001\"\r\n              value={formData?.code} onChange={(e) => handleInputChange('code', e?.target?.value)}\r\n              error={errors?.code} description=\"Se generar√° autom√°ticamente si se deja vac√≠o\" />\r\n\r\n            <Select label=\"Tipo de Proyecto\" options={projectTypes} value={formData?.type}\r\n              onChange={(value) => handleInputChange('type', value)} error={errors?.type} required />\r\n\r\n            <Select label=\"Cliente\" options={clientOptions} value={formData?.client}\r\n              onChange={(value) => handleInputChange('client', value)} error={errors?.client}\r\n              searchable required loading={loadingClients} />\r\n\r\n            <Select label=\"Departamento Responsable\" options={departmentOptions} value={formData?.department}\r\n              onChange={(value) => handleInputChange('department', value)} error={errors?.department} required />\r\n\r\n            <Select label=\"Prioridad\" options={priorityOptions} value={formData?.priority}\r\n              onChange={(value) => handleInputChange('priority', value)} error={errors?.priority} required />\r\n\r\n            <Select label=\"Estado del Proyecto\" options={projectStatusOptions} value={formData?.status}\r\n              onChange={(value) => handleInputChange('status', value)} error={errors?.status} required />\r\n\r\n            <Input label=\"Ubicaci√≥n\" type=\"text\" placeholder=\"Ej: Ciudad de M√©xico, CDMX\"\r\n              value={formData?.location} onChange={(e) => handleInputChange('location', e?.target?.value)}\r\n              error={errors?.location} required />\r\n\r\n            {/* Presupuesto */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Desglose de Presupuesto</h3>\r\n            </div>\r\n\r\n            <Input label=\"Mano de Obra (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.labor)} onChange={(e) => handleBudgetChange('labor', e?.target?.value)} />\r\n\r\n            <Input label=\"Piezas (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.parts)} onChange={(e) => handleBudgetChange('parts', e?.target?.value)} />\r\n\r\n            {/* Equipos con USD */}\r\n            <div className=\"flex flex-col gap-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                  {isEquipmentInUSD ? 'Equipos (USD se convierte a MXN)' : 'Equipos (MXN)'}\r\n                </label>\r\n                <label className=\"inline-flex items-center gap-2 text-sm text-foreground cursor-pointer select-none\">\r\n                  <input type=\"checkbox\" checked={isEquipmentInUSD}\r\n                    onChange={(e) => toggleEquipmentUSD(e.target.checked)}\r\n                    className=\"h-4 w-4 accent-primary cursor-pointer\" />\r\n                  Precio en d√≥lares\r\n                </label>\r\n              </div>\r\n\r\n              {/* Campo Equipos */}\r\n              <input\r\n                type=\"text\"\r\n                inputMode=\"decimal\"\r\n                placeholder={isEquipmentInUSD ? '0.00 USD' : '0.00 MXN'}\r\n                value={isEquipmentInUSD ? uiEquipmentUSD : formatWithCommas(b?.equipment)}\r\n                onChange={(e) => handleBudgetChange('equipment', e?.target?.value)}\r\n                readOnly={isEquipmentInUSD} // üëà read-only en USD\r\n                disabled={false}\r\n                className={`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${isEquipmentInUSD ? 'bg-muted cursor-not-allowed' : ''}`}\r\n              />\r\n\r\n              {isEquipmentInUSD && (\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <div className=\"flex-1 min-w-[220px]\">\r\n                    <Input\r\n                      label=\"Tipo de cambio (MXN / USD)\"\r\n                      type=\"text\"\r\n                      inputMode=\"decimal\"\r\n                      value={formatWithCommas(exchangeRate, 4)}\r\n                      onChange={handleExchangeRateChange}\r\n                      readOnly\r\n                      disabled\r\n                    />\r\n                  </div>\r\n\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    onClick={fetchUsdMxnRate}\r\n                    loading={loadingFx}\r\n                    iconName=\"RefreshCcw\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    {loadingFx ? 'Actualizando‚Ä¶' : 'Actualizar tipo de cambio'}\r\n                  </Button>\r\n\r\n                  <div className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                    Guardado en MXN:{' '}\r\n                    <span className=\"font-semibold\">\r\n                      ${formatWithCommas(b?.equipment, 2)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {fxError && <div className=\"text-xs text-destructive\">{fxError}</div>}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <Input label=\"Materiales (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.materials)} onChange={(e) => handleBudgetChange('materials', e?.target?.value)} />\r\n\r\n            <Input label=\"Transporte (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.transportation)} onChange={(e) => handleBudgetChange('transportation', e?.target?.value)} />\r\n\r\n            <Input label=\"Otros Gastos (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.other)} onChange={(e) => handleBudgetChange('other', e?.target?.value)} />\r\n\r\n            {/* Total */}\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"bg-muted p-4 rounded-lg\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm font-medium text-foreground\">Total del Presupuesto (MXN):</span>\r\n                  <span className=\"text-lg font-semibold text-primary\">\r\n                    ${formatWithCommas(totalMXN, 2)} MXN\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cronograma */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Cronograma</h3>\r\n            </div>\r\n\r\n            <Input label=\"Fecha de Inicio\" type=\"date\" value={formData?.startDate}\r\n              onChange={(e) => handleInputChange('startDate', e?.target?.value)} error={errors?.startDate} required />\r\n\r\n            <Input label=\"Fecha de Finalizaci√≥n\" type=\"date\" value={formData?.endDate}\r\n              onChange={(e) => handleInputChange('endDate', e?.target?.value)} error={errors?.endDate} required />\r\n\r\n            {/* Personal */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Asignaci√≥n de Personal</h3>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Select\r\n                label=\"Personal Asignado\"\r\n                options={personnelOptionsFinal}\r\n                value={formData?.assignedPersonnel}\r\n                onChange={(value) => handleInputChange('assignedPersonnel', value)}\r\n                multiple\r\n                searchable\r\n                description=\"Seleccione el personal que trabajar√° en este proyecto\"\r\n              />\r\n            </div>\r\n\r\n            {/* Descripci√≥n */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Descripci√≥n del Proyecto</label>\r\n              <textarea\r\n                rows={4}\r\n                placeholder=\"Describa los objetivos, alcance y detalles importantes del proyecto...\"\r\n                value={formData?.description}\r\n                onChange={(e) => handleInputChange('description', e?.target?.value)}\r\n                className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Acciones */}\r\n          <div className=\"flex items-center justify-end space-x-4 mt-8 pt-6 border-t border-border\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={onClose} disabled={isSubmitting}>\r\n              Cancelar\r\n            </Button>\r\n            <Button type=\"submit\" loading={isSubmitting} iconName=\"Plus\" iconPosition=\"left\">\r\n              {isSubmitting ? 'Creando...' : 'Crear Proyecto'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateProjectModal;\r\n","import React, { useEffect, useMemo, useRef, useState, useCallback } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Input from '../../../components/ui/Input';\r\nimport Select from '../../../components/ui/Select';\r\nimport proyectoService from 'services/proyectoService';\r\nimport clientService from 'services/clientService';\r\nimport usePerson from 'hooks/usePerson';\r\n\r\n/* ===================== ESTADOS ===================== */\r\nconst estadoOptionsBackend = [\r\n  { value: 'planificaci√≥n', label: 'Planificaci√≥n' },\r\n  { value: 'en proceso',    label: 'En Progreso' },\r\n  { value: 'en pausa',      label: 'En Pausa' },\r\n  { value: 'en revisi√≥n',   label: 'En Revisi√≥n' },\r\n  { value: 'completado',    label: 'Completado' },\r\n  { value: 'cancelado',     label: 'Cancelado' },\r\n];\r\nconst ALLOWED_ESTADOS = estadoOptionsBackend.map(o => o.value);\r\n\r\n/* Mapeos de estado (API solo ‚Äúactivo‚Äù | ‚Äúen proceso‚Äù) */\r\n// const backendToUiDefault = (apiEstado) => {\r\n//   const v = String(apiEstado || '').toLowerCase();\r\n//   if (v === 'en proceso') return 'en proceso';\r\n//   if (v === 'activo') return 'planificaci√≥n';\r\n//   return 'planificaci√≥n';\r\n// };\r\n// const mapUiToBackend = (uiEstado) => {\r\n//   const v = String(uiEstado || '').toLowerCase();\r\n//   return v === 'en proceso' ? 'en proceso' : 'activo';\r\n// };\r\n\r\n/* Cache local del estado UI por proyecto (no toca API) */\r\nconst UI_ESTADO_KEY = 'proyectos_ui_estado_v1';\r\nconst uiEstadoCache = {\r\n  _read() { try { return JSON.parse(localStorage.getItem(UI_ESTADO_KEY)) || {}; } catch { return {}; } },\r\n  get(id) { if (!id) return null; const m = this._read(); return m[id] || null; },\r\n  set(id, estado) {\r\n    if (!id) return;\r\n    const m = this._read();\r\n    if (estado) m[id] = estado; else delete m[id];\r\n    localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m));\r\n  }\r\n};\r\n\r\n/* ===================== CAT√ÅLOGOS ===================== */\r\nconst departmentOptions = [\r\n  { value: 'Ingenier√≠a', label: 'Ingenier√≠a' },\r\n  { value: 'Mantenimiento', label: 'Mantenimiento' },\r\n  { value: 'Operaciones', label: 'Operaciones' },\r\n];\r\nconst priorityOptions = [\r\n  { value: 'Baja', label: 'Baja' },\r\n  { value: 'Media', label: 'Media' },\r\n  { value: 'Alta', label: 'Alta' },\r\n  { value: 'Urgente', label: 'Urgente' },\r\n];\r\n\r\n/* ===== Helpers ===== */\r\nconst toNumberOrUndef = (v) => {\r\n  if (v === '' || v == null) return undefined;\r\n  const n = typeof v === 'number' ? v : parseFloat(String(v).replace(/[^\\d.-]/g, ''));\r\n  return Number.isFinite(n) ? n : undefined;\r\n};\r\nconst formatWithCommas = (v, decimals = 2) => {\r\n  const n = toNumberOrUndef(v);\r\n  if (n == null) return '';\r\n  const opts = Number.isInteger(n)\r\n    ? { minimumFractionDigits: 0, maximumFractionDigits: 0 }\r\n    : { minimumFractionDigits: decimals, maximumFractionDigits: decimals };\r\n  return n.toLocaleString('es-MX', opts);\r\n};\r\nconst asStr = (v, fallback = '') => (v == null ? fallback : String(v));\r\nconst asArr = (v) => (Array.isArray(v) ? v : v == null ? [] : [String(v)]);\r\nconst rateSafe = (rate) => (Number.isFinite(Number(rate)) ? Number(rate) : 0);\r\n\r\n/* ===================== COMPONENTE ===================== */\r\nconst EditProjectModal = ({ isOpen = false, onClose, onSubmit, project }) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [serverProject, setServerProject] = useState(null);\r\n\r\n  // Personas / Clientes\r\n  const { persons, getPersons } = usePerson();\r\n  const [clientOptions, setClientOptions] = useState([]);\r\n\r\n  // USD controls\r\n  const [isEquipmentInUSD, setIsEquipmentInUSD] = useState(false);\r\n  const [exchangeRate, setExchangeRate] = useState(18);     // MXN por USD\r\n  const [uiEquipmentUSD, setUiEquipmentUSD] = useState(''); // solo DISPLAY (read-only)\r\n  const [loadingFx, setLoadingFx] = useState(false);\r\n  const [fxError, setFxError] = useState(null);\r\n\r\n  /* ============= CARGAS ============= */\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const resp = await clientService.getClients();\r\n        const list = Array.isArray(resp?.data) ? resp.data : (Array.isArray(resp) ? resp : []);\r\n        const opts = list.map((c) => ({\r\n          value: c.id,\r\n          label: c.empresa || c.nombre || c.contacto || '‚Äî',\r\n        }));\r\n        if (mounted) setClientOptions(opts);\r\n      } catch (e) {\r\n        console.error('Error cargando clientes:', e);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [isOpen]);\r\n\r\n  const fetchedPersonsRef = useRef(false);\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    if (fetchedPersonsRef.current) return;\r\n    fetchedPersonsRef.current = true;\r\n    (async () => {\r\n      try { await getPersons(); } catch (e) { console.error('Error cargando empleados:', e); }\r\n    })();\r\n    return () => { fetchedPersonsRef.current = false; };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isOpen]);\r\n\r\n  // Traer el proyecto completo al abrir\r\n  useEffect(() => {\r\n    if (!isOpen || !project?.id) return;\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const resp = await proyectoService.getProyectoById(project.id);\r\n        const doc = resp?.data ?? resp;\r\n        if (mounted) setServerProject(doc || project);\r\n      } catch (e) {\r\n        console.error('Error cargando proyecto:', e);\r\n        if (mounted) setServerProject(project || null);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [isOpen, project?.id]);\r\n\r\n  // Normalizaci√≥n (estado desde cache ‚Üí si no, derivado desde API)\r\n  const normalized = useMemo(() => {\r\n    const doc = serverProject || project || {};\r\n    const p = doc.presupuesto || {};\r\n    const cron = doc.cronograma || {};\r\n    const id = doc.id || project?.id;\r\n    const estadoUi = uiEstadoCache.get(id) || doc.estado;\r\n\r\n    return {\r\n      id,\r\n      codigo: doc.codigo || '',\r\n      tipoProyecto: doc.tipoProyecto || '',\r\n      clienteId: doc?.cliente?.id ?? '',\r\n      clienteNombre: doc?.cliente?.nombre || doc?.cliente?.empresa || '',\r\n      nombre: doc.nombre || doc.nombreProyecto || '',\r\n      departamento: doc.departamento || '',\r\n      prioridad: doc.prioridad || '',\r\n      ubicacion: doc.ubicacion || '',\r\n      descripcion: doc.descripcion || '',\r\n      estado: estadoUi,\r\n      cronograma: {\r\n        fechaInicio: cron?.fechaInicio || '',\r\n        fechaFin: cron?.fechaFin || '',\r\n      },\r\n      personalAsignado: Array.isArray(doc?.personalAsignado) ? doc.personalAsignado : [],\r\n      presupuesto: {\r\n        manoObra: toNumberOrUndef(p.manoObra),\r\n        piezas: toNumberOrUndef(p.piezas),\r\n        equipos: toNumberOrUndef(p.equipos),\r\n        equipoDolares: toNumberOrUndef(p.equipoDolares),\r\n        materiales: toNumberOrUndef(p.materiales),\r\n        transporte: toNumberOrUndef(p.transporte),\r\n        otros: toNumberOrUndef(p.otros),\r\n        _metaEquipos: { capturadoEn: p?._metaEquipos?.capturadoEn || 'MXN' },\r\n      },\r\n    };\r\n  }, [serverProject, project]);\r\n\r\n  const [formData, setFormData] = useState(normalized);\r\n  useEffect(() => { if (isOpen) setFormData(normalized); }, [normalized, isOpen]);\r\n\r\n  // === Traer tasa de cambio: estable y reutilizable ===\r\n  const fetchUsdMxnRate = useCallback(async () => {\r\n    try {\r\n      setFxError(null);\r\n      setLoadingFx(true);\r\n      const map = await proyectoService.getCurrencyRatesMap({ base: 'USD', currencies: ['MXN'] });\r\n      const rate = Number(map?.MXN || 0);\r\n      if (rate > 0) {\r\n        setExchangeRate(rate);\r\n        return rate;\r\n      } else {\r\n        setFxError('No lleg√≥ una tasa v√°lida.');\r\n        return null;\r\n      }\r\n    } catch (e) {\r\n      setFxError(e?.message || 'Error llamando currencyapi');\r\n      console.error('currencyapi error:', e);\r\n      return null;\r\n    } finally {\r\n      setLoadingFx(false);\r\n    }\r\n  }, []);\r\n\r\n  // Precargar tipo de cambio al abrir\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    fetchUsdMxnRate();\r\n  }, [isOpen, fetchUsdMxnRate]);\r\n\r\n  // Inicializar UI USD seg√∫n _metaEquipos\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    const cap = formData?.presupuesto?._metaEquipos?.capturadoEn;\r\n    if (cap === 'USD') {\r\n      setIsEquipmentInUSD(true);\r\n    } else {\r\n      setIsEquipmentInUSD(false);\r\n      setUiEquipmentUSD('');\r\n    }\r\n  }, [isOpen, formData?.presupuesto?._metaEquipos?.capturadoEn]);\r\n\r\n  // Cuando estamos en USD: calcular SIEMPRE USD mostrado = MXN / rate (read-only)\r\n  useEffect(() => {\r\n    if (!isEquipmentInUSD) return;\r\n    const mxn = toNumberOrUndef(formData?.presupuesto?.equipos) ?? 0;\r\n    const rate = rateSafe(exchangeRate);\r\n    const usd = rate ? mxn / rate : 0;\r\n    setUiEquipmentUSD(usd ? formatWithCommas(usd, 2) : '0.00');\r\n  }, [isEquipmentInUSD, exchangeRate, formData?.presupuesto?.equipos]);\r\n\r\n  // Opciones de Personal\r\n  const personnelOptions = useMemo(() => {\r\n    const fromPersons = Array.isArray(persons) ? persons.map((p) => {\r\n      const nombre =\r\n        p?.nombreCompleto ||\r\n        [p?.nombre, p?.apellidoPaterno, p?.apellidoMaterno].filter(Boolean).join(' ') ||\r\n        p?.nombre || p?.name || '‚Äî';\r\n      const puesto = p?.puesto || p?.rol || p?.cargo;\r\n      const etiqueta = puesto ? `${nombre} ‚Äî ${puesto}` : nombre;\r\n      return { value: etiqueta, label: etiqueta };\r\n    }) : [];\r\n    const existing = Array.isArray(formData?.personalAsignado)\r\n      ? formData.personalAsignado.map((s) => ({ value: s, label: s })) : [];\r\n    const seen = new Set();\r\n    return [...existing, ...fromPersons].filter(o => (seen.has(o.value) ? false : (seen.add(o.value), true)));\r\n  }, [persons, formData?.personalAsignado]);\r\n\r\n  // ‚úÖ Total MXN (√∫nica declaraci√≥n)\r\n  const totalMXN = useMemo(() => {\r\n    const b = formData?.presupuesto || {};\r\n    const sum = (...vals) => vals.reduce((acc, v) => acc + (toNumberOrUndef(v) ?? 0), 0);\r\n    return sum(b.manoObra, b.piezas, b.equipos, b.materiales, b.transporte, b.otros);\r\n  }, [formData]);\r\n\r\n  // Handlers\r\n  const handle = (k, v) => {\r\n    setFormData((s) => ({ ...s, [k]: v }));\r\n    if (errors[k]) setErrors((e) => ({ ...e, [k]: undefined }));\r\n  };\r\n  const handleP = (k, raw) => {\r\n    const n = raw === '' || raw == null ? undefined : toNumberOrUndef(raw);\r\n    setFormData((s) => ({ ...s, presupuesto: { ...s.presupuesto, [k]: n } }));\r\n  };\r\n\r\n  // Toggle USD: calc display y bloquear edici√≥n\r\n  const toggleUSD = async (checked) => {\r\n    setIsEquipmentInUSD(checked);\r\n    setFormData((s) => ({\r\n      ...s,\r\n      presupuesto: { ...s.presupuesto, _metaEquipos: { capturadoEn: checked ? 'USD' : 'MXN' } },\r\n    }));\r\n    if (checked) {\r\n      const rate = (await fetchUsdMxnRate()) ?? exchangeRate;\r\n      const mxn = toNumberOrUndef(formData?.presupuesto?.equipos) ?? 0;\r\n      const usd = rate ? mxn / rate : 0;\r\n      setUiEquipmentUSD(usd ? formatWithCommas(usd, 2) : '0.00');\r\n    } else {\r\n      setUiEquipmentUSD('');\r\n    }\r\n  };\r\n\r\n  const validate = () => {\r\n    const e = {};\r\n    if (!formData.nombre) e.nombre = 'Requerido';\r\n    if (!formData.departamento) e.departamento = 'Requerido';\r\n    if (!formData.ubicacion) e.ubicacion = 'Requerido';\r\n    if (!ALLOWED_ESTADOS.includes(formData.estado)) e.estado = 'Estado inv√°lido';\r\n    if (isEquipmentInUSD && !(exchangeRate > 0)) e.exchangeRate = 'Tipo de cambio inv√°lido';\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  };\r\n\r\n  // Payload: solo definidos + estado mapeado; equipoDolares calculado si USD activo\r\n  const buildPayloadForUpdate = () => {\r\n    const p = formData.presupuesto || {};\r\n    const pres = {};\r\n    ['manoObra','piezas','equipos','equipoDolares','materiales','transporte','otros'].forEach(k => {\r\n      const val = toNumberOrUndef(p[k]);\r\n      if (val != null) pres[k] = val;\r\n    });\r\n    pres._metaEquipos = { capturadoEn: isEquipmentInUSD ? 'USD' : 'MXN' };\r\n\r\n    if (isEquipmentInUSD) {\r\n      const mxn = toNumberOrUndef(p.equipos) ?? 0;\r\n      const rate = rateSafe(exchangeRate);\r\n      const usd = rate ? mxn / rate : undefined;\r\n      if (usd != null) pres.equipoDolares = usd;\r\n    }\r\n\r\n    return {\r\n      nombre: formData.nombre,\r\n      departamento: formData.departamento,\r\n      prioridad: formData.prioridad,\r\n      ubicacion: formData.ubicacion,\r\n      descripcion: formData.descripcion,\r\n      personalAsignado: Array.isArray(formData.personalAsignado) ? formData.personalAsignado : [],\r\n      estado: formData.estado,\r\n      presupuesto: pres,\r\n    };\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e?.preventDefault();\r\n    if (!validate()) return;\r\n    setIsSubmitting(true);\r\n    try {\r\n      const payload = buildPayloadForUpdate();\r\n      await proyectoService.updateProyecto(formData.id, payload);\r\n      uiEstadoCache.set(formData.id, formData.estado);\r\n      onSubmit && onSubmit({ id: formData.id, ...payload, _uiEstado: formData.estado });\r\n      onClose && onClose();\r\n    } catch (err) {\r\n      console.error('Error actualizando proyecto:', err);\r\n      const detalle = err?.data?.error || err?.data?.message || err?.userMessage || err?.message;\r\n      alert(`No se pudo actualizar el proyecto.\\n${detalle || ''}`);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  /* Render */\r\n  const b = formData.presupuesto || {};\r\n  const clientLabel = useMemo(() => {\r\n    if (!formData.clienteId) return '‚Äî';\r\n    const found = clientOptions.find((o) => o.value === formData.clienteId);\r\n    return found?.label || formData.clienteNombre || formData.clienteId;\r\n  }, [clientOptions, formData.clienteId, formData.clienteNombre]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-1050 p-4\">\r\n      <div className=\"bg-card border border-border rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-border\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Editar Proyecto</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Actualice la informaci√≥n permitida</p>\r\n          </div>\r\n        <Button variant=\"ghost\" size=\"icon\" onClick={onClose}><Icon name=\"X\" size={20} /></Button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Informaci√≥n B√°sica */}\r\n            <div className=\"md:col-span-2\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Informaci√≥n B√°sica</h3>\r\n            </div>\r\n\r\n            <Input label=\"C√≥digo (solo lectura)\" value={asStr(formData?.codigo, '‚Äî')} onChange={() => {}} disabled />\r\n            <Input label=\"Tipo de Proyecto (solo lectura)\" value={asStr(formData?.tipoProyecto, '‚Äî')} onChange={() => {}} disabled />\r\n            <Input label=\"Cliente (solo lectura)\" value={asStr(clientLabel, '‚Äî')} onChange={() => {}} disabled />\r\n\r\n            <Input\r\n              label=\"Nombre\"\r\n              type=\"text\"\r\n              placeholder=\"Ej: Instalaci√≥n HVAC Edificio Central\"\r\n              value={asStr(formData?.nombre)}\r\n              onChange={(e) => handle('nombre', e.target.value)}\r\n              error={errors?.nombre}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Departamento Responsable\"\r\n              options={departmentOptions}\r\n              value={asStr(formData?.departamento)}\r\n              onChange={(value) => handle('departamento', value)}\r\n              error={errors?.departamento}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Prioridad\"\r\n              options={priorityOptions}\r\n              value={asStr(formData?.prioridad)}\r\n              onChange={(value) => handle('prioridad', value)}\r\n              error={errors?.prioridad}\r\n              required\r\n            />\r\n\r\n            <Select\r\n              label=\"Estado\"\r\n              options={estadoOptionsBackend}\r\n              value={asStr(formData?.estado)}\r\n              onChange={(value) => handle('estado', value)}\r\n              error={errors?.estado}\r\n              required\r\n            />\r\n\r\n            <Input\r\n              label=\"Ubicaci√≥n\"\r\n              type=\"text\"\r\n              placeholder=\"Ej: Ciudad de M√©xico, CDMX\"\r\n              value={asStr(formData?.ubicacion)}\r\n              onChange={(e) => handle('ubicacion', e.target.value)}\r\n              error={errors?.ubicacion}\r\n              required\r\n            />\r\n\r\n            {/* Descripci√≥n */}\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-foreground mb-2\">Descripci√≥n del Proyecto</label>\r\n              <textarea\r\n                rows={4}\r\n                placeholder=\"Describa los objetivos, alcance y detalles importantes del proyecto...\"\r\n                value={asStr(formData?.descripcion)}\r\n                onChange={(e) => handle('descripcion', e.target.value)}\r\n                className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\r\n              />\r\n            </div>\r\n\r\n            {/* Desglose de Presupuesto */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Desglose de Presupuesto</h3>\r\n            </div>\r\n\r\n            <Input label=\"Mano de Obra (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.manoObra)} onChange={(e) => handleP('manoObra', e?.target?.value)} />\r\n\r\n            <Input label=\"Piezas (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.piezas)} onChange={(e) => handleP('piezas', e?.target?.value)} />\r\n\r\n            {/* Equipos con toggle USD */}\r\n            <div className=\"flex flex-col gap-2\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium text-foreground\">\r\n                  {isEquipmentInUSD ? 'Equipos (USD se convierte a MXN)' : 'Equipos (MXN)'}\r\n                </label>\r\n                <label className=\"inline-flex items-center gap-2 text-sm text-foreground cursor-pointer select-none\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={isEquipmentInUSD}\r\n                    onChange={(e) => toggleUSD(e.target.checked)}\r\n                    className=\"h-4 w-4 accent-primary cursor-pointer\"\r\n                  />\r\n                  Precio en d√≥lares\r\n                </label>\r\n              </div>\r\n\r\n              {/* Campo Equipos */}\r\n              <input\r\n                type=\"text\"\r\n                inputMode=\"decimal\"\r\n                placeholder={isEquipmentInUSD ? '0.00 USD' : '0.00 MXN'}\r\n                value={isEquipmentInUSD ? uiEquipmentUSD : formatWithCommas(b?.equipos)}\r\n                onChange={(e) => (isEquipmentInUSD ? undefined : handleP('equipos', e?.target?.value))}\r\n                readOnly={isEquipmentInUSD}\r\n                className={`w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent ${isEquipmentInUSD ? 'bg-muted cursor-not-allowed' : ''}`}\r\n              />\r\n\r\n              {isEquipmentInUSD && (\r\n                <div className=\"flex items-center gap-3 flex-wrap\">\r\n                  <div className=\"flex-1 min-w-[220px]\">\r\n                    <Input\r\n                      label=\"Tipo de cambio (MXN / USD)\"\r\n                      type=\"text\"\r\n                      inputMode=\"decimal\"\r\n                      value={formatWithCommas(exchangeRate, 4)}\r\n                      onChange={() => {}}\r\n                      readOnly\r\n                      disabled\r\n                    />\r\n                  </div>\r\n\r\n                  <Button\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    onClick={fetchUsdMxnRate}\r\n                    loading={loadingFx}\r\n                    iconName=\"RefreshCcw\"\r\n                    iconPosition=\"left\"\r\n                  >\r\n                    {loadingFx ? 'Actualizando‚Ä¶' : 'Actualizar tipo de cambio'}\r\n                  </Button>\r\n\r\n                  <div className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                    Guardado en MXN:{' '}\r\n                    <span className=\"font-semibold\">${formatWithCommas(b?.equipos, 2)}</span>\r\n                  </div>\r\n\r\n                  {fxError && <div className=\"text-xs text-destructive\">{fxError}</div>}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <Input label=\"Materiales (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.materiales)} onChange={(e) => handleP('materiales', e?.target?.value)} />\r\n\r\n            <Input label=\"Transporte (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.transporte)} onChange={(e) => handleP('transporte', e?.target?.value)} />\r\n\r\n            <Input label=\"Otros Gastos (MXN)\" type=\"text\" inputMode=\"decimal\" placeholder=\"0.00\"\r\n              value={formatWithCommas(b?.otros)} onChange={(e) => handleP('otros', e?.target?.value)} />\r\n\r\n            {/* Total */}\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"bg-muted p-4 rounded-lg\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-sm font-medium text-foreground\">Total del Presupuesto (MXN):</span>\r\n                  <span className=\"text-lg font-semibold text-primary\">\r\n                    ${formatWithCommas(totalMXN, 2)} MXN\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Cronograma (read-only) */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Cronograma</h3>\r\n            </div>\r\n\r\n            <Input label=\"Fecha de Inicio (solo lectura)\" type=\"date\" value={asStr(formData?.cronograma?.fechaInicio, '')} onChange={() => {}} disabled />\r\n            <Input label=\"Fecha de Finalizaci√≥n (solo lectura)\" type=\"date\" value={asStr(formData?.cronograma?.fechaFin, '')} onChange={() => {}} disabled />\r\n\r\n            {/* Asignaci√≥n de Personal */}\r\n            <div className=\"md:col-span-2 mt-6\">\r\n              <h3 className=\"text-lg font-medium text-foreground mb-4\">Asignaci√≥n de Personal</h3>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Select\r\n                label=\"Personal Asignado\"\r\n                options={personnelOptions}\r\n                value={asArr(formData?.personalAsignado).map(String)}\r\n                onChange={(value) => handle('personalAsignado', asArr(value).map(String))}\r\n                multiple\r\n                searchable\r\n                description=\"Seleccione el personal que trabajar√° en este proyecto\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Acciones */}\r\n          <div className=\"flex justify-end gap-3 mt-8 pt-6 border-t border-border\">\r\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>Cancelar</Button>\r\n            <Button type=\"submit\" loading={isSubmitting} iconName=\"Save\" iconPosition=\"left\">\r\n              {isSubmitting ? 'Guardando...' : 'Guardar Cambios'}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditProjectModal;\r\n","// src/hooks/useAbono.js\r\nimport { useState, useCallback, useRef } from 'react';\r\nimport { useNotifications } from '../context/NotificationContext';\r\nimport abonoService from '../services/abonoService';\r\n\r\n// üß© Helper: convierte fecha ISO a dd/mm/yyyy\r\nconst toDDMMYYYY = (isoDate) => {\r\n  if (!isoDate) return '';\r\n  const d = new Date(isoDate);\r\n  const dd = String(d.getUTCDate()).padStart(2, '0');\r\n  const mm = String(d.getUTCMonth() + 1).padStart(2, '0');\r\n  const yyyy = d.getUTCFullYear();\r\n  return `${dd}/${mm}/${yyyy}`;\r\n};\r\n\r\nconst useAbono = () => {\r\n  const { showOperationSuccess, showHttpError } = useNotifications();\r\n\r\n  const [abonos, setAbonos] = useState([]);\r\n  const [abonoSeleccionado, setAbonoSeleccionado] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  // Refs para cache y concurrencia\r\n  const loadingRef = useRef(false);\r\n  const hasLoadedRef = useRef(false);\r\n  const cacheParamsRef = useRef(null);\r\n  const abonosRef = useRef([]);\r\n  const createLock = useRef(false); // evita crear duplicados\r\n\r\n  /**\r\n   * Obtiene lista de abonos (con cache)\r\n   */\r\n  const getAbonos = useCallback(async (params = {}, force = false) => {\r\n    const sameParams = JSON.stringify(params) === JSON.stringify(cacheParamsRef.current);\r\n\r\n    if (!force && hasLoadedRef.current && sameParams && !loadingRef.current) {\r\n      return abonosRef.current;\r\n    }\r\n    if (loadingRef.current) return abonosRef.current;\r\n\r\n    loadingRef.current = true;\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await abonoService.getAbonos(params);\r\n      const data = Array.isArray(response) ? response : response?.data || [];\r\n      setAbonos(data);\r\n      abonosRef.current = data;\r\n      hasLoadedRef.current = true;\r\n      cacheParamsRef.current = params;\r\n      return data;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al obtener los abonos');\r\n      setAbonos([]);\r\n      return [];\r\n    } finally {\r\n      loadingRef.current = false;\r\n      setLoading(false);\r\n    }\r\n  }, [showHttpError]);\r\n\r\n  /**\r\n   * Obtiene un abono por ID\r\n   */\r\n  const getAbonoById = useCallback(async (id) => {\r\n    if (!id) return null;\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await abonoService.getAbonoById(id);\r\n      const data = response?.data || response;\r\n      setAbonoSeleccionado(data);\r\n      return data;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al obtener el abono');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showHttpError]);\r\n\r\n  /**\r\n   * Obtiene abonos por proyecto\r\n   */\r\n  const getAbonosByProyecto = useCallback(async (proyectoId, params = {}) => {\r\n    if (!proyectoId) return { items: [], total: 0 };\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await abonoService.getAbonosByProyecto(proyectoId, params);\r\n      // La API devuelve { success, data: { total, items }, message }\r\n      if (response?.success && response?.data) {\r\n        return {\r\n          items: Array.isArray(response.data.items) ? response.data.items : [],\r\n          total: Number(response.data.total) || 0\r\n        };\r\n      }\r\n      // Fallback para respuestas antiguas\r\n      if (Array.isArray(response)) {\r\n        return { items: response, total: response.length };\r\n      }\r\n      if (response?.data && Array.isArray(response.data)) {\r\n        return { items: response.data, total: response.data.length };\r\n      }\r\n      return { items: [], total: 0 };\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al obtener los abonos del proyecto');\r\n      return { items: [], total: 0 };\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showHttpError]);\r\n\r\n  /**\r\n   * Crea un abono (evita duplicados)\r\n   */\r\n  const createAbono = useCallback(async (payload) => {\r\n    if (createLock.current) return null; // üö´ evita peticiones duplicadas\r\n    createLock.current = true;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      // Sanitiza y formatea el payload\r\n      // La fecha debe venir en formato ISO UTC desde el modal\r\n      let fechaISO = payload.fecha;\r\n      if (!fechaISO) {\r\n        fechaISO = new Date().toISOString();\r\n      } else if (typeof fechaISO === 'string' && !fechaISO.includes('T')) {\r\n        // Si viene en formato dd/mm/yyyy, convertir a ISO UTC\r\n        const [dia, mes, a√±o] = fechaISO.split('/');\r\n        if (dia && mes && a√±o) {\r\n          const fecha = new Date(`${a√±o}-${mes}-${dia}T00:00:00.000Z`);\r\n          fechaISO = fecha.toISOString();\r\n        }\r\n      }\r\n\r\n      const cleanPayload = {\r\n        idProyecto: payload.idProyecto?.trim(),\r\n        montoAbono: Number(payload.montoAbono),\r\n        fecha: fechaISO,\r\n        metodoPago: payload.metodoPago || 'Otro',\r\n        descripcion: payload.descripcion?.trim() || 'Abono registrado',\r\n        descripcionMetodo: payload.descripcionMetodo || '',\r\n        notas: payload.notas || '',\r\n      };\r\n\r\n      // Incluir referenciaPago solo si tiene valor\r\n      if (payload.referenciaPago?.trim()) {\r\n        cleanPayload.referenciaPago = payload.referenciaPago.trim();\r\n      }\r\n\r\n      const response = await abonoService.createAbono(cleanPayload);\r\n      const created = response?.data || response;\r\n\r\n      if (created) {\r\n        setAbonos((prev) => {\r\n          const next = [...prev, created];\r\n          abonosRef.current = next;\r\n          return next;\r\n        });\r\n      }\r\n\r\n      showOperationSuccess('üí∞ Abono creado exitosamente');\r\n      setSuccess(true);\r\n      return created;\r\n    } catch (err) {\r\n      console.error('‚ùå Error creando abono:', err);\r\n      setError(err);\r\n      showHttpError(err?.response?.data?.message || 'Error al crear el abono');\r\n      return null;\r\n    } finally {\r\n      createLock.current = false;\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  /**\r\n   * Edita un abono\r\n   */\r\n  const editAbono = useCallback(async (id, payload) => {\r\n    if (!id) return null;\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      // Sanitiza y formatea el payload\r\n      // La fecha debe venir en formato ISO UTC desde el modal\r\n      let fechaISO = payload.fecha;\r\n      if (!fechaISO) {\r\n        fechaISO = new Date().toISOString();\r\n      } else if (typeof fechaISO === 'string' && !fechaISO.includes('T')) {\r\n        // Si viene en formato dd/mm/yyyy, convertir a ISO UTC\r\n        const [dia, mes, a√±o] = fechaISO.split('/');\r\n        if (dia && mes && a√±o) {\r\n          const fecha = new Date(`${a√±o}-${mes}-${dia}T00:00:00.000Z`);\r\n          fechaISO = fecha.toISOString();\r\n        }\r\n      }\r\n\r\n      const cleanPayload = {\r\n        idProyecto: payload.idProyecto?.trim(),\r\n        montoAbono: Number(payload.montoAbono),\r\n        fecha: fechaISO,\r\n        metodoPago: payload.metodoPago || 'Otro',\r\n        descripcion: payload.descripcion?.trim() || 'Abono registrado',\r\n        descripcionMetodo: payload.descripcionMetodo || '',\r\n        notas: payload.notas || '',\r\n      };\r\n\r\n      // Incluir referenciaPago solo si tiene valor\r\n      if (payload.referenciaPago?.trim()) {\r\n        cleanPayload.referenciaPago = payload.referenciaPago.trim();\r\n      }\r\n\r\n      const response = await abonoService.updateAbono(id, cleanPayload);\r\n      const updated = response?.data || cleanPayload;\r\n\r\n      setAbonos((prev) => {\r\n        const next = prev.map((a) =>\r\n          (a.id === id || a._id === id) ? { ...a, ...updated } : a\r\n        );\r\n        abonosRef.current = next;\r\n        return next;\r\n      });\r\n\r\n      if (abonoSeleccionado && (abonoSeleccionado.id === id || abonoSeleccionado._id === id)) {\r\n        setAbonoSeleccionado((prev) => ({ ...prev, ...updated }));\r\n      }\r\n\r\n      showOperationSuccess('Abono actualizado');\r\n      setSuccess(true);\r\n      return updated;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al actualizar el abono');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [abonoSeleccionado, showOperationSuccess, showHttpError]);\r\n\r\n  /**\r\n   * Elimina un abono\r\n   */\r\n  const deleteAbono = useCallback(async (id) => {\r\n    if (!id) return null;\r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n    try {\r\n      await abonoService.deleteAbono(id);\r\n      setAbonos((prev) => {\r\n        const next = prev.filter((a) => (a.id || a._id) !== id);\r\n        abonosRef.current = next;\r\n        return next;\r\n      });\r\n      if (abonoSeleccionado && (abonoSeleccionado.id === id || abonoSeleccionado._id === id)) {\r\n        setAbonoSeleccionado(null);\r\n      }\r\n      showOperationSuccess('Abono eliminado');\r\n      setSuccess(true);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err);\r\n      showHttpError('Error al eliminar el abono');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [abonoSeleccionado, showOperationSuccess, showHttpError]);\r\n\r\n  /**\r\n   * Aprueba o rechaza\r\n   */\r\n  const aprobarAbono = useCallback(async (id) => {\r\n    if (!id) return null;\r\n    setLoading(true);\r\n    try {\r\n      const response = await abonoService.aprobarAbono(id);\r\n      const updated = response?.data || { estado: 'aprobado' };\r\n\r\n      setAbonos((prev) => prev.map((a) => (a.id === id ? { ...a, ...updated } : a)));\r\n      showOperationSuccess('Abono aprobado');\r\n      return updated;\r\n    } catch (err) {\r\n      showHttpError('Error al aprobar el abono');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  const rechazarAbono = useCallback(async (id, motivo = '') => {\r\n    if (!id) return null;\r\n    setLoading(true);\r\n    try {\r\n      const response = await abonoService.rechazarAbono(id, motivo);\r\n      const updated = response?.data || { estado: 'rechazado', motivoRechazo: motivo };\r\n      setAbonos((prev) => prev.map((a) => (a.id === id ? { ...a, ...updated } : a)));\r\n      showOperationSuccess('Abono rechazado');\r\n      return updated;\r\n    } catch (err) {\r\n      showHttpError('Error al rechazar el abono');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [showOperationSuccess, showHttpError]);\r\n\r\n  return {\r\n    abonos,\r\n    abonoSeleccionado,\r\n    loading,\r\n    error,\r\n    success,\r\n    getAbonos,\r\n    getAbonoById,\r\n    getAbonosByProyecto,\r\n    createAbono,\r\n    editAbono,\r\n    deleteAbono,\r\n    aprobarAbono,\r\n    rechazarAbono,\r\n    setAbonos,\r\n    setAbonoSeleccionado,\r\n  };\r\n};\r\n\r\nexport default useAbono;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport useAbono from '../../../hooks/useAbono';\r\nimport useProyecto from '../../../hooks/useProyect';\r\n\r\n// Formatear monto en moneda MXN\r\nconst formatearMoneda = (cantidad) => {\r\n  if (cantidad == null || isNaN(cantidad)) return '‚Äî';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(Number(cantidad) || 0);\r\n};\r\n\r\n// Limitar un valor dentro de un rango\r\nconst limitarRango = (valor, minimo, maximo) => Math.min(Math.max(valor, minimo), maximo);\r\n\r\n// Convierte fecha a formato dd/mm/yyyy para mostrar en UI\r\nconst formatearFechaParaApi = (fechaLocalStr) => {\r\n  if (!fechaLocalStr) return '';\r\n  const d = new Date(fechaLocalStr);\r\n  const rellenar = (n) => String(n).padStart(2, '0');\r\n  return `${rellenar(d.getDate())}/${rellenar(d.getMonth() + 1)}/${d.getFullYear()}`;\r\n};\r\n\r\n// Convierte fecha del input (YYYY-MM-DD) a formato ISO UTC\r\nconst formatearFechaISOUTC = (fechaLocalStr) => {\r\n  if (!fechaLocalStr) return '';\r\n  // La fecha viene en formato YYYY-MM-DD del input type=\"date\"\r\n  // Crear un objeto Date en UTC a medianoche\r\n  const fecha = new Date(fechaLocalStr + 'T00:00:00.000Z');\r\n  // Devolver en formato ISO UTC\r\n  return fecha.toISOString();\r\n};\r\n\r\n// Formatea un n√∫mero con separadores de miles\r\nconst formatearNumeroConSeparadores = (valor) => {\r\n  if (!valor && valor !== 0) return '';\r\n  // Remover cualquier formato previo y obtener solo n√∫meros y punto decimal\r\n  const numeroLimpio = String(valor).replace(/[^\\d.]/g, '');\r\n  if (!numeroLimpio) return '';\r\n  \r\n  // Separar parte entera y decimal\r\n  const partes = numeroLimpio.split('.');\r\n  const parteEntera = partes[0] || '0';\r\n  const parteDecimal = partes[1] ? `.${partes[1]}` : '';\r\n  \r\n  // Formatear parte entera con separadores de miles\r\n  const formateado = parteEntera.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n  \r\n  return formateado + parteDecimal;\r\n};\r\n\r\n// Limpia el formato y devuelve el valor num√©rico\r\nconst limpiarNumeroFormateado = (valor) => {\r\n  if (!valor) return '';\r\n  // Remover comas y espacios, mantener solo n√∫meros y punto decimal\r\n  return String(valor).replace(/[^\\d.]/g, '');\r\n};\r\n\r\nconst ModalRegistroAbono = ({ isOpen, onClose, project, currentPaid = 0, onSave }) => {\r\n  const presupuestoProyecto = Number(project?.budget) || 0;\r\n  const saldoInicial = Math.max(presupuestoProyecto - Number(currentPaid || 0), 0);\r\n\r\n  // Hook de abonos\r\n  const { createAbono, loading } = useAbono();\r\n  \r\n  // Hook para obtener informaci√≥n del proyecto\r\n  const { getProyectoById } = useProyecto();\r\n\r\n  // Campos requeridos\r\n  const [idProyecto, setIdProyecto] = useState('');\r\n  const [fechaLocal, setFechaLocal] = useState('');\r\n  const [monto, setMonto] = useState(''); // Valor num√©rico limpio para c√°lculos\r\n  const [montoFormateado, setMontoFormateado] = useState(''); // Valor formateado para mostrar\r\n  const [metodoPago, setMetodoPago] = useState('Transferencia');\r\n  const [descripcion, setDescripcion] = useState('');\r\n  const [descripcionMetodo, setDescripcionMetodo] = useState('');\r\n  const [referenciaPago, setReferenciaPago] = useState('');\r\n  const [notas, setNotas] = useState('');\r\n\r\n  // Informaci√≥n del proyecto obtenida de la API\r\n  const [infoProyecto, setInfoProyecto] = useState({ id: '', nombre: '', presupuesto: 0, clienteId: '' });\r\n  const [totalAbonado, setTotalAbonado] = useState(0);\r\n\r\n  // Variables auxiliares\r\n  const [saldo, setSaldo] = useState(saldoInicial);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      const id = project?.id || project?._id || project?.idProyecto || '';\r\n      \r\n      // Establecer el ID del proyecto\r\n      setIdProyecto(id);\r\n\r\n      // Obtener informaci√≥n del proyecto de la API si tenemos un ID\r\n      if (id) {\r\n        getProyectoById(id)\r\n          .then((respuesta) => {\r\n            const proyectoData = respuesta?.data || respuesta;\r\n            if (proyectoData) {\r\n            const presupuestoTotal = proyectoData.presupuesto?.total || proyectoData.totalPresupuesto || 0;\r\n              const totalAbonadoData = proyectoData.resumenFinanciero?.totalAbonado || 0;\r\n              \r\n              setInfoProyecto({\r\n                id: proyectoData.id || proyectoData._id || id,\r\n                nombre: proyectoData.nombre || proyectoData.name || 'Sin nombre',\r\n                presupuesto: Number(presupuestoTotal),\r\n                clienteId: proyectoData.cliente?.id || proyectoData.clienteId || proyectoData.cliente_id || ''\r\n              });\r\n              \r\n              // Establecer el total abonado desde la API\r\n              setTotalAbonado(totalAbonadoData);\r\n              \r\n              // Actualizar saldo basado en presupuesto obtenido de la API\r\n              const nuevoSaldo = Math.max(presupuestoTotal - totalAbonadoData, 0);\r\n              setSaldo(nuevoSaldo);\r\n            } else {\r\n              // Fallback si no se obtienen datos\r\n              setInfoProyecto({\r\n                id,\r\n                nombre: project?.name || project?.nombreProyecto || 'Sin nombre',\r\n                presupuesto: presupuestoProyecto,\r\n                clienteId: ''\r\n              });\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.warn('Error al obtener proyecto:', err);\r\n            // Usar datos del prop como fallback\r\n            setInfoProyecto({\r\n              id,\r\n              nombre: project?.name || project?.nombreProyecto || 'Sin nombre',\r\n              presupuesto: presupuestoProyecto,\r\n              clienteId: ''\r\n            });\r\n          });\r\n      } else {\r\n        setInfoProyecto({ id: '', nombre: 'Sin nombre', presupuesto: 0, clienteId: '' });\r\n      }\r\n\r\n      // Fecha actual por defecto\r\n      const hoy = new Date();\r\n      const yyyy = hoy.getFullYear();\r\n      const mm = String(hoy.getMonth() + 1).padStart(2, '0');\r\n      const dd = String(hoy.getDate()).padStart(2, '0');\r\n      setFechaLocal(`${yyyy}-${mm}-${dd}`);\r\n\r\n      setMonto('0');\r\n      setMontoFormateado('0');\r\n      setMetodoPago('Transferencia');\r\n      setDescripcion('');\r\n      setDescripcionMetodo('');\r\n      setReferenciaPago('');\r\n      setNotas('');\r\n\r\n      setSaldo(Math.max(presupuestoProyecto - Number(currentPaid || 0), 0));\r\n      setError('');\r\n    }\r\n  }, [isOpen, project, presupuestoProyecto, currentPaid, getProyectoById]);\r\n\r\n  // Vista previa del total pagado\r\n  const totalPagadoPrevio = useMemo(() => {\r\n    const m = Number(monto) || 0;\r\n    return Number(totalAbonado || 0) + (m > 0 ? m : 0);\r\n  }, [monto, totalAbonado]);\r\n\r\n  // Progreso del pago\r\n  const progreso = useMemo(() => {\r\n    if (!(infoProyecto?.presupuesto > 0)) return 0;\r\n    const p = (Number(totalPagadoPrevio) / infoProyecto.presupuesto) * 100;\r\n    return Math.round(limitarRango(p, 0, 100));\r\n  }, [totalPagadoPrevio, infoProyecto?.presupuesto]);\r\n\r\n  const manejarCambioMonto = (valor) => {\r\n    // Limpiar el valor ingresado (remover comas y caracteres no num√©ricos excepto punto decimal)\r\n    const valorLimpio = limpiarNumeroFormateado(valor);\r\n    \r\n    // Si el campo est√° vac√≠o, usar \"0\"\r\n    let valorFinal = valorLimpio === '' ? '0' : valorLimpio;\r\n    \r\n    // Si el valor actual es \"0\" y el usuario est√° escribiendo algo nuevo\r\n    if (monto === '0' && valorLimpio !== '' && valorLimpio !== '0') {\r\n      // Si el usuario escribe un punto decimal, permitir \"0.\"\r\n      if (valorLimpio === '.' || valorLimpio === '0.') {\r\n        valorFinal = '0.';\r\n      }\r\n      // Si el usuario escribe un d√≠gito, reemplazar el \"0\" con ese d√≠gito\r\n      // Ejemplo: \"0\" + \"1\" = \"1\", \"0\" + \"12\" = \"12\"\r\n      else if (/^\\d+\\.?\\d*$/.test(valorLimpio)) {\r\n        // Si empieza con \"0\" seguido de d√≠gitos (no decimal), quitar el \"0\" inicial\r\n        // Ejemplo: \"05\" -> \"5\", \"012\" -> \"12\"\r\n        if (valorLimpio.match(/^0+[1-9]/)) {\r\n          valorFinal = valorLimpio.replace(/^0+/, '');\r\n        } else {\r\n          valorFinal = valorLimpio;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Permitir solo un punto decimal: si hay m√∫ltiples, mantener solo el primero\r\n    const partes = valorFinal.split('.');\r\n    if (partes.length > 2) {\r\n      valorFinal = partes[0] + '.' + partes.slice(1).join('');\r\n    }\r\n    \r\n    // Actualizar el valor num√©rico limpio para c√°lculos\r\n    setMonto(valorFinal);\r\n    \r\n    // Actualizar el valor formateado para mostrar\r\n    setMontoFormateado(formatearNumeroConSeparadores(valorFinal));\r\n    \r\n    // Calcular saldo si el valor es num√©rico v√°lido\r\n    const num = Number(valorFinal);\r\n    if (!isNaN(num)) {\r\n      const totalPagadoAcumulado = Number(totalAbonado || 0) + Math.max(num, 0);\r\n      const importeTotal = Number(infoProyecto.presupuesto || 0);\r\n      const nuevoSaldo = Math.max(importeTotal - totalPagadoAcumulado, 0);\r\n      setSaldo(nuevoSaldo);\r\n      \r\n      // Limpiar error si el monto es v√°lido\r\n      if (totalPagadoAcumulado <= importeTotal) {\r\n        setError('');\r\n      }\r\n    }\r\n  };\r\n\r\n  const manejarEnvio = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    const montoNum = Number(monto);\r\n\r\n    if (!idProyecto?.trim()) {\r\n      setError('El ID del proyecto es obligatorio.');\r\n      return;\r\n    }\r\n    if (!fechaLocal) {\r\n      setError('La fecha del abono es obligatoria.');\r\n      return;\r\n    }\r\n    if (!(montoNum > 0)) {\r\n      setError('El monto abonado debe ser mayor a 0.');\r\n      return;\r\n    }\r\n    if (!descripcion?.trim()) {\r\n      setError('La descripci√≥n es obligatoria.');\r\n      return;\r\n    }\r\n    if (metodoPago === 'Otro' && !descripcionMetodo?.trim()) {\r\n      setError('La descripci√≥n del m√©todo de pago es obligatoria cuando se selecciona \"Otro\".');\r\n      return;\r\n    }\r\n    if (['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) && !referenciaPago?.trim()) {\r\n      setError('La referencia de pago es obligatoria para este m√©todo de pago.');\r\n      return;\r\n    }\r\n    if (!['Efectivo', 'Transferencia', 'Tarjeta', 'Cheque', 'Otro'].includes(metodoPago)) {\r\n      setError('M√©todo de pago no v√°lido.');\r\n      return;\r\n    }\r\n    // Validar que el total pagado acumulado no exceda el importe total del proyecto\r\n    const totalPagadoAcumulado = Number(totalAbonado || 0) + montoNum;\r\n    const importeTotal = Number(infoProyecto.presupuesto || 0);\r\n    \r\n    if (totalPagadoAcumulado > importeTotal) {\r\n      const excedente = totalPagadoAcumulado - importeTotal;\r\n      setError(\r\n        `No se puede registrar el abono. El total pagado acumulado (${formatearMoneda(totalPagadoAcumulado)}) excede el importe total del proyecto (${formatearMoneda(importeTotal)}). Excedente: ${formatearMoneda(excedente)}.`\r\n      );\r\n      return;\r\n    }\r\n\r\n    const datos = {\r\n      idProyecto: idProyecto.trim(),\r\n      montoAbono: Number(monto),\r\n      fecha: formatearFechaISOUTC(fechaLocal),\r\n      metodoPago,\r\n      descripcion: descripcion.trim(),\r\n      descripcionMetodo: metodoPago === 'Otro' ? descripcionMetodo.trim() : undefined,\r\n      referenciaPago: ['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) ? referenciaPago.trim() : undefined,\r\n      notas: notas?.trim() || undefined\r\n    };\r\n\r\n    try {\r\n      const respuesta = await createAbono(datos);\r\n      const creado = respuesta?.data || respuesta;\r\n\r\n      if (creado) {\r\n        onSave?.(creado);\r\n        onClose?.();\r\n      }\r\n    } catch (err) {\r\n      if (err.response?.status === 409) {\r\n        setError('Ya existe un abono con estos datos.');\r\n      } else if (err.response?.status === 400) {\r\n        setError(err.response?.data?.message || 'Datos inv√°lidos. Por favor revise los campos.');\r\n      } else {\r\n        setError('Error al guardar el abono. Por favor intente nuevamente.');\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} />\r\n      <div className=\"relative bg-card border border-border rounded-lg shadow-xl w-1/3 mx-4 flex flex-col h-5/6\">\r\n        {/* Encabezado */}\r\n        <div className=\"p-4 border-b border-border flex items-center justify-between bg-card sticky top-0 z-10\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"CreditCard\" size={18} />\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Apartado de Abonos</h3>\r\n          </div>\r\n          <button\r\n            className=\"text-muted-foreground hover:text-foreground disabled:opacity-50\"\r\n            onClick={onClose}\r\n            title=\"Cerrar\"\r\n            disabled={loading}\r\n          >\r\n            <Icon name=\"X\" size={18} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Contenido */}\r\n        <div className=\"overflow-y-auto flex-1\">\r\n          <form onSubmit={manejarEnvio} className=\"p-4 space-y-6\">\r\n            {/* Resumen */}\r\n            <div className=\"bg-muted/40 rounded p-3 grid grid-cols-1 md:grid-cols-3 gap-2 text-sm\">\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Proyecto</span>\r\n                <span className=\"text-foreground font-medium block\">\r\n                  {infoProyecto?.nombre || '‚Äî'}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Importe total</span>\r\n                <span className=\"text-foreground font-medium block\">{formatearMoneda(infoProyecto?.presupuesto || presupuestoProyecto)}</span>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Total pagado</span>\r\n                <span className=\"text-foreground font-medium block\">{formatearMoneda(totalAbonado)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progreso */}\r\n            <div>\r\n              <div className=\"flex justify-between text-xs text-muted-foreground mb-1\">\r\n                <span>Progreso de pago</span>\r\n                <span>{isNaN(progreso) ? 0 : progreso}%</span>\r\n              </div>\r\n              <div className=\"w-full bg-muted rounded-full h-2\">\r\n                <div className=\"h-2 rounded-full bg-primary\" style={{ width: `${isNaN(progreso) ? 0 : progreso}%` }} />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Campos principales */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {/* Fecha */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Fecha del abono</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={fechaLocal}\r\n                  onChange={(e) => setFechaLocal(e.target.value)}\r\n                  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  required\r\n                  disabled={loading}\r\n                />\r\n                <p className=\"text-[11px] text-muted-foreground mt-1\">\r\n                  Formato: {fechaLocal ? formatearFechaParaApi(fechaLocal) : '‚Äî'}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Monto */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Monto abonado</label>\r\n                <input\r\n                  type=\"text\"\r\n                  inputMode=\"decimal\"\r\n                  placeholder=\"0.00\"\r\n                  value={montoFormateado}\r\n                  onChange={(e) => manejarCambioMonto(e.target.value)}\r\n                  className={`flex h-10 w-full rounded-md border px-3 py-2 text-sm bg-background ${\r\n                    Number(monto) > 0 && (Number(totalAbonado || 0) + Number(monto || 0)) > Number(infoProyecto.presupuesto || 0)\r\n                      ? 'border-red-500 focus:border-red-500 focus:ring-red-500'\r\n                      : 'border-input'\r\n                  }`}\r\n                  required\r\n                  disabled={loading}\r\n                />\r\n                {Number(monto) > 0 && (Number(totalAbonado || 0) + Number(monto || 0)) > Number(infoProyecto.presupuesto || 0) && (\r\n                  <p className=\"text-xs text-red-600 mt-1\">\r\n                    ‚ö†Ô∏è El monto excede el l√≠mite disponible. Saldo disponible: {formatearMoneda(saldo)}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Saldo */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-muted-foreground mb-2\">Saldo restante</label>\r\n                <div className=\"flex h-10 items-center px-3 py-2 text-sm font-medium text-foreground bg-muted/30 rounded-md border border-input/50\">\r\n                  {formatearMoneda(saldo)}\r\n                </div>\r\n              </div>\r\n\r\n              {/* M√©todo de pago */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">M√©todo de pago</label>\r\n                <select\r\n                  value={metodoPago}\r\n                  onChange={(e) => {\r\n                    setMetodoPago(e.target.value);\r\n                    if (e.target.value !== 'Otro') setDescripcionMetodo('');\r\n                    if (!['Transferencia', 'Tarjeta', 'Cheque'].includes(e.target.value)) setReferenciaPago('');\r\n                  }}\r\n                  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  disabled={loading}\r\n                >\r\n                  <option value=\"Efectivo\">Efectivo</option>\r\n                  <option value=\"Transferencia\">Transferencia</option>\r\n                  <option value=\"Tarjeta\">Tarjeta</option>\r\n                  <option value=\"Cheque\">Cheque</option>\r\n                  <option value=\"Otro\">Otro</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Referencia de pago (si es Transferencia, Tarjeta o Cheque) */}\r\n              {['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) && (\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Referencia de pago <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={referenciaPago}\r\n                    onChange={(e) => setReferenciaPago(e.target.value)}\r\n                    className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                    placeholder={\r\n                      metodoPago === 'Transferencia' \r\n                        ? 'N√∫mero de transferencia o CLABE'\r\n                        : metodoPago === 'Tarjeta'\r\n                        ? '√öltimos 4 d√≠gitos o n√∫mero de autorizaci√≥n'\r\n                        : 'N√∫mero de cheque'\r\n                    }\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Descripci√≥n m√©todo (si es Otro) */}\r\n              {metodoPago === 'Otro' && (\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Descripci√≥n del m√©todo de pago\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={descripcionMetodo}\r\n                    onChange={(e) => setDescripcionMetodo(e.target.value)}\r\n                    className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                    placeholder=\"Especifique el m√©todo de pago\"\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Descripci√≥n */}\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Descripci√≥n</label>\r\n                <textarea\r\n                  rows={2}\r\n                  value={descripcion}\r\n                  onChange={(e) => setDescripcion(e.target.value)}\r\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  placeholder=\"Pago inicial del proyecto\"\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n\r\n              {/* Notas */}\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Notas</label>\r\n                <textarea\r\n                  rows={2}\r\n                  value={notas}\r\n                  onChange={(e) => setNotas(e.target.value)}\r\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  placeholder=\"Pago realizado por el cliente\"\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {error && <div className=\"text-sm text-red-600\">{error}</div>}\r\n\r\n            <div className=\"flex items-center justify-end gap-2 pt-2\">\r\n              <Button variant=\"outline\" onClick={onClose} disabled={loading}>Cancelar</Button>\r\n              <Button type=\"submit\" iconName=\"Check\" iconPosition=\"left\" disabled={loading}>\r\n                {loading ? 'Guardando‚Ä¶' : 'Guardar'}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalRegistroAbono;\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport useAbono from '../../../hooks/useAbono';\r\nimport useProyecto from '../../../hooks/useProyect';\r\n\r\n// Formatear monto en moneda MXN\r\nconst formatearMoneda = (cantidad) => {\r\n  if (cantidad == null || isNaN(cantidad)) return '‚Äî';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(Number(cantidad) || 0);\r\n};\r\n\r\n// Limitar un valor dentro de un rango\r\nconst limitarRango = (valor, minimo, maximo) => Math.min(Math.max(valor, minimo), maximo);\r\n\r\n// Convierte fecha a formato dd/mm/yyyy para mostrar en UI\r\nconst formatearFechaParaApi = (fechaLocalStr) => {\r\n  if (!fechaLocalStr) return '';\r\n  const d = new Date(fechaLocalStr);\r\n  const rellenar = (n) => String(n).padStart(2, '0');\r\n  return `${rellenar(d.getDate())}/${rellenar(d.getMonth() + 1)}/${d.getFullYear()}`;\r\n};\r\n\r\n// Convierte fecha del input (YYYY-MM-DD) a formato ISO UTC\r\nconst formatearFechaISOUTC = (fechaLocalStr) => {\r\n  if (!fechaLocalStr) return '';\r\n  // La fecha viene en formato YYYY-MM-DD del input type=\"date\"\r\n  // Crear un objeto Date en UTC a medianoche\r\n  const fecha = new Date(fechaLocalStr + 'T00:00:00.000Z');\r\n  // Devolver en formato ISO UTC\r\n  return fecha.toISOString();\r\n};\r\n\r\n// Convierte fecha ISO o string a formato compatible con input date\r\nconst deFechaALocalInput = (fecha) => {\r\n  if (!fecha) return '';\r\n  let fechaObj;\r\n  if (typeof fecha === 'string') {\r\n    // Si viene en formato ISO\r\n    if (fecha.includes('T')) {\r\n      fechaObj = new Date(fecha);\r\n    } else if (fecha.includes('/')) {\r\n      // Si viene en formato dd/mm/yyyy\r\n      const [dia, mes, a√±o] = fecha.split('/');\r\n      fechaObj = new Date(Number(a√±o), Number(mes) - 1, Number(dia));\r\n    } else {\r\n      fechaObj = new Date(fecha);\r\n    }\r\n  } else {\r\n    fechaObj = fecha;\r\n  }\r\n  \r\n  if (isNaN(fechaObj.getTime())) return '';\r\n  const rellenar = (n) => String(n).padStart(2, '0');\r\n  return `${fechaObj.getFullYear()}-${rellenar(fechaObj.getMonth() + 1)}-${rellenar(fechaObj.getDate())}`;\r\n};\r\n\r\n// Formatea un n√∫mero con separadores de miles\r\nconst formatearNumeroConSeparadores = (valor) => {\r\n  if (!valor && valor !== 0) return '';\r\n  // Remover cualquier formato previo y obtener solo n√∫meros y punto decimal\r\n  const numeroLimpio = String(valor).replace(/[^\\d.]/g, '');\r\n  if (!numeroLimpio) return '';\r\n  \r\n  // Separar parte entera y decimal\r\n  const partes = numeroLimpio.split('.');\r\n  const parteEntera = partes[0] || '0';\r\n  const parteDecimal = partes[1] ? `.${partes[1]}` : '';\r\n  \r\n  // Formatear parte entera con separadores de miles\r\n  const formateado = parteEntera.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n  \r\n  return formateado + parteDecimal;\r\n};\r\n\r\n// Limpia el formato y devuelve el valor num√©rico\r\nconst limpiarNumeroFormateado = (valor) => {\r\n  if (!valor) return '';\r\n  // Remover comas y espacios, mantener solo n√∫meros y punto decimal\r\n  return String(valor).replace(/[^\\d.]/g, '');\r\n};\r\n\r\nconst EditAbonoModal = ({ isOpen, onClose, abono, project, onSave }) => {\r\n  const presupuestoProyecto = Number(project?.budget ?? project?.presupuesto?.total ?? project?.totalPresupuesto ?? 0);\r\n\r\n  // Hook de abonos\r\n  const { editAbono, loading } = useAbono();\r\n  \r\n  // Hook para obtener informaci√≥n del proyecto\r\n  const { getProyectoById } = useProyecto();\r\n\r\n  // Campos del formulario\r\n  const [idProyecto, setIdProyecto] = useState('');\r\n  const [fechaLocal, setFechaLocal] = useState('');\r\n  const [monto, setMonto] = useState(''); // Valor num√©rico limpio para c√°lculos\r\n  const [montoFormateado, setMontoFormateado] = useState(''); // Valor formateado para mostrar\r\n  const [metodoPago, setMetodoPago] = useState('Transferencia');\r\n  const [descripcion, setDescripcion] = useState('');\r\n  const [descripcionMetodo, setDescripcionMetodo] = useState('');\r\n  const [referenciaPago, setReferenciaPago] = useState('');\r\n  const [notas, setNotas] = useState('');\r\n\r\n  // Informaci√≥n del proyecto obtenida de la API\r\n  const [infoProyecto, setInfoProyecto] = useState({ id: '', nombre: '', presupuesto: 0, clienteId: '' });\r\n  const [totalAbonado, setTotalAbonado] = useState(0);\r\n  const [montoOriginal, setMontoOriginal] = useState(0);\r\n\r\n  // Variables auxiliares\r\n  const [saldo, setSaldo] = useState(0);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (isOpen && abono) {\r\n      const id = project?.id || project?._id || project?.idProyecto || abono?.idProyecto || '';\r\n      \r\n      // Establecer el ID del proyecto\r\n      setIdProyecto(id);\r\n\r\n      // Cargar datos del abono en el formulario\r\n      const montoAbono = Number(abono?.montoAbono ?? abono?.monto ?? 0);\r\n      const fechaAbono = abono?.fecha ?? abono?.createdAt ?? '';\r\n      const metodoPagoAbono = abono?.metodoPago ?? 'Transferencia';\r\n      const descripcionAbono = abono?.descripcion ?? '';\r\n      const descripcionMetodoAbono = abono?.descripcionMetodo ?? '';\r\n      const referenciaPagoAbono = abono?.referenciaPago ?? abono?.referencia ?? '';\r\n      const notasAbono = abono?.notas ?? '';\r\n\r\n      // Asegurar que el monto siempre tenga un valor (m√≠nimo 0)\r\n      const montoFinal = montoAbono > 0 ? montoAbono : 0;\r\n      setMonto(montoFinal.toString());\r\n      setMontoFormateado(formatearNumeroConSeparadores(montoFinal.toString()));\r\n      setMontoOriginal(montoAbono); // Guardar el valor original del abono para c√°lculos\r\n      setFechaLocal(deFechaALocalInput(fechaAbono));\r\n      setMetodoPago(metodoPagoAbono);\r\n      setDescripcion(descripcionAbono);\r\n      setDescripcionMetodo(descripcionMetodoAbono);\r\n      setReferenciaPago(referenciaPagoAbono);\r\n      setNotas(notasAbono);\r\n\r\n      // Obtener informaci√≥n del proyecto de la API si tenemos un ID\r\n      if (id) {\r\n        getProyectoById(id)\r\n          .then((respuesta) => {\r\n            const proyectoData = respuesta?.data || respuesta;\r\n            if (proyectoData) {\r\n              const presupuestoTotal = proyectoData.presupuesto?.total || proyectoData.totalPresupuesto || 0;\r\n              const totalAbonadoData = proyectoData.resumenFinanciero?.totalAbonado || 0;\r\n              \r\n              setInfoProyecto({\r\n                id: proyectoData.id || proyectoData._id || id,\r\n                nombre: proyectoData.nombre || proyectoData.name || 'Sin nombre',\r\n                presupuesto: Number(presupuestoTotal),\r\n                clienteId: proyectoData.cliente?.id || proyectoData.clienteId || proyectoData.cliente_id || ''\r\n              });\r\n              \r\n              // Establecer el total abonado desde la API\r\n              setTotalAbonado(totalAbonadoData);\r\n              \r\n              // Calcular saldo: presupuesto - (total abonado - monto original + nuevo monto)\r\n              const nuevoSaldo = Math.max(presupuestoTotal - (totalAbonadoData - montoAbono + montoAbono), 0);\r\n              setSaldo(nuevoSaldo);\r\n            } else {\r\n              // Fallback si no se obtienen datos\r\n              setInfoProyecto({\r\n                id,\r\n                nombre: project?.name || project?.nombreProyecto || 'Sin nombre',\r\n                presupuesto: presupuestoProyecto,\r\n                clienteId: ''\r\n              });\r\n              setSaldo(Math.max(presupuestoProyecto - montoAbono, 0));\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.warn('Error al obtener proyecto:', err);\r\n            // Usar datos del prop como fallback\r\n            setInfoProyecto({\r\n              id,\r\n              nombre: project?.name || project?.nombreProyecto || 'Sin nombre',\r\n              presupuesto: presupuestoProyecto,\r\n              clienteId: ''\r\n            });\r\n            setSaldo(Math.max(presupuestoProyecto - montoAbono, 0));\r\n          });\r\n      } else {\r\n        setInfoProyecto({ id: '', nombre: 'Sin nombre', presupuesto: 0, clienteId: '' });\r\n      }\r\n\r\n      setError('');\r\n    }\r\n  }, [isOpen, abono, project, presupuestoProyecto, getProyectoById]);\r\n\r\n  // Vista previa del total pagado (considerando el cambio de monto)\r\n  const totalPagadoPrevio = useMemo(() => {\r\n    const m = Number(monto) || 0;\r\n    const diferencia = m - montoOriginal;\r\n    return Number(totalAbonado || 0) + diferencia;\r\n  }, [monto, totalAbonado, montoOriginal]);\r\n\r\n  // Progreso del pago\r\n  const progreso = useMemo(() => {\r\n    if (!(infoProyecto?.presupuesto > 0)) return 0;\r\n    const p = (Number(totalPagadoPrevio) / infoProyecto.presupuesto) * 100;\r\n    return Math.round(limitarRango(p, 0, 100));\r\n  }, [totalPagadoPrevio, infoProyecto?.presupuesto]);\r\n\r\n  const manejarCambioMonto = (valor) => {\r\n    // Limpiar el valor ingresado (remover comas y caracteres no num√©ricos excepto punto decimal)\r\n    const valorLimpio = limpiarNumeroFormateado(valor);\r\n    \r\n    // Si el campo est√° vac√≠o, usar \"0\"\r\n    let valorFinal = valorLimpio === '' ? '0' : valorLimpio;\r\n    \r\n    // Si el valor actual es \"0\" y el usuario est√° escribiendo algo nuevo\r\n    if (monto === '0' && valorLimpio !== '' && valorLimpio !== '0') {\r\n      // Si el usuario escribe un punto decimal, permitir \"0.\"\r\n      if (valorLimpio === '.' || valorLimpio === '0.') {\r\n        valorFinal = '0.';\r\n      }\r\n      // Si el usuario escribe un d√≠gito, reemplazar el \"0\" con ese d√≠gito\r\n      // Ejemplo: \"0\" + \"1\" = \"1\", \"0\" + \"12\" = \"12\"\r\n      else if (/^\\d+\\.?\\d*$/.test(valorLimpio)) {\r\n        // Si empieza con \"0\" seguido de d√≠gitos (no decimal), quitar el \"0\" inicial\r\n        // Ejemplo: \"05\" -> \"5\", \"012\" -> \"12\"\r\n        if (valorLimpio.match(/^0+[1-9]/)) {\r\n          valorFinal = valorLimpio.replace(/^0+/, '');\r\n        } else {\r\n          valorFinal = valorLimpio;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Permitir solo un punto decimal: si hay m√∫ltiples, mantener solo el primero\r\n    const partes = valorFinal.split('.');\r\n    if (partes.length > 2) {\r\n      valorFinal = partes[0] + '.' + partes.slice(1).join('');\r\n    }\r\n    \r\n    // Actualizar el valor num√©rico limpio para c√°lculos\r\n    setMonto(valorFinal);\r\n    \r\n    // Actualizar el valor formateado para mostrar\r\n    setMontoFormateado(formatearNumeroConSeparadores(valorFinal));\r\n    \r\n    // Calcular saldo si el valor es num√©rico v√°lido\r\n    const num = Number(valorFinal);\r\n    if (!isNaN(num)) {\r\n      const diferencia = num - montoOriginal;\r\n      const totalPagadoAcumulado = Number(totalAbonado || 0) + diferencia;\r\n      const importeTotal = Number(infoProyecto.presupuesto || 0);\r\n      const nuevoSaldo = Math.max(importeTotal - totalPagadoAcumulado, 0);\r\n      setSaldo(nuevoSaldo);\r\n      \r\n      // Limpiar error si el monto es v√°lido\r\n      if (totalPagadoAcumulado <= importeTotal) {\r\n        setError('');\r\n      }\r\n    }\r\n  };\r\n\r\n  const manejarEnvio = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    const montoNum = Number(monto);\r\n\r\n    if (!abono?.id && !abono?._id) {\r\n      setError('El ID del abono es obligatorio.');\r\n      return;\r\n    }\r\n    if (!idProyecto?.trim()) {\r\n      setError('El ID del proyecto es obligatorio.');\r\n      return;\r\n    }\r\n    if (!fechaLocal) {\r\n      setError('La fecha del abono es obligatoria.');\r\n      return;\r\n    }\r\n    if (!(montoNum > 0)) {\r\n      setError('El monto abonado debe ser mayor a 0.');\r\n      return;\r\n    }\r\n    if (!descripcion?.trim()) {\r\n      setError('La descripci√≥n es obligatoria.');\r\n      return;\r\n    }\r\n    if (metodoPago === 'Otro' && !descripcionMetodo?.trim()) {\r\n      setError('La descripci√≥n del m√©todo de pago es obligatoria cuando se selecciona \"Otro\".');\r\n      return;\r\n    }\r\n    if (['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) && !referenciaPago?.trim()) {\r\n      setError('La referencia de pago es obligatoria para este m√©todo de pago.');\r\n      return;\r\n    }\r\n    if (!['Efectivo', 'Transferencia', 'Tarjeta', 'Cheque', 'Otro'].includes(metodoPago)) {\r\n      setError('M√©todo de pago no v√°lido.');\r\n      return;\r\n    }\r\n    // Validar que el total pagado acumulado no exceda el importe total del proyecto\r\n    const importeTotal = Number(infoProyecto.presupuesto || 0);\r\n    \r\n    if (totalPagadoPrevio > importeTotal) {\r\n      const excedente = totalPagadoPrevio - importeTotal;\r\n      setError(\r\n        `No se puede actualizar el abono. El total pagado acumulado (${formatearMoneda(totalPagadoPrevio)}) excede el importe total del proyecto (${formatearMoneda(importeTotal)}). Excedente: ${formatearMoneda(excedente)}.`\r\n      );\r\n      return;\r\n    }\r\n\r\n    const datos = {\r\n      idProyecto: idProyecto.trim(),\r\n      montoAbono: Number(monto),\r\n      fecha: formatearFechaISOUTC(fechaLocal),\r\n      metodoPago,\r\n      descripcion: descripcion.trim(),\r\n      descripcionMetodo: metodoPago === 'Otro' ? descripcionMetodo.trim() : undefined,\r\n      referenciaPago: ['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) ? referenciaPago.trim() : undefined,\r\n      notas: notas?.trim() || undefined\r\n    };\r\n\r\n    try {\r\n      const abonoId = abono?.id ?? abono?._id;\r\n      const respuesta = await editAbono(abonoId, datos);\r\n      const actualizado = respuesta?.data || respuesta;\r\n\r\n      if (actualizado) {\r\n        onSave?.(actualizado);\r\n        onClose?.();\r\n      }\r\n    } catch (err) {\r\n      if (err.response?.status === 409) {\r\n        setError('Ya existe un abono con estos datos.');\r\n      } else if (err.response?.status === 400) {\r\n        setError(err.response?.data?.message || 'Datos inv√°lidos. Por favor revise los campos.');\r\n      } else {\r\n        setError('Error al actualizar el abono. Por favor intente nuevamente.');\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} />\r\n      <div className=\"relative bg-card border border-border rounded-lg shadow-xl w-1/3 mx-4 flex flex-col h-5/6\">\r\n        {/* Encabezado */}\r\n        <div className=\"p-4 border-b border-border flex items-center justify-between bg-card sticky top-0 z-10\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Edit\" size={18} />\r\n            <h3 className=\"text-lg font-semibold text-foreground\">Editar Abono</h3>\r\n          </div>\r\n          <button\r\n            className=\"text-muted-foreground hover:text-foreground disabled:opacity-50\"\r\n            onClick={onClose}\r\n            title=\"Cerrar\"\r\n            disabled={loading}\r\n          >\r\n            <Icon name=\"X\" size={18} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Contenido */}\r\n        <div className=\"overflow-y-auto flex-1\">\r\n          <form onSubmit={manejarEnvio} className=\"p-4 space-y-6\">\r\n            {/* Resumen */}\r\n            <div className=\"bg-muted/40 rounded p-3 grid grid-cols-1 md:grid-cols-3 gap-2 text-sm\">\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Proyecto</span>\r\n                <span className=\"text-foreground font-medium block\">\r\n                  {infoProyecto?.nombre || '‚Äî'}\r\n                </span>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Importe total</span>\r\n                <span className=\"text-foreground font-medium block\">{formatearMoneda(infoProyecto?.presupuesto || presupuestoProyecto)}</span>\r\n              </div>\r\n              <div>\r\n                <span className=\"text-muted-foreground\">Total pagado</span>\r\n                <span className=\"text-foreground font-medium block\">{formatearMoneda(totalAbonado)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progreso */}\r\n            <div>\r\n              <div className=\"flex justify-between text-xs text-muted-foreground mb-1\">\r\n                <span>Progreso de pago</span>\r\n                <span>{isNaN(progreso) ? 0 : progreso}%</span>\r\n              </div>\r\n              <div className=\"w-full bg-muted rounded-full h-2\">\r\n                <div className=\"h-2 rounded-full bg-primary\" style={{ width: `${isNaN(progreso) ? 0 : progreso}%` }} />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci√≥n del abono (solo lectura) */}\r\n            {(abono?.folio || abono?.referencia) && (\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded p-3 text-sm\">\r\n                <div className=\"text-blue-800 font-medium mb-1\">Informaci√≥n del Abono</div>\r\n                <div className=\"text-blue-700\">\r\n                  <span className=\"font-mono\">{abono?.folio ?? abono?.referencia}</span>\r\n                  {abono?.numeroAbono && <span className=\"ml-2\">N¬∞ {abono.numeroAbono}</span>}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Campos principales */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {/* Fecha */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Fecha del abono</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={fechaLocal}\r\n                  onChange={(e) => setFechaLocal(e.target.value)}\r\n                  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  required\r\n                  disabled={loading}\r\n                />\r\n                <p className=\"text-[11px] text-muted-foreground mt-1\">\r\n                  Formato: {fechaLocal ? formatearFechaParaApi(fechaLocal) : '‚Äî'}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Monto */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Monto abonado</label>\r\n                <input\r\n                  type=\"text\"\r\n                  inputMode=\"decimal\"\r\n                  placeholder=\"0.00\"\r\n                  value={montoFormateado}\r\n                  onChange={(e) => manejarCambioMonto(e.target.value) }\r\n                  className={`flex h-10 w-full rounded-md border px-3 py-2 text-sm bg-background ${\r\n                    Number(monto) > 0 && totalPagadoPrevio > Number(infoProyecto.presupuesto || 0)\r\n                      ? 'border-red-500 focus:border-red-500 focus:ring-red-500'\r\n                      : 'border-input'\r\n                  }`}\r\n                  required\r\n                  disabled={loading}\r\n                />\r\n                {Number(monto) > 0 && totalPagadoPrevio > Number(infoProyecto.presupuesto || 0) && (\r\n                  <p className=\"text-xs text-red-600 mt-1\">\r\n                    ‚ö†Ô∏è El monto excede el l√≠mite disponible. Saldo disponible: {formatearMoneda(saldo)}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Saldo */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-muted-foreground mb-2\">Saldo restante</label>\r\n                <div className=\"flex h-10 items-center px-3 py-2 text-sm font-medium text-foreground bg-muted/30 rounded-md border border-input/50\">\r\n                  {formatearMoneda(saldo)}\r\n                </div>\r\n              </div>\r\n\r\n              {/* M√©todo de pago */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">M√©todo de pago</label>\r\n                <select\r\n                  value={metodoPago}\r\n                  onChange={(e) => {\r\n                    setMetodoPago(e.target.value);\r\n                    if (e.target.value !== 'Otro') setDescripcionMetodo('');\r\n                    if (!['Transferencia', 'Tarjeta', 'Cheque'].includes(e.target.value)) setReferenciaPago('');\r\n                  }}\r\n                  className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  disabled={loading}\r\n                >\r\n                  <option value=\"Efectivo\">Efectivo</option>\r\n                  <option value=\"Transferencia\">Transferencia</option>\r\n                  <option value=\"Tarjeta\">Tarjeta</option>\r\n                  <option value=\"Cheque\">Cheque</option>\r\n                  <option value=\"Otro\">Otro</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Referencia de pago (si es Transferencia, Tarjeta o Cheque) */}\r\n              {['Transferencia', 'Tarjeta', 'Cheque'].includes(metodoPago) && (\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Referencia de pago <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={referenciaPago}\r\n                    onChange={(e) => setReferenciaPago(e.target.value)}\r\n                    className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                    placeholder={\r\n                      metodoPago === 'Transferencia' \r\n                        ? 'N√∫mero de transferencia o CLABE'\r\n                        : metodoPago === 'Tarjeta'\r\n                        ? '√öltimos 4 d√≠gitos o n√∫mero de autorizaci√≥n'\r\n                        : 'N√∫mero de cheque'\r\n                    }\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Descripci√≥n m√©todo (si es Otro) */}\r\n              {metodoPago === 'Otro' && (\r\n                <div className=\"md:col-span-2\">\r\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\r\n                    Descripci√≥n del m√©todo de pago\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={descripcionMetodo}\r\n                    onChange={(e) => setDescripcionMetodo(e.target.value)}\r\n                    className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                    placeholder=\"Especifique el m√©todo de pago\"\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Descripci√≥n */}\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Descripci√≥n</label>\r\n                <textarea\r\n                  rows={2}\r\n                  value={descripcion}\r\n                  onChange={(e) => setDescripcion(e.target.value)}\r\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  placeholder=\"Pago inicial del proyecto\"\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n\r\n              {/* Notas */}\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-foreground mb-2\">Notas</label>\r\n                <textarea\r\n                  rows={2}\r\n                  value={notas}\r\n                  onChange={(e) => setNotas(e.target.value)}\r\n                  className=\"w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\r\n                  placeholder=\"Pago realizado por el cliente\"\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {error && <div className=\"text-sm text-red-600\">{error}</div>}\r\n\r\n            <div className=\"flex items-center justify-end gap-2 pt-2\">\r\n              <Button variant=\"outline\" onClick={onClose} disabled={loading}>Cancelar</Button>\r\n              <Button type=\"submit\" iconName=\"Check\" iconPosition=\"left\" disabled={loading}>\r\n                {loading ? 'Actualizando‚Ä¶' : 'Actualizar'}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditAbonoModal;\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\nimport useAbono from '../../../hooks/useAbono';\r\nimport EditAbonoModal from './EditAbonoModal';\r\n\r\n// Formatear monto en moneda MXN\r\nconst formatearMoneda = (cantidad) => {\r\n  if (cantidad == null || isNaN(cantidad)) return '‚Äî';\r\n  return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(Number(cantidad) || 0);\r\n};\r\n\r\n// Formatear fecha\r\nconst formatearFecha = (fecha) => {\r\n  if (!fecha) return '‚Äî';\r\n  try {\r\n    // Intentar parsear diferentes formatos de fecha\r\n    let fechaObj;\r\n    if (typeof fecha === 'string') {\r\n      // Si viene en formato dd/mm/yyyy\r\n      if (fecha.includes('/')) {\r\n        const [dia, mes, a√±o] = fecha.split('/');\r\n        fechaObj = new Date(Number(a√±o), Number(mes) - 1, Number(dia));\r\n      } else {\r\n        fechaObj = new Date(fecha);\r\n      }\r\n    } else {\r\n      fechaObj = fecha;\r\n    }\r\n    \r\n    if (isNaN(fechaObj.getTime())) return '‚Äî';\r\n    return fechaObj.toLocaleDateString('es-MX', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric'\r\n    });\r\n  } catch {\r\n    return '‚Äî';\r\n  }\r\n};\r\n\r\nconst ViewAbonosModal = ({ isOpen, onClose, project, onAbonoUpdated }) => {\r\n  const { getAbonosByProyecto, loading } = useAbono();\r\n  const [abonos, setAbonos] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [abonoAEditar, setAbonoAEditar] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const cargarAbonos = async () => {\r\n      if (!isOpen || !project) {\r\n        setAbonos([]);\r\n        setError('');\r\n        return;\r\n      }\r\n\r\n      const proyectoId = project?.id ?? project?._id ?? project?.rawId;\r\n      if (!proyectoId) {\r\n        setError('No se pudo identificar el proyecto');\r\n        setAbonos([]);\r\n        return;\r\n      }\r\n\r\n      setError('');\r\n\r\n      try {\r\n        const result = await getAbonosByProyecto(proyectoId);\r\n        setAbonos(result?.items || []);\r\n      } catch (err) {\r\n        console.error('Error al cargar abonos:', err);\r\n        setError('Error al cargar los abonos del proyecto');\r\n        setAbonos([]);\r\n      }\r\n    };\r\n\r\n    cargarAbonos();\r\n  }, [isOpen, project, getAbonosByProyecto]);\r\n\r\n  const manejarEditarAbono = (abono) => {\r\n    setAbonoAEditar(abono);\r\n  };\r\n\r\n  const manejarCerrarEdicion = () => {\r\n    setAbonoAEditar(null);\r\n  };\r\n\r\n  const manejarAbonoActualizado = async (abonoActualizado) => {\r\n    // Recargar la lista de abonos despu√©s de actualizar\r\n    if (project) {\r\n      const proyectoId = project?.id ?? project?._id ?? project?.rawId;\r\n      if (proyectoId) {\r\n        try {\r\n          const result = await getAbonosByProyecto(proyectoId);\r\n          setAbonos(result?.items || []);\r\n        } catch (err) {\r\n          console.error('Error al recargar abonos:', err);\r\n        }\r\n      }\r\n    }\r\n    setAbonoAEditar(null);\r\n    \r\n    // Notificar al componente padre que se actualiz√≥ un abono, pasando el proyecto y el abono actualizado\r\n    if (typeof onAbonoUpdated === 'function') {\r\n      onAbonoUpdated(project, abonoActualizado);\r\n    }\r\n  };\r\n\r\n  // Calcular totales\r\n  const totalAbonado = abonos.reduce((sum, abono) => {\r\n    const monto = Number(abono?.montoAbono ?? abono?.monto ?? abono?.monto_abono ?? 0);\r\n    return sum + monto;\r\n  }, 0);\r\n\r\n  const presupuesto = Number(project?.budget ?? project?.presupuesto?.total ?? project?.totalPresupuesto ?? 0);\r\n  const saldoRestante = Math.max(presupuesto - totalAbonado, 0);\r\n  const porcentajePagado = presupuesto > 0 ? Math.round((totalAbonado / presupuesto) * 100) : 0;\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} />\r\n      <div className=\"relative bg-card border border-border rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] flex flex-col\">\r\n        {/* Encabezado */}\r\n        <div className=\"p-4 border-b border-border flex items-center justify-between bg-card sticky top-0 z-10\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Icon name=\"Eye\" size={18} />\r\n            <h3 className=\"text-lg font-semibold text-foreground\">\r\n              Abonos del Proyecto: {project?.name ?? project?.nombreProyecto ?? '‚Äî'}\r\n            </h3>\r\n          </div>\r\n          <button\r\n            className=\"text-muted-foreground hover:text-foreground\"\r\n            onClick={onClose}\r\n            title=\"Cerrar\"\r\n          >\r\n            <Icon name=\"X\" size={18} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Resumen */}\r\n        <div className=\"p-4 border-b border-border bg-muted/30\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm\">\r\n            <div>\r\n              <span className=\"text-muted-foreground block text-xs\">Presupuesto Total</span>\r\n              <span className=\"text-foreground font-medium text-base\">{formatearMoneda(presupuesto)}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-muted-foreground block text-xs\">Total Abonado</span>\r\n              <span className=\"text-foreground font-medium text-base\">{formatearMoneda(totalAbonado)}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-muted-foreground block text-xs\">Saldo Restante</span>\r\n              <span className=\"text-foreground font-medium text-base\">{formatearMoneda(saldoRestante)}</span>\r\n            </div>\r\n            <div>\r\n              <span className=\"text-muted-foreground block text-xs\">Progreso</span>\r\n              <span className=\"text-foreground font-medium text-base\">{porcentajePagado}%</span>\r\n            </div>\r\n          </div>\r\n          {/* Barra de progreso */}\r\n          <div className=\"mt-3\">\r\n            <div className=\"w-full bg-muted rounded-full h-2\">\r\n              <div\r\n                className=\"h-2 rounded-full bg-primary transition-all\"\r\n                style={{ width: `${Math.min(porcentajePagado, 100)}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contenido - Lista de abonos */}\r\n        <div className=\"overflow-y-auto flex-1 p-4\">\r\n          {loading && (\r\n            <div className=\"flex items-center justify-center py-8\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n              <span className=\"ml-3 text-muted-foreground\">Cargando abonos...</span>\r\n            </div>\r\n          )}\r\n\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 text-sm\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {!loading && !error && abonos.length === 0 && (\r\n            <div className=\"text-center py-12\">\r\n              <Icon name=\"CreditCard\" size={48} className=\"text-muted-foreground mx-auto mb-4\" />\r\n              <p className=\"text-muted-foreground\">No hay abonos registrados para este proyecto</p>\r\n            </div>\r\n          )}\r\n\r\n          {!loading && !error && abonos.length > 0 && (\r\n            <div className=\"space-y-3\">\r\n              {/* Encabezado de tabla (solo desktop) */}\r\n              <div className=\"hidden md:grid md:grid-cols-8 gap-4 pb-2 border-b border-border text-xs font-medium text-muted-foreground\">\r\n                <div>Folio/Ref.</div>\r\n                <div>Fecha</div>\r\n                <div>Monto</div>\r\n                <div>M√©todo de Pago</div>\r\n                <div>Descripci√≥n</div>\r\n                <div>N¬∞ Abono</div>\r\n                <div>Estado</div>\r\n                <div>Acciones</div>\r\n              </div>\r\n\r\n              {/* Lista de abonos */}\r\n              {abonos.map((abono, index) => {\r\n                const monto = Number(abono?.montoAbono ?? abono?.monto ?? abono?.monto_abono ?? 0);\r\n                const fecha = abono?.fecha ?? abono?.fechaAbono ?? abono?.fecha_creacion ?? abono?.createdAt;\r\n                const metodoPago = abono?.metodoPago ?? abono?.metodo_pago ?? abono?.metodo ?? '‚Äî';\r\n                const descripcion = abono?.descripcion ?? abono?.descripcionAbono ?? '‚Äî';\r\n                const folio = abono?.folio ?? abono?.referencia ?? '‚Äî';\r\n                const numeroAbono = abono?.numeroAbono ?? null;\r\n                const activo = abono?.activo ?? true;\r\n                const estado = activo ? (abono?.estado ?? abono?.status ?? 'registrado') : 'inactivo';\r\n                const notas = abono?.notas ?? abono?.observaciones ?? '';\r\n\r\n                return (\r\n                  <div\r\n                    key={abono?.id ?? abono?._id ?? index}\r\n                    className=\"border border-border rounded-lg p-4 hover:bg-muted/30 transition-colors\"\r\n                  >\r\n                    {/* Vista Desktop */}\r\n                    <div className=\"hidden md:grid md:grid-cols-8 gap-4 items-center\">\r\n                      <div className=\"text-sm text-foreground font-mono\">{folio}</div>\r\n                      <div className=\"text-sm text-foreground\">{formatearFecha(fecha)}</div>\r\n                      <div className=\"text-sm font-medium text-foreground\">{formatearMoneda(monto)}</div>\r\n                      <div className=\"text-sm text-foreground\">{metodoPago}</div>\r\n                      <div className=\"text-sm text-muted-foreground truncate\" title={descripcion}>\r\n                        {descripcion}\r\n                      </div>\r\n                      <div className=\"text-sm text-foreground text-center\">\r\n                        {numeroAbono != null ? `#${numeroAbono}` : '‚Äî'}\r\n                      </div>\r\n                      <div className=\"text-sm\">\r\n                        <span\r\n                          className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\r\n                            estado === 'aprobado' || (activo && estado === 'registrado')\r\n                              ? 'bg-green-100 text-green-800'\r\n                              : estado === 'rechazado' || estado === 'inactivo'\r\n                              ? 'bg-red-100 text-red-800'\r\n                              : 'bg-blue-100 text-blue-800'\r\n                          }`}\r\n                        >\r\n                          {activo ? estado : 'inactivo'}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex items-center justify-center\">\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => manejarEditarAbono(abono)}\r\n                          title=\"Editar abono\"\r\n                          aria-label=\"Editar abono\"\r\n                        >\r\n                          <Icon name=\"Edit\" size={16} />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Vista M√≥vil */}\r\n                    <div className=\"md:hidden space-y-2\">\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <span className=\"text-sm font-medium text-foreground\">{formatearMoneda(monto)}</span>\r\n                          {folio && folio !== '‚Äî' && (\r\n                            <span className=\"ml-2 text-xs text-muted-foreground font-mono\">({folio})</span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={() => manejarEditarAbono(abono)}\r\n                            title=\"Editar abono\"\r\n                            aria-label=\"Editar abono\"\r\n                          >\r\n                            <Icon name=\"Edit\" size={16} />\r\n                          </Button>\r\n                          <span\r\n                            className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\r\n                              estado === 'aprobado' || (activo && estado === 'registrado')\r\n                                ? 'bg-green-100 text-green-800'\r\n                                : estado === 'rechazado' || estado === 'inactivo'\r\n                                ? 'bg-red-100 text-red-800'\r\n                                : 'bg-blue-100 text-blue-800'\r\n                            }`}\r\n                          >\r\n                            {activo ? estado : 'inactivo'}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"grid grid-cols-2 gap-2 text-xs\">\r\n                        <div>\r\n                          <span className=\"text-muted-foreground\">Fecha:</span>\r\n                          <span className=\"ml-1 text-foreground\">{formatearFecha(fecha)}</span>\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"text-muted-foreground\">M√©todo:</span>\r\n                          <span className=\"ml-1 text-foreground\">{metodoPago}</span>\r\n                        </div>\r\n                        {numeroAbono != null && (\r\n                          <div>\r\n                            <span className=\"text-muted-foreground\">N¬∞ Abono:</span>\r\n                            <span className=\"ml-1 text-foreground\">#{numeroAbono}</span>\r\n                          </div>\r\n                        )}\r\n                        <div className=\"col-span-2\">\r\n                          <span className=\"text-muted-foreground\">Descripci√≥n:</span>\r\n                          <span className=\"ml-1 text-foreground\">{descripcion}</span>\r\n                        </div>\r\n                        {notas && (\r\n                          <div className=\"col-span-2\">\r\n                            <span className=\"text-muted-foreground\">Notas:</span>\r\n                            <span className=\"ml-1 text-foreground text-xs\">{notas}</span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Pie */}\r\n        <div className=\"p-4 border-t border-border flex items-center justify-end\">\r\n          <Button variant=\"outline\" onClick={onClose}>\r\n            Cerrar\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal de edici√≥n de abono */}\r\n      {abonoAEditar && (\r\n        <EditAbonoModal\r\n          isOpen={!!abonoAEditar}\r\n          abono={abonoAEditar}\r\n          project={project}\r\n          onClose={manejarCerrarEdicion}\r\n          onSave={manejarAbonoActualizado}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewAbonosModal;\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../components/AppIcon';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Header from '../../components/ui/Header';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport ProjectFilters from './components/ProjectFilters';\r\nimport ProjectTable from './components/ProjectTable';\r\nimport ProjectStats from './components/AbonosStats';\r\nimport CreateProjectModal from './components/CreateProjectModal';\r\nimport EditProjectModal from './components/EditProjectModal';\r\nimport RegisterAbonoModal from './components/RegisterAbonoModal';\r\nimport ViewAbonosModal from './components/ViewAbonosModal';\r\nimport useProyect from '../../hooks/useProyect';\r\n\r\n/* =========================================================================\r\n   Cache local para el estado visual (UI) de cada proyecto\r\n   - Persistimos en localStorage el \"estado UI\" (planificaci√≥n / en proceso)\r\n   - Esto permite mantener el estado visible aunque el backend use otros labels\r\n   ========================================================================= */\r\nconst UI_ESTADO_KEY = 'proyectos_ui_estado_v1';\r\nconst uiEstadoCache = {\r\n  // Lee el mapa completo desde localStorage\r\n  _read() { try { return JSON.parse(localStorage.getItem(UI_ESTADO_KEY)) || {}; } catch { return {}; } },\r\n  // Obtiene el estado de un proyecto por id\r\n  get(id) { if (!id) return null; const m = this._read(); return m[id] || null; },\r\n  // Setea o elimina el estado para un id; vuelve a guardar en localStorage\r\n  set(id, estado) { if (!id) return; const m = this._read(); if (estado) m[id] = estado; else delete m[id]; localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m)); },\r\n  // Al recibir lista desde API, rellena los estados que falten con un default\r\n  bulkMergeFromApi(lista = []) {\r\n    const m = this._read(); let cambiado = false;\r\n    lista.forEach(p => {\r\n      const id = p?.id ?? p?._id; if (!id) return;\r\n      if (!m[id]) { const def = backendToUiDefault(p?.estado); if (def) { m[id] = def; cambiado = true; } }\r\n    });\r\n    if (cambiado) localStorage.setItem(UI_ESTADO_KEY, JSON.stringify(m));\r\n  }\r\n};\r\n\r\n// Traducci√≥n de estados backend ‚Üí estados UI (sin tildes para consistencia)\r\nconst backendToUiDefault = (estadoApi) => {\r\n  const v = String(estadoApi || '').toLowerCase().trim();\r\n  // Mapear estados del backend a estados UI (sin tildes)\r\n  if (v === 'en proceso' || v === 'en-proceso' || v === 'in-progress' || v === 'in progress') return 'en proceso';\r\n  if (v === 'en pausa' || v === 'en-pausa' || v === 'on-hold' || v === 'on hold' || v === 'pausa' || v === 'en pausa') return 'en pausa';\r\n  if (v === 'en revision' || v === 'en-revision' || v === 'en revisi√≥n' || v === 'review') return 'en revision';\r\n  if (v === 'completado' || v === 'completed' || v === 'completado' || v === 'done') return 'completado';\r\n  if (v === 'cancelado' || v === 'cancelled' || v === 'canceled') return 'cancelado';\r\n  if (v === 'planificacion' || v === 'planificaci√≥n' || v === 'planning') return 'planificacion';\r\n  if (v === 'activo' || v === 'active') return 'planificacion'; // Por defecto, activo = planificacion\r\n  return 'planificacion'; // Default\r\n};\r\n\r\n// Traducci√≥n de estados UI ‚Üí estados backend (para actualizar en servidor)\r\nconst mapUiToBackend = (estadoUi) => {\r\n  const v = String(estadoUi || '').toLowerCase();\r\n  return v === 'en proceso' ? 'en proceso' : 'activo';\r\n};\r\n\r\nconst ProjectManagement = () => {\r\n  /* =========================================================================\r\n     Hook de proyectos\r\n     - provee lista de proyectos y operaciones (get/update, etc.)\r\n     ========================================================================= */\r\n  const {\r\n    proyectos,\r\n    loading: cargando,\r\n    getProyectos,\r\n    // getProyectoById,\r\n    updateProyecto,\r\n    // deleteProyecto\r\n  } = useProyect();\r\n\r\n  /* =========================================================================\r\n     Estado local de la vista\r\n     ========================================================================= */\r\n  const [proyectosFiltrados, setProyectosFiltrados] = useState([]);\r\n  const [modalCrearAbierto, setModalCrearAbierto] = useState(false);\r\n  const [modalEditarAbierto, setModalEditarAbierto] = useState(false);\r\n  const [proyectoSeleccionado, setProyectoSeleccionado] = useState(null);\r\n  const [barraLateralColapsada, setBarraLateralColapsada] = useState(false);\r\n  const [menuEncabezadoAbierto, setMenuEncabezadoAbierto] = useState(false);\r\n\r\n  // Cache de abonos por proyecto (en local) para c√°lculos r√°pidos de \"pagado\"\r\n  const [abonosPorProyecto, setAbonosPorProyecto] = useState(() => {\r\n    try {\r\n      const bruto = localStorage.getItem('abonos_proyectos_v1');\r\n      return bruto ? JSON.parse(bruto) : {};\r\n    } catch { return {}; }\r\n  });\r\n\r\n  // Estado para abrir el modal de registro de abono asociado a un proyecto\r\n  const [registrarAbonoPara, setRegistrarAbonoPara] = useState(null);\r\n\r\n  // Estado para abrir el modal de visualizaci√≥n de abonos\r\n  const [verAbonosPara, setVerAbonosPara] = useState(null);\r\n\r\n  // Control del selector de proyecto (cuando se quiere crear un abono sin abrir desde la tabla)\r\n  const [mostrarSelectorProyecto, setMostrarSelectorProyecto] = useState(false);\r\n\r\n  // Trigger para refrescar las estad√≠sticas de abonos cuando se crea o actualiza un abono\r\n  const [refreshAbonosStats, setRefreshAbonosStats] = useState(0);\r\n\r\n  /* =========================================================================\r\n     Ciclo de vida\r\n     - Cargar proyectos al montar\r\n     - Sincronizar cache UI y lista filtrada cuando cambien los proyectos\r\n     ========================================================================= */\r\n  useEffect(() => { getProyectos(); }, []);\r\n  useEffect(() => {\r\n    const arr = Array.isArray(proyectos) ? proyectos : [];\r\n    uiEstadoCache.bulkMergeFromApi(arr);   // completa estados UI faltantes\r\n    // Actualizar la lista filtrada cuando cambian los proyectos\r\n    // Esto asegura que los cambios en abonos se reflejen en la tabla\r\n    if (!proyectosFiltrados || proyectosFiltrados.length === 0 || proyectosFiltrados.length === arr.length) {\r\n      setProyectosFiltrados(arr);            // por defecto, sin filtros o misma cantidad\r\n    }\r\n    // Nota: Si hay filtros aplicados y la cantidad cambi√≥, los filtros se mantendr√°n\r\n    // pero los datos de los proyectos se actualizar√°n cuando se re-apliquen los filtros\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [proyectos]);\r\n\r\n  /* =========================================================================\r\n     Helpers (getters) para acceder a campos con posibles alias\r\n     - Manejan nombres alternos seg√∫n venga del backend\r\n     ========================================================================= */\r\n  const obtenerNombre = (p) => p?.nombre ?? p?.nombreProyecto ?? p?.name ?? '';\r\n  const obtenerCodigo = (p) => p?.codigo ?? p?.code ?? '';\r\n  const obtenerEstadoUi = (p) => {\r\n    const id = p?.id ?? p?._id;\r\n    // 1. Primero intentar obtener del cache local\r\n    const estadoCache = uiEstadoCache.get(id);\r\n    if (estadoCache) return estadoCache;\r\n    \r\n    // 2. Si no hay en cache, obtener del backend (puede venir en diferentes campos)\r\n    const estadoBackend = p?.estado ?? p?.status ?? p?.estadoProyecto ?? p?.statusLabel ?? '';\r\n    if (estadoBackend) {\r\n      const estadoNormalizado = backendToUiDefault(estadoBackend);\r\n      // Guardar en cache para futuras consultas (incluso si es planificacion)\r\n      if (estadoNormalizado) {\r\n        uiEstadoCache.set(id, estadoNormalizado);\r\n      }\r\n      return estadoNormalizado;\r\n    }\r\n    \r\n    // 3. Default (sin tilde para consistencia)\r\n    return 'planificacion';\r\n  };\r\n  const obtenerDepartamento = (p) => p?.departamento ?? p?.department ?? '';\r\n  const obtenerPrioridad = (p) => p?.prioridad ?? p?.priority ?? '';\r\n  const obtenerInicio = (p) => p?.cronograma?.fechaInicio ?? p?.startDate ?? null;\r\n  const obtenerFin = (p) => p?.cronograma?.fechaFin ?? p?.endDate ?? null;\r\n  const obtenerPresupuesto = (p) => Number(p?.totalPresupuesto ?? p?.presupuesto?.total ?? p?.budget ?? 0);\r\n  const obtenerIdProyecto = (p) => p?.id ?? p?._id;\r\n\r\n  // Suma local de abonos guardados en cache para un proyecto\r\n  const obtenerTotalPagado = (p) => {\r\n    const pid = obtenerIdProyecto(p);\r\n    const lista = abonosPorProyecto?.[pid] || [];\r\n    return lista.reduce((acc, a) => acc + (Number(a?.monto) || 0), 0);\r\n  };\r\n\r\n  // Obtiene el total restante de un proyecto (igual que en ProjectTable)\r\n  const obtenerTotalRestante = (p) => {\r\n    // 1) Valor directo desde backend si est√° presente\r\n    const resumen = p?.resumenFinanciero || {};\r\n    const fromDB = resumen?.totalRestante ?? resumen?.saldoPendiente ?? resumen?.saldo_pendiente;\r\n    if (typeof fromDB === 'number' && !isNaN(fromDB)) {\r\n      return fromDB;\r\n    }\r\n    // 2) Fallback: calcula a partir de presupuesto y pagado\r\n    const presupuesto = obtenerPresupuesto(p);\r\n    const pagado = obtenerTotalPagado(p);\r\n    const restante = Math.max(presupuesto - pagado, 0);\r\n    return restante;\r\n  };\r\n\r\n  /* =========================================================================\r\n     Normalizadores para filtros (eliminan acentos, bajan a min√∫sculas, etc.)\r\n     ========================================================================= */\r\n  const normalizar = (s) => (s ?? '').toString()\r\n    .normalize('NFD').replace(/[\\u0300-\\u036f]/g, '')\r\n    .toLowerCase().trim().replace(/\\s+/g, ' ');\r\n\r\n  // Homologa distintos textos de estado a un \"canon\" para comparar\r\n  const estadoCanonico = (raw) => {\r\n    if (!raw) return 'planificacion';\r\n    const v = normalizar(String(raw));\r\n    \r\n    // Orden de verificaci√≥n: de m√°s espec√≠fico a m√°s general\r\n    // \"en pausa\" debe verificarse antes de \"en proceso\" para evitar conflictos\r\n    if (v.includes('pausa') || v.includes('pause') || v.includes('hold')) return 'en pausa';\r\n    if (v.includes('revision') || v.includes('review')) return 'en revision';\r\n    if (v.includes('completado') || v.includes('complet') || v.includes('done') || v.includes('closed')) return 'completado';\r\n    if (v.includes('cancelado') || v.includes('canceled') || v.includes('cancelled') || v.includes('cancel')) return 'cancelado';\r\n    if (v.includes('proceso') || v.includes('progress') || v.includes('process')) return 'en proceso';\r\n    if (v.includes('planific') || v.includes('planning') || v.includes('activo') || v.includes('active')) return 'planificacion';\r\n    \r\n    return v || 'planificacion';\r\n  };\r\n\r\n  /* =========================================================================\r\n     Manejo de filtros\r\n     - Recibe el objeto `filtros` desde <ProjectFilters/>\r\n     - Aplica b√∫squeda, estado, departamento, prioridad, fechas, presupuesto y\r\n       un filtro adicional de \"estado de pago\" (pagado / en-proceso / sin-pago)\r\n     ========================================================================= */\r\n  const manejarCambioFiltros = (filtros) => {\r\n    let filtrados = Array.isArray(proyectos) ? [...proyectos] : [];\r\n\r\n    // B√∫squeda por nombre, c√≥digo o cliente\r\n    if (filtros?.search) {\r\n      const q = normalizar(filtros.search);\r\n      filtrados = filtrados.filter(proy => {\r\n        const nombre = normalizar(obtenerNombre(proy));\r\n        const codigo = normalizar(obtenerCodigo(proy));\r\n        const cliente = normalizar(proy?.cliente?.nombre || proy?.cliente || '');\r\n        return nombre.includes(q) || codigo.includes(q) || cliente.includes(q);\r\n      });\r\n    }\r\n\r\n    // Filtro por estado de pago (basado en Total restante)\r\n    if (filtros?.paymentStatus) {\r\n      filtrados = filtrados.filter(proy => {\r\n        const presupuesto = obtenerPresupuesto(proy);\r\n        const totalRestante = obtenerTotalRestante(proy);\r\n        \r\n        if (filtros.paymentStatus === 'pagado') {\r\n          // Pagados: Total restante = 0\r\n          return totalRestante === 0;\r\n        } else if (filtros.paymentStatus === 'en-proceso') {\r\n          // En Proceso de Pago: Total restante < Presupuesto (y > 0)\r\n          return totalRestante > 0 && totalRestante < presupuesto;\r\n        } else if (filtros.paymentStatus === 'sin-pago') {\r\n          // Sin Pagos: Total restante = Presupuesto\r\n          return presupuesto > 0 && totalRestante === presupuesto;\r\n        }\r\n        return true;\r\n      });\r\n    }\r\n\r\n    // Filtro por estado del proyecto (normalizado)\r\n    if (filtros?.status) {\r\n      // Mapear valores del selector a valores can√≥nicos (sin acentos)\r\n      const mapaEstado = {\r\n        'planning': 'planificacion',\r\n        'in-progress': 'en proceso',\r\n        'on-hold': 'en pausa',\r\n        'review': 'en revision',\r\n        'completed': 'completado',\r\n        'cancelled': 'cancelado'\r\n      };\r\n      const estadoObjetivo = mapaEstado[filtros.status] || estadoCanonico(filtros.status);\r\n      const estadoObjetivoNormalizado = normalizar(estadoObjetivo);\r\n      \r\n      filtrados = filtrados.filter(proy => {\r\n        // Obtener estado del proyecto - intentar m√∫ltiples fuentes\r\n        let estadoProyecto = null;\r\n        \r\n        // 1. Intentar desde el objeto raw (datos originales del backend)\r\n        const estadoRaw = proy?.raw?.estado ?? proy?.raw?.status ?? proy?.raw?.estadoProyecto ?? proy?.raw?.statusLabel;\r\n        if (estadoRaw) {\r\n          estadoProyecto = backendToUiDefault(estadoRaw);\r\n        }\r\n        \r\n        // 2. Si no hay raw, intentar desde los campos directos del proyecto\r\n        if (!estadoProyecto) {\r\n          const estadoDirecto = proy?.estado ?? proy?.status ?? proy?.estadoProyecto ?? proy?.statusLabel;\r\n          if (estadoDirecto) {\r\n            estadoProyecto = backendToUiDefault(estadoDirecto);\r\n          }\r\n        }\r\n        \r\n        // 3. Si a√∫n no hay estado, usar la funci√≥n obtenerEstadoUi (cache + backend)\r\n        if (!estadoProyecto) {\r\n          estadoProyecto = obtenerEstadoUi(proy);\r\n        }\r\n        \r\n        // Normalizar el estado del proyecto a formato can√≥nico\r\n        const estadoProyectoCanonico = estadoCanonico(estadoProyecto);\r\n        \r\n        // Normalizar ambos para comparaci√≥n (sin acentos, min√∫sculas)\r\n        const estadoProyectoNormalizado = normalizar(estadoProyectoCanonico);\r\n        \r\n        // Comparar estados normalizados\r\n        const coincide = estadoProyectoNormalizado === estadoObjetivoNormalizado;\r\n        \r\n        return coincide;\r\n      });\r\n    }\r\n\r\n    // Filtro por departamento (mapea claves en ingl√©s a etiquetas en espa√±ol)\r\n    if (filtros?.department) {\r\n      const mapaDepto = { sales: 'Ventas', engineering: 'Ingenier√≠a', installation: 'Instalaci√≥n', maintenance: 'Mantenimiento', administration: 'Administraci√≥n' };\r\n      const depto = mapaDepto[filtros.department] || filtros.department;\r\n      filtrados = filtrados.filter(proy => (obtenerDepartamento(proy) || '') === depto);\r\n    }\r\n\r\n    // Filtro por prioridad (mapea claves a etiquetas)\r\n    if (filtros?.priority) {\r\n      const mapaPrioridad = { low: 'Baja', medium: 'Media', high: 'Alta', urgent: 'Urgente' };\r\n      const prioridad = mapaPrioridad[filtros.priority] || filtros.priority;\r\n      filtrados = filtrados.filter(proy => {\r\n        const prioridadProy = obtenerPrioridad(proy);\r\n        const prioridadNormalizada = normalizar(prioridadProy);\r\n        const prioridadFiltroNormalizada = normalizar(prioridad);\r\n        return prioridadNormalizada === prioridadFiltroNormalizada;\r\n      });\r\n    }\r\n\r\n    // Filtros por presupuesto m√≠nimo/m√°ximo\r\n    if (filtros?.minBudget) filtrados = filtrados.filter(proy => obtenerPresupuesto(proy) >= Number(filtros.minBudget));\r\n    if (filtros?.maxBudget) filtrados = filtrados.filter(proy => obtenerPresupuesto(proy) <= Number(filtros.maxBudget));\r\n\r\n    // Filtro por fecha de inicio ‚â• selected\r\n    if (filtros?.startDate) {\r\n      const filtroInicio = new Date(filtros.startDate);\r\n      filtrados = filtrados.filter(proy => {\r\n        const d = obtenerInicio(proy); if (!d) return false;\r\n        const sd = new Date(d); return sd >= filtroInicio;\r\n      });\r\n    }\r\n\r\n    // Filtro por fecha de fin ‚â§ selected\r\n    if (filtros?.endDate) {\r\n      const filtroFin = new Date(filtros.endDate);\r\n      filtrados = filtrados.filter(proy => {\r\n        const d = obtenerFin(proy); if (!d) return false;\r\n        const ed = new Date(d); return ed <= filtroFin;\r\n      });\r\n    }\r\n\r\n    setProyectosFiltrados(filtrados);\r\n  };\r\n\r\n  /* =========================================================================\r\n     Acciones sobre proyectos\r\n     ========================================================================= */\r\n  // Abre modal de edici√≥n con el proyecto seleccionado\r\n  const manejarEditarProyecto = (proyecto) => {\r\n    const id = proyecto?.id ?? proyecto?._id; if (!id) return;\r\n    setProyectoSeleccionado({ ...proyecto, id });\r\n    setModalEditarAbierto(true);\r\n  };\r\n\r\n  // Actualiza el estado del proyecto en backend y sincroniza cache UI\r\n  const _manejarActualizacionEstado = async (proyectoId, nuevoEstadoUi) => {\r\n    try {\r\n      const estadoBackend = mapUiToBackend(nuevoEstadoUi);\r\n      await updateProyecto(proyectoId, { estado: estadoBackend });\r\n      uiEstadoCache.set(proyectoId, nuevoEstadoUi);\r\n      await getProyectos({ force: true }).catch(() => {});\r\n    } catch (error) {\r\n      console.error('Error al actualizar estado del proyecto:', error);\r\n      alert('Error al actualizar el estado del proyecto');\r\n    }\r\n  };\r\n\r\n  // Placeholder para acciones masivas desde la tabla\r\n  const manejarAccionMasiva = (accion, idsSeleccionados) => { console.log(`Acci√≥n masiva: ${accion}`, idsSeleccionados); };\r\n\r\n  /* =========================================================================\r\n     Flujo de registro de abonos\r\n     - abrir/cerrar modal\r\n     - seleccionar proyecto\r\n     - guardar abono en cache local (para mostrar progreso/pagado)\r\n     ========================================================================= */\r\n  const abrirRegistroAbono = (proyecto) => { setRegistrarAbonoPara(proyecto); };\r\n  const cerrarRegistroAbono = () => {\r\n    setRegistrarAbonoPara(null);\r\n    setMostrarSelectorProyecto(false);\r\n  };\r\n  const abrirVerAbonos = (proyecto) => { setVerAbonosPara(proyecto); };\r\n  const cerrarVerAbonos = () => { setVerAbonosPara(null); };\r\n  const _abrirNuevoAbono = () => {\r\n    if (proyectosFiltrados && proyectosFiltrados.length > 0) {\r\n      setMostrarSelectorProyecto(true);\r\n    } else {\r\n      alert('No hay proyectos disponibles para registrar un abono.');\r\n    }\r\n  };\r\n  const seleccionarProyectoParaAbono = (proyecto) => {\r\n    setMostrarSelectorProyecto(false);\r\n    setRegistrarAbonoPara(proyecto);\r\n  };\r\n  const manejarGuardarAbono = async (payload) => {\r\n    const projectId =\r\n      payload?.projectId ??\r\n      payload?.idProyecto ??\r\n      payload?.project_id ??\r\n      payload?.proyectoId ??\r\n      obtenerIdProyecto(registrarAbonoPara);\r\n\r\n    if (!projectId) {\r\n      console.warn('No se pudo determinar el ID del proyecto al registrar el abono.');\r\n      return;\r\n    }\r\n\r\n    const fecha =\r\n      payload?.fecha ??\r\n      payload?.fechaAbono ??\r\n      payload?.fechaPago ??\r\n      payload?.createdAt ??\r\n      payload?.fecha_creacion ??\r\n      new Date().toISOString();\r\n\r\n    const monto = Number(\r\n      payload?.monto ??\r\n      payload?.montoAbono ??\r\n      payload?.monto_abono ??\r\n      payload?.amount ?? 0\r\n    ) || 0;\r\n\r\n    const saldoRestante =\r\n      payload?.saldoRestante ??\r\n      payload?.saldo_restante ??\r\n      payload?.saldo ??\r\n      payload?.saldoRestanteDespues ??\r\n      null;\r\n\r\n    setAbonosPorProyecto((prev) => {\r\n      const siguiente = { ...prev };\r\n      const lista = Array.isArray(siguiente[projectId]) ? siguiente[projectId] : [];\r\n      siguiente[projectId] = [...lista, { fecha, monto, saldoRestante }];\r\n      try { localStorage.setItem('abonos_proyectos_v1', JSON.stringify(siguiente)); } catch {}\r\n      return siguiente;\r\n    });\r\n\r\n    cerrarRegistroAbono();\r\n\r\n    // Refrescar las estad√≠sticas de abonos\r\n    setRefreshAbonosStats(prev => prev + 1);\r\n\r\n    try {\r\n      await getProyectos({ force: true });\r\n    } catch (errorRecarga) {\r\n      console.error('Error al recargar los proyectos despu√©s de registrar un abono:', errorRecarga);\r\n    }\r\n  };\r\n\r\n  // Tras editar un proyecto, recarga lista desde backend y cierra modal\r\n  const manejarActualizarProyecto = async () => {\r\n    try {\r\n      await getProyectos({ force: true });\r\n      alert('Proyecto actualizado exitosamente');\r\n      setProyectoSeleccionado(null); setModalEditarAbierto(false);\r\n    } catch {\r\n      setProyectoSeleccionado(null); setModalEditarAbierto(false);\r\n    }\r\n  };\r\n\r\n  /* =========================================================================\r\n     Exportaci√≥n CSV desde el panel de filtros\r\n     - Toma la lista actualmente filtrada y la descarga como CSV\r\n     ========================================================================= */\r\n  const manejarExportarDesdeFiltros = () => {\r\n    const lista = proyectosFiltrados || [];\r\n    if (!lista.length) { alert('No hay proyectos para exportar.'); return; }\r\n    const encabezados = ['C√≥digo','Nombre','Cliente','Estado','Prioridad','Presupuesto (MXN)','Inicio','Fin'];\r\n    const escapar = (s) => {\r\n      const v = String(s ?? '');\r\n      const necesita = /[\",\\n]/.test(v);\r\n      const e = v.replace(/\"/g,'\"\"');\r\n      return necesita ? `\"${e}\"` : e;\r\n    };\r\n    const filas = lista.map(p => {\r\n      const codigo = p?.codigo ?? p?.code ?? '';\r\n      const nombre = p?.nombre ?? p?.name ?? '';\r\n      const cliente = p?.cliente?.nombre || p?.cliente || '';\r\n      const estado = p?.statusLabel || p?.estado || p?.status || '';\r\n      const prioridad = p?.priority || p?.prioridad || '';\r\n      const presupuesto = Number(p?.totalPresupuesto ?? p?.presupuesto?.total ?? p?.budget ?? 0).toLocaleString('es-MX');\r\n      const ini = new Date(p?.cronograma?.fechaInicio ?? p?.startDate ?? '').toLocaleDateString('es-MX');\r\n      const fin = new Date(p?.cronograma?.fechaFin ?? p?.endDate ?? '').toLocaleDateString('es-MX');\r\n      return [codigo,nombre,cliente,estado,prioridad,presupuesto,ini,fin].map(escapar).join(',');\r\n    });\r\n    const csv = [encabezados.join(','), ...filas].join('\\n');\r\n    const blob = new Blob([csv], { type:'text/csv;charset=utf-8;' });\r\n    const a = document.createElement('a');\r\n    a.href = URL.createObjectURL(blob);\r\n    a.download = `proyectos_filtrados_${new Date().toISOString().slice(0,10)}.csv`;\r\n    document.body.appendChild(a); a.click();\r\n    document.body.removeChild(a);\r\n  };\r\n\r\n  /* =========================================================================\r\n     Vista de carga (skeleton)\r\n     ========================================================================= */\r\n  if (cargando) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar isCollapsed={barraLateralColapsada} onToggle={() => setBarraLateralColapsada(!barraLateralColapsada)} />\r\n        <div className={`flex-1 transition-all duration-300 ${barraLateralColapsada ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header onMenuToggle={() => setMenuEncabezadoAbierto(!menuEncabezadoAbierto)} isMenuOpen={menuEncabezadoAbierto} />\r\n          <div className=\"pt-16 flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando proyectos...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /* =========================================================================\r\n     Render principal\r\n     - Sidebar + Header fijos\r\n     - Stats, filtros, tabla, vac√≠os, modales y selector de proyecto\r\n     ========================================================================= */\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar isCollapsed={barraLateralColapsada} onToggle={() => setBarraLateralColapsada(!barraLateralColapsada)} />\r\n\r\n      <div className={`flex-1 transition-all duration-300 ${barraLateralColapsada ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header onMenuToggle={() => setMenuEncabezadoAbierto(!menuEncabezadoAbierto)} isMenuOpen={menuEncabezadoAbierto} />\r\n\r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Encabezado de la p√°gina */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-foreground mb-2\">Gesti√≥n de Proyectos</h1>\r\n                <p className=\"text-muted-foreground\">Administre el ciclo completo de proyectos HVAC desde la planificaci√≥n hasta el cierre</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Resumen de estad√≠sticas (usa proyectos filtrados y total pagado calculado localmente) */}\r\n            {proyectosFiltrados?.length > 0 && (\r\n              <ProjectStats \r\n                projects={proyectosFiltrados} \r\n                getTotalPagado={obtenerTotalPagado}\r\n                refreshTrigger={refreshAbonosStats}\r\n              />\r\n            )}\r\n\r\n            {/* Filtros (emitir√° onFiltersChange ‚Üí manejarCambioFiltros) */}\r\n            <ProjectFilters\r\n              onFiltersChange={manejarCambioFiltros}\r\n              totalProjects={proyectos?.length}\r\n              filteredProjects={proyectosFiltrados?.length}\r\n              onExport={manejarExportarDesdeFiltros}\r\n            />\r\n\r\n            {/* Tabla de proyectos o estado vac√≠o */}\r\n            <div className=\"space-y-6\">\r\n              {proyectosFiltrados?.length > 0 && (\r\n                <ProjectTable\r\n                  projects={proyectosFiltrados}\r\n                  onProjectSelect={manejarEditarProyecto}\r\n                  onRegisterAbono={abrirRegistroAbono}\r\n                  onViewAbonos={abrirVerAbonos}\r\n                  getPaidAmount={obtenerTotalPagado}\r\n                  onBulkAction={manejarAccionMasiva}\r\n                />\r\n              )}\r\n\r\n              {/* Mensaje de vac√≠o cuando no hay resultados */}\r\n              {proyectosFiltrados?.length === 0 && (\r\n                <div className=\"text-center py-12\">\r\n                  <Icon name=\"Filter\" size={64} className=\"text-muted-foreground mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-medium text-foreground mb-2\">No se encontraron proyectos con tus filtros</h3>\r\n                  <p className=\"text-muted-foreground mb-6\">Intenta con otros filtros o par√°metros de b√∫squeda</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Modal para crear proyecto (al cerrar, recarga lista) */}\r\n            <CreateProjectModal\r\n              isOpen={modalCrearAbierto}\r\n              onClose={() => setModalCrearAbierto(false)}\r\n              onSubmit={() => getProyectos({ force: true })}\r\n            />\r\n\r\n            {/* Modal para editar proyecto seleccionado */}\r\n            {modalEditarAbierto && (\r\n              <EditProjectModal\r\n                isOpen\r\n                onClose={() => { setModalEditarAbierto(false); setProyectoSeleccionado(null); }}\r\n                onSubmit={manejarActualizarProyecto}\r\n                project={proyectoSeleccionado}\r\n              />\r\n            )}\r\n\r\n            {/* Selector de proyecto para registrar un nuevo abono manualmente */}\r\n            {mostrarSelectorProyecto && (\r\n              <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n                <div className=\"absolute inset-0 bg-black/40\" onClick={() => setMostrarSelectorProyecto(false)} />\r\n                <div className=\"relative bg-card border border-border rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden flex flex-col\">\r\n                  <div className=\"p-4 border-b border-border flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Icon name=\"CreditCard\" size={18} />\r\n                      <h3 className=\"text-lg font-semibold text-foreground\">Seleccionar Proyecto para Nuevo Abono</h3>\r\n                    </div>\r\n                    <button className=\"text-muted-foreground hover:text-foreground\" onClick={() => setMostrarSelectorProyecto(false)} title=\"Cerrar\">\r\n                      <Icon name=\"X\" size={18} />\r\n                    </button>\r\n                  </div>\r\n                  <div className=\"p-4 overflow-y-auto flex-1\">\r\n                    <div className=\"space-y-2\">\r\n                      {proyectosFiltrados && proyectosFiltrados.length > 0 ? (\r\n                        proyectosFiltrados.map((proy) => {\r\n                          const idProyecto = proy?.id ?? proy?._id;\r\n                          const presupuesto = obtenerPresupuesto(proy);\r\n                          const pagado = obtenerTotalPagado(proy);\r\n                          const restante = Math.max(presupuesto - pagado, 0);\r\n                          return (\r\n                            <button\r\n                              key={idProyecto}\r\n                              onClick={() => seleccionarProyectoParaAbono(proy)}\r\n                              className=\"w-full text-left p-4 border border-border rounded-lg hover:bg-muted/50 transition-smooth\"\r\n                            >\r\n                              <div className=\"flex items-center justify-between\">\r\n                                <div className=\"flex-1\">\r\n                                  <div className=\"font-medium text-foreground\">{obtenerNombre(proy)}</div>\r\n                                  <div className=\"text-sm text-muted-foreground mt-1\">\r\n                                    C√≥digo: {obtenerCodigo(proy)}\r\n                                  </div>\r\n                                  <div className=\"text-xs text-muted-foreground mt-1\">\r\n                                    Presupuesto: {new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(presupuesto)} | \r\n                                    Pagado: {new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(pagado)} | \r\n                                    Restante: {new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(restante)}\r\n                                  </div>\r\n                                </div>\r\n                                <Icon name=\"ChevronRight\" size={20} className=\"text-muted-foreground\" />\r\n                              </div>\r\n                            </button>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <div className=\"text-center py-8 text-muted-foreground\">\r\n                          No hay proyectos disponibles\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Modal para registrar abono del proyecto seleccionado */}\r\n            {registrarAbonoPara && (\r\n              <RegisterAbonoModal\r\n                isOpen\r\n                project={registrarAbonoPara}\r\n                currentPaid={obtenerTotalPagado(registrarAbonoPara)}\r\n                onClose={cerrarRegistroAbono}\r\n                onSave={manejarGuardarAbono}\r\n              />\r\n            )}\r\n\r\n            {/* Modal para visualizar abonos del proyecto seleccionado */}\r\n            {verAbonosPara && (\r\n              <ViewAbonosModal\r\n                isOpen\r\n                project={verAbonosPara}\r\n                onClose={cerrarVerAbonos}\r\n                onAbonoUpdated={async (proyecto, abonoActualizado) => {\r\n                  // Refrescar las estad√≠sticas de abonos\r\n                  setRefreshAbonosStats(prev => prev + 1);\r\n                  \r\n                  // Recargar los proyectos para actualizar la tabla\r\n                  try {\r\n                    await getProyectos({ force: true });\r\n                  } catch (errorRecarga) {\r\n                    console.error('Error al recargar los proyectos despu√©s de actualizar un abono:', errorRecarga);\r\n                  }\r\n                }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProjectManagement;\r\n","import httpService from \"./httpService\";\r\n\r\nconst userService = {\r\n  /**\r\n   * Obtiene la lista de usuarios\r\n   * @returns {Promise} Promise con la respuesta del servidor\r\n   */\r\n  getUsers: () => {\r\n    return httpService.get(\"/usuarios/obtenerUsuarios\");\r\n  },\r\n\r\n  /**\r\n   * Crea un nuevo usuario\r\n   * @param {Object} userData - Datos del usuario a crear\r\n   * @returns {Promise} Promise con la respuesta del servidor\r\n   */\r\n  createUser: (userData) => {\r\n    return httpService.post(\"/usuarios/crear\", userData);\r\n  },\r\n\r\n  /**\r\n   * Actualiza un usuario existente\r\n   * @param {string|number} id - ID del usuario a actualizar\r\n   * @param {Object} userData - Datos actualizados del usuario\r\n   * @returns {Promise} Promise con la respuesta del servidor\r\n   */\r\n  updateUser: (id, userData) => {\r\n    return httpService.put(`/usuarios/actualizar/${id}`, userData);\r\n  },\r\n\r\n  /**\r\n   * Obtiene un usuario por su ID\r\n   * @param {string|number} id - ID del usuario\r\n   * @returns {Promise} Promise con la respuesta del servidor\r\n   */\r\n  getUserById: (id) => {\r\n    return httpService.get(`/usuarios/${id}`);\r\n  },\r\n};\r\n\r\nexport default userService;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { useNotification } from '../context/NotificationContext';\r\nimport userService from '../services/userService';\r\n\r\nconst useUsers = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const { addNotification } = useNotification();\r\n\r\n  const fetchUsers = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await userService.getUsers();\r\n      setUsers(response.data);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      addNotification('Error al cargar usuarios', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [addNotification]);\r\n\r\n  const createUser = async (userData) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await userService.createUser(userData);\r\n      setUsers(prev => [...prev, response.data]);\r\n      addNotification('Usuario creado exitosamente', 'success');\r\n      return response.data;\r\n    } catch (err) {\r\n      setError(err.message);\r\n      addNotification('Error al crear usuario', 'error');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateUser = async (id, userData) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await userService.updateUser(id, userData);\r\n      setUsers(prev => prev.map(user => \r\n        user.id === id ? { ...user, ...response.data } : user\r\n      ));\r\n      addNotification('Usuario actualizado exitosamente', 'success');\r\n      return response.data;\r\n    } catch (err) {\r\n      setError(err.message);\r\n      addNotification('Error al actualizar usuario', 'error');\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, [fetchUsers]);\r\n\r\n  return {\r\n    users,\r\n    loading,\r\n    error,\r\n    fetchUsers,\r\n    createUser,\r\n    updateUser\r\n  };\r\n};\r\n\r\nexport default useUsers;","import React, { useState, useEffect } from 'react';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport Icon from '../../../components/AppIcon';\r\nimport { cn } from '../../../utils/cn';\r\nimport { useNotification } from '../../../context/NotificationContext';\r\n\r\nconst UserFormModal = ({ user, onClose, onSave }) => {\r\n  // Estado inicial completamente vac√≠o\r\n  const initialFormState = {\r\n    nombre: '',\r\n    email: '',\r\n    password: '',\r\n    rol: '',\r\n    contacto: '',\r\n    direccion: '',\r\n    imagen: ''\r\n  };\r\n\r\n  const [formData, setFormData] = useState(initialFormState);\r\n  const [errors, setErrors] = useState({});\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Solo precargar datos si estamos editando un usuario existente\r\n    if (user) {\r\n      setFormData({\r\n        nombre: user.nombre || '',\r\n        email: user.email || '',\r\n        password: '', // Nunca precargar contrase√±a\r\n        rol: user.rol || '',\r\n        contacto: user.contacto || '',\r\n        direccion: user.direccion || '',\r\n        imagen: user.imagen || ''\r\n      });\r\n    } else {\r\n      // Asegurar que el formulario est√© completamente vac√≠o para creaci√≥n\r\n      setFormData(initialFormState);\r\n      setErrors({});\r\n      setShowPassword(false);\r\n    }\r\n  }, [user]);\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    \r\n    // Validar nombre\r\n    if (!formData.nombre.trim()) {\r\n      newErrors.nombre = 'El nombre es requerido';\r\n    } else if (formData.nombre.trim().length < 3) {\r\n      newErrors.nombre = 'El nombre debe tener al menos 3 caracteres';\r\n    }\r\n    \r\n    // Validar email\r\n    if (!formData.email.trim()) {\r\n      newErrors.email = 'El correo es requerido';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\r\n      newErrors.email = 'Correo electr√≥nico inv√°lido';\r\n    }\r\n    \r\n    // Validar contrase√±a\r\n    if (!user && !formData.password.trim()) {\r\n      newErrors.password = 'La contrase√±a es requerida';\r\n    } else if (formData.password && formData.password.length < 6) {\r\n      newErrors.password = 'La contrase√±a debe tener al menos 6 caracteres';\r\n    }\r\n    \r\n    // Validar rol\r\n    if (!formData.rol.trim()) {\r\n      newErrors.rol = 'El rol es requerido';\r\n    }\r\n    \r\n    // Validar contacto (si se proporciona)\r\n    if (formData.contacto.trim()) {\r\n      const contactoSinEspacios = formData.contacto.replace(/\\s/g, '');\r\n      if (!/^\\d{10}$/.test(contactoSinEspacios)) {\r\n        newErrors.contacto = 'El contacto debe tener 10 d√≠gitos';\r\n      }\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      addNotification('Por favor, corrija los errores en el formulario', 'error');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      await onSave(formData);\r\n      addNotification(\r\n        user ? 'Usuario actualizado exitosamente' : 'Usuario creado exitosamente',\r\n        'success'\r\n      );\r\n    } catch (error) {\r\n      addNotification(\r\n        error.message || 'Error al guardar el usuario',\r\n        'error'\r\n      );\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    \r\n    // Validaci√≥n espec√≠fica para contacto (solo n√∫meros, m√°ximo 10 d√≠gitos)\r\n    if (name === 'contacto') {\r\n      const numericValue = value.replace(/\\D/g, '');\r\n      if (numericValue.length <= 10) {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          [name]: numericValue\r\n        }));\r\n      }\r\n    } else {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [name]: value\r\n      }));\r\n    }\r\n    \r\n    // Limpiar error del campo cuando el usuario empieza a escribir\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-card rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl\">\r\n        {/* Header */}\r\n        <div className=\"sticky top-0 bg-card border-b border-border px-6 py-4 flex items-center justify-between z-10\">\r\n          <h2 className=\"text-xl font-semibold text-foreground\">\r\n            {user ? 'Editar Usuario' : 'Crear Nuevo Usuario'}\r\n          </h2>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={onClose}\r\n            aria-label=\"Cerrar modal\"\r\n          >\r\n            <Icon name=\"X\" className=\"w-5 h-5\" />\r\n          </Button>\r\n        </div>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Nombre\"\r\n                name=\"nombre\"\r\n                value={formData.nombre}\r\n                onChange={handleChange}\r\n                error={errors.nombre}\r\n                required\r\n                placeholder=\"Ingrese el nombre completo\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Correo Electr√≥nico\"\r\n                type=\"email\"\r\n                name=\"email\"\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n                error={errors.email}\r\n                required\r\n                placeholder=\"correo@ejemplo.com\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"relative\">\r\n              <Input\r\n                label=\"Contrase√±a\"\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                name=\"password\"\r\n                value={formData.password}\r\n                onChange={handleChange}\r\n                error={errors.password}\r\n                required={!user}\r\n                placeholder={user ? \"Dejar vac√≠o para mantener contrase√±a actual\" : \"Ingrese una contrase√±a segura\"}\r\n              />\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"absolute right-2 top-8\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                aria-label={showPassword ? \"Ocultar contrase√±a\" : \"Mostrar contrase√±a\"}\r\n              >\r\n                <Icon\r\n                  name={showPassword ? \"EyeOff\" : \"Eye\"}\r\n                  className=\"w-4 h-4\"\r\n                />\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-medium leading-none text-foreground\">\r\n                Rol <span className=\"text-destructive ml-1\">*</span>\r\n              </label>\r\n              <select\r\n                name=\"rol\"\r\n                value={formData.rol}\r\n                onChange={handleChange}\r\n                required\r\n                className={cn(\r\n                  \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n                  errors.rol && \"border-destructive focus-visible:ring-destructive\"\r\n                )}\r\n              >\r\n                <option value=\"\">Seleccionar rol</option>\r\n                <option value=\"admin\">Admin - Acceso Total</option>\r\n                <option value=\"administracion\">Administraci√≥n - Negocio, Personal y Abonos</option>\r\n                <option value=\"proyectos\">Proyectos - Cotizaciones y Proyectos</option>\r\n                <option value=\"ventas\">Ventas - Oportunidades y Cotizaciones</option>\r\n                <option value=\"taller\">Taller - Operaciones, Operaciones de Taller e Inventario</option>\r\n              </select>\r\n              {errors.rol && (\r\n                <p className=\"text-sm text-destructive\">{errors.rol}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <Input\r\n                label=\"Contacto\"\r\n                name=\"contacto\"\r\n                value={formData.contacto}\r\n                onChange={handleChange}\r\n                error={errors.contacto}\r\n                placeholder=\"Tel√©fono de contacto (10 d√≠gitos)\"\r\n                maxLength={10}\r\n              />\r\n              {formData.contacto && (\r\n                <p className=\"text-xs text-muted-foreground mt-1\">\r\n                  {formData.contacto.length}/10 d√≠gitos\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"Direcci√≥n\"\r\n                name=\"direccion\"\r\n                value={formData.direccion}\r\n                onChange={handleChange}\r\n                placeholder=\"Direcci√≥n completa\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <Input\r\n                label=\"URL de Imagen\"\r\n                name=\"imagen\"\r\n                value={formData.imagen}\r\n                onChange={handleChange}\r\n                placeholder=\"https://ejemplo.com/imagen.jpg\"\r\n              />\r\n              {formData.imagen && (\r\n                <div className=\"mt-2\">\r\n                  <img \r\n                    src={formData.imagen} \r\n                    alt=\"Preview\" \r\n                    className=\"w-16 h-16 rounded-full object-cover border-2 border-border\"\r\n                    onError={(e) => {\r\n                      e.target.style.display = 'none';\r\n                    }}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-3 pt-4 border-t border-border\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n              disabled={isSubmitting}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"default\"\r\n              disabled={isSubmitting}\r\n            >\r\n              {isSubmitting ? (\r\n                <>\r\n                  <Icon name=\"Loader2\" className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                  Guardando...\r\n                </>\r\n              ) : (\r\n                user ? 'Guardar Cambios' : 'Crear Usuario'\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserFormModal;","import React, { useState, useEffect } from 'react';\r\nimport Icon from '../../../components/AppIcon';\r\nimport Button from '../../../components/ui/Button';\r\n\r\nconst PAGE_SIZE_OPTIONS = [5, 10, 20, 50];\r\n\r\nconst UserTable = ({ users, onEditUser }) => {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n  // Paginaci√≥n\r\n  const totalItems = users.length;\r\n  const totalPages = Math.max(1, Math.ceil(totalItems / pageSize));\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, totalItems);\r\n  const paginatedUsers = users.slice(startIndex, endIndex);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n    if (currentPage < 1) setCurrentPage(1);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const handleChangePageSize = (e) => {\r\n    const v = Number(e?.target?.value) || PAGE_SIZE_OPTIONS[0];\r\n    setPageSize(v);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const goToPage = (n) => setCurrentPage(Math.min(Math.max(1, n), totalPages));\r\n  const prevPage = () => goToPage(currentPage - 1);\r\n  const nextPage = () => goToPage(currentPage + 1);\r\n\r\n  return (\r\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden\">\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"min-w-full divide-y divide-border\">\r\n          <thead className=\"bg-gray-50 dark:bg-gray-900\">\r\n            <tr>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider whitespace-normal\">Nombre</th>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Rol</th>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Correo</th>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Contacto</th>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Direcci√≥n</th>\r\n              <th className=\"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider\">Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\r\n            {paginatedUsers.map((user) => (\r\n              <tr key={user.id} className=\"border-b border-border hover:bg-muted/30 transition-smooth\">\r\n                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div className=\"flex items-center\">\r\n                    {user.imagen && (\r\n                      <img className=\"h-10 w-10 rounded-full mr-3\" src={user.imagen} alt={user.nombre} />\r\n                    )}\r\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{user.nombre}</div>\r\n                  </div>\r\n                </td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-foreground\">{user.rol}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-foreground\">{user.email}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-foreground\">{user.contacto || '-'}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-foreground\">{user.direccion || '-'}</td>\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                  <button \r\n                    onClick={() => onEditUser(user)} \r\n                    className=\"text-primary hover:text-primary/80 transition-colors\"\r\n                    aria-label={`Editar usuario ${user.nombre}`}\r\n                    title=\"Editar usuario\"\r\n                  >\r\n                    <Icon name=\"Pencil\" className=\"w-4 h-4\" />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Paginaci√≥n */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between border-t border-border px-4 py-3 gap-3\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <label className=\"text-xs text-muted-foreground\">Mostrar</label>\r\n          <select\r\n            value={pageSize}\r\n            onChange={handleChangePageSize}\r\n            className=\"text-sm px-2 py-1 border border-border rounded bg-background text-foreground\"\r\n          >\r\n            {PAGE_SIZE_OPTIONS.map((opt) => (\r\n              <option key={opt} value={opt}>{opt}</option>\r\n            ))}\r\n          </select>\r\n          <span className=\"text-xs text-muted-foreground\">por p√°gina</span>\r\n          <span className=\"text-xs text-muted-foreground ml-3\">\r\n            Mostrando <span className=\"font-medium\">{totalItems === 0 ? 0 : startIndex + 1}</span>-<span className=\"font-medium\">{endIndex}</span> de <span className=\"font-medium\">{totalItems}</span>\r\n          </span>\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(1)} disabled={currentPage === 1} iconName=\"ChevronsLeft\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={prevPage} disabled={currentPage === 1} iconName=\"ChevronLeft\" />\r\n          <span className=\"px-2 text-sm text-foreground\">{currentPage} / {totalPages}</span>\r\n          <Button variant=\"outline\" size=\"sm\" onClick={nextPage} disabled={currentPage === totalPages} iconName=\"ChevronRight\" />\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => goToPage(totalPages)} disabled={currentPage === totalPages} iconName=\"ChevronsRight\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserTable;\r\n","import React, { useState } from 'react';\r\nimport Header from '../../components/ui/Header';\r\nimport Sidebar from '../../components/ui/Sidebar';\r\nimport Breadcrumb from '../../components/ui/Breadcrumb';\r\nimport Button from '../../components/ui/Button';\r\nimport Icon from '../../components/AppIcon';\r\nimport { useAuth } from '../../hooks/useAuth';\r\nimport useUsers from '../../hooks/useUsers';\r\nimport UserFormModal from './components/UserFormModal';\r\nimport UserTable from './components/UserTable';\r\n\r\nconst UserManagement = () => {\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const { user } = useAuth();\r\n  const { users, loading, createUser, updateUser } = useUsers();\r\n\r\n  if (!user?.rol?.toLowerCase().includes('admin')) return null;\r\n\r\n  const handleCreateUser = () => {\r\n    setSelectedUser(null); // Asegurar que no hay usuario seleccionado\r\n    setIsModalOpen(true);\r\n  };\r\n  const handleEditUser = (user) => {\r\n    setSelectedUser(user);\r\n    setIsModalOpen(true);\r\n  };\r\n  const handleCloseModal = () => {\r\n    setSelectedUser(null); // Limpiar usuario seleccionado al cerrar\r\n    setIsModalOpen(false);\r\n  };\r\n  const handleSaveUser = async (userData) => {\r\n    try {\r\n      if (selectedUser) {\r\n        await updateUser(selectedUser.id, userData);\r\n      } else {\r\n        await createUser(userData);\r\n      }\r\n      handleCloseModal(); // Usar funci√≥n de cierre que limpia\r\n    } catch (error) {\r\n      console.error('Error al guardar usuario:', error);\r\n    }\r\n  };\r\n\r\n  // Loading state with full layout\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex\">\r\n        <Sidebar \r\n          isCollapsed={sidebarCollapsed} \r\n          onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n        />\r\n        <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n          <Header \r\n            onMenuToggle={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n            isMenuOpen={mobileMenuOpen}\r\n          />\r\n          <div className=\"flex items-center justify-center h-96\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n              <p className=\"text-muted-foreground\">Cargando usuarios...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar \r\n        isCollapsed={sidebarCollapsed} \r\n        onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n      />\r\n\r\n      <div className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'lg:ml-16' : 'lg:ml-60'}`}>\r\n        <Header \r\n          onMenuToggle={() => setMobileMenuOpen(!mobileMenuOpen)}\r\n          isMenuOpen={mobileMenuOpen}\r\n        />\r\n\r\n        <div className=\"\">\r\n          <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Breadcrumb */}\r\n            <div className=\"mb-6\">\r\n              <Breadcrumb />\r\n            </div>\r\n\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-foreground\">Gesti√≥n de Usuarios</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                  Administra usuarios, roles y permisos del sistema\r\n                </p>\r\n              </div>\r\n              <Button\r\n                variant=\"default\"\r\n                onClick={handleCreateUser}\r\n                iconName=\"Plus\"\r\n                iconPosition=\"left\"\r\n              >\r\n                Crear Usuario\r\n              </Button>\r\n            </div>\r\n\r\n            {/* User Table */}\r\n            <UserTable\r\n              users={users}\r\n              onEditUser={handleEditUser}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      {isModalOpen && (\r\n        <UserFormModal\r\n          user={selectedUser}\r\n          onClose={handleCloseModal}\r\n          onSave={handleSaveUser}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagement;\r\n","import React from \"react\";\r\nimport { BrowserRouter, Routes as RouterRoutes, Route, Navigate } from \"react-router-dom\";\r\nimport ScrollToTop from \"components/ScrollToTop\";\r\nimport ErrorBoundary from \"components/ErrorBoundary\";\r\nimport ProtectedRoute from \"components/ProtectedRoute\";\r\nimport { ButtonHandlersProvider } from \"./components/GlobalButtonHandlers\";\r\nimport { getDefaultPath } from \"./utils/auth\";\r\nimport NotFound from \"pages/NotFound\";\r\nimport ProjectManagement from './pages/project-management';\r\nimport ProjectDetailGallery from './pages/project-detail-gallery';\r\nimport ProjectGalleryViewer from './pages/project-gallery-viewer';\r\nimport ProjectDocumentationCenter from './pages/project-documentation-center';\r\nimport ProjectWorkflowManagement from './pages/project-workflow-management';\r\nimport QuotationBuilder from './pages/quotation-builder';\r\nimport MainDashboard from './pages/main-dashboard';\r\nimport InventoryManagement from './pages/inventory-management';\r\nimport LoginPage from './pages/login';\r\nimport FinancialManagement from './pages/financial-management';\r\nimport PersonnelManagement from './pages/personnel-management';\r\nimport ClientManagement from './pages/client-management';\r\nimport WorkOrderProcessing from './pages/work-order-processing';\r\nimport WorkshopOperationsManagement from './pages/workshop-operations-management';\r\nimport WorkshopOperationsCenter from './pages/workshop-operations-center';\r\nimport SalesOpportunityManagement from './pages/sales-opportunity-management';\r\nimport QuotationDevelopmentCenter from './pages/quotation-development-center';\r\nimport SalesExecutionMonitoring from './pages/sales-execution-monitoring';\r\nimport ProjectAbonosManagement from './pages/project-abonos-management';\r\nimport UserManagement from './pages/user-management';\r\n\r\nconst Routes = () => {\r\n  // Componente para redirigir dashboard al inicio del rol\r\n  const DashboardRedirect = () => {\r\n    const userRole = localStorage.getItem('userRole');\r\n    const defaultPath = getDefaultPath(userRole);\r\n    return <Navigate to={defaultPath} replace />;\r\n  };\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <ButtonHandlersProvider>\r\n        <ScrollToTop />\r\n        <RouterRoutes>\r\n          {/* Public Route: Login */}\r\n          <Route path=\"/login\" element={<LoginPage />} />\r\n\r\n          {/* Redirigir la ra√≠z a login si no est√° autenticado */}\r\n          <Route path=\"/\" element={<LoginPage />} />\r\n          \r\n          {/* Redirigir dashboard al inicio del rol actual */}\r\n          <Route path=\"/dashboard\" element={<DashboardRedirect />} />\r\n          \r\n            <Route \r\n              path=\"/proyectos\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/proyectos\">\r\n                  <ProjectManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/galeria-proyecto/:projectId\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/galeria-proyecto\">\r\n                  <ProjectDetailGallery />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/visor-galeria/:projectId\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/visor-galeria\">\r\n                  <ProjectGalleryViewer />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/documentacion-proyectos\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/documentacion-proyectos\">\r\n                  <ProjectDocumentationCenter />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/flujo-proyecto\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/flujo-proyecto\">\r\n                  <ProjectWorkflowManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/constructor-cotizaciones\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/constructor-cotizaciones\">\r\n                  <QuotationBuilder />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/inventario\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/inventario\">\r\n                  <InventoryManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/finanzas\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/finanzas\">\r\n                  <FinancialManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/personal\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/personal\">\r\n                  <PersonnelManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/clientes\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/clientes\">\r\n                  <ClientManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/operaciones\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/operaciones\">\r\n                  <WorkOrderProcessing />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/operaciones-taller\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/operaciones-taller\">\r\n                  <WorkshopOperationsManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/centro-operaciones-taller\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/centro-operaciones-taller\">\r\n                  <WorkshopOperationsCenter />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/oportunidades\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/oportunidades\">\r\n                  <SalesOpportunityManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/usuarios\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/usuarios\">\r\n                  <UserManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/cotizaciones\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/cotizaciones\">\r\n                  <QuotationDevelopmentCenter />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/abonos\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/abonos\">\r\n                  <ProjectAbonosManagement />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            <Route \r\n              path=\"/monitoreo-ventas\" \r\n              element={\r\n                <ProtectedRoute requiredPath=\"/monitoreo-ventas\">\r\n                  <SalesExecutionMonitoring />\r\n                </ProtectedRoute>\r\n              } \r\n            />\r\n            \r\n            {/* Catch-all route for 404 */}\r\n            <Route path=\"*\" element={<NotFound />} />\r\n          </RouterRoutes>\r\n        </ButtonHandlersProvider>\r\n      </ErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default Routes;","import React from 'react';\r\nimport { X, CheckCircle, AlertCircle, AlertTriangle, Info } from 'lucide-react';\r\nimport { useNotifications, NotificationTypes } from '../context/NotificationContext.jsx';\r\nimport './NotificationContainer.css';\r\n\r\n/**\r\n * Componente individual de notificaci√≥n\r\n */\r\nconst NotificationItem = ({ notification, onRemove }) => {\r\n  const getIcon = () => {\r\n    switch (notification.type) {\r\n      case NotificationTypes.SUCCESS:\r\n        return <CheckCircle className=\"notification-icon success\" />;\r\n      case NotificationTypes.ERROR:\r\n        return <AlertCircle className=\"notification-icon error\" />;\r\n      case NotificationTypes.WARNING:\r\n        return <AlertTriangle className=\"notification-icon warning\" />;\r\n      case NotificationTypes.INFO:\r\n      default:\r\n        return <Info className=\"notification-icon info\" />;\r\n    }\r\n  };\r\n\r\n  const getTypeClass = () => {\r\n    return `notification-item notification-${notification.type}`;\r\n  };\r\n\r\n  const handleClose = () => {\r\n    onRemove(notification.id);\r\n  };\r\n\r\n  const handleActionClick = () => {\r\n    if (notification.action && notification.action.onClick) {\r\n      notification.action.onClick();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={getTypeClass()}>\r\n      <div className=\"notification-content\">\r\n        <div className=\"notification-icon-container\">\r\n          {getIcon()}\r\n        </div>\r\n        \r\n        <div className=\"notification-message\">\r\n          <p>{notification.message}</p>\r\n          \r\n          {notification.action && (\r\n            <button \r\n              className=\"notification-action\"\r\n              onClick={handleActionClick}\r\n            >\r\n              {notification.action.label}\r\n            </button>\r\n          )}\r\n        </div>\r\n        \r\n        <button \r\n          className=\"notification-close\"\r\n          onClick={handleClose}\r\n          aria-label=\"Cerrar notificaci√≥n\"\r\n        >\r\n          <X size={16} />\r\n        </button>\r\n      </div>\r\n      \r\n      {!notification.persistent && notification.duration > 0 && (\r\n        <div \r\n          className=\"notification-progress\"\r\n          style={{\r\n            animationDuration: `${notification.duration}ms`\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Contenedor principal de notificaciones\r\n */\r\nconst NotificationContainer = () => {\r\n  const { notifications, removeNotification } = useNotifications();\r\n\r\n  if (notifications.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"notification-container\">\r\n      {notifications.map((notification) => (\r\n        <NotificationItem\r\n          key={notification.id}\r\n          notification={notification}\r\n          onRemove={removeNotification}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationContainer;\r\n","\r\n\r\nimport React from \"react\";\r\nimport Routes from \"./Routes\";\r\nimport { AuthProvider } from \"./hooks/useAuth.jsx\";\r\n\r\nimport { NotificationProvider } from \"./context/NotificationContext.jsx\";\r\nimport NotificationContainer from \"./ui/NotificationContainer\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { ConfirmDialogProvider } from \"./ui/ConfirmDialogContext.jsx\";\r\nimport \"./styles/index.css\";\r\nimport \"./styles/tailwind.css\";\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <NotificationProvider>\r\n      <NotificationContainer />\r\n      <ConfirmDialogProvider>\r\n        <BrowserRouter>\r\n          <AuthProvider>\r\n            <Routes />\r\n          </AuthProvider>\r\n        </BrowserRouter>\r\n      </ConfirmDialogProvider>\r\n    </NotificationProvider>\r\n  );\r\n}\r\n\r\nexport default App;","import React from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\nimport App from \"./App\";\r\nimport \"./styles/tailwind.css\";\r\nimport \"./styles/index.css\";\r\n\r\n\r\n\r\nconst container = document.getElementById(\"root\");\r\nconst root = createRoot(container);\r\nroot.render(<App />);\r\n"],"names":["ScrollToTop","pathname","useLocation","useEffect","Icon","name","size","color","className","strokeWidth","props","IconComponent","_a","LucideIcons","jsx","HelpCircle","ErrorBoundary","React","error","errorInfo","jsxs","_b","NotificationContext","createContext","NotificationTypes","NotificationProvider","children","notifications","setNotifications","useState","addNotification","useCallback","message","type","options","notification","prev","n","removeNotification","id","clearNotifications","clearNotificationsByType","showSuccess","showError","showWarning","showInfo","showHttpError","context","showOperationSuccess","operation","resource","messages","showConfirm","onConfirm","onCancel","action","value","useNotifications","useContext","useErrorHandler","handleError","handleSuccess","useNotification","ConfirmDialog","open","title","confirmText","cancelText","ConfirmDialogContext","useConfirmDialog","ConfirmDialogProvider","dialog","setDialog","resolve","AUTH_ROLES","ROLE_PERMISSIONS","getCurrentUser","authToken","userRole","userEmail","hasPermission","path","currentUser","normalizeRole","r","role","basePath","p","parts","permissions","getAllowedNavigationItems","allowedPaths","allNavigationItems","items","item","allowedChildren","child","getDefaultPath","logout","renewToken","currentToken","response","axios","newToken","decoded","jwtDecode","tokenDurationMs","tokenDurationMin","useTokenExpiration","token","onTokenRenewed","timeoutRef","useRef","isRenewingRef","expMs","now","msBeforeExpiry","handleSessionExtension","notifyMs","totalDurationMs","decodedNew","expDate","define_import_meta_env_default","HttpService","config","_c","_d","_e","_g","_f","url","data","httpService","AuthService","email","password","userData","newPassword","currentPassword","profileData","authService","AuthContext","AuthProvider","user","setUser","isLoading","setIsLoading","isAuthenticated","setIsAuthenticated","navigate","useNavigate","expiresAt","tokenExpired","tokenExpTime","login","result","prevUser","roles","useAuth","ProtectedRoute","requiredPath","location","defaultPath","ButtonHandlersContext","ButtonHandlersProvider","filename","headers","csvContent","rows","row","blob","link","callback","onDelete","itemName","onEdit","promptText","newValue","onApprove","onReject","cn","inputs","twMerge","clsx","buttonVariants","cva","Button","variant","asChild","loading","iconName","iconPosition","iconSize","fullWidth","disabled","ref","Comp","Slot","iconSizeMap","calculatedIconSize","LoadingSpinner","renderIcon","renderFallbackButton","content","Fragment","clonedChild","NotFound","handleGoHome","Input","label","description","required","inputId","safeValue","baseInputClasses","Image","src","alt","e","Sidebar","isCollapsed","onToggle","searchQuery","setSearchQuery","searchResults","setSearchResults","showSearchResults","setShowSearchResults","navigationItems","setNavigationItems","allowedItems","expandedItems","setExpandedItems","toggleExpanded","handleNavigation","handleLogout","renderNavigationItem","level","isActive","hasChildren","isExpanded","handleItemClick","AppImage","Header","onMenuToggle","isMenuOpen","userMenuOpen","setUserMenuOpen","Breadcrumb","customItems","getDefaultPathForRole","pathMapping","breadcrumbs","segment","isOnDefaultPath","currentPath","currentPage","b","handleBack","index","onClick","X","ChevronUp","ChevronDown","Download","baseClasses","variantClasses","sizeClasses","disabledClasses","placeholder","onChange","Select","option","ProjectFilters","onFiltersChange","totalProjects","filteredProjects","onExport","filters","setFilters","setIsExpanded","statusOptions","departmentOptions","dateRangeOptions","clientTypeOptions","priorityOptions","handleFilterChange","key","newFilters","clearAllFilters","cleared","hasActiveFilters","v","handleExportClick","Search","displayValue","opt","applyProjectFilters","projects","filtered","searchTerm","project","raw","target","today","startDate","weekAgo","quarter","minBudget","maxBudget","filterStartDate","projectStartDate","filterEndDate","projectEndDate","clientService","DEFAULT_USD_RATE","PAGE_SIZE_OPTIONS","safeUUID","parseISODate","d","formatCurrency","formatUSD","formatDate","x","getPriorityColor","STATUS_OPTIONS","statusKeyFromAny","getStatusColorByKey","resolveProjectStatus","k1","lbl1","k2","found","o","rawTxt","txt","formatLocation","loc","direccion","municipio","estado","address","city","state","mapProjectDocStrict","doc","code","clienteNode","client","budget","equiposUSD","mxn","rate","divisor","s","normalizeClientRecord","c","contact","ProjectTable","onProjectSelect","onStatusUpdate","onBulkAction","onImageUpload","isUploadingImage","localDocs","setLocalDocs","remoteDocs","setRemoteDocs","setLoading","errorMsg","setErrorMsg","sortConfig","setSortConfig","selectedProjects","setSelectedProjects","expandedRows","setExpandedRows","clientCache","setClientCache","clientsLoaded","setClientsLoaded","setCurrentPage","pageSize","setPageSize","mounted","res","proyectoService","list","map","baseSourceDocs","useMemo","normalizedProjects","handleSort","direction","sortedProjects","a","aValue","bValue","at","bt","totalItems","totalPages","startIndex","endIndex","pageItems","handleChangePageSize","goToPage","prevPage","nextPage","getPossibleClientId","resolveClientName","cid","resolveClientEmailOrContact","hit","handleSelectProject","handleSelectAll","pageIds","allSelected","toggleRowExpansion","usingLocalShadow","handleDelete","doRemove","nombre","prevLocal","prevRemote","newTotal","newTotalPages","cp","handleBulkDelete","toDelete","doRemoveBulk","ids","nameToShow","emailToShow","statusUI","person","idx","defaultValue","multiple","searchable","clearable","onOpenChange","isOpen","setIsOpen","setSearchTerm","selectId","filteredOptions","getSelectedDisplay","selectedOptions","selectedOption","handleToggle","newIsOpen","handleOptionSelect","updatedValue","handleClear","handleSearchChange","isSelected","optionValue","hasValue","k","Check","personService","payload","department","empleadoId","usePerson","persons","setPersons","departmentPersons","setDepartmentPersons","getPersonsByDepartment","setError","err","estadoService","useEstados","estados","setEstados","useMunicipios","municipios","setMunicipios","projectTypes","projectStatusOptions","personnelOptionsFallback","mapPriorityToEs","formatWithCommas","decimals","num","unformatNumber","clean","rateSafe","CreateProjectModal","onClose","onSubmit","isSubmitting","setIsSubmitting","errors","setErrors","getPersons","formData","setFormData","isEquipmentInUSD","setIsEquipmentInUSD","exchangeRate","setExchangeRate","uiEquipmentUSD","setUiEquipmentUSD","loadingFx","setLoadingFx","fxError","setFxError","clientOptions","setClientOptions","loadingClients","setLoadingClients","loadingEstados","errorEstados","loadingMunicipios","errorMunicipios","resp","opts","fetchedPersonsRef","controller","personnelOptionsFinal","built","puesto","etiqueta","seen","dedup","handleInputChange","usd","handleBudgetChange","rawValue","cleanedNumber","fetchUsdMxnRate","mxnInfo","msg","toggleEquipmentUSD","checked","validate","buildPayloadForBackend","equipoDolares","handleSubmit","totalMXN","m","fold","KW","toCanon","getCanonFromObject","obj","candidates","canon","safeDate","fmtDateHuman","fmtDateIso","startOfWeekMonday","out","diffToMon","startOfMonth","startOfNextMonth","startOfYear","y","startOfNextYear","startOfQuarter","q","startOfNextQuarter","inRange","date","ini","fin","getId","getCode","getName","buildClientsMapFromCatalog","catalog","arr","it","getClientDetails","clientsMap","byName","_h","_i","_j","byEmail","_k","_l","_m","_n","byContact","_p","_o","_r","_q","_s","_t","cli","byId","_u","getStart","getEnd","getProg","getCanon","getBudgetTotal","statusColor","statusPill","ProjectTimeline","onNewProject","clientsCatalog","setRows","setErr","setClientsMap","period","setPeriod","PERIODS","ALLOWED","showCreate","setShowCreate","fetchRows","forceRemote","range","filteredRows","aT","bT","startsIn","endsIn","assignedPeople","people","clientDet","proj","personName","entry","info","peoplePage","setPeoplePage","PEOPLE_PAGE_SIZE","peopleTotalPages","peopleSlice","start","canPrevPeople","canNextPeople","personModal","setPersonModal","openPersonModal","closePersonModal","openCreate","closeCreate","handleNewProjectClick","handleCreated","payloadSentOrCreated","created","optimistic","SEP","handleExportReport","rowsCsv","inicio","prior","prog","fileName","end","pr","i","ProjectQuotations","selectedProject","setSelectedProject","getStatusColor","norm","canonicalizeStatus","table","synonyms","w","canonicalizeDepartment","canonicalizeClientType","canonicalizePriority","generateProjectQuotations","mid","handleCreateQuotation","projectsForFilter","pick","filteredForFilter","tableKey","quotations","hasResults","handleExportVisible","escape","csv","toNumber","val","cleaned","formatCurrencyMXN","amount","safePercent","part","total","t","normalizeStatus","rawStatus","normalizePriority","rawPriority","extractBudgetMXN","rawProject","rawAmount","normalizeProject","ProjectStats","refreshKey","projectsNorm","setProjectsNorm","apiStats","setApiStats","errMsg","setErrMsg","warnMsg","setWarnMsg","statsResp","statsPayload","proyectosResp","proyectosRaw","normalized","fallbackLocalStats","completedList","inProgressList","onHoldList","planningList","urgentList","totalBudget","sum","completedBudget","mergedStats","totalProyectos","totalPresupuesto","byEstado","byPrioridad","safeCount","safeBudget","inProgressCount","completedCount","apiUrgentCount","finalUrgent","finalOnHold","statCards","_","stat","estadoOptionsBackend","ALLOWED_ESTADOS","UI_ESTADO_KEY","uiEstadoCache","toNumberOrUndef","asStr","fallback","asArr","EditProjectModal","serverProject","setServerProject","selectedEstadoCode","setSelectedEstadoCode","cron","rawUbicacion","trimmed","parsed","ubicacion","estadoUi","apiResp","personnelOptions","fromPersons","existing","vals","acc","handle","handleUbicacion","field","errorKey","handleP","toggleUSD","ub","buildPayloadForUpdate","pres","clientLabel","extractList","unwrap","useProyecto","proyectos","setProyectos","loadingList","setLoadingList","loadingSave","setLoadingSave","loadingDelete","setLoadingDelete","loadingCurrency","setLoadingCurrency","fetchedOnceRef","proyectosLenRef","getProyectos","force","signal","getProyectoById","createProyecto","refresh","updateProyecto","updated","deleteProyecto","getCachedStats","getCurrencyRates","base","currencies","getCurrencyRatesMap","changed","def","backendToUiDefault","apiEstado","mapUiToBackend","uiEstado","ProjectManagement","useProyect","setFilteredProjects","activeView","setActiveView","isCreateModalOpen","setIsCreateModalOpen","isEditModalOpen","setIsEditModalOpen","sidebarCollapsed","setSidebarCollapsed","headerMenuOpen","setHeaderMenuOpen","canonicalEstado","handleFiltersChange","handleEditProject","handleStatusUpdate","projectId","newStatusUi","estadoBackend","handleUpdateProject","handleExportFromFilters","ImageUploadPanel","onImagesUploaded","isUploading","dragActive","setDragActive","selectedFiles","setSelectedFiles","previewImages","setPreviewImages","fileInputRef","handleFileSelect","files","validFiles","file","validTypes","reader","handleDrag","handleDrop","handleFileInput","updateImageMetadata","imageId","img","removeImage","handleUpload","imagesToUpload","categoryOptions","ImageLightbox","image","images","onNavigate","onUpdate","currentIndex","setCurrentIndex","isEditing","setIsEditing","editForm","setEditForm","handleKeyPress","navigatePrevious","navigateNext","nextIndex","prevIndex","handleSaveEdit","timestamp","getCategoryLabel","category","ImageGallery","onDeleteImage","onUpdateImage","projectInfo","selectedCategory","setSelectedCategory","sortBy","setSortBy","lightboxImage","setLightboxImage","viewMode","setViewMode","sortOptions","viewModeOptions","filteredImages","matchesCategory","matchesSearch","getCategoryColor","colors","handleDeleteImage","exportGallery","galleryData","mode","ProjectInfoPanel","status","priority","order","ProjectDetailGallery","useParams","setProject","setImages","activeTab","setActiveTab","setIsUploading","mockProjects","mockImages","foundProject","projectImages","handleImagesUploaded","newImages","uploadedImages","handleUpdateImage","updates","tabs","breadcrumbItems","tab","selectedImages","onImageSelect","onImageClick","getPhaseColor","phase","dateString","tag","tagIndex","FilterToolbar","onFilterChange","totalImages","selectedCount","onSelectAll","clearFilters","emptyFilters","phaseOptions","currentImage","slideshowMode","onToggleSlideshow","zoomLevel","setZoomLevel","panOffset","setPanOffset","isDragging","setIsDragging","dragStart","setDragStart","showMetadata","setShowMetadata","slideshowInterval","setSlideshowInterval","interval","handleNext","handleKeyDown","handlePrevious","handleZoomIn","handleZoomOut","handleZoomReset","nextImage","resetZoom","prevImage","handleMouseDown","handleMouseMove","handleMouseUp","handleDownload","BulkActions","onBulkDownload","onBulkDelete","onClearSelection","newTag","ProjectInfo","imageCount","ProjectGalleryViewer","setFilteredImages","setSelectedImages","setCurrentImage","isLightboxOpen","setIsLightboxOpen","isUploadingImages","setIsUploadingImages","setSlideshowMode","handleImageSelect","handleImageClick","handleImageUpload","fileInput","event","newImage","handleBulkDownload","selectedImageData","startSlideshow","DocumentTree","onDocumentUpload","expandedFolders","setExpandedFolders","dragOver","setDragOver","documentFolders","toggleFolder","folderId","handleDragOver","handleDragLeave","document","getFileIcon","getFileTypeColor","folder","WorkflowStatus","workflowSteps","currentStep","onStepUpdate","showDecisionModal","setShowDecisionModal","decisionStep","setDecisionStep","decisionPoints","getStepStatus","stepId","step","stepIndex","handleStepClick","handleDecision","decision","nextStep","getDecisionLabels","getStepNotes","isDecisionPoint","QuotationWorkflow","quotationData","setQuotationData","handleQuotationUpdate","calculateTotal","installation","travel","personnel","saveQuotation","sendQuotation","ProgressTracking","onPhotoUpload","selectedPhoto","setSelectedPhoto","showUploadModal","setShowUploadModal","progressPhotos","pendingPayments","completedMilestones","milestones","handlePhotoUpload","handlePhotoCapture","newPhoto","photo","milestone","isCompleted","payment","DocumentValidation","onValidationComplete","checklist","setChecklist","validationItems","categories","handleChecklistChange","itemId","stats","completed","requiredCompleted","isProjectReady","generateFinalPackage","categoryItems","categoryCompleted","ProjectDocumentationCenter","setProjects","workflowStep","setWorkflowStep","viewOptions","handleProjectSelect","handleWorkflowStepUpdate","newStep","handleDocumentUpload","ProjectCard","onSelect","onStageTransition","getPriorityLabel","getPriorityBadgeColor","DocumentUploadPanel","onUpload","selectedFile","setSelectedFile","documentType","setDocumentType","documentTypes","QuotationPanel","quotation","setQuotation","isSaving","setIsSaving","handleSave","getAdvanceAmount","getProgressAmount","ValidationPanel","validationNotes","setValidationNotes","handleSubmitForValidation","validation","handleApprove","handleReject","_v","_w","_x","_y","_z","ProjectWorkflowManagement","activeStage","setActiveStage","showControls","setShowControls","workflowStages","handleStageTransition","newStage","handleValidationSubmit","validationData","getProjectsByStage","stageId","stage","QuotationForm","onCalculationUpdate","onValidationSubmit","calculations","setCalculations","isCalculating","setIsCalculating","handleCalculationChange","updatedCalculations","handleAutoCalculate","autoCalculations","QuotationPreview","onVersionCreate","currentDate","material","_A","_C","_B","MaterialIdentification","onMaterialUpdate","materials","setMaterials","newMaterial","setNewMaterial","isAnalyzing","setIsAnalyzing","handleAddMaterial","updatedMaterials","handleMaterialChange","updatedMaterial","handleRemoveMaterial","handleAutoIdentify","autoMaterials","getTotalValue","CommunicationPanel","onSend","isSending","communicationMethod","setCommunicationMethod","setMessage","adjustmentNotes","setAdjustmentNotes","showAdjustments","setShowAdjustments","handleSend","generateDefaultMessage","defaultMessages","VersionControl","onVersionSelect","versionHistory","getStatusLabel","version","QuotationBuilder","currentQuotation","setCurrentQuotation","setQuotations","activeStep","setActiveStep","mockQuotations","updatedData","handleMaterialUpdate","subtotal","handleCalculationUpdate","handleSaveQuotation","updatedQuotation","handleCommunicationSend","method","steps","OrderDetailsModal","handleDownloadPDF","jsPDF","getPaymentTermLabel","tableColumns","tableRows","autoTable","col","finalY","term","termLower","ordenCompraService","numeroOrden","InventoryTable","onViewDetails","onUpdateStock","onCreatePO","onAddItem","onGenerateReport","sortField","setSortField","sortDirection","setSortDirection","sortedItems","paginatedItems","getStockStatus","current","reorderPoint","SortIcon","stockStatus","InventoryFilters","onClearFilters","filteredItems","inventoryItems","supplierOptions","suppliers","supplier","locationOptions","locations","StockAlerts","alerts","onDismissAlert","getAlertIcon","getAlertColor","getAlertBgColor","alert","PurchaseOrderPanel","orders","onViewOrder","onApproveOrder","onCreateOrder","onDeleteOrder","orderToDelete","setOrderToDelete","handleDeleteClick","onDownloadOrder","gray","formatText","text","leftX","rightX","baseY","maxWidthNotas","notaTexto","notaLineas","notaAltura","pagoY","infoPagoY","metodoPagoFormateado","prioridadFormateada","maxWidthComentarios","comentarioTexto","comentarioLineas","comentarioAltura","tableY","tableHead","tableBody","approvalSectionY","lineY","leftXLine","rightXLine","filteredOrders","InventoryStats","formatNumber","number","getChangeColor","change","getChangeIcon","firstItem","articuloService","useInventory","articulos","setArticulos","getArticulos","possibleArrayKeys","foundArray","NewItemModal","createArticulo","units","validateForm","newErrors","nuevoArticulo","itemForTable","handleReset","handleClose","cat","unit","ItemDetailsModal","EditItemModal","onUpdateSuccess","updateArticulo","CreatePOModal","initialItem","lowStockItems","setStep","selectedItems","setSelectedItems","orderDetails","setOrderDetails","paymentTermsOptions","orderQty","handleNextStep","handlePreviousStep","handleItemSelectionChange","selected","handleQuantityChange","newQty","qty","handlePriceChange","newPrice","price","handleDetailChange","orderData","timer","selectedIds","itemsToAdd","selectedItem","TIMEOUT","requisiService","timeoutId","query","useRequisi","requisitions","setRequisitions","requisitionData","updatedRequisition","operacService","useOperac","oportunities","setOportunities","getOportunities","RequisitionModal","requisition","onSave","createRequisition","updateRequisition","newItem","setNewItem","newManualItem","setNewManualItem","unitOptions","urgencyOptions","handleNewItemChange","handleNewManualItemChange","handleAddItem","handleAddManualItem","handleRemoveItem","fecha","formattedDate","materiales","materialesManuales","op","art","useOrder","ordenes","setOrdenes","getOrdenes","day","month","year","InventoryManagement","inventoryLoading","orderLoading","createOrden","updateOrden","requisitionsLoading","getRequisitions","deleteRequisition","mobileMenuOpen","setMobileMenuOpen","showNewItemModal","setShowNewItemModal","showItemDetailsModal","setShowItemDetailsModal","showEditItemModal","setShowEditItemModal","showCreatePOModal","setShowCreatePOModal","setSelectedItem","isInitialLoading","setIsInitialLoading","showOrderDetailsModal","setShowOrderDetailsModal","selectedOrder","setSelectedOrder","isUpdating","setIsUpdating","showItemSelectorModal","setShowItemSelectorModal","articulo","stockAlerts","currentStock","itemCode","supplierName","inventoryStats","totalValue","unitCost","outOfStockItems","categoryGroups","handleClearFilters","handleViewDetails","handleUpdateStock","inventoryItem","invItem","handleCreatePO","handleCloseItemDetailsModal","handleCloseEditItemModal","handleClosePOModal","handleSubmitPO","handleUpdateSuccess","handleDismissAlert","alertId","selectedRequisition","setSelectedRequisition","showRequisitionModal","setShowRequisitionModal","handleEditRequisition","req","reqForEdit","handleSaveRequisition","editedReq","reqToUpdate","handleViewOrder","handleCloseOrderDetails","handleDownloadOrder","handleDeleteOrder","handleApproveOrder","handleCreateOrder","handleExport","escapeCSV","csvHeaders","csvRows","csvWithBOM","h","handleImportInventory","input","sampleItems","handleAddNewItem","handleOpenNewItemModal","handleCloseNewItemModal","viewTabs","isMounted","BOM","CompanyBranding","Checkbox","indeterminate","checkboxId","Minus","CheckboxGroup","LoginForm","redirect","CredentialsHelper","mockCredentials","cred","SecurityFeatures","securityFeatures","complianceItems","feature","LoginPage","FilterGastos","totalCount","filteredCount","FilterControls","onReset","showAdvanced","setShowAdvanced","projectOptions","next","resetFilters","getActiveFiltersCount","finanzasService","PaymentAuthorizationModal","expense","onAuthorize","authData","setAuthData","isDeleting","setIsDeleting","paymentMethods","useFinanzas","finanzas","setFinanzas","targetId","f","dd","mm","yyyy","HH","MM","getExpenseStatusColor","statusValue","normId","normCode","getDocKey","mapGastoDocWithProjects","projectById","projectByCode","hhmm","proyectoNode","projectIdRaw","projectCodeRaw","projectName","projectCode","pid","pcode","requestedBy","startOfToday","endOfToday","addDays","endOfMonth","endOfYear","getQuarterRange","ExpenseTable","externalFilters","remoteRows","setRemoteRows","setSelectedIds","showAuthModal","setShowAuthModal","selectedExpense","setSelectedExpense","deleteGasto","alive","handler","ev","keyNew","byCode","codigo","ncode","applyFilters","dep","sta","min","max","rangeStart","rangeEnd","dow","rowSta","pname","amt","sortedRows","aTime","bTime","an","bn","paginatedRows","toggleOne","toggleAll","handleOpenView","handleAuthorizePayment","authorizationLevel","approverComments","paymentMethod","scheduledDate","requiresAdditionalApproval","expenseId","_id","handleDeleteExpense","snapshot","FinancialSummaryWidget","summaryData","COLORS","getVarianceColor","variance","getVarianceIcon","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar","PieChart","Pie","Cell","ReceiptManagementPanel","receipts","onCategorize","selectedReceipt","setSelectedReceipt","uploadProgress","setUploadProgress","filterCategory","setFilterCategory","handleFileUpload","progress","newReceipt","handleCategorize","receiptId","formatFileSize","bytes","sizes","filteredReceipts","receipt","NewExpenseModal","createGasto","loadingFinanzas","loadingProyectos","priorities","departmentBudgets","handleProjectChange","handleAmountChange","amountNumber","newExpense","isBusy","ModalGestionCompra","onDownload","isViewMode","gastosService","useGastos","getGastos","updateGasto","approveGasto","matchesEstado","GastosTable","selectedOrden","setSelectedOrden","orden","adaptedExpense","filteredBySearch","search","proveedor","fechaDesde","fechaHasta","matchSearch","matchCodigo","matchProveedor","fechaOrden","matchFechaDesde","matchFechaHasta","handleAuthorize","isRejection","FinanzasManagement","expenses","setExpenses","showNewExpenseModal","setShowNewExpenseModal","handleResetFilters","handleViewExpense","handleAddNewExpense","createdExpense","ExpenseTrackingTable","PersonnelTable","onViewProfile","onEditPersonnel","onAssignPPE","dataSource","sortedPersonnel","sorted","aVal","bVal","paginatedPersonnel","getStatusBadge","getComplianceBadge","SortableHeader","sortKey","emp","onExportData","complianceOptions","positionOptions","ComplianceDashboard","complianceData","onScheduleTraining","getStatusBg","ComplianceCard","icon","PersonnelModal","employee","openedFromEPP","localError","setLocalError","createPerson","updatePersonByEmpleadoId","isEPPOnly","medicalStudies","ppe","emergencyContact","medicalStatusOptions","relationshipOptions","parent","handlePPEChange","PersonnelManagement","selectedEmployee","setSelectedEmployee","modalMode","setModalMode","isModalOpen","setIsModalOpen","initialStep","setInitialStep","setOpenedFromEPP","filteredPersonnel","matchDept","matchStatus","matchPosition","matchHireDateFrom","matchHireDateTo","handleViewProfile","handleEditPersonnel","handleCreatePersonnel","handleAssignPPE","handleSavePersonnel","personnelData","handleExportData","dataToExport","header","handleViewComplianceDetails","handleScheduleTraining","handleSidebarToggle","handleMobileMenuToggle","mockComplianceData","useClient","success","setSuccess","clients","setClients","loadingRef","hasLoadedRef","clientsRef","getClients","createClient","clientData","prevClients","newClients","editClient","communicationService","cotizacionId","clienteId","oportunidadId","useCommunication","getComunicacionByCotizacionId","commData","ClientCard","onEditClient","onViewProjects","onViewContracts","capitalize","str","getHealthColor","health","ClientTable","sortedClients","paginatedClients","ClientFilters","industryOptions","ClientCommunicationPanel","createCommunication","getComunicacionesByCliente","showNewCommForm","setShowNewCommForm","communicationHistory","setCommunicationHistory","loadingHistory","setLoadingHistory","clientId","handleAddCommunication","getUrgencyColor","urgency","getTypeIcon","getTypeIconBg","comm","DocumentStatus","documents","onUploadDocument","onViewDocument","onDownloadDocument","getDocumentIcon","isExpiringSoon","expirationDate","diffTime","diffDays","isExpired","ContractAlerts","contracts","onViewContract","onRenewContract","onScheduleRenewal","getAlertType","contract","getAlertMessage","alertContracts","alertType","NewClientModal","initialData","additionalContacts","setAdditionalContacts","municipiosEmpresa","loadingMunicipiosEmpresa","errorMunicipiosEmpresa","municipiosDireccion","loadingMunicipiosDireccion","errorMunicipiosDireccion","extraContacts","industries","relationshipHealthOptions","cleanValue","addAdditionalContact","removeAdditionalContact","newContacts","handleAdditionalContactChange","contactosCompletos","contactos","industry","ClientManagement","selectedClient","setSelectedClient","showSidebar","setShowSidebar","showNewClientModal","setShowNewClientModal","clientCommunications","setClientCommunications","mockDocuments","mockContracts","filteredClients","setFilteredClients","empresa","contacto","relacion","estadoEmpresa","municipioEmpresa","estadoDireccion","municipioDireccion","rfc","handleExportClients","contactosAdicionales","loadClientCommunications","mappedComms","editModalState","setEditModalState","handleEditClient","handleSubmitEditClient","updatedClient","handleViewProjects","handleViewContracts","handleAddClient","handleSubmitNewClient","handleUploadDocument","handleViewDocument","handleDownloadDocument","handleViewContract","handleRenewContract","handleScheduleRenewal","WorkOrderModal","workOrder","onSaveSuccess","createWorkOrder","updateWorkOrder","clientProjects","setClientProjects","errorClients","assignClient","setAssignClient","normalize","selectedProjectId","match","nombreProyecto","ppeOptions","proyectoNombreFinal","proyectoIdFinal","savedOrder","datos","WorkOrderTable","workOrders","onAssignTechnician","onEditOrder","localRequisitions","setLocalRequisitions","deletedOrderIds","setDeletedOrderIds","stored","sortedOrders","paginatedData","orderId","newExpanded","reqForOrder","reqIndex","materialesInventario","technicianOptions","clearedFilters","getNoResultsMessage","InventoryPanel","onCreatePurchaseOrder","onRequestMaterial","onCreateRequisition","loadingRequis","inventario","getInventario","loadingInventario","useInventario","displayedRequisitions","getStockStatusColor","getRequestStatusColor","request","updatedList","mappedReq","updatedReq","stock","puntoReorden","unidad","allMaterials","StatsCards","cards","card","WorkOrderProcessing","setWorkOrders","setFilteredOrders","setStats","isRequisitionModalOpen","setIsRequisitionModalOpen","mockWorkOrders","mockStats","dueDate","startOfWeek","endOfWeek","newStatus","updatedOrders","wo","handleSaveOrder","newOrder","handleCreateNewOrder","handleCreateNewRequisition","newRequisition","savedRequisition","newReq","fechaActual","startY","totalOrdenes","completadas","pendientes","enProceso","resumenTexto","prioridadOrden","prioridadA","prioridadB","tableColumn","tallerService","useOperacAlt","deleteWorkOrder","WorkflowBoard","onStatusChange","onOrderSelect","columns","getOrderKey","orderOrId","sourceOrders","normalizeOrder","ordenTrabajo","proyectoNombre","cliente","tecnicos","prioridad","maybeEstado","prioridadLabel","fechaLimite","_rawProg","estadoProgreso","statusRaw","normalizedOrders","getProgressColor","localProgress","setLocalProgress","localHidden","setLocalHidden","localCompleted","setLocalCompleted","localStatusOverrides","setLocalStatusOverrides","hasChanges","serverProgress","handleMoveOrder","orderKey","newProgress","column","priorityRank","visibleOrders","__idx","stableKey","reactKey","parentProgress","localProg","rawProgress","computedProgress","priorityKey","rawTech","tech","reception","totalReceived","totalRequired","totalPending","WorkflowControls","currentShift","totalOrders","workOrdersIds","onForceRemove","onRevertStatus","localMissingByOrder","isWorkingHours","resolvePriority","direct","low","formatProgress","percent","maybe","generateReport","receptionMaterials","computeDailyProgressDelta","entries","todays","en","before","cur","buildMaterials","received","margin","delta","techs","cursorY","normalizeNumericPercent","best","rawDate","fromSelected","techArray","names","MaterialReceptionPanel","onMaterialReception","propSelectedOrder","receptionData","setReceptionData","newIssue","setNewIssue","approvedMaterials","setApprovedMaterials","approvedSource","setApprovedSource","materialsReception","setMaterialsReception","orderMaterialsCache","setOrderMaterialsCache","TALLER_PREFIX","TALLER_RECEIVED_PREFIX","saveApprovedToTaller","source","loadApprovedFromTaller","saveReceptionToTaller","receptionPayload","loadReceptionFromTaller","normalizeMaterialsForCache","first","normalizeAndAggregate","initMaterialsReception","persisted","persistedEntry","setCacheAndPersist","initial","handleOrderSelect","computeApprovedMaterialsFromOrder","extractApprovedFromArray","updateCache","cached","approvedLocal","manualMapped","normalizeKey","onlyDigits","nor","nd","matchedReqs","nk","kd","mats","mapped","approvedFromReq","gresp","matches","po","articles","approvedFromGastos","loadMaterialsForAllOrders","incomingKey","currentKey","dbReception","localReception","existingReception","receivedValue","notesValue","issuesValue","handleAddIssue","handleMaterialReceivedChange","handleRemoveIssue","handleSubmitReception","dbPayload","cachedMaterials","issue","parseQuantity","normalizeItem","descripcion","exist","SafetyChecklistPanel","onSafetyComplete","onLocalMissingChange","missingPPE","setMissingPPE","customMissing","setCustomMissing","persistedState","setPersistedState","storageKeyFor","loadLocalState","saveLocalState","safetyItems","PPE_LABEL_MAP","getPPEValue","snake","missingList","possibles","lowerMissing","getRecordedMissing","PPE_FIELDS","initialChecklist","section","saved","mergedChecklist","mergedMissing","incomingId","currentId","itemKey","handleMarkAllVerified","sectionId","checklistUpdates","missingUpdates","applies","handleMissingToggle","handleAddCustomMissing","lastNotifiedRef","localMissingLabels","sec","uniqueLabels","labelsKey","getCompletionPercentage","requiredKeys","uniqueReq","checkedItems","isChecklistComplete","toSave","handleSubmitChecklist","recorded","localMissing","missing","completedFlag","primaryButtonLabel","requiredForSelected","recordedMissing","disabledForChecklist","ck","AttendancePanel","attendanceData","setAttendanceData","currentTime","setCurrentTime","mockPersonnel","formatTime","timeString","labels","handleCheckOut","personnelId","currentTimeStr","present","late","absent","QualityControlPanel","onQualityUpdate","qualityData","setQualityData","qualityChecks","initialChecks","handleCheckChange","checkKey","newPhotos","totalChecks","completedChecks","areAllChecksComplete","handleQualityDecision","handleSubmitQuality","ChangeOrderPanel","onChangeOrder","changeData","setChangeData","showHistory","setShowHistory","changeTypes","handleSubmitChange","getChangeTypeIcon","icons","getChangeTypeColor","WorkshopOperationsManagement","activePanel","setActivePanel","panelMissingByOrder","setPanelMissingByOrder","setCurrentShift","updateWorkOrderRemote","deleteWorkOrderRemote","handleOrderStatusChange","matched","backendId","doRemoteDelete","remotePayload","handleForceRemove","needle","statusLabels","mapToColumnId","getPreviousColumn","computeProgressForColumn","handleRevertStatus","orderRef","orderCandidates","refCandidates","oc","rc","prevCol","restoredProgress","handleMaterialReception","handleSafetyChecklist","handleQualityControl","qcData","handleChangeOrder","panelOptions","hasPPEFields","keys","safetyOrders","missingArray","totalActive","onStageUpdate","onSafetyChecklist","onManufacturingUpdate","onQualityControl","onEvidenceSubmission","onReportToProjects","onRequestToPurchases","stages","handleWorkOrderAction","renderWorkOrderCard","_D","_E","_F","_H","_G","_J","_I","_K","_L","_M","stageWorkOrders","materialPhotos","setMaterialPhotos","notes","setNotes","selectedMaterials","setSelectedMaterials","handleMaterialCheck","workOrderId","materialIndex","condition","updatedItems","allReceived","hasDefects","defectiveItems","missingItems","photoUrls","handleCompleteReception","completeItems","hasCompleteItems","onSafetyUpdate","checklistNotes","setChecklistNotes","handleChecklistUpdate","requiredItems","completedRequired","safetyItem","si","handleCompleteChecklist","checkedRequired","workOrderItem","isChecked","onAttendanceUpdate","attendanceList","setAttendanceList","handleCheckIn","technicianId","updateAttendanceStats","presentCount","getStatusIcon","getStatusText","presentTechnicians","absentTechnicians","lateTechnicians","technician","qualityPhotos","setQualityPhotos","inspectionNotes","setInspectionNotes","qualityCheckpoints","handleCheckpointUpdate","checkpointId","passed","updatedCheckpoints","checkpoint","qualityCheckpoint","qc","criticalCheckpoints","passedCritical","hasFailures","criticalComplete","failedCheckpoints","handleCompleteInspection","totalCritical","completedCritical","workOrderCheckpoint","EvidenceSubmissionPanel","evidencePhotos","setEvidencePhotos","setDocuments","submissionNotes","setSubmissionNotes","requiredDocuments","evidenceCategories","photoData","documentData","handleSubmitEvidence","requiredDocs","uploadedRequired","evidencePackage","removePhoto","photoId","removeDocument","docId","updatePhotoDescription","getPhotosByCategory","categoryPhotos","docType","uploadedDoc","changeType","setChangeType","changeDescription","setChangeDescription","changeReason","setChangeReason","impactAssessment","setImpactAssessment","setRequestedBy","handleSubmitChangeOrder","changeOrderData","getChangeTypeInfo","ct","allChangeOrders","allChanges","changeOrder","typeInfo","count","co","WorkshopStats","statsCards","ShiftManagementPanel","shiftStats","shiftTips","tip","WorkshopOperationsCenter","workshopStats","setWorkshopStats","handleStageUpdate","prevOrders","materialData","safetyData","handleManufacturingUpdate","manufacturingData","handleEvidenceSubmission","evidenceData","handleAttendanceUpdate","handleReportToProjects","reportType","reportData","handleRequestToPurchases","requestType","requestData","opportunity","onAddCommunication","getComunicacionesByOportunidad","newCommunication","setNewCommunication","localHistory","setLocalHistory","loadCommunications","formattedComms","NewOpportunityModal","onCreateOpportunity","errorProyectos","proyectosCliente","proyectoOptions","loadingSalesReps","errorSalesReps","prevClientIdRef","proyecto","ubicacionTexto","salesRepOptions","newOpportunity","API_BASE","opportunityService","useOpportunity","oportunidades","setOportunidades","fetchOportunidades","opp","crearOportunidad","actualizarOportunidad","SalesOpportunityManagement","opportunities","setOpportunities","selectedOpportunity","setSelectedOpportunity","showNewOpportunityModal","setShowNewOpportunityModal","salesStages","mockOpportunities","handleCreateOpportunity","handleNewOpportunityClick","opportunityId","handleOpportunitySelect","handleCommunicationAdd","communication","getOpportunitiesByStage","getDurationColor","days","quotationService","revisionData","idCotizacion","params","useQuotation","cotizacion","onAddRevision","crearConstructor","getConstructorByCotizacionId","fetchConstructor","newAssumption","setNewAssumption","setHasChanges","addAssumption","newAssumptions","removeAssumption","assumption","MaterialRiskChecklist","updateMaterialesYRiesgos","getCotizacionById","quotationLoading","riskAssessment","setRiskAssessment","newRiskFactor","setNewRiskFactor","showInventorySelector","setShowInventorySelector","inventorySearch","setInventorySearch","loadingMaterials","setLoadingMaterials","fetchMateriales","cotizacionCompleta","filteredInventoryItems","searchLower","handleSelectInventoryItem","addMaterial","removeMaterial","addRiskFactor","removeRiskFactor","dataToSave","calculateOverallRisk","highRiskMaterials","highRiskFactors","mediumRiskMaterials","mediumRiskFactors","getRiskColor","risk","totalCost","factor","getCurrentDate","quotationRef","setClientData","projectData","setProjectData","setCotizacionCompleta","proyectoData","setProyectoData","safeFindIdAndName","idFields","nameFields","cotizacionDetallada","dataContent","cotizacionConFechas","proyectoId","proyectoDetallado","normalizeList","clientsResp","proyectosList","clientsList","cotizacionData","infoBasica","clienteArr","proyectoArr","clientIdFromInfo","clientNameFromInfo","projectIdFromInfo","projectNameFromInfo","foundClient","contactoObj","resolvedCronograma","tiempo","fechaInicio","fechaFin","handleExportPDF","canvas","html2canvas","imgData","pdf","pdfWidth","pdfHeight","imgWidth","imgHeight","ratio","imgX","handlePrint","printStyles","style","styleElement","cost","ClientCommunication","createCotizacionCommunication","clientHistory","setClientHistory","historyRef","handleSendCommunication","idCliente","RevisionHistory","getRevision","setRevisionData","expandedAreas","setExpandedAreas","toggleArea","area","revisiones","revision","InternalReview","onSubmitReview","upsertRevision","areaTieneDatos","tieneComentarios","estaRevisado","tieneRevisor","filtrarAreasConDatos","areasRevision","areasFiltradas","sendRevisionToBackend","reviewData","fechaHoy","areaMap","tieneComentariosGenerales","overallComments","areaName","revisionPayload","setReviewData","setOverallComments","reviewAreas","handleAreaChange","handleSubmitForReview","updatedReview","handleApproveReview","approvedReview","totalAreas","reviewedAreas","formatearNumero","valor","partes","entero","decimal","NewQuotationModal","onCreateQuotation","setIsFromOpportunity","resetModalState","proyectoHook","clientHook","currentOpportunity","initialFormData","isFromOpportunity","getClientNameById","loadingEmployees","assignedToOptions","uniqueValue","intPart","decPart","createQuotation","proyectoSeleccionado","montoTotal","tiempoEjecucion","cronograma","ubicacionStr","PRIORIDADES_VALIDAS","prioridadValue","quotationPayload","QuotationDevelopmentCenter","selectedQuotation","setSelectedQuotation","isNewQuotationModalOpen","setIsNewQuotationModalOpen","newQuotation","getCotizaciones","mappedQuotation","handleQuotationSelect","quotationDetail","quotationId","quote","handleAddRevision","newRevision","handleSubmitInternalReview","handleClientCommunication","newComm","StartupTrackingPanel","startupData","setStartupData","handleCheckboxChange","handleConfirm","confirmationData","isAllRequirementsMet","ExecutionProgressPanel","progressUpdate","setProgressUpdate","selectedMilestone","setSelectedMilestone","handleMilestoneUpdate","milestoneId","updatedMilestones","totalMilestones","calculatedProgress","handleProgressUpdate","participantInput","setParticipantInput","handleAddParticipant","handleRemoveParticipant","participant","getCommunicationIcon","template","ChangeRequestPanel","onRequestChange","newChangeRequest","setNewChangeRequest","showForm","setShowForm","changeRequest","handleApproveChange","changeId","DeliveryManagementPanel","deliveryUpdate","setDeliveryUpdate","acceptanceChecklist","setAcceptanceChecklist","correctionRequest","setCorrectionRequest","updatedChecklist","handleDeliveryConfirmation","allChecked","deliveryData","handleCorrectionRequest","correctionData","getDeliveryTypeIcon","correction","TraceabilityPanel","newEvidence","setNewEvidence","newAgreement","setNewAgreement","showEvidenceForm","setShowEvidenceForm","showAgreementForm","setShowAgreementForm","handleAddEvidence","evidence","updatedTraceability","handleAddAgreement","agreement","getEvidenceIcon","getEvidenceColor","SalesExecutionMonitoring","executionPhases","handlePhaseTransition","newPhase","handleStartupConfirmation","progressData","handleChangeRequest","handleDeliveryUpdate","getProjectsByPhase","phaseId","paymentStatusOptions","normalizarEstado","obtenerEstadoNormalizado","statusLabel","normalizado","obtenerColorEstado","estadoCanonico","rawId","clienteEncontrado","endDate","priorityLabel","assignedPersonnel","resumen","totalAbonadoDB","totalRestanteDB","porcentajePagadoDB","onRegisterAbono","onViewAbonos","getPaidAmount","loadingAny","sourceDocs","aDate","bDate","estadoA","estadoB","pageProjects","maxSize","estadoInfo","colorClasses","fromDB","paid","remaining","BASE_PATH","abonoService","motivo","AbonosStats","getTotalPagado","refreshTrigger","totalAbonosDesdeAPI","setTotalAbonosDesdeAPI","cargandoTotalAbonos","setCargandoTotalAbonos","respuesta","getBudget","obtenerTotalRestante","presupuesto","pagado","totalRecaudado","pagados","enPausa","totalRestante","estadoLower","totalRecaudadoFinal","progresoGeneral","isUSDRef","abort","handleExchangeRateChange","detalle","useAbono","abonos","setAbonos","abonoSeleccionado","setAbonoSeleccionado","cacheParamsRef","abonosRef","createLock","getAbonos","sameParams","getAbonoById","getAbonosByProyecto","createAbono","fechaISO","dia","mes","a√±o","cleanPayload","editAbono","deleteAbono","aprobarAbono","rechazarAbono","formatearMoneda","cantidad","limitarRango","minimo","maximo","formatearFechaParaApi","fechaLocalStr","rellenar","formatearFechaISOUTC","formatearNumeroConSeparadores","numeroLimpio","parteEntera","parteDecimal","limpiarNumeroFormateado","ModalRegistroAbono","currentPaid","presupuestoProyecto","saldoInicial","idProyecto","setIdProyecto","fechaLocal","setFechaLocal","monto","setMonto","montoFormateado","setMontoFormateado","metodoPago","setMetodoPago","setDescripcion","descripcionMetodo","setDescripcionMetodo","referenciaPago","setReferenciaPago","notas","setNotas","infoProyecto","setInfoProyecto","totalAbonado","setTotalAbonado","saldo","setSaldo","presupuestoTotal","totalAbonadoData","nuevoSaldo","hoy","totalPagadoPrevio","progreso","manejarCambioMonto","valorLimpio","valorFinal","totalPagadoAcumulado","importeTotal","manejarEnvio","montoNum","excedente","creado","deFechaALocalInput","fechaObj","EditAbonoModal","abono","montoOriginal","setMontoOriginal","montoAbono","fechaAbono","metodoPagoAbono","descripcionAbono","descripcionMetodoAbono","referenciaPagoAbono","notasAbono","montoFinal","diferencia","abonoId","actualizado","formatearFecha","ViewAbonosModal","onAbonoUpdated","abonoAEditar","setAbonoAEditar","manejarEditarAbono","manejarCerrarEdicion","manejarAbonoActualizado","abonoActualizado","saldoRestante","porcentajePagado","folio","numeroAbono","activo","lista","cambiado","estadoApi","cargando","proyectosFiltrados","setProyectosFiltrados","modalCrearAbierto","setModalCrearAbierto","modalEditarAbierto","setModalEditarAbierto","setProyectoSeleccionado","barraLateralColapsada","setBarraLateralColapsada","menuEncabezadoAbierto","setMenuEncabezadoAbierto","abonosPorProyecto","setAbonosPorProyecto","bruto","registrarAbonoPara","setRegistrarAbonoPara","verAbonosPara","setVerAbonosPara","mostrarSelectorProyecto","setMostrarSelectorProyecto","refreshAbonosStats","setRefreshAbonosStats","obtenerNombre","obtenerCodigo","obtenerEstadoUi","estadoCache","estadoNormalizado","obtenerDepartamento","obtenerPrioridad","obtenerInicio","obtenerFin","obtenerPresupuesto","obtenerIdProyecto","obtenerTotalPagado","normalizar","manejarCambioFiltros","filtros","filtrados","proy","estadoObjetivo","estadoObjetivoNormalizado","estadoProyecto","estadoRaw","estadoDirecto","estadoProyectoCanonico","depto","prioridadProy","prioridadNormalizada","prioridadFiltroNormalizada","filtroInicio","filtroFin","manejarEditarProyecto","manejarAccionMasiva","accion","idsSeleccionados","abrirRegistroAbono","cerrarRegistroAbono","abrirVerAbonos","cerrarVerAbonos","seleccionarProyectoParaAbono","manejarGuardarAbono","siguiente","errorRecarga","manejarActualizarProyecto","manejarExportarDesdeFiltros","encabezados","escapar","necesita","filas","restante","RegisterAbonoModal","userService","useUsers","users","setUsers","fetchUsers","createUser","updateUser","UserFormModal","initialFormState","showPassword","setShowPassword","contactoSinEspacios","handleChange","numericValue","UserTable","onEditUser","paginatedUsers","UserManagement","selectedUser","setSelectedUser","handleCreateUser","handleEditUser","handleCloseModal","handleSaveUser","Routes","DashboardRedirect","Navigate","RouterRoutes","Route","FinancialManagement","ProjectAbonosManagement","NotificationItem","onRemove","getIcon","CheckCircle","AlertCircle","AlertTriangle","Info","getTypeClass","handleActionClick","NotificationContainer","App","BrowserRouter","container","root","createRoot"],"mappings":"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"}